var IU=i=>{throw TypeError(i)};var hk=(i,t,r)=>t.has(i)||IU("Cannot "+r);var me=(i,t,r)=>(hk(i,t,"read from private field"),r?r.call(i):t.get(i)),Et=(i,t,r)=>t.has(i)?IU("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,r),it=(i,t,r,o)=>(hk(i,t,"write to private field"),o?o.call(i,r):t.set(i,r),r),Zt=(i,t,r)=>(hk(i,t,"access private method"),r);var RT=(i,t,r,o)=>({set _(l){it(i,t,l,r)},get _(){return me(i,t,o)}});function Foe(i,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in i)){const c=Object.getOwnPropertyDescriptor(o,l);c&&Object.defineProperty(i,l,c.get?c:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var Boe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function HL(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var z9={exports:{}},Kw={},W9={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv=Symbol.for("react.element"),$oe=Symbol.for("react.portal"),Voe=Symbol.for("react.fragment"),Goe=Symbol.for("react.strict_mode"),Hoe=Symbol.for("react.profiler"),qoe=Symbol.for("react.provider"),Koe=Symbol.for("react.context"),zoe=Symbol.for("react.forward_ref"),Woe=Symbol.for("react.suspense"),Yoe=Symbol.for("react.memo"),Xoe=Symbol.for("react.lazy"),CU=Symbol.iterator;function Qoe(i){return i===null||typeof i!="object"?null:(i=CU&&i[CU]||i["@@iterator"],typeof i=="function"?i:null)}var Y9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X9=Object.assign,Q9={};function mm(i,t,r){this.props=i,this.context=t,this.refs=Q9,this.updater=r||Y9}mm.prototype.isReactComponent={};mm.prototype.setState=function(i,t){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,t,"setState")};mm.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function J9(){}J9.prototype=mm.prototype;function qL(i,t,r){this.props=i,this.context=t,this.refs=Q9,this.updater=r||Y9}var KL=qL.prototype=new J9;KL.constructor=qL;X9(KL,mm.prototype);KL.isPureReactComponent=!0;var kU=Array.isArray,Z9=Object.prototype.hasOwnProperty,zL={current:null},e$={key:!0,ref:!0,__self:!0,__source:!0};function t$(i,t,r){var o,l={},c=null,h=null;if(t!=null)for(o in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(c=""+t.key),t)Z9.call(t,o)&&!e$.hasOwnProperty(o)&&(l[o]=t[o]);var d=arguments.length-2;if(d===1)l.children=r;else if(1<d){for(var m=Array(d),v=0;v<d;v++)m[v]=arguments[v+2];l.children=m}if(i&&i.defaultProps)for(o in d=i.defaultProps,d)l[o]===void 0&&(l[o]=d[o]);return{$$typeof:qv,type:i,key:c,ref:h,props:l,_owner:zL.current}}function Joe(i,t){return{$$typeof:qv,type:i.type,key:t,ref:i.ref,props:i.props,_owner:i._owner}}function WL(i){return typeof i=="object"&&i!==null&&i.$$typeof===qv}function Zoe(i){var t={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(r){return t[r]})}var _U=/\/+/g;function fk(i,t){return typeof i=="object"&&i!==null&&i.key!=null?Zoe(""+i.key):t.toString(36)}function wS(i,t,r,o,l){var c=typeof i;(c==="undefined"||c==="boolean")&&(i=null);var h=!1;if(i===null)h=!0;else switch(c){case"string":case"number":h=!0;break;case"object":switch(i.$$typeof){case qv:case $oe:h=!0}}if(h)return h=i,l=l(h),i=o===""?"."+fk(h,0):o,kU(l)?(r="",i!=null&&(r=i.replace(_U,"$&/")+"/"),wS(l,t,r,"",function(v){return v})):l!=null&&(WL(l)&&(l=Joe(l,r+(!l.key||h&&h.key===l.key?"":(""+l.key).replace(_U,"$&/")+"/")+i)),t.push(l)),1;if(h=0,o=o===""?".":o+":",kU(i))for(var d=0;d<i.length;d++){c=i[d];var m=o+fk(c,d);h+=wS(c,t,r,m,l)}else if(m=Qoe(i),typeof m=="function")for(i=m.call(i),d=0;!(c=i.next()).done;)c=c.value,m=o+fk(c,d++),h+=wS(c,t,r,m,l);else if(c==="object")throw t=String(i),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function LT(i,t,r){if(i==null)return i;var o=[],l=0;return wS(i,o,"","",function(c){return t.call(r,c,l++)}),o}function eae(i){if(i._status===-1){var t=i._result;t=t(),t.then(function(r){(i._status===0||i._status===-1)&&(i._status=1,i._result=r)},function(r){(i._status===0||i._status===-1)&&(i._status=2,i._result=r)}),i._status===-1&&(i._status=0,i._result=t)}if(i._status===1)return i._result.default;throw i._result}var ms={current:null},ES={transition:null},tae={ReactCurrentDispatcher:ms,ReactCurrentBatchConfig:ES,ReactCurrentOwner:zL};function n$(){throw Error("act(...) is not supported in production builds of React.")}an.Children={map:LT,forEach:function(i,t,r){LT(i,function(){t.apply(this,arguments)},r)},count:function(i){var t=0;return LT(i,function(){t++}),t},toArray:function(i){return LT(i,function(t){return t})||[]},only:function(i){if(!WL(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};an.Component=mm;an.Fragment=Voe;an.Profiler=Hoe;an.PureComponent=qL;an.StrictMode=Goe;an.Suspense=Woe;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tae;an.act=n$;an.cloneElement=function(i,t,r){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var o=X9({},i.props),l=i.key,c=i.ref,h=i._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,h=zL.current),t.key!==void 0&&(l=""+t.key),i.type&&i.type.defaultProps)var d=i.type.defaultProps;for(m in t)Z9.call(t,m)&&!e$.hasOwnProperty(m)&&(o[m]=t[m]===void 0&&d!==void 0?d[m]:t[m])}var m=arguments.length-2;if(m===1)o.children=r;else if(1<m){d=Array(m);for(var v=0;v<m;v++)d[v]=arguments[v+2];o.children=d}return{$$typeof:qv,type:i.type,key:l,ref:c,props:o,_owner:h}};an.createContext=function(i){return i={$$typeof:Koe,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:qoe,_context:i},i.Consumer=i};an.createElement=t$;an.createFactory=function(i){var t=t$.bind(null,i);return t.type=i,t};an.createRef=function(){return{current:null}};an.forwardRef=function(i){return{$$typeof:zoe,render:i}};an.isValidElement=WL;an.lazy=function(i){return{$$typeof:Xoe,_payload:{_status:-1,_result:i},_init:eae}};an.memo=function(i,t){return{$$typeof:Yoe,type:i,compare:t===void 0?null:t}};an.startTransition=function(i){var t=ES.transition;ES.transition={};try{i()}finally{ES.transition=t}};an.unstable_act=n$;an.useCallback=function(i,t){return ms.current.useCallback(i,t)};an.useContext=function(i){return ms.current.useContext(i)};an.useDebugValue=function(){};an.useDeferredValue=function(i){return ms.current.useDeferredValue(i)};an.useEffect=function(i,t){return ms.current.useEffect(i,t)};an.useId=function(){return ms.current.useId()};an.useImperativeHandle=function(i,t,r){return ms.current.useImperativeHandle(i,t,r)};an.useInsertionEffect=function(i,t){return ms.current.useInsertionEffect(i,t)};an.useLayoutEffect=function(i,t){return ms.current.useLayoutEffect(i,t)};an.useMemo=function(i,t){return ms.current.useMemo(i,t)};an.useReducer=function(i,t,r){return ms.current.useReducer(i,t,r)};an.useRef=function(i){return ms.current.useRef(i)};an.useState=function(i){return ms.current.useState(i)};an.useSyncExternalStore=function(i,t,r){return ms.current.useSyncExternalStore(i,t,r)};an.useTransition=function(){return ms.current.useTransition()};an.version="18.3.1";W9.exports=an;var M=W9.exports;const Be=HL(M),YL=Foe({__proto__:null,default:Be},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nae=M,rae=Symbol.for("react.element"),iae=Symbol.for("react.fragment"),sae=Object.prototype.hasOwnProperty,oae=nae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aae={key:!0,ref:!0,__self:!0,__source:!0};function r$(i,t,r){var o,l={},c=null,h=null;r!==void 0&&(c=""+r),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(h=t.ref);for(o in t)sae.call(t,o)&&!aae.hasOwnProperty(o)&&(l[o]=t[o]);if(i&&i.defaultProps)for(o in t=i.defaultProps,t)l[o]===void 0&&(l[o]=t[o]);return{$$typeof:rae,type:i,key:c,ref:h,props:l,_owner:oae.current}}Kw.Fragment=iae;Kw.jsx=r$;Kw.jsxs=r$;z9.exports=Kw;var S=z9.exports,i$={exports:{}},go={},s$={exports:{}},o$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function t(le,pe){var be=le.length;le.push(pe);e:for(;0<be;){var Ce=be-1>>>1,ke=le[Ce];if(0<l(ke,pe))le[Ce]=pe,le[be]=ke,be=Ce;else break e}}function r(le){return le.length===0?null:le[0]}function o(le){if(le.length===0)return null;var pe=le[0],be=le.pop();if(be!==pe){le[0]=be;e:for(var Ce=0,ke=le.length,Ue=ke>>>1;Ce<Ue;){var qe=2*(Ce+1)-1,ut=le[qe],X=qe+1,Pe=le[X];if(0>l(ut,be))X<ke&&0>l(Pe,ut)?(le[Ce]=Pe,le[X]=be,Ce=X):(le[Ce]=ut,le[qe]=be,Ce=qe);else if(X<ke&&0>l(Pe,be))le[Ce]=Pe,le[X]=be,Ce=X;else break e}}return pe}function l(le,pe){var be=le.sortIndex-pe.sortIndex;return be!==0?be:le.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,d=h.now();i.unstable_now=function(){return h.now()-d}}var m=[],v=[],x=1,T=null,E=3,A=!1,k=!1,_=!1,R=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(le){for(var pe=r(v);pe!==null;){if(pe.callback===null)o(v);else if(pe.startTime<=le)o(v),pe.sortIndex=pe.expirationTime,t(m,pe);else break;pe=r(v)}}function $(le){if(_=!1,N(le),!k)if(r(m)!==null)k=!0,se(V);else{var pe=r(v);pe!==null&&ue($,pe.startTime-le)}}function V(le,pe){k=!1,_&&(_=!1,P(K),K=-1),A=!0;var be=E;try{for(N(pe),T=r(m);T!==null&&(!(T.expirationTime>pe)||le&&!fe());){var Ce=T.callback;if(typeof Ce=="function"){T.callback=null,E=T.priorityLevel;var ke=Ce(T.expirationTime<=pe);pe=i.unstable_now(),typeof ke=="function"?T.callback=ke:T===r(m)&&o(m),N(pe)}else o(m);T=r(m)}if(T!==null)var Ue=!0;else{var qe=r(v);qe!==null&&ue($,qe.startTime-pe),Ue=!1}return Ue}finally{T=null,E=be,A=!1}}var W=!1,C=null,K=-1,ee=5,Q=-1;function fe(){return!(i.unstable_now()-Q<ee)}function O(){if(C!==null){var le=i.unstable_now();Q=le;var pe=!0;try{pe=C(!0,le)}finally{pe?re():(W=!1,C=null)}}else W=!1}var re;if(typeof D=="function")re=function(){D(O)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Ae=ce.port2;ce.port1.onmessage=O,re=function(){Ae.postMessage(null)}}else re=function(){R(O,0)};function se(le){C=le,W||(W=!0,re())}function ue(le,pe){K=R(function(){le(i.unstable_now())},pe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(le){le.callback=null},i.unstable_continueExecution=function(){k||A||(k=!0,se(V))},i.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<le?Math.floor(1e3/le):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_getFirstCallbackNode=function(){return r(m)},i.unstable_next=function(le){switch(E){case 1:case 2:case 3:var pe=3;break;default:pe=E}var be=E;E=pe;try{return le()}finally{E=be}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(le,pe){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var be=E;E=le;try{return pe()}finally{E=be}},i.unstable_scheduleCallback=function(le,pe,be){var Ce=i.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ce+be:Ce):be=Ce,le){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=be+ke,le={id:x++,callback:pe,priorityLevel:le,startTime:be,expirationTime:ke,sortIndex:-1},be>Ce?(le.sortIndex=be,t(v,le),r(m)===null&&le===r(v)&&(_?(P(K),K=-1):_=!0,ue($,be-Ce))):(le.sortIndex=ke,t(m,le),k||A||(k=!0,se(V))),le},i.unstable_shouldYield=fe,i.unstable_wrapCallback=function(le){var pe=E;return function(){var be=E;E=pe;try{return le.apply(this,arguments)}finally{E=be}}}})(o$);s$.exports=o$;var lae=s$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uae=M,mo=lae;function Me(i){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+i,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+i+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a$=new Set,tv={};function _h(i,t){Zp(i,t),Zp(i+"Capture",t)}function Zp(i,t){for(tv[i]=t,i=0;i<t.length;i++)a$.add(t[i])}var lu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),O_=Object.prototype.hasOwnProperty,cae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RU={},LU={};function dae(i){return O_.call(LU,i)?!0:O_.call(RU,i)?!1:cae.test(i)?LU[i]=!0:(RU[i]=!0,!1)}function hae(i,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function fae(i,t,r,o){if(t===null||typeof t>"u"||hae(i,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gs(i,t,r,o,l,c,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=i,this.type=t,this.sanitizeURL=c,this.removeEmptyString=h}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Mi[i]=new gs(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var t=i[0];Mi[t]=new gs(t,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Mi[i]=new gs(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Mi[i]=new gs(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Mi[i]=new gs(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Mi[i]=new gs(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Mi[i]=new gs(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Mi[i]=new gs(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Mi[i]=new gs(i,5,!1,i.toLowerCase(),null,!1,!1)});var XL=/[\-:]([a-z])/g;function QL(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var t=i.replace(XL,QL);Mi[t]=new gs(t,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var t=i.replace(XL,QL);Mi[t]=new gs(t,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var t=i.replace(XL,QL);Mi[t]=new gs(t,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Mi[i]=new gs(i,1,!1,i.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new gs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Mi[i]=new gs(i,1,!1,i.toLowerCase(),null,!0,!0)});function JL(i,t,r,o){var l=Mi.hasOwnProperty(t)?Mi[t]:null;(l!==null?l.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fae(t,r,l,o)&&(r=null),o||l===null?dae(t)&&(r===null?i.removeAttribute(t):i.setAttribute(t,""+r)):l.mustUseProperty?i[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,o=l.attributeNamespace,r===null?i.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,o?i.setAttributeNS(o,t,r):i.setAttribute(t,r))))}var vu=uae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,PT=Symbol.for("react.element"),hp=Symbol.for("react.portal"),fp=Symbol.for("react.fragment"),ZL=Symbol.for("react.strict_mode"),j_=Symbol.for("react.profiler"),l$=Symbol.for("react.provider"),u$=Symbol.for("react.context"),e4=Symbol.for("react.forward_ref"),U_=Symbol.for("react.suspense"),F_=Symbol.for("react.suspense_list"),t4=Symbol.for("react.memo"),ic=Symbol.for("react.lazy"),c$=Symbol.for("react.offscreen"),PU=Symbol.iterator;function x0(i){return i===null||typeof i!="object"?null:(i=PU&&i[PU]||i["@@iterator"],typeof i=="function"?i:null)}var mr=Object.assign,pk;function P0(i){if(pk===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);pk=t&&t[1]||""}return`
`+pk+i}var mk=!1;function gk(i,t){if(!i||mk)return"";mk=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(v){var o=v}Reflect.construct(i,[],t)}else{try{t.call()}catch(v){o=v}i.call(t.prototype)}else{try{throw Error()}catch(v){o=v}i()}}catch(v){if(v&&o&&typeof v.stack=="string"){for(var l=v.stack.split(`
`),c=o.stack.split(`
`),h=l.length-1,d=c.length-1;1<=h&&0<=d&&l[h]!==c[d];)d--;for(;1<=h&&0<=d;h--,d--)if(l[h]!==c[d]){if(h!==1||d!==1)do if(h--,d--,0>d||l[h]!==c[d]){var m=`
`+l[h].replace(" at new "," at ");return i.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",i.displayName)),m}while(1<=h&&0<=d);break}}}finally{mk=!1,Error.prepareStackTrace=r}return(i=i?i.displayName||i.name:"")?P0(i):""}function pae(i){switch(i.tag){case 5:return P0(i.type);case 16:return P0("Lazy");case 13:return P0("Suspense");case 19:return P0("SuspenseList");case 0:case 2:case 15:return i=gk(i.type,!1),i;case 11:return i=gk(i.type.render,!1),i;case 1:return i=gk(i.type,!0),i;default:return""}}function B_(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case fp:return"Fragment";case hp:return"Portal";case j_:return"Profiler";case ZL:return"StrictMode";case U_:return"Suspense";case F_:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case u$:return(i.displayName||"Context")+".Consumer";case l$:return(i._context.displayName||"Context")+".Provider";case e4:var t=i.render;return i=i.displayName,i||(i=t.displayName||t.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case t4:return t=i.displayName||null,t!==null?t:B_(i.type)||"Memo";case ic:t=i._payload,i=i._init;try{return B_(i(t))}catch{}}return null}function mae(i){var t=i.type;switch(i.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=t.render,i=i.displayName||i.name||"",t.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B_(t);case 8:return t===ZL?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Oc(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function d$(i){var t=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gae(i){var t=d$(i)?"checked":"value",r=Object.getOwnPropertyDescriptor(i.constructor.prototype,t),o=""+i[t];if(!i.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,c=r.set;return Object.defineProperty(i,t,{configurable:!0,get:function(){return l.call(this)},set:function(h){o=""+h,c.call(this,h)}}),Object.defineProperty(i,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(h){o=""+h},stopTracking:function(){i._valueTracker=null,delete i[t]}}}}function DT(i){i._valueTracker||(i._valueTracker=gae(i))}function h$(i){if(!i)return!1;var t=i._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return i&&(o=d$(i)?i.checked?"true":"false":i.value),i=o,i!==r?(t.setValue(i),!0):!1}function WS(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function $_(i,t){var r=t.checked;return mr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??i._wrapperState.initialChecked})}function DU(i,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=Oc(t.value!=null?t.value:r),i._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function f$(i,t){t=t.checked,t!=null&&JL(i,"checked",t,!1)}function V_(i,t){f$(i,t);var r=Oc(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+r):i.value!==""+r&&(i.value=""+r);else if(o==="submit"||o==="reset"){i.removeAttribute("value");return}t.hasOwnProperty("value")?G_(i,t.type,r):t.hasOwnProperty("defaultValue")&&G_(i,t.type,Oc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(i.defaultChecked=!!t.defaultChecked)}function NU(i,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+i._wrapperState.initialValue,r||t===i.value||(i.value=t),i.defaultValue=t}r=i.name,r!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,r!==""&&(i.name=r)}function G_(i,t,r){(t!=="number"||WS(i.ownerDocument)!==i)&&(r==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+r&&(i.defaultValue=""+r))}var D0=Array.isArray;function Ip(i,t,r,o){if(i=i.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<i.length;r++)l=t.hasOwnProperty("$"+i[r].value),i[r].selected!==l&&(i[r].selected=l),l&&o&&(i[r].defaultSelected=!0)}else{for(r=""+Oc(r),t=null,l=0;l<i.length;l++){if(i[l].value===r){i[l].selected=!0,o&&(i[l].defaultSelected=!0);return}t!==null||i[l].disabled||(t=i[l])}t!==null&&(t.selected=!0)}}function H_(i,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Me(91));return mr({},t,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function MU(i,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Me(92));if(D0(r)){if(1<r.length)throw Error(Me(93));r=r[0]}t=r}t==null&&(t=""),r=t}i._wrapperState={initialValue:Oc(r)}}function p$(i,t){var r=Oc(t.value),o=Oc(t.defaultValue);r!=null&&(r=""+r,r!==i.value&&(i.value=r),t.defaultValue==null&&i.defaultValue!==r&&(i.defaultValue=r)),o!=null&&(i.defaultValue=""+o)}function OU(i){var t=i.textContent;t===i._wrapperState.initialValue&&t!==""&&t!==null&&(i.value=t)}function m$(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q_(i,t){return i==null||i==="http://www.w3.org/1999/xhtml"?m$(t):i==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var NT,g$=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,l){MSApp.execUnsafeLocalFunction(function(){return i(t,r,o,l)})}:i}(function(i,t){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=t;else{for(NT=NT||document.createElement("div"),NT.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=NT.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;t.firstChild;)i.appendChild(t.firstChild)}});function nv(i,t){if(t){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=t;return}}i.textContent=t}var B0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vae=["Webkit","ms","Moz","O"];Object.keys(B0).forEach(function(i){vae.forEach(function(t){t=t+i.charAt(0).toUpperCase()+i.substring(1),B0[t]=B0[i]})});function v$(i,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||B0.hasOwnProperty(i)&&B0[i]?(""+t).trim():t+"px"}function y$(i,t){i=i.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,l=v$(r,t[r],o);r==="float"&&(r="cssFloat"),o?i.setProperty(r,l):i[r]=l}}var yae=mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K_(i,t){if(t){if(yae[i]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Me(137,i));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Me(62))}}function z_(i,t){if(i.indexOf("-")===-1)return typeof t.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W_=null;function n4(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Y_=null,Cp=null,kp=null;function jU(i){if(i=Wv(i)){if(typeof Y_!="function")throw Error(Me(280));var t=i.stateNode;t&&(t=Qw(t),Y_(i.stateNode,i.type,t))}}function x$(i){Cp?kp?kp.push(i):kp=[i]:Cp=i}function T$(){if(Cp){var i=Cp,t=kp;if(kp=Cp=null,jU(i),t)for(i=0;i<t.length;i++)jU(t[i])}}function S$(i,t){return i(t)}function w$(){}var vk=!1;function E$(i,t,r){if(vk)return i(t,r);vk=!0;try{return S$(i,t,r)}finally{vk=!1,(Cp!==null||kp!==null)&&(w$(),T$())}}function rv(i,t){var r=i.stateNode;if(r===null)return null;var o=Qw(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(i=i.type,o=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!o;break e;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(Me(231,t,typeof r));return r}var X_=!1;if(lu)try{var T0={};Object.defineProperty(T0,"passive",{get:function(){X_=!0}}),window.addEventListener("test",T0,T0),window.removeEventListener("test",T0,T0)}catch{X_=!1}function xae(i,t,r,o,l,c,h,d,m){var v=Array.prototype.slice.call(arguments,3);try{t.apply(r,v)}catch(x){this.onError(x)}}var $0=!1,YS=null,XS=!1,Q_=null,Tae={onError:function(i){$0=!0,YS=i}};function Sae(i,t,r,o,l,c,h,d,m){$0=!1,YS=null,xae.apply(Tae,arguments)}function wae(i,t,r,o,l,c,h,d,m){if(Sae.apply(this,arguments),$0){if($0){var v=YS;$0=!1,YS=null}else throw Error(Me(198));XS||(XS=!0,Q_=v)}}function Rh(i){var t=i,r=i;if(i.alternate)for(;t.return;)t=t.return;else{i=t;do t=i,t.flags&4098&&(r=t.return),i=t.return;while(i)}return t.tag===3?r:null}function b$(i){if(i.tag===13){var t=i.memoizedState;if(t===null&&(i=i.alternate,i!==null&&(t=i.memoizedState)),t!==null)return t.dehydrated}return null}function UU(i){if(Rh(i)!==i)throw Error(Me(188))}function Eae(i){var t=i.alternate;if(!t){if(t=Rh(i),t===null)throw Error(Me(188));return t!==i?null:i}for(var r=i,o=t;;){var l=r.return;if(l===null)break;var c=l.alternate;if(c===null){if(o=l.return,o!==null){r=o;continue}break}if(l.child===c.child){for(c=l.child;c;){if(c===r)return UU(l),i;if(c===o)return UU(l),t;c=c.sibling}throw Error(Me(188))}if(r.return!==o.return)r=l,o=c;else{for(var h=!1,d=l.child;d;){if(d===r){h=!0,r=l,o=c;break}if(d===o){h=!0,o=l,r=c;break}d=d.sibling}if(!h){for(d=c.child;d;){if(d===r){h=!0,r=c,o=l;break}if(d===o){h=!0,o=c,r=l;break}d=d.sibling}if(!h)throw Error(Me(189))}}if(r.alternate!==o)throw Error(Me(190))}if(r.tag!==3)throw Error(Me(188));return r.stateNode.current===r?i:t}function A$(i){return i=Eae(i),i!==null?I$(i):null}function I$(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var t=I$(i);if(t!==null)return t;i=i.sibling}return null}var C$=mo.unstable_scheduleCallback,FU=mo.unstable_cancelCallback,bae=mo.unstable_shouldYield,Aae=mo.unstable_requestPaint,Pr=mo.unstable_now,Iae=mo.unstable_getCurrentPriorityLevel,r4=mo.unstable_ImmediatePriority,k$=mo.unstable_UserBlockingPriority,QS=mo.unstable_NormalPriority,Cae=mo.unstable_LowPriority,_$=mo.unstable_IdlePriority,zw=null,Za=null;function kae(i){if(Za&&typeof Za.onCommitFiberRoot=="function")try{Za.onCommitFiberRoot(zw,i,void 0,(i.current.flags&128)===128)}catch{}}var ga=Math.clz32?Math.clz32:Lae,_ae=Math.log,Rae=Math.LN2;function Lae(i){return i>>>=0,i===0?32:31-(_ae(i)/Rae|0)|0}var MT=64,OT=4194304;function N0(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function JS(i,t){var r=i.pendingLanes;if(r===0)return 0;var o=0,l=i.suspendedLanes,c=i.pingedLanes,h=r&268435455;if(h!==0){var d=h&~l;d!==0?o=N0(d):(c&=h,c!==0&&(o=N0(c)))}else h=r&~l,h!==0?o=N0(h):c!==0&&(o=N0(c));if(o===0)return 0;if(t!==0&&t!==o&&!(t&l)&&(l=o&-o,c=t&-t,l>=c||l===16&&(c&4194240)!==0))return t;if(o&4&&(o|=r&16),t=i.entangledLanes,t!==0)for(i=i.entanglements,t&=o;0<t;)r=31-ga(t),l=1<<r,o|=i[r],t&=~l;return o}function Pae(i,t){switch(i){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dae(i,t){for(var r=i.suspendedLanes,o=i.pingedLanes,l=i.expirationTimes,c=i.pendingLanes;0<c;){var h=31-ga(c),d=1<<h,m=l[h];m===-1?(!(d&r)||d&o)&&(l[h]=Pae(d,t)):m<=t&&(i.expiredLanes|=d),c&=~d}}function J_(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function R$(){var i=MT;return MT<<=1,!(MT&4194240)&&(MT=64),i}function yk(i){for(var t=[],r=0;31>r;r++)t.push(i);return t}function Kv(i,t,r){i.pendingLanes|=t,t!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,t=31-ga(t),i[t]=r}function Nae(i,t){var r=i.pendingLanes&~t;i.pendingLanes=t,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=t,i.mutableReadLanes&=t,i.entangledLanes&=t,t=i.entanglements;var o=i.eventTimes;for(i=i.expirationTimes;0<r;){var l=31-ga(r),c=1<<l;t[l]=0,o[l]=-1,i[l]=-1,r&=~c}}function i4(i,t){var r=i.entangledLanes|=t;for(i=i.entanglements;r;){var o=31-ga(r),l=1<<o;l&t|i[o]&t&&(i[o]|=t),r&=~l}}var Ln=0;function L$(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var P$,s4,D$,N$,M$,Z_=!1,jT=[],Ac=null,Ic=null,Cc=null,iv=new Map,sv=new Map,uc=[],Mae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BU(i,t){switch(i){case"focusin":case"focusout":Ac=null;break;case"dragenter":case"dragleave":Ic=null;break;case"mouseover":case"mouseout":Cc=null;break;case"pointerover":case"pointerout":iv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sv.delete(t.pointerId)}}function S0(i,t,r,o,l,c){return i===null||i.nativeEvent!==c?(i={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:c,targetContainers:[l]},t!==null&&(t=Wv(t),t!==null&&s4(t)),i):(i.eventSystemFlags|=o,t=i.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),i)}function Oae(i,t,r,o,l){switch(t){case"focusin":return Ac=S0(Ac,i,t,r,o,l),!0;case"dragenter":return Ic=S0(Ic,i,t,r,o,l),!0;case"mouseover":return Cc=S0(Cc,i,t,r,o,l),!0;case"pointerover":var c=l.pointerId;return iv.set(c,S0(iv.get(c)||null,i,t,r,o,l)),!0;case"gotpointercapture":return c=l.pointerId,sv.set(c,S0(sv.get(c)||null,i,t,r,o,l)),!0}return!1}function O$(i){var t=Xd(i.target);if(t!==null){var r=Rh(t);if(r!==null){if(t=r.tag,t===13){if(t=b$(r),t!==null){i.blockedOn=t,M$(i.priority,function(){D$(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function bS(i){if(i.blockedOn!==null)return!1;for(var t=i.targetContainers;0<t.length;){var r=eR(i.domEventName,i.eventSystemFlags,t[0],i.nativeEvent);if(r===null){r=i.nativeEvent;var o=new r.constructor(r.type,r);W_=o,r.target.dispatchEvent(o),W_=null}else return t=Wv(r),t!==null&&s4(t),i.blockedOn=r,!1;t.shift()}return!0}function $U(i,t,r){bS(i)&&r.delete(t)}function jae(){Z_=!1,Ac!==null&&bS(Ac)&&(Ac=null),Ic!==null&&bS(Ic)&&(Ic=null),Cc!==null&&bS(Cc)&&(Cc=null),iv.forEach($U),sv.forEach($U)}function w0(i,t){i.blockedOn===t&&(i.blockedOn=null,Z_||(Z_=!0,mo.unstable_scheduleCallback(mo.unstable_NormalPriority,jae)))}function ov(i){function t(l){return w0(l,i)}if(0<jT.length){w0(jT[0],i);for(var r=1;r<jT.length;r++){var o=jT[r];o.blockedOn===i&&(o.blockedOn=null)}}for(Ac!==null&&w0(Ac,i),Ic!==null&&w0(Ic,i),Cc!==null&&w0(Cc,i),iv.forEach(t),sv.forEach(t),r=0;r<uc.length;r++)o=uc[r],o.blockedOn===i&&(o.blockedOn=null);for(;0<uc.length&&(r=uc[0],r.blockedOn===null);)O$(r),r.blockedOn===null&&uc.shift()}var _p=vu.ReactCurrentBatchConfig,ZS=!0;function Uae(i,t,r,o){var l=Ln,c=_p.transition;_p.transition=null;try{Ln=1,o4(i,t,r,o)}finally{Ln=l,_p.transition=c}}function Fae(i,t,r,o){var l=Ln,c=_p.transition;_p.transition=null;try{Ln=4,o4(i,t,r,o)}finally{Ln=l,_p.transition=c}}function o4(i,t,r,o){if(ZS){var l=eR(i,t,r,o);if(l===null)kk(i,t,o,ew,r),BU(i,o);else if(Oae(l,i,t,r,o))o.stopPropagation();else if(BU(i,o),t&4&&-1<Mae.indexOf(i)){for(;l!==null;){var c=Wv(l);if(c!==null&&P$(c),c=eR(i,t,r,o),c===null&&kk(i,t,o,ew,r),c===l)break;l=c}l!==null&&o.stopPropagation()}else kk(i,t,o,null,r)}}var ew=null;function eR(i,t,r,o){if(ew=null,i=n4(o),i=Xd(i),i!==null)if(t=Rh(i),t===null)i=null;else if(r=t.tag,r===13){if(i=b$(t),i!==null)return i;i=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;i=null}else t!==i&&(i=null);return ew=i,null}function j$(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Iae()){case r4:return 1;case k$:return 4;case QS:case Cae:return 16;case _$:return 536870912;default:return 16}default:return 16}}var wc=null,a4=null,AS=null;function U$(){if(AS)return AS;var i,t=a4,r=t.length,o,l="value"in wc?wc.value:wc.textContent,c=l.length;for(i=0;i<r&&t[i]===l[i];i++);var h=r-i;for(o=1;o<=h&&t[r-o]===l[c-o];o++);return AS=l.slice(i,1<o?1-o:void 0)}function IS(i){var t=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&t===13&&(i=13)):i=t,i===10&&(i=13),32<=i||i===13?i:0}function UT(){return!0}function VU(){return!1}function vo(i){function t(r,o,l,c,h){this._reactName=r,this._targetInst=l,this.type=o,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var d in i)i.hasOwnProperty(d)&&(r=i[d],this[d]=r?r(c):c[d]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?UT:VU,this.isPropagationStopped=VU,this}return mr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=UT)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=UT)},persist:function(){},isPersistent:UT}),t}var gm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l4=vo(gm),zv=mr({},gm,{view:0,detail:0}),Bae=vo(zv),xk,Tk,E0,Ww=mr({},zv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u4,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==E0&&(E0&&i.type==="mousemove"?(xk=i.screenX-E0.screenX,Tk=i.screenY-E0.screenY):Tk=xk=0,E0=i),xk)},movementY:function(i){return"movementY"in i?i.movementY:Tk}}),GU=vo(Ww),$ae=mr({},Ww,{dataTransfer:0}),Vae=vo($ae),Gae=mr({},zv,{relatedTarget:0}),Sk=vo(Gae),Hae=mr({},gm,{animationName:0,elapsedTime:0,pseudoElement:0}),qae=vo(Hae),Kae=mr({},gm,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),zae=vo(Kae),Wae=mr({},gm,{data:0}),HU=vo(Wae),Yae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jae(i){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(i):(i=Qae[i])?!!t[i]:!1}function u4(){return Jae}var Zae=mr({},zv,{key:function(i){if(i.key){var t=Yae[i.key]||i.key;if(t!=="Unidentified")return t}return i.type==="keypress"?(i=IS(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Xae[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u4,charCode:function(i){return i.type==="keypress"?IS(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?IS(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ele=vo(Zae),tle=mr({},Ww,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qU=vo(tle),nle=mr({},zv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u4}),rle=vo(nle),ile=mr({},gm,{propertyName:0,elapsedTime:0,pseudoElement:0}),sle=vo(ile),ole=mr({},Ww,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ale=vo(ole),lle=[9,13,27,32],c4=lu&&"CompositionEvent"in window,V0=null;lu&&"documentMode"in document&&(V0=document.documentMode);var ule=lu&&"TextEvent"in window&&!V0,F$=lu&&(!c4||V0&&8<V0&&11>=V0),KU=" ",zU=!1;function B$(i,t){switch(i){case"keyup":return lle.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $$(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var pp=!1;function cle(i,t){switch(i){case"compositionend":return $$(t);case"keypress":return t.which!==32?null:(zU=!0,KU);case"textInput":return i=t.data,i===KU&&zU?null:i;default:return null}}function dle(i,t){if(pp)return i==="compositionend"||!c4&&B$(i,t)?(i=U$(),AS=a4=wc=null,pp=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return F$&&t.locale!=="ko"?null:t.data;default:return null}}var hle={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WU(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t==="input"?!!hle[i.type]:t==="textarea"}function V$(i,t,r,o){x$(o),t=tw(t,"onChange"),0<t.length&&(r=new l4("onChange","change",null,r,o),i.push({event:r,listeners:t}))}var G0=null,av=null;function fle(i){Z$(i,0)}function Yw(i){var t=vp(i);if(h$(t))return i}function ple(i,t){if(i==="change")return t}var G$=!1;if(lu){var wk;if(lu){var Ek="oninput"in document;if(!Ek){var YU=document.createElement("div");YU.setAttribute("oninput","return;"),Ek=typeof YU.oninput=="function"}wk=Ek}else wk=!1;G$=wk&&(!document.documentMode||9<document.documentMode)}function XU(){G0&&(G0.detachEvent("onpropertychange",H$),av=G0=null)}function H$(i){if(i.propertyName==="value"&&Yw(av)){var t=[];V$(t,av,i,n4(i)),E$(fle,t)}}function mle(i,t,r){i==="focusin"?(XU(),G0=t,av=r,G0.attachEvent("onpropertychange",H$)):i==="focusout"&&XU()}function gle(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yw(av)}function vle(i,t){if(i==="click")return Yw(t)}function yle(i,t){if(i==="input"||i==="change")return Yw(t)}function xle(i,t){return i===t&&(i!==0||1/i===1/t)||i!==i&&t!==t}var ya=typeof Object.is=="function"?Object.is:xle;function lv(i,t){if(ya(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;var r=Object.keys(i),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var l=r[o];if(!O_.call(t,l)||!ya(i[l],t[l]))return!1}return!0}function QU(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function JU(i,t){var r=QU(i);i=0;for(var o;r;){if(r.nodeType===3){if(o=i+r.textContent.length,i<=t&&o>=t)return{node:r,offset:t-i};i=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=QU(r)}}function q$(i,t){return i&&t?i===t?!0:i&&i.nodeType===3?!1:t&&t.nodeType===3?q$(i,t.parentNode):"contains"in i?i.contains(t):i.compareDocumentPosition?!!(i.compareDocumentPosition(t)&16):!1:!1}function K$(){for(var i=window,t=WS();t instanceof i.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)i=t.contentWindow;else break;t=WS(i.document)}return t}function d4(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t&&(t==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||t==="textarea"||i.contentEditable==="true")}function Tle(i){var t=K$(),r=i.focusedElem,o=i.selectionRange;if(t!==r&&r&&r.ownerDocument&&q$(r.ownerDocument.documentElement,r)){if(o!==null&&d4(r)){if(t=o.start,i=o.end,i===void 0&&(i=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(i,r.value.length);else if(i=(t=r.ownerDocument||document)&&t.defaultView||window,i.getSelection){i=i.getSelection();var l=r.textContent.length,c=Math.min(o.start,l);o=o.end===void 0?c:Math.min(o.end,l),!i.extend&&c>o&&(l=o,o=c,c=l),l=JU(r,c);var h=JU(r,o);l&&h&&(i.rangeCount!==1||i.anchorNode!==l.node||i.anchorOffset!==l.offset||i.focusNode!==h.node||i.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),i.removeAllRanges(),c>o?(i.addRange(t),i.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),i.addRange(t)))}}for(t=[],i=r;i=i.parentNode;)i.nodeType===1&&t.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)i=t[r],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Sle=lu&&"documentMode"in document&&11>=document.documentMode,mp=null,tR=null,H0=null,nR=!1;function ZU(i,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nR||mp==null||mp!==WS(o)||(o=mp,"selectionStart"in o&&d4(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),H0&&lv(H0,o)||(H0=o,o=tw(tR,"onSelect"),0<o.length&&(t=new l4("onSelect","select",null,t,r),i.push({event:t,listeners:o}),t.target=mp)))}function FT(i,t){var r={};return r[i.toLowerCase()]=t.toLowerCase(),r["Webkit"+i]="webkit"+t,r["Moz"+i]="moz"+t,r}var gp={animationend:FT("Animation","AnimationEnd"),animationiteration:FT("Animation","AnimationIteration"),animationstart:FT("Animation","AnimationStart"),transitionend:FT("Transition","TransitionEnd")},bk={},z$={};lu&&(z$=document.createElement("div").style,"AnimationEvent"in window||(delete gp.animationend.animation,delete gp.animationiteration.animation,delete gp.animationstart.animation),"TransitionEvent"in window||delete gp.transitionend.transition);function Xw(i){if(bk[i])return bk[i];if(!gp[i])return i;var t=gp[i],r;for(r in t)if(t.hasOwnProperty(r)&&r in z$)return bk[i]=t[r];return i}var W$=Xw("animationend"),Y$=Xw("animationiteration"),X$=Xw("animationstart"),Q$=Xw("transitionend"),J$=new Map,eF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hc(i,t){J$.set(i,t),_h(t,[i])}for(var Ak=0;Ak<eF.length;Ak++){var Ik=eF[Ak],wle=Ik.toLowerCase(),Ele=Ik[0].toUpperCase()+Ik.slice(1);Hc(wle,"on"+Ele)}Hc(W$,"onAnimationEnd");Hc(Y$,"onAnimationIteration");Hc(X$,"onAnimationStart");Hc("dblclick","onDoubleClick");Hc("focusin","onFocus");Hc("focusout","onBlur");Hc(Q$,"onTransitionEnd");Zp("onMouseEnter",["mouseout","mouseover"]);Zp("onMouseLeave",["mouseout","mouseover"]);Zp("onPointerEnter",["pointerout","pointerover"]);Zp("onPointerLeave",["pointerout","pointerover"]);_h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_h("onBeforeInput",["compositionend","keypress","textInput","paste"]);_h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var M0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ble=new Set("cancel close invalid load scroll toggle".split(" ").concat(M0));function tF(i,t,r){var o=i.type||"unknown-event";i.currentTarget=r,wae(o,t,void 0,i),i.currentTarget=null}function Z$(i,t){t=(t&4)!==0;for(var r=0;r<i.length;r++){var o=i[r],l=o.event;o=o.listeners;e:{var c=void 0;if(t)for(var h=o.length-1;0<=h;h--){var d=o[h],m=d.instance,v=d.currentTarget;if(d=d.listener,m!==c&&l.isPropagationStopped())break e;tF(l,d,v),c=m}else for(h=0;h<o.length;h++){if(d=o[h],m=d.instance,v=d.currentTarget,d=d.listener,m!==c&&l.isPropagationStopped())break e;tF(l,d,v),c=m}}}if(XS)throw i=Q_,XS=!1,Q_=null,i}function Wn(i,t){var r=t[aR];r===void 0&&(r=t[aR]=new Set);var o=i+"__bubble";r.has(o)||(eV(t,i,2,!1),r.add(o))}function Ck(i,t,r){var o=0;t&&(o|=4),eV(r,i,o,t)}var BT="_reactListening"+Math.random().toString(36).slice(2);function uv(i){if(!i[BT]){i[BT]=!0,a$.forEach(function(r){r!=="selectionchange"&&(ble.has(r)||Ck(r,!1,i),Ck(r,!0,i))});var t=i.nodeType===9?i:i.ownerDocument;t===null||t[BT]||(t[BT]=!0,Ck("selectionchange",!1,t))}}function eV(i,t,r,o){switch(j$(t)){case 1:var l=Uae;break;case 4:l=Fae;break;default:l=o4}r=l.bind(null,t,r,i),l=void 0,!X_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),o?l!==void 0?i.addEventListener(t,r,{capture:!0,passive:l}):i.addEventListener(t,r,!0):l!==void 0?i.addEventListener(t,r,{passive:l}):i.addEventListener(t,r,!1)}function kk(i,t,r,o,l){var c=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var h=o.tag;if(h===3||h===4){var d=o.stateNode.containerInfo;if(d===l||d.nodeType===8&&d.parentNode===l)break;if(h===4)for(h=o.return;h!==null;){var m=h.tag;if((m===3||m===4)&&(m=h.stateNode.containerInfo,m===l||m.nodeType===8&&m.parentNode===l))return;h=h.return}for(;d!==null;){if(h=Xd(d),h===null)return;if(m=h.tag,m===5||m===6){o=c=h;continue e}d=d.parentNode}}o=o.return}E$(function(){var v=c,x=n4(r),T=[];e:{var E=J$.get(i);if(E!==void 0){var A=l4,k=i;switch(i){case"keypress":if(IS(r)===0)break e;case"keydown":case"keyup":A=ele;break;case"focusin":k="focus",A=Sk;break;case"focusout":k="blur",A=Sk;break;case"beforeblur":case"afterblur":A=Sk;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=GU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Vae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=rle;break;case W$:case Y$:case X$:A=qae;break;case Q$:A=sle;break;case"scroll":A=Bae;break;case"wheel":A=ale;break;case"copy":case"cut":case"paste":A=zae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=qU}var _=(t&4)!==0,R=!_&&i==="scroll",P=_?E!==null?E+"Capture":null:E;_=[];for(var D=v,N;D!==null;){N=D;var $=N.stateNode;if(N.tag===5&&$!==null&&(N=$,P!==null&&($=rv(D,P),$!=null&&_.push(cv(D,$,N)))),R)break;D=D.return}0<_.length&&(E=new A(E,k,null,r,x),T.push({event:E,listeners:_}))}}if(!(t&7)){e:{if(E=i==="mouseover"||i==="pointerover",A=i==="mouseout"||i==="pointerout",E&&r!==W_&&(k=r.relatedTarget||r.fromElement)&&(Xd(k)||k[uu]))break e;if((A||E)&&(E=x.window===x?x:(E=x.ownerDocument)?E.defaultView||E.parentWindow:window,A?(k=r.relatedTarget||r.toElement,A=v,k=k?Xd(k):null,k!==null&&(R=Rh(k),k!==R||k.tag!==5&&k.tag!==6)&&(k=null)):(A=null,k=v),A!==k)){if(_=GU,$="onMouseLeave",P="onMouseEnter",D="mouse",(i==="pointerout"||i==="pointerover")&&(_=qU,$="onPointerLeave",P="onPointerEnter",D="pointer"),R=A==null?E:vp(A),N=k==null?E:vp(k),E=new _($,D+"leave",A,r,x),E.target=R,E.relatedTarget=N,$=null,Xd(x)===v&&(_=new _(P,D+"enter",k,r,x),_.target=N,_.relatedTarget=R,$=_),R=$,A&&k)t:{for(_=A,P=k,D=0,N=_;N;N=qf(N))D++;for(N=0,$=P;$;$=qf($))N++;for(;0<D-N;)_=qf(_),D--;for(;0<N-D;)P=qf(P),N--;for(;D--;){if(_===P||P!==null&&_===P.alternate)break t;_=qf(_),P=qf(P)}_=null}else _=null;A!==null&&nF(T,E,A,_,!1),k!==null&&R!==null&&nF(T,R,k,_,!0)}}e:{if(E=v?vp(v):window,A=E.nodeName&&E.nodeName.toLowerCase(),A==="select"||A==="input"&&E.type==="file")var V=ple;else if(WU(E))if(G$)V=yle;else{V=gle;var W=mle}else(A=E.nodeName)&&A.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(V=vle);if(V&&(V=V(i,v))){V$(T,V,r,x);break e}W&&W(i,E,v),i==="focusout"&&(W=E._wrapperState)&&W.controlled&&E.type==="number"&&G_(E,"number",E.value)}switch(W=v?vp(v):window,i){case"focusin":(WU(W)||W.contentEditable==="true")&&(mp=W,tR=v,H0=null);break;case"focusout":H0=tR=mp=null;break;case"mousedown":nR=!0;break;case"contextmenu":case"mouseup":case"dragend":nR=!1,ZU(T,r,x);break;case"selectionchange":if(Sle)break;case"keydown":case"keyup":ZU(T,r,x)}var C;if(c4)e:{switch(i){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else pp?B$(i,r)&&(K="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(K="onCompositionStart");K&&(F$&&r.locale!=="ko"&&(pp||K!=="onCompositionStart"?K==="onCompositionEnd"&&pp&&(C=U$()):(wc=x,a4="value"in wc?wc.value:wc.textContent,pp=!0)),W=tw(v,K),0<W.length&&(K=new HU(K,i,null,r,x),T.push({event:K,listeners:W}),C?K.data=C:(C=$$(r),C!==null&&(K.data=C)))),(C=ule?cle(i,r):dle(i,r))&&(v=tw(v,"onBeforeInput"),0<v.length&&(x=new HU("onBeforeInput","beforeinput",null,r,x),T.push({event:x,listeners:v}),x.data=C))}Z$(T,t)})}function cv(i,t,r){return{instance:i,listener:t,currentTarget:r}}function tw(i,t){for(var r=t+"Capture",o=[];i!==null;){var l=i,c=l.stateNode;l.tag===5&&c!==null&&(l=c,c=rv(i,r),c!=null&&o.unshift(cv(i,c,l)),c=rv(i,t),c!=null&&o.push(cv(i,c,l))),i=i.return}return o}function qf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function nF(i,t,r,o,l){for(var c=t._reactName,h=[];r!==null&&r!==o;){var d=r,m=d.alternate,v=d.stateNode;if(m!==null&&m===o)break;d.tag===5&&v!==null&&(d=v,l?(m=rv(r,c),m!=null&&h.unshift(cv(r,m,d))):l||(m=rv(r,c),m!=null&&h.push(cv(r,m,d)))),r=r.return}h.length!==0&&i.push({event:t,listeners:h})}var Ale=/\r\n?/g,Ile=/\u0000|\uFFFD/g;function rF(i){return(typeof i=="string"?i:""+i).replace(Ale,`
`).replace(Ile,"")}function $T(i,t,r){if(t=rF(t),rF(i)!==t&&r)throw Error(Me(425))}function nw(){}var rR=null,iR=null;function sR(i,t){return i==="textarea"||i==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oR=typeof setTimeout=="function"?setTimeout:void 0,Cle=typeof clearTimeout=="function"?clearTimeout:void 0,iF=typeof Promise=="function"?Promise:void 0,kle=typeof queueMicrotask=="function"?queueMicrotask:typeof iF<"u"?function(i){return iF.resolve(null).then(i).catch(_le)}:oR;function _le(i){setTimeout(function(){throw i})}function _k(i,t){var r=t,o=0;do{var l=r.nextSibling;if(i.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(o===0){i.removeChild(l),ov(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=l}while(r);ov(t)}function kc(i){for(;i!=null;i=i.nextSibling){var t=i.nodeType;if(t===1||t===3)break;if(t===8){if(t=i.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return i}function sF(i){i=i.previousSibling;for(var t=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return i;t--}else r==="/$"&&t++}i=i.previousSibling}return null}var vm=Math.random().toString(36).slice(2),Wa="__reactFiber$"+vm,dv="__reactProps$"+vm,uu="__reactContainer$"+vm,aR="__reactEvents$"+vm,Rle="__reactListeners$"+vm,Lle="__reactHandles$"+vm;function Xd(i){var t=i[Wa];if(t)return t;for(var r=i.parentNode;r;){if(t=r[uu]||r[Wa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(i=sF(i);i!==null;){if(r=i[Wa])return r;i=sF(i)}return t}i=r,r=i.parentNode}return null}function Wv(i){return i=i[Wa]||i[uu],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function vp(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Me(33))}function Qw(i){return i[dv]||null}var lR=[],yp=-1;function qc(i){return{current:i}}function Xn(i){0>yp||(i.current=lR[yp],lR[yp]=null,yp--)}function Gn(i,t){yp++,lR[yp]=i.current,i.current=t}var jc={},Xi=qc(jc),Os=qc(!1),mh=jc;function em(i,t){var r=i.type.contextTypes;if(!r)return jc;var o=i.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var l={},c;for(c in r)l[c]=t[c];return o&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=t,i.__reactInternalMemoizedMaskedChildContext=l),l}function js(i){return i=i.childContextTypes,i!=null}function rw(){Xn(Os),Xn(Xi)}function oF(i,t,r){if(Xi.current!==jc)throw Error(Me(168));Gn(Xi,t),Gn(Os,r)}function tV(i,t,r){var o=i.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var l in o)if(!(l in t))throw Error(Me(108,mae(i)||"Unknown",l));return mr({},r,o)}function iw(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||jc,mh=Xi.current,Gn(Xi,i),Gn(Os,Os.current),!0}function aF(i,t,r){var o=i.stateNode;if(!o)throw Error(Me(169));r?(i=tV(i,t,mh),o.__reactInternalMemoizedMergedChildContext=i,Xn(Os),Xn(Xi),Gn(Xi,i)):Xn(Os),Gn(Os,r)}var Zl=null,Jw=!1,Rk=!1;function nV(i){Zl===null?Zl=[i]:Zl.push(i)}function Ple(i){Jw=!0,nV(i)}function Kc(){if(!Rk&&Zl!==null){Rk=!0;var i=0,t=Ln;try{var r=Zl;for(Ln=1;i<r.length;i++){var o=r[i];do o=o(!0);while(o!==null)}Zl=null,Jw=!1}catch(l){throw Zl!==null&&(Zl=Zl.slice(i+1)),C$(r4,Kc),l}finally{Ln=t,Rk=!1}}return null}var xp=[],Tp=0,sw=null,ow=0,Do=[],No=0,gh=null,nu=1,ru="";function Gd(i,t){xp[Tp++]=ow,xp[Tp++]=sw,sw=i,ow=t}function rV(i,t,r){Do[No++]=nu,Do[No++]=ru,Do[No++]=gh,gh=i;var o=nu;i=ru;var l=32-ga(o)-1;o&=~(1<<l),r+=1;var c=32-ga(t)+l;if(30<c){var h=l-l%5;c=(o&(1<<h)-1).toString(32),o>>=h,l-=h,nu=1<<32-ga(t)+l|r<<l|o,ru=c+i}else nu=1<<c|r<<l|o,ru=i}function h4(i){i.return!==null&&(Gd(i,1),rV(i,1,0))}function f4(i){for(;i===sw;)sw=xp[--Tp],xp[Tp]=null,ow=xp[--Tp],xp[Tp]=null;for(;i===gh;)gh=Do[--No],Do[No]=null,ru=Do[--No],Do[No]=null,nu=Do[--No],Do[No]=null}var ho=null,co=null,er=!1,pa=null;function iV(i,t){var r=Mo(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=i,t=i.deletions,t===null?(i.deletions=[r],i.flags|=16):t.push(r)}function lF(i,t){switch(i.tag){case 5:var r=i.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(i.stateNode=t,ho=i,co=kc(t.firstChild),!0):!1;case 6:return t=i.pendingProps===""||t.nodeType!==3?null:t,t!==null?(i.stateNode=t,ho=i,co=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=gh!==null?{id:nu,overflow:ru}:null,i.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Mo(18,null,null,0),r.stateNode=t,r.return=i,i.child=r,ho=i,co=null,!0):!1;default:return!1}}function uR(i){return(i.mode&1)!==0&&(i.flags&128)===0}function cR(i){if(er){var t=co;if(t){var r=t;if(!lF(i,t)){if(uR(i))throw Error(Me(418));t=kc(r.nextSibling);var o=ho;t&&lF(i,t)?iV(o,r):(i.flags=i.flags&-4097|2,er=!1,ho=i)}}else{if(uR(i))throw Error(Me(418));i.flags=i.flags&-4097|2,er=!1,ho=i}}}function uF(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ho=i}function VT(i){if(i!==ho)return!1;if(!er)return uF(i),er=!0,!1;var t;if((t=i.tag!==3)&&!(t=i.tag!==5)&&(t=i.type,t=t!=="head"&&t!=="body"&&!sR(i.type,i.memoizedProps)),t&&(t=co)){if(uR(i))throw sV(),Error(Me(418));for(;t;)iV(i,t),t=kc(t.nextSibling)}if(uF(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Me(317));e:{for(i=i.nextSibling,t=0;i;){if(i.nodeType===8){var r=i.data;if(r==="/$"){if(t===0){co=kc(i.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}i=i.nextSibling}co=null}}else co=ho?kc(i.stateNode.nextSibling):null;return!0}function sV(){for(var i=co;i;)i=kc(i.nextSibling)}function tm(){co=ho=null,er=!1}function p4(i){pa===null?pa=[i]:pa.push(i)}var Dle=vu.ReactCurrentBatchConfig;function b0(i,t,r){if(i=r.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Me(309));var o=r.stateNode}if(!o)throw Error(Me(147,i));var l=o,c=""+i;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(h){var d=l.refs;h===null?delete d[c]:d[c]=h},t._stringRef=c,t)}if(typeof i!="string")throw Error(Me(284));if(!r._owner)throw Error(Me(290,i))}return i}function GT(i,t){throw i=Object.prototype.toString.call(t),Error(Me(31,i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i))}function cF(i){var t=i._init;return t(i._payload)}function oV(i){function t(P,D){if(i){var N=P.deletions;N===null?(P.deletions=[D],P.flags|=16):N.push(D)}}function r(P,D){if(!i)return null;for(;D!==null;)t(P,D),D=D.sibling;return null}function o(P,D){for(P=new Map;D!==null;)D.key!==null?P.set(D.key,D):P.set(D.index,D),D=D.sibling;return P}function l(P,D){return P=Pc(P,D),P.index=0,P.sibling=null,P}function c(P,D,N){return P.index=N,i?(N=P.alternate,N!==null?(N=N.index,N<D?(P.flags|=2,D):N):(P.flags|=2,D)):(P.flags|=1048576,D)}function h(P){return i&&P.alternate===null&&(P.flags|=2),P}function d(P,D,N,$){return D===null||D.tag!==6?(D=jk(N,P.mode,$),D.return=P,D):(D=l(D,N),D.return=P,D)}function m(P,D,N,$){var V=N.type;return V===fp?x(P,D,N.props.children,$,N.key):D!==null&&(D.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ic&&cF(V)===D.type)?($=l(D,N.props),$.ref=b0(P,D,N),$.return=P,$):($=DS(N.type,N.key,N.props,null,P.mode,$),$.ref=b0(P,D,N),$.return=P,$)}function v(P,D,N,$){return D===null||D.tag!==4||D.stateNode.containerInfo!==N.containerInfo||D.stateNode.implementation!==N.implementation?(D=Uk(N,P.mode,$),D.return=P,D):(D=l(D,N.children||[]),D.return=P,D)}function x(P,D,N,$,V){return D===null||D.tag!==7?(D=hh(N,P.mode,$,V),D.return=P,D):(D=l(D,N),D.return=P,D)}function T(P,D,N){if(typeof D=="string"&&D!==""||typeof D=="number")return D=jk(""+D,P.mode,N),D.return=P,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case PT:return N=DS(D.type,D.key,D.props,null,P.mode,N),N.ref=b0(P,null,D),N.return=P,N;case hp:return D=Uk(D,P.mode,N),D.return=P,D;case ic:var $=D._init;return T(P,$(D._payload),N)}if(D0(D)||x0(D))return D=hh(D,P.mode,N,null),D.return=P,D;GT(P,D)}return null}function E(P,D,N,$){var V=D!==null?D.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return V!==null?null:d(P,D,""+N,$);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case PT:return N.key===V?m(P,D,N,$):null;case hp:return N.key===V?v(P,D,N,$):null;case ic:return V=N._init,E(P,D,V(N._payload),$)}if(D0(N)||x0(N))return V!==null?null:x(P,D,N,$,null);GT(P,N)}return null}function A(P,D,N,$,V){if(typeof $=="string"&&$!==""||typeof $=="number")return P=P.get(N)||null,d(D,P,""+$,V);if(typeof $=="object"&&$!==null){switch($.$$typeof){case PT:return P=P.get($.key===null?N:$.key)||null,m(D,P,$,V);case hp:return P=P.get($.key===null?N:$.key)||null,v(D,P,$,V);case ic:var W=$._init;return A(P,D,N,W($._payload),V)}if(D0($)||x0($))return P=P.get(N)||null,x(D,P,$,V,null);GT(D,$)}return null}function k(P,D,N,$){for(var V=null,W=null,C=D,K=D=0,ee=null;C!==null&&K<N.length;K++){C.index>K?(ee=C,C=null):ee=C.sibling;var Q=E(P,C,N[K],$);if(Q===null){C===null&&(C=ee);break}i&&C&&Q.alternate===null&&t(P,C),D=c(Q,D,K),W===null?V=Q:W.sibling=Q,W=Q,C=ee}if(K===N.length)return r(P,C),er&&Gd(P,K),V;if(C===null){for(;K<N.length;K++)C=T(P,N[K],$),C!==null&&(D=c(C,D,K),W===null?V=C:W.sibling=C,W=C);return er&&Gd(P,K),V}for(C=o(P,C);K<N.length;K++)ee=A(C,P,K,N[K],$),ee!==null&&(i&&ee.alternate!==null&&C.delete(ee.key===null?K:ee.key),D=c(ee,D,K),W===null?V=ee:W.sibling=ee,W=ee);return i&&C.forEach(function(fe){return t(P,fe)}),er&&Gd(P,K),V}function _(P,D,N,$){var V=x0(N);if(typeof V!="function")throw Error(Me(150));if(N=V.call(N),N==null)throw Error(Me(151));for(var W=V=null,C=D,K=D=0,ee=null,Q=N.next();C!==null&&!Q.done;K++,Q=N.next()){C.index>K?(ee=C,C=null):ee=C.sibling;var fe=E(P,C,Q.value,$);if(fe===null){C===null&&(C=ee);break}i&&C&&fe.alternate===null&&t(P,C),D=c(fe,D,K),W===null?V=fe:W.sibling=fe,W=fe,C=ee}if(Q.done)return r(P,C),er&&Gd(P,K),V;if(C===null){for(;!Q.done;K++,Q=N.next())Q=T(P,Q.value,$),Q!==null&&(D=c(Q,D,K),W===null?V=Q:W.sibling=Q,W=Q);return er&&Gd(P,K),V}for(C=o(P,C);!Q.done;K++,Q=N.next())Q=A(C,P,K,Q.value,$),Q!==null&&(i&&Q.alternate!==null&&C.delete(Q.key===null?K:Q.key),D=c(Q,D,K),W===null?V=Q:W.sibling=Q,W=Q);return i&&C.forEach(function(O){return t(P,O)}),er&&Gd(P,K),V}function R(P,D,N,$){if(typeof N=="object"&&N!==null&&N.type===fp&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case PT:e:{for(var V=N.key,W=D;W!==null;){if(W.key===V){if(V=N.type,V===fp){if(W.tag===7){r(P,W.sibling),D=l(W,N.props.children),D.return=P,P=D;break e}}else if(W.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ic&&cF(V)===W.type){r(P,W.sibling),D=l(W,N.props),D.ref=b0(P,W,N),D.return=P,P=D;break e}r(P,W);break}else t(P,W);W=W.sibling}N.type===fp?(D=hh(N.props.children,P.mode,$,N.key),D.return=P,P=D):($=DS(N.type,N.key,N.props,null,P.mode,$),$.ref=b0(P,D,N),$.return=P,P=$)}return h(P);case hp:e:{for(W=N.key;D!==null;){if(D.key===W)if(D.tag===4&&D.stateNode.containerInfo===N.containerInfo&&D.stateNode.implementation===N.implementation){r(P,D.sibling),D=l(D,N.children||[]),D.return=P,P=D;break e}else{r(P,D);break}else t(P,D);D=D.sibling}D=Uk(N,P.mode,$),D.return=P,P=D}return h(P);case ic:return W=N._init,R(P,D,W(N._payload),$)}if(D0(N))return k(P,D,N,$);if(x0(N))return _(P,D,N,$);GT(P,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,D!==null&&D.tag===6?(r(P,D.sibling),D=l(D,N),D.return=P,P=D):(r(P,D),D=jk(N,P.mode,$),D.return=P,P=D),h(P)):r(P,D)}return R}var nm=oV(!0),aV=oV(!1),aw=qc(null),lw=null,Sp=null,m4=null;function g4(){m4=Sp=lw=null}function v4(i){var t=aw.current;Xn(aw),i._currentValue=t}function dR(i,t,r){for(;i!==null;){var o=i.alternate;if((i.childLanes&t)!==t?(i.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),i===r)break;i=i.return}}function Rp(i,t){lw=i,m4=Sp=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&t&&(Ns=!0),i.firstContext=null)}function jo(i){var t=i._currentValue;if(m4!==i)if(i={context:i,memoizedValue:t,next:null},Sp===null){if(lw===null)throw Error(Me(308));Sp=i,lw.dependencies={lanes:0,firstContext:i}}else Sp=Sp.next=i;return t}var Qd=null;function y4(i){Qd===null?Qd=[i]:Qd.push(i)}function lV(i,t,r,o){var l=t.interleaved;return l===null?(r.next=r,y4(t)):(r.next=l.next,l.next=r),t.interleaved=r,cu(i,o)}function cu(i,t){i.lanes|=t;var r=i.alternate;for(r!==null&&(r.lanes|=t),r=i,i=i.return;i!==null;)i.childLanes|=t,r=i.alternate,r!==null&&(r.childLanes|=t),r=i,i=i.return;return r.tag===3?r.stateNode:null}var sc=!1;function x4(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uV(i,t){i=i.updateQueue,t.updateQueue===i&&(t.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function iu(i,t){return{eventTime:i,lane:t,tag:0,payload:null,callback:null,next:null}}function _c(i,t,r){var o=i.updateQueue;if(o===null)return null;if(o=o.shared,vn&2){var l=o.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),o.pending=t,cu(i,r)}return l=o.interleaved,l===null?(t.next=t,y4(o)):(t.next=l.next,l.next=t),o.interleaved=t,cu(i,r)}function CS(i,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=i.pendingLanes,r|=o,t.lanes=r,i4(i,r)}}function dF(i,t){var r=i.updateQueue,o=i.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var l=null,c=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};c===null?l=c=h:c=c.next=h,r=r.next}while(r!==null);c===null?l=c=t:c=c.next=t}else l=c=t;r={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:c,shared:o.shared,effects:o.effects},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=t:i.next=t,r.lastBaseUpdate=t}function uw(i,t,r,o){var l=i.updateQueue;sc=!1;var c=l.firstBaseUpdate,h=l.lastBaseUpdate,d=l.shared.pending;if(d!==null){l.shared.pending=null;var m=d,v=m.next;m.next=null,h===null?c=v:h.next=v,h=m;var x=i.alternate;x!==null&&(x=x.updateQueue,d=x.lastBaseUpdate,d!==h&&(d===null?x.firstBaseUpdate=v:d.next=v,x.lastBaseUpdate=m))}if(c!==null){var T=l.baseState;h=0,x=v=m=null,d=c;do{var E=d.lane,A=d.eventTime;if((o&E)===E){x!==null&&(x=x.next={eventTime:A,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var k=i,_=d;switch(E=t,A=r,_.tag){case 1:if(k=_.payload,typeof k=="function"){T=k.call(A,T,E);break e}T=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=_.payload,E=typeof k=="function"?k.call(A,T,E):k,E==null)break e;T=mr({},T,E);break e;case 2:sc=!0}}d.callback!==null&&d.lane!==0&&(i.flags|=64,E=l.effects,E===null?l.effects=[d]:E.push(d))}else A={eventTime:A,lane:E,tag:d.tag,payload:d.payload,callback:d.callback,next:null},x===null?(v=x=A,m=T):x=x.next=A,h|=E;if(d=d.next,d===null){if(d=l.shared.pending,d===null)break;E=d,d=E.next,E.next=null,l.lastBaseUpdate=E,l.shared.pending=null}}while(!0);if(x===null&&(m=T),l.baseState=m,l.firstBaseUpdate=v,l.lastBaseUpdate=x,t=l.shared.interleaved,t!==null){l=t;do h|=l.lane,l=l.next;while(l!==t)}else c===null&&(l.shared.lanes=0);yh|=h,i.lanes=h,i.memoizedState=T}}function hF(i,t,r){if(i=t.effects,t.effects=null,i!==null)for(t=0;t<i.length;t++){var o=i[t],l=o.callback;if(l!==null){if(o.callback=null,o=r,typeof l!="function")throw Error(Me(191,l));l.call(o)}}}var Yv={},el=qc(Yv),hv=qc(Yv),fv=qc(Yv);function Jd(i){if(i===Yv)throw Error(Me(174));return i}function T4(i,t){switch(Gn(fv,t),Gn(hv,i),Gn(el,Yv),i=t.nodeType,i){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:q_(null,"");break;default:i=i===8?t.parentNode:t,t=i.namespaceURI||null,i=i.tagName,t=q_(t,i)}Xn(el),Gn(el,t)}function rm(){Xn(el),Xn(hv),Xn(fv)}function cV(i){Jd(fv.current);var t=Jd(el.current),r=q_(t,i.type);t!==r&&(Gn(hv,i),Gn(el,r))}function S4(i){hv.current===i&&(Xn(el),Xn(hv))}var dr=qc(0);function cw(i){for(var t=i;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Lk=[];function w4(){for(var i=0;i<Lk.length;i++)Lk[i]._workInProgressVersionPrimary=null;Lk.length=0}var kS=vu.ReactCurrentDispatcher,Pk=vu.ReactCurrentBatchConfig,vh=0,pr=null,ri=null,mi=null,dw=!1,q0=!1,pv=0,Nle=0;function Ki(){throw Error(Me(321))}function E4(i,t){if(t===null)return!1;for(var r=0;r<t.length&&r<i.length;r++)if(!ya(i[r],t[r]))return!1;return!0}function b4(i,t,r,o,l,c){if(vh=c,pr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kS.current=i===null||i.memoizedState===null?Ule:Fle,i=r(o,l),q0){c=0;do{if(q0=!1,pv=0,25<=c)throw Error(Me(301));c+=1,mi=ri=null,t.updateQueue=null,kS.current=Ble,i=r(o,l)}while(q0)}if(kS.current=hw,t=ri!==null&&ri.next!==null,vh=0,mi=ri=pr=null,dw=!1,t)throw Error(Me(300));return i}function A4(){var i=pv!==0;return pv=0,i}function Va(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?pr.memoizedState=mi=i:mi=mi.next=i,mi}function Uo(){if(ri===null){var i=pr.alternate;i=i!==null?i.memoizedState:null}else i=ri.next;var t=mi===null?pr.memoizedState:mi.next;if(t!==null)mi=t,ri=i;else{if(i===null)throw Error(Me(310));ri=i,i={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},mi===null?pr.memoizedState=mi=i:mi=mi.next=i}return mi}function mv(i,t){return typeof t=="function"?t(i):t}function Dk(i){var t=Uo(),r=t.queue;if(r===null)throw Error(Me(311));r.lastRenderedReducer=i;var o=ri,l=o.baseQueue,c=r.pending;if(c!==null){if(l!==null){var h=l.next;l.next=c.next,c.next=h}o.baseQueue=l=c,r.pending=null}if(l!==null){c=l.next,o=o.baseState;var d=h=null,m=null,v=c;do{var x=v.lane;if((vh&x)===x)m!==null&&(m=m.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),o=v.hasEagerState?v.eagerState:i(o,v.action);else{var T={lane:x,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};m===null?(d=m=T,h=o):m=m.next=T,pr.lanes|=x,yh|=x}v=v.next}while(v!==null&&v!==c);m===null?h=o:m.next=d,ya(o,t.memoizedState)||(Ns=!0),t.memoizedState=o,t.baseState=h,t.baseQueue=m,r.lastRenderedState=o}if(i=r.interleaved,i!==null){l=i;do c=l.lane,pr.lanes|=c,yh|=c,l=l.next;while(l!==i)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Nk(i){var t=Uo(),r=t.queue;if(r===null)throw Error(Me(311));r.lastRenderedReducer=i;var o=r.dispatch,l=r.pending,c=t.memoizedState;if(l!==null){r.pending=null;var h=l=l.next;do c=i(c,h.action),h=h.next;while(h!==l);ya(c,t.memoizedState)||(Ns=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),r.lastRenderedState=c}return[c,o]}function dV(){}function hV(i,t){var r=pr,o=Uo(),l=t(),c=!ya(o.memoizedState,l);if(c&&(o.memoizedState=l,Ns=!0),o=o.queue,I4(mV.bind(null,r,o,i),[i]),o.getSnapshot!==t||c||mi!==null&&mi.memoizedState.tag&1){if(r.flags|=2048,gv(9,pV.bind(null,r,o,l,t),void 0,null),vi===null)throw Error(Me(349));vh&30||fV(r,t,l)}return l}function fV(i,t,r){i.flags|=16384,i={getSnapshot:t,value:r},t=pr.updateQueue,t===null?(t={lastEffect:null,stores:null},pr.updateQueue=t,t.stores=[i]):(r=t.stores,r===null?t.stores=[i]:r.push(i))}function pV(i,t,r,o){t.value=r,t.getSnapshot=o,gV(t)&&vV(i)}function mV(i,t,r){return r(function(){gV(t)&&vV(i)})}function gV(i){var t=i.getSnapshot;i=i.value;try{var r=t();return!ya(i,r)}catch{return!0}}function vV(i){var t=cu(i,1);t!==null&&va(t,i,1,-1)}function fF(i){var t=Va();return typeof i=="function"&&(i=i()),t.memoizedState=t.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mv,lastRenderedState:i},t.queue=i,i=i.dispatch=jle.bind(null,pr,i),[t.memoizedState,i]}function gv(i,t,r,o){return i={tag:i,create:t,destroy:r,deps:o,next:null},t=pr.updateQueue,t===null?(t={lastEffect:null,stores:null},pr.updateQueue=t,t.lastEffect=i.next=i):(r=t.lastEffect,r===null?t.lastEffect=i.next=i:(o=r.next,r.next=i,i.next=o,t.lastEffect=i)),i}function yV(){return Uo().memoizedState}function _S(i,t,r,o){var l=Va();pr.flags|=i,l.memoizedState=gv(1|t,r,void 0,o===void 0?null:o)}function Zw(i,t,r,o){var l=Uo();o=o===void 0?null:o;var c=void 0;if(ri!==null){var h=ri.memoizedState;if(c=h.destroy,o!==null&&E4(o,h.deps)){l.memoizedState=gv(t,r,c,o);return}}pr.flags|=i,l.memoizedState=gv(1|t,r,c,o)}function pF(i,t){return _S(8390656,8,i,t)}function I4(i,t){return Zw(2048,8,i,t)}function xV(i,t){return Zw(4,2,i,t)}function TV(i,t){return Zw(4,4,i,t)}function SV(i,t){if(typeof t=="function")return i=i(),t(i),function(){t(null)};if(t!=null)return i=i(),t.current=i,function(){t.current=null}}function wV(i,t,r){return r=r!=null?r.concat([i]):null,Zw(4,4,SV.bind(null,t,i),r)}function C4(){}function EV(i,t){var r=Uo();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&E4(t,o[1])?o[0]:(r.memoizedState=[i,t],i)}function bV(i,t){var r=Uo();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&E4(t,o[1])?o[0]:(i=i(),r.memoizedState=[i,t],i)}function AV(i,t,r){return vh&21?(ya(r,t)||(r=R$(),pr.lanes|=r,yh|=r,i.baseState=!0),t):(i.baseState&&(i.baseState=!1,Ns=!0),i.memoizedState=r)}function Mle(i,t){var r=Ln;Ln=r!==0&&4>r?r:4,i(!0);var o=Pk.transition;Pk.transition={};try{i(!1),t()}finally{Ln=r,Pk.transition=o}}function IV(){return Uo().memoizedState}function Ole(i,t,r){var o=Lc(i);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},CV(i))kV(t,r);else if(r=lV(i,t,r,o),r!==null){var l=ps();va(r,i,o,l),_V(r,t,o)}}function jle(i,t,r){var o=Lc(i),l={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(CV(i))kV(t,l);else{var c=i.alternate;if(i.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var h=t.lastRenderedState,d=c(h,r);if(l.hasEagerState=!0,l.eagerState=d,ya(d,h)){var m=t.interleaved;m===null?(l.next=l,y4(t)):(l.next=m.next,m.next=l),t.interleaved=l;return}}catch{}finally{}r=lV(i,t,l,o),r!==null&&(l=ps(),va(r,i,o,l),_V(r,t,o))}}function CV(i){var t=i.alternate;return i===pr||t!==null&&t===pr}function kV(i,t){q0=dw=!0;var r=i.pending;r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t}function _V(i,t,r){if(r&4194240){var o=t.lanes;o&=i.pendingLanes,r|=o,t.lanes=r,i4(i,r)}}var hw={readContext:jo,useCallback:Ki,useContext:Ki,useEffect:Ki,useImperativeHandle:Ki,useInsertionEffect:Ki,useLayoutEffect:Ki,useMemo:Ki,useReducer:Ki,useRef:Ki,useState:Ki,useDebugValue:Ki,useDeferredValue:Ki,useTransition:Ki,useMutableSource:Ki,useSyncExternalStore:Ki,useId:Ki,unstable_isNewReconciler:!1},Ule={readContext:jo,useCallback:function(i,t){return Va().memoizedState=[i,t===void 0?null:t],i},useContext:jo,useEffect:pF,useImperativeHandle:function(i,t,r){return r=r!=null?r.concat([i]):null,_S(4194308,4,SV.bind(null,t,i),r)},useLayoutEffect:function(i,t){return _S(4194308,4,i,t)},useInsertionEffect:function(i,t){return _S(4,2,i,t)},useMemo:function(i,t){var r=Va();return t=t===void 0?null:t,i=i(),r.memoizedState=[i,t],i},useReducer:function(i,t,r){var o=Va();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:t},o.queue=i,i=i.dispatch=Ole.bind(null,pr,i),[o.memoizedState,i]},useRef:function(i){var t=Va();return i={current:i},t.memoizedState=i},useState:fF,useDebugValue:C4,useDeferredValue:function(i){return Va().memoizedState=i},useTransition:function(){var i=fF(!1),t=i[0];return i=Mle.bind(null,i[1]),Va().memoizedState=i,[t,i]},useMutableSource:function(){},useSyncExternalStore:function(i,t,r){var o=pr,l=Va();if(er){if(r===void 0)throw Error(Me(407));r=r()}else{if(r=t(),vi===null)throw Error(Me(349));vh&30||fV(o,t,r)}l.memoizedState=r;var c={value:r,getSnapshot:t};return l.queue=c,pF(mV.bind(null,o,c,i),[i]),o.flags|=2048,gv(9,pV.bind(null,o,c,r,t),void 0,null),r},useId:function(){var i=Va(),t=vi.identifierPrefix;if(er){var r=ru,o=nu;r=(o&~(1<<32-ga(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=pv++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Nle++,t=":"+t+"r"+r.toString(32)+":";return i.memoizedState=t},unstable_isNewReconciler:!1},Fle={readContext:jo,useCallback:EV,useContext:jo,useEffect:I4,useImperativeHandle:wV,useInsertionEffect:xV,useLayoutEffect:TV,useMemo:bV,useReducer:Dk,useRef:yV,useState:function(){return Dk(mv)},useDebugValue:C4,useDeferredValue:function(i){var t=Uo();return AV(t,ri.memoizedState,i)},useTransition:function(){var i=Dk(mv)[0],t=Uo().memoizedState;return[i,t]},useMutableSource:dV,useSyncExternalStore:hV,useId:IV,unstable_isNewReconciler:!1},Ble={readContext:jo,useCallback:EV,useContext:jo,useEffect:I4,useImperativeHandle:wV,useInsertionEffect:xV,useLayoutEffect:TV,useMemo:bV,useReducer:Nk,useRef:yV,useState:function(){return Nk(mv)},useDebugValue:C4,useDeferredValue:function(i){var t=Uo();return ri===null?t.memoizedState=i:AV(t,ri.memoizedState,i)},useTransition:function(){var i=Nk(mv)[0],t=Uo().memoizedState;return[i,t]},useMutableSource:dV,useSyncExternalStore:hV,useId:IV,unstable_isNewReconciler:!1};function la(i,t){if(i&&i.defaultProps){t=mr({},t),i=i.defaultProps;for(var r in i)t[r]===void 0&&(t[r]=i[r]);return t}return t}function hR(i,t,r,o){t=i.memoizedState,r=r(o,t),r=r==null?t:mr({},t,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var eE={isMounted:function(i){return(i=i._reactInternals)?Rh(i)===i:!1},enqueueSetState:function(i,t,r){i=i._reactInternals;var o=ps(),l=Lc(i),c=iu(o,l);c.payload=t,r!=null&&(c.callback=r),t=_c(i,c,l),t!==null&&(va(t,i,l,o),CS(t,i,l))},enqueueReplaceState:function(i,t,r){i=i._reactInternals;var o=ps(),l=Lc(i),c=iu(o,l);c.tag=1,c.payload=t,r!=null&&(c.callback=r),t=_c(i,c,l),t!==null&&(va(t,i,l,o),CS(t,i,l))},enqueueForceUpdate:function(i,t){i=i._reactInternals;var r=ps(),o=Lc(i),l=iu(r,o);l.tag=2,t!=null&&(l.callback=t),t=_c(i,l,o),t!==null&&(va(t,i,o,r),CS(t,i,o))}};function mF(i,t,r,o,l,c,h){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(o,c,h):t.prototype&&t.prototype.isPureReactComponent?!lv(r,o)||!lv(l,c):!0}function RV(i,t,r){var o=!1,l=jc,c=t.contextType;return typeof c=="object"&&c!==null?c=jo(c):(l=js(t)?mh:Xi.current,o=t.contextTypes,c=(o=o!=null)?em(i,l):jc),t=new t(r,c),i.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eE,i.stateNode=t,t._reactInternals=i,o&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=c),t}function gF(i,t,r,o){i=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==i&&eE.enqueueReplaceState(t,t.state,null)}function fR(i,t,r,o){var l=i.stateNode;l.props=r,l.state=i.memoizedState,l.refs={},x4(i);var c=t.contextType;typeof c=="object"&&c!==null?l.context=jo(c):(c=js(t)?mh:Xi.current,l.context=em(i,c)),l.state=i.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(hR(i,t,c,r),l.state=i.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&eE.enqueueReplaceState(l,l.state,null),uw(i,r,l,o),l.state=i.memoizedState),typeof l.componentDidMount=="function"&&(i.flags|=4194308)}function im(i,t){try{var r="",o=t;do r+=pae(o),o=o.return;while(o);var l=r}catch(c){l=`
Error generating stack: `+c.message+`
`+c.stack}return{value:i,source:t,stack:l,digest:null}}function Mk(i,t,r){return{value:i,source:null,stack:r??null,digest:t??null}}function pR(i,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $le=typeof WeakMap=="function"?WeakMap:Map;function LV(i,t,r){r=iu(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){pw||(pw=!0,bR=o),pR(i,t)},r}function PV(i,t,r){r=iu(-1,r),r.tag=3;var o=i.type.getDerivedStateFromError;if(typeof o=="function"){var l=t.value;r.payload=function(){return o(l)},r.callback=function(){pR(i,t)}}var c=i.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(r.callback=function(){pR(i,t),typeof o!="function"&&(Rc===null?Rc=new Set([this]):Rc.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}function vF(i,t,r){var o=i.pingCache;if(o===null){o=i.pingCache=new $le;var l=new Set;o.set(t,l)}else l=o.get(t),l===void 0&&(l=new Set,o.set(t,l));l.has(r)||(l.add(r),i=tue.bind(null,i,t,r),t.then(i,i))}function yF(i){do{var t;if((t=i.tag===13)&&(t=i.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return i;i=i.return}while(i!==null);return null}function xF(i,t,r,o,l){return i.mode&1?(i.flags|=65536,i.lanes=l,i):(i===t?i.flags|=65536:(i.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=iu(-1,1),t.tag=2,_c(r,t,1))),r.lanes|=1),i)}var Vle=vu.ReactCurrentOwner,Ns=!1;function us(i,t,r,o){t.child=i===null?aV(t,null,r,o):nm(t,i.child,r,o)}function TF(i,t,r,o,l){r=r.render;var c=t.ref;return Rp(t,l),o=b4(i,t,r,o,c,l),r=A4(),i!==null&&!Ns?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~l,du(i,t,l)):(er&&r&&h4(t),t.flags|=1,us(i,t,o,l),t.child)}function SF(i,t,r,o,l){if(i===null){var c=r.type;return typeof c=="function"&&!M4(c)&&c.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=c,DV(i,t,c,o,l)):(i=DS(r.type,null,o,t,t.mode,l),i.ref=t.ref,i.return=t,t.child=i)}if(c=i.child,!(i.lanes&l)){var h=c.memoizedProps;if(r=r.compare,r=r!==null?r:lv,r(h,o)&&i.ref===t.ref)return du(i,t,l)}return t.flags|=1,i=Pc(c,o),i.ref=t.ref,i.return=t,t.child=i}function DV(i,t,r,o,l){if(i!==null){var c=i.memoizedProps;if(lv(c,o)&&i.ref===t.ref)if(Ns=!1,t.pendingProps=o=c,(i.lanes&l)!==0)i.flags&131072&&(Ns=!0);else return t.lanes=i.lanes,du(i,t,l)}return mR(i,t,r,o,l)}function NV(i,t,r){var o=t.pendingProps,l=o.children,c=i!==null?i.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gn(Ep,io),io|=r;else{if(!(r&1073741824))return i=c!==null?c.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:i,cachePool:null,transitions:null},t.updateQueue=null,Gn(Ep,io),io|=i,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=c!==null?c.baseLanes:r,Gn(Ep,io),io|=o}else c!==null?(o=c.baseLanes|r,t.memoizedState=null):o=r,Gn(Ep,io),io|=o;return us(i,t,l,r),t.child}function MV(i,t){var r=t.ref;(i===null&&r!==null||i!==null&&i.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function mR(i,t,r,o,l){var c=js(r)?mh:Xi.current;return c=em(t,c),Rp(t,l),r=b4(i,t,r,o,c,l),o=A4(),i!==null&&!Ns?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~l,du(i,t,l)):(er&&o&&h4(t),t.flags|=1,us(i,t,r,l),t.child)}function wF(i,t,r,o,l){if(js(r)){var c=!0;iw(t)}else c=!1;if(Rp(t,l),t.stateNode===null)RS(i,t),RV(t,r,o),fR(t,r,o,l),o=!0;else if(i===null){var h=t.stateNode,d=t.memoizedProps;h.props=d;var m=h.context,v=r.contextType;typeof v=="object"&&v!==null?v=jo(v):(v=js(r)?mh:Xi.current,v=em(t,v));var x=r.getDerivedStateFromProps,T=typeof x=="function"||typeof h.getSnapshotBeforeUpdate=="function";T||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(d!==o||m!==v)&&gF(t,h,o,v),sc=!1;var E=t.memoizedState;h.state=E,uw(t,o,h,l),m=t.memoizedState,d!==o||E!==m||Os.current||sc?(typeof x=="function"&&(hR(t,r,x,o),m=t.memoizedState),(d=sc||mF(t,r,d,o,E,m,v))?(T||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=m),h.props=o,h.state=m,h.context=v,o=d):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{h=t.stateNode,uV(i,t),d=t.memoizedProps,v=t.type===t.elementType?d:la(t.type,d),h.props=v,T=t.pendingProps,E=h.context,m=r.contextType,typeof m=="object"&&m!==null?m=jo(m):(m=js(r)?mh:Xi.current,m=em(t,m));var A=r.getDerivedStateFromProps;(x=typeof A=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(d!==T||E!==m)&&gF(t,h,o,m),sc=!1,E=t.memoizedState,h.state=E,uw(t,o,h,l);var k=t.memoizedState;d!==T||E!==k||Os.current||sc?(typeof A=="function"&&(hR(t,r,A,o),k=t.memoizedState),(v=sc||mF(t,r,v,o,E,k,m)||!1)?(x||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,k,m),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,k,m)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||d===i.memoizedProps&&E===i.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||d===i.memoizedProps&&E===i.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=k),h.props=o,h.state=k,h.context=m,o=v):(typeof h.componentDidUpdate!="function"||d===i.memoizedProps&&E===i.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||d===i.memoizedProps&&E===i.memoizedState||(t.flags|=1024),o=!1)}return gR(i,t,r,o,c,l)}function gR(i,t,r,o,l,c){MV(i,t);var h=(t.flags&128)!==0;if(!o&&!h)return l&&aF(t,r,!1),du(i,t,c);o=t.stateNode,Vle.current=t;var d=h&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,i!==null&&h?(t.child=nm(t,i.child,null,c),t.child=nm(t,null,d,c)):us(i,t,d,c),t.memoizedState=o.state,l&&aF(t,r,!0),t.child}function OV(i){var t=i.stateNode;t.pendingContext?oF(i,t.pendingContext,t.pendingContext!==t.context):t.context&&oF(i,t.context,!1),T4(i,t.containerInfo)}function EF(i,t,r,o,l){return tm(),p4(l),t.flags|=256,us(i,t,r,o),t.child}var vR={dehydrated:null,treeContext:null,retryLane:0};function yR(i){return{baseLanes:i,cachePool:null,transitions:null}}function jV(i,t,r){var o=t.pendingProps,l=dr.current,c=!1,h=(t.flags&128)!==0,d;if((d=h)||(d=i!==null&&i.memoizedState===null?!1:(l&2)!==0),d?(c=!0,t.flags&=-129):(i===null||i.memoizedState!==null)&&(l|=1),Gn(dr,l&1),i===null)return cR(t),i=t.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(t.mode&1?i.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=o.children,i=o.fallback,c?(o=t.mode,c=t.child,h={mode:"hidden",children:h},!(o&1)&&c!==null?(c.childLanes=0,c.pendingProps=h):c=rE(h,o,0,null),i=hh(i,o,r,null),c.return=t,i.return=t,c.sibling=i,t.child=c,t.child.memoizedState=yR(r),t.memoizedState=vR,i):k4(t,h));if(l=i.memoizedState,l!==null&&(d=l.dehydrated,d!==null))return Gle(i,t,h,o,d,l,r);if(c){c=o.fallback,h=t.mode,l=i.child,d=l.sibling;var m={mode:"hidden",children:o.children};return!(h&1)&&t.child!==l?(o=t.child,o.childLanes=0,o.pendingProps=m,t.deletions=null):(o=Pc(l,m),o.subtreeFlags=l.subtreeFlags&14680064),d!==null?c=Pc(d,c):(c=hh(c,h,r,null),c.flags|=2),c.return=t,o.return=t,o.sibling=c,t.child=o,o=c,c=t.child,h=i.child.memoizedState,h=h===null?yR(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},c.memoizedState=h,c.childLanes=i.childLanes&~r,t.memoizedState=vR,o}return c=i.child,i=c.sibling,o=Pc(c,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,i!==null&&(r=t.deletions,r===null?(t.deletions=[i],t.flags|=16):r.push(i)),t.child=o,t.memoizedState=null,o}function k4(i,t){return t=rE({mode:"visible",children:t},i.mode,0,null),t.return=i,i.child=t}function HT(i,t,r,o){return o!==null&&p4(o),nm(t,i.child,null,r),i=k4(t,t.pendingProps.children),i.flags|=2,t.memoizedState=null,i}function Gle(i,t,r,o,l,c,h){if(r)return t.flags&256?(t.flags&=-257,o=Mk(Error(Me(422))),HT(i,t,h,o)):t.memoizedState!==null?(t.child=i.child,t.flags|=128,null):(c=o.fallback,l=t.mode,o=rE({mode:"visible",children:o.children},l,0,null),c=hh(c,l,h,null),c.flags|=2,o.return=t,c.return=t,o.sibling=c,t.child=o,t.mode&1&&nm(t,i.child,null,h),t.child.memoizedState=yR(h),t.memoizedState=vR,c);if(!(t.mode&1))return HT(i,t,h,null);if(l.data==="$!"){if(o=l.nextSibling&&l.nextSibling.dataset,o)var d=o.dgst;return o=d,c=Error(Me(419)),o=Mk(c,o,void 0),HT(i,t,h,o)}if(d=(h&i.childLanes)!==0,Ns||d){if(o=vi,o!==null){switch(h&-h){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(o.suspendedLanes|h)?0:l,l!==0&&l!==c.retryLane&&(c.retryLane=l,cu(i,l),va(o,i,l,-1))}return N4(),o=Mk(Error(Me(421))),HT(i,t,h,o)}return l.data==="$?"?(t.flags|=128,t.child=i.child,t=nue.bind(null,i),l._reactRetry=t,null):(i=c.treeContext,co=kc(l.nextSibling),ho=t,er=!0,pa=null,i!==null&&(Do[No++]=nu,Do[No++]=ru,Do[No++]=gh,nu=i.id,ru=i.overflow,gh=t),t=k4(t,o.children),t.flags|=4096,t)}function bF(i,t,r){i.lanes|=t;var o=i.alternate;o!==null&&(o.lanes|=t),dR(i.return,t,r)}function Ok(i,t,r,o,l){var c=i.memoizedState;c===null?i.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:l}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=o,c.tail=r,c.tailMode=l)}function UV(i,t,r){var o=t.pendingProps,l=o.revealOrder,c=o.tail;if(us(i,t,o.children,r),o=dr.current,o&2)o=o&1|2,t.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=t.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&bF(i,r,t);else if(i.tag===19)bF(i,r,t);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}o&=1}if(Gn(dr,o),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)i=r.alternate,i!==null&&cw(i)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),Ok(t,!1,l,r,c);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(i=l.alternate,i!==null&&cw(i)===null){t.child=l;break}i=l.sibling,l.sibling=r,r=l,l=i}Ok(t,!0,r,null,c);break;case"together":Ok(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function RS(i,t){!(t.mode&1)&&i!==null&&(i.alternate=null,t.alternate=null,t.flags|=2)}function du(i,t,r){if(i!==null&&(t.dependencies=i.dependencies),yh|=t.lanes,!(r&t.childLanes))return null;if(i!==null&&t.child!==i.child)throw Error(Me(153));if(t.child!==null){for(i=t.child,r=Pc(i,i.pendingProps),t.child=r,r.return=t;i.sibling!==null;)i=i.sibling,r=r.sibling=Pc(i,i.pendingProps),r.return=t;r.sibling=null}return t.child}function Hle(i,t,r){switch(t.tag){case 3:OV(t),tm();break;case 5:cV(t);break;case 1:js(t.type)&&iw(t);break;case 4:T4(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,l=t.memoizedProps.value;Gn(aw,o._currentValue),o._currentValue=l;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Gn(dr,dr.current&1),t.flags|=128,null):r&t.child.childLanes?jV(i,t,r):(Gn(dr,dr.current&1),i=du(i,t,r),i!==null?i.sibling:null);Gn(dr,dr.current&1);break;case 19:if(o=(r&t.childLanes)!==0,i.flags&128){if(o)return UV(i,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Gn(dr,dr.current),o)break;return null;case 22:case 23:return t.lanes=0,NV(i,t,r)}return du(i,t,r)}var FV,xR,BV,$V;FV=function(i,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)i.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xR=function(){};BV=function(i,t,r,o){var l=i.memoizedProps;if(l!==o){i=t.stateNode,Jd(el.current);var c=null;switch(r){case"input":l=$_(i,l),o=$_(i,o),c=[];break;case"select":l=mr({},l,{value:void 0}),o=mr({},o,{value:void 0}),c=[];break;case"textarea":l=H_(i,l),o=H_(i,o),c=[];break;default:typeof l.onClick!="function"&&typeof o.onClick=="function"&&(i.onclick=nw)}K_(r,o);var h;r=null;for(v in l)if(!o.hasOwnProperty(v)&&l.hasOwnProperty(v)&&l[v]!=null)if(v==="style"){var d=l[v];for(h in d)d.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(tv.hasOwnProperty(v)?c||(c=[]):(c=c||[]).push(v,null));for(v in o){var m=o[v];if(d=l!=null?l[v]:void 0,o.hasOwnProperty(v)&&m!==d&&(m!=null||d!=null))if(v==="style")if(d){for(h in d)!d.hasOwnProperty(h)||m&&m.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in m)m.hasOwnProperty(h)&&d[h]!==m[h]&&(r||(r={}),r[h]=m[h])}else r||(c||(c=[]),c.push(v,r)),r=m;else v==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,d=d?d.__html:void 0,m!=null&&d!==m&&(c=c||[]).push(v,m)):v==="children"?typeof m!="string"&&typeof m!="number"||(c=c||[]).push(v,""+m):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(tv.hasOwnProperty(v)?(m!=null&&v==="onScroll"&&Wn("scroll",i),c||d===m||(c=[])):(c=c||[]).push(v,m))}r&&(c=c||[]).push("style",r);var v=c;(t.updateQueue=v)&&(t.flags|=4)}};$V=function(i,t,r,o){r!==o&&(t.flags|=4)};function A0(i,t){if(!er)switch(i.tailMode){case"hidden":t=i.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||i.tail===null?i.tail=null:i.tail.sibling=null:o.sibling=null}}function zi(i){var t=i.alternate!==null&&i.alternate.child===i.child,r=0,o=0;if(t)for(var l=i.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags&14680064,o|=l.flags&14680064,l.return=i,l=l.sibling;else for(l=i.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=i,l=l.sibling;return i.subtreeFlags|=o,i.childLanes=r,t}function qle(i,t,r){var o=t.pendingProps;switch(f4(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zi(t),null;case 1:return js(t.type)&&rw(),zi(t),null;case 3:return o=t.stateNode,rm(),Xn(Os),Xn(Xi),w4(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(VT(t)?t.flags|=4:i===null||i.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pa!==null&&(CR(pa),pa=null))),xR(i,t),zi(t),null;case 5:S4(t);var l=Jd(fv.current);if(r=t.type,i!==null&&t.stateNode!=null)BV(i,t,r,o,l),i.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(Me(166));return zi(t),null}if(i=Jd(el.current),VT(t)){o=t.stateNode,r=t.type;var c=t.memoizedProps;switch(o[Wa]=t,o[dv]=c,i=(t.mode&1)!==0,r){case"dialog":Wn("cancel",o),Wn("close",o);break;case"iframe":case"object":case"embed":Wn("load",o);break;case"video":case"audio":for(l=0;l<M0.length;l++)Wn(M0[l],o);break;case"source":Wn("error",o);break;case"img":case"image":case"link":Wn("error",o),Wn("load",o);break;case"details":Wn("toggle",o);break;case"input":DU(o,c),Wn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!c.multiple},Wn("invalid",o);break;case"textarea":MU(o,c),Wn("invalid",o)}K_(r,c),l=null;for(var h in c)if(c.hasOwnProperty(h)){var d=c[h];h==="children"?typeof d=="string"?o.textContent!==d&&(c.suppressHydrationWarning!==!0&&$T(o.textContent,d,i),l=["children",d]):typeof d=="number"&&o.textContent!==""+d&&(c.suppressHydrationWarning!==!0&&$T(o.textContent,d,i),l=["children",""+d]):tv.hasOwnProperty(h)&&d!=null&&h==="onScroll"&&Wn("scroll",o)}switch(r){case"input":DT(o),NU(o,c,!0);break;case"textarea":DT(o),OU(o);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(o.onclick=nw)}o=l,t.updateQueue=o,o!==null&&(t.flags|=4)}else{h=l.nodeType===9?l:l.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=m$(r)),i==="http://www.w3.org/1999/xhtml"?r==="script"?(i=h.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof o.is=="string"?i=h.createElement(r,{is:o.is}):(i=h.createElement(r),r==="select"&&(h=i,o.multiple?h.multiple=!0:o.size&&(h.size=o.size))):i=h.createElementNS(i,r),i[Wa]=t,i[dv]=o,FV(i,t,!1,!1),t.stateNode=i;e:{switch(h=z_(r,o),r){case"dialog":Wn("cancel",i),Wn("close",i),l=o;break;case"iframe":case"object":case"embed":Wn("load",i),l=o;break;case"video":case"audio":for(l=0;l<M0.length;l++)Wn(M0[l],i);l=o;break;case"source":Wn("error",i),l=o;break;case"img":case"image":case"link":Wn("error",i),Wn("load",i),l=o;break;case"details":Wn("toggle",i),l=o;break;case"input":DU(i,o),l=$_(i,o),Wn("invalid",i);break;case"option":l=o;break;case"select":i._wrapperState={wasMultiple:!!o.multiple},l=mr({},o,{value:void 0}),Wn("invalid",i);break;case"textarea":MU(i,o),l=H_(i,o),Wn("invalid",i);break;default:l=o}K_(r,l),d=l;for(c in d)if(d.hasOwnProperty(c)){var m=d[c];c==="style"?y$(i,m):c==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&g$(i,m)):c==="children"?typeof m=="string"?(r!=="textarea"||m!=="")&&nv(i,m):typeof m=="number"&&nv(i,""+m):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tv.hasOwnProperty(c)?m!=null&&c==="onScroll"&&Wn("scroll",i):m!=null&&JL(i,c,m,h))}switch(r){case"input":DT(i),NU(i,o,!1);break;case"textarea":DT(i),OU(i);break;case"option":o.value!=null&&i.setAttribute("value",""+Oc(o.value));break;case"select":i.multiple=!!o.multiple,c=o.value,c!=null?Ip(i,!!o.multiple,c,!1):o.defaultValue!=null&&Ip(i,!!o.multiple,o.defaultValue,!0);break;default:typeof l.onClick=="function"&&(i.onclick=nw)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zi(t),null;case 6:if(i&&t.stateNode!=null)$V(i,t,i.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Me(166));if(r=Jd(fv.current),Jd(el.current),VT(t)){if(o=t.stateNode,r=t.memoizedProps,o[Wa]=t,(c=o.nodeValue!==r)&&(i=ho,i!==null))switch(i.tag){case 3:$T(o.nodeValue,r,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&$T(o.nodeValue,r,(i.mode&1)!==0)}c&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[Wa]=t,t.stateNode=o}return zi(t),null;case 13:if(Xn(dr),o=t.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(er&&co!==null&&t.mode&1&&!(t.flags&128))sV(),tm(),t.flags|=98560,c=!1;else if(c=VT(t),o!==null&&o.dehydrated!==null){if(i===null){if(!c)throw Error(Me(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Me(317));c[Wa]=t}else tm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zi(t),c=!1}else pa!==null&&(CR(pa),pa=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(i!==null&&i.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(i===null||dr.current&1?oi===0&&(oi=3):N4())),t.updateQueue!==null&&(t.flags|=4),zi(t),null);case 4:return rm(),xR(i,t),i===null&&uv(t.stateNode.containerInfo),zi(t),null;case 10:return v4(t.type._context),zi(t),null;case 17:return js(t.type)&&rw(),zi(t),null;case 19:if(Xn(dr),c=t.memoizedState,c===null)return zi(t),null;if(o=(t.flags&128)!==0,h=c.rendering,h===null)if(o)A0(c,!1);else{if(oi!==0||i!==null&&i.flags&128)for(i=t.child;i!==null;){if(h=cw(i),h!==null){for(t.flags|=128,A0(c,!1),o=h.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)c=r,i=o,c.flags&=14680066,h=c.alternate,h===null?(c.childLanes=0,c.lanes=i,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=h.childLanes,c.lanes=h.lanes,c.child=h.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=h.memoizedProps,c.memoizedState=h.memoizedState,c.updateQueue=h.updateQueue,c.type=h.type,i=h.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return Gn(dr,dr.current&1|2),t.child}i=i.sibling}c.tail!==null&&Pr()>sm&&(t.flags|=128,o=!0,A0(c,!1),t.lanes=4194304)}else{if(!o)if(i=cw(h),i!==null){if(t.flags|=128,o=!0,r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),A0(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!er)return zi(t),null}else 2*Pr()-c.renderingStartTime>sm&&r!==1073741824&&(t.flags|=128,o=!0,A0(c,!1),t.lanes=4194304);c.isBackwards?(h.sibling=t.child,t.child=h):(r=c.last,r!==null?r.sibling=h:t.child=h,c.last=h)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Pr(),t.sibling=null,r=dr.current,Gn(dr,o?r&1|2:r&1),t):(zi(t),null);case 22:case 23:return D4(),o=t.memoizedState!==null,i!==null&&i.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?io&1073741824&&(zi(t),t.subtreeFlags&6&&(t.flags|=8192)):zi(t),null;case 24:return null;case 25:return null}throw Error(Me(156,t.tag))}function Kle(i,t){switch(f4(t),t.tag){case 1:return js(t.type)&&rw(),i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 3:return rm(),Xn(Os),Xn(Xi),w4(),i=t.flags,i&65536&&!(i&128)?(t.flags=i&-65537|128,t):null;case 5:return S4(t),null;case 13:if(Xn(dr),i=t.memoizedState,i!==null&&i.dehydrated!==null){if(t.alternate===null)throw Error(Me(340));tm()}return i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 19:return Xn(dr),null;case 4:return rm(),null;case 10:return v4(t.type._context),null;case 22:case 23:return D4(),null;case 24:return null;default:return null}}var qT=!1,Yi=!1,zle=typeof WeakSet=="function"?WeakSet:Set,dt=null;function wp(i,t){var r=i.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){Cr(i,t,o)}else r.current=null}function TR(i,t,r){try{r()}catch(o){Cr(i,t,o)}}var AF=!1;function Wle(i,t){if(rR=ZS,i=K$(),d4(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else e:{r=(r=i.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var l=o.anchorOffset,c=o.focusNode;o=o.focusOffset;try{r.nodeType,c.nodeType}catch{r=null;break e}var h=0,d=-1,m=-1,v=0,x=0,T=i,E=null;t:for(;;){for(var A;T!==r||l!==0&&T.nodeType!==3||(d=h+l),T!==c||o!==0&&T.nodeType!==3||(m=h+o),T.nodeType===3&&(h+=T.nodeValue.length),(A=T.firstChild)!==null;)E=T,T=A;for(;;){if(T===i)break t;if(E===r&&++v===l&&(d=h),E===c&&++x===o&&(m=h),(A=T.nextSibling)!==null)break;T=E,E=T.parentNode}T=A}r=d===-1||m===-1?null:{start:d,end:m}}else r=null}r=r||{start:0,end:0}}else r=null;for(iR={focusedElem:i,selectionRange:r},ZS=!1,dt=t;dt!==null;)if(t=dt,i=t.child,(t.subtreeFlags&1028)!==0&&i!==null)i.return=t,dt=i;else for(;dt!==null;){t=dt;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var _=k.memoizedProps,R=k.memoizedState,P=t.stateNode,D=P.getSnapshotBeforeUpdate(t.elementType===t.type?_:la(t.type,_),R);P.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Me(163))}}catch($){Cr(t,t.return,$)}if(i=t.sibling,i!==null){i.return=t.return,dt=i;break}dt=t.return}return k=AF,AF=!1,k}function K0(i,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var c=l.destroy;l.destroy=void 0,c!==void 0&&TR(t,r,c)}l=l.next}while(l!==o)}}function tE(i,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&i)===i){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function SR(i){var t=i.ref;if(t!==null){var r=i.stateNode;switch(i.tag){case 5:i=r;break;default:i=r}typeof t=="function"?t(i):t.current=i}}function VV(i){var t=i.alternate;t!==null&&(i.alternate=null,VV(t)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(t=i.stateNode,t!==null&&(delete t[Wa],delete t[dv],delete t[aR],delete t[Rle],delete t[Lle])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function GV(i){return i.tag===5||i.tag===3||i.tag===4}function IF(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||GV(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function wR(i,t,r){var o=i.tag;if(o===5||o===6)i=i.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(i,t):r.insertBefore(i,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(i,r)):(t=r,t.appendChild(i)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=nw));else if(o!==4&&(i=i.child,i!==null))for(wR(i,t,r),i=i.sibling;i!==null;)wR(i,t,r),i=i.sibling}function ER(i,t,r){var o=i.tag;if(o===5||o===6)i=i.stateNode,t?r.insertBefore(i,t):r.appendChild(i);else if(o!==4&&(i=i.child,i!==null))for(ER(i,t,r),i=i.sibling;i!==null;)ER(i,t,r),i=i.sibling}var Ri=null,ha=!1;function Yu(i,t,r){for(r=r.child;r!==null;)HV(i,t,r),r=r.sibling}function HV(i,t,r){if(Za&&typeof Za.onCommitFiberUnmount=="function")try{Za.onCommitFiberUnmount(zw,r)}catch{}switch(r.tag){case 5:Yi||wp(r,t);case 6:var o=Ri,l=ha;Ri=null,Yu(i,t,r),Ri=o,ha=l,Ri!==null&&(ha?(i=Ri,r=r.stateNode,i.nodeType===8?i.parentNode.removeChild(r):i.removeChild(r)):Ri.removeChild(r.stateNode));break;case 18:Ri!==null&&(ha?(i=Ri,r=r.stateNode,i.nodeType===8?_k(i.parentNode,r):i.nodeType===1&&_k(i,r),ov(i)):_k(Ri,r.stateNode));break;case 4:o=Ri,l=ha,Ri=r.stateNode.containerInfo,ha=!0,Yu(i,t,r),Ri=o,ha=l;break;case 0:case 11:case 14:case 15:if(!Yi&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){l=o=o.next;do{var c=l,h=c.destroy;c=c.tag,h!==void 0&&(c&2||c&4)&&TR(r,t,h),l=l.next}while(l!==o)}Yu(i,t,r);break;case 1:if(!Yi&&(wp(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(d){Cr(r,t,d)}Yu(i,t,r);break;case 21:Yu(i,t,r);break;case 22:r.mode&1?(Yi=(o=Yi)||r.memoizedState!==null,Yu(i,t,r),Yi=o):Yu(i,t,r);break;default:Yu(i,t,r)}}function CF(i){var t=i.updateQueue;if(t!==null){i.updateQueue=null;var r=i.stateNode;r===null&&(r=i.stateNode=new zle),t.forEach(function(o){var l=rue.bind(null,i,o);r.has(o)||(r.add(o),o.then(l,l))})}}function na(i,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var l=r[o];try{var c=i,h=t,d=h;e:for(;d!==null;){switch(d.tag){case 5:Ri=d.stateNode,ha=!1;break e;case 3:Ri=d.stateNode.containerInfo,ha=!0;break e;case 4:Ri=d.stateNode.containerInfo,ha=!0;break e}d=d.return}if(Ri===null)throw Error(Me(160));HV(c,h,l),Ri=null,ha=!1;var m=l.alternate;m!==null&&(m.return=null),l.return=null}catch(v){Cr(l,t,v)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qV(t,i),t=t.sibling}function qV(i,t){var r=i.alternate,o=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(na(t,i),Fa(i),o&4){try{K0(3,i,i.return),tE(3,i)}catch(_){Cr(i,i.return,_)}try{K0(5,i,i.return)}catch(_){Cr(i,i.return,_)}}break;case 1:na(t,i),Fa(i),o&512&&r!==null&&wp(r,r.return);break;case 5:if(na(t,i),Fa(i),o&512&&r!==null&&wp(r,r.return),i.flags&32){var l=i.stateNode;try{nv(l,"")}catch(_){Cr(i,i.return,_)}}if(o&4&&(l=i.stateNode,l!=null)){var c=i.memoizedProps,h=r!==null?r.memoizedProps:c,d=i.type,m=i.updateQueue;if(i.updateQueue=null,m!==null)try{d==="input"&&c.type==="radio"&&c.name!=null&&f$(l,c),z_(d,h);var v=z_(d,c);for(h=0;h<m.length;h+=2){var x=m[h],T=m[h+1];x==="style"?y$(l,T):x==="dangerouslySetInnerHTML"?g$(l,T):x==="children"?nv(l,T):JL(l,x,T,v)}switch(d){case"input":V_(l,c);break;case"textarea":p$(l,c);break;case"select":var E=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!c.multiple;var A=c.value;A!=null?Ip(l,!!c.multiple,A,!1):E!==!!c.multiple&&(c.defaultValue!=null?Ip(l,!!c.multiple,c.defaultValue,!0):Ip(l,!!c.multiple,c.multiple?[]:"",!1))}l[dv]=c}catch(_){Cr(i,i.return,_)}}break;case 6:if(na(t,i),Fa(i),o&4){if(i.stateNode===null)throw Error(Me(162));l=i.stateNode,c=i.memoizedProps;try{l.nodeValue=c}catch(_){Cr(i,i.return,_)}}break;case 3:if(na(t,i),Fa(i),o&4&&r!==null&&r.memoizedState.isDehydrated)try{ov(t.containerInfo)}catch(_){Cr(i,i.return,_)}break;case 4:na(t,i),Fa(i);break;case 13:na(t,i),Fa(i),l=i.child,l.flags&8192&&(c=l.memoizedState!==null,l.stateNode.isHidden=c,!c||l.alternate!==null&&l.alternate.memoizedState!==null||(L4=Pr())),o&4&&CF(i);break;case 22:if(x=r!==null&&r.memoizedState!==null,i.mode&1?(Yi=(v=Yi)||x,na(t,i),Yi=v):na(t,i),Fa(i),o&8192){if(v=i.memoizedState!==null,(i.stateNode.isHidden=v)&&!x&&i.mode&1)for(dt=i,x=i.child;x!==null;){for(T=dt=x;dt!==null;){switch(E=dt,A=E.child,E.tag){case 0:case 11:case 14:case 15:K0(4,E,E.return);break;case 1:wp(E,E.return);var k=E.stateNode;if(typeof k.componentWillUnmount=="function"){o=E,r=E.return;try{t=o,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(_){Cr(o,r,_)}}break;case 5:wp(E,E.return);break;case 22:if(E.memoizedState!==null){_F(T);continue}}A!==null?(A.return=E,dt=A):_F(T)}x=x.sibling}e:for(x=null,T=i;;){if(T.tag===5){if(x===null){x=T;try{l=T.stateNode,v?(c=l.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(d=T.stateNode,m=T.memoizedProps.style,h=m!=null&&m.hasOwnProperty("display")?m.display:null,d.style.display=v$("display",h))}catch(_){Cr(i,i.return,_)}}}else if(T.tag===6){if(x===null)try{T.stateNode.nodeValue=v?"":T.memoizedProps}catch(_){Cr(i,i.return,_)}}else if((T.tag!==22&&T.tag!==23||T.memoizedState===null||T===i)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;x===T&&(x=null),T=T.return}x===T&&(x=null),T.sibling.return=T.return,T=T.sibling}}break;case 19:na(t,i),Fa(i),o&4&&CF(i);break;case 21:break;default:na(t,i),Fa(i)}}function Fa(i){var t=i.flags;if(t&2){try{e:{for(var r=i.return;r!==null;){if(GV(r)){var o=r;break e}r=r.return}throw Error(Me(160))}switch(o.tag){case 5:var l=o.stateNode;o.flags&32&&(nv(l,""),o.flags&=-33);var c=IF(i);ER(i,c,l);break;case 3:case 4:var h=o.stateNode.containerInfo,d=IF(i);wR(i,d,h);break;default:throw Error(Me(161))}}catch(m){Cr(i,i.return,m)}i.flags&=-3}t&4096&&(i.flags&=-4097)}function Yle(i,t,r){dt=i,KV(i)}function KV(i,t,r){for(var o=(i.mode&1)!==0;dt!==null;){var l=dt,c=l.child;if(l.tag===22&&o){var h=l.memoizedState!==null||qT;if(!h){var d=l.alternate,m=d!==null&&d.memoizedState!==null||Yi;d=qT;var v=Yi;if(qT=h,(Yi=m)&&!v)for(dt=l;dt!==null;)h=dt,m=h.child,h.tag===22&&h.memoizedState!==null?RF(l):m!==null?(m.return=h,dt=m):RF(l);for(;c!==null;)dt=c,KV(c),c=c.sibling;dt=l,qT=d,Yi=v}kF(i)}else l.subtreeFlags&8772&&c!==null?(c.return=l,dt=c):kF(i)}}function kF(i){for(;dt!==null;){var t=dt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yi||tE(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Yi)if(r===null)o.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:la(t.type,r.memoizedProps);o.componentDidUpdate(l,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&hF(t,c,o);break;case 3:var h=t.updateQueue;if(h!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}hF(t,h,r)}break;case 5:var d=t.stateNode;if(r===null&&t.flags&4){r=d;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&r.focus();break;case"img":m.src&&(r.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var v=t.alternate;if(v!==null){var x=v.memoizedState;if(x!==null){var T=x.dehydrated;T!==null&&ov(T)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Me(163))}Yi||t.flags&512&&SR(t)}catch(E){Cr(t,t.return,E)}}if(t===i){dt=null;break}if(r=t.sibling,r!==null){r.return=t.return,dt=r;break}dt=t.return}}function _F(i){for(;dt!==null;){var t=dt;if(t===i){dt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,dt=r;break}dt=t.return}}function RF(i){for(;dt!==null;){var t=dt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{tE(4,t)}catch(m){Cr(t,r,m)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var l=t.return;try{o.componentDidMount()}catch(m){Cr(t,l,m)}}var c=t.return;try{SR(t)}catch(m){Cr(t,c,m)}break;case 5:var h=t.return;try{SR(t)}catch(m){Cr(t,h,m)}}}catch(m){Cr(t,t.return,m)}if(t===i){dt=null;break}var d=t.sibling;if(d!==null){d.return=t.return,dt=d;break}dt=t.return}}var Xle=Math.ceil,fw=vu.ReactCurrentDispatcher,_4=vu.ReactCurrentOwner,Oo=vu.ReactCurrentBatchConfig,vn=0,vi=null,Vr=null,Ni=0,io=0,Ep=qc(0),oi=0,vv=null,yh=0,nE=0,R4=0,z0=null,Ds=null,L4=0,sm=1/0,Yl=null,pw=!1,bR=null,Rc=null,KT=!1,Ec=null,mw=0,W0=0,AR=null,LS=-1,PS=0;function ps(){return vn&6?Pr():LS!==-1?LS:LS=Pr()}function Lc(i){return i.mode&1?vn&2&&Ni!==0?Ni&-Ni:Dle.transition!==null?(PS===0&&(PS=R$()),PS):(i=Ln,i!==0||(i=window.event,i=i===void 0?16:j$(i.type)),i):1}function va(i,t,r,o){if(50<W0)throw W0=0,AR=null,Error(Me(185));Kv(i,r,o),(!(vn&2)||i!==vi)&&(i===vi&&(!(vn&2)&&(nE|=r),oi===4&&cc(i,Ni)),Us(i,o),r===1&&vn===0&&!(t.mode&1)&&(sm=Pr()+500,Jw&&Kc()))}function Us(i,t){var r=i.callbackNode;Dae(i,t);var o=JS(i,i===vi?Ni:0);if(o===0)r!==null&&FU(r),i.callbackNode=null,i.callbackPriority=0;else if(t=o&-o,i.callbackPriority!==t){if(r!=null&&FU(r),t===1)i.tag===0?Ple(LF.bind(null,i)):nV(LF.bind(null,i)),kle(function(){!(vn&6)&&Kc()}),r=null;else{switch(L$(o)){case 1:r=r4;break;case 4:r=k$;break;case 16:r=QS;break;case 536870912:r=_$;break;default:r=QS}r=eG(r,zV.bind(null,i))}i.callbackPriority=t,i.callbackNode=r}}function zV(i,t){if(LS=-1,PS=0,vn&6)throw Error(Me(327));var r=i.callbackNode;if(Lp()&&i.callbackNode!==r)return null;var o=JS(i,i===vi?Ni:0);if(o===0)return null;if(o&30||o&i.expiredLanes||t)t=gw(i,o);else{t=o;var l=vn;vn|=2;var c=YV();(vi!==i||Ni!==t)&&(Yl=null,sm=Pr()+500,dh(i,t));do try{Zle();break}catch(d){WV(i,d)}while(!0);g4(),fw.current=c,vn=l,Vr!==null?t=0:(vi=null,Ni=0,t=oi)}if(t!==0){if(t===2&&(l=J_(i),l!==0&&(o=l,t=IR(i,l))),t===1)throw r=vv,dh(i,0),cc(i,o),Us(i,Pr()),r;if(t===6)cc(i,o);else{if(l=i.current.alternate,!(o&30)&&!Qle(l)&&(t=gw(i,o),t===2&&(c=J_(i),c!==0&&(o=c,t=IR(i,c))),t===1))throw r=vv,dh(i,0),cc(i,o),Us(i,Pr()),r;switch(i.finishedWork=l,i.finishedLanes=o,t){case 0:case 1:throw Error(Me(345));case 2:Hd(i,Ds,Yl);break;case 3:if(cc(i,o),(o&130023424)===o&&(t=L4+500-Pr(),10<t)){if(JS(i,0)!==0)break;if(l=i.suspendedLanes,(l&o)!==o){ps(),i.pingedLanes|=i.suspendedLanes&l;break}i.timeoutHandle=oR(Hd.bind(null,i,Ds,Yl),t);break}Hd(i,Ds,Yl);break;case 4:if(cc(i,o),(o&4194240)===o)break;for(t=i.eventTimes,l=-1;0<o;){var h=31-ga(o);c=1<<h,h=t[h],h>l&&(l=h),o&=~c}if(o=l,o=Pr()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Xle(o/1960))-o,10<o){i.timeoutHandle=oR(Hd.bind(null,i,Ds,Yl),o);break}Hd(i,Ds,Yl);break;case 5:Hd(i,Ds,Yl);break;default:throw Error(Me(329))}}}return Us(i,Pr()),i.callbackNode===r?zV.bind(null,i):null}function IR(i,t){var r=z0;return i.current.memoizedState.isDehydrated&&(dh(i,t).flags|=256),i=gw(i,t),i!==2&&(t=Ds,Ds=r,t!==null&&CR(t)),i}function CR(i){Ds===null?Ds=i:Ds.push.apply(Ds,i)}function Qle(i){for(var t=i;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var l=r[o],c=l.getSnapshot;l=l.value;try{if(!ya(c(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cc(i,t){for(t&=~R4,t&=~nE,i.suspendedLanes|=t,i.pingedLanes&=~t,i=i.expirationTimes;0<t;){var r=31-ga(t),o=1<<r;i[r]=-1,t&=~o}}function LF(i){if(vn&6)throw Error(Me(327));Lp();var t=JS(i,0);if(!(t&1))return Us(i,Pr()),null;var r=gw(i,t);if(i.tag!==0&&r===2){var o=J_(i);o!==0&&(t=o,r=IR(i,o))}if(r===1)throw r=vv,dh(i,0),cc(i,t),Us(i,Pr()),r;if(r===6)throw Error(Me(345));return i.finishedWork=i.current.alternate,i.finishedLanes=t,Hd(i,Ds,Yl),Us(i,Pr()),null}function P4(i,t){var r=vn;vn|=1;try{return i(t)}finally{vn=r,vn===0&&(sm=Pr()+500,Jw&&Kc())}}function xh(i){Ec!==null&&Ec.tag===0&&!(vn&6)&&Lp();var t=vn;vn|=1;var r=Oo.transition,o=Ln;try{if(Oo.transition=null,Ln=1,i)return i()}finally{Ln=o,Oo.transition=r,vn=t,!(vn&6)&&Kc()}}function D4(){io=Ep.current,Xn(Ep)}function dh(i,t){i.finishedWork=null,i.finishedLanes=0;var r=i.timeoutHandle;if(r!==-1&&(i.timeoutHandle=-1,Cle(r)),Vr!==null)for(r=Vr.return;r!==null;){var o=r;switch(f4(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&rw();break;case 3:rm(),Xn(Os),Xn(Xi),w4();break;case 5:S4(o);break;case 4:rm();break;case 13:Xn(dr);break;case 19:Xn(dr);break;case 10:v4(o.type._context);break;case 22:case 23:D4()}r=r.return}if(vi=i,Vr=i=Pc(i.current,null),Ni=io=t,oi=0,vv=null,R4=nE=yh=0,Ds=z0=null,Qd!==null){for(t=0;t<Qd.length;t++)if(r=Qd[t],o=r.interleaved,o!==null){r.interleaved=null;var l=o.next,c=r.pending;if(c!==null){var h=c.next;c.next=l,o.next=h}r.pending=o}Qd=null}return i}function WV(i,t){do{var r=Vr;try{if(g4(),kS.current=hw,dw){for(var o=pr.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}dw=!1}if(vh=0,mi=ri=pr=null,q0=!1,pv=0,_4.current=null,r===null||r.return===null){oi=1,vv=t,Vr=null;break}e:{var c=i,h=r.return,d=r,m=t;if(t=Ni,d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var v=m,x=d,T=x.tag;if(!(x.mode&1)&&(T===0||T===11||T===15)){var E=x.alternate;E?(x.updateQueue=E.updateQueue,x.memoizedState=E.memoizedState,x.lanes=E.lanes):(x.updateQueue=null,x.memoizedState=null)}var A=yF(h);if(A!==null){A.flags&=-257,xF(A,h,d,c,t),A.mode&1&&vF(c,v,t),t=A,m=v;var k=t.updateQueue;if(k===null){var _=new Set;_.add(m),t.updateQueue=_}else k.add(m);break e}else{if(!(t&1)){vF(c,v,t),N4();break e}m=Error(Me(426))}}else if(er&&d.mode&1){var R=yF(h);if(R!==null){!(R.flags&65536)&&(R.flags|=256),xF(R,h,d,c,t),p4(im(m,d));break e}}c=m=im(m,d),oi!==4&&(oi=2),z0===null?z0=[c]:z0.push(c),c=h;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var P=LV(c,m,t);dF(c,P);break e;case 1:d=m;var D=c.type,N=c.stateNode;if(!(c.flags&128)&&(typeof D.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Rc===null||!Rc.has(N)))){c.flags|=65536,t&=-t,c.lanes|=t;var $=PV(c,d,t);dF(c,$);break e}}c=c.return}while(c!==null)}QV(r)}catch(V){t=V,Vr===r&&r!==null&&(Vr=r=r.return);continue}break}while(!0)}function YV(){var i=fw.current;return fw.current=hw,i===null?hw:i}function N4(){(oi===0||oi===3||oi===2)&&(oi=4),vi===null||!(yh&268435455)&&!(nE&268435455)||cc(vi,Ni)}function gw(i,t){var r=vn;vn|=2;var o=YV();(vi!==i||Ni!==t)&&(Yl=null,dh(i,t));do try{Jle();break}catch(l){WV(i,l)}while(!0);if(g4(),vn=r,fw.current=o,Vr!==null)throw Error(Me(261));return vi=null,Ni=0,oi}function Jle(){for(;Vr!==null;)XV(Vr)}function Zle(){for(;Vr!==null&&!bae();)XV(Vr)}function XV(i){var t=ZV(i.alternate,i,io);i.memoizedProps=i.pendingProps,t===null?QV(i):Vr=t,_4.current=null}function QV(i){var t=i;do{var r=t.alternate;if(i=t.return,t.flags&32768){if(r=Kle(r,t),r!==null){r.flags&=32767,Vr=r;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{oi=6,Vr=null;return}}else if(r=qle(r,t,io),r!==null){Vr=r;return}if(t=t.sibling,t!==null){Vr=t;return}Vr=t=i}while(t!==null);oi===0&&(oi=5)}function Hd(i,t,r){var o=Ln,l=Oo.transition;try{Oo.transition=null,Ln=1,eue(i,t,r,o)}finally{Oo.transition=l,Ln=o}return null}function eue(i,t,r,o){do Lp();while(Ec!==null);if(vn&6)throw Error(Me(327));r=i.finishedWork;var l=i.finishedLanes;if(r===null)return null;if(i.finishedWork=null,i.finishedLanes=0,r===i.current)throw Error(Me(177));i.callbackNode=null,i.callbackPriority=0;var c=r.lanes|r.childLanes;if(Nae(i,c),i===vi&&(Vr=vi=null,Ni=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||KT||(KT=!0,eG(QS,function(){return Lp(),null})),c=(r.flags&15990)!==0,r.subtreeFlags&15990||c){c=Oo.transition,Oo.transition=null;var h=Ln;Ln=1;var d=vn;vn|=4,_4.current=null,Wle(i,r),qV(r,i),Tle(iR),ZS=!!rR,iR=rR=null,i.current=r,Yle(r),Aae(),vn=d,Ln=h,Oo.transition=c}else i.current=r;if(KT&&(KT=!1,Ec=i,mw=l),c=i.pendingLanes,c===0&&(Rc=null),kae(r.stateNode),Us(i,Pr()),t!==null)for(o=i.onRecoverableError,r=0;r<t.length;r++)l=t[r],o(l.value,{componentStack:l.stack,digest:l.digest});if(pw)throw pw=!1,i=bR,bR=null,i;return mw&1&&i.tag!==0&&Lp(),c=i.pendingLanes,c&1?i===AR?W0++:(W0=0,AR=i):W0=0,Kc(),null}function Lp(){if(Ec!==null){var i=L$(mw),t=Oo.transition,r=Ln;try{if(Oo.transition=null,Ln=16>i?16:i,Ec===null)var o=!1;else{if(i=Ec,Ec=null,mw=0,vn&6)throw Error(Me(331));var l=vn;for(vn|=4,dt=i.current;dt!==null;){var c=dt,h=c.child;if(dt.flags&16){var d=c.deletions;if(d!==null){for(var m=0;m<d.length;m++){var v=d[m];for(dt=v;dt!==null;){var x=dt;switch(x.tag){case 0:case 11:case 15:K0(8,x,c)}var T=x.child;if(T!==null)T.return=x,dt=T;else for(;dt!==null;){x=dt;var E=x.sibling,A=x.return;if(VV(x),x===v){dt=null;break}if(E!==null){E.return=A,dt=E;break}dt=A}}}var k=c.alternate;if(k!==null){var _=k.child;if(_!==null){k.child=null;do{var R=_.sibling;_.sibling=null,_=R}while(_!==null)}}dt=c}}if(c.subtreeFlags&2064&&h!==null)h.return=c,dt=h;else e:for(;dt!==null;){if(c=dt,c.flags&2048)switch(c.tag){case 0:case 11:case 15:K0(9,c,c.return)}var P=c.sibling;if(P!==null){P.return=c.return,dt=P;break e}dt=c.return}}var D=i.current;for(dt=D;dt!==null;){h=dt;var N=h.child;if(h.subtreeFlags&2064&&N!==null)N.return=h,dt=N;else e:for(h=D;dt!==null;){if(d=dt,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:tE(9,d)}}catch(V){Cr(d,d.return,V)}if(d===h){dt=null;break e}var $=d.sibling;if($!==null){$.return=d.return,dt=$;break e}dt=d.return}}if(vn=l,Kc(),Za&&typeof Za.onPostCommitFiberRoot=="function")try{Za.onPostCommitFiberRoot(zw,i)}catch{}o=!0}return o}finally{Ln=r,Oo.transition=t}}return!1}function PF(i,t,r){t=im(r,t),t=LV(i,t,1),i=_c(i,t,1),t=ps(),i!==null&&(Kv(i,1,t),Us(i,t))}function Cr(i,t,r){if(i.tag===3)PF(i,i,r);else for(;t!==null;){if(t.tag===3){PF(t,i,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Rc===null||!Rc.has(o))){i=im(r,i),i=PV(t,i,1),t=_c(t,i,1),i=ps(),t!==null&&(Kv(t,1,i),Us(t,i));break}}t=t.return}}function tue(i,t,r){var o=i.pingCache;o!==null&&o.delete(t),t=ps(),i.pingedLanes|=i.suspendedLanes&r,vi===i&&(Ni&r)===r&&(oi===4||oi===3&&(Ni&130023424)===Ni&&500>Pr()-L4?dh(i,0):R4|=r),Us(i,t)}function JV(i,t){t===0&&(i.mode&1?(t=OT,OT<<=1,!(OT&130023424)&&(OT=4194304)):t=1);var r=ps();i=cu(i,t),i!==null&&(Kv(i,t,r),Us(i,r))}function nue(i){var t=i.memoizedState,r=0;t!==null&&(r=t.retryLane),JV(i,r)}function rue(i,t){var r=0;switch(i.tag){case 13:var o=i.stateNode,l=i.memoizedState;l!==null&&(r=l.retryLane);break;case 19:o=i.stateNode;break;default:throw Error(Me(314))}o!==null&&o.delete(t),JV(i,r)}var ZV;ZV=function(i,t,r){if(i!==null)if(i.memoizedProps!==t.pendingProps||Os.current)Ns=!0;else{if(!(i.lanes&r)&&!(t.flags&128))return Ns=!1,Hle(i,t,r);Ns=!!(i.flags&131072)}else Ns=!1,er&&t.flags&1048576&&rV(t,ow,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;RS(i,t),i=t.pendingProps;var l=em(t,Xi.current);Rp(t,r),l=b4(null,t,o,i,l,r);var c=A4();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,js(o)?(c=!0,iw(t)):c=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,x4(t),l.updater=eE,t.stateNode=l,l._reactInternals=t,fR(t,o,i,r),t=gR(null,t,o,!0,c,r)):(t.tag=0,er&&c&&h4(t),us(null,t,l,r),t=t.child),t;case 16:o=t.elementType;e:{switch(RS(i,t),i=t.pendingProps,l=o._init,o=l(o._payload),t.type=o,l=t.tag=sue(o),i=la(o,i),l){case 0:t=mR(null,t,o,i,r);break e;case 1:t=wF(null,t,o,i,r);break e;case 11:t=TF(null,t,o,i,r);break e;case 14:t=SF(null,t,o,la(o.type,i),r);break e}throw Error(Me(306,o,""))}return t;case 0:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:la(o,l),mR(i,t,o,l,r);case 1:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:la(o,l),wF(i,t,o,l,r);case 3:e:{if(OV(t),i===null)throw Error(Me(387));o=t.pendingProps,c=t.memoizedState,l=c.element,uV(i,t),uw(t,o,null,r);var h=t.memoizedState;if(o=h.element,c.isDehydrated)if(c={element:o,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){l=im(Error(Me(423)),t),t=EF(i,t,o,r,l);break e}else if(o!==l){l=im(Error(Me(424)),t),t=EF(i,t,o,r,l);break e}else for(co=kc(t.stateNode.containerInfo.firstChild),ho=t,er=!0,pa=null,r=aV(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(tm(),o===l){t=du(i,t,r);break e}us(i,t,o,r)}t=t.child}return t;case 5:return cV(t),i===null&&cR(t),o=t.type,l=t.pendingProps,c=i!==null?i.memoizedProps:null,h=l.children,sR(o,l)?h=null:c!==null&&sR(o,c)&&(t.flags|=32),MV(i,t),us(i,t,h,r),t.child;case 6:return i===null&&cR(t),null;case 13:return jV(i,t,r);case 4:return T4(t,t.stateNode.containerInfo),o=t.pendingProps,i===null?t.child=nm(t,null,o,r):us(i,t,o,r),t.child;case 11:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:la(o,l),TF(i,t,o,l,r);case 7:return us(i,t,t.pendingProps,r),t.child;case 8:return us(i,t,t.pendingProps.children,r),t.child;case 12:return us(i,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,l=t.pendingProps,c=t.memoizedProps,h=l.value,Gn(aw,o._currentValue),o._currentValue=h,c!==null)if(ya(c.value,h)){if(c.children===l.children&&!Os.current){t=du(i,t,r);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var d=c.dependencies;if(d!==null){h=c.child;for(var m=d.firstContext;m!==null;){if(m.context===o){if(c.tag===1){m=iu(-1,r&-r),m.tag=2;var v=c.updateQueue;if(v!==null){v=v.shared;var x=v.pending;x===null?m.next=m:(m.next=x.next,x.next=m),v.pending=m}}c.lanes|=r,m=c.alternate,m!==null&&(m.lanes|=r),dR(c.return,r,t),d.lanes|=r;break}m=m.next}}else if(c.tag===10)h=c.type===t.type?null:c.child;else if(c.tag===18){if(h=c.return,h===null)throw Error(Me(341));h.lanes|=r,d=h.alternate,d!==null&&(d.lanes|=r),dR(h,r,t),h=c.sibling}else h=c.child;if(h!==null)h.return=c;else for(h=c;h!==null;){if(h===t){h=null;break}if(c=h.sibling,c!==null){c.return=h.return,h=c;break}h=h.return}c=h}us(i,t,l.children,r),t=t.child}return t;case 9:return l=t.type,o=t.pendingProps.children,Rp(t,r),l=jo(l),o=o(l),t.flags|=1,us(i,t,o,r),t.child;case 14:return o=t.type,l=la(o,t.pendingProps),l=la(o.type,l),SF(i,t,o,l,r);case 15:return DV(i,t,t.type,t.pendingProps,r);case 17:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:la(o,l),RS(i,t),t.tag=1,js(o)?(i=!0,iw(t)):i=!1,Rp(t,r),RV(t,o,l),fR(t,o,l,r),gR(null,t,o,!0,i,r);case 19:return UV(i,t,r);case 22:return NV(i,t,r)}throw Error(Me(156,t.tag))};function eG(i,t){return C$(i,t)}function iue(i,t,r,o){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mo(i,t,r,o){return new iue(i,t,r,o)}function M4(i){return i=i.prototype,!(!i||!i.isReactComponent)}function sue(i){if(typeof i=="function")return M4(i)?1:0;if(i!=null){if(i=i.$$typeof,i===e4)return 11;if(i===t4)return 14}return 2}function Pc(i,t){var r=i.alternate;return r===null?(r=Mo(i.tag,t,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=t,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&14680064,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,t=i.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r}function DS(i,t,r,o,l,c){var h=2;if(o=i,typeof i=="function")M4(i)&&(h=1);else if(typeof i=="string")h=5;else e:switch(i){case fp:return hh(r.children,l,c,t);case ZL:h=8,l|=8;break;case j_:return i=Mo(12,r,t,l|2),i.elementType=j_,i.lanes=c,i;case U_:return i=Mo(13,r,t,l),i.elementType=U_,i.lanes=c,i;case F_:return i=Mo(19,r,t,l),i.elementType=F_,i.lanes=c,i;case c$:return rE(r,l,c,t);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case l$:h=10;break e;case u$:h=9;break e;case e4:h=11;break e;case t4:h=14;break e;case ic:h=16,o=null;break e}throw Error(Me(130,i==null?i:typeof i,""))}return t=Mo(h,r,t,l),t.elementType=i,t.type=o,t.lanes=c,t}function hh(i,t,r,o){return i=Mo(7,i,o,t),i.lanes=r,i}function rE(i,t,r,o){return i=Mo(22,i,o,t),i.elementType=c$,i.lanes=r,i.stateNode={isHidden:!1},i}function jk(i,t,r){return i=Mo(6,i,null,t),i.lanes=r,i}function Uk(i,t,r){return t=Mo(4,i.children!==null?i.children:[],i.key,t),t.lanes=r,t.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},t}function oue(i,t,r,o,l){this.tag=t,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yk(0),this.expirationTimes=yk(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yk(0),this.identifierPrefix=o,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function O4(i,t,r,o,l,c,h,d,m){return i=new oue(i,t,r,d,m),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Mo(3,null,null,t),i.current=c,c.stateNode=i,c.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},x4(c),i}function aue(i,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hp,key:o==null?null:""+o,children:i,containerInfo:t,implementation:r}}function tG(i){if(!i)return jc;i=i._reactInternals;e:{if(Rh(i)!==i||i.tag!==1)throw Error(Me(170));var t=i;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(js(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Me(171))}if(i.tag===1){var r=i.type;if(js(r))return tV(i,r,t)}return t}function nG(i,t,r,o,l,c,h,d,m){return i=O4(r,o,!0,i,l,c,h,d,m),i.context=tG(null),r=i.current,o=ps(),l=Lc(r),c=iu(o,l),c.callback=t??null,_c(r,c,l),i.current.lanes=l,Kv(i,l,o),Us(i,o),i}function iE(i,t,r,o){var l=t.current,c=ps(),h=Lc(l);return r=tG(r),t.context===null?t.context=r:t.pendingContext=r,t=iu(c,h),t.payload={element:i},o=o===void 0?null:o,o!==null&&(t.callback=o),i=_c(l,t,h),i!==null&&(va(i,l,h,c),CS(i,l,h)),h}function vw(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function DF(i,t){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<t?r:t}}function j4(i,t){DF(i,t),(i=i.alternate)&&DF(i,t)}function lue(){return null}var rG=typeof reportError=="function"?reportError:function(i){console.error(i)};function U4(i){this._internalRoot=i}sE.prototype.render=U4.prototype.render=function(i){var t=this._internalRoot;if(t===null)throw Error(Me(409));iE(i,t,null,null)};sE.prototype.unmount=U4.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var t=i.containerInfo;xh(function(){iE(null,i,null,null)}),t[uu]=null}};function sE(i){this._internalRoot=i}sE.prototype.unstable_scheduleHydration=function(i){if(i){var t=N$();i={blockedOn:null,target:i,priority:t};for(var r=0;r<uc.length&&t!==0&&t<uc[r].priority;r++);uc.splice(r,0,i),r===0&&O$(i)}};function F4(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function oE(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function NF(){}function uue(i,t,r,o,l){if(l){if(typeof o=="function"){var c=o;o=function(){var v=vw(h);c.call(v)}}var h=nG(t,o,i,0,null,!1,!1,"",NF);return i._reactRootContainer=h,i[uu]=h.current,uv(i.nodeType===8?i.parentNode:i),xh(),h}for(;l=i.lastChild;)i.removeChild(l);if(typeof o=="function"){var d=o;o=function(){var v=vw(m);d.call(v)}}var m=O4(i,0,!1,null,null,!1,!1,"",NF);return i._reactRootContainer=m,i[uu]=m.current,uv(i.nodeType===8?i.parentNode:i),xh(function(){iE(t,m,r,o)}),m}function aE(i,t,r,o,l){var c=r._reactRootContainer;if(c){var h=c;if(typeof l=="function"){var d=l;l=function(){var m=vw(h);d.call(m)}}iE(t,h,i,l)}else h=uue(r,t,i,l,o);return vw(h)}P$=function(i){switch(i.tag){case 3:var t=i.stateNode;if(t.current.memoizedState.isDehydrated){var r=N0(t.pendingLanes);r!==0&&(i4(t,r|1),Us(t,Pr()),!(vn&6)&&(sm=Pr()+500,Kc()))}break;case 13:xh(function(){var o=cu(i,1);if(o!==null){var l=ps();va(o,i,1,l)}}),j4(i,1)}};s4=function(i){if(i.tag===13){var t=cu(i,134217728);if(t!==null){var r=ps();va(t,i,134217728,r)}j4(i,134217728)}};D$=function(i){if(i.tag===13){var t=Lc(i),r=cu(i,t);if(r!==null){var o=ps();va(r,i,t,o)}j4(i,t)}};N$=function(){return Ln};M$=function(i,t){var r=Ln;try{return Ln=i,t()}finally{Ln=r}};Y_=function(i,t,r){switch(t){case"input":if(V_(i,r),t=r.name,r.type==="radio"&&t!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==i&&o.form===i.form){var l=Qw(o);if(!l)throw Error(Me(90));h$(o),V_(o,l)}}}break;case"textarea":p$(i,r);break;case"select":t=r.value,t!=null&&Ip(i,!!r.multiple,t,!1)}};S$=P4;w$=xh;var cue={usingClientEntryPoint:!1,Events:[Wv,vp,Qw,x$,T$,P4]},I0={findFiberByHostInstance:Xd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},due={bundleType:I0.bundleType,version:I0.version,rendererPackageName:I0.rendererPackageName,rendererConfig:I0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vu.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=A$(i),i===null?null:i.stateNode},findFiberByHostInstance:I0.findFiberByHostInstance||lue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zT.isDisabled&&zT.supportsFiber)try{zw=zT.inject(due),Za=zT}catch{}}go.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cue;go.createPortal=function(i,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!F4(t))throw Error(Me(200));return aue(i,t,null,r)};go.createRoot=function(i,t){if(!F4(i))throw Error(Me(299));var r=!1,o="",l=rG;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=O4(i,1,!1,null,null,r,!1,o,l),i[uu]=t.current,uv(i.nodeType===8?i.parentNode:i),new U4(t)};go.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var t=i._reactInternals;if(t===void 0)throw typeof i.render=="function"?Error(Me(188)):(i=Object.keys(i).join(","),Error(Me(268,i)));return i=A$(t),i=i===null?null:i.stateNode,i};go.flushSync=function(i){return xh(i)};go.hydrate=function(i,t,r){if(!oE(t))throw Error(Me(200));return aE(null,i,t,!0,r)};go.hydrateRoot=function(i,t,r){if(!F4(i))throw Error(Me(405));var o=r!=null&&r.hydratedSources||null,l=!1,c="",h=rG;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),t=nG(t,null,i,1,r??null,l,!1,c,h),i[uu]=t.current,uv(i),o)for(i=0;i<o.length;i++)r=o[i],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new sE(t)};go.render=function(i,t,r){if(!oE(t))throw Error(Me(200));return aE(null,i,t,!1,r)};go.unmountComponentAtNode=function(i){if(!oE(i))throw Error(Me(40));return i._reactRootContainer?(xh(function(){aE(null,null,i,!1,function(){i._reactRootContainer=null,i[uu]=null})}),!0):!1};go.unstable_batchedUpdates=P4;go.unstable_renderSubtreeIntoContainer=function(i,t,r,o){if(!oE(r))throw Error(Me(200));if(i==null||i._reactInternals===void 0)throw Error(Me(38));return aE(i,t,r,!1,o)};go.version="18.3.1-next-f1338f8080-20240426";function iG(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iG)}catch(i){console.error(i)}}iG(),i$.exports=go;var Lh=i$.exports;const sG=HL(Lh);var oG,MF=Lh;oG=MF.createRoot,MF.hydrateRoot;const hue=1,fue=1e6;let Fk=0;function pue(){return Fk=(Fk+1)%Number.MAX_SAFE_INTEGER,Fk.toString()}const Bk=new Map,OF=i=>{if(Bk.has(i))return;const t=setTimeout(()=>{Bk.delete(i),Y0({type:"REMOVE_TOAST",toastId:i})},fue);Bk.set(i,t)},mue=(i,t)=>{switch(t.type){case"ADD_TOAST":return{...i,toasts:[t.toast,...i.toasts].slice(0,hue)};case"UPDATE_TOAST":return{...i,toasts:i.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?OF(r):i.toasts.forEach(o=>{OF(o.id)}),{...i,toasts:i.toasts.map(o=>o.id===r||r===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return t.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(r=>r.id!==t.toastId)}}},NS=[];let MS={toasts:[]};function Y0(i){MS=mue(MS,i),NS.forEach(t=>{t(MS)})}function gue({...i}){const t=pue(),r=l=>Y0({type:"UPDATE_TOAST",toast:{...l,id:t}}),o=()=>Y0({type:"DISMISS_TOAST",toastId:t});return Y0({type:"ADD_TOAST",toast:{...i,id:t,open:!0,onOpenChange:l=>{l||o()}}}),{id:t,dismiss:o,update:r}}function B4(){const[i,t]=M.useState(MS);return M.useEffect(()=>(NS.push(t),()=>{const r=NS.indexOf(t);r>-1&&NS.splice(r,1)}),[i]),{...i,toast:gue,dismiss:r=>Y0({type:"DISMISS_TOAST",toastId:r})}}function st(i,t,{checkForDefaultPrevented:r=!0}={}){return function(l){if(i==null||i(l),r===!1||!l.defaultPrevented)return t==null?void 0:t(l)}}function jF(i,t){if(typeof i=="function")return i(t);i!=null&&(i.current=t)}function aG(...i){return t=>{let r=!1;const o=i.map(l=>{const c=jF(l,t);return!r&&typeof c=="function"&&(r=!0),c});if(r)return()=>{for(let l=0;l<o.length;l++){const c=o[l];typeof c=="function"?c():jF(i[l],null)}}}}function Kt(...i){return M.useCallback(aG(...i),i)}function vue(i,t){const r=M.createContext(t),o=c=>{const{children:h,...d}=c,m=M.useMemo(()=>d,Object.values(d));return S.jsx(r.Provider,{value:m,children:h})};o.displayName=i+"Provider";function l(c){const h=M.useContext(r);if(h)return h;if(t!==void 0)return t;throw new Error(`\`${c}\` must be used within \`${i}\``)}return[o,l]}function Fs(i,t=[]){let r=[];function o(c,h){const d=M.createContext(h),m=r.length;r=[...r,h];const v=T=>{var P;const{scope:E,children:A,...k}=T,_=((P=E==null?void 0:E[i])==null?void 0:P[m])||d,R=M.useMemo(()=>k,Object.values(k));return S.jsx(_.Provider,{value:R,children:A})};v.displayName=c+"Provider";function x(T,E){var _;const A=((_=E==null?void 0:E[i])==null?void 0:_[m])||d,k=M.useContext(A);if(k)return k;if(h!==void 0)return h;throw new Error(`\`${T}\` must be used within \`${c}\``)}return[v,x]}const l=()=>{const c=r.map(h=>M.createContext(h));return function(d){const m=(d==null?void 0:d[i])||c;return M.useMemo(()=>({[`__scope${i}`]:{...d,[i]:m}}),[d,m])}};return l.scopeName=i,[o,yue(l,...t)]}function yue(...i){const t=i[0];if(i.length===1)return t;const r=()=>{const o=i.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(c){const h=o.reduce((d,{useScope:m,scopeName:v})=>{const T=m(c)[`__scope${v}`];return{...d,...T}},{});return M.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}function Th(i){const t=Tue(i),r=M.forwardRef((o,l)=>{const{children:c,...h}=o,d=M.Children.toArray(c),m=d.find(Sue);if(m){const v=m.props.children,x=d.map(T=>T===m?M.Children.count(v)>1?M.Children.only(null):M.isValidElement(v)?v.props.children:null:T);return S.jsx(t,{...h,ref:l,children:M.isValidElement(v)?M.cloneElement(v,void 0,x):null})}return S.jsx(t,{...h,ref:l,children:c})});return r.displayName=`${i}.Slot`,r}var xue=Th("Slot");function Tue(i){const t=M.forwardRef((r,o)=>{const{children:l,...c}=r;if(M.isValidElement(l)){const h=Eue(l),d=wue(c,l.props);return l.type!==M.Fragment&&(d.ref=o?aG(o,h):h),M.cloneElement(l,d)}return M.Children.count(l)>1?M.Children.only(null):null});return t.displayName=`${i}.SlotClone`,t}var lG=Symbol("radix.slottable");function uG(i){const t=({children:r})=>S.jsx(S.Fragment,{children:r});return t.displayName=`${i}.Slottable`,t.__radixId=lG,t}function Sue(i){return M.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===lG}function wue(i,t){const r={...t};for(const o in t){const l=i[o],c=t[o];/^on[A-Z]/.test(o)?l&&c?r[o]=(...d)=>{const m=c(...d);return l(...d),m}:l&&(r[o]=l):o==="style"?r[o]={...l,...c}:o==="className"&&(r[o]=[l,c].filter(Boolean).join(" "))}return{...i,...r}}function Eue(i){var o,l;let t=(o=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?i.ref:(t=(l=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:l.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?i.props.ref:i.props.ref||i.ref)}function lE(i){const t=i+"CollectionProvider",[r,o]=Fs(t),[l,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),h=_=>{const{scope:R,children:P}=_,D=Be.useRef(null),N=Be.useRef(new Map).current;return S.jsx(l,{scope:R,itemMap:N,collectionRef:D,children:P})};h.displayName=t;const d=i+"CollectionSlot",m=Th(d),v=Be.forwardRef((_,R)=>{const{scope:P,children:D}=_,N=c(d,P),$=Kt(R,N.collectionRef);return S.jsx(m,{ref:$,children:D})});v.displayName=d;const x=i+"CollectionItemSlot",T="data-radix-collection-item",E=Th(x),A=Be.forwardRef((_,R)=>{const{scope:P,children:D,...N}=_,$=Be.useRef(null),V=Kt(R,$),W=c(x,P);return Be.useEffect(()=>(W.itemMap.set($,{ref:$,...N}),()=>void W.itemMap.delete($))),S.jsx(E,{[T]:"",ref:V,children:D})});A.displayName=x;function k(_){const R=c(i+"CollectionConsumer",_);return Be.useCallback(()=>{const D=R.collectionRef.current;if(!D)return[];const N=Array.from(D.querySelectorAll(`[${T}]`));return Array.from(R.itemMap.values()).sort((W,C)=>N.indexOf(W.ref.current)-N.indexOf(C.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:h,Slot:v,ItemSlot:A},k,o]}var bue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xt=bue.reduce((i,t)=>{const r=Th(`Primitive.${t}`),o=M.forwardRef((l,c)=>{const{asChild:h,...d}=l,m=h?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(m,{...d,ref:c})});return o.displayName=`Primitive.${t}`,{...i,[t]:o}},{});function cG(i,t){i&&Lh.flushSync(()=>i.dispatchEvent(t))}function Gr(i){const t=M.useRef(i);return M.useEffect(()=>{t.current=i}),M.useMemo(()=>(...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}function Aue(i,t=globalThis==null?void 0:globalThis.document){const r=Gr(i);M.useEffect(()=>{const o=l=>{l.key==="Escape"&&r(l)};return t.addEventListener("keydown",o,{capture:!0}),()=>t.removeEventListener("keydown",o,{capture:!0})},[r,t])}var Iue="DismissableLayer",kR="dismissableLayer.update",Cue="dismissableLayer.pointerDownOutside",kue="dismissableLayer.focusOutside",UF,dG=M.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ym=M.forwardRef((i,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:h,onDismiss:d,...m}=i,v=M.useContext(dG),[x,T]=M.useState(null),E=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,A]=M.useState({}),k=Kt(t,C=>T(C)),_=Array.from(v.layers),[R]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1),P=_.indexOf(R),D=x?_.indexOf(x):-1,N=v.layersWithOutsidePointerEventsDisabled.size>0,$=D>=P,V=Rue(C=>{const K=C.target,ee=[...v.branches].some(Q=>Q.contains(K));!$||ee||(l==null||l(C),h==null||h(C),C.defaultPrevented||d==null||d())},E),W=Lue(C=>{const K=C.target;[...v.branches].some(Q=>Q.contains(K))||(c==null||c(C),h==null||h(C),C.defaultPrevented||d==null||d())},E);return Aue(C=>{D===v.layers.size-1&&(o==null||o(C),!C.defaultPrevented&&d&&(C.preventDefault(),d()))},E),M.useEffect(()=>{if(x)return r&&(v.layersWithOutsidePointerEventsDisabled.size===0&&(UF=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),v.layersWithOutsidePointerEventsDisabled.add(x)),v.layers.add(x),FF(),()=>{r&&v.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=UF)}},[x,E,r,v]),M.useEffect(()=>()=>{x&&(v.layers.delete(x),v.layersWithOutsidePointerEventsDisabled.delete(x),FF())},[x,v]),M.useEffect(()=>{const C=()=>A({});return document.addEventListener(kR,C),()=>document.removeEventListener(kR,C)},[]),S.jsx(xt.div,{...m,ref:k,style:{pointerEvents:N?$?"auto":"none":void 0,...i.style},onFocusCapture:st(i.onFocusCapture,W.onFocusCapture),onBlurCapture:st(i.onBlurCapture,W.onBlurCapture),onPointerDownCapture:st(i.onPointerDownCapture,V.onPointerDownCapture)})});ym.displayName=Iue;var _ue="DismissableLayerBranch",hG=M.forwardRef((i,t)=>{const r=M.useContext(dG),o=M.useRef(null),l=Kt(t,o);return M.useEffect(()=>{const c=o.current;if(c)return r.branches.add(c),()=>{r.branches.delete(c)}},[r.branches]),S.jsx(xt.div,{...i,ref:l})});hG.displayName=_ue;function Rue(i,t=globalThis==null?void 0:globalThis.document){const r=Gr(i),o=M.useRef(!1),l=M.useRef(()=>{});return M.useEffect(()=>{const c=d=>{if(d.target&&!o.current){let m=function(){fG(Cue,r,v,{discrete:!0})};const v={originalEvent:d};d.pointerType==="touch"?(t.removeEventListener("click",l.current),l.current=m,t.addEventListener("click",l.current,{once:!0})):m()}else t.removeEventListener("click",l.current);o.current=!1},h=window.setTimeout(()=>{t.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(h),t.removeEventListener("pointerdown",c),t.removeEventListener("click",l.current)}},[t,r]),{onPointerDownCapture:()=>o.current=!0}}function Lue(i,t=globalThis==null?void 0:globalThis.document){const r=Gr(i),o=M.useRef(!1);return M.useEffect(()=>{const l=c=>{c.target&&!o.current&&fG(kue,r,{originalEvent:c},{discrete:!1})};return t.addEventListener("focusin",l),()=>t.removeEventListener("focusin",l)},[t,r]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function FF(){const i=new CustomEvent(kR);document.dispatchEvent(i)}function fG(i,t,r,{discrete:o}){const l=r.originalEvent.target,c=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:r});t&&l.addEventListener(i,t,{once:!0}),o?cG(l,c):l.dispatchEvent(c)}var Pue=ym,Due=hG,Nr=globalThis!=null&&globalThis.document?M.useLayoutEffect:()=>{},Nue="Portal",Xv=M.forwardRef((i,t)=>{var d;const{container:r,...o}=i,[l,c]=M.useState(!1);Nr(()=>c(!0),[]);const h=r||l&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return h?sG.createPortal(S.jsx(xt.div,{...o,ref:t}),h):null});Xv.displayName=Nue;function Mue(i,t){return M.useReducer((r,o)=>t[r][o]??r,i)}var yo=i=>{const{present:t,children:r}=i,o=Oue(t),l=typeof r=="function"?r({present:o.isPresent}):M.Children.only(r),c=Kt(o.ref,jue(l));return typeof r=="function"||o.isPresent?M.cloneElement(l,{ref:c}):null};yo.displayName="Presence";function Oue(i){const[t,r]=M.useState(),o=M.useRef(null),l=M.useRef(i),c=M.useRef("none"),h=i?"mounted":"unmounted",[d,m]=Mue(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return M.useEffect(()=>{const v=WT(o.current);c.current=d==="mounted"?v:"none"},[d]),Nr(()=>{const v=o.current,x=l.current;if(x!==i){const E=c.current,A=WT(v);i?m("MOUNT"):A==="none"||(v==null?void 0:v.display)==="none"?m("UNMOUNT"):m(x&&E!==A?"ANIMATION_OUT":"UNMOUNT"),l.current=i}},[i,m]),Nr(()=>{if(t){let v;const x=t.ownerDocument.defaultView??window,T=A=>{const _=WT(o.current).includes(A.animationName);if(A.target===t&&_&&(m("ANIMATION_END"),!l.current)){const R=t.style.animationFillMode;t.style.animationFillMode="forwards",v=x.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=R)})}},E=A=>{A.target===t&&(c.current=WT(o.current))};return t.addEventListener("animationstart",E),t.addEventListener("animationcancel",T),t.addEventListener("animationend",T),()=>{x.clearTimeout(v),t.removeEventListener("animationstart",E),t.removeEventListener("animationcancel",T),t.removeEventListener("animationend",T)}}else m("ANIMATION_END")},[t,m]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:M.useCallback(v=>{o.current=v?getComputedStyle(v):null,r(v)},[])}}function WT(i){return(i==null?void 0:i.animationName)||"none"}function jue(i){var o,l;let t=(o=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?i.ref:(t=(l=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:l.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?i.props.ref:i.props.ref||i.ref)}var Uue=YL[" useInsertionEffect ".trim().toString()]||Nr;function hu({prop:i,defaultProp:t,onChange:r=()=>{},caller:o}){const[l,c,h]=Fue({defaultProp:t,onChange:r}),d=i!==void 0,m=d?i:l;{const x=M.useRef(i!==void 0);M.useEffect(()=>{const T=x.current;T!==d&&console.warn(`${o} is changing from ${T?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=d},[d,o])}const v=M.useCallback(x=>{var T;if(d){const E=Bue(x)?x(i):x;E!==i&&((T=h.current)==null||T.call(h,E))}else c(x)},[d,i,c,h]);return[m,v]}function Fue({defaultProp:i,onChange:t}){const[r,o]=M.useState(i),l=M.useRef(r),c=M.useRef(t);return Uue(()=>{c.current=t},[t]),M.useEffect(()=>{var h;l.current!==r&&((h=c.current)==null||h.call(c,r),l.current=r)},[r,l]),[r,o,c]}function Bue(i){return typeof i=="function"}var pG=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),$ue="VisuallyHidden",uE=M.forwardRef((i,t)=>S.jsx(xt.span,{...i,ref:t,style:{...pG,...i.style}}));uE.displayName=$ue;var Vue=uE,$4="ToastProvider",[V4,Gue,Hue]=lE("Toast"),[mG]=Fs("Toast",[Hue]),[que,cE]=mG($4),gG=i=>{const{__scopeToast:t,label:r="Notification",duration:o=5e3,swipeDirection:l="right",swipeThreshold:c=50,children:h}=i,[d,m]=M.useState(null),[v,x]=M.useState(0),T=M.useRef(!1),E=M.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${$4}\`. Expected non-empty \`string\`.`),S.jsx(V4.Provider,{scope:t,children:S.jsx(que,{scope:t,label:r,duration:o,swipeDirection:l,swipeThreshold:c,toastCount:v,viewport:d,onViewportChange:m,onToastAdd:M.useCallback(()=>x(A=>A+1),[]),onToastRemove:M.useCallback(()=>x(A=>A-1),[]),isFocusedToastEscapeKeyDownRef:T,isClosePausedRef:E,children:h})})};gG.displayName=$4;var vG="ToastViewport",Kue=["F8"],_R="toast.viewportPause",RR="toast.viewportResume",yG=M.forwardRef((i,t)=>{const{__scopeToast:r,hotkey:o=Kue,label:l="Notifications ({hotkey})",...c}=i,h=cE(vG,r),d=Gue(r),m=M.useRef(null),v=M.useRef(null),x=M.useRef(null),T=M.useRef(null),E=Kt(t,T,h.onViewportChange),A=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),k=h.toastCount>0;M.useEffect(()=>{const R=P=>{var N;o.length!==0&&o.every($=>P[$]||P.code===$)&&((N=T.current)==null||N.focus())};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[o]),M.useEffect(()=>{const R=m.current,P=T.current;if(k&&R&&P){const D=()=>{if(!h.isClosePausedRef.current){const W=new CustomEvent(_R);P.dispatchEvent(W),h.isClosePausedRef.current=!0}},N=()=>{if(h.isClosePausedRef.current){const W=new CustomEvent(RR);P.dispatchEvent(W),h.isClosePausedRef.current=!1}},$=W=>{!R.contains(W.relatedTarget)&&N()},V=()=>{R.contains(document.activeElement)||N()};return R.addEventListener("focusin",D),R.addEventListener("focusout",$),R.addEventListener("pointermove",D),R.addEventListener("pointerleave",V),window.addEventListener("blur",D),window.addEventListener("focus",N),()=>{R.removeEventListener("focusin",D),R.removeEventListener("focusout",$),R.removeEventListener("pointermove",D),R.removeEventListener("pointerleave",V),window.removeEventListener("blur",D),window.removeEventListener("focus",N)}}},[k,h.isClosePausedRef]);const _=M.useCallback(({tabbingDirection:R})=>{const D=d().map(N=>{const $=N.ref.current,V=[$,...sce($)];return R==="forwards"?V:V.reverse()});return(R==="forwards"?D.reverse():D).flat()},[d]);return M.useEffect(()=>{const R=T.current;if(R){const P=D=>{var V,W,C;const N=D.altKey||D.ctrlKey||D.metaKey;if(D.key==="Tab"&&!N){const K=document.activeElement,ee=D.shiftKey;if(D.target===R&&ee){(V=v.current)==null||V.focus();return}const O=_({tabbingDirection:ee?"backwards":"forwards"}),re=O.findIndex(ce=>ce===K);$k(O.slice(re+1))?D.preventDefault():ee?(W=v.current)==null||W.focus():(C=x.current)==null||C.focus()}};return R.addEventListener("keydown",P),()=>R.removeEventListener("keydown",P)}},[d,_]),S.jsxs(Due,{ref:m,role:"region","aria-label":l.replace("{hotkey}",A),tabIndex:-1,style:{pointerEvents:k?void 0:"none"},children:[k&&S.jsx(LR,{ref:v,onFocusFromOutsideViewport:()=>{const R=_({tabbingDirection:"forwards"});$k(R)}}),S.jsx(V4.Slot,{scope:r,children:S.jsx(xt.ol,{tabIndex:-1,...c,ref:E})}),k&&S.jsx(LR,{ref:x,onFocusFromOutsideViewport:()=>{const R=_({tabbingDirection:"backwards"});$k(R)}})]})});yG.displayName=vG;var xG="ToastFocusProxy",LR=M.forwardRef((i,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:o,...l}=i,c=cE(xG,r);return S.jsx(uE,{"aria-hidden":!0,tabIndex:0,...l,ref:t,style:{position:"fixed"},onFocus:h=>{var v;const d=h.relatedTarget;!((v=c.viewport)!=null&&v.contains(d))&&o()}})});LR.displayName=xG;var Qv="Toast",zue="toast.swipeStart",Wue="toast.swipeMove",Yue="toast.swipeCancel",Xue="toast.swipeEnd",TG=M.forwardRef((i,t)=>{const{forceMount:r,open:o,defaultOpen:l,onOpenChange:c,...h}=i,[d,m]=hu({prop:o,defaultProp:l??!0,onChange:c,caller:Qv});return S.jsx(yo,{present:r||d,children:S.jsx(Zue,{open:d,...h,ref:t,onClose:()=>m(!1),onPause:Gr(i.onPause),onResume:Gr(i.onResume),onSwipeStart:st(i.onSwipeStart,v=>{v.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:st(i.onSwipeMove,v=>{const{x,y:T}=v.detail.delta;v.currentTarget.setAttribute("data-swipe","move"),v.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),v.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${T}px`)}),onSwipeCancel:st(i.onSwipeCancel,v=>{v.currentTarget.setAttribute("data-swipe","cancel"),v.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),v.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),v.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),v.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:st(i.onSwipeEnd,v=>{const{x,y:T}=v.detail.delta;v.currentTarget.setAttribute("data-swipe","end"),v.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),v.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),v.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),v.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${T}px`),m(!1)})})})});TG.displayName=Qv;var[Que,Jue]=mG(Qv,{onClose(){}}),Zue=M.forwardRef((i,t)=>{const{__scopeToast:r,type:o="foreground",duration:l,open:c,onClose:h,onEscapeKeyDown:d,onPause:m,onResume:v,onSwipeStart:x,onSwipeMove:T,onSwipeCancel:E,onSwipeEnd:A,...k}=i,_=cE(Qv,r),[R,P]=M.useState(null),D=Kt(t,ce=>P(ce)),N=M.useRef(null),$=M.useRef(null),V=l||_.duration,W=M.useRef(0),C=M.useRef(V),K=M.useRef(0),{onToastAdd:ee,onToastRemove:Q}=_,fe=Gr(()=>{var Ae;(R==null?void 0:R.contains(document.activeElement))&&((Ae=_.viewport)==null||Ae.focus()),h()}),O=M.useCallback(ce=>{!ce||ce===1/0||(window.clearTimeout(K.current),W.current=new Date().getTime(),K.current=window.setTimeout(fe,ce))},[fe]);M.useEffect(()=>{const ce=_.viewport;if(ce){const Ae=()=>{O(C.current),v==null||v()},se=()=>{const ue=new Date().getTime()-W.current;C.current=C.current-ue,window.clearTimeout(K.current),m==null||m()};return ce.addEventListener(_R,se),ce.addEventListener(RR,Ae),()=>{ce.removeEventListener(_R,se),ce.removeEventListener(RR,Ae)}}},[_.viewport,V,m,v,O]),M.useEffect(()=>{c&&!_.isClosePausedRef.current&&O(V)},[c,V,_.isClosePausedRef,O]),M.useEffect(()=>(ee(),()=>Q()),[ee,Q]);const re=M.useMemo(()=>R?CG(R):null,[R]);return _.viewport?S.jsxs(S.Fragment,{children:[re&&S.jsx(ece,{__scopeToast:r,role:"status","aria-live":o==="foreground"?"assertive":"polite","aria-atomic":!0,children:re}),S.jsx(Que,{scope:r,onClose:fe,children:Lh.createPortal(S.jsx(V4.ItemSlot,{scope:r,children:S.jsx(Pue,{asChild:!0,onEscapeKeyDown:st(d,()=>{_.isFocusedToastEscapeKeyDownRef.current||fe(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:S.jsx(xt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":_.swipeDirection,...k,ref:D,style:{userSelect:"none",touchAction:"none",...i.style},onKeyDown:st(i.onKeyDown,ce=>{ce.key==="Escape"&&(d==null||d(ce.nativeEvent),ce.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,fe()))}),onPointerDown:st(i.onPointerDown,ce=>{ce.button===0&&(N.current={x:ce.clientX,y:ce.clientY})}),onPointerMove:st(i.onPointerMove,ce=>{if(!N.current)return;const Ae=ce.clientX-N.current.x,se=ce.clientY-N.current.y,ue=!!$.current,le=["left","right"].includes(_.swipeDirection),pe=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,be=le?pe(0,Ae):0,Ce=le?0:pe(0,se),ke=ce.pointerType==="touch"?10:2,Ue={x:be,y:Ce},qe={originalEvent:ce,delta:Ue};ue?($.current=Ue,YT(Wue,T,qe,{discrete:!1})):BF(Ue,_.swipeDirection,ke)?($.current=Ue,YT(zue,x,qe,{discrete:!1}),ce.target.setPointerCapture(ce.pointerId)):(Math.abs(Ae)>ke||Math.abs(se)>ke)&&(N.current=null)}),onPointerUp:st(i.onPointerUp,ce=>{const Ae=$.current,se=ce.target;if(se.hasPointerCapture(ce.pointerId)&&se.releasePointerCapture(ce.pointerId),$.current=null,N.current=null,Ae){const ue=ce.currentTarget,le={originalEvent:ce,delta:Ae};BF(Ae,_.swipeDirection,_.swipeThreshold)?YT(Xue,A,le,{discrete:!0}):YT(Yue,E,le,{discrete:!0}),ue.addEventListener("click",pe=>pe.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),ece=i=>{const{__scopeToast:t,children:r,...o}=i,l=cE(Qv,t),[c,h]=M.useState(!1),[d,m]=M.useState(!1);return rce(()=>h(!0)),M.useEffect(()=>{const v=window.setTimeout(()=>m(!0),1e3);return()=>window.clearTimeout(v)},[]),d?null:S.jsx(Xv,{asChild:!0,children:S.jsx(uE,{...o,children:c&&S.jsxs(S.Fragment,{children:[l.label," ",r]})})})},tce="ToastTitle",SG=M.forwardRef((i,t)=>{const{__scopeToast:r,...o}=i;return S.jsx(xt.div,{...o,ref:t})});SG.displayName=tce;var nce="ToastDescription",wG=M.forwardRef((i,t)=>{const{__scopeToast:r,...o}=i;return S.jsx(xt.div,{...o,ref:t})});wG.displayName=nce;var EG="ToastAction",bG=M.forwardRef((i,t)=>{const{altText:r,...o}=i;return r.trim()?S.jsx(IG,{altText:r,asChild:!0,children:S.jsx(G4,{...o,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${EG}\`. Expected non-empty \`string\`.`),null)});bG.displayName=EG;var AG="ToastClose",G4=M.forwardRef((i,t)=>{const{__scopeToast:r,...o}=i,l=Jue(AG,r);return S.jsx(IG,{asChild:!0,children:S.jsx(xt.button,{type:"button",...o,ref:t,onClick:st(i.onClick,l.onClose)})})});G4.displayName=AG;var IG=M.forwardRef((i,t)=>{const{__scopeToast:r,altText:o,...l}=i;return S.jsx(xt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":o||void 0,...l,ref:t})});function CG(i){const t=[];return Array.from(i.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&t.push(o.textContent),ice(o)){const l=o.ariaHidden||o.hidden||o.style.display==="none",c=o.dataset.radixToastAnnounceExclude==="";if(!l)if(c){const h=o.dataset.radixToastAnnounceAlt;h&&t.push(h)}else t.push(...CG(o))}}),t}function YT(i,t,r,{discrete:o}){const l=r.originalEvent.currentTarget,c=new CustomEvent(i,{bubbles:!0,cancelable:!0,detail:r});t&&l.addEventListener(i,t,{once:!0}),o?cG(l,c):l.dispatchEvent(c)}var BF=(i,t,r=0)=>{const o=Math.abs(i.x),l=Math.abs(i.y),c=o>l;return t==="left"||t==="right"?c&&o>r:!c&&l>r};function rce(i=()=>{}){const t=Gr(i);Nr(()=>{let r=0,o=0;return r=window.requestAnimationFrame(()=>o=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(o)}},[t])}function ice(i){return i.nodeType===i.ELEMENT_NODE}function sce(i){const t=[],r=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const l=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||l?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function $k(i){const t=document.activeElement;return i.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var oce=gG,kG=yG,_G=TG,RG=SG,LG=wG,PG=bG,DG=G4;function NG(i){var t,r,o="";if(typeof i=="string"||typeof i=="number")o+=i;else if(typeof i=="object")if(Array.isArray(i)){var l=i.length;for(t=0;t<l;t++)i[t]&&(r=NG(i[t]))&&(o&&(o+=" "),o+=r)}else for(r in i)i[r]&&(o&&(o+=" "),o+=r);return o}function MG(){for(var i,t,r=0,o="",l=arguments.length;r<l;r++)(i=arguments[r])&&(t=NG(i))&&(o&&(o+=" "),o+=t);return o}const $F=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,VF=MG,Jv=(i,t)=>r=>{var o;if((t==null?void 0:t.variants)==null)return VF(i,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:l,defaultVariants:c}=t,h=Object.keys(l).map(v=>{const x=r==null?void 0:r[v],T=c==null?void 0:c[v];if(x===null)return null;const E=$F(x)||$F(T);return l[v][E]}),d=r&&Object.entries(r).reduce((v,x)=>{let[T,E]=x;return E===void 0||(v[T]=E),v},{}),m=t==null||(o=t.compoundVariants)===null||o===void 0?void 0:o.reduce((v,x)=>{let{class:T,className:E,...A}=x;return Object.entries(A).every(k=>{let[_,R]=k;return Array.isArray(R)?R.includes({...c,...d}[_]):{...c,...d}[_]===R})?[...v,T,E]:v},[]);return VF(i,h,m,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ace=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OG=(...i)=>i.filter((t,r,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lce={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uce=M.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:l="",children:c,iconNode:h,...d},m)=>M.createElement("svg",{ref:m,...lce,width:t,height:t,stroke:i,strokeWidth:o?Number(r)*24/Number(t):r,className:OG("lucide",l),...d},[...h.map(([v,x])=>M.createElement(v,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=(i,t)=>{const r=M.forwardRef(({className:o,...l},c)=>M.createElement(uce,{ref:c,iconNode:t,className:OG(`lucide-${ace(i)}`,o),...l}));return r.displayName=`${i}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=gt("AlignJustify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=gt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UG=gt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=gt("ArrowUpAZ",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=gt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=gt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=gt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=gt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=gt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=gt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=gt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cce=gt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dce=gt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=gt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $G=gt("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hce=gt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VG=gt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=gt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fce=gt("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=gt("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pce=gt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=gt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mce=gt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gce=gt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vce=gt("ListVideo",[["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}],["path",{d:"m16 12 5 3-5 3v-6Z",key:"zpskkp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yce=gt("ListX",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"m19 10-4 4",key:"1tz659"}],["path",{d:"m15 10 4 4",key:"1n7nei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=gt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xce=gt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=gt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tce=gt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GG=gt("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sce=gt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wce=gt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ece=gt("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=gt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=gt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=gt("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bce=gt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HG=gt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ace=gt("SearchX",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=gt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ice=gt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cce=gt("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kce=gt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ce=gt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=gt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rce=gt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lce=gt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qG=gt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=gt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pce=gt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=gt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=gt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=gt("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dce=gt("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KG=gt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=gt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nce=gt("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=gt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),K4="-",Mce=i=>{const t=jce(i),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=i;return{getClassGroupId:h=>{const d=h.split(K4);return d[0]===""&&d.length!==1&&d.shift(),zG(d,t)||Oce(h)},getConflictingClassGroupIds:(h,d)=>{const m=r[h]||[];return d&&o[h]?[...m,...o[h]]:m}}},zG=(i,t)=>{var h;if(i.length===0)return t.classGroupId;const r=i[0],o=t.nextPart.get(r),l=o?zG(i.slice(1),o):void 0;if(l)return l;if(t.validators.length===0)return;const c=i.join(K4);return(h=t.validators.find(({validator:d})=>d(c)))==null?void 0:h.classGroupId},qF=/^\[(.+)\]$/,Oce=i=>{if(qF.test(i)){const t=qF.exec(i)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},jce=i=>{const{theme:t,prefix:r}=i,o={nextPart:new Map,validators:[]};return Fce(Object.entries(i.classGroups),r).forEach(([c,h])=>{NR(h,o,c,t)}),o},NR=(i,t,r,o)=>{i.forEach(l=>{if(typeof l=="string"){const c=l===""?t:KF(t,l);c.classGroupId=r;return}if(typeof l=="function"){if(Uce(l)){NR(l(o),t,r,o);return}t.validators.push({validator:l,classGroupId:r});return}Object.entries(l).forEach(([c,h])=>{NR(h,KF(t,c),r,o)})})},KF=(i,t)=>{let r=i;return t.split(K4).forEach(o=>{r.nextPart.has(o)||r.nextPart.set(o,{nextPart:new Map,validators:[]}),r=r.nextPart.get(o)}),r},Uce=i=>i.isThemeGetter,Fce=(i,t)=>t?i.map(([r,o])=>{const l=o.map(c=>typeof c=="string"?t+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(([h,d])=>[t+h,d])):c);return[r,l]}):i,Bce=i=>{if(i<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,o=new Map;const l=(c,h)=>{r.set(c,h),t++,t>i&&(t=0,o=r,r=new Map)};return{get(c){let h=r.get(c);if(h!==void 0)return h;if((h=o.get(c))!==void 0)return l(c,h),h},set(c,h){r.has(c)?r.set(c,h):l(c,h)}}},WG="!",$ce=i=>{const{separator:t,experimentalParseClassName:r}=i,o=t.length===1,l=t[0],c=t.length,h=d=>{const m=[];let v=0,x=0,T;for(let R=0;R<d.length;R++){let P=d[R];if(v===0){if(P===l&&(o||d.slice(R,R+c)===t)){m.push(d.slice(x,R)),x=R+c;continue}if(P==="/"){T=R;continue}}P==="["?v++:P==="]"&&v--}const E=m.length===0?d:d.substring(x),A=E.startsWith(WG),k=A?E.substring(1):E,_=T&&T>x?T-x:void 0;return{modifiers:m,hasImportantModifier:A,baseClassName:k,maybePostfixModifierPosition:_}};return r?d=>r({className:d,parseClassName:h}):h},Vce=i=>{if(i.length<=1)return i;const t=[];let r=[];return i.forEach(o=>{o[0]==="["?(t.push(...r.sort(),o),r=[]):r.push(o)}),t.push(...r.sort()),t},Gce=i=>({cache:Bce(i.cacheSize),parseClassName:$ce(i),...Mce(i)}),Hce=/\s+/,qce=(i,t)=>{const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:l}=t,c=[],h=i.trim().split(Hce);let d="";for(let m=h.length-1;m>=0;m-=1){const v=h[m],{modifiers:x,hasImportantModifier:T,baseClassName:E,maybePostfixModifierPosition:A}=r(v);let k=!!A,_=o(k?E.substring(0,A):E);if(!_){if(!k){d=v+(d.length>0?" "+d:d);continue}if(_=o(E),!_){d=v+(d.length>0?" "+d:d);continue}k=!1}const R=Vce(x).join(":"),P=T?R+WG:R,D=P+_;if(c.includes(D))continue;c.push(D);const N=l(_,k);for(let $=0;$<N.length;++$){const V=N[$];c.push(P+V)}d=v+(d.length>0?" "+d:d)}return d};function Kce(){let i=0,t,r,o="";for(;i<arguments.length;)(t=arguments[i++])&&(r=YG(t))&&(o&&(o+=" "),o+=r);return o}const YG=i=>{if(typeof i=="string")return i;let t,r="";for(let o=0;o<i.length;o++)i[o]&&(t=YG(i[o]))&&(r&&(r+=" "),r+=t);return r};function zce(i,...t){let r,o,l,c=h;function h(m){const v=t.reduce((x,T)=>T(x),i());return r=Gce(v),o=r.cache.get,l=r.cache.set,c=d,d(m)}function d(m){const v=o(m);if(v)return v;const x=qce(m,r);return l(m,x),x}return function(){return c(Kce.apply(null,arguments))}}const zn=i=>{const t=r=>r[i]||[];return t.isThemeGetter=!0,t},XG=/^\[(?:([a-z-]+):)?(.+)\]$/i,Wce=/^\d+\/\d+$/,Yce=new Set(["px","full","screen"]),Xce=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Qce=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Jce=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Zce=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ede=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ql=i=>Pp(i)||Yce.has(i)||Wce.test(i),Xu=i=>xm(i,"length",lde),Pp=i=>!!i&&!Number.isNaN(Number(i)),Vk=i=>xm(i,"number",Pp),C0=i=>!!i&&Number.isInteger(Number(i)),tde=i=>i.endsWith("%")&&Pp(i.slice(0,-1)),Qt=i=>XG.test(i),Qu=i=>Xce.test(i),nde=new Set(["length","size","percentage"]),rde=i=>xm(i,nde,QG),ide=i=>xm(i,"position",QG),sde=new Set(["image","url"]),ode=i=>xm(i,sde,cde),ade=i=>xm(i,"",ude),k0=()=>!0,xm=(i,t,r)=>{const o=XG.exec(i);return o?o[1]?typeof t=="string"?o[1]===t:t.has(o[1]):r(o[2]):!1},lde=i=>Qce.test(i)&&!Jce.test(i),QG=()=>!1,ude=i=>Zce.test(i),cde=i=>ede.test(i),dde=()=>{const i=zn("colors"),t=zn("spacing"),r=zn("blur"),o=zn("brightness"),l=zn("borderColor"),c=zn("borderRadius"),h=zn("borderSpacing"),d=zn("borderWidth"),m=zn("contrast"),v=zn("grayscale"),x=zn("hueRotate"),T=zn("invert"),E=zn("gap"),A=zn("gradientColorStops"),k=zn("gradientColorStopPositions"),_=zn("inset"),R=zn("margin"),P=zn("opacity"),D=zn("padding"),N=zn("saturate"),$=zn("scale"),V=zn("sepia"),W=zn("skew"),C=zn("space"),K=zn("translate"),ee=()=>["auto","contain","none"],Q=()=>["auto","hidden","clip","visible","scroll"],fe=()=>["auto",Qt,t],O=()=>[Qt,t],re=()=>["",ql,Xu],ce=()=>["auto",Pp,Qt],Ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>["start","end","center","between","around","evenly","stretch"],pe=()=>["","0",Qt],be=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ce=()=>[Pp,Qt];return{cacheSize:500,separator:":",theme:{colors:[k0],spacing:[ql,Xu],blur:["none","",Qu,Qt],brightness:Ce(),borderColor:[i],borderRadius:["none","","full",Qu,Qt],borderSpacing:O(),borderWidth:re(),contrast:Ce(),grayscale:pe(),hueRotate:Ce(),invert:pe(),gap:O(),gradientColorStops:[i],gradientColorStopPositions:[tde,Xu],inset:fe(),margin:fe(),opacity:Ce(),padding:O(),saturate:Ce(),scale:Ce(),sepia:pe(),skew:Ce(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Qt]}],container:["container"],columns:[{columns:[Qu]}],"break-after":[{"break-after":be()}],"break-before":[{"break-before":be()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ae(),Qt]}],overflow:[{overflow:Q()}],"overflow-x":[{"overflow-x":Q()}],"overflow-y":[{"overflow-y":Q()}],overscroll:[{overscroll:ee()}],"overscroll-x":[{"overscroll-x":ee()}],"overscroll-y":[{"overscroll-y":ee()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",C0,Qt]}],basis:[{basis:fe()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qt]}],grow:[{grow:pe()}],shrink:[{shrink:pe()}],order:[{order:["first","last","none",C0,Qt]}],"grid-cols":[{"grid-cols":[k0]}],"col-start-end":[{col:["auto",{span:["full",C0,Qt]},Qt]}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":[k0]}],"row-start-end":[{row:["auto",{span:[C0,Qt]},Qt]}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qt]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...le()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...le(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...le(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[D]}],px:[{px:[D]}],py:[{py:[D]}],ps:[{ps:[D]}],pe:[{pe:[D]}],pt:[{pt:[D]}],pr:[{pr:[D]}],pb:[{pb:[D]}],pl:[{pl:[D]}],m:[{m:[R]}],mx:[{mx:[R]}],my:[{my:[R]}],ms:[{ms:[R]}],me:[{me:[R]}],mt:[{mt:[R]}],mr:[{mr:[R]}],mb:[{mb:[R]}],ml:[{ml:[R]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qt,t]}],"min-w":[{"min-w":[Qt,t,"min","max","fit"]}],"max-w":[{"max-w":[Qt,t,"none","full","min","max","fit","prose",{screen:[Qu]},Qu]}],h:[{h:[Qt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Qu,Xu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vk]}],"font-family":[{font:[k0]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qt]}],"line-clamp":[{"line-clamp":["none",Pp,Vk]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ql,Qt]}],"list-image":[{"list-image":["none",Qt]}],"list-style-type":[{list:["none","disc","decimal",Qt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[i]}],"placeholder-opacity":[{"placeholder-opacity":[P]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[i]}],"text-opacity":[{"text-opacity":[P]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ql,Xu]}],"underline-offset":[{"underline-offset":["auto",ql,Qt]}],"text-decoration-color":[{decoration:[i]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[P]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ae(),ide]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rde]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ode]}],"bg-color":[{bg:[i]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[A]}],"gradient-via":[{via:[A]}],"gradient-to":[{to:[A]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[P]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[P]}],"divide-style":[{divide:se()}],"border-color":[{border:[l]}],"border-color-x":[{"border-x":[l]}],"border-color-y":[{"border-y":[l]}],"border-color-s":[{"border-s":[l]}],"border-color-e":[{"border-e":[l]}],"border-color-t":[{"border-t":[l]}],"border-color-r":[{"border-r":[l]}],"border-color-b":[{"border-b":[l]}],"border-color-l":[{"border-l":[l]}],"divide-color":[{divide:[l]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[ql,Qt]}],"outline-w":[{outline:[ql,Xu]}],"outline-color":[{outline:[i]}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[i]}],"ring-opacity":[{"ring-opacity":[P]}],"ring-offset-w":[{"ring-offset":[ql,Xu]}],"ring-offset-color":[{"ring-offset":[i]}],shadow:[{shadow:["","inner","none",Qu,ade]}],"shadow-color":[{shadow:[k0]}],opacity:[{opacity:[P]}],"mix-blend":[{"mix-blend":[...ue(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ue()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[o]}],contrast:[{contrast:[m]}],"drop-shadow":[{"drop-shadow":["","none",Qu,Qt]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[T]}],saturate:[{saturate:[N]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[m]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[T]}],"backdrop-opacity":[{"backdrop-opacity":[P]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qt]}],duration:[{duration:Ce()}],ease:[{ease:["linear","in","out","in-out",Qt]}],delay:[{delay:Ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[$]}],"scale-x":[{"scale-x":[$]}],"scale-y":[{"scale-y":[$]}],rotate:[{rotate:[C0,Qt]}],"translate-x":[{"translate-x":[K]}],"translate-y":[{"translate-y":[K]}],"skew-x":[{"skew-x":[W]}],"skew-y":[{"skew-y":[W]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qt]}],accent:[{accent:["auto",i]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qt]}],"caret-color":[{caret:[i]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qt]}],fill:[{fill:[i,"none"]}],"stroke-w":[{stroke:[ql,Xu,Vk]}],stroke:[{stroke:[i,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hde=zce(dde);function yt(...i){return hde(MG(i))}const fde=oce,JG=M.forwardRef(({className:i,...t},r)=>S.jsx(kG,{ref:r,className:yt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",i),...t}));JG.displayName=kG.displayName;const pde=Jv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ZG=M.forwardRef(({className:i,variant:t,...r},o)=>S.jsx(_G,{ref:o,className:yt(pde({variant:t}),i),...r}));ZG.displayName=_G.displayName;const mde=M.forwardRef(({className:i,...t},r)=>S.jsx(PG,{ref:r,className:yt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",i),...t}));mde.displayName=PG.displayName;const eH=M.forwardRef(({className:i,...t},r)=>S.jsx(DG,{ref:r,className:yt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",i),"toast-close":"",...t,children:S.jsx(Fo,{className:"h-4 w-4"})}));eH.displayName=DG.displayName;const tH=M.forwardRef(({className:i,...t},r)=>S.jsx(RG,{ref:r,className:yt("text-sm font-semibold",i),...t}));tH.displayName=RG.displayName;const nH=M.forwardRef(({className:i,...t},r)=>S.jsx(LG,{ref:r,className:yt("text-sm opacity-90",i),...t}));nH.displayName=LG.displayName;function gde(){const{toasts:i}=B4();return S.jsxs(fde,{children:[i.map(function({id:t,title:r,description:o,action:l,...c}){return S.jsxs(ZG,{...c,children:[S.jsxs("div",{className:"grid gap-1",children:[r&&S.jsx(tH,{children:r}),o&&S.jsx(nH,{children:o})]}),l,S.jsx(eH,{})]},t)}),S.jsx(JG,{})]})}var yw=["light","dark"],z4="(prefers-color-scheme: dark)",vde=typeof window>"u",W4=M.createContext(void 0),yde={setTheme:i=>{},themes:[]},rH=()=>{var i;return(i=M.useContext(W4))!=null?i:yde},xde=i=>M.useContext(W4)?i.children:M.createElement(Sde,{...i}),Tde=["light","dark"],Sde=({forcedTheme:i,disableTransitionOnChange:t=!1,enableSystem:r=!0,enableColorScheme:o=!0,storageKey:l="theme",themes:c=Tde,defaultTheme:h=r?"system":"light",attribute:d="data-theme",value:m,children:v,nonce:x})=>{let[T,E]=M.useState(()=>zF(l,h)),[A,k]=M.useState(()=>zF(l)),_=m?Object.values(m):c,R=M.useCallback($=>{let V=$;if(!V)return;$==="system"&&r&&(V=WF());let W=m?m[V]:V,C=t?Ede():null,K=document.documentElement;if(d==="class"?(K.classList.remove(..._),W&&K.classList.add(W)):W?K.setAttribute(d,W):K.removeAttribute(d),o){let ee=yw.includes(h)?h:null,Q=yw.includes(V)?V:ee;K.style.colorScheme=Q}C==null||C()},[]),P=M.useCallback($=>{let V=typeof $=="function"?$($):$;E(V);try{localStorage.setItem(l,V)}catch{}},[i]),D=M.useCallback($=>{let V=WF($);k(V),T==="system"&&r&&!i&&R("system")},[T,i]);M.useEffect(()=>{let $=window.matchMedia(z4);return $.addListener(D),D($),()=>$.removeListener(D)},[D]),M.useEffect(()=>{let $=V=>{if(V.key!==l)return;let W=V.newValue||h;P(W)};return window.addEventListener("storage",$),()=>window.removeEventListener("storage",$)},[P]),M.useEffect(()=>{R(i??T)},[i,T]);let N=M.useMemo(()=>({theme:T,setTheme:P,forcedTheme:i,resolvedTheme:T==="system"?A:T,themes:r?[...c,"system"]:c,systemTheme:r?A:void 0}),[T,P,i,A,r,c]);return M.createElement(W4.Provider,{value:N},M.createElement(wde,{forcedTheme:i,disableTransitionOnChange:t,enableSystem:r,enableColorScheme:o,storageKey:l,themes:c,defaultTheme:h,attribute:d,value:m,children:v,attrs:_,nonce:x}),v)},wde=M.memo(({forcedTheme:i,storageKey:t,attribute:r,enableSystem:o,enableColorScheme:l,defaultTheme:c,value:h,attrs:d,nonce:m})=>{let v=c==="system",x=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${d.map(k=>`'${k}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,T=l?yw.includes(c)&&c?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${c}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",E=(k,_=!1,R=!0)=>{let P=h?h[k]:k,D=_?k+"|| ''":`'${P}'`,N="";return l&&R&&!_&&yw.includes(k)&&(N+=`d.style.colorScheme = '${k}';`),r==="class"?_||P?N+=`c.add(${D})`:N+="null":P&&(N+=`d[s](n,${D})`),N},A=i?`!function(){${x}${E(i)}}()`:o?`!function(){try{${x}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${v})){var t='${z4}',m=window.matchMedia(t);if(m.media!==t||m.matches){${E("dark")}}else{${E("light")}}}else if(e){${h?`var x=${JSON.stringify(h)};`:""}${E(h?"x[e]":"e",!0)}}${v?"":"else{"+E(c,!1,!1)+"}"}${T}}catch(e){}}()`:`!function(){try{${x}var e=localStorage.getItem('${t}');if(e){${h?`var x=${JSON.stringify(h)};`:""}${E(h?"x[e]":"e",!0)}}else{${E(c,!1,!1)};}${T}}catch(t){}}();`;return M.createElement("script",{nonce:m,dangerouslySetInnerHTML:{__html:A}})}),zF=(i,t)=>{if(vde)return;let r;try{r=localStorage.getItem(i)||void 0}catch{}return r||t},Ede=()=>{let i=document.createElement("style");return i.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(i),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(i)},1)}},WF=i=>(i||(i=window.matchMedia(z4)),i.matches?"dark":"light"),bde=i=>{switch(i){case"success":return Cde;case"info":return _de;case"warning":return kde;case"error":return Rde;default:return null}},Ade=Array(12).fill(0),Ide=({visible:i,className:t})=>Be.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":i},Be.createElement("div",{className:"sonner-spinner"},Ade.map((r,o)=>Be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),Cde=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),kde=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_de=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Rde=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Lde=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Pde=()=>{let[i,t]=Be.useState(document.hidden);return Be.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),i},MR=1,Dde=class{constructor(){this.subscribe=i=>(this.subscribers.push(i),()=>{let t=this.subscribers.indexOf(i);this.subscribers.splice(t,1)}),this.publish=i=>{this.subscribers.forEach(t=>t(i))},this.addToast=i=>{this.publish(i),this.toasts=[...this.toasts,i]},this.create=i=>{var t;let{message:r,...o}=i,l=typeof(i==null?void 0:i.id)=="number"||((t=i.id)==null?void 0:t.length)>0?i.id:MR++,c=this.toasts.find(d=>d.id===l),h=i.dismissible===void 0?!0:i.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(d=>d.id===l?(this.publish({...d,...i,id:l,title:r}),{...d,...i,id:l,dismissible:h,title:r}):d):this.addToast({title:r,...o,dismissible:h,id:l}),l},this.dismiss=i=>(this.dismissedToasts.add(i),i||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:i,dismiss:!0})),i),this.message=(i,t)=>this.create({...t,message:i}),this.error=(i,t)=>this.create({...t,message:i,type:"error"}),this.success=(i,t)=>this.create({...t,type:"success",message:i}),this.info=(i,t)=>this.create({...t,type:"info",message:i}),this.warning=(i,t)=>this.create({...t,type:"warning",message:i}),this.loading=(i,t)=>this.create({...t,type:"loading",message:i}),this.promise=(i,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:i,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let o=i instanceof Promise?i:i(),l=r!==void 0,c,h=o.then(async m=>{if(c=["resolve",m],Be.isValidElement(m))l=!1,this.create({id:r,type:"default",message:m});else if(Mde(m)&&!m.ok){l=!1;let v=typeof t.error=="function"?await t.error(`HTTP error! status: ${m.status}`):t.error,x=typeof t.description=="function"?await t.description(`HTTP error! status: ${m.status}`):t.description;this.create({id:r,type:"error",message:v,description:x})}else if(t.success!==void 0){l=!1;let v=typeof t.success=="function"?await t.success(m):t.success,x=typeof t.description=="function"?await t.description(m):t.description;this.create({id:r,type:"success",message:v,description:x})}}).catch(async m=>{if(c=["reject",m],t.error!==void 0){l=!1;let v=typeof t.error=="function"?await t.error(m):t.error,x=typeof t.description=="function"?await t.description(m):t.description;this.create({id:r,type:"error",message:v,description:x})}}).finally(()=>{var m;l&&(this.dismiss(r),r=void 0),(m=t.finally)==null||m.call(t)}),d=()=>new Promise((m,v)=>h.then(()=>c[0]==="reject"?v(c[1]):m(c[1])).catch(v));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(i,t)=>{let r=(t==null?void 0:t.id)||MR++;return this.create({jsx:i(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(i=>!this.dismissedToasts.has(i.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ls=new Dde,Nde=(i,t)=>{let r=(t==null?void 0:t.id)||MR++;return Ls.addToast({title:i,...t,id:r}),r},Mde=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",Ode=Nde,jde=()=>Ls.toasts,Ude=()=>Ls.getActiveToasts(),gi=Object.assign(Ode,{success:Ls.success,info:Ls.info,warning:Ls.warning,error:Ls.error,custom:Ls.custom,message:Ls.message,promise:Ls.promise,dismiss:Ls.dismiss,loading:Ls.loading},{getHistory:jde,getToasts:Ude});function Fde(i,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",t==="top"&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=i:o.appendChild(document.createTextNode(i))}Fde(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function XT(i){return i.label!==void 0}var Bde=3,$de="32px",Vde="16px",YF=4e3,Gde=356,Hde=14,qde=20,Kde=200;function ra(...i){return i.filter(Boolean).join(" ")}function zde(i){let[t,r]=i.split("-"),o=[];return t&&o.push(t),r&&o.push(r),o}var Wde=i=>{var t,r,o,l,c,h,d,m,v,x,T;let{invert:E,toast:A,unstyled:k,interacting:_,setHeights:R,visibleToasts:P,heights:D,index:N,toasts:$,expanded:V,removeToast:W,defaultRichColors:C,closeButton:K,style:ee,cancelButtonStyle:Q,actionButtonStyle:fe,className:O="",descriptionClassName:re="",duration:ce,position:Ae,gap:se,loadingIcon:ue,expandByDefault:le,classNames:pe,icons:be,closeButtonAriaLabel:Ce="Close toast",pauseWhenPageIsHidden:ke}=i,[Ue,qe]=Be.useState(null),[ut,X]=Be.useState(null),[Pe,Rt]=Be.useState(!1),[Mt,$t]=Be.useState(!1),[Ot,on]=Be.useState(!1),[gr,Mr]=Be.useState(!1),[wa,xe]=Be.useState(!1),[_e,_r]=Be.useState(0),[qr,Oi]=Be.useState(0),nr=Be.useRef(A.duration||ce||YF),$e=Be.useRef(null),Kr=Be.useRef(null),Tu=N===0,_m=N+1<=P,zr=A.type,xo=A.dismissible!==!1,Su=A.className||"",Tt=A.descriptionClassName||"",Ho=Be.useMemo(()=>D.findIndex(Gt=>Gt.toastId===A.id)||0,[D,A.id]),dl=Be.useMemo(()=>{var Gt;return(Gt=A.closeButton)!=null?Gt:K},[A.closeButton,K]),Rm=Be.useMemo(()=>A.duration||ce||YF,[A.duration,ce]),Ea=Be.useRef(0),wu=Be.useRef(0),Cn=Be.useRef(0),qo=Be.useRef(null),[Nh,Lm]=Ae.split("-"),ba=Be.useMemo(()=>D.reduce((Gt,bn,Fn)=>Fn>=Ho?Gt:Gt+bn.height,0),[D,Ho]),hl=Pde(),ed=A.invert||E,Pm=zr==="loading";wu.current=Be.useMemo(()=>Ho*se+ba,[Ho,ba]),Be.useEffect(()=>{nr.current=Rm},[Rm]),Be.useEffect(()=>{Rt(!0)},[]),Be.useEffect(()=>{let Gt=Kr.current;if(Gt){let bn=Gt.getBoundingClientRect().height;return Oi(bn),R(Fn=>[{toastId:A.id,height:bn,position:A.position},...Fn]),()=>R(Fn=>Fn.filter(li=>li.toastId!==A.id))}},[R,A.id]),Be.useLayoutEffect(()=>{if(!Pe)return;let Gt=Kr.current,bn=Gt.style.height;Gt.style.height="auto";let Fn=Gt.getBoundingClientRect().height;Gt.style.height=bn,Oi(Fn),R(li=>li.find(ji=>ji.toastId===A.id)?li.map(ji=>ji.toastId===A.id?{...ji,height:Fn}:ji):[{toastId:A.id,height:Fn,position:A.position},...li])},[Pe,A.title,A.description,R,A.id]);let Ko=Be.useCallback(()=>{$t(!0),_r(wu.current),R(Gt=>Gt.filter(bn=>bn.toastId!==A.id)),setTimeout(()=>{W(A)},Kde)},[A,W,R,wu]);Be.useEffect(()=>{if(A.promise&&zr==="loading"||A.duration===1/0||A.type==="loading")return;let Gt;return V||_||ke&&hl?(()=>{if(Cn.current<Ea.current){let bn=new Date().getTime()-Ea.current;nr.current=nr.current-bn}Cn.current=new Date().getTime()})():nr.current!==1/0&&(Ea.current=new Date().getTime(),Gt=setTimeout(()=>{var bn;(bn=A.onAutoClose)==null||bn.call(A,A),Ko()},nr.current)),()=>clearTimeout(Gt)},[V,_,A,zr,ke,hl,Ko]),Be.useEffect(()=>{A.delete&&Ko()},[Ko,A.delete]);function WE(){var Gt,bn,Fn;return be!=null&&be.loading?Be.createElement("div",{className:ra(pe==null?void 0:pe.loader,(Gt=A==null?void 0:A.classNames)==null?void 0:Gt.loader,"sonner-loader"),"data-visible":zr==="loading"},be.loading):ue?Be.createElement("div",{className:ra(pe==null?void 0:pe.loader,(bn=A==null?void 0:A.classNames)==null?void 0:bn.loader,"sonner-loader"),"data-visible":zr==="loading"},ue):Be.createElement(Ide,{className:ra(pe==null?void 0:pe.loader,(Fn=A==null?void 0:A.classNames)==null?void 0:Fn.loader),visible:zr==="loading"})}return Be.createElement("li",{tabIndex:0,ref:Kr,className:ra(O,Su,pe==null?void 0:pe.toast,(t=A==null?void 0:A.classNames)==null?void 0:t.toast,pe==null?void 0:pe.default,pe==null?void 0:pe[zr],(r=A==null?void 0:A.classNames)==null?void 0:r[zr]),"data-sonner-toast":"","data-rich-colors":(o=A.richColors)!=null?o:C,"data-styled":!(A.jsx||A.unstyled||k),"data-mounted":Pe,"data-promise":!!A.promise,"data-swiped":wa,"data-removed":Mt,"data-visible":_m,"data-y-position":Nh,"data-x-position":Lm,"data-index":N,"data-front":Tu,"data-swiping":Ot,"data-dismissible":xo,"data-type":zr,"data-invert":ed,"data-swipe-out":gr,"data-swipe-direction":ut,"data-expanded":!!(V||le&&Pe),style:{"--index":N,"--toasts-before":N,"--z-index":$.length-N,"--offset":`${Mt?_e:wu.current}px`,"--initial-height":le?"auto":`${qr}px`,...ee,...A.style},onDragEnd:()=>{on(!1),qe(null),qo.current=null},onPointerDown:Gt=>{Pm||!xo||($e.current=new Date,_r(wu.current),Gt.target.setPointerCapture(Gt.pointerId),Gt.target.tagName!=="BUTTON"&&(on(!0),qo.current={x:Gt.clientX,y:Gt.clientY}))},onPointerUp:()=>{var Gt,bn,Fn,li;if(gr||!xo)return;qo.current=null;let ji=Number(((Gt=Kr.current)==null?void 0:Gt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),zo=Number(((bn=Kr.current)==null?void 0:bn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vs=new Date().getTime()-((Fn=$e.current)==null?void 0:Fn.getTime()),Rr=Ue==="x"?ji:zo,vr=Math.abs(Rr)/vs;if(Math.abs(Rr)>=qde||vr>.11){_r(wu.current),(li=A.onDismiss)==null||li.call(A,A),X(Ue==="x"?ji>0?"right":"left":zo>0?"down":"up"),Ko(),Mr(!0),xe(!1);return}on(!1),qe(null)},onPointerMove:Gt=>{var bn,Fn,li,ji;if(!qo.current||!xo||((bn=window.getSelection())==null?void 0:bn.toString().length)>0)return;let zo=Gt.clientY-qo.current.y,vs=Gt.clientX-qo.current.x,Rr=(Fn=i.swipeDirections)!=null?Fn:zde(Ae);!Ue&&(Math.abs(vs)>1||Math.abs(zo)>1)&&qe(Math.abs(vs)>Math.abs(zo)?"x":"y");let vr={x:0,y:0};Ue==="y"?(Rr.includes("top")||Rr.includes("bottom"))&&(Rr.includes("top")&&zo<0||Rr.includes("bottom")&&zo>0)&&(vr.y=zo):Ue==="x"&&(Rr.includes("left")||Rr.includes("right"))&&(Rr.includes("left")&&vs<0||Rr.includes("right")&&vs>0)&&(vr.x=vs),(Math.abs(vr.x)>0||Math.abs(vr.y)>0)&&xe(!0),(li=Kr.current)==null||li.style.setProperty("--swipe-amount-x",`${vr.x}px`),(ji=Kr.current)==null||ji.style.setProperty("--swipe-amount-y",`${vr.y}px`)}},dl&&!A.jsx?Be.createElement("button",{"aria-label":Ce,"data-disabled":Pm,"data-close-button":!0,onClick:Pm||!xo?()=>{}:()=>{var Gt;Ko(),(Gt=A.onDismiss)==null||Gt.call(A,A)},className:ra(pe==null?void 0:pe.closeButton,(l=A==null?void 0:A.classNames)==null?void 0:l.closeButton)},(c=be==null?void 0:be.close)!=null?c:Lde):null,A.jsx||M.isValidElement(A.title)?A.jsx?A.jsx:typeof A.title=="function"?A.title():A.title:Be.createElement(Be.Fragment,null,zr||A.icon||A.promise?Be.createElement("div",{"data-icon":"",className:ra(pe==null?void 0:pe.icon,(h=A==null?void 0:A.classNames)==null?void 0:h.icon)},A.promise||A.type==="loading"&&!A.icon?A.icon||WE():null,A.type!=="loading"?A.icon||(be==null?void 0:be[zr])||bde(zr):null):null,Be.createElement("div",{"data-content":"",className:ra(pe==null?void 0:pe.content,(d=A==null?void 0:A.classNames)==null?void 0:d.content)},Be.createElement("div",{"data-title":"",className:ra(pe==null?void 0:pe.title,(m=A==null?void 0:A.classNames)==null?void 0:m.title)},typeof A.title=="function"?A.title():A.title),A.description?Be.createElement("div",{"data-description":"",className:ra(re,Tt,pe==null?void 0:pe.description,(v=A==null?void 0:A.classNames)==null?void 0:v.description)},typeof A.description=="function"?A.description():A.description):null),M.isValidElement(A.cancel)?A.cancel:A.cancel&&XT(A.cancel)?Be.createElement("button",{"data-button":!0,"data-cancel":!0,style:A.cancelButtonStyle||Q,onClick:Gt=>{var bn,Fn;XT(A.cancel)&&xo&&((Fn=(bn=A.cancel).onClick)==null||Fn.call(bn,Gt),Ko())},className:ra(pe==null?void 0:pe.cancelButton,(x=A==null?void 0:A.classNames)==null?void 0:x.cancelButton)},A.cancel.label):null,M.isValidElement(A.action)?A.action:A.action&&XT(A.action)?Be.createElement("button",{"data-button":!0,"data-action":!0,style:A.actionButtonStyle||fe,onClick:Gt=>{var bn,Fn;XT(A.action)&&((Fn=(bn=A.action).onClick)==null||Fn.call(bn,Gt),!Gt.defaultPrevented&&Ko())},className:ra(pe==null?void 0:pe.actionButton,(T=A==null?void 0:A.classNames)==null?void 0:T.actionButton)},A.action.label):null))};function XF(){if(typeof window>"u"||typeof document>"u")return"ltr";let i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function Yde(i,t){let r={};return[i,t].forEach((o,l)=>{let c=l===1,h=c?"--mobile-offset":"--offset",d=c?Vde:$de;function m(v){["top","right","bottom","left"].forEach(x=>{r[`${h}-${x}`]=typeof v=="number"?`${v}px`:v})}typeof o=="number"||typeof o=="string"?m(o):typeof o=="object"?["top","right","bottom","left"].forEach(v=>{o[v]===void 0?r[`${h}-${v}`]=d:r[`${h}-${v}`]=typeof o[v]=="number"?`${o[v]}px`:o[v]}):m(d)}),r}var Xde=M.forwardRef(function(i,t){let{invert:r,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:h,className:d,offset:m,mobileOffset:v,theme:x="light",richColors:T,duration:E,style:A,visibleToasts:k=Bde,toastOptions:_,dir:R=XF(),gap:P=Hde,loadingIcon:D,icons:N,containerAriaLabel:$="Notifications",pauseWhenPageIsHidden:V}=i,[W,C]=Be.useState([]),K=Be.useMemo(()=>Array.from(new Set([o].concat(W.filter(ke=>ke.position).map(ke=>ke.position)))),[W,o]),[ee,Q]=Be.useState([]),[fe,O]=Be.useState(!1),[re,ce]=Be.useState(!1),[Ae,se]=Be.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ue=Be.useRef(null),le=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),pe=Be.useRef(null),be=Be.useRef(!1),Ce=Be.useCallback(ke=>{C(Ue=>{var qe;return(qe=Ue.find(ut=>ut.id===ke.id))!=null&&qe.delete||Ls.dismiss(ke.id),Ue.filter(({id:ut})=>ut!==ke.id)})},[]);return Be.useEffect(()=>Ls.subscribe(ke=>{if(ke.dismiss){C(Ue=>Ue.map(qe=>qe.id===ke.id?{...qe,delete:!0}:qe));return}setTimeout(()=>{sG.flushSync(()=>{C(Ue=>{let qe=Ue.findIndex(ut=>ut.id===ke.id);return qe!==-1?[...Ue.slice(0,qe),{...Ue[qe],...ke},...Ue.slice(qe+1)]:[ke,...Ue]})})})}),[]),Be.useEffect(()=>{if(x!=="system"){se(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;let ke=window.matchMedia("(prefers-color-scheme: dark)");try{ke.addEventListener("change",({matches:Ue})=>{se(Ue?"dark":"light")})}catch{ke.addListener(({matches:qe})=>{try{se(qe?"dark":"light")}catch(ut){console.error(ut)}})}},[x]),Be.useEffect(()=>{W.length<=1&&O(!1)},[W]),Be.useEffect(()=>{let ke=Ue=>{var qe,ut;l.every(X=>Ue[X]||Ue.code===X)&&(O(!0),(qe=ue.current)==null||qe.focus()),Ue.code==="Escape"&&(document.activeElement===ue.current||(ut=ue.current)!=null&&ut.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",ke),()=>document.removeEventListener("keydown",ke)},[l]),Be.useEffect(()=>{if(ue.current)return()=>{pe.current&&(pe.current.focus({preventScroll:!0}),pe.current=null,be.current=!1)}},[ue.current]),Be.createElement("section",{ref:t,"aria-label":`${$} ${le}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},K.map((ke,Ue)=>{var qe;let[ut,X]=ke.split("-");return W.length?Be.createElement("ol",{key:ke,dir:R==="auto"?XF():R,tabIndex:-1,ref:ue,className:d,"data-sonner-toaster":!0,"data-theme":Ae,"data-y-position":ut,"data-lifted":fe&&W.length>1&&!c,"data-x-position":X,style:{"--front-toast-height":`${((qe=ee[0])==null?void 0:qe.height)||0}px`,"--width":`${Gde}px`,"--gap":`${P}px`,...A,...Yde(m,v)},onBlur:Pe=>{be.current&&!Pe.currentTarget.contains(Pe.relatedTarget)&&(be.current=!1,pe.current&&(pe.current.focus({preventScroll:!0}),pe.current=null))},onFocus:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||be.current||(be.current=!0,pe.current=Pe.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{re||O(!1)},onDragEnd:()=>O(!1),onPointerDown:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||ce(!0)},onPointerUp:()=>ce(!1)},W.filter(Pe=>!Pe.position&&Ue===0||Pe.position===ke).map((Pe,Rt)=>{var Mt,$t;return Be.createElement(Wde,{key:Pe.id,icons:N,index:Rt,toast:Pe,defaultRichColors:T,duration:(Mt=_==null?void 0:_.duration)!=null?Mt:E,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:k,closeButton:($t=_==null?void 0:_.closeButton)!=null?$t:h,interacting:re,position:ke,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,removeToast:Ce,toasts:W.filter(Ot=>Ot.position==Pe.position),heights:ee.filter(Ot=>Ot.position==Pe.position),setHeights:Q,expandByDefault:c,gap:P,loadingIcon:D,expanded:fe,pauseWhenPageIsHidden:V,swipeDirections:i.swipeDirections})})):null}))});const Qde=({...i})=>{const{theme:t="system"}=rH();return S.jsx(Xde,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...i})};var Jde=YL[" useId ".trim().toString()]||(()=>{}),Zde=0;function ou(i){const[t,r]=M.useState(Jde());return Nr(()=>{r(o=>o??String(Zde++))},[i]),t?`radix-${t}`:""}const ehe=["top","right","bottom","left"],Uc=Math.min,oo=Math.max,xw=Math.round,QT=Math.floor,rl=i=>({x:i,y:i}),the={left:"right",right:"left",bottom:"top",top:"bottom"},nhe={start:"end",end:"start"};function OR(i,t,r){return oo(i,Uc(t,r))}function fu(i,t){return typeof i=="function"?i(t):i}function pu(i){return i.split("-")[0]}function Tm(i){return i.split("-")[1]}function Y4(i){return i==="x"?"y":"x"}function X4(i){return i==="y"?"height":"width"}const rhe=new Set(["top","bottom"]);function Xa(i){return rhe.has(pu(i))?"y":"x"}function Q4(i){return Y4(Xa(i))}function ihe(i,t,r){r===void 0&&(r=!1);const o=Tm(i),l=Q4(i),c=X4(l);let h=l==="x"?o===(r?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(h=Tw(h)),[h,Tw(h)]}function she(i){const t=Tw(i);return[jR(i),t,jR(t)]}function jR(i){return i.replace(/start|end/g,t=>nhe[t])}const QF=["left","right"],JF=["right","left"],ohe=["top","bottom"],ahe=["bottom","top"];function lhe(i,t,r){switch(i){case"top":case"bottom":return r?t?JF:QF:t?QF:JF;case"left":case"right":return t?ohe:ahe;default:return[]}}function uhe(i,t,r,o){const l=Tm(i);let c=lhe(pu(i),r==="start",o);return l&&(c=c.map(h=>h+"-"+l),t&&(c=c.concat(c.map(jR)))),c}function Tw(i){return i.replace(/left|right|bottom|top/g,t=>the[t])}function che(i){return{top:0,right:0,bottom:0,left:0,...i}}function iH(i){return typeof i!="number"?che(i):{top:i,right:i,bottom:i,left:i}}function Sw(i){const{x:t,y:r,width:o,height:l}=i;return{width:o,height:l,top:r,left:t,right:t+o,bottom:r+l,x:t,y:r}}function ZF(i,t,r){let{reference:o,floating:l}=i;const c=Xa(t),h=Q4(t),d=X4(h),m=pu(t),v=c==="y",x=o.x+o.width/2-l.width/2,T=o.y+o.height/2-l.height/2,E=o[d]/2-l[d]/2;let A;switch(m){case"top":A={x,y:o.y-l.height};break;case"bottom":A={x,y:o.y+o.height};break;case"right":A={x:o.x+o.width,y:T};break;case"left":A={x:o.x-l.width,y:T};break;default:A={x:o.x,y:o.y}}switch(Tm(t)){case"start":A[h]-=E*(r&&v?-1:1);break;case"end":A[h]+=E*(r&&v?-1:1);break}return A}const dhe=async(i,t,r)=>{const{placement:o="bottom",strategy:l="absolute",middleware:c=[],platform:h}=r,d=c.filter(Boolean),m=await(h.isRTL==null?void 0:h.isRTL(t));let v=await h.getElementRects({reference:i,floating:t,strategy:l}),{x,y:T}=ZF(v,o,m),E=o,A={},k=0;for(let _=0;_<d.length;_++){const{name:R,fn:P}=d[_],{x:D,y:N,data:$,reset:V}=await P({x,y:T,initialPlacement:o,placement:E,strategy:l,middlewareData:A,rects:v,platform:h,elements:{reference:i,floating:t}});x=D??x,T=N??T,A={...A,[R]:{...A[R],...$}},V&&k<=50&&(k++,typeof V=="object"&&(V.placement&&(E=V.placement),V.rects&&(v=V.rects===!0?await h.getElementRects({reference:i,floating:t,strategy:l}):V.rects),{x,y:T}=ZF(v,E,m)),_=-1)}return{x,y:T,placement:E,strategy:l,middlewareData:A}};async function Tv(i,t){var r;t===void 0&&(t={});const{x:o,y:l,platform:c,rects:h,elements:d,strategy:m}=i,{boundary:v="clippingAncestors",rootBoundary:x="viewport",elementContext:T="floating",altBoundary:E=!1,padding:A=0}=fu(t,i),k=iH(A),R=d[E?T==="floating"?"reference":"floating":T],P=Sw(await c.getClippingRect({element:(r=await(c.isElement==null?void 0:c.isElement(R)))==null||r?R:R.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(d.floating)),boundary:v,rootBoundary:x,strategy:m})),D=T==="floating"?{x:o,y:l,width:h.floating.width,height:h.floating.height}:h.reference,N=await(c.getOffsetParent==null?void 0:c.getOffsetParent(d.floating)),$=await(c.isElement==null?void 0:c.isElement(N))?await(c.getScale==null?void 0:c.getScale(N))||{x:1,y:1}:{x:1,y:1},V=Sw(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:D,offsetParent:N,strategy:m}):D);return{top:(P.top-V.top+k.top)/$.y,bottom:(V.bottom-P.bottom+k.bottom)/$.y,left:(P.left-V.left+k.left)/$.x,right:(V.right-P.right+k.right)/$.x}}const hhe=i=>({name:"arrow",options:i,async fn(t){const{x:r,y:o,placement:l,rects:c,platform:h,elements:d,middlewareData:m}=t,{element:v,padding:x=0}=fu(i,t)||{};if(v==null)return{};const T=iH(x),E={x:r,y:o},A=Q4(l),k=X4(A),_=await h.getDimensions(v),R=A==="y",P=R?"top":"left",D=R?"bottom":"right",N=R?"clientHeight":"clientWidth",$=c.reference[k]+c.reference[A]-E[A]-c.floating[k],V=E[A]-c.reference[A],W=await(h.getOffsetParent==null?void 0:h.getOffsetParent(v));let C=W?W[N]:0;(!C||!await(h.isElement==null?void 0:h.isElement(W)))&&(C=d.floating[N]||c.floating[k]);const K=$/2-V/2,ee=C/2-_[k]/2-1,Q=Uc(T[P],ee),fe=Uc(T[D],ee),O=Q,re=C-_[k]-fe,ce=C/2-_[k]/2+K,Ae=OR(O,ce,re),se=!m.arrow&&Tm(l)!=null&&ce!==Ae&&c.reference[k]/2-(ce<O?Q:fe)-_[k]/2<0,ue=se?ce<O?ce-O:ce-re:0;return{[A]:E[A]+ue,data:{[A]:Ae,centerOffset:ce-Ae-ue,...se&&{alignmentOffset:ue}},reset:se}}}),fhe=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(t){var r,o;const{placement:l,middlewareData:c,rects:h,initialPlacement:d,platform:m,elements:v}=t,{mainAxis:x=!0,crossAxis:T=!0,fallbackPlacements:E,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:_=!0,...R}=fu(i,t);if((r=c.arrow)!=null&&r.alignmentOffset)return{};const P=pu(l),D=Xa(d),N=pu(d)===d,$=await(m.isRTL==null?void 0:m.isRTL(v.floating)),V=E||(N||!_?[Tw(d)]:she(d)),W=k!=="none";!E&&W&&V.push(...uhe(d,_,k,$));const C=[d,...V],K=await Tv(t,R),ee=[];let Q=((o=c.flip)==null?void 0:o.overflows)||[];if(x&&ee.push(K[P]),T){const ce=ihe(l,h,$);ee.push(K[ce[0]],K[ce[1]])}if(Q=[...Q,{placement:l,overflows:ee}],!ee.every(ce=>ce<=0)){var fe,O;const ce=(((fe=c.flip)==null?void 0:fe.index)||0)+1,Ae=C[ce];if(Ae&&(!(T==="alignment"?D!==Xa(Ae):!1)||Q.every(le=>le.overflows[0]>0&&Xa(le.placement)===D)))return{data:{index:ce,overflows:Q},reset:{placement:Ae}};let se=(O=Q.filter(ue=>ue.overflows[0]<=0).sort((ue,le)=>ue.overflows[1]-le.overflows[1])[0])==null?void 0:O.placement;if(!se)switch(A){case"bestFit":{var re;const ue=(re=Q.filter(le=>{if(W){const pe=Xa(le.placement);return pe===D||pe==="y"}return!0}).map(le=>[le.placement,le.overflows.filter(pe=>pe>0).reduce((pe,be)=>pe+be,0)]).sort((le,pe)=>le[1]-pe[1])[0])==null?void 0:re[0];ue&&(se=ue);break}case"initialPlacement":se=d;break}if(l!==se)return{reset:{placement:se}}}return{}}}};function eB(i,t){return{top:i.top-t.height,right:i.right-t.width,bottom:i.bottom-t.height,left:i.left-t.width}}function tB(i){return ehe.some(t=>i[t]>=0)}const phe=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(t){const{rects:r}=t,{strategy:o="referenceHidden",...l}=fu(i,t);switch(o){case"referenceHidden":{const c=await Tv(t,{...l,elementContext:"reference"}),h=eB(c,r.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:tB(h)}}}case"escaped":{const c=await Tv(t,{...l,altBoundary:!0}),h=eB(c,r.floating);return{data:{escapedOffsets:h,escaped:tB(h)}}}default:return{}}}}},sH=new Set(["left","top"]);async function mhe(i,t){const{placement:r,platform:o,elements:l}=i,c=await(o.isRTL==null?void 0:o.isRTL(l.floating)),h=pu(r),d=Tm(r),m=Xa(r)==="y",v=sH.has(h)?-1:1,x=c&&m?-1:1,T=fu(t,i);let{mainAxis:E,crossAxis:A,alignmentAxis:k}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return d&&typeof k=="number"&&(A=d==="end"?k*-1:k),m?{x:A*x,y:E*v}:{x:E*v,y:A*x}}const ghe=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(t){var r,o;const{x:l,y:c,placement:h,middlewareData:d}=t,m=await mhe(t,i);return h===((r=d.offset)==null?void 0:r.placement)&&(o=d.arrow)!=null&&o.alignmentOffset?{}:{x:l+m.x,y:c+m.y,data:{...m,placement:h}}}}},vhe=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(t){const{x:r,y:o,placement:l}=t,{mainAxis:c=!0,crossAxis:h=!1,limiter:d={fn:R=>{let{x:P,y:D}=R;return{x:P,y:D}}},...m}=fu(i,t),v={x:r,y:o},x=await Tv(t,m),T=Xa(pu(l)),E=Y4(T);let A=v[E],k=v[T];if(c){const R=E==="y"?"top":"left",P=E==="y"?"bottom":"right",D=A+x[R],N=A-x[P];A=OR(D,A,N)}if(h){const R=T==="y"?"top":"left",P=T==="y"?"bottom":"right",D=k+x[R],N=k-x[P];k=OR(D,k,N)}const _=d.fn({...t,[E]:A,[T]:k});return{..._,data:{x:_.x-r,y:_.y-o,enabled:{[E]:c,[T]:h}}}}}},yhe=function(i){return i===void 0&&(i={}),{options:i,fn(t){const{x:r,y:o,placement:l,rects:c,middlewareData:h}=t,{offset:d=0,mainAxis:m=!0,crossAxis:v=!0}=fu(i,t),x={x:r,y:o},T=Xa(l),E=Y4(T);let A=x[E],k=x[T];const _=fu(d,t),R=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(m){const N=E==="y"?"height":"width",$=c.reference[E]-c.floating[N]+R.mainAxis,V=c.reference[E]+c.reference[N]-R.mainAxis;A<$?A=$:A>V&&(A=V)}if(v){var P,D;const N=E==="y"?"width":"height",$=sH.has(pu(l)),V=c.reference[T]-c.floating[N]+($&&((P=h.offset)==null?void 0:P[T])||0)+($?0:R.crossAxis),W=c.reference[T]+c.reference[N]+($?0:((D=h.offset)==null?void 0:D[T])||0)-($?R.crossAxis:0);k<V?k=V:k>W&&(k=W)}return{[E]:A,[T]:k}}}},xhe=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(t){var r,o;const{placement:l,rects:c,platform:h,elements:d}=t,{apply:m=()=>{},...v}=fu(i,t),x=await Tv(t,v),T=pu(l),E=Tm(l),A=Xa(l)==="y",{width:k,height:_}=c.floating;let R,P;T==="top"||T==="bottom"?(R=T,P=E===(await(h.isRTL==null?void 0:h.isRTL(d.floating))?"start":"end")?"left":"right"):(P=T,R=E==="end"?"top":"bottom");const D=_-x.top-x.bottom,N=k-x.left-x.right,$=Uc(_-x[R],D),V=Uc(k-x[P],N),W=!t.middlewareData.shift;let C=$,K=V;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(K=N),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(C=D),W&&!E){const Q=oo(x.left,0),fe=oo(x.right,0),O=oo(x.top,0),re=oo(x.bottom,0);A?K=k-2*(Q!==0||fe!==0?Q+fe:oo(x.left,x.right)):C=_-2*(O!==0||re!==0?O+re:oo(x.top,x.bottom))}await m({...t,availableWidth:K,availableHeight:C});const ee=await h.getDimensions(d.floating);return k!==ee.width||_!==ee.height?{reset:{rects:!0}}:{}}}};function vE(){return typeof window<"u"}function Sm(i){return oH(i)?(i.nodeName||"").toLowerCase():"#document"}function fo(i){var t;return(i==null||(t=i.ownerDocument)==null?void 0:t.defaultView)||window}function ul(i){var t;return(t=(oH(i)?i.ownerDocument:i.document)||window.document)==null?void 0:t.documentElement}function oH(i){return vE()?i instanceof Node||i instanceof fo(i).Node:!1}function xa(i){return vE()?i instanceof Element||i instanceof fo(i).Element:!1}function il(i){return vE()?i instanceof HTMLElement||i instanceof fo(i).HTMLElement:!1}function nB(i){return!vE()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof fo(i).ShadowRoot}const The=new Set(["inline","contents"]);function ny(i){const{overflow:t,overflowX:r,overflowY:o,display:l}=Ta(i);return/auto|scroll|overlay|hidden|clip/.test(t+o+r)&&!The.has(l)}const She=new Set(["table","td","th"]);function whe(i){return She.has(Sm(i))}const Ehe=[":popover-open",":modal"];function yE(i){return Ehe.some(t=>{try{return i.matches(t)}catch{return!1}})}const bhe=["transform","translate","scale","rotate","perspective"],Ahe=["transform","translate","scale","rotate","perspective","filter"],Ihe=["paint","layout","strict","content"];function J4(i){const t=Z4(),r=xa(i)?Ta(i):i;return bhe.some(o=>r[o]?r[o]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Ahe.some(o=>(r.willChange||"").includes(o))||Ihe.some(o=>(r.contain||"").includes(o))}function Che(i){let t=Fc(i);for(;il(t)&&!am(t);){if(J4(t))return t;if(yE(t))return null;t=Fc(t)}return null}function Z4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const khe=new Set(["html","body","#document"]);function am(i){return khe.has(Sm(i))}function Ta(i){return fo(i).getComputedStyle(i)}function xE(i){return xa(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function Fc(i){if(Sm(i)==="html")return i;const t=i.assignedSlot||i.parentNode||nB(i)&&i.host||ul(i);return nB(t)?t.host:t}function aH(i){const t=Fc(i);return am(t)?i.ownerDocument?i.ownerDocument.body:i.body:il(t)&&ny(t)?t:aH(t)}function Sv(i,t,r){var o;t===void 0&&(t=[]),r===void 0&&(r=!0);const l=aH(i),c=l===((o=i.ownerDocument)==null?void 0:o.body),h=fo(l);if(c){const d=UR(h);return t.concat(h,h.visualViewport||[],ny(l)?l:[],d&&r?Sv(d):[])}return t.concat(l,Sv(l,[],r))}function UR(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function lH(i){const t=Ta(i);let r=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const l=il(i),c=l?i.offsetWidth:r,h=l?i.offsetHeight:o,d=xw(r)!==c||xw(o)!==h;return d&&(r=c,o=h),{width:r,height:o,$:d}}function eP(i){return xa(i)?i:i.contextElement}function Dp(i){const t=eP(i);if(!il(t))return rl(1);const r=t.getBoundingClientRect(),{width:o,height:l,$:c}=lH(t);let h=(c?xw(r.width):r.width)/o,d=(c?xw(r.height):r.height)/l;return(!h||!Number.isFinite(h))&&(h=1),(!d||!Number.isFinite(d))&&(d=1),{x:h,y:d}}const _he=rl(0);function uH(i){const t=fo(i);return!Z4()||!t.visualViewport?_he:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Rhe(i,t,r){return t===void 0&&(t=!1),!r||t&&r!==fo(i)?!1:t}function Sh(i,t,r,o){t===void 0&&(t=!1),r===void 0&&(r=!1);const l=i.getBoundingClientRect(),c=eP(i);let h=rl(1);t&&(o?xa(o)&&(h=Dp(o)):h=Dp(i));const d=Rhe(c,r,o)?uH(c):rl(0);let m=(l.left+d.x)/h.x,v=(l.top+d.y)/h.y,x=l.width/h.x,T=l.height/h.y;if(c){const E=fo(c),A=o&&xa(o)?fo(o):o;let k=E,_=UR(k);for(;_&&o&&A!==k;){const R=Dp(_),P=_.getBoundingClientRect(),D=Ta(_),N=P.left+(_.clientLeft+parseFloat(D.paddingLeft))*R.x,$=P.top+(_.clientTop+parseFloat(D.paddingTop))*R.y;m*=R.x,v*=R.y,x*=R.x,T*=R.y,m+=N,v+=$,k=fo(_),_=UR(k)}}return Sw({width:x,height:T,x:m,y:v})}function tP(i,t){const r=xE(i).scrollLeft;return t?t.left+r:Sh(ul(i)).left+r}function cH(i,t,r){r===void 0&&(r=!1);const o=i.getBoundingClientRect(),l=o.left+t.scrollLeft-(r?0:tP(i,o)),c=o.top+t.scrollTop;return{x:l,y:c}}function Lhe(i){let{elements:t,rect:r,offsetParent:o,strategy:l}=i;const c=l==="fixed",h=ul(o),d=t?yE(t.floating):!1;if(o===h||d&&c)return r;let m={scrollLeft:0,scrollTop:0},v=rl(1);const x=rl(0),T=il(o);if((T||!T&&!c)&&((Sm(o)!=="body"||ny(h))&&(m=xE(o)),il(o))){const A=Sh(o);v=Dp(o),x.x=A.x+o.clientLeft,x.y=A.y+o.clientTop}const E=h&&!T&&!c?cH(h,m,!0):rl(0);return{width:r.width*v.x,height:r.height*v.y,x:r.x*v.x-m.scrollLeft*v.x+x.x+E.x,y:r.y*v.y-m.scrollTop*v.y+x.y+E.y}}function Phe(i){return Array.from(i.getClientRects())}function Dhe(i){const t=ul(i),r=xE(i),o=i.ownerDocument.body,l=oo(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),c=oo(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let h=-r.scrollLeft+tP(i);const d=-r.scrollTop;return Ta(o).direction==="rtl"&&(h+=oo(t.clientWidth,o.clientWidth)-l),{width:l,height:c,x:h,y:d}}function Nhe(i,t){const r=fo(i),o=ul(i),l=r.visualViewport;let c=o.clientWidth,h=o.clientHeight,d=0,m=0;if(l){c=l.width,h=l.height;const v=Z4();(!v||v&&t==="fixed")&&(d=l.offsetLeft,m=l.offsetTop)}return{width:c,height:h,x:d,y:m}}const Mhe=new Set(["absolute","fixed"]);function Ohe(i,t){const r=Sh(i,!0,t==="fixed"),o=r.top+i.clientTop,l=r.left+i.clientLeft,c=il(i)?Dp(i):rl(1),h=i.clientWidth*c.x,d=i.clientHeight*c.y,m=l*c.x,v=o*c.y;return{width:h,height:d,x:m,y:v}}function rB(i,t,r){let o;if(t==="viewport")o=Nhe(i,r);else if(t==="document")o=Dhe(ul(i));else if(xa(t))o=Ohe(t,r);else{const l=uH(i);o={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return Sw(o)}function dH(i,t){const r=Fc(i);return r===t||!xa(r)||am(r)?!1:Ta(r).position==="fixed"||dH(r,t)}function jhe(i,t){const r=t.get(i);if(r)return r;let o=Sv(i,[],!1).filter(d=>xa(d)&&Sm(d)!=="body"),l=null;const c=Ta(i).position==="fixed";let h=c?Fc(i):i;for(;xa(h)&&!am(h);){const d=Ta(h),m=J4(h);!m&&d.position==="fixed"&&(l=null),(c?!m&&!l:!m&&d.position==="static"&&!!l&&Mhe.has(l.position)||ny(h)&&!m&&dH(i,h))?o=o.filter(x=>x!==h):l=d,h=Fc(h)}return t.set(i,o),o}function Uhe(i){let{element:t,boundary:r,rootBoundary:o,strategy:l}=i;const h=[...r==="clippingAncestors"?yE(t)?[]:jhe(t,this._c):[].concat(r),o],d=h[0],m=h.reduce((v,x)=>{const T=rB(t,x,l);return v.top=oo(T.top,v.top),v.right=Uc(T.right,v.right),v.bottom=Uc(T.bottom,v.bottom),v.left=oo(T.left,v.left),v},rB(t,d,l));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function Fhe(i){const{width:t,height:r}=lH(i);return{width:t,height:r}}function Bhe(i,t,r){const o=il(t),l=ul(t),c=r==="fixed",h=Sh(i,!0,c,t);let d={scrollLeft:0,scrollTop:0};const m=rl(0);function v(){m.x=tP(l)}if(o||!o&&!c)if((Sm(t)!=="body"||ny(l))&&(d=xE(t)),o){const A=Sh(t,!0,c,t);m.x=A.x+t.clientLeft,m.y=A.y+t.clientTop}else l&&v();c&&!o&&l&&v();const x=l&&!o&&!c?cH(l,d):rl(0),T=h.left+d.scrollLeft-m.x-x.x,E=h.top+d.scrollTop-m.y-x.y;return{x:T,y:E,width:h.width,height:h.height}}function Gk(i){return Ta(i).position==="static"}function iB(i,t){if(!il(i)||Ta(i).position==="fixed")return null;if(t)return t(i);let r=i.offsetParent;return ul(i)===r&&(r=r.ownerDocument.body),r}function hH(i,t){const r=fo(i);if(yE(i))return r;if(!il(i)){let l=Fc(i);for(;l&&!am(l);){if(xa(l)&&!Gk(l))return l;l=Fc(l)}return r}let o=iB(i,t);for(;o&&whe(o)&&Gk(o);)o=iB(o,t);return o&&am(o)&&Gk(o)&&!J4(o)?r:o||Che(i)||r}const $he=async function(i){const t=this.getOffsetParent||hH,r=this.getDimensions,o=await r(i.floating);return{reference:Bhe(i.reference,await t(i.floating),i.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Vhe(i){return Ta(i).direction==="rtl"}const Ghe={convertOffsetParentRelativeRectToViewportRelativeRect:Lhe,getDocumentElement:ul,getClippingRect:Uhe,getOffsetParent:hH,getElementRects:$he,getClientRects:Phe,getDimensions:Fhe,getScale:Dp,isElement:xa,isRTL:Vhe};function fH(i,t){return i.x===t.x&&i.y===t.y&&i.width===t.width&&i.height===t.height}function Hhe(i,t){let r=null,o;const l=ul(i);function c(){var d;clearTimeout(o),(d=r)==null||d.disconnect(),r=null}function h(d,m){d===void 0&&(d=!1),m===void 0&&(m=1),c();const v=i.getBoundingClientRect(),{left:x,top:T,width:E,height:A}=v;if(d||t(),!E||!A)return;const k=QT(T),_=QT(l.clientWidth-(x+E)),R=QT(l.clientHeight-(T+A)),P=QT(x),N={rootMargin:-k+"px "+-_+"px "+-R+"px "+-P+"px",threshold:oo(0,Uc(1,m))||1};let $=!0;function V(W){const C=W[0].intersectionRatio;if(C!==m){if(!$)return h();C?h(!1,C):o=setTimeout(()=>{h(!1,1e-7)},1e3)}C===1&&!fH(v,i.getBoundingClientRect())&&h(),$=!1}try{r=new IntersectionObserver(V,{...N,root:l.ownerDocument})}catch{r=new IntersectionObserver(V,N)}r.observe(i)}return h(!0),c}function qhe(i,t,r,o){o===void 0&&(o={});const{ancestorScroll:l=!0,ancestorResize:c=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:m=!1}=o,v=eP(i),x=l||c?[...v?Sv(v):[],...Sv(t)]:[];x.forEach(P=>{l&&P.addEventListener("scroll",r,{passive:!0}),c&&P.addEventListener("resize",r)});const T=v&&d?Hhe(v,r):null;let E=-1,A=null;h&&(A=new ResizeObserver(P=>{let[D]=P;D&&D.target===v&&A&&(A.unobserve(t),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var N;(N=A)==null||N.observe(t)})),r()}),v&&!m&&A.observe(v),A.observe(t));let k,_=m?Sh(i):null;m&&R();function R(){const P=Sh(i);_&&!fH(_,P)&&r(),_=P,k=requestAnimationFrame(R)}return r(),()=>{var P;x.forEach(D=>{l&&D.removeEventListener("scroll",r),c&&D.removeEventListener("resize",r)}),T==null||T(),(P=A)==null||P.disconnect(),A=null,m&&cancelAnimationFrame(k)}}const Khe=ghe,zhe=vhe,Whe=fhe,Yhe=xhe,Xhe=phe,sB=hhe,Qhe=yhe,Jhe=(i,t,r)=>{const o=new Map,l={platform:Ghe,...r},c={...l.platform,_c:o};return dhe(i,t,{...l,platform:c})};var Zhe=typeof document<"u",efe=function(){},OS=Zhe?M.useLayoutEffect:efe;function ww(i,t){if(i===t)return!0;if(typeof i!=typeof t)return!1;if(typeof i=="function"&&i.toString()===t.toString())return!0;let r,o,l;if(i&&t&&typeof i=="object"){if(Array.isArray(i)){if(r=i.length,r!==t.length)return!1;for(o=r;o--!==0;)if(!ww(i[o],t[o]))return!1;return!0}if(l=Object.keys(i),r=l.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!{}.hasOwnProperty.call(t,l[o]))return!1;for(o=r;o--!==0;){const c=l[o];if(!(c==="_owner"&&i.$$typeof)&&!ww(i[c],t[c]))return!1}return!0}return i!==i&&t!==t}function pH(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function oB(i,t){const r=pH(i);return Math.round(t*r)/r}function Hk(i){const t=M.useRef(i);return OS(()=>{t.current=i}),t}function tfe(i){i===void 0&&(i={});const{placement:t="bottom",strategy:r="absolute",middleware:o=[],platform:l,elements:{reference:c,floating:h}={},transform:d=!0,whileElementsMounted:m,open:v}=i,[x,T]=M.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[E,A]=M.useState(o);ww(E,o)||A(o);const[k,_]=M.useState(null),[R,P]=M.useState(null),D=M.useCallback(le=>{le!==W.current&&(W.current=le,_(le))},[]),N=M.useCallback(le=>{le!==C.current&&(C.current=le,P(le))},[]),$=c||k,V=h||R,W=M.useRef(null),C=M.useRef(null),K=M.useRef(x),ee=m!=null,Q=Hk(m),fe=Hk(l),O=Hk(v),re=M.useCallback(()=>{if(!W.current||!C.current)return;const le={placement:t,strategy:r,middleware:E};fe.current&&(le.platform=fe.current),Jhe(W.current,C.current,le).then(pe=>{const be={...pe,isPositioned:O.current!==!1};ce.current&&!ww(K.current,be)&&(K.current=be,Lh.flushSync(()=>{T(be)}))})},[E,t,r,fe,O]);OS(()=>{v===!1&&K.current.isPositioned&&(K.current.isPositioned=!1,T(le=>({...le,isPositioned:!1})))},[v]);const ce=M.useRef(!1);OS(()=>(ce.current=!0,()=>{ce.current=!1}),[]),OS(()=>{if($&&(W.current=$),V&&(C.current=V),$&&V){if(Q.current)return Q.current($,V,re);re()}},[$,V,re,Q,ee]);const Ae=M.useMemo(()=>({reference:W,floating:C,setReference:D,setFloating:N}),[D,N]),se=M.useMemo(()=>({reference:$,floating:V}),[$,V]),ue=M.useMemo(()=>{const le={position:r,left:0,top:0};if(!se.floating)return le;const pe=oB(se.floating,x.x),be=oB(se.floating,x.y);return d?{...le,transform:"translate("+pe+"px, "+be+"px)",...pH(se.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:pe,top:be}},[r,d,se.floating,x.x,x.y]);return M.useMemo(()=>({...x,update:re,refs:Ae,elements:se,floatingStyles:ue}),[x,re,Ae,se,ue])}const nfe=i=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:i,fn(r){const{element:o,padding:l}=typeof i=="function"?i(r):i;return o&&t(o)?o.current!=null?sB({element:o.current,padding:l}).fn(r):{}:o?sB({element:o,padding:l}).fn(r):{}}}},rfe=(i,t)=>({...Khe(i),options:[i,t]}),ife=(i,t)=>({...zhe(i),options:[i,t]}),sfe=(i,t)=>({...Qhe(i),options:[i,t]}),ofe=(i,t)=>({...Whe(i),options:[i,t]}),afe=(i,t)=>({...Yhe(i),options:[i,t]}),lfe=(i,t)=>({...Xhe(i),options:[i,t]}),ufe=(i,t)=>({...nfe(i),options:[i,t]});var cfe="Arrow",mH=M.forwardRef((i,t)=>{const{children:r,width:o=10,height:l=5,...c}=i;return S.jsx(xt.svg,{...c,ref:t,width:o,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?r:S.jsx("polygon",{points:"0,0 30,0 15,10"})})});mH.displayName=cfe;var dfe=mH;function nP(i){const[t,r]=M.useState(void 0);return Nr(()=>{if(i){r({width:i.offsetWidth,height:i.offsetHeight});const o=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const c=l[0];let h,d;if("borderBoxSize"in c){const m=c.borderBoxSize,v=Array.isArray(m)?m[0]:m;h=v.inlineSize,d=v.blockSize}else h=i.offsetWidth,d=i.offsetHeight;r({width:h,height:d})});return o.observe(i,{box:"border-box"}),()=>o.unobserve(i)}else r(void 0)},[i]),t}var rP="Popper",[gH,wm]=Fs(rP),[hfe,vH]=gH(rP),yH=i=>{const{__scopePopper:t,children:r}=i,[o,l]=M.useState(null);return S.jsx(hfe,{scope:t,anchor:o,onAnchorChange:l,children:r})};yH.displayName=rP;var xH="PopperAnchor",TH=M.forwardRef((i,t)=>{const{__scopePopper:r,virtualRef:o,...l}=i,c=vH(xH,r),h=M.useRef(null),d=Kt(t,h);return M.useEffect(()=>{c.onAnchorChange((o==null?void 0:o.current)||h.current)}),o?null:S.jsx(xt.div,{...l,ref:d})});TH.displayName=xH;var iP="PopperContent",[ffe,pfe]=gH(iP),SH=M.forwardRef((i,t)=>{var Pe,Rt,Mt,$t,Ot,on;const{__scopePopper:r,side:o="bottom",sideOffset:l=0,align:c="center",alignOffset:h=0,arrowPadding:d=0,avoidCollisions:m=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:T="partial",hideWhenDetached:E=!1,updatePositionStrategy:A="optimized",onPlaced:k,..._}=i,R=vH(iP,r),[P,D]=M.useState(null),N=Kt(t,gr=>D(gr)),[$,V]=M.useState(null),W=nP($),C=(W==null?void 0:W.width)??0,K=(W==null?void 0:W.height)??0,ee=o+(c!=="center"?"-"+c:""),Q=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},fe=Array.isArray(v)?v:[v],O=fe.length>0,re={padding:Q,boundary:fe.filter(gfe),altBoundary:O},{refs:ce,floatingStyles:Ae,placement:se,isPositioned:ue,middlewareData:le}=tfe({strategy:"fixed",placement:ee,whileElementsMounted:(...gr)=>qhe(...gr,{animationFrame:A==="always"}),elements:{reference:R.anchor},middleware:[rfe({mainAxis:l+K,alignmentAxis:h}),m&&ife({mainAxis:!0,crossAxis:!1,limiter:T==="partial"?sfe():void 0,...re}),m&&ofe({...re}),afe({...re,apply:({elements:gr,rects:Mr,availableWidth:wa,availableHeight:xe})=>{const{width:_e,height:_r}=Mr.reference,qr=gr.floating.style;qr.setProperty("--radix-popper-available-width",`${wa}px`),qr.setProperty("--radix-popper-available-height",`${xe}px`),qr.setProperty("--radix-popper-anchor-width",`${_e}px`),qr.setProperty("--radix-popper-anchor-height",`${_r}px`)}}),$&&ufe({element:$,padding:d}),vfe({arrowWidth:C,arrowHeight:K}),E&&lfe({strategy:"referenceHidden",...re})]}),[pe,be]=bH(se),Ce=Gr(k);Nr(()=>{ue&&(Ce==null||Ce())},[ue,Ce]);const ke=(Pe=le.arrow)==null?void 0:Pe.x,Ue=(Rt=le.arrow)==null?void 0:Rt.y,qe=((Mt=le.arrow)==null?void 0:Mt.centerOffset)!==0,[ut,X]=M.useState();return Nr(()=>{P&&X(window.getComputedStyle(P).zIndex)},[P]),S.jsx("div",{ref:ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ae,transform:ue?Ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ut,"--radix-popper-transform-origin":[($t=le.transformOrigin)==null?void 0:$t.x,(Ot=le.transformOrigin)==null?void 0:Ot.y].join(" "),...((on=le.hide)==null?void 0:on.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:S.jsx(ffe,{scope:r,placedSide:pe,onArrowChange:V,arrowX:ke,arrowY:Ue,shouldHideArrow:qe,children:S.jsx(xt.div,{"data-side":pe,"data-align":be,..._,ref:N,style:{..._.style,animation:ue?void 0:"none"}})})})});SH.displayName=iP;var wH="PopperArrow",mfe={top:"bottom",right:"left",bottom:"top",left:"right"},EH=M.forwardRef(function(t,r){const{__scopePopper:o,...l}=t,c=pfe(wH,o),h=mfe[c.placedSide];return S.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:S.jsx(dfe,{...l,ref:r,style:{...l.style,display:"block"}})})});EH.displayName=wH;function gfe(i){return i!==null}var vfe=i=>({name:"transformOrigin",options:i,fn(t){var R,P,D;const{placement:r,rects:o,middlewareData:l}=t,h=((R=l.arrow)==null?void 0:R.centerOffset)!==0,d=h?0:i.arrowWidth,m=h?0:i.arrowHeight,[v,x]=bH(r),T={start:"0%",center:"50%",end:"100%"}[x],E=(((P=l.arrow)==null?void 0:P.x)??0)+d/2,A=(((D=l.arrow)==null?void 0:D.y)??0)+m/2;let k="",_="";return v==="bottom"?(k=h?T:`${E}px`,_=`${-m}px`):v==="top"?(k=h?T:`${E}px`,_=`${o.floating.height+m}px`):v==="right"?(k=`${-m}px`,_=h?T:`${A}px`):v==="left"&&(k=`${o.floating.width+m}px`,_=h?T:`${A}px`),{data:{x:k,y:_}}}});function bH(i){const[t,r="center"]=i.split("-");return[t,r]}var AH=yH,TE=TH,sP=SH,oP=EH,[SE]=Fs("Tooltip",[wm]),aP=wm(),IH="TooltipProvider",yfe=700,aB="tooltip.open",[xfe,CH]=SE(IH),kH=i=>{const{__scopeTooltip:t,delayDuration:r=yfe,skipDelayDuration:o=300,disableHoverableContent:l=!1,children:c}=i,h=M.useRef(!0),d=M.useRef(!1),m=M.useRef(0);return M.useEffect(()=>{const v=m.current;return()=>window.clearTimeout(v)},[]),S.jsx(xfe,{scope:t,isOpenDelayedRef:h,delayDuration:r,onOpen:M.useCallback(()=>{window.clearTimeout(m.current),h.current=!1},[]),onClose:M.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>h.current=!0,o)},[o]),isPointerInTransitRef:d,onPointerInTransitChange:M.useCallback(v=>{d.current=v},[]),disableHoverableContent:l,children:c})};kH.displayName=IH;var _H="Tooltip",[vIe,wE]=SE(_H),FR="TooltipTrigger",Tfe=M.forwardRef((i,t)=>{const{__scopeTooltip:r,...o}=i,l=wE(FR,r),c=CH(FR,r),h=aP(r),d=M.useRef(null),m=Kt(t,d,l.onTriggerChange),v=M.useRef(!1),x=M.useRef(!1),T=M.useCallback(()=>v.current=!1,[]);return M.useEffect(()=>()=>document.removeEventListener("pointerup",T),[T]),S.jsx(TE,{asChild:!0,...h,children:S.jsx(xt.button,{"aria-describedby":l.open?l.contentId:void 0,"data-state":l.stateAttribute,...o,ref:m,onPointerMove:st(i.onPointerMove,E=>{E.pointerType!=="touch"&&!x.current&&!c.isPointerInTransitRef.current&&(l.onTriggerEnter(),x.current=!0)}),onPointerLeave:st(i.onPointerLeave,()=>{l.onTriggerLeave(),x.current=!1}),onPointerDown:st(i.onPointerDown,()=>{l.open&&l.onClose(),v.current=!0,document.addEventListener("pointerup",T,{once:!0})}),onFocus:st(i.onFocus,()=>{v.current||l.onOpen()}),onBlur:st(i.onBlur,l.onClose),onClick:st(i.onClick,l.onClose)})})});Tfe.displayName=FR;var Sfe="TooltipPortal",[yIe,wfe]=SE(Sfe,{forceMount:void 0}),lm="TooltipContent",RH=M.forwardRef((i,t)=>{const r=wfe(lm,i.__scopeTooltip),{forceMount:o=r.forceMount,side:l="top",...c}=i,h=wE(lm,i.__scopeTooltip);return S.jsx(yo,{present:o||h.open,children:h.disableHoverableContent?S.jsx(LH,{side:l,...c,ref:t}):S.jsx(Efe,{side:l,...c,ref:t})})}),Efe=M.forwardRef((i,t)=>{const r=wE(lm,i.__scopeTooltip),o=CH(lm,i.__scopeTooltip),l=M.useRef(null),c=Kt(t,l),[h,d]=M.useState(null),{trigger:m,onClose:v}=r,x=l.current,{onPointerInTransitChange:T}=o,E=M.useCallback(()=>{d(null),T(!1)},[T]),A=M.useCallback((k,_)=>{const R=k.currentTarget,P={x:k.clientX,y:k.clientY},D=kfe(P,R.getBoundingClientRect()),N=_fe(P,D),$=Rfe(_.getBoundingClientRect()),V=Pfe([...N,...$]);d(V),T(!0)},[T]);return M.useEffect(()=>()=>E(),[E]),M.useEffect(()=>{if(m&&x){const k=R=>A(R,x),_=R=>A(R,m);return m.addEventListener("pointerleave",k),x.addEventListener("pointerleave",_),()=>{m.removeEventListener("pointerleave",k),x.removeEventListener("pointerleave",_)}}},[m,x,A,E]),M.useEffect(()=>{if(h){const k=_=>{const R=_.target,P={x:_.clientX,y:_.clientY},D=(m==null?void 0:m.contains(R))||(x==null?void 0:x.contains(R)),N=!Lfe(P,h);D?E():N&&(E(),v())};return document.addEventListener("pointermove",k),()=>document.removeEventListener("pointermove",k)}},[m,x,h,v,E]),S.jsx(LH,{...i,ref:c})}),[bfe,Afe]=SE(_H,{isInside:!1}),Ife=uG("TooltipContent"),LH=M.forwardRef((i,t)=>{const{__scopeTooltip:r,children:o,"aria-label":l,onEscapeKeyDown:c,onPointerDownOutside:h,...d}=i,m=wE(lm,r),v=aP(r),{onClose:x}=m;return M.useEffect(()=>(document.addEventListener(aB,x),()=>document.removeEventListener(aB,x)),[x]),M.useEffect(()=>{if(m.trigger){const T=E=>{const A=E.target;A!=null&&A.contains(m.trigger)&&x()};return window.addEventListener("scroll",T,{capture:!0}),()=>window.removeEventListener("scroll",T,{capture:!0})}},[m.trigger,x]),S.jsx(ym,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:h,onFocusOutside:T=>T.preventDefault(),onDismiss:x,children:S.jsxs(sP,{"data-state":m.stateAttribute,...v,...d,ref:t,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[S.jsx(Ife,{children:o}),S.jsx(bfe,{scope:r,isInside:!0,children:S.jsx(Vue,{id:m.contentId,role:"tooltip",children:l||o})})]})})});RH.displayName=lm;var PH="TooltipArrow",Cfe=M.forwardRef((i,t)=>{const{__scopeTooltip:r,...o}=i,l=aP(r);return Afe(PH,r).isInside?null:S.jsx(oP,{...l,...o,ref:t})});Cfe.displayName=PH;function kfe(i,t){const r=Math.abs(t.top-i.y),o=Math.abs(t.bottom-i.y),l=Math.abs(t.right-i.x),c=Math.abs(t.left-i.x);switch(Math.min(r,o,l,c)){case c:return"left";case l:return"right";case r:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function _fe(i,t,r=5){const o=[];switch(t){case"top":o.push({x:i.x-r,y:i.y+r},{x:i.x+r,y:i.y+r});break;case"bottom":o.push({x:i.x-r,y:i.y-r},{x:i.x+r,y:i.y-r});break;case"left":o.push({x:i.x+r,y:i.y-r},{x:i.x+r,y:i.y+r});break;case"right":o.push({x:i.x-r,y:i.y-r},{x:i.x-r,y:i.y+r});break}return o}function Rfe(i){const{top:t,right:r,bottom:o,left:l}=i;return[{x:l,y:t},{x:r,y:t},{x:r,y:o},{x:l,y:o}]}function Lfe(i,t){const{x:r,y:o}=i;let l=!1;for(let c=0,h=t.length-1;c<t.length;h=c++){const d=t[c],m=t[h],v=d.x,x=d.y,T=m.x,E=m.y;x>o!=E>o&&r<(T-v)*(o-x)/(E-x)+v&&(l=!l)}return l}function Pfe(i){const t=i.slice();return t.sort((r,o)=>r.x<o.x?-1:r.x>o.x?1:r.y<o.y?-1:r.y>o.y?1:0),Dfe(t)}function Dfe(i){if(i.length<=1)return i.slice();const t=[];for(let o=0;o<i.length;o++){const l=i[o];for(;t.length>=2;){const c=t[t.length-1],h=t[t.length-2];if((c.x-h.x)*(l.y-h.y)>=(c.y-h.y)*(l.x-h.x))t.pop();else break}t.push(l)}t.pop();const r=[];for(let o=i.length-1;o>=0;o--){const l=i[o];for(;r.length>=2;){const c=r[r.length-1],h=r[r.length-2];if((c.x-h.x)*(l.y-h.y)>=(c.y-h.y)*(l.x-h.x))r.pop();else break}r.push(l)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Nfe=kH,DH=RH;const Mfe=Nfe,Ofe=M.forwardRef(({className:i,sideOffset:t=4,...r},o)=>S.jsx(DH,{ref:o,sideOffset:t,className:yt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i),...r}));Ofe.displayName=DH.displayName;var Em=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(i){return this.listeners.add(i),this.onSubscribe(),()=>{this.listeners.delete(i),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wh=typeof window>"u"||"Deno"in globalThis;function cs(){}function jfe(i,t){return typeof i=="function"?i(t):i}function BR(i){return typeof i=="number"&&i>=0&&i!==1/0}function NH(i,t){return Math.max(i+(t||0)-Date.now(),0)}function Dc(i,t){return typeof i=="function"?i(t):i}function Po(i,t){return typeof i=="function"?i(t):i}function lB(i,t){const{type:r="all",exact:o,fetchStatus:l,predicate:c,queryKey:h,stale:d}=i;if(h){if(o){if(t.queryHash!==lP(h,t.options))return!1}else if(!wv(t.queryKey,h))return!1}if(r!=="all"){const m=t.isActive();if(r==="active"&&!m||r==="inactive"&&m)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||l&&l!==t.state.fetchStatus||c&&!c(t))}function uB(i,t){const{exact:r,status:o,predicate:l,mutationKey:c}=i;if(c){if(!t.options.mutationKey)return!1;if(r){if(Eh(t.options.mutationKey)!==Eh(c))return!1}else if(!wv(t.options.mutationKey,c))return!1}return!(o&&t.state.status!==o||l&&!l(t))}function lP(i,t){return((t==null?void 0:t.queryKeyHashFn)||Eh)(i)}function Eh(i){return JSON.stringify(i,(t,r)=>$R(r)?Object.keys(r).sort().reduce((o,l)=>(o[l]=r[l],o),{}):r)}function wv(i,t){return i===t?!0:typeof i!=typeof t?!1:i&&t&&typeof i=="object"&&typeof t=="object"?Object.keys(t).every(r=>wv(i[r],t[r])):!1}function MH(i,t){if(i===t)return i;const r=cB(i)&&cB(t);if(r||$R(i)&&$R(t)){const o=r?i:Object.keys(i),l=o.length,c=r?t:Object.keys(t),h=c.length,d=r?[]:{},m=new Set(o);let v=0;for(let x=0;x<h;x++){const T=r?x:c[x];(!r&&m.has(T)||r)&&i[T]===void 0&&t[T]===void 0?(d[T]=void 0,v++):(d[T]=MH(i[T],t[T]),d[T]===i[T]&&i[T]!==void 0&&v++)}return l===h&&v===l?i:d}return t}function Ew(i,t){if(!t||Object.keys(i).length!==Object.keys(t).length)return!1;for(const r in i)if(i[r]!==t[r])return!1;return!0}function cB(i){return Array.isArray(i)&&i.length===Object.keys(i).length}function $R(i){if(!dB(i))return!1;const t=i.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!dB(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(i)!==Object.prototype)}function dB(i){return Object.prototype.toString.call(i)==="[object Object]"}function Ufe(i){return new Promise(t=>{setTimeout(t,i)})}function VR(i,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(i,t):r.structuralSharing!==!1?MH(i,t):t}function Ffe(i,t,r=0){const o=[...i,t];return r&&o.length>r?o.slice(1):o}function Bfe(i,t,r=0){const o=[t,...i];return r&&o.length>r?o.slice(0,-1):o}var uP=Symbol();function OH(i,t){return!i.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!i.queryFn||i.queryFn===uP?()=>Promise.reject(new Error(`Missing queryFn: '${i.queryHash}'`)):i.queryFn}function jH(i,t){return typeof i=="function"?i(...t):!!i}var nh,hc,$p,j9,$fe=(j9=class extends Em{constructor(){super();Et(this,nh);Et(this,hc);Et(this,$p);it(this,$p,t=>{if(!wh&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){me(this,hc)||this.setEventListener(me(this,$p))}onUnsubscribe(){var t;this.hasListeners()||((t=me(this,hc))==null||t.call(this),it(this,hc,void 0))}setEventListener(t){var r;it(this,$p,t),(r=me(this,hc))==null||r.call(this),it(this,hc,t(o=>{typeof o=="boolean"?this.setFocused(o):this.onFocus()}))}setFocused(t){me(this,nh)!==t&&(it(this,nh,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof me(this,nh)=="boolean"?me(this,nh):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},nh=new WeakMap,hc=new WeakMap,$p=new WeakMap,j9),cP=new $fe,Vp,fc,Gp,U9,Vfe=(U9=class extends Em{constructor(){super();Et(this,Vp,!0);Et(this,fc);Et(this,Gp);it(this,Gp,t=>{if(!wh&&window.addEventListener){const r=()=>t(!0),o=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",o,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",o)}}})}onSubscribe(){me(this,fc)||this.setEventListener(me(this,Gp))}onUnsubscribe(){var t;this.hasListeners()||((t=me(this,fc))==null||t.call(this),it(this,fc,void 0))}setEventListener(t){var r;it(this,Gp,t),(r=me(this,fc))==null||r.call(this),it(this,fc,t(this.setOnline.bind(this)))}setOnline(t){me(this,Vp)!==t&&(it(this,Vp,t),this.listeners.forEach(o=>{o(t)}))}isOnline(){return me(this,Vp)}},Vp=new WeakMap,fc=new WeakMap,Gp=new WeakMap,U9),bw=new Vfe;function GR(){let i,t;const r=new Promise((l,c)=>{i=l,t=c});r.status="pending",r.catch(()=>{});function o(l){Object.assign(r,l),delete r.resolve,delete r.reject}return r.resolve=l=>{o({status:"fulfilled",value:l}),i(l)},r.reject=l=>{o({status:"rejected",reason:l}),t(l)},r}function Gfe(i){return Math.min(1e3*2**i,3e4)}function UH(i){return(i??"online")==="online"?bw.isOnline():!0}var FH=class extends Error{constructor(i){super("CancelledError"),this.revert=i==null?void 0:i.revert,this.silent=i==null?void 0:i.silent}};function qk(i){return i instanceof FH}function BH(i){let t=!1,r=0,o=!1,l;const c=GR(),h=_=>{var R;o||(E(new FH(_)),(R=i.abort)==null||R.call(i))},d=()=>{t=!0},m=()=>{t=!1},v=()=>cP.isFocused()&&(i.networkMode==="always"||bw.isOnline())&&i.canRun(),x=()=>UH(i.networkMode)&&i.canRun(),T=_=>{var R;o||(o=!0,(R=i.onSuccess)==null||R.call(i,_),l==null||l(),c.resolve(_))},E=_=>{var R;o||(o=!0,(R=i.onError)==null||R.call(i,_),l==null||l(),c.reject(_))},A=()=>new Promise(_=>{var R;l=P=>{(o||v())&&_(P)},(R=i.onPause)==null||R.call(i)}).then(()=>{var _;l=void 0,o||(_=i.onContinue)==null||_.call(i)}),k=()=>{if(o)return;let _;const R=r===0?i.initialPromise:void 0;try{_=R??i.fn()}catch(P){_=Promise.reject(P)}Promise.resolve(_).then(T).catch(P=>{var W;if(o)return;const D=i.retry??(wh?0:3),N=i.retryDelay??Gfe,$=typeof N=="function"?N(r,P):N,V=D===!0||typeof D=="number"&&r<D||typeof D=="function"&&D(r,P);if(t||!V){E(P);return}r++,(W=i.onFail)==null||W.call(i,r,P),Ufe($).then(()=>v()?void 0:A()).then(()=>{t?E(P):k()})})};return{promise:c,cancel:h,continue:()=>(l==null||l(),c),cancelRetry:d,continueRetry:m,canStart:x,start:()=>(x()?k():A().then(k),c)}}var Hfe=i=>setTimeout(i,0);function qfe(){let i=[],t=0,r=d=>{d()},o=d=>{d()},l=Hfe;const c=d=>{t?i.push(d):l(()=>{r(d)})},h=()=>{const d=i;i=[],d.length&&l(()=>{o(()=>{d.forEach(m=>{r(m)})})})};return{batch:d=>{let m;t++;try{m=d()}finally{t--,t||h()}return m},batchCalls:d=>(...m)=>{c(()=>{d(...m)})},schedule:c,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{o=d},setScheduler:d=>{l=d}}}var si=qfe(),rh,F9,$H=(F9=class{constructor(){Et(this,rh)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),BR(this.gcTime)&&it(this,rh,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(i){this.gcTime=Math.max(this.gcTime||0,i??(wh?1/0:5*60*1e3))}clearGcTimeout(){me(this,rh)&&(clearTimeout(me(this,rh)),it(this,rh,void 0))}},rh=new WeakMap,F9),Hp,ih,Lo,sh,Wi,$v,oh,ca,Wl,B9,Kfe=(B9=class extends $H{constructor(t){super();Et(this,ca);Et(this,Hp);Et(this,ih);Et(this,Lo);Et(this,sh);Et(this,Wi);Et(this,$v);Et(this,oh);it(this,oh,!1),it(this,$v,t.defaultOptions),this.setOptions(t.options),this.observers=[],it(this,sh,t.client),it(this,Lo,me(this,sh).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,it(this,Hp,zfe(this.options)),this.state=t.state??me(this,Hp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=me(this,Wi))==null?void 0:t.promise}setOptions(t){this.options={...me(this,$v),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&me(this,Lo).remove(this)}setData(t,r){const o=VR(this.state.data,t,this.options);return Zt(this,ca,Wl).call(this,{data:o,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),o}setState(t,r){Zt(this,ca,Wl).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var o,l;const r=(o=me(this,Wi))==null?void 0:o.promise;return(l=me(this,Wi))==null||l.cancel(t),r?r.then(cs).catch(cs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(me(this,Hp))}isActive(){return this.observers.some(t=>Po(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===uP||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Dc(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!NH(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(o=>o.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=me(this,Wi))==null||r.continue()}onOnline(){var r;const t=this.observers.find(o=>o.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=me(this,Wi))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),me(this,Lo).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(me(this,Wi)&&(me(this,oh)?me(this,Wi).cancel({revert:!0}):me(this,Wi).cancelRetry()),this.scheduleGc()),me(this,Lo).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Zt(this,ca,Wl).call(this,{type:"invalidate"})}fetch(t,r){var v,x,T;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(me(this,Wi))return me(this,Wi).continueRetry(),me(this,Wi).promise}if(t&&this.setOptions(t),!this.options.queryFn){const E=this.observers.find(A=>A.options.queryFn);E&&this.setOptions(E.options)}const o=new AbortController,l=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(it(this,oh,!0),o.signal)})},c=()=>{const E=OH(this.options,r),k=(()=>{const _={client:me(this,sh),queryKey:this.queryKey,meta:this.meta};return l(_),_})();return it(this,oh,!1),this.options.persister?this.options.persister(E,k,this):E(k)},d=(()=>{const E={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:me(this,sh),state:this.state,fetchFn:c};return l(E),E})();(v=this.options.behavior)==null||v.onFetch(d,this),it(this,ih,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=d.fetchOptions)==null?void 0:x.meta))&&Zt(this,ca,Wl).call(this,{type:"fetch",meta:(T=d.fetchOptions)==null?void 0:T.meta});const m=E=>{var A,k,_,R;qk(E)&&E.silent||Zt(this,ca,Wl).call(this,{type:"error",error:E}),qk(E)||((k=(A=me(this,Lo).config).onError)==null||k.call(A,E,this),(R=(_=me(this,Lo).config).onSettled)==null||R.call(_,this.state.data,E,this)),this.scheduleGc()};return it(this,Wi,BH({initialPromise:r==null?void 0:r.initialPromise,fn:d.fetchFn,abort:o.abort.bind(o),onSuccess:E=>{var A,k,_,R;if(E===void 0){m(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(E)}catch(P){m(P);return}(k=(A=me(this,Lo).config).onSuccess)==null||k.call(A,E,this),(R=(_=me(this,Lo).config).onSettled)==null||R.call(_,E,this.state.error,this),this.scheduleGc()},onError:m,onFail:(E,A)=>{Zt(this,ca,Wl).call(this,{type:"failed",failureCount:E,error:A})},onPause:()=>{Zt(this,ca,Wl).call(this,{type:"pause"})},onContinue:()=>{Zt(this,ca,Wl).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0})),me(this,Wi).start()}},Hp=new WeakMap,ih=new WeakMap,Lo=new WeakMap,sh=new WeakMap,Wi=new WeakMap,$v=new WeakMap,oh=new WeakMap,ca=new WeakSet,Wl=function(t){const r=o=>{switch(t.type){case"failed":return{...o,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,...VH(o.data,this.options),fetchMeta:t.meta??null};case"success":return it(this,ih,void 0),{...o,data:t.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const l=t.error;return qk(l)&&l.revert&&me(this,ih)?{...me(this,ih),fetchStatus:"idle"}:{...o,error:l,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...t.state}}};this.state=r(this.state),si.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate()}),me(this,Lo).notify({query:this,type:"updated",action:t})})},B9);function VH(i,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:UH(t.networkMode)?"fetching":"paused",...i===void 0&&{error:null,status:"pending"}}}function zfe(i){const t=typeof i.initialData=="function"?i.initialData():i.initialData,r=t!==void 0,o=r?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ha,$9,Wfe=($9=class extends Em{constructor(t={}){super();Et(this,Ha);this.config=t,it(this,Ha,new Map)}build(t,r,o){const l=r.queryKey,c=r.queryHash??lP(l,r);let h=this.get(c);return h||(h=new Kfe({client:t,queryKey:l,queryHash:c,options:t.defaultQueryOptions(r),state:o,defaultOptions:t.getQueryDefaults(l)}),this.add(h)),h}add(t){me(this,Ha).has(t.queryHash)||(me(this,Ha).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=me(this,Ha).get(t.queryHash);r&&(t.destroy(),r===t&&me(this,Ha).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){si.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return me(this,Ha).get(t)}getAll(){return[...me(this,Ha).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(o=>lB(r,o))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(o=>lB(t,o)):r}notify(t){si.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){si.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){si.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ha=new WeakMap,$9),qa,as,ah,Ka,nc,V9,Yfe=(V9=class extends $H{constructor(t){super();Et(this,Ka);Et(this,qa);Et(this,as);Et(this,ah);this.mutationId=t.mutationId,it(this,as,t.mutationCache),it(this,qa,[]),this.state=t.state||GH(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){me(this,qa).includes(t)||(me(this,qa).push(t),this.clearGcTimeout(),me(this,as).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){it(this,qa,me(this,qa).filter(r=>r!==t)),this.scheduleGc(),me(this,as).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){me(this,qa).length||(this.state.status==="pending"?this.scheduleGc():me(this,as).remove(this))}continue(){var t;return((t=me(this,ah))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,h,d,m,v,x,T,E,A,k,_,R,P,D,N,$,V,W,C,K;const r=()=>{Zt(this,Ka,nc).call(this,{type:"continue"})};it(this,ah,BH({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(ee,Q)=>{Zt(this,Ka,nc).call(this,{type:"failed",failureCount:ee,error:Q})},onPause:()=>{Zt(this,Ka,nc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>me(this,as).canRun(this)}));const o=this.state.status==="pending",l=!me(this,ah).canStart();try{if(o)r();else{Zt(this,Ka,nc).call(this,{type:"pending",variables:t,isPaused:l}),await((h=(c=me(this,as).config).onMutate)==null?void 0:h.call(c,t,this));const Q=await((m=(d=this.options).onMutate)==null?void 0:m.call(d,t));Q!==this.state.context&&Zt(this,Ka,nc).call(this,{type:"pending",context:Q,variables:t,isPaused:l})}const ee=await me(this,ah).start();return await((x=(v=me(this,as).config).onSuccess)==null?void 0:x.call(v,ee,t,this.state.context,this)),await((E=(T=this.options).onSuccess)==null?void 0:E.call(T,ee,t,this.state.context)),await((k=(A=me(this,as).config).onSettled)==null?void 0:k.call(A,ee,null,this.state.variables,this.state.context,this)),await((R=(_=this.options).onSettled)==null?void 0:R.call(_,ee,null,t,this.state.context)),Zt(this,Ka,nc).call(this,{type:"success",data:ee}),ee}catch(ee){try{throw await((D=(P=me(this,as).config).onError)==null?void 0:D.call(P,ee,t,this.state.context,this)),await(($=(N=this.options).onError)==null?void 0:$.call(N,ee,t,this.state.context)),await((W=(V=me(this,as).config).onSettled)==null?void 0:W.call(V,void 0,ee,this.state.variables,this.state.context,this)),await((K=(C=this.options).onSettled)==null?void 0:K.call(C,void 0,ee,t,this.state.context)),ee}finally{Zt(this,Ka,nc).call(this,{type:"error",error:ee})}}finally{me(this,as).runNext(this)}}},qa=new WeakMap,as=new WeakMap,ah=new WeakMap,Ka=new WeakSet,nc=function(t){const r=o=>{switch(t.type){case"failed":return{...o,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"pending":return{...o,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...o,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:t.error,failureCount:o.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),si.batch(()=>{me(this,qa).forEach(o=>{o.onMutationUpdate(t)}),me(this,as).notify({mutation:this,type:"updated",action:t})})},V9);function GH(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var eu,da,Vv,G9,Xfe=(G9=class extends Em{constructor(t={}){super();Et(this,eu);Et(this,da);Et(this,Vv);this.config=t,it(this,eu,new Set),it(this,da,new Map),it(this,Vv,0)}build(t,r,o){const l=new Yfe({mutationCache:this,mutationId:++RT(this,Vv)._,options:t.defaultMutationOptions(r),state:o});return this.add(l),l}add(t){me(this,eu).add(t);const r=JT(t);if(typeof r=="string"){const o=me(this,da).get(r);o?o.push(t):me(this,da).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(me(this,eu).delete(t)){const r=JT(t);if(typeof r=="string"){const o=me(this,da).get(r);if(o)if(o.length>1){const l=o.indexOf(t);l!==-1&&o.splice(l,1)}else o[0]===t&&me(this,da).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=JT(t);if(typeof r=="string"){const o=me(this,da).get(r),l=o==null?void 0:o.find(c=>c.state.status==="pending");return!l||l===t}else return!0}runNext(t){var o;const r=JT(t);if(typeof r=="string"){const l=(o=me(this,da).get(r))==null?void 0:o.find(c=>c!==t&&c.state.isPaused);return(l==null?void 0:l.continue())??Promise.resolve()}else return Promise.resolve()}clear(){si.batch(()=>{me(this,eu).forEach(t=>{this.notify({type:"removed",mutation:t})}),me(this,eu).clear(),me(this,da).clear()})}getAll(){return Array.from(me(this,eu))}find(t){const r={exact:!0,...t};return this.getAll().find(o=>uB(r,o))}findAll(t={}){return this.getAll().filter(r=>uB(t,r))}notify(t){si.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return si.batch(()=>Promise.all(t.map(r=>r.continue().catch(cs))))}},eu=new WeakMap,da=new WeakMap,Vv=new WeakMap,G9);function JT(i){var t;return(t=i.options.scope)==null?void 0:t.id}function hB(i){return{onFetch:(t,r)=>{var x,T,E,A,k;const o=t.options,l=(E=(T=(x=t.fetchOptions)==null?void 0:x.meta)==null?void 0:T.fetchMore)==null?void 0:E.direction,c=((A=t.state.data)==null?void 0:A.pages)||[],h=((k=t.state.data)==null?void 0:k.pageParams)||[];let d={pages:[],pageParams:[]},m=0;const v=async()=>{let _=!1;const R=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?_=!0:t.signal.addEventListener("abort",()=>{_=!0}),t.signal)})},P=OH(t.options,t.fetchOptions),D=async(N,$,V)=>{if(_)return Promise.reject();if($==null&&N.pages.length)return Promise.resolve(N);const C=(()=>{const fe={client:t.client,queryKey:t.queryKey,pageParam:$,direction:V?"backward":"forward",meta:t.options.meta};return R(fe),fe})(),K=await P(C),{maxPages:ee}=t.options,Q=V?Bfe:Ffe;return{pages:Q(N.pages,K,ee),pageParams:Q(N.pageParams,$,ee)}};if(l&&c.length){const N=l==="backward",$=N?Qfe:fB,V={pages:c,pageParams:h},W=$(o,V);d=await D(V,W,N)}else{const N=i??c.length;do{const $=m===0?h[0]??o.initialPageParam:fB(o,d);if(m>0&&$==null)break;d=await D(d,$),m++}while(m<N)}return d};t.options.persister?t.fetchFn=()=>{var _,R;return(R=(_=t.options).persister)==null?void 0:R.call(_,v,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=v}}}function fB(i,{pages:t,pageParams:r}){const o=t.length-1;return t.length>0?i.getNextPageParam(t[o],t,r[o],r):void 0}function Qfe(i,{pages:t,pageParams:r}){var o;return t.length>0?(o=i.getPreviousPageParam)==null?void 0:o.call(i,t[0],t,r[0],r):void 0}var Ar,pc,mc,qp,Kp,gc,zp,Wp,H9,Jfe=(H9=class{constructor(i={}){Et(this,Ar);Et(this,pc);Et(this,mc);Et(this,qp);Et(this,Kp);Et(this,gc);Et(this,zp);Et(this,Wp);it(this,Ar,i.queryCache||new Wfe),it(this,pc,i.mutationCache||new Xfe),it(this,mc,i.defaultOptions||{}),it(this,qp,new Map),it(this,Kp,new Map),it(this,gc,0)}mount(){RT(this,gc)._++,me(this,gc)===1&&(it(this,zp,cP.subscribe(async i=>{i&&(await this.resumePausedMutations(),me(this,Ar).onFocus())})),it(this,Wp,bw.subscribe(async i=>{i&&(await this.resumePausedMutations(),me(this,Ar).onOnline())})))}unmount(){var i,t;RT(this,gc)._--,me(this,gc)===0&&((i=me(this,zp))==null||i.call(this),it(this,zp,void 0),(t=me(this,Wp))==null||t.call(this),it(this,Wp,void 0))}isFetching(i){return me(this,Ar).findAll({...i,fetchStatus:"fetching"}).length}isMutating(i){return me(this,pc).findAll({...i,status:"pending"}).length}getQueryData(i){var r;const t=this.defaultQueryOptions({queryKey:i});return(r=me(this,Ar).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(i){const t=this.defaultQueryOptions(i),r=me(this,Ar).build(this,t),o=r.state.data;return o===void 0?this.fetchQuery(i):(i.revalidateIfStale&&r.isStaleByTime(Dc(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(o))}getQueriesData(i){return me(this,Ar).findAll(i).map(({queryKey:t,state:r})=>{const o=r.data;return[t,o]})}setQueryData(i,t,r){const o=this.defaultQueryOptions({queryKey:i}),l=me(this,Ar).get(o.queryHash),c=l==null?void 0:l.state.data,h=jfe(t,c);if(h!==void 0)return me(this,Ar).build(this,o).setData(h,{...r,manual:!0})}setQueriesData(i,t,r){return si.batch(()=>me(this,Ar).findAll(i).map(({queryKey:o})=>[o,this.setQueryData(o,t,r)]))}getQueryState(i){var r;const t=this.defaultQueryOptions({queryKey:i});return(r=me(this,Ar).get(t.queryHash))==null?void 0:r.state}removeQueries(i){const t=me(this,Ar);si.batch(()=>{t.findAll(i).forEach(r=>{t.remove(r)})})}resetQueries(i,t){const r=me(this,Ar);return si.batch(()=>(r.findAll(i).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...i},t)))}cancelQueries(i,t={}){const r={revert:!0,...t},o=si.batch(()=>me(this,Ar).findAll(i).map(l=>l.cancel(r)));return Promise.all(o).then(cs).catch(cs)}invalidateQueries(i,t={}){return si.batch(()=>(me(this,Ar).findAll(i).forEach(r=>{r.invalidate()}),(i==null?void 0:i.refetchType)==="none"?Promise.resolve():this.refetchQueries({...i,type:(i==null?void 0:i.refetchType)??(i==null?void 0:i.type)??"active"},t)))}refetchQueries(i,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},o=si.batch(()=>me(this,Ar).findAll(i).filter(l=>!l.isDisabled()&&!l.isStatic()).map(l=>{let c=l.fetch(void 0,r);return r.throwOnError||(c=c.catch(cs)),l.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(o).then(cs)}fetchQuery(i){const t=this.defaultQueryOptions(i);t.retry===void 0&&(t.retry=!1);const r=me(this,Ar).build(this,t);return r.isStaleByTime(Dc(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(i){return this.fetchQuery(i).then(cs).catch(cs)}fetchInfiniteQuery(i){return i.behavior=hB(i.pages),this.fetchQuery(i)}prefetchInfiniteQuery(i){return this.fetchInfiniteQuery(i).then(cs).catch(cs)}ensureInfiniteQueryData(i){return i.behavior=hB(i.pages),this.ensureQueryData(i)}resumePausedMutations(){return bw.isOnline()?me(this,pc).resumePausedMutations():Promise.resolve()}getQueryCache(){return me(this,Ar)}getMutationCache(){return me(this,pc)}getDefaultOptions(){return me(this,mc)}setDefaultOptions(i){it(this,mc,i)}setQueryDefaults(i,t){me(this,qp).set(Eh(i),{queryKey:i,defaultOptions:t})}getQueryDefaults(i){const t=[...me(this,qp).values()],r={};return t.forEach(o=>{wv(i,o.queryKey)&&Object.assign(r,o.defaultOptions)}),r}setMutationDefaults(i,t){me(this,Kp).set(Eh(i),{mutationKey:i,defaultOptions:t})}getMutationDefaults(i){const t=[...me(this,Kp).values()],r={};return t.forEach(o=>{wv(i,o.mutationKey)&&Object.assign(r,o.defaultOptions)}),r}defaultQueryOptions(i){if(i._defaulted)return i;const t={...me(this,mc).queries,...this.getQueryDefaults(i.queryKey),...i,_defaulted:!0};return t.queryHash||(t.queryHash=lP(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===uP&&(t.enabled=!1),t}defaultMutationOptions(i){return i!=null&&i._defaulted?i:{...me(this,mc).mutations,...(i==null?void 0:i.mutationKey)&&this.getMutationDefaults(i.mutationKey),...i,_defaulted:!0}}clear(){me(this,Ar).clear(),me(this,pc).clear()}},Ar=new WeakMap,pc=new WeakMap,mc=new WeakMap,qp=new WeakMap,Kp=new WeakMap,gc=new WeakMap,zp=new WeakMap,Wp=new WeakMap,H9),_s,hn,Gv,ls,lh,Yp,vc,yc,Hv,Xp,Qp,uh,ch,xc,Jp,In,O0,HR,qR,KR,zR,WR,YR,XR,HH,q9,Zfe=(q9=class extends Em{constructor(t,r){super();Et(this,In);Et(this,_s);Et(this,hn);Et(this,Gv);Et(this,ls);Et(this,lh);Et(this,Yp);Et(this,vc);Et(this,yc);Et(this,Hv);Et(this,Xp);Et(this,Qp);Et(this,uh);Et(this,ch);Et(this,xc);Et(this,Jp,new Set);this.options=r,it(this,_s,t),it(this,yc,null),it(this,vc,GR()),this.options.experimental_prefetchInRender||me(this,vc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(me(this,hn).addObserver(this),pB(me(this,hn),this.options)?Zt(this,In,O0).call(this):this.updateResult(),Zt(this,In,zR).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return QR(me(this,hn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return QR(me(this,hn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Zt(this,In,WR).call(this),Zt(this,In,YR).call(this),me(this,hn).removeObserver(this)}setOptions(t){const r=this.options,o=me(this,hn);if(this.options=me(this,_s).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Po(this.options.enabled,me(this,hn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Zt(this,In,XR).call(this),me(this,hn).setOptions(this.options),r._defaulted&&!Ew(this.options,r)&&me(this,_s).getQueryCache().notify({type:"observerOptionsUpdated",query:me(this,hn),observer:this});const l=this.hasListeners();l&&mB(me(this,hn),o,this.options,r)&&Zt(this,In,O0).call(this),this.updateResult(),l&&(me(this,hn)!==o||Po(this.options.enabled,me(this,hn))!==Po(r.enabled,me(this,hn))||Dc(this.options.staleTime,me(this,hn))!==Dc(r.staleTime,me(this,hn)))&&Zt(this,In,HR).call(this);const c=Zt(this,In,qR).call(this);l&&(me(this,hn)!==o||Po(this.options.enabled,me(this,hn))!==Po(r.enabled,me(this,hn))||c!==me(this,xc))&&Zt(this,In,KR).call(this,c)}getOptimisticResult(t){const r=me(this,_s).getQueryCache().build(me(this,_s),t),o=this.createResult(r,t);return tpe(this,o)&&(it(this,ls,o),it(this,Yp,this.options),it(this,lh,me(this,hn).state)),o}getCurrentResult(){return me(this,ls)}trackResult(t,r){return new Proxy(t,{get:(o,l)=>(this.trackProp(l),r==null||r(l),Reflect.get(o,l))})}trackProp(t){me(this,Jp).add(t)}getCurrentQuery(){return me(this,hn)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=me(this,_s).defaultQueryOptions(t),o=me(this,_s).getQueryCache().build(me(this,_s),r);return o.fetch().then(()=>this.createResult(o,r))}fetch(t){return Zt(this,In,O0).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),me(this,ls)))}createResult(t,r){var ee;const o=me(this,hn),l=this.options,c=me(this,ls),h=me(this,lh),d=me(this,Yp),v=t!==o?t.state:me(this,Gv),{state:x}=t;let T={...x},E=!1,A;if(r._optimisticResults){const Q=this.hasListeners(),fe=!Q&&pB(t,r),O=Q&&mB(t,o,r,l);(fe||O)&&(T={...T,...VH(x.data,t.options)}),r._optimisticResults==="isRestoring"&&(T.fetchStatus="idle")}let{error:k,errorUpdatedAt:_,status:R}=T;A=T.data;let P=!1;if(r.placeholderData!==void 0&&A===void 0&&R==="pending"){let Q;c!=null&&c.isPlaceholderData&&r.placeholderData===(d==null?void 0:d.placeholderData)?(Q=c.data,P=!0):Q=typeof r.placeholderData=="function"?r.placeholderData((ee=me(this,Qp))==null?void 0:ee.state.data,me(this,Qp)):r.placeholderData,Q!==void 0&&(R="success",A=VR(c==null?void 0:c.data,Q,r),E=!0)}if(r.select&&A!==void 0&&!P)if(c&&A===(h==null?void 0:h.data)&&r.select===me(this,Hv))A=me(this,Xp);else try{it(this,Hv,r.select),A=r.select(A),A=VR(c==null?void 0:c.data,A,r),it(this,Xp,A),it(this,yc,null)}catch(Q){it(this,yc,Q)}me(this,yc)&&(k=me(this,yc),A=me(this,Xp),_=Date.now(),R="error");const D=T.fetchStatus==="fetching",N=R==="pending",$=R==="error",V=N&&D,W=A!==void 0,K={status:R,fetchStatus:T.fetchStatus,isPending:N,isSuccess:R==="success",isError:$,isInitialLoading:V,isLoading:V,data:A,dataUpdatedAt:T.dataUpdatedAt,error:k,errorUpdatedAt:_,failureCount:T.fetchFailureCount,failureReason:T.fetchFailureReason,errorUpdateCount:T.errorUpdateCount,isFetched:T.dataUpdateCount>0||T.errorUpdateCount>0,isFetchedAfterMount:T.dataUpdateCount>v.dataUpdateCount||T.errorUpdateCount>v.errorUpdateCount,isFetching:D,isRefetching:D&&!N,isLoadingError:$&&!W,isPaused:T.fetchStatus==="paused",isPlaceholderData:E,isRefetchError:$&&W,isStale:dP(t,r),refetch:this.refetch,promise:me(this,vc),isEnabled:Po(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const Q=re=>{K.status==="error"?re.reject(K.error):K.data!==void 0&&re.resolve(K.data)},fe=()=>{const re=it(this,vc,K.promise=GR());Q(re)},O=me(this,vc);switch(O.status){case"pending":t.queryHash===o.queryHash&&Q(O);break;case"fulfilled":(K.status==="error"||K.data!==O.value)&&fe();break;case"rejected":(K.status!=="error"||K.error!==O.reason)&&fe();break}}return K}updateResult(){const t=me(this,ls),r=this.createResult(me(this,hn),this.options);if(it(this,lh,me(this,hn).state),it(this,Yp,this.options),me(this,lh).data!==void 0&&it(this,Qp,me(this,hn)),Ew(r,t))return;it(this,ls,r);const o=()=>{if(!t)return!0;const{notifyOnChangeProps:l}=this.options,c=typeof l=="function"?l():l;if(c==="all"||!c&&!me(this,Jp).size)return!0;const h=new Set(c??me(this,Jp));return this.options.throwOnError&&h.add("error"),Object.keys(me(this,ls)).some(d=>{const m=d;return me(this,ls)[m]!==t[m]&&h.has(m)})};Zt(this,In,HH).call(this,{listeners:o()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Zt(this,In,zR).call(this)}},_s=new WeakMap,hn=new WeakMap,Gv=new WeakMap,ls=new WeakMap,lh=new WeakMap,Yp=new WeakMap,vc=new WeakMap,yc=new WeakMap,Hv=new WeakMap,Xp=new WeakMap,Qp=new WeakMap,uh=new WeakMap,ch=new WeakMap,xc=new WeakMap,Jp=new WeakMap,In=new WeakSet,O0=function(t){Zt(this,In,XR).call(this);let r=me(this,hn).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(cs)),r},HR=function(){Zt(this,In,WR).call(this);const t=Dc(this.options.staleTime,me(this,hn));if(wh||me(this,ls).isStale||!BR(t))return;const o=NH(me(this,ls).dataUpdatedAt,t)+1;it(this,uh,setTimeout(()=>{me(this,ls).isStale||this.updateResult()},o))},qR=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(me(this,hn)):this.options.refetchInterval)??!1},KR=function(t){Zt(this,In,YR).call(this),it(this,xc,t),!(wh||Po(this.options.enabled,me(this,hn))===!1||!BR(me(this,xc))||me(this,xc)===0)&&it(this,ch,setInterval(()=>{(this.options.refetchIntervalInBackground||cP.isFocused())&&Zt(this,In,O0).call(this)},me(this,xc)))},zR=function(){Zt(this,In,HR).call(this),Zt(this,In,KR).call(this,Zt(this,In,qR).call(this))},WR=function(){me(this,uh)&&(clearTimeout(me(this,uh)),it(this,uh,void 0))},YR=function(){me(this,ch)&&(clearInterval(me(this,ch)),it(this,ch,void 0))},XR=function(){const t=me(this,_s).getQueryCache().build(me(this,_s),this.options);if(t===me(this,hn))return;const r=me(this,hn);it(this,hn,t),it(this,Gv,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},HH=function(t){si.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(me(this,ls))}),me(this,_s).getQueryCache().notify({query:me(this,hn),type:"observerResultsUpdated"})})},q9);function epe(i,t){return Po(t.enabled,i)!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&t.retryOnMount===!1)}function pB(i,t){return epe(i,t)||i.state.data!==void 0&&QR(i,t,t.refetchOnMount)}function QR(i,t,r){if(Po(t.enabled,i)!==!1&&Dc(t.staleTime,i)!=="static"){const o=typeof r=="function"?r(i):r;return o==="always"||o!==!1&&dP(i,t)}return!1}function mB(i,t,r,o){return(i!==t||Po(o.enabled,i)===!1)&&(!r.suspense||i.state.status!=="error")&&dP(i,r)}function dP(i,t){return Po(t.enabled,i)!==!1&&i.isStaleByTime(Dc(t.staleTime,i))}function tpe(i,t){return!Ew(i.getCurrentResult(),t)}var Tc,Sc,Rs,tu,au,jS,JR,K9,npe=(K9=class extends Em{constructor(r,o){super();Et(this,au);Et(this,Tc);Et(this,Sc);Et(this,Rs);Et(this,tu);it(this,Tc,r),this.setOptions(o),this.bindMethods(),Zt(this,au,jS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var l;const o=this.options;this.options=me(this,Tc).defaultMutationOptions(r),Ew(this.options,o)||me(this,Tc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:me(this,Rs),observer:this}),o!=null&&o.mutationKey&&this.options.mutationKey&&Eh(o.mutationKey)!==Eh(this.options.mutationKey)?this.reset():((l=me(this,Rs))==null?void 0:l.state.status)==="pending"&&me(this,Rs).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=me(this,Rs))==null||r.removeObserver(this)}onMutationUpdate(r){Zt(this,au,jS).call(this),Zt(this,au,JR).call(this,r)}getCurrentResult(){return me(this,Sc)}reset(){var r;(r=me(this,Rs))==null||r.removeObserver(this),it(this,Rs,void 0),Zt(this,au,jS).call(this),Zt(this,au,JR).call(this)}mutate(r,o){var l;return it(this,tu,o),(l=me(this,Rs))==null||l.removeObserver(this),it(this,Rs,me(this,Tc).getMutationCache().build(me(this,Tc),this.options)),me(this,Rs).addObserver(this),me(this,Rs).execute(r)}},Tc=new WeakMap,Sc=new WeakMap,Rs=new WeakMap,tu=new WeakMap,au=new WeakSet,jS=function(){var o;const r=((o=me(this,Rs))==null?void 0:o.state)??GH();it(this,Sc,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},JR=function(r){si.batch(()=>{var o,l,c,h,d,m,v,x;if(me(this,tu)&&this.hasListeners()){const T=me(this,Sc).variables,E=me(this,Sc).context;(r==null?void 0:r.type)==="success"?((l=(o=me(this,tu)).onSuccess)==null||l.call(o,r.data,T,E),(h=(c=me(this,tu)).onSettled)==null||h.call(c,r.data,null,T,E)):(r==null?void 0:r.type)==="error"&&((m=(d=me(this,tu)).onError)==null||m.call(d,r.error,T,E),(x=(v=me(this,tu)).onSettled)==null||x.call(v,void 0,r.error,T,E))}this.listeners.forEach(T=>{T(me(this,Sc))})})},K9),qH=M.createContext(void 0),ry=i=>{const t=M.useContext(qH);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},rpe=({client:i,children:t})=>(M.useEffect(()=>(i.mount(),()=>{i.unmount()}),[i]),S.jsx(qH.Provider,{value:i,children:t})),KH=M.createContext(!1),ipe=()=>M.useContext(KH);KH.Provider;function spe(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var ope=M.createContext(spe()),ape=()=>M.useContext(ope),lpe=(i,t)=>{(i.suspense||i.throwOnError||i.experimental_prefetchInRender)&&(t.isReset()||(i.retryOnMount=!1))},upe=i=>{M.useEffect(()=>{i.clearReset()},[i])},cpe=({result:i,errorResetBoundary:t,throwOnError:r,query:o,suspense:l})=>i.isError&&!t.isReset()&&!i.isFetching&&o&&(l&&i.data===void 0||jH(r,[i.error,o])),dpe=i=>{if(i.suspense){const t=o=>o==="static"?o:Math.max(o??1e3,1e3),r=i.staleTime;i.staleTime=typeof r=="function"?(...o)=>t(r(...o)):t(r),typeof i.gcTime=="number"&&(i.gcTime=Math.max(i.gcTime,1e3))}},hpe=(i,t)=>i.isLoading&&i.isFetching&&!t,fpe=(i,t)=>(i==null?void 0:i.suspense)&&t.isPending,gB=(i,t,r)=>t.fetchOptimistic(i).catch(()=>{r.clearReset()});function ppe(i,t,r){var T,E,A,k,_;const o=ipe(),l=ape(),c=ry(),h=c.defaultQueryOptions(i);(E=(T=c.getDefaultOptions().queries)==null?void 0:T._experimental_beforeQuery)==null||E.call(T,h),h._optimisticResults=o?"isRestoring":"optimistic",dpe(h),lpe(h,l),upe(l);const d=!c.getQueryCache().get(h.queryHash),[m]=M.useState(()=>new t(c,h)),v=m.getOptimisticResult(h),x=!o&&i.subscribed!==!1;if(M.useSyncExternalStore(M.useCallback(R=>{const P=x?m.subscribe(si.batchCalls(R)):cs;return m.updateResult(),P},[m,x]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),M.useEffect(()=>{m.setOptions(h)},[h,m]),fpe(h,v))throw gB(h,m,l);if(cpe({result:v,errorResetBoundary:l,throwOnError:h.throwOnError,query:c.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw v.error;if((k=(A=c.getDefaultOptions().queries)==null?void 0:A._experimental_afterQuery)==null||k.call(A,h,v),h.experimental_prefetchInRender&&!wh&&hpe(v,o)){const R=d?gB(h,m,l):(_=c.getQueryCache().get(h.queryHash))==null?void 0:_.promise;R==null||R.catch(cs).finally(()=>{m.updateResult()})}return h.notifyOnChangeProps?v:m.trackResult(v)}function zH(i,t){return ppe(i,Zfe)}function hP(i,t){const r=ry(),[o]=M.useState(()=>new npe(r,i));M.useEffect(()=>{o.setOptions(i)},[o,i]);const l=M.useSyncExternalStore(M.useCallback(h=>o.subscribe(si.batchCalls(h)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),c=M.useCallback((h,d)=>{o.mutate(h,d).catch(cs)},[o]);if(l.error&&jH(o.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:c,mutateAsync:l.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ev(){return Ev=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},Ev.apply(this,arguments)}var bc;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(bc||(bc={}));const vB="popstate";function mpe(i){i===void 0&&(i={});function t(o,l){let{pathname:c,search:h,hash:d}=o.location;return ZR("",{pathname:c,search:h,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(o,l){return typeof l=="string"?l:Aw(l)}return vpe(t,r,null,i)}function Hr(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function WH(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gpe(){return Math.random().toString(36).substr(2,8)}function yB(i,t){return{usr:i.state,key:i.key,idx:t}}function ZR(i,t,r,o){return r===void 0&&(r=null),Ev({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof t=="string"?bm(t):t,{state:r,key:t&&t.key||o||gpe()})}function Aw(i){let{pathname:t="/",search:r="",hash:o=""}=i;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function bm(i){let t={};if(i){let r=i.indexOf("#");r>=0&&(t.hash=i.substr(r),i=i.substr(0,r));let o=i.indexOf("?");o>=0&&(t.search=i.substr(o),i=i.substr(0,o)),i&&(t.pathname=i)}return t}function vpe(i,t,r,o){o===void 0&&(o={});let{window:l=document.defaultView,v5Compat:c=!1}=o,h=l.history,d=bc.Pop,m=null,v=x();v==null&&(v=0,h.replaceState(Ev({},h.state,{idx:v}),""));function x(){return(h.state||{idx:null}).idx}function T(){d=bc.Pop;let R=x(),P=R==null?null:R-v;v=R,m&&m({action:d,location:_.location,delta:P})}function E(R,P){d=bc.Push;let D=ZR(_.location,R,P);v=x()+1;let N=yB(D,v),$=_.createHref(D);try{h.pushState(N,"",$)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;l.location.assign($)}c&&m&&m({action:d,location:_.location,delta:1})}function A(R,P){d=bc.Replace;let D=ZR(_.location,R,P);v=x();let N=yB(D,v),$=_.createHref(D);h.replaceState(N,"",$),c&&m&&m({action:d,location:_.location,delta:0})}function k(R){let P=l.location.origin!=="null"?l.location.origin:l.location.href,D=typeof R=="string"?R:Aw(R);return D=D.replace(/ $/,"%20"),Hr(P,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,P)}let _={get action(){return d},get location(){return i(l,h)},listen(R){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(vB,T),m=R,()=>{l.removeEventListener(vB,T),m=null}},createHref(R){return t(l,R)},createURL:k,encodeLocation(R){let P=k(R);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:E,replace:A,go(R){return h.go(R)}};return _}var xB;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(xB||(xB={}));function ype(i,t,r){return r===void 0&&(r="/"),xpe(i,t,r)}function xpe(i,t,r,o){let l=typeof t=="string"?bm(t):t,c=fP(l.pathname||"/",r);if(c==null)return null;let h=YH(i);Tpe(h);let d=null;for(let m=0;d==null&&m<h.length;++m){let v=Ppe(c);d=_pe(h[m],v)}return d}function YH(i,t,r,o){t===void 0&&(t=[]),r===void 0&&(r=[]),o===void 0&&(o="");let l=(c,h,d)=>{let m={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};m.relativePath.startsWith("/")&&(Hr(m.relativePath.startsWith(o),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(o.length));let v=Nc([o,m.relativePath]),x=r.concat(m);c.children&&c.children.length>0&&(Hr(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),YH(c.children,t,x,v)),!(c.path==null&&!c.index)&&t.push({path:v,score:Cpe(v,c.index),routesMeta:x})};return i.forEach((c,h)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))l(c,h);else for(let m of XH(c.path))l(c,h,m)}),t}function XH(i){let t=i.split("/");if(t.length===0)return[];let[r,...o]=t,l=r.endsWith("?"),c=r.replace(/\?$/,"");if(o.length===0)return l?[c,""]:[c];let h=XH(o.join("/")),d=[];return d.push(...h.map(m=>m===""?c:[c,m].join("/"))),l&&d.push(...h),d.map(m=>i.startsWith("/")&&m===""?"/":m)}function Tpe(i){i.sort((t,r)=>t.score!==r.score?r.score-t.score:kpe(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const Spe=/^:[\w-]+$/,wpe=3,Epe=2,bpe=1,Ape=10,Ipe=-2,TB=i=>i==="*";function Cpe(i,t){let r=i.split("/"),o=r.length;return r.some(TB)&&(o+=Ipe),t&&(o+=Epe),r.filter(l=>!TB(l)).reduce((l,c)=>l+(Spe.test(c)?wpe:c===""?bpe:Ape),o)}function kpe(i,t){return i.length===t.length&&i.slice(0,-1).every((o,l)=>o===t[l])?i[i.length-1]-t[t.length-1]:0}function _pe(i,t,r){let{routesMeta:o}=i,l={},c="/",h=[];for(let d=0;d<o.length;++d){let m=o[d],v=d===o.length-1,x=c==="/"?t:t.slice(c.length)||"/",T=Rpe({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},x),E=m.route;if(!T)return null;Object.assign(l,T.params),h.push({params:l,pathname:Nc([c,T.pathname]),pathnameBase:Ope(Nc([c,T.pathnameBase])),route:E}),T.pathnameBase!=="/"&&(c=Nc([c,T.pathnameBase]))}return h}function Rpe(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[r,o]=Lpe(i.path,i.caseSensitive,i.end),l=t.match(r);if(!l)return null;let c=l[0],h=c.replace(/(.)\/+$/,"$1"),d=l.slice(1);return{params:o.reduce((v,x,T)=>{let{paramName:E,isOptional:A}=x;if(E==="*"){let _=d[T]||"";h=c.slice(0,c.length-_.length).replace(/(.)\/+$/,"$1")}const k=d[T];return A&&!k?v[E]=void 0:v[E]=(k||"").replace(/%2F/g,"/"),v},{}),pathname:c,pathnameBase:h,pattern:i}}function Lpe(i,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),WH(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let o=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,m)=>(o.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(o.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),o]}function Ppe(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return WH(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),i}}function fP(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=i.charAt(r);return o&&o!=="/"?null:i.slice(r)||"/"}function Dpe(i,t){t===void 0&&(t="/");let{pathname:r,search:o="",hash:l=""}=typeof i=="string"?bm(i):i;return{pathname:r?r.startsWith("/")?r:Npe(r,t):t,search:jpe(o),hash:Upe(l)}}function Npe(i,t){let r=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Kk(i,t,r,o){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mpe(i){return i.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function QH(i,t){let r=Mpe(i);return t?r.map((o,l)=>l===r.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function JH(i,t,r,o){o===void 0&&(o=!1);let l;typeof i=="string"?l=bm(i):(l=Ev({},i),Hr(!l.pathname||!l.pathname.includes("?"),Kk("?","pathname","search",l)),Hr(!l.pathname||!l.pathname.includes("#"),Kk("#","pathname","hash",l)),Hr(!l.search||!l.search.includes("#"),Kk("#","search","hash",l)));let c=i===""||l.pathname==="",h=c?"/":l.pathname,d;if(h==null)d=r;else{let T=t.length-1;if(!o&&h.startsWith("..")){let E=h.split("/");for(;E[0]==="..";)E.shift(),T-=1;l.pathname=E.join("/")}d=T>=0?t[T]:"/"}let m=Dpe(l,d),v=h&&h!=="/"&&h.endsWith("/"),x=(c||h===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(v||x)&&(m.pathname+="/"),m}const Nc=i=>i.join("/").replace(/\/\/+/g,"/"),Ope=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),jpe=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Upe=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Fpe(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const ZH=["post","put","patch","delete"];new Set(ZH);const Bpe=["get",...ZH];new Set(Bpe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bv(){return bv=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},bv.apply(this,arguments)}const pP=M.createContext(null),$pe=M.createContext(null),Ph=M.createContext(null),EE=M.createContext(null),Wc=M.createContext({outlet:null,matches:[],isDataRoute:!1}),eq=M.createContext(null);function Vpe(i,t){let{relative:r}=t===void 0?{}:t;iy()||Hr(!1);let{basename:o,navigator:l}=M.useContext(Ph),{hash:c,pathname:h,search:d}=nq(i,{relative:r}),m=h;return o!=="/"&&(m=h==="/"?o:Nc([o,h])),l.createHref({pathname:m,search:d,hash:c})}function iy(){return M.useContext(EE)!=null}function Yc(){return iy()||Hr(!1),M.useContext(EE).location}function tq(i){M.useContext(Ph).static||M.useLayoutEffect(i)}function Xc(){let{isDataRoute:i}=M.useContext(Wc);return i?tme():Gpe()}function Gpe(){iy()||Hr(!1);let i=M.useContext(pP),{basename:t,future:r,navigator:o}=M.useContext(Ph),{matches:l}=M.useContext(Wc),{pathname:c}=Yc(),h=JSON.stringify(QH(l,r.v7_relativeSplatPath)),d=M.useRef(!1);return tq(()=>{d.current=!0}),M.useCallback(function(v,x){if(x===void 0&&(x={}),!d.current)return;if(typeof v=="number"){o.go(v);return}let T=JH(v,JSON.parse(h),c,x.relative==="path");i==null&&t!=="/"&&(T.pathname=T.pathname==="/"?t:Nc([t,T.pathname])),(x.replace?o.replace:o.push)(T,x.state,x)},[t,o,h,c,i])}function sy(){let{matches:i}=M.useContext(Wc),t=i[i.length-1];return t?t.params:{}}function nq(i,t){let{relative:r}=t===void 0?{}:t,{future:o}=M.useContext(Ph),{matches:l}=M.useContext(Wc),{pathname:c}=Yc(),h=JSON.stringify(QH(l,o.v7_relativeSplatPath));return M.useMemo(()=>JH(i,JSON.parse(h),c,r==="path"),[i,h,c,r])}function Hpe(i,t){return qpe(i,t)}function qpe(i,t,r,o){iy()||Hr(!1);let{navigator:l}=M.useContext(Ph),{matches:c}=M.useContext(Wc),h=c[c.length-1],d=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let v=Yc(),x;if(t){var T;let R=typeof t=="string"?bm(t):t;m==="/"||(T=R.pathname)!=null&&T.startsWith(m)||Hr(!1),x=R}else x=v;let E=x.pathname||"/",A=E;if(m!=="/"){let R=m.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice(R.length).join("/")}let k=ype(i,{pathname:A}),_=Xpe(k&&k.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:Nc([m,l.encodeLocation?l.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?m:Nc([m,l.encodeLocation?l.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),c,r,o);return t&&_?M.createElement(EE.Provider,{value:{location:bv({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:bc.Pop}},_):_}function Kpe(){let i=eme(),t=Fpe(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),r=i instanceof Error?i.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),r?M.createElement("pre",{style:l},r):null,null)}const zpe=M.createElement(Kpe,null);class Wpe extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?M.createElement(Wc.Provider,{value:this.props.routeContext},M.createElement(eq.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ype(i){let{routeContext:t,match:r,children:o}=i,l=M.useContext(pP);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),M.createElement(Wc.Provider,{value:t},o)}function Xpe(i,t,r,o){var l;if(t===void 0&&(t=[]),r===void 0&&(r=null),o===void 0&&(o=null),i==null){var c;if(!r)return null;if(r.errors)i=r.matches;else if((c=o)!=null&&c.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)i=r.matches;else return null}let h=i,d=(l=r)==null?void 0:l.errors;if(d!=null){let x=h.findIndex(T=>T.route.id&&(d==null?void 0:d[T.route.id])!==void 0);x>=0||Hr(!1),h=h.slice(0,Math.min(h.length,x+1))}let m=!1,v=-1;if(r&&o&&o.v7_partialHydration)for(let x=0;x<h.length;x++){let T=h[x];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(v=x),T.route.id){let{loaderData:E,errors:A}=r,k=T.route.loader&&E[T.route.id]===void 0&&(!A||A[T.route.id]===void 0);if(T.route.lazy||k){m=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((x,T,E)=>{let A,k=!1,_=null,R=null;r&&(A=d&&T.route.id?d[T.route.id]:void 0,_=T.route.errorElement||zpe,m&&(v<0&&E===0?(nme("route-fallback"),k=!0,R=null):v===E&&(k=!0,R=T.route.hydrateFallbackElement||null)));let P=t.concat(h.slice(0,E+1)),D=()=>{let N;return A?N=_:k?N=R:T.route.Component?N=M.createElement(T.route.Component,null):T.route.element?N=T.route.element:N=x,M.createElement(Ype,{match:T,routeContext:{outlet:x,matches:P,isDataRoute:r!=null},children:N})};return r&&(T.route.ErrorBoundary||T.route.errorElement||E===0)?M.createElement(Wpe,{location:r.location,revalidation:r.revalidation,component:_,error:A,children:D(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):D()},null)}var rq=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(rq||{}),iq=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(iq||{});function Qpe(i){let t=M.useContext(pP);return t||Hr(!1),t}function Jpe(i){let t=M.useContext($pe);return t||Hr(!1),t}function Zpe(i){let t=M.useContext(Wc);return t||Hr(!1),t}function sq(i){let t=Zpe(),r=t.matches[t.matches.length-1];return r.route.id||Hr(!1),r.route.id}function eme(){var i;let t=M.useContext(eq),r=Jpe(),o=sq();return t!==void 0?t:(i=r.errors)==null?void 0:i[o]}function tme(){let{router:i}=Qpe(rq.UseNavigateStable),t=sq(iq.UseNavigateStable),r=M.useRef(!1);return tq(()=>{r.current=!0}),M.useCallback(function(l,c){c===void 0&&(c={}),r.current&&(typeof l=="number"?i.navigate(l):i.navigate(l,bv({fromRouteId:t},c)))},[i,t])}const SB={};function nme(i,t,r){SB[i]||(SB[i]=!0)}function rme(i,t){i==null||i.v7_startTransition,i==null||i.v7_relativeSplatPath}function pi(i){Hr(!1)}function ime(i){let{basename:t="/",children:r=null,location:o,navigationType:l=bc.Pop,navigator:c,static:h=!1,future:d}=i;iy()&&Hr(!1);let m=t.replace(/^\/*/,"/"),v=M.useMemo(()=>({basename:m,navigator:c,static:h,future:bv({v7_relativeSplatPath:!1},d)}),[m,d,c,h]);typeof o=="string"&&(o=bm(o));let{pathname:x="/",search:T="",hash:E="",state:A=null,key:k="default"}=o,_=M.useMemo(()=>{let R=fP(x,m);return R==null?null:{location:{pathname:R,search:T,hash:E,state:A,key:k},navigationType:l}},[m,x,T,E,A,k,l]);return _==null?null:M.createElement(Ph.Provider,{value:v},M.createElement(EE.Provider,{children:r,value:_}))}function sme(i){let{children:t,location:r}=i;return Hpe(eL(t),r)}new Promise(()=>{});function eL(i,t){t===void 0&&(t=[]);let r=[];return M.Children.forEach(i,(o,l)=>{if(!M.isValidElement(o))return;let c=[...t,l];if(o.type===M.Fragment){r.push.apply(r,eL(o.props.children,c));return}o.type!==pi&&Hr(!1),!o.props.index||!o.props.children||Hr(!1);let h={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=eL(o.props.children,c)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tL(){return tL=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},tL.apply(this,arguments)}function ome(i,t){if(i==null)return{};var r={},o=Object.keys(i),l,c;for(c=0;c<o.length;c++)l=o[c],!(t.indexOf(l)>=0)&&(r[l]=i[l]);return r}function ame(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function lme(i,t){return i.button===0&&(!t||t==="_self")&&!ame(i)}function nL(i){return i===void 0&&(i=""),new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((t,r)=>{let o=i[r];return t.concat(Array.isArray(o)?o.map(l=>[r,l]):[[r,o]])},[]))}function ume(i,t){let r=nL(i);return t&&t.forEach((o,l)=>{r.has(l)||t.getAll(l).forEach(c=>{r.append(l,c)})}),r}const cme=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dme="6";try{window.__reactRouterVersion=dme}catch{}const hme="startTransition",wB=YL[hme];function fme(i){let{basename:t,children:r,future:o,window:l}=i,c=M.useRef();c.current==null&&(c.current=mpe({window:l,v5Compat:!0}));let h=c.current,[d,m]=M.useState({action:h.action,location:h.location}),{v7_startTransition:v}=o||{},x=M.useCallback(T=>{v&&wB?wB(()=>m(T)):m(T)},[m,v]);return M.useLayoutEffect(()=>h.listen(x),[h,x]),M.useEffect(()=>rme(o),[o]),M.createElement(ime,{basename:t,children:r,location:d.location,navigationType:d.action,navigator:h,future:o})}const pme=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mme=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,An=M.forwardRef(function(t,r){let{onClick:o,relative:l,reloadDocument:c,replace:h,state:d,target:m,to:v,preventScrollReset:x,viewTransition:T}=t,E=ome(t,cme),{basename:A}=M.useContext(Ph),k,_=!1;if(typeof v=="string"&&mme.test(v)&&(k=v,pme))try{let N=new URL(window.location.href),$=v.startsWith("//")?new URL(N.protocol+v):new URL(v),V=fP($.pathname,A);$.origin===N.origin&&V!=null?v=V+$.search+$.hash:_=!0}catch{}let R=Vpe(v,{relative:l}),P=gme(v,{replace:h,state:d,target:m,preventScrollReset:x,relative:l,viewTransition:T});function D(N){o&&o(N),N.defaultPrevented||P(N)}return M.createElement("a",tL({},E,{href:k||R,onClick:_||c?o:D,ref:r,target:m}))});var EB;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(EB||(EB={}));var bB;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(bB||(bB={}));function gme(i,t){let{target:r,replace:o,state:l,preventScrollReset:c,relative:h,viewTransition:d}=t===void 0?{}:t,m=Xc(),v=Yc(),x=nq(i,{relative:h});return M.useCallback(T=>{if(lme(T,r)){T.preventDefault();let E=o!==void 0?o:Aw(v)===Aw(x);m(i,{replace:E,state:l,preventScrollReset:c,relative:h,viewTransition:d})}},[v,m,x,o,l,r,i,c,h,d])}function oq(i){let t=M.useRef(nL(i)),r=M.useRef(!1),o=Yc(),l=M.useMemo(()=>ume(o.search,r.current?null:t.current),[o.search]),c=Xc(),h=M.useCallback((d,m)=>{const v=nL(typeof d=="function"?d(l):d);r.current=!0,c("?"+v,m)},[c,l]);return[l,h]}function vme({children:i,...t}){return S.jsx(xde,{...t,children:i})}const AB="/assets/gcash-qr-BrWfMu_x.jpg";var zk="focusScope.autoFocusOnMount",Wk="focusScope.autoFocusOnUnmount",IB={bubbles:!1,cancelable:!0},yme="FocusScope",bE=M.forwardRef((i,t)=>{const{loop:r=!1,trapped:o=!1,onMountAutoFocus:l,onUnmountAutoFocus:c,...h}=i,[d,m]=M.useState(null),v=Gr(l),x=Gr(c),T=M.useRef(null),E=Kt(t,_=>m(_)),A=M.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;M.useEffect(()=>{if(o){let _=function(N){if(A.paused||!d)return;const $=N.target;d.contains($)?T.current=$:rc(T.current,{select:!0})},R=function(N){if(A.paused||!d)return;const $=N.relatedTarget;$!==null&&(d.contains($)||rc(T.current,{select:!0}))},P=function(N){if(document.activeElement===document.body)for(const V of N)V.removedNodes.length>0&&rc(d)};document.addEventListener("focusin",_),document.addEventListener("focusout",R);const D=new MutationObserver(P);return d&&D.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",R),D.disconnect()}}},[o,d,A.paused]),M.useEffect(()=>{if(d){kB.add(A);const _=document.activeElement;if(!d.contains(_)){const P=new CustomEvent(zk,IB);d.addEventListener(zk,v),d.dispatchEvent(P),P.defaultPrevented||(xme(bme(aq(d)),{select:!0}),document.activeElement===_&&rc(d))}return()=>{d.removeEventListener(zk,v),setTimeout(()=>{const P=new CustomEvent(Wk,IB);d.addEventListener(Wk,x),d.dispatchEvent(P),P.defaultPrevented||rc(_??document.body,{select:!0}),d.removeEventListener(Wk,x),kB.remove(A)},0)}}},[d,v,x,A]);const k=M.useCallback(_=>{if(!r&&!o||A.paused)return;const R=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,P=document.activeElement;if(R&&P){const D=_.currentTarget,[N,$]=Tme(D);N&&$?!_.shiftKey&&P===$?(_.preventDefault(),r&&rc(N,{select:!0})):_.shiftKey&&P===N&&(_.preventDefault(),r&&rc($,{select:!0})):P===D&&_.preventDefault()}},[r,o,A.paused]);return S.jsx(xt.div,{tabIndex:-1,...h,ref:E,onKeyDown:k})});bE.displayName=yme;function xme(i,{select:t=!1}={}){const r=document.activeElement;for(const o of i)if(rc(o,{select:t}),document.activeElement!==r)return}function Tme(i){const t=aq(i),r=CB(t,i),o=CB(t.reverse(),i);return[r,o]}function aq(i){const t=[],r=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const l=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||l?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function CB(i,t){for(const r of i)if(!Sme(r,{upTo:t}))return r}function Sme(i,{upTo:t}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(t!==void 0&&i===t)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function wme(i){return i instanceof HTMLInputElement&&"select"in i}function rc(i,{select:t=!1}={}){if(i&&i.focus){const r=document.activeElement;i.focus({preventScroll:!0}),i!==r&&wme(i)&&t&&i.select()}}var kB=Eme();function Eme(){let i=[];return{add(t){const r=i[0];t!==r&&(r==null||r.pause()),i=_B(i,t),i.unshift(t)},remove(t){var r;i=_B(i,t),(r=i[0])==null||r.resume()}}}function _B(i,t){const r=[...i],o=r.indexOf(t);return o!==-1&&r.splice(o,1),r}function bme(i){return i.filter(t=>t.tagName!=="A")}var Yk=0;function mP(){M.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??RB()),document.body.insertAdjacentElement("beforeend",i[1]??RB()),Yk++,()=>{Yk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Yk--}},[])}function RB(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var Ya=function(){return Ya=Object.assign||function(t){for(var r,o=1,l=arguments.length;o<l;o++){r=arguments[o];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},Ya.apply(this,arguments)};function Am(i,t){var r={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&t.indexOf(o)<0&&(r[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(r[o[l]]=i[o[l]]);return r}function Ame(i,t,r,o){function l(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function d(x){try{v(o.next(x))}catch(T){h(T)}}function m(x){try{v(o.throw(x))}catch(T){h(T)}}function v(x){x.done?c(x.value):l(x.value).then(d,m)}v((o=o.apply(i,t||[])).next())})}function Ime(i,t,r){if(r||arguments.length===2)for(var o=0,l=t.length,c;o<l;o++)(c||!(o in t))&&(c||(c=Array.prototype.slice.call(t,0,o)),c[o]=t[o]);return i.concat(c||Array.prototype.slice.call(t))}var US="right-scroll-bar-position",FS="width-before-scroll-bar",Cme="with-scroll-bars-hidden",kme="--removed-body-scroll-bar-size";function Xk(i,t){return typeof i=="function"?i(t):i&&(i.current=t),i}function _me(i,t){var r=M.useState(function(){return{value:i,callback:t,facade:{get current(){return r.value},set current(o){var l=r.value;l!==o&&(r.value=o,r.callback(o,l))}}}})[0];return r.callback=t,r.facade}var Rme=typeof window<"u"?M.useLayoutEffect:M.useEffect,LB=new WeakMap;function Lme(i,t){var r=_me(null,function(o){return i.forEach(function(l){return Xk(l,o)})});return Rme(function(){var o=LB.get(r);if(o){var l=new Set(o),c=new Set(i),h=r.current;l.forEach(function(d){c.has(d)||Xk(d,null)}),c.forEach(function(d){l.has(d)||Xk(d,h)})}LB.set(r,i)},[i]),r}function Pme(i){return i}function Dme(i,t){t===void 0&&(t=Pme);var r=[],o=!1,l={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:i},useMedium:function(c){var h=t(c,o);return r.push(h),function(){r=r.filter(function(d){return d!==h})}},assignSyncMedium:function(c){for(o=!0;r.length;){var h=r;r=[],h.forEach(c)}r={push:function(d){return c(d)},filter:function(){return r}}},assignMedium:function(c){o=!0;var h=[];if(r.length){var d=r;r=[],d.forEach(c),h=r}var m=function(){var x=h;h=[],x.forEach(c)},v=function(){return Promise.resolve().then(m)};v(),r={push:function(x){h.push(x),v()},filter:function(x){return h=h.filter(x),r}}}};return l}function Nme(i){i===void 0&&(i={});var t=Dme(null);return t.options=Ya({async:!0,ssr:!1},i),t}var lq=function(i){var t=i.sideCar,r=Am(i,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return M.createElement(o,Ya({},r))};lq.isSideCarExport=!0;function Mme(i,t){return i.useMedium(t),lq}var uq=Nme(),Qk=function(){},AE=M.forwardRef(function(i,t){var r=M.useRef(null),o=M.useState({onScrollCapture:Qk,onWheelCapture:Qk,onTouchMoveCapture:Qk}),l=o[0],c=o[1],h=i.forwardProps,d=i.children,m=i.className,v=i.removeScrollBar,x=i.enabled,T=i.shards,E=i.sideCar,A=i.noRelative,k=i.noIsolation,_=i.inert,R=i.allowPinchZoom,P=i.as,D=P===void 0?"div":P,N=i.gapMode,$=Am(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),V=E,W=Lme([r,t]),C=Ya(Ya({},$),l);return M.createElement(M.Fragment,null,x&&M.createElement(V,{sideCar:uq,removeScrollBar:v,shards:T,noRelative:A,noIsolation:k,inert:_,setCallbacks:c,allowPinchZoom:!!R,lockRef:r,gapMode:N}),h?M.cloneElement(M.Children.only(d),Ya(Ya({},C),{ref:W})):M.createElement(D,Ya({},C,{className:m,ref:W}),d))});AE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};AE.classNames={fullWidth:FS,zeroRight:US};var Ome=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jme(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var t=Ome();return t&&i.setAttribute("nonce",t),i}function Ume(i,t){i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}function Fme(i){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(i)}var Bme=function(){var i=0,t=null;return{add:function(r){i==0&&(t=jme())&&(Ume(t,r),Fme(t)),i++},remove:function(){i--,!i&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$me=function(){var i=Bme();return function(t,r){M.useEffect(function(){return i.add(t),function(){i.remove()}},[t&&r])}},cq=function(){var i=$me(),t=function(r){var o=r.styles,l=r.dynamic;return i(o,l),null};return t},Vme={left:0,top:0,right:0,gap:0},Jk=function(i){return parseInt(i||"",10)||0},Gme=function(i){var t=window.getComputedStyle(document.body),r=t[i==="padding"?"paddingLeft":"marginLeft"],o=t[i==="padding"?"paddingTop":"marginTop"],l=t[i==="padding"?"paddingRight":"marginRight"];return[Jk(r),Jk(o),Jk(l)]},Hme=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return Vme;var t=Gme(i),r=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-r+t[2]-t[0])}},qme=cq(),Np="data-scroll-locked",Kme=function(i,t,r,o){var l=i.left,c=i.top,h=i.right,d=i.gap;return r===void 0&&(r="margin"),`
  .`.concat(Cme,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(d,"px ").concat(o,`;
  }
  body[`).concat(Np,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(o,";"),r==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(o,`;
    `),r==="padding"&&"padding-right: ".concat(d,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(US,` {
    right: `).concat(d,"px ").concat(o,`;
  }
  
  .`).concat(FS,` {
    margin-right: `).concat(d,"px ").concat(o,`;
  }
  
  .`).concat(US," .").concat(US,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(FS," .").concat(FS,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(Np,`] {
    `).concat(kme,": ").concat(d,`px;
  }
`)},PB=function(){var i=parseInt(document.body.getAttribute(Np)||"0",10);return isFinite(i)?i:0},zme=function(){M.useEffect(function(){return document.body.setAttribute(Np,(PB()+1).toString()),function(){var i=PB()-1;i<=0?document.body.removeAttribute(Np):document.body.setAttribute(Np,i.toString())}},[])},Wme=function(i){var t=i.noRelative,r=i.noImportant,o=i.gapMode,l=o===void 0?"margin":o;zme();var c=M.useMemo(function(){return Hme(l)},[l]);return M.createElement(qme,{styles:Kme(c,!t,l,r?"":"!important")})},rL=!1;if(typeof window<"u")try{var ZT=Object.defineProperty({},"passive",{get:function(){return rL=!0,!0}});window.addEventListener("test",ZT,ZT),window.removeEventListener("test",ZT,ZT)}catch{rL=!1}var Kf=rL?{passive:!1}:!1,Yme=function(i){return i.tagName==="TEXTAREA"},dq=function(i,t){if(!(i instanceof Element))return!1;var r=window.getComputedStyle(i);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Yme(i)&&r[t]==="visible")},Xme=function(i){return dq(i,"overflowY")},Qme=function(i){return dq(i,"overflowX")},DB=function(i,t){var r=t.ownerDocument,o=t;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var l=hq(i,o);if(l){var c=fq(i,o),h=c[1],d=c[2];if(h>d)return!0}o=o.parentNode}while(o&&o!==r.body);return!1},Jme=function(i){var t=i.scrollTop,r=i.scrollHeight,o=i.clientHeight;return[t,r,o]},Zme=function(i){var t=i.scrollLeft,r=i.scrollWidth,o=i.clientWidth;return[t,r,o]},hq=function(i,t){return i==="v"?Xme(t):Qme(t)},fq=function(i,t){return i==="v"?Jme(t):Zme(t)},ege=function(i,t){return i==="h"&&t==="rtl"?-1:1},tge=function(i,t,r,o,l){var c=ege(i,window.getComputedStyle(t).direction),h=c*o,d=r.target,m=t.contains(d),v=!1,x=h>0,T=0,E=0;do{if(!d)break;var A=fq(i,d),k=A[0],_=A[1],R=A[2],P=_-R-c*k;(k||P)&&hq(i,d)&&(T+=P,E+=k);var D=d.parentNode;d=D&&D.nodeType===Node.DOCUMENT_FRAGMENT_NODE?D.host:D}while(!m&&d!==document.body||m&&(t.contains(d)||t===d));return(x&&Math.abs(T)<1||!x&&Math.abs(E)<1)&&(v=!0),v},eS=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},NB=function(i){return[i.deltaX,i.deltaY]},MB=function(i){return i&&"current"in i?i.current:i},nge=function(i,t){return i[0]===t[0]&&i[1]===t[1]},rge=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},ige=0,zf=[];function sge(i){var t=M.useRef([]),r=M.useRef([0,0]),o=M.useRef(),l=M.useState(ige++)[0],c=M.useState(cq)[0],h=M.useRef(i);M.useEffect(function(){h.current=i},[i]),M.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(l));var _=Ime([i.lockRef.current],(i.shards||[]).map(MB),!0).filter(Boolean);return _.forEach(function(R){return R.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),_.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(l))})}}},[i.inert,i.lockRef.current,i.shards]);var d=M.useCallback(function(_,R){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!h.current.allowPinchZoom;var P=eS(_),D=r.current,N="deltaX"in _?_.deltaX:D[0]-P[0],$="deltaY"in _?_.deltaY:D[1]-P[1],V,W=_.target,C=Math.abs(N)>Math.abs($)?"h":"v";if("touches"in _&&C==="h"&&W.type==="range")return!1;var K=DB(C,W);if(!K)return!0;if(K?V=C:(V=C==="v"?"h":"v",K=DB(C,W)),!K)return!1;if(!o.current&&"changedTouches"in _&&(N||$)&&(o.current=V),!V)return!0;var ee=o.current||V;return tge(ee,R,_,ee==="h"?N:$)},[]),m=M.useCallback(function(_){var R=_;if(!(!zf.length||zf[zf.length-1]!==c)){var P="deltaY"in R?NB(R):eS(R),D=t.current.filter(function(V){return V.name===R.type&&(V.target===R.target||R.target===V.shadowParent)&&nge(V.delta,P)})[0];if(D&&D.should){R.cancelable&&R.preventDefault();return}if(!D){var N=(h.current.shards||[]).map(MB).filter(Boolean).filter(function(V){return V.contains(R.target)}),$=N.length>0?d(R,N[0]):!h.current.noIsolation;$&&R.cancelable&&R.preventDefault()}}},[]),v=M.useCallback(function(_,R,P,D){var N={name:_,delta:R,target:P,should:D,shadowParent:oge(P)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function($){return $!==N})},1)},[]),x=M.useCallback(function(_){r.current=eS(_),o.current=void 0},[]),T=M.useCallback(function(_){v(_.type,NB(_),_.target,d(_,i.lockRef.current))},[]),E=M.useCallback(function(_){v(_.type,eS(_),_.target,d(_,i.lockRef.current))},[]);M.useEffect(function(){return zf.push(c),i.setCallbacks({onScrollCapture:T,onWheelCapture:T,onTouchMoveCapture:E}),document.addEventListener("wheel",m,Kf),document.addEventListener("touchmove",m,Kf),document.addEventListener("touchstart",x,Kf),function(){zf=zf.filter(function(_){return _!==c}),document.removeEventListener("wheel",m,Kf),document.removeEventListener("touchmove",m,Kf),document.removeEventListener("touchstart",x,Kf)}},[]);var A=i.removeScrollBar,k=i.inert;return M.createElement(M.Fragment,null,k?M.createElement(c,{styles:rge(l)}):null,A?M.createElement(Wme,{noRelative:i.noRelative,gapMode:i.gapMode}):null)}function oge(i){for(var t=null;i!==null;)i instanceof ShadowRoot&&(t=i.host,i=i.host),i=i.parentNode;return t}const age=Mme(uq,sge);var IE=M.forwardRef(function(i,t){return M.createElement(AE,Ya({},i,{ref:t,sideCar:age}))});IE.classNames=AE.classNames;var lge=function(i){if(typeof document>"u")return null;var t=Array.isArray(i)?i[0]:i;return t.ownerDocument.body},Wf=new WeakMap,tS=new WeakMap,nS={},Zk=0,pq=function(i){return i&&(i.host||pq(i.parentNode))},uge=function(i,t){return t.map(function(r){if(i.contains(r))return r;var o=pq(r);return o&&i.contains(o)?o:(console.error("aria-hidden",r,"in not contained inside",i,". Doing nothing"),null)}).filter(function(r){return!!r})},cge=function(i,t,r,o){var l=uge(t,Array.isArray(i)?i:[i]);nS[r]||(nS[r]=new WeakMap);var c=nS[r],h=[],d=new Set,m=new Set(l),v=function(T){!T||d.has(T)||(d.add(T),v(T.parentNode))};l.forEach(v);var x=function(T){!T||m.has(T)||Array.prototype.forEach.call(T.children,function(E){if(d.has(E))x(E);else try{var A=E.getAttribute(o),k=A!==null&&A!=="false",_=(Wf.get(E)||0)+1,R=(c.get(E)||0)+1;Wf.set(E,_),c.set(E,R),h.push(E),_===1&&k&&tS.set(E,!0),R===1&&E.setAttribute(r,"true"),k||E.setAttribute(o,"true")}catch(P){console.error("aria-hidden: cannot operate on ",E,P)}})};return x(t),d.clear(),Zk++,function(){h.forEach(function(T){var E=Wf.get(T)-1,A=c.get(T)-1;Wf.set(T,E),c.set(T,A),E||(tS.has(T)||T.removeAttribute(o),tS.delete(T)),A||T.removeAttribute(r)}),Zk--,Zk||(Wf=new WeakMap,Wf=new WeakMap,tS=new WeakMap,nS={})}},gP=function(i,t,r){r===void 0&&(r="data-aria-hidden");var o=Array.from(Array.isArray(i)?i:[i]),l=lge(i);return l?(o.push.apply(o,Array.from(l.querySelectorAll("[aria-live]"))),cge(o,l,r,"aria-hidden")):function(){return null}},CE="Dialog",[mq,gq]=Fs(CE),[dge,Sa]=mq(CE),vq=i=>{const{__scopeDialog:t,children:r,open:o,defaultOpen:l,onOpenChange:c,modal:h=!0}=i,d=M.useRef(null),m=M.useRef(null),[v,x]=hu({prop:o,defaultProp:l??!1,onChange:c,caller:CE});return S.jsx(dge,{scope:t,triggerRef:d,contentRef:m,contentId:ou(),titleId:ou(),descriptionId:ou(),open:v,onOpenChange:x,onOpenToggle:M.useCallback(()=>x(T=>!T),[x]),modal:h,children:r})};vq.displayName=CE;var yq="DialogTrigger",xq=M.forwardRef((i,t)=>{const{__scopeDialog:r,...o}=i,l=Sa(yq,r),c=Kt(t,l.triggerRef);return S.jsx(xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":xP(l.open),...o,ref:c,onClick:st(i.onClick,l.onOpenToggle)})});xq.displayName=yq;var vP="DialogPortal",[hge,Tq]=mq(vP,{forceMount:void 0}),Sq=i=>{const{__scopeDialog:t,forceMount:r,children:o,container:l}=i,c=Sa(vP,t);return S.jsx(hge,{scope:t,forceMount:r,children:M.Children.map(o,h=>S.jsx(yo,{present:r||c.open,children:S.jsx(Xv,{asChild:!0,container:l,children:h})}))})};Sq.displayName=vP;var Iw="DialogOverlay",wq=M.forwardRef((i,t)=>{const r=Tq(Iw,i.__scopeDialog),{forceMount:o=r.forceMount,...l}=i,c=Sa(Iw,i.__scopeDialog);return c.modal?S.jsx(yo,{present:o||c.open,children:S.jsx(pge,{...l,ref:t})}):null});wq.displayName=Iw;var fge=Th("DialogOverlay.RemoveScroll"),pge=M.forwardRef((i,t)=>{const{__scopeDialog:r,...o}=i,l=Sa(Iw,r);return S.jsx(IE,{as:fge,allowPinchZoom:!0,shards:[l.contentRef],children:S.jsx(xt.div,{"data-state":xP(l.open),...o,ref:t,style:{pointerEvents:"auto",...o.style}})})}),bh="DialogContent",Eq=M.forwardRef((i,t)=>{const r=Tq(bh,i.__scopeDialog),{forceMount:o=r.forceMount,...l}=i,c=Sa(bh,i.__scopeDialog);return S.jsx(yo,{present:o||c.open,children:c.modal?S.jsx(mge,{...l,ref:t}):S.jsx(gge,{...l,ref:t})})});Eq.displayName=bh;var mge=M.forwardRef((i,t)=>{const r=Sa(bh,i.__scopeDialog),o=M.useRef(null),l=Kt(t,r.contentRef,o);return M.useEffect(()=>{const c=o.current;if(c)return gP(c)},[]),S.jsx(bq,{...i,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:st(i.onCloseAutoFocus,c=>{var h;c.preventDefault(),(h=r.triggerRef.current)==null||h.focus()}),onPointerDownOutside:st(i.onPointerDownOutside,c=>{const h=c.detail.originalEvent,d=h.button===0&&h.ctrlKey===!0;(h.button===2||d)&&c.preventDefault()}),onFocusOutside:st(i.onFocusOutside,c=>c.preventDefault())})}),gge=M.forwardRef((i,t)=>{const r=Sa(bh,i.__scopeDialog),o=M.useRef(!1),l=M.useRef(!1);return S.jsx(bq,{...i,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var h,d;(h=i.onCloseAutoFocus)==null||h.call(i,c),c.defaultPrevented||(o.current||(d=r.triggerRef.current)==null||d.focus(),c.preventDefault()),o.current=!1,l.current=!1},onInteractOutside:c=>{var m,v;(m=i.onInteractOutside)==null||m.call(i,c),c.defaultPrevented||(o.current=!0,c.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const h=c.target;((v=r.triggerRef.current)==null?void 0:v.contains(h))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.current&&c.preventDefault()}})}),bq=M.forwardRef((i,t)=>{const{__scopeDialog:r,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:c,...h}=i,d=Sa(bh,r),m=M.useRef(null),v=Kt(t,m);return mP(),S.jsxs(S.Fragment,{children:[S.jsx(bE,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:l,onUnmountAutoFocus:c,children:S.jsx(ym,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":xP(d.open),...h,ref:v,onDismiss:()=>d.onOpenChange(!1)})}),S.jsxs(S.Fragment,{children:[S.jsx(yge,{titleId:d.titleId}),S.jsx(Tge,{contentRef:m,descriptionId:d.descriptionId})]})]})}),yP="DialogTitle",Aq=M.forwardRef((i,t)=>{const{__scopeDialog:r,...o}=i,l=Sa(yP,r);return S.jsx(xt.h2,{id:l.titleId,...o,ref:t})});Aq.displayName=yP;var Iq="DialogDescription",Cq=M.forwardRef((i,t)=>{const{__scopeDialog:r,...o}=i,l=Sa(Iq,r);return S.jsx(xt.p,{id:l.descriptionId,...o,ref:t})});Cq.displayName=Iq;var kq="DialogClose",_q=M.forwardRef((i,t)=>{const{__scopeDialog:r,...o}=i,l=Sa(kq,r);return S.jsx(xt.button,{type:"button",...o,ref:t,onClick:st(i.onClick,()=>l.onOpenChange(!1))})});_q.displayName=kq;function xP(i){return i?"open":"closed"}var Rq="DialogTitleWarning",[vge,Lq]=vue(Rq,{contentName:bh,titleName:yP,docsSlug:"dialog"}),yge=({titleId:i})=>{const t=Lq(Rq),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return M.useEffect(()=>{i&&(document.getElementById(i)||console.error(r))},[r,i]),null},xge="DialogDescriptionWarning",Tge=({contentRef:i,descriptionId:t})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Lq(xge).contentName}}.`;return M.useEffect(()=>{var c;const l=(c=i.current)==null?void 0:c.getAttribute("aria-describedby");t&&l&&(document.getElementById(t)||console.warn(o))},[o,i,t]),null},TP=vq,SP=xq,wP=Sq,oy=wq,ay=Eq,ly=Aq,uy=Cq,kE=_q;const _E=TP,Sge=SP,wge=wP,Pq=M.forwardRef(({className:i,...t},r)=>S.jsx(oy,{ref:r,className:yt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...t}));Pq.displayName=oy.displayName;const cy=M.forwardRef(({className:i,children:t,...r},o)=>S.jsxs(wge,{children:[S.jsx(Pq,{}),S.jsxs(ay,{ref:o,className:yt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",i),...r,children:[t,S.jsxs(kE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[S.jsx(Fo,{className:"h-4 w-4"}),S.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cy.displayName=ay.displayName;const EP=({className:i,...t})=>S.jsx("div",{className:yt("flex flex-col space-y-1.5 text-center sm:text-left",i),...t});EP.displayName="DialogHeader";const bP=M.forwardRef(({className:i,...t},r)=>S.jsx(ly,{ref:r,className:yt("text-lg font-semibold leading-none tracking-tight",i),...t}));bP.displayName=ly.displayName;const Ege=M.forwardRef(({className:i,...t},r)=>S.jsx(uy,{ref:r,className:yt("text-sm text-muted-foreground",i),...t}));Ege.displayName=uy.displayName;const bge=i=>i?(...t)=>i(...t):(...t)=>fetch(...t);class AP extends Error{constructor(t,r="FunctionsError",o){super(t),this.name=r,this.context=o}}class Age extends AP{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class OB extends AP{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jB extends AP{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var iL;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(iL||(iL={}));class Ige{constructor(t,{headers:r={},customFetch:o,region:l=iL.Any}={}){this.url=t,this.headers=r,this.region=l,this.fetch=bge(o)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ame(this,arguments,void 0,function*(r,o={}){var l;let c,h;try{const{headers:d,method:m,body:v,signal:x,timeout:T}=o;let E={},{region:A}=o;A||(A=this.region);const k=new URL(`${this.url}/${r}`);A&&A!=="any"&&(E["x-region"]=A,k.searchParams.set("forceFunctionRegion",A));let _;v&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",_=v):typeof v=="string"?(E["Content-Type"]="text/plain",_=v):typeof FormData<"u"&&v instanceof FormData?_=v:(E["Content-Type"]="application/json",_=JSON.stringify(v)):_=v;let R=x;T&&(h=new AbortController,c=setTimeout(()=>h.abort(),T),x?(R=h.signal,x.addEventListener("abort",()=>h.abort())):R=h.signal);const P=yield this.fetch(k.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),d),body:_,signal:R}).catch(V=>{throw new Age(V)}),D=P.headers.get("x-relay-error");if(D&&D==="true")throw new OB(P);if(!P.ok)throw new jB(P);let N=((l=P.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),$;return N==="application/json"?$=yield P.json():N==="application/octet-stream"||N==="application/pdf"?$=yield P.blob():N==="text/event-stream"?$=P:N==="multipart/form-data"?$=yield P.formData():$=yield P.text(),{data:$,error:null,response:P}}catch(d){return{data:null,error:d,response:d instanceof jB||d instanceof OB?d.context:void 0}}finally{c&&clearTimeout(c)}})}}var Cge=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},kge=class{constructor(i){var t,r;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(t=i.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=i.signal,this.isMaybeSingle=(r=i.isMaybeSingle)!==null&&r!==void 0?r:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,t){return this.headers=new Headers(this.headers),this.headers.set(i,t),this}then(i,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let h=null,d=null,m=null,v=c.status,x=c.statusText;if(c.ok){var T,E;if(r.method!=="HEAD"){var A;const P=await c.text();P===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((A=r.headers.get("Accept"))===null||A===void 0)&&A.includes("application/vnd.pgrst.plan+text"))?d=P:d=JSON.parse(P))}const _=(T=r.headers.get("Prefer"))===null||T===void 0?void 0:T.match(/count=(exact|planned|estimated)/),R=(E=c.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");_&&R&&R.length>1&&(m=parseInt(R[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(d)&&(d.length>1?(h={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,m=null,v=406,x="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var k;const _=await c.text();try{h=JSON.parse(_),Array.isArray(h)&&c.status===404&&(d=[],h=null,v=200,x="OK")}catch{c.status===404&&_===""?(v=204,x="No Content"):h={message:_}}if(h&&r.isMaybeSingle&&(!(h==null||(k=h.details)===null||k===void 0)&&k.includes("0 rows"))&&(h=null,v=200,x="OK"),h&&r.shouldThrowOnError)throw new Cge(h)}return{error:h,data:d,count:m,status:v,statusText:x}});return this.shouldThrowOnError||(l=l.catch(c=>{var h;let d="";const m=c==null?void 0:c.cause;if(m){var v,x,T,E;const k=(v=m==null?void 0:m.message)!==null&&v!==void 0?v:"",_=(x=m==null?void 0:m.code)!==null&&x!==void 0?x:"";d=`${(T=c==null?void 0:c.name)!==null&&T!==void 0?T:"FetchError"}: ${c==null?void 0:c.message}`,d+=`

Caused by: ${(E=m==null?void 0:m.name)!==null&&E!==void 0?E:"Error"}: ${k}`,_&&(d+=` (${_})`),m!=null&&m.stack&&(d+=`
${m.stack}`)}else{var A;d=(A=c==null?void 0:c.stack)!==null&&A!==void 0?A:""}return{error:{message:`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(i,t)}returns(){return this}overrideTypes(){return this}},_ge=class extends kge{select(i){let t=!1;const r=(i??"*").split("").map(o=>/\s/.test(o)&&!t?"":(o==='"'&&(t=!t),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:t=!0,nullsFirst:r,foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${i}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:t,referencedTable:r=t}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,t,{foreignTable:r,referencedTable:o=r}={}){const l=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${t-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:t=!1,settings:r=!1,buffers:o=!1,wal:l=!1,format:c="text"}={}){var h;const d=[i?"analyze":null,t?"verbose":null,r?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const UB=new RegExp("[,()]");var ap=class extends _ge{eq(i,t){return this.url.searchParams.append(i,`eq.${t}`),this}neq(i,t){return this.url.searchParams.append(i,`neq.${t}`),this}gt(i,t){return this.url.searchParams.append(i,`gt.${t}`),this}gte(i,t){return this.url.searchParams.append(i,`gte.${t}`),this}lt(i,t){return this.url.searchParams.append(i,`lt.${t}`),this}lte(i,t){return this.url.searchParams.append(i,`lte.${t}`),this}like(i,t){return this.url.searchParams.append(i,`like.${t}`),this}likeAllOf(i,t){return this.url.searchParams.append(i,`like(all).{${t.join(",")}}`),this}likeAnyOf(i,t){return this.url.searchParams.append(i,`like(any).{${t.join(",")}}`),this}ilike(i,t){return this.url.searchParams.append(i,`ilike.${t}`),this}ilikeAllOf(i,t){return this.url.searchParams.append(i,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(i,t){return this.url.searchParams.append(i,`ilike(any).{${t.join(",")}}`),this}regexMatch(i,t){return this.url.searchParams.append(i,`match.${t}`),this}regexIMatch(i,t){return this.url.searchParams.append(i,`imatch.${t}`),this}is(i,t){return this.url.searchParams.append(i,`is.${t}`),this}isDistinct(i,t){return this.url.searchParams.append(i,`isdistinct.${t}`),this}in(i,t){const r=Array.from(new Set(t)).map(o=>typeof o=="string"&&UB.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`in.(${r})`),this}notIn(i,t){const r=Array.from(new Set(t)).map(o=>typeof o=="string"&&UB.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`not.in.(${r})`),this}contains(i,t){return typeof t=="string"?this.url.searchParams.append(i,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(i,`cs.{${t.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(t)}`),this}containedBy(i,t){return typeof t=="string"?this.url.searchParams.append(i,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(i,`cd.{${t.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(t)}`),this}rangeGt(i,t){return this.url.searchParams.append(i,`sr.${t}`),this}rangeGte(i,t){return this.url.searchParams.append(i,`nxl.${t}`),this}rangeLt(i,t){return this.url.searchParams.append(i,`sl.${t}`),this}rangeLte(i,t){return this.url.searchParams.append(i,`nxr.${t}`),this}rangeAdjacent(i,t){return this.url.searchParams.append(i,`adj.${t}`),this}overlaps(i,t){return typeof t=="string"?this.url.searchParams.append(i,`ov.${t}`):this.url.searchParams.append(i,`ov.{${t.join(",")}}`),this}textSearch(i,t,{config:r,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(i,`${l}fts${c}.${t}`),this}match(i){return Object.entries(i).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(i,t,r){return this.url.searchParams.append(i,`not.${t}.${r}`),this}or(i,{foreignTable:t,referencedTable:r=t}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${i})`),this}filter(i,t,r){return this.url.searchParams.append(i,`${t}.${r}`),this}},Rge=class{constructor(i,{headers:t={},schema:r,fetch:o}){this.url=i,this.headers=new Headers(t),this.schema=r,this.fetch=o}select(i,t){const{head:r=!1,count:o}=t??{},l=r?"HEAD":"GET";let c=!1;const h=(i??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",h),o&&this.headers.append("Prefer",`count=${o}`),new ap({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:t,defaultToNull:r=!0}={}){var o;const l="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(c.length>0){const h=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",h.join(","))}}return new ap({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:t,ignoreDuplicates:r=!1,count:o,defaultToNull:l=!0}={}){var c;const h="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((m,v)=>m.concat(Object.keys(v)),[]);if(d.length>0){const m=[...new Set(d)].map(v=>`"${v}"`);this.url.searchParams.set("columns",m.join(","))}}return new ap({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:t}={}){var r;const o="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new ap({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:i}={}){var t;const r="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new ap({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Lge=class Dq{constructor(t,{headers:r={},schema:o,fetch:l}={}){this.url=t,this.headers=new Headers(r),this.schemaName=o,this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Rge(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Dq(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:o=!1,get:l=!1,count:c}={}){var h;let d;const m=new URL(`${this.url}/rpc/${t}`);let v;o||l?(d=o?"HEAD":"GET",Object.entries(r).filter(([T,E])=>E!==void 0).map(([T,E])=>[T,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([T,E])=>{m.searchParams.append(T,E)})):(d="POST",v=r);const x=new Headers(this.headers);return c&&x.set("Prefer",`count=${c}`),new ap({method:d,url:m,headers:x,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class Pge{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const o=r.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const o=this.getWebSocketConstructor();return new o(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Dge="2.89.0",Nge=`realtime-js/${Dge}`,Nq="1.0.0",Mge="2.0.0",FB=Nq,sL=1e4,Oge=1e3,jge=100;var oc;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(oc||(oc={}));var ti;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ti||(ti={}));var fa;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(fa||(fa={}));var oL;(function(i){i.websocket="websocket"})(oL||(oL={}));var Wd;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Wd||(Wd={}));class Uge{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let o=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,o;const l=(o=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(t){var r,o;const l=(o=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:{},h=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(t,r,o){var l,c;const h=t.topic,d=(l=t.ref)!==null&&l!==void 0?l:"",m=(c=t.join_ref)!==null&&c!==void 0?c:"",v=t.payload.event,x=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},T=Object.keys(x).length===0?"":JSON.stringify(x);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(T.length>255)throw new Error(`metadata length ${T.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+d.length+h.length+v.length+T.length,A=new ArrayBuffer(this.HEADER_LENGTH+E);let k=new DataView(A),_=0;k.setUint8(_++,this.KINDS.userBroadcastPush),k.setUint8(_++,m.length),k.setUint8(_++,d.length),k.setUint8(_++,h.length),k.setUint8(_++,v.length),k.setUint8(_++,T.length),k.setUint8(_++,r),Array.from(m,P=>k.setUint8(_++,P.charCodeAt(0))),Array.from(d,P=>k.setUint8(_++,P.charCodeAt(0))),Array.from(h,P=>k.setUint8(_++,P.charCodeAt(0))),Array.from(v,P=>k.setUint8(_++,P.charCodeAt(0))),Array.from(T,P=>k.setUint8(_++,P.charCodeAt(0)));var R=new Uint8Array(A.byteLength+o.byteLength);return R.set(new Uint8Array(A),0),R.set(new Uint8Array(o),A.byteLength),R.buffer}decode(t,r){if(this._isArrayBuffer(t)){let o=this._binaryDecode(t);return r(o)}if(typeof t=="string"){const o=JSON.parse(t),[l,c,h,d,m]=o;return r({join_ref:l,ref:c,topic:h,event:d,payload:m})}return r({})}_binaryDecode(t){const r=new DataView(t),o=r.getUint8(0),l=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,l)}}_decodeUserBroadcast(t,r,o){const l=r.getUint8(1),c=r.getUint8(2),h=r.getUint8(3),d=r.getUint8(4);let m=this.HEADER_LENGTH+4;const v=o.decode(t.slice(m,m+l));m=m+l;const x=o.decode(t.slice(m,m+c));m=m+c;const T=o.decode(t.slice(m,m+h));m=m+h;const E=t.slice(m,t.byteLength),A=d===this.JSON_ENCODING?JSON.parse(o.decode(E)):E,k={type:this.BROADCAST_EVENT,event:x,payload:A};return h>0&&(k.meta=JSON.parse(T)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([o])=>r.includes(o)))}}class Mq{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vn;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Vn||(Vn={}));const BB=(i,t,r={})=>{var o;const l=(o=r.skipTypes)!==null&&o!==void 0?o:[];return t?Object.keys(t).reduce((c,h)=>(c[h]=Fge(h,i,t,l),c),{}):{}},Fge=(i,t,r,o)=>{const l=t.find(d=>d.name===i),c=l==null?void 0:l.type,h=r[i];return c&&!o.includes(c)?Oq(c,h):aL(h)},Oq=(i,t)=>{if(i.charAt(0)==="_"){const r=i.slice(1,i.length);return Gge(t,r)}switch(i){case Vn.bool:return Bge(t);case Vn.float4:case Vn.float8:case Vn.int2:case Vn.int4:case Vn.int8:case Vn.numeric:case Vn.oid:return $ge(t);case Vn.json:case Vn.jsonb:return Vge(t);case Vn.timestamp:return Hge(t);case Vn.abstime:case Vn.date:case Vn.daterange:case Vn.int4range:case Vn.int8range:case Vn.money:case Vn.reltime:case Vn.text:case Vn.time:case Vn.timestamptz:case Vn.timetz:case Vn.tsrange:case Vn.tstzrange:return aL(t);default:return aL(t)}},aL=i=>i,Bge=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},$ge=i=>{if(typeof i=="string"){const t=parseFloat(i);if(!Number.isNaN(t))return t}return i},Vge=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},Gge=(i,t)=>{if(typeof i!="string")return i;const r=i.length-1,o=i[r];if(i[0]==="{"&&o==="}"){let c;const h=i.slice(1,r);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(d=>Oq(t,d))}return i},Hge=i=>typeof i=="string"?i.replace(" ","T"):i,jq=i=>{const t=new URL(i);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class e_{constructor(t,r,o={},l=sL){this.channel=t,this.event=r,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var o;return this._hasReceived(t)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(o=>o.status===t).forEach(o=>o.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var $B;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})($B||($B={}));class X0{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:c,onLeave:h,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=X0.syncState(this.state,l,c,h),this.pendingDiffs.forEach(m=>{this.state=X0.syncDiff(this.state,m,c,h)}),this.pendingDiffs=[],d()}),this.channel._on(o.diff,{},l=>{const{onJoin:c,onLeave:h,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=X0.syncDiff(this.state,l,c,h),d())}),this.onJoin((l,c,h)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:h})}),this.onLeave((l,c,h)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,o,l){const c=this.cloneDeep(t),h=this.transformState(r),d={},m={};return this.map(c,(v,x)=>{h[v]||(m[v]=x)}),this.map(h,(v,x)=>{const T=c[v];if(T){const E=x.map(R=>R.presence_ref),A=T.map(R=>R.presence_ref),k=x.filter(R=>A.indexOf(R.presence_ref)<0),_=T.filter(R=>E.indexOf(R.presence_ref)<0);k.length>0&&(d[v]=k),_.length>0&&(m[v]=_)}else d[v]=x}),this.syncDiff(c,{joins:d,leaves:m},o,l)}static syncDiff(t,r,o,l){const{joins:c,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(c,(d,m)=>{var v;const x=(v=t[d])!==null&&v!==void 0?v:[];if(t[d]=this.cloneDeep(m),x.length>0){const T=t[d].map(A=>A.presence_ref),E=x.filter(A=>T.indexOf(A.presence_ref)<0);t[d].unshift(...E)}o(d,x,m)}),this.map(h,(d,m)=>{let v=t[d];if(!v)return;const x=m.map(T=>T.presence_ref);v=v.filter(T=>x.indexOf(T.presence_ref)<0),t[d]=v,l(d,v,m),v.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(o=>r(o,t[o]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,o)=>{const l=t[o];return"metas"in l?r[o]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[o]=l,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var VB;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(VB||(VB={}));var Q0;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Q0||(Q0={}));var Xl;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Xl||(Xl={}));class bp{constructor(t,r={config:{}},o){var l,c;if(this.topic=t,this.params=r,this.socket=o,this.bindings={},this.state=ti.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new e_(this,fa.join,this.params,this.timeout),this.rejoinTimer=new Mq(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ti.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ti.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=ti.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ti.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=ti.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fa.reply,{},(h,d)=>{this._trigger(this._replyEventName(d),h)}),this.presence=new X0(this),this.broadcastEndpointURL=jq(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var o,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==ti.closed){const{config:{broadcast:h,presence:d,private:m}}=this.params,v=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(A=>A.filter))!==null&&l!==void 0?l:[],x=!!this.bindings[Q0.PRESENCE]&&this.bindings[Q0.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,T={},E={broadcast:h,presence:Object.assign(Object.assign({},d),{enabled:x}),postgres_changes:v,private:m};this.socket.accessTokenValue&&(T.access_token=this.socket.accessTokenValue),this._onError(A=>t==null?void 0:t(Xl.CHANNEL_ERROR,A)),this._onClose(()=>t==null?void 0:t(Xl.CLOSED)),this.updateJoinPayload(Object.assign({config:E},T)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:A})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),A===void 0){t==null||t(Xl.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,R=(k=_==null?void 0:_.length)!==null&&k!==void 0?k:0,P=[];for(let D=0;D<R;D++){const N=_[D],{filter:{event:$,schema:V,table:W,filter:C}}=N,K=A&&A[D];if(K&&K.event===$&&bp.isFilterValueEqual(K.schema,V)&&bp.isFilterValueEqual(K.table,W)&&bp.isFilterValueEqual(K.filter,C))P.push(Object.assign(Object.assign({},N),{id:K.id}));else{this.unsubscribe(),this.state=ti.errored,t==null||t(Xl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,t&&t(Xl.SUBSCRIBED);return}}).receive("error",A=>{this.state=ti.errored,t==null||t(Xl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,o){return this.state===ti.joined&&t===Q0.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,o)}async httpSend(t,r,o={}){var l;if(r==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);if(d.status===202)return{success:!0};let m=d.statusText;try{const v=await d.json();m=v.error||v.message||m}catch{}return Promise.reject(new Error(m))}async send(t,r={}){var o,l;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:h}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=v.body)===null||l===void 0?void 0:l.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,d,m;const v=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(d=(h=this.params)===null||h===void 0?void 0:h.config)===null||d===void 0?void 0:d.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),v.receive("ok",()=>c("ok")),v.receive("error",()=>c("error")),v.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ti.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fa.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new e_(this,fa.leave,{},t),o.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ti.closed,this.bindings={}}async _fetchWithTimeout(t,r,o){const l=new AbortController,c=setTimeout(()=>l.abort(),o),h=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),h}_push(t,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new e_(this,t,r,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>jge){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,o){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,o){var l,c;const h=t.toLocaleLowerCase(),{close:d,error:m,leave:v,join:x}=fa;if(o&&[d,m,v,x].indexOf(h)>=0&&o!==this._joinRef())return;let E=this._onMessage(h,r,o);if(r&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(A=>{var k,_,R;return((k=A.filter)===null||k===void 0?void 0:k.event)==="*"||((R=(_=A.filter)===null||_===void 0?void 0:_.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===h}).map(A=>A.callback(E,o)):(c=this.bindings[h])===null||c===void 0||c.filter(A=>{var k,_,R,P,D,N;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in A){const $=A.id,V=(k=A.filter)===null||k===void 0?void 0:k.event;return $&&((_=r.ids)===null||_===void 0?void 0:_.includes($))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((R=r.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const $=(D=(P=A==null?void 0:A.filter)===null||P===void 0?void 0:P.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return $==="*"||$===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===h}).map(A=>{if(typeof E=="object"&&"ids"in E){const k=E.data,{schema:_,table:R,commit_timestamp:P,type:D,errors:N}=k;E=Object.assign(Object.assign({},{schema:_,table:R,commit_timestamp:P,eventType:D,new:{},old:{},errors:N}),this._getPayloadRecords(k))}A.callback(E,o)})}_isClosed(){return this.state===ti.closed}_isJoined(){return this.state===ti.joined}_isJoining(){return this.state===ti.joining}_isLeaving(){return this.state===ti.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,o){const l=t.toLocaleLowerCase(),c={type:l,filter:r,callback:o};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(t,r){const o=t.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&bp.isEqual(l.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const o in t)if(t[o]!==r[o])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(fa.close,{},t)}_onError(t){this._on(fa.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ti.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=BB(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=BB(t.columns,t.old_record)),r}}const t_=()=>{},rS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qge=[1e3,2e3,5e3,1e4],Kge=1e4,zge=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Wge{constructor(t,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sL,this.transport=null,this.heartbeatIntervalMs=rS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=t_,this.ref=0,this.reconnectTimer=null,this.vsn=FB,this.logger=t_,this.conn=null,this.sendBuffer=[],this.serializer=new Uge,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...c)=>l(...c):(...c)=>fetch(...c),!(!((o=r==null?void 0:r.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${oL.websocket}`,this.httpEndpoint=jq(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Pge.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,o){this.logger(t,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case oc.connecting:return Wd.Connecting;case oc.open:return Wd.Open;case oc.closing:return Wd.Closing;default:return Wd.Closed}}isConnected(){return this.connectionState()===Wd.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const o=`realtime:${t}`,l=this.getChannels().find(c=>c.topic===o);if(l)return l;{const c=new bp(`realtime:${t}`,r,this);return this.channels.push(c),c}}push(t){const{topic:r,event:o,payload:l,ref:c}=t,h=()=>{this.encode(t,d=>{var m;(m=this.conn)===null||m===void 0||m.send(d)})};this.log("push",`${r} ${o} (${c})`,l),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Oge,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},rS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(o=>o.topic===t&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:c,ref:h}=r,d=h?`(${h})`:"",m=c.status||"";this.log("receive",`${m} ${o} ${l} ${d}`.trim(),c),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(l,c,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===oc.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===oc.open||this.conn.readyState===oc.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(fa.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const o=t.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${t}${o}${l}`}_workerObjectUrl(t){let r;if(t)r=t;else{const o=new Blob([zge],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,o=!1;if(t)r=t,o=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),r=this.accessTokenValue}else r=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const c={access_token:r,version:Nge};r&&l.updateJoinPayload(c),l.joinedOnce&&l._isJoined()&&l._push(fa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(o=>{try{o(r)}catch(l){this.log("error",`error in ${t} callback`,l)}})}catch(o){this.log("error",`error triggering ${t} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Mq(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},rS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,o,l,c,h,d,m,v,x,T,E,A;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(o=t==null?void 0:t.timeout)!==null&&o!==void 0?o:sL,this.heartbeatIntervalMs=(l=t==null?void 0:t.heartbeatIntervalMs)!==null&&l!==void 0?l:rS.HEARTBEAT_INTERVAL,this.worker=(c=t==null?void 0:t.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=t==null?void 0:t.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:t_,this.vsn=(m=t==null?void 0:t.vsn)!==null&&m!==void 0?m:FB,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=t==null?void 0:t.reconnectAfterMs)!==null&&v!==void 0?v:k=>qge[k-1]||Kge,this.vsn){case Nq:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:(k,_)=>_(JSON.stringify(k)),this.decode=(T=t==null?void 0:t.decode)!==null&&T!==void 0?T:(k,_)=>_(JSON.parse(k));break;case Mge:this.encode=(E=t==null?void 0:t.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(A=t==null?void 0:t.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Av=class extends Error{constructor(i,t){var r;super(i),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Yge(i,t,r){const o=new URL(t,i);if(r)for(const[l,c]of Object.entries(r))c!==void 0&&o.searchParams.set(l,c);return o.toString()}async function Xge(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function Qge(i){const t=i.fetchImpl??globalThis.fetch;return{async request({method:r,path:o,query:l,body:c,headers:h}){const d=Yge(i.baseUrl,o,l),m=await Xge(i.auth),v=await t(d,{method:r,headers:{...c?{"Content-Type":"application/json"}:{},...m,...h},body:c?JSON.stringify(c):void 0}),x=await v.text(),T=(v.headers.get("content-type")||"").includes("application/json"),E=T&&x?JSON.parse(x):x;if(!v.ok){const A=T?E:void 0,k=A==null?void 0:A.error;throw new Av((k==null?void 0:k.message)??`Request failed with status ${v.status}`,{status:v.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:A})}return{status:v.status,headers:v.headers,data:E}}}}function iS(i){return i.join("")}var Jge=class{constructor(i,t=""){this.client=i,this.prefix=t}async listNamespaces(i){const t=i?{parent:iS(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(i,t){const r={namespace:i.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${iS(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${iS(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${iS(i.namespace)}`}),!0}catch(t){if(t instanceof Av&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(i,t){try{return await this.createNamespace(i,t)}catch(r){if(r instanceof Av&&r.status===409)return;throw r}}};function Yf(i){return i.join("")}var Zge=class{constructor(i,t="",r){this.client=i,this.prefix=t,this.accessDelegation=r}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yf(i.namespace)}/tables`})).data.identifiers}async createTable(i,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Yf(i.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(i,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Yf(i.namespace)}/tables/${i.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(i,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Yf(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(i){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yf(i.namespace)}/tables/${i.name}`,headers:t})).data.metadata}async tableExists(i){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Yf(i.namespace)}/tables/${i.name}`,headers:t}),!0}catch(r){if(r instanceof Av&&r.status===404)return!1;throw r}}async createTableIfNotExists(i,t){try{return await this.createTable(i,t)}catch(r){if(r instanceof Av&&r.status===409)return await this.loadTable({namespace:i.namespace,name:t.name});throw r}}},e0e=class{constructor(i){var o;let t="v1";i.catalogName&&(t+=`/${i.catalogName}`);const r=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=Qge({baseUrl:r,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=(o=i.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new Jge(this.client,t),this.tableOps=new Zge(this.client,t,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,t){return this.namespaceOps.createNamespace(i,t)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,t){return this.tableOps.createTable(i,t)}async updateTable(i,t){return this.tableOps.updateTable(i,t)}async dropTable(i,t){await this.tableOps.dropTable(i,t)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,t){return this.namespaceOps.createNamespaceIfNotExists(i,t)}async createTableIfNotExists(i,t){return this.tableOps.createTableIfNotExists(i,t)}},RE=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function cr(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var t0e=class extends RE{constructor(i,t,r){super(i),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},lL=class extends RE{constructor(i,t){super(i),this.name="StorageUnknownError",this.originalError=t}};const IP=i=>i?(...t)=>i(...t):(...t)=>fetch(...t),n0e=()=>Response,uL=i=>{if(Array.isArray(i))return i.map(r=>uL(r));if(typeof i=="function"||i!==Object(i))return i;const t={};return Object.entries(i).forEach(([r,o])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[l]=uL(o)}),t},r0e=i=>{if(typeof i!="object"||i===null)return!1;const t=Object.getPrototypeOf(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},i0e=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function Iv(i){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(i)}function s0e(i,t){if(Iv(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var o=r.call(i,t);if(Iv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function o0e(i){var t=s0e(i,"string");return Iv(t)=="symbol"?t:t+""}function a0e(i,t,r){return(t=o0e(t))in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r,i}function GB(i,t){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),r.push.apply(r,o)}return r}function Pt(i){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GB(Object(r),!0).forEach(function(o){a0e(i,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):GB(Object(r)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})}return i}const n_=i=>{var t;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(t=i.error)===null||t===void 0?void 0:t.message)||JSON.stringify(i)},l0e=async(i,t,r)=>{i instanceof await n0e()&&!(r!=null&&r.noResolveJson)?i.json().then(o=>{const l=i.status||500,c=(o==null?void 0:o.statusCode)||l+"";t(new t0e(n_(o),l,c))}).catch(o=>{t(new lL(n_(o),o))}):t(new lL(n_(i),i))},u0e=(i,t,r,o)=>{const l={method:i,headers:(t==null?void 0:t.headers)||{}};return i==="GET"||!o?l:(r0e(o)?(l.headers=Pt({"Content-Type":"application/json"},t==null?void 0:t.headers),l.body=JSON.stringify(o)):l.body=o,t!=null&&t.duplex&&(l.duplex=t.duplex),Pt(Pt({},l),r))};async function dy(i,t,r,o,l,c){return new Promise((h,d)=>{i(r,u0e(t,o,l,c)).then(m=>{if(!m.ok)throw m;return o!=null&&o.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>l0e(m,d,o))})}async function Cv(i,t,r,o){return dy(i,"GET",t,r,o)}async function ua(i,t,r,o,l){return dy(i,"POST",t,o,l,r)}async function cL(i,t,r,o,l){return dy(i,"PUT",t,o,l,r)}async function c0e(i,t,r,o){return dy(i,"HEAD",t,Pt(Pt({},r),{},{noResolveJson:!0}),o)}async function CP(i,t,r,o,l){return dy(i,"DELETE",t,o,l,r)}var d0e=class{constructor(i,t){this.downloadFn=i,this.shouldThrowOnError=t}then(i,t){return this.execute().then(i,t)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(t){if(i.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}}};let Uq;Uq=Symbol.toStringTag;var h0e=class{constructor(i,t){this.downloadFn=i,this.shouldThrowOnError=t,this[Uq]="BlobDownloadBuilder",this.promise=null}asStream(){return new d0e(this.downloadFn,this.shouldThrowOnError)}then(i,t){return this.getPromise().then(i,t)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(t){if(i.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}}};const f0e={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},HB={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var p0e=class{constructor(i,t={},r,o){this.shouldThrowOnError=!1,this.url=i,this.headers=t,this.bucketId=r,this.fetch=IP(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,t,r,o){var l=this;try{let c;const h=Pt(Pt({},HB),o);let d=Pt(Pt({},l.headers),i==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),m&&c.append("metadata",l.encodeMetadata(m)),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.has("cacheControl")||c.append("cacheControl",h.cacheControl),m&&!c.has("metadata")&&c.append("metadata",l.encodeMetadata(m))):(c=r,d["cache-control"]=`max-age=${h.cacheControl}`,d["content-type"]=h.contentType,m&&(d["x-metadata"]=l.toBase64(l.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!h.duplex&&(h.duplex="half")),o!=null&&o.headers&&(d=Pt(Pt({},d),o.headers));const v=l._removeEmptyFolders(t),x=l._getFinalPath(v),T=await(i=="PUT"?cL:ua)(l.fetch,`${l.url}/object/${x}`,c,Pt({headers:d},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:v,id:T.Id,fullPath:T.Key},error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(cr(c))return{data:null,error:c};throw c}}async upload(i,t,r){return this.uploadOrUpdate("POST",i,t,r)}async uploadToSignedUrl(i,t,r,o){var l=this;const c=l._removeEmptyFolders(i),h=l._getFinalPath(c),d=new URL(l.url+`/object/upload/sign/${h}`);d.searchParams.set("token",t);try{let m;const v=Pt({upsert:HB.upsert},o),x=Pt(Pt({},l.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",v.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",v.cacheControl)):(m=r,x["cache-control"]=`max-age=${v.cacheControl}`,x["content-type"]=v.contentType),{data:{path:c,fullPath:(await cL(l.fetch,d.toString(),m,{headers:x})).Key},error:null}}catch(m){if(l.shouldThrowOnError)throw m;if(cr(m))return{data:null,error:m};throw m}}async createSignedUploadUrl(i,t){var r=this;try{let o=r._getFinalPath(i);const l=Pt({},r.headers);t!=null&&t.upsert&&(l["x-upsert"]="true");const c=await ua(r.fetch,`${r.url}/object/upload/sign/${o}`,{},{headers:l}),h=new URL(r.url+c.url),d=h.searchParams.get("token");if(!d)throw new RE("No token returned by API");return{data:{signedUrl:h.toString(),path:i,token:d},error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(cr(o))return{data:null,error:o};throw o}}async update(i,t,r){return this.uploadOrUpdate("PUT",i,t,r)}async move(i,t,r){var o=this;try{return{data:await ua(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:i,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:o.headers}),error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(cr(l))return{data:null,error:l};throw l}}async copy(i,t,r){var o=this;try{return{data:{path:(await ua(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:i,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:o.headers})).Key},error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(cr(l))return{data:null,error:l};throw l}}async createSignedUrl(i,t,r){var o=this;try{let l=o._getFinalPath(i),c=await ua(o.fetch,`${o.url}/object/sign/${l}`,Pt({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:o.headers});const h=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return c={signedUrl:encodeURI(`${o.url}${c.signedURL}${h}`)},{data:c,error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(cr(l))return{data:null,error:l};throw l}}async createSignedUrls(i,t,r){var o=this;try{const l=await ua(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:t,paths:i},{headers:o.headers}),c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:l.map(h=>Pt(Pt({},h),{},{signedUrl:h.signedURL?encodeURI(`${o.url}${h.signedURL}${c}`):null})),error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(cr(l))return{data:null,error:l};throw l}}download(i,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=o?`?${o}`:"",c=this._getFinalPath(i),h=()=>Cv(this.fetch,`${this.url}/${r}/${c}${l}`,{headers:this.headers,noResolveJson:!0});return new h0e(h,this.shouldThrowOnError)}async info(i){var t=this;const r=t._getFinalPath(i);try{return{data:uL(await Cv(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(o){if(t.shouldThrowOnError)throw o;if(cr(o))return{data:null,error:o};throw o}}async exists(i){var t=this;const r=t._getFinalPath(i);try{return await c0e(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(o){if(t.shouldThrowOnError)throw o;if(cr(o)&&o instanceof lL){const l=o.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:o}}throw o}}getPublicUrl(i,t){const r=this._getFinalPath(i),o=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&o.push(l);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});h!==""&&o.push(h);let d=o.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}async remove(i){var t=this;try{return{data:await CP(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:i},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async list(i,t,r){var o=this;try{const l=Pt(Pt(Pt({},f0e),t),{},{prefix:i||""});return{data:await ua(o.fetch,`${o.url}/object/list/${o.bucketId}`,l,{headers:o.headers},r),error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(cr(l))return{data:null,error:l};throw l}}async listV2(i,t){var r=this;try{const o=Pt({},i);return{data:await ua(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,o,{headers:r.headers},t),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(cr(o))return{data:null,error:o};throw o}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const t=[];return i.width&&t.push(`width=${i.width}`),i.height&&t.push(`height=${i.height}`),i.resize&&t.push(`resize=${i.resize}`),i.format&&t.push(`format=${i.format}`),i.quality&&t.push(`quality=${i.quality}`),t.join("&")}};const Fq="2.89.0",Bq={"X-Client-Info":`storage-js/${Fq}`};var m0e=class{constructor(i,t={},r,o){this.shouldThrowOnError=!1;const l=new URL(i);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Pt(Pt({},Bq),t),this.fetch=IP(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var t=this;try{const r=t.listBucketOptionsToQueryString(i);return{data:await Cv(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async getBucket(i){var t=this;try{return{data:await Cv(t.fetch,`${t.url}/bucket/${i}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async createBucket(i,t={public:!1}){var r=this;try{return{data:await ua(r.fetch,`${r.url}/bucket`,{id:i,name:i,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(cr(o))return{data:null,error:o};throw o}}async updateBucket(i,t){var r=this;try{return{data:await cL(r.fetch,`${r.url}/bucket/${i}`,{id:i,name:i,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(cr(o))return{data:null,error:o};throw o}}async emptyBucket(i){var t=this;try{return{data:await ua(t.fetch,`${t.url}/bucket/${i}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async deleteBucket(i){var t=this;try{return{data:await CP(t.fetch,`${t.url}/bucket/${i}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(i){const t={};return i&&("limit"in i&&(t.limit=String(i.limit)),"offset"in i&&(t.offset=String(i.offset)),i.search&&(t.search=i.search),i.sortColumn&&(t.sortColumn=i.sortColumn),i.sortOrder&&(t.sortOrder=i.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},g0e=class{constructor(i,t={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Pt(Pt({},Bq),t),this.fetch=IP(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var t=this;try{return{data:await ua(t.fetch,`${t.url}/bucket`,{name:i},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async listBuckets(i){var t=this;try{const r=new URLSearchParams;(i==null?void 0:i.limit)!==void 0&&r.set("limit",i.limit.toString()),(i==null?void 0:i.offset)!==void 0&&r.set("offset",i.offset.toString()),i!=null&&i.sortColumn&&r.set("sortColumn",i.sortColumn),i!=null&&i.sortOrder&&r.set("sortOrder",i.sortOrder),i!=null&&i.search&&r.set("search",i.search);const o=r.toString(),l=o?`${t.url}/bucket?${o}`:`${t.url}/bucket`;return{data:await Cv(t.fetch,l,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}async deleteBucket(i){var t=this;try{return{data:await CP(t.fetch,`${t.url}/bucket/${i}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}}from(i){var t=this;if(!i0e(i))throw new RE("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new e0e({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(r,{get(l,c){const h=l[c];return typeof h!="function"?h:async(...d)=>{try{return{data:await h.apply(l,d),error:null}}catch(m){if(o)throw m;return{data:null,error:m}}}}})}};const kP={"X-Client-Info":`storage-js/${Fq}`,"Content-Type":"application/json"};var $q=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function lo(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var r_=class extends $q{constructor(i,t,r){super(i),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},v0e=class extends $q{constructor(i,t){super(i),this.name="StorageVectorsUnknownError",this.originalError=t}};const _P=i=>i?(...t)=>i(...t):(...t)=>fetch(...t),y0e=i=>{if(typeof i!="object"||i===null)return!1;const t=Object.getPrototypeOf(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},qB=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),x0e=async(i,t,r)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(r!=null&&r.noResolveJson)){const o=i.status||500,l=i;if(typeof l.json=="function")l.json().then(c=>{const h=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||o+"";t(new r_(qB(c),o,h))}).catch(()=>{const c=o+"";t(new r_(l.statusText||`HTTP ${o} error`,o,c))});else{const c=o+"";t(new r_(l.statusText||`HTTP ${o} error`,o,c))}}else t(new v0e(qB(i),i))},T0e=(i,t,r,o)=>{const l={method:i,headers:(t==null?void 0:t.headers)||{}};return o?(y0e(o)?(l.headers=Pt({"Content-Type":"application/json"},t==null?void 0:t.headers),l.body=JSON.stringify(o)):l.body=o,Pt(Pt({},l),r)):l};async function S0e(i,t,r,o,l,c){return new Promise((h,d)=>{i(r,T0e(t,o,l,c)).then(m=>{if(!m.ok)throw m;if(o!=null&&o.noResolveJson)return m;const v=m.headers.get("content-type");return!v||!v.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>x0e(m,d,o))})}async function uo(i,t,r,o,l){return S0e(i,"POST",t,o,l,r)}var w0e=class{constructor(i,t={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Pt(Pt({},kP),t),this.fetch=_P(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var t=this;try{return{data:await uo(t.fetch,`${t.url}/CreateIndex`,i,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}async getIndex(i,t){var r=this;try{return{data:await uo(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:i,indexName:t},{headers:r.headers}),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(lo(o))return{data:null,error:o};throw o}}async listIndexes(i){var t=this;try{return{data:await uo(t.fetch,`${t.url}/ListIndexes`,i,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}async deleteIndex(i,t){var r=this;try{return{data:await uo(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:i,indexName:t},{headers:r.headers})||{},error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(lo(o))return{data:null,error:o};throw o}}},E0e=class{constructor(i,t={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Pt(Pt({},kP),t),this.fetch=_P(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var t=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await uo(t.fetch,`${t.url}/PutVectors`,i,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}async getVectors(i){var t=this;try{return{data:await uo(t.fetch,`${t.url}/GetVectors`,i,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}async listVectors(i){var t=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await uo(t.fetch,`${t.url}/ListVectors`,i,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}async queryVectors(i){var t=this;try{return{data:await uo(t.fetch,`${t.url}/QueryVectors`,i,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}async deleteVectors(i){var t=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await uo(t.fetch,`${t.url}/DeleteVectors`,i,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}},b0e=class{constructor(i,t={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Pt(Pt({},kP),t),this.fetch=_P(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var t=this;try{return{data:await uo(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}async getBucket(i){var t=this;try{return{data:await uo(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:i},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}async listBuckets(i={}){var t=this;try{return{data:await uo(t.fetch,`${t.url}/ListVectorBuckets`,i,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}async deleteBucket(i){var t=this;try{return{data:await uo(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lo(r))return{data:null,error:r};throw r}}},A0e=class extends b0e{constructor(i,t={}){super(i,t.headers||{},t.fetch)}from(i){return new I0e(this.url,this.headers,i,this.fetch)}async createBucket(i){var t=()=>super.createBucket,r=this;return t().call(r,i)}async getBucket(i){var t=()=>super.getBucket,r=this;return t().call(r,i)}async listBuckets(i={}){var t=()=>super.listBuckets,r=this;return t().call(r,i)}async deleteBucket(i){var t=()=>super.deleteBucket,r=this;return t().call(r,i)}},I0e=class extends w0e{constructor(i,t,r,o){super(i,t,o),this.vectorBucketName=r}async createIndex(i){var t=()=>super.createIndex,r=this;return t().call(r,Pt(Pt({},i),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(i={}){var t=()=>super.listIndexes,r=this;return t().call(r,Pt(Pt({},i),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(i){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,i)}async deleteIndex(i){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,i)}index(i){return new C0e(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},C0e=class extends E0e{constructor(i,t,r,o,l){super(i,t,l),this.vectorBucketName=r,this.indexName=o}async putVectors(i){var t=()=>super.putVectors,r=this;return t().call(r,Pt(Pt({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(i){var t=()=>super.getVectors,r=this;return t().call(r,Pt(Pt({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(i={}){var t=()=>super.listVectors,r=this;return t().call(r,Pt(Pt({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(i){var t=()=>super.queryVectors,r=this;return t().call(r,Pt(Pt({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(i){var t=()=>super.deleteVectors,r=this;return t().call(r,Pt(Pt({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},k0e=class extends m0e{constructor(i,t={},r,o){super(i,t,r,o)}from(i){return new p0e(this.url,this.headers,i,this.fetch)}get vectors(){return new A0e(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new g0e(this.url+"/iceberg",this.headers,this.fetch)}};const Vq="2.89.0",lp=30*1e3,dL=3,i_=dL*lp,_0e="http://localhost:9999",R0e="supabase.auth.token",L0e={"X-Client-Info":`gotrue-js/${Vq}`},hL="X-Supabase-Api-Version",Gq={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},P0e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,D0e=10*60*1e3;class kv extends Error{constructor(t,r,o){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function vt(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class N0e extends kv{constructor(t,r,o){super(t,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function M0e(i){return vt(i)&&i.name==="AuthApiError"}class Yd extends kv{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class yu extends kv{constructor(t,r,o,l){super(t,o,l),this.name=r,this.status=o}}class eo extends yu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function O0e(i){return vt(i)&&i.name==="AuthSessionMissingError"}class Xf extends yu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sS extends yu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class oS extends yu{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function j0e(i){return vt(i)&&i.name==="AuthImplicitGrantRedirectError"}class KB extends yu{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class U0e extends yu{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class fL extends yu{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function s_(i){return vt(i)&&i.name==="AuthRetryableFetchError"}class zB extends yu{constructor(t,r,o){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class pL extends yu{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),WB=` 	
\r=`.split(""),F0e=(()=>{const i=new Array(128);for(let t=0;t<i.length;t+=1)i[t]=-1;for(let t=0;t<WB.length;t+=1)i[WB[t].charCodeAt(0)]=-2;for(let t=0;t<Cw.length;t+=1)i[Cw[t].charCodeAt(0)]=t;return i})();function YB(i,t,r){if(i!==null)for(t.queue=t.queue<<8|i,t.queuedBits+=8;t.queuedBits>=6;){const o=t.queue>>t.queuedBits-6&63;r(Cw[o]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const o=t.queue>>t.queuedBits-6&63;r(Cw[o]),t.queuedBits-=6}}function Hq(i,t,r){const o=F0e[i];if(o>-1)for(t.queue=t.queue<<6|o,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function XB(i){const t=[],r=h=>{t.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=h=>{V0e(h,o,r)};for(let h=0;h<i.length;h+=1)Hq(i.charCodeAt(h),l,c);return t.join("")}function B0e(i,t){if(i<=127){t(i);return}else if(i<=2047){t(192|i>>6),t(128|i&63);return}else if(i<=65535){t(224|i>>12),t(128|i>>6&63),t(128|i&63);return}else if(i<=1114111){t(240|i>>18),t(128|i>>12&63),t(128|i>>6&63),t(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function $0e(i,t){for(let r=0;r<i.length;r+=1){let o=i.charCodeAt(r);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(i.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}B0e(o,t)}}function V0e(i,t,r){if(t.utf8seq===0){if(i<=127){r(i);return}for(let o=1;o<6;o+=1)if(!(i>>7-o&1)){t.utf8seq=o;break}if(t.utf8seq===2)t.codepoint=i&31;else if(t.utf8seq===3)t.codepoint=i&15;else if(t.utf8seq===4)t.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|i&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Mp(i){const t=[],r={queue:0,queuedBits:0},o=l=>{t.push(l)};for(let l=0;l<i.length;l+=1)Hq(i.charCodeAt(l),r,o);return new Uint8Array(t)}function G0e(i){const t=[];return $0e(i,r=>t.push(r)),new Uint8Array(t)}function Zd(i){const t=[],r={queue:0,queuedBits:0},o=l=>{t.push(l)};return i.forEach(l=>YB(l,r,o)),YB(null,r,o),t.join("")}function H0e(i){return Math.round(Date.now()/1e3)+i}function q0e(){return Symbol("auth-callback")}const _i=()=>typeof window<"u"&&typeof document<"u",Fd={tested:!1,writable:!1},qq=()=>{if(!_i())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fd.tested)return Fd.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Fd.tested=!0,Fd.writable=!0}catch{Fd.tested=!0,Fd.writable=!1}return Fd.writable};function K0e(i){const t={},r=new URL(i);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{t[c]=l})}catch{}return r.searchParams.forEach((o,l)=>{t[l]=o}),t}const Kq=i=>i?(...t)=>i(...t):(...t)=>fetch(...t),z0e=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",up=async(i,t,r)=>{await i.setItem(t,JSON.stringify(r))},Bd=async(i,t)=>{const r=await i.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ki=async(i,t)=>{await i.removeItem(t)};class LE{constructor(){this.promise=new LE.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}LE.promiseConstructor=Promise;function o_(i){const t=i.split(".");if(t.length!==3)throw new pL("Invalid JWT structure");for(let o=0;o<t.length;o++)if(!P0e.test(t[o]))throw new pL("JWT not in base64url format");return{header:JSON.parse(XB(t[0])),payload:JSON.parse(XB(t[1])),signature:Mp(t[2]),raw:{header:t[0],payload:t[1]}}}async function W0e(i){return await new Promise(t=>{setTimeout(()=>t(null),i)})}function Y0e(i,t){return new Promise((o,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await i(c);if(!t(c,null,h)){o(h);return}}catch(h){if(!t(c,h)){l(h);return}}})()})}function X0e(i){return("0"+i.toString(16)).substr(-2)}function Q0e(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(t),Array.from(t,X0e).join("")}async function J0e(i){const r=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(o);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function Z0e(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const r=await J0e(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qf(i,t,r=!1){const o=Q0e();let l=o;r&&(l+="/PASSWORD_RECOVERY"),await up(i,`${t}-code-verifier`,l);const c=await Z0e(o);return[c,o===c?"plain":"s256"]}const eve=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tve(i){const t=i.headers.get(hL);if(!t||!t.match(eve))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function nve(i){if(!i)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(i<=t)throw new Error("JWT has expired")}function rve(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ive=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jf(i){if(!ive.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function a_(){const i={};return new Proxy(i,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sve(i,t){return new Proxy(i,{get:(r,o,l)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const c=o.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,o,l)}return!t.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,o,l)}})}function QB(i){return JSON.parse(JSON.stringify(i))}const qd=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),ove=[502,503,504];async function JB(i){var t;if(!z0e(i))throw new fL(qd(i),0);if(ove.includes(i.status))throw new fL(qd(i),i.status);let r;try{r=await i.json()}catch(c){throw new Yd(qd(c),c)}let o;const l=tve(i);if(l&&l.getTime()>=Gq["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new zB(qd(r),i.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(o==="session_not_found")throw new eo}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new zB(qd(r),i.status,r.weak_password.reasons);throw new N0e(qd(r),i.status||500,o)}const ave=(i,t,r,o)=>{const l={method:i,headers:(t==null?void 0:t.headers)||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),r))};async function Lt(i,t,r,o){var l;const c=Object.assign({},o==null?void 0:o.headers);c[hL]||(c[hL]=Gq["2024-01-01"].name),o!=null&&o.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const h=(l=o==null?void 0:o.query)!==null&&l!==void 0?l:{};o!=null&&o.redirectTo&&(h.redirect_to=o.redirectTo);const d=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await lve(i,t,r+d,{headers:c,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(m):{data:Object.assign({},m),error:null}}async function lve(i,t,r,o,l,c){const h=ave(t,o,l,c);let d;try{d=await i(r,Object.assign({},h))}catch(m){throw console.error(m),new fL(qd(m),0)}if(d.ok||await JB(d),o!=null&&o.noResolveJson)return d;try{return await d.json()}catch(m){await JB(m)}}function sa(i){var t;let r=null;dve(i)&&(r=Object.assign({},i),i.expires_at||(r.expires_at=H0e(i.expires_in)));const o=(t=i.user)!==null&&t!==void 0?t:i;return{data:{session:r,user:o},error:null}}function ZB(i){const t=sa(i);return!t.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(t.data.weak_password=i.weak_password),t}function dc(i){var t;return{data:{user:(t=i.user)!==null&&t!==void 0?t:i},error:null}}function uve(i){return{data:i,error:null}}function cve(i){const{action_link:t,email_otp:r,hashed_token:o,redirect_to:l,verification_type:c}=i,h=Am(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:o,redirect_to:l,verification_type:c},m=Object.assign({},h);return{data:{properties:d,user:m},error:null}}function e7(i){return i}function dve(i){return i.access_token&&i.refresh_token&&i.expires_in}const l_=["global","local","others"];class hve{constructor({url:t="",headers:r={},fetch:o}){this.url=t,this.headers=r,this.fetch=Kq(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=l_[0]){if(l_.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${l_.join(", ")}`);try{return await Lt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(o){if(vt(o))return{data:null,error:o};throw o}}async inviteUserByEmail(t,r={}){try{return await Lt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:dc})}catch(o){if(vt(o))return{data:{user:null},error:o};throw o}}async generateLink(t){try{const{options:r}=t,o=Am(t,["options"]),l=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(l.new_email=o==null?void 0:o.newEmail,delete l.newEmail),await Lt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:cve,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(vt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Lt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:dc})}catch(r){if(vt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,o,l,c,h,d,m;try{const v={nextPage:null,lastPage:0,total:0},x=await Lt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(c=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:e7});if(x.error)throw x.error;const T=await x.json(),E=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,A=(m=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return A.length>0&&(A.forEach(k=>{const _=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(k.split(";")[1].split("=")[1]);v[`${R}Page`]=_}),v.total=parseInt(E)),{data:Object.assign(Object.assign({},T),v),error:null}}catch(v){if(vt(v))return{data:{users:[]},error:v};throw v}}async getUserById(t){Jf(t);try{return await Lt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:dc})}catch(r){if(vt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Jf(t);try{return await Lt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:dc})}catch(o){if(vt(o))return{data:{user:null},error:o};throw o}}async deleteUser(t,r=!1){Jf(t);try{return await Lt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:dc})}catch(o){if(vt(o))return{data:{user:null},error:o};throw o}}async _listFactors(t){Jf(t.userId);try{const{data:r,error:o}=await Lt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:o}}catch(r){if(vt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Jf(t.userId),Jf(t.id);try{return{data:await Lt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(vt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,o,l,c,h,d,m;try{const v={nextPage:null,lastPage:0,total:0},x=await Lt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(c=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:e7});if(x.error)throw x.error;const T=await x.json(),E=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,A=(m=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return A.length>0&&(A.forEach(k=>{const _=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(k.split(";")[1].split("=")[1]);v[`${R}Page`]=_}),v.total=parseInt(E)),{data:Object.assign(Object.assign({},T),v),error:null}}catch(v){if(vt(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(t){try{return await Lt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(vt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Lt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(vt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Lt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(vt(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(t){try{return await Lt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(vt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Lt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(vt(r))return{data:null,error:r};throw r}}}function t7(i={}){return{getItem:t=>i[t]||null,setItem:(t,r)=>{i[t]=r},removeItem:t=>{delete i[t]}}}const Zf={debug:!!(globalThis&&qq()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zq extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class fve extends zq{}async function pve(i,t,r){Zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,t);const o=new globalThis.AbortController;return t>0&&setTimeout(()=>{o.abort(),Zf.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){Zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await r()}finally{Zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(t===0)throw Zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new fve(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Zf.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function mve(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Wq(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function gve(i){return parseInt(i,16)}function vve(i){const t=new TextEncoder().encode(i);return"0x"+Array.from(t,o=>o.toString(16).padStart(2,"0")).join("")}function yve(i){var t;const{chainId:r,domain:o,expirationTime:l,issuedAt:c=new Date,nonce:h,notBefore:d,requestId:m,resources:v,scheme:x,uri:T,version:E}=i;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!T)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((t=i.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const A=Wq(i.address),k=x?`${x}://${o}`:o,_=i.statement?`${i.statement}
`:"",R=`${k} wants you to sign in with your Ethereum account:
${A}

${_}`;let P=`URI: ${T}
Version: ${E}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${c.toISOString()}`;if(l&&(P+=`
Expiration Time: ${l.toISOString()}`),d&&(P+=`
Not Before: ${d.toISOString()}`),m&&(P+=`
Request ID: ${m}`),v){let D=`
Resources:`;for(const N of v){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);D+=`
- ${N}`}P+=D}return`${R}
${P}`}class $r extends Error{constructor({message:t,code:r,cause:o,name:l}){var c;super(t,{cause:o}),this.__isWebAuthnError=!0,this.name=(c=l??(o instanceof Error?o.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class kw extends $r{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function xve({error:i,options:t}){var r,o,l;const{publicKey:c}=t;if(!c)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $r({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new $r({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(t.mediation==="conditional"&&((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new $r({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((l=c.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new $r({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new $r({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new $r({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return c.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new $r({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new $r({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const h=window.location.hostname;if(Yq(h)){if(c.rp.id!==h)return new $r({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new $r({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new $r({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new $r({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new $r({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function Tve({error:i,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $r({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new $r({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const o=window.location.hostname;if(Yq(o)){if(r.rpId!==o)return new $r({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new $r({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new $r({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new $r({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class Sve{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const wve=new Sve;function Eve(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:t,user:r,excludeCredentials:o}=i,l=Am(i,["challenge","user","excludeCredentials"]),c=Mp(t).buffer,h=Object.assign(Object.assign({},r),{id:Mp(r.id).buffer}),d=Object.assign(Object.assign({},l),{challenge:c,user:h});if(o&&o.length>0){d.excludeCredentials=new Array(o.length);for(let m=0;m<o.length;m++){const v=o[m];d.excludeCredentials[m]=Object.assign(Object.assign({},v),{id:Mp(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return d}function bve(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:t,allowCredentials:r}=i,o=Am(i,["challenge","allowCredentials"]),l=Mp(t).buffer,c=Object.assign(Object.assign({},o),{challenge:l});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const d=r[h];c.allowCredentials[h]=Object.assign(Object.assign({},d),{id:Mp(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function Ave(i){var t;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i;return{id:i.id,rawId:i.id,response:{attestationObject:Zd(new Uint8Array(i.response.attestationObject)),clientDataJSON:Zd(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Ive(i){var t;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i,o=i.getClientExtensionResults(),l=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Zd(new Uint8Array(l.authenticatorData)),clientDataJSON:Zd(new Uint8Array(l.clientDataJSON)),signature:Zd(new Uint8Array(l.signature)),userHandle:l.userHandle?Zd(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Yq(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function n7(){var i,t;return!!(_i()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Cve(i){try{const t=await navigator.credentials.create(i);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kw("Browser returned unexpected credential type",t)}:{data:null,error:new kw("Empty credential response",t)}}catch(t){return{data:null,error:xve({error:t,options:i})}}}async function kve(i){try{const t=await navigator.credentials.get(i);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kw("Browser returned unexpected credential type",t)}:{data:null,error:new kw("Empty credential response",t)}}catch(t){return{data:null,error:Tve({error:t,options:i})}}}const _ve={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Rve={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function _w(...i){const t=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),r=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of i)if(l)for(const c in l){const h=l[c];if(h!==void 0)if(Array.isArray(h))o[c]=h;else if(r(h))o[c]=h;else if(t(h)){const d=o[c];t(d)?o[c]=_w(d,h):o[c]=_w(h)}else o[c]=h}return o}function Lve(i,t){return _w(_ve,i,t||{})}function Pve(i,t){return _w(Rve,i,t||{})}class Dve{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:o,signal:l},c){try{const{data:h,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!h)return{data:null,error:d};const m=l??wve.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:v}=h.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${o}`),v.displayName||(v.displayName=v.name)}switch(h.webauthn.type){case"create":{const v=Lve(h.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:x,error:T}=await Cve({publicKey:v,signal:m});return x?{data:{factorId:t,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:x}},error:null}:{data:null,error:T}}case"request":{const v=Pve(h.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:x,error:T}=await kve(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:v,signal:m}));return x?{data:{factorId:t,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:x}},error:null}:{data:null,error:T}}}}catch(h){return vt(h)?{data:null,error:h}:{data:null,error:new Yd("Unexpected error in challenge",h)}}}async _verify({challengeId:t,factorId:r,webauthn:o}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:o})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!r)return{data:null,error:new kv("rpId is required for WebAuthn authentication")};try{if(!n7())return{data:null,error:new Yd("Browser does not support WebAuthn",null)};const{data:h,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:o},signal:l},{request:c});if(!h)return{data:null,error:d};const{webauthn:m}=h;return this._verify({factorId:t,challengeId:h.challengeId,webauthn:{type:m.type,rpId:r,rpOrigins:o,credential_response:m.credential_response}})}catch(h){return vt(h)?{data:null,error:h}:{data:null,error:new Yd("Unexpected error in authenticate",h)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!r)return{data:null,error:new kv("rpId is required for WebAuthn registration")};try{if(!n7())return{data:null,error:new Yd("Browser does not support WebAuthn",null)};const{data:h,error:d}=await this._enroll({friendlyName:t});if(!h)return await this.client.mfa.listFactors().then(x=>{var T;return(T=x.data)===null||T===void 0?void 0:T.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===t&&E.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:d};const{data:m,error:v}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:l},{create:c});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:r,rpOrigins:o,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:v}}catch(h){return vt(h)?{data:null,error:h}:{data:null,error:new Yd("Unexpected error in register",h)}}}}mve();const Nve={url:_0e,storageKey:R0e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:L0e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function r7(i,t,r){return await r()}const ep={};class _v{get jwks(){var t,r;return(r=(t=ep[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ep[this.storageKey]=Object.assign(Object.assign({},ep[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ep[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ep[this.storageKey]=Object.assign(Object.assign({},ep[this.storageKey]),{cachedAt:t})}constructor(t){var r,o,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},Nve),t);if(this.storageKey=c.storageKey,this.instanceID=(r=_v.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,_v.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&_i()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new hve({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Kq(c.fetch),this.lock=c.lock||r7,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:this.persistSession&&_i()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=pve:this.lock=r7,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Dve(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:qq()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=t7(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=t7(this.memoryStorage)),_i()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Vq}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},o="none";if(_i()&&(r=K0e(window.location.href),this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce")),_i()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),j0e(c)){const m=(t=c.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:h,redirectType:d}=l;return this._debug("#_initialize()","detected session in URL",h,"redirect type",d),await this._saveSession(h),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return vt(r)?this._returnResult({error:r}):this._returnResult({error:new Yd("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,o,l;try{const c=await Lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=t==null?void 0:t.options)===null||l===void 0?void 0:l.captchaToken}},xform:sa}),{data:h,error:d}=c;if(d||!h)return this._returnResult({data:{user:null,session:null},error:d});const m=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(c){if(vt(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(t){var r,o,l;try{let c;if("email"in t){const{email:x,password:T,options:E}=t;let A=null,k=null;this.flowType==="pkce"&&([A,k]=await Qf(this.storage,this.storageKey)),c=await Lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:x,password:T,data:(r=E==null?void 0:E.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:A,code_challenge_method:k},xform:sa})}else if("phone"in t){const{phone:x,password:T,options:E}=t;c=await Lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:T,data:(o=E==null?void 0:E.data)!==null&&o!==void 0?o:{},channel:(l=E==null?void 0:E.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:sa})}else throw new sS("You must provide either an email or phone number and a password");const{data:h,error:d}=c;if(d||!h)return await ki(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const m=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(c){if(await ki(this.storage,`${this.storageKey}-code-verifier`),vt(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(t){try{let r;if("email"in t){const{email:c,password:h,options:d}=t;r=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:ZB})}else if("phone"in t){const{phone:c,password:h,options:d}=t;r=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:ZB})}else throw new sS("You must provide either an email or phone number and a password");const{data:o,error:l}=r;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const c=new Xf;return this._returnResult({data:{user:null,session:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(r){if(vt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,o,l,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,o,l,c,h,d,m,v,x,T,E;let A,k;if("message"in t)A=t.message,k=t.signature;else{const{chain:_,wallet:R,statement:P,options:D}=t;let N;if(_i())if(typeof R=="object")N=R;else{const ee=window;if("ethereum"in ee&&typeof ee.ethereum=="object"&&"request"in ee.ethereum&&typeof ee.ethereum.request=="function")N=ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=R}const $=new URL((r=D==null?void 0:D.url)!==null&&r!==void 0?r:window.location.href),V=await N.request({method:"eth_requestAccounts"}).then(ee=>ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=Wq(V[0]);let C=(o=D==null?void 0:D.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!C){const ee=await N.request({method:"eth_chainId"});C=gve(ee)}const K={domain:$.host,address:W,statement:P,uri:$.href,version:"1",chainId:C,nonce:(l=D==null?void 0:D.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(h=(c=D==null?void 0:D.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(d=D==null?void 0:D.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(m=D==null?void 0:D.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(v=D==null?void 0:D.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(x=D==null?void 0:D.signInWithEthereum)===null||x===void 0?void 0:x.resources};A=yve(K),k=await N.request({method:"personal_sign",params:[vve(A),W]})}try{const{data:_,error:R}=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:k},!((T=t.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(E=t.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:sa});if(R)throw R;if(!_||!_.session||!_.user){const P=new Xf;return this._returnResult({data:{user:null,session:null},error:P})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:R})}catch(_){if(vt(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(t){var r,o,l,c,h,d,m,v,x,T,E,A;let k,_;if("message"in t)k=t.message,_=t.signature;else{const{chain:R,wallet:P,statement:D,options:N}=t;let $;if(_i())if(typeof P=="object")$=P;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))$=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=P}const V=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in $&&$.signIn){const W=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),D?{statement:D}:null));let C;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")C=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)C=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)k=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),_=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${V.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(l=(o=N==null?void 0:N.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((h=N==null?void 0:N.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((m=N==null?void 0:N.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((v=N==null?void 0:N.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((T=(x=N==null?void 0:N.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||T===void 0)&&T.length?["Resources",...N.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const W=await $.signMessage(new TextEncoder().encode(k),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=W}}try{const{data:R,error:P}=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Zd(_)},!((E=t.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(A=t.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:sa});if(P)throw P;if(!R||!R.session||!R.user){const D=new Xf;return this._returnResult({data:{user:null,session:null},error:D})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:P})}catch(R){if(vt(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(t){const r=await Bd(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(r??"").split("/");try{if(!o&&this.flowType==="pkce")throw new U0e;const{data:c,error:h}=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:o},xform:sa});if(await ki(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!c||!c.session||!c.user){const d=new Xf;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:h})}catch(c){if(await ki(this.storage,`${this.storageKey}-code-verifier`),vt(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(t){try{const{options:r,provider:o,token:l,access_token:c,nonce:h}=t,d=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:sa}),{data:m,error:v}=d;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!m||!m.session||!m.user){const x=new Xf;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:v})}catch(r){if(vt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,o,l,c,h;try{if("email"in t){const{email:d,options:m}=t;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await Qf(this.storage,this.storageKey));const{error:T}=await Lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(o=m==null?void 0:m.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:v,code_challenge_method:x},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:T})}if("phone"in t){const{phone:d,options:m}=t,{data:v,error:x}=await Lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(l=m==null?void 0:m.data)!==null&&l!==void 0?l:{},create_user:(c=m==null?void 0:m.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v==null?void 0:v.message_id},error:x})}throw new sS("You must provide either an email or phone number.")}catch(d){if(await ki(this.storage,`${this.storageKey}-code-verifier`),vt(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,o;try{let l,c;"options"in t&&(l=(r=t.options)===null||r===void 0?void 0:r.redirectTo,c=(o=t.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:d}=await Lt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:sa});if(d)throw d;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,v=h.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(l){if(vt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(t){var r,o,l,c,h;try{let d=null,m=null;this.flowType==="pkce"&&([d,m]=await Qf(this.storage,this.storageKey));const v=await Lt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=t==null?void 0:t.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:m}),headers:this.headers,xform:uve});return!((c=v.data)===null||c===void 0)&&c.url&&_i()&&!(!((h=t.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(d){if(await ki(this.storage,`${this.storageKey}-code-verifier`),vt(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:o}=t;if(o)throw o;if(!r)throw new eo;const{error:l}=await Lt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(t){if(vt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:o,type:l,options:c}=t,{error:h}=await Lt(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in t){const{phone:o,type:l,options:c}=t,{data:h,error:d}=await Lt(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:d})}throw new sS("You must provide either an email or phone number and a type")}catch(r){if(vt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Bd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const o=t.expires_at?t.expires_at*1e3-Date.now()<i_:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",t.expires_at),!o){if(this.userStorage){const h=await Bd(this.userStorage,this.storageKey+"-user");h!=null&&h.user?t.user=h.user:t.user=a_()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};t.user=sve(t.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:dc}):await this._useSession(async r=>{var o,l,c;const{data:h,error:d}=r;if(d)throw d;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new eo}:await Lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:dc})})}catch(r){if(vt(r))return O0e(r)&&(await this._removeSession(),await ki(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async o=>{const{data:l,error:c}=o;if(c)throw c;if(!l.session)throw new eo;const h=l.session;let d=null,m=null;this.flowType==="pkce"&&t.email!=null&&([d,m]=await Qf(this.storage,this.storageKey));const{data:v,error:x}=await Lt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:m}),jwt:h.access_token,xform:dc});if(x)throw x;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(o){if(await ki(this.storage,`${this.storageKey}-code-verifier`),vt(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new eo;const r=Date.now()/1e3;let o=r,l=!0,c=null;const{payload:h}=o_(t.access_token);if(h.exp&&(o=h.exp,l=o<=r),l){const{data:d,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!d)return{data:{user:null,session:null},error:null};c=d}else{const{data:d,error:m}=await this._getUser(t.access_token);if(m)throw m;c={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(r){if(vt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var o;if(!t){const{data:h,error:d}=r;if(d)throw d;t=(o=h.session)!==null&&o!==void 0?o:void 0}if(!(t!=null&&t.refresh_token))throw new eo;const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(vt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!_i())throw new oS("No browser detected.");if(t.error||t.error_description||t.error_code)throw new oS(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new KB("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new oS("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new KB("No code detected.");const{data:D,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:c,refresh_token:h,expires_in:d,expires_at:m,token_type:v}=t;if(!c||!d||!h||!v)throw new oS("No session defined in URL");const x=Math.round(Date.now()/1e3),T=parseInt(d);let E=x+T;m&&(E=parseInt(m));const A=E-x;A*1e3<=lp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${T}s`);const k=E-T;x-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,E,x):x-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,E,x);const{data:_,error:R}=await this._getUser(c);if(R)throw R;const P={provider_token:o,provider_refresh_token:l,access_token:c,expires_in:T,expires_at:E,refresh_token:h,token_type:v,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:P,redirectType:t.type},error:null})}catch(o){if(vt(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Bd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:l,error:c}=r;if(c)return this._returnResult({error:c});const h=(o=l.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:d}=await this.admin.signOut(h,t);if(d&&!(M0e(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await ki(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=q0e(),o={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(t){return await this._useSession(async r=>{var o,l;try{const{data:{session:c},error:h}=r;if(h)throw h;await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,r={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Qf(this.storage,this.storageKey,!0));try{return await Lt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(await ki(this.storage,`${this.storageKey}-code-verifier`),vt(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var t;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(vt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:o,error:l}=await this._useSession(async c=>{var h,d,m,v,x;const{data:T,error:E}=c;if(E)throw E;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(h=t.options)===null||h===void 0?void 0:h.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Lt(this.fetch,"GET",A,{headers:this.headers,jwt:(x=(v=T.session)===null||v===void 0?void 0:v.access_token)!==null&&x!==void 0?x:void 0})});if(l)throw l;return _i()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:t.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(vt(o))return this._returnResult({data:{provider:t.provider,url:null},error:o});throw o}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var o;try{const{error:l,data:{session:c}}=r;if(l)throw l;const{options:h,provider:d,token:m,access_token:v,nonce:x}=t,T=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=c==null?void 0:c.access_token)!==null&&o!==void 0?o:void 0,body:{provider:d,id_token:m,access_token:v,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:sa}),{data:E,error:A}=T;return A?this._returnResult({data:{user:null,session:null},error:A}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new Xf}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:A}))}catch(l){if(await ki(this.storage,`${this.storageKey}-code-verifier`),vt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var o,l;const{data:c,error:h}=r;if(h)throw h;return await Lt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(vt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await Y0e(async l=>(l>0&&await W0e(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await Lt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:sa})),(l,c)=>{const h=200*Math.pow(2,l);return c&&s_(c)&&Date.now()+h-o<lp})}catch(o){if(this._debug(r,"error",o),vt(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",o),_i()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:t,url:o},error:null}}async _recoverAndRefresh(){var t,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await Bd(this.storage,this.storageKey);if(l&&this.userStorage){let h=await Bd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:l.user},await up(this.userStorage,this.storageKey+"-user",h)),l.user=(t=h==null?void 0:h.user)!==null&&t!==void 0?t:a_()}else if(l&&!l.user&&!l.user){const h=await Bd(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(l.user=h.user,await ki(this.storage,this.storageKey+"-user"),await up(this.storage,this.storageKey,l)):l.user=a_()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const c=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<i_;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${i_}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:h}=await this._callRefreshToken(l.refresh_token);h&&(console.error(h),s_(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:d}=await this._getUser(l.access_token);!d&&(h!=null&&h.user)?(l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(t){var r,o;if(!t)throw new eo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new LE;const{data:c,error:h}=await this._refreshAccessToken(t);if(h)throw h;if(!c.session)throw new eo;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const d={data:c.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(c){if(this._debug(l,"error",c),vt(c)){const h={data:null,error:c};return s_(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,r,o=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:t,session:r});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(m){c.push(m)}});if(await Promise.all(h),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ki(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await up(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const c=QB(l);await up(this.storage,this.storageKey,c)}else{const l=QB(r);await up(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ki(this.storage,this.storageKey),await ki(this.storage,this.storageKey+"-code-verifier"),await ki(this.storage,this.storageKey+"-user"),this.userStorage&&await ki(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&_i()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),lp);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-t)/lp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${lp}ms, refresh threshold is ${dL} ticks`),l<=dL&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof zq)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_i()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,o){const l=[`provider=${encodeURIComponent(r)}`];if(o!=null&&o.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,h]=await Qf(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});l.push(d.toString())}if(o!=null&&o.queryParams){const c=new URLSearchParams(o.queryParams);l.push(c.toString())}return o!=null&&o.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var o;const{data:l,error:c}=r;return c?this._returnResult({data:null,error:c}):await Lt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(vt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var o,l;const{data:c,error:h}=r;if(h)return this._returnResult({data:null,error:h});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:v}=await Lt(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(t.factorType==="totp"&&m.type==="totp"&&(!((l=m==null?void 0:m.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(r){if(vt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:l,error:c}=r;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Ave(t.webauthn.credential_response):Ive(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:m}=await Lt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:h,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:m}))})}catch(r){if(vt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:l,error:c}=r;if(c)return this._returnResult({data:null,error:c});const h=await Lt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});if(h.error)return h;const{data:d}=h;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:Eve(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:bve(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(vt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:o}=await this._challenge({factorId:t.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const c of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])l.all.push(c),c.status==="verified"&&l[c.factor_type].push(c);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=o_(o.access_token);let h=null;c.aal&&(h=c.aal);let d=h;((r=(t=o.user.factors)===null||t===void 0?void 0:t.filter(x=>x.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const v=c.amr||[];return{data:{currentLevel:h,nextLevel:d,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;return l?this._returnResult({data:null,error:l}):o?await Lt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:o.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new eo})})}catch(r){if(vt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async o=>{const{data:{session:l},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new eo});const h=await Lt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return h.data&&h.data.redirect_url&&_i()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(o){if(vt(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(t,r){try{return await this._useSession(async o=>{const{data:{session:l},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new eo});const h=await Lt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return h.data&&h.data.redirect_url&&_i()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(o){if(vt(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:o}=t;return o?this._returnResult({data:null,error:o}):r?await Lt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new eo})})}catch(t){if(vt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;return l?this._returnResult({data:null,error:l}):o?(await Lt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new eo})})}catch(r){if(vt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let o=r.keys.find(d=>d.kid===t);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(d=>d.kid===t),o&&this.jwks_cached_at+D0e>l)return o;const{data:c,error:h}=await Lt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,o=c.keys.find(d=>d.kid===t),!o)?null:o}async getClaims(t,r={}){try{let o=t;if(!o){const{data:A,error:k}=await this.getSession();if(k||!A.session)return this._returnResult({data:null,error:k});o=A.session.access_token}const{header:l,payload:c,signature:h,raw:{header:d,payload:m}}=o_(o);r!=null&&r.allowExpired||nve(c.exp);const v=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!v){const{error:A}=await this.getUser(o);if(A)throw A;return{data:{claims:c,header:l,signature:h},error:null}}const x=rve(l.alg),T=await crypto.subtle.importKey("jwk",v,x,!0,["verify"]);if(!await crypto.subtle.verify(x,T,h,G0e(`${d}.${m}`)))throw new pL("Invalid JWT signature");return{data:{claims:c,header:l,signature:h},error:null}}catch(o){if(vt(o))return this._returnResult({data:null,error:o});throw o}}}_v.nextInstanceID={};const Mve=_v,Ove="2.89.0";let j0="";typeof Deno<"u"?j0="deno":typeof document<"u"?j0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?j0="react-native":j0="node";const jve={"X-Client-Info":`supabase-js-${j0}/${Ove}`},Uve={headers:jve},Fve={schema:"public"},Bve={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$ve={};function Rv(i){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(i)}function Vve(i,t){if(Rv(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var o=r.call(i,t);if(Rv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function Gve(i){var t=Vve(i,"string");return Rv(t)=="symbol"?t:t+""}function Hve(i,t,r){return(t=Gve(t))in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r,i}function i7(i,t){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),r.push.apply(r,o)}return r}function Ir(i){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i7(Object(r),!0).forEach(function(o){Hve(i,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):i7(Object(r)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})}return i}const qve=i=>i?(...t)=>i(...t):(...t)=>fetch(...t),Kve=()=>Headers,zve=(i,t,r)=>{const o=qve(r),l=Kve();return async(c,h)=>{var d;const m=(d=await t())!==null&&d!==void 0?d:i;let v=new l(h==null?void 0:h.headers);return v.has("apikey")||v.set("apikey",i),v.has("Authorization")||v.set("Authorization",`Bearer ${m}`),o(c,Ir(Ir({},h),{},{headers:v}))}};function Wve(i){return i.endsWith("/")?i:i+"/"}function Yve(i,t){var r,o;const{db:l,auth:c,realtime:h,global:d}=i,{db:m,auth:v,realtime:x,global:T}=t,E={db:Ir(Ir({},m),l),auth:Ir(Ir({},v),c),realtime:Ir(Ir({},x),h),storage:{},global:Ir(Ir(Ir({},T),d),{},{headers:Ir(Ir({},(r=T==null?void 0:T.headers)!==null&&r!==void 0?r:{}),(o=d==null?void 0:d.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return i.accessToken?E.accessToken=i.accessToken:delete E.accessToken,E}function Xve(i){const t=i==null?void 0:i.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wve(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Qve=class extends Mve{constructor(i){super(i)}},Jve=class{constructor(i,t,r){var o,l;this.supabaseUrl=i,this.supabaseKey=t;const c=Xve(i);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Fve,realtime:$ve,auth:Ir(Ir({},Bve),{},{storageKey:h}),global:Uve},m=Yve(r??{},d);if(this.storageKey=(o=m.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=m.global.headers)!==null&&l!==void 0?l:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(x,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=m.auth)!==null&&v!==void 0?v:{},this.headers,m.global.fetch)}this.fetch=zve(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Ir({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new Lge(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new k0e(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Ige(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,t,r)}channel(i,t={config:{}}){return this.realtime.channel(i,t)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,t,r;if(i.accessToken)return await i.accessToken();const{data:o}=await i.auth.getSession();return(t=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:t,detectSessionInUrl:r,storage:o,userStorage:l,storageKey:c,flowType:h,lock:d,debug:m,throwOnError:v},x,T){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qve({url:this.authUrl.href,headers:Ir(Ir({},E),x),storageKey:c,autoRefreshToken:i,persistSession:t,detectSessionInUrl:r,storage:o,userStorage:l,flowType:h,lock:d,debug:m,throwOnError:v,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new Wge(this.realtimeUrl.href,Ir(Ir({},i),{},{params:Ir(Ir({},{apikey:this.supabaseKey}),i==null?void 0:i.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,t)=>{this._handleTokenChanged(i,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(i,t,r){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Zve=(i,t,r)=>new Jve(i,t,r);function eye(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const t=i.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}eye()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tye="https://wmjebiejrjgfafsniqlx.supabase.co",nye="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndtamViaWVqcmpnZmFmc25pcWx4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyOTk3NTYsImV4cCI6MjA4MTg3NTc1Nn0.Ki07Cmt9KVCpAYzIjThYe4IFK1la6jZAVGoblbbJ5po",Bt=Zve(tye,nye,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),RP=Jv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ge=M.forwardRef(({className:i,variant:t,size:r,asChild:o=!1,...l},c)=>{const h=o?xue:"button";return S.jsx(h,{className:yt(RP({variant:t,size:r,className:i})),ref:c,...l})});Ge.displayName="Button";function rye(){const{theme:i,setTheme:t}=rH();return S.jsxs(Ge,{variant:"ghost",size:"icon",onClick:()=>t(i==="dark"?"light":"dark"),className:"text-muted-foreground hover:text-foreground",children:[S.jsx(Pce,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),S.jsx(Sce,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),S.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}const hr=M.forwardRef(({className:i,type:t,...r},o)=>S.jsx("input",{type:t,className:yt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:o,...r}));hr.displayName="Input";const Qi="2283c405a7e1d26a6b72a786916aad85",Ji="https://api.themoviedb.org/3",iye="https://image.tmdb.org/t/p",Xq=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Sci-Fi"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],Qq=[{id:10759,name:"Action & Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:10762,name:"Kids"},{id:9648,name:"Mystery"},{id:10763,name:"News"},{id:10764,name:"Reality"},{id:10765,name:"Sci-Fi & Fantasy"},{id:10766,name:"Soap"},{id:10767,name:"Talk"},{id:10768,name:"War & Politics"},{id:37,name:"Western"}],Bc=(i,t="w500")=>i?`${iye}/${t}${i}`:"https://via.placeholder.com/500x750?text=No+Image",Jq=async(i="all",t="week")=>(await(await fetch(`${Ji}/trending/${i}/${t}?api_key=${Qi}`)).json()).results,Zq=async(i=1)=>(await(await fetch(`${Ji}/movie/popular?api_key=${Qi}&page=${i}`)).json()).results,eK=async(i=1)=>(await(await fetch(`${Ji}/tv/popular?api_key=${Qi}&page=${i}`)).json()).results,tK=async(i=1)=>(await(await fetch(`${Ji}/movie/top_rated?api_key=${Qi}&page=${i}`)).json()).results,sye=async(i=1)=>(await(await fetch(`${Ji}/tv/top_rated?api_key=${Qi}&page=${i}`)).json()).results,oye=async i=>(await fetch(`${Ji}/movie/${i}?api_key=${Qi}`)).json(),aye=async i=>(await fetch(`${Ji}/tv/${i}?api_key=${Qi}`)).json(),nK=async(i,t=1)=>(await(await fetch(`${Ji}/search/multi?api_key=${Qi}&query=${encodeURIComponent(i)}&page=${t}`)).json()).results.filter(l=>l.media_type==="movie"||l.media_type==="tv"),rK=async()=>(await(await fetch(`${Ji}/movie/now_playing?api_key=${Qi}`)).json()).results,lye=async()=>(await(await fetch(`${Ji}/movie/upcoming?api_key=${Qi}`)).json()).results,s7=(i,t,r,o)=>({"Server 1":t==="movie"?`https://vidsrc.cc/v2/embed/movie/${i}`:`https://vidsrc.cc/v2/embed/tv/${i}/${r}/${o}`,"Server 2":t==="movie"?`https://vidlink.pro/movie/${i}`:`https://vidlink.pro/tv/${i}/${r}/${o}`,"Server 3":t==="movie"?`https://multiembed.mov/?video_id=${i}&tmdb=1`:`https://multiembed.mov/?video_id=${i}&tmdb=1&s=${r}&e=${o}`}),uye=async(i,t)=>(await fetch(`${Ji}/tv/${i}/season/${t}?api_key=${Qi}`)).json(),cye=async(i=1)=>(await(await fetch(`${Ji}/discover/tv?api_key=${Qi}&with_genres=16&with_original_language=ja&sort_by=popularity.desc&page=${i}`)).json()).results,dye=async(i=1)=>(await(await fetch(`${Ji}/discover/movie?api_key=${Qi}&with_genres=16&with_original_language=ja&sort_by=popularity.desc&page=${i}`)).json()).results,hye=async(i=1)=>(await(await fetch(`${Ji}/discover/tv?api_key=${Qi}&with_genres=16&with_original_language=ja&sort_by=vote_average.desc&vote_count.gte=100&page=${i}`)).json()).results,fye=async(i,t)=>(await(await fetch(`${Ji}/${t}/${i}/videos?api_key=${Qi}`)).json()).results||[],pye=i=>{const t=i.find(r=>r.site==="YouTube"&&(r.type==="Trailer"||r.type==="Teaser"));return t?`https://www.youtube.com/embed/${t.key}?autoplay=1`:null},LP=async(i,t={})=>{const{page:r=1,genre:o,year:l,minRating:c,sortBy:h="popularity.desc"}=t;let d=`${Ji}/discover/${i}?api_key=${Qi}&page=${r}&sort_by=${h}`;return o&&(d+=`&with_genres=${o}`),l&&(i==="movie"?d+=`&primary_release_year=${l}`:d+=`&first_air_date_year=${l}`),c&&(d+=`&vote_average.gte=${c}&vote_count.gte=50`),(await(await fetch(d)).json()).results},PE=[{id:"gma7",name:"GMA 7",manifestUri:"https://gsattv.akamaized.net/live/media0/gma7/Fairplay/gma7.m3u8",type:"hls",logo:"https://philippines.mom-gmr.org/uploads/_processed_/0/4/csm_1011-167_import_5fdc5c345c.png"},{id:"a2z",name:"A2Z",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_a2z/default/index.mpd",clearKey:{f703e4c8ec9041eeb5028ab4248fa094:"c22f2162e176eee6273a5d0b68d19530"},type:"mpd",logo:"https://i.imgur.com/pRwyOMP.png"},{id:"flix",name:"&Flix",manifestUri:"https://edge3-moblive.yuppcdn.net/drm/smil:nflixdrm.smil/chunklist_b996000.m3u8",type:"hls",logo:"https://ts1.mm.bing.net/th?id=OIP.FlPpt1NoTPALgSMM8CwFgAHaHa&pid=15.1"},{id:"abc-australia",name:"ABC Australia",manifestUri:"https://qp-pldt-live-grp-10-prod.akamaized.net/out/u/dr_abc_aus.mpd",clearKey:{"389497f9f8584a57b234e27e430e04b7":"3b85594c7f88604adf004e45c03511c0"},type:"mpd",logo:"https://i.imgur.com/480rU5C.png"},{id:"animal-planet",name:"Animal Planet",manifestUri:"https://qp-pldt-live-grp-02-prod.akamaized.net/out/u/cg_animal_planet_sd.mpd",clearKey:{"436b69f987924fcbbc06d40a69c2799a":"c63d5b0d7e52335b61aeba4f6537d54d"},type:"mpd",logo:"https://api.discovery.com/v1/images/5bc91c366b66d1494068339e?aspectRatio=1x1&width=192&key=3020a40c2356a645b4b4"},{id:"animax",name:"Animax",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_animax_sd_new/default/index.mpd",clearKey:{"92032b0e41a543fb9830751273b8debd":"03f8b65e2af785b10d6634735dbe6c11"},type:"mpd",logo:"https://i.imgur.com/VLlyHhT.png"},{id:"anime-x-hidive",name:"Anime X Hidive",manifestUri:"https://amc-anime-x-hidive-1-us.tablo.wurl.tv/playlist.m3u8",type:"hls",logo:"https://www.tablotv.com/wp-content/uploads/2023/12/AnimeXHIDIVE_official-768x499.png"},{id:"ani-one",name:"Ani-One",manifestUri:"https://amg19223-amg19223c9-amgplt0019.playout.now3.amagi.tv/playlist/amg19223-amg19223c9-amgplt0019/playlist.m3u8",type:"hls",logo:"https://i.ibb.co/Rpj2zNY7/1.png"},{id:"aniplus",name:"Aniplus",manifestUri:"https://amg18481-amg18481c1-amgplt0352.playout.now3.amagi.tv/playlist/amg18481-amg18481c1-amgplt0352/playlist.m3u8",type:"hls",logo:"https://i.ibb.co/N2WkpBbJ/Gemini-Generated-Image-dwpwypdwpwypdwpw.png"},{id:"anc",name:"ANC",manifestUri:"https://cdn-ue1-prod.tsv2.amagi.tv/linear/amg01006-abs-cbn-anc-global-dash-abscbnono/index.mpd",clearKey:{"4bbdc78024a54662854b412d01fafa16":"6039ec9b213aca913821677a28bd78ae"},type:"mpd",logo:"https://vignette.wikia.nocookie.net/russel/images/5/52/ANC_HD_Logo_2016.png/revision/latest?cb=20180404015018"},{id:"axn",name:"AXN",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_axn_sd/default/index.mpd",clearKey:{fd5d928f5d974ca4983f6e9295dfe410:"3aaa001ddc142fedbb9d5557be43792f"},type:"mpd",logo:"https://upload.wikimedia.org/wikipedia/commons/d/d0/AXN_Logo_2015.png"},{id:"bbc-earth",name:"BBC Earth",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_bbcearth_hd1/default/index.mpd",clearKey:{"34ce95b60c424e169619816c5181aded":"0e2a2117d705613542618f58bf26fc8e"},type:"mpd",logo:"https://i.imgur.com/cvYi2Io.png"},{id:"bbc-world-news",name:"BBCWORLD News",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/bbcworld_news_sd/default/index.mpd",clearKey:{f59650be475e4c34a844d4e2062f71f3:"119639e849ddee96c4cec2f2b6b09b40"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.Dt6zbSEb8BztEMb1C93QHQHaHk?rs=1&pid=ImgDetMain"},{id:"billiard-tv",name:"Billiard TV",manifestUri:"https://1b29dd71cd5e4191a3eb26afff631ed3.mediatailor.us-west-2.amazonaws.com/v1/master/9d062541f2ff39b5c0f48b743c6411d25f62fc25/SportsTribal-BilliardTV/BILLIARDTV_SCTE.m3u8",type:"hls",logo:"https://th.bing.com/th/id/OIP.JKBoiu3cX_PVMSwZLYFxCAHaHa?rs=1&pid=ImgDetMain"},{id:"bilyonaryo",name:"Bilyonaryo",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/bilyonaryoch/default/index.mpd",clearKey:{"227ffaf09bec4a889e0e0988704d52a2":"b2d0dce5c486891997c1c92ddaca2cd2"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.O2OG_59US0j-zqWyZwqhXAHaCH?rs=1&pid=ImgDetMain"},{id:"blast-movies",name:"Blast Movies",manifestUri:"https://amg19223-amg19223c7-amgplt0351.playout.now3.amagi.tv/playlist/amg19223-amg19223c7-amgplt0351/playlist.m3u8",type:"hls",logo:"https://i.ibb.co/G3sSvQmD/unnamed-2.png"},{id:"blast-sports",name:"Blast Sports",manifestUri:"https://amg19223-amg19223c1-amgplt0351.playout.now3.amagi.tv/playlist/amg19223-amg19223c1-amgplt0351/playlist.m3u8",type:"hls",logo:"https://is1-ssl.mzstatic.com/image/thumb/Purple112/v4/62/d2/16/62d216ec-1c2f-0e1f-530e-0bdb23150ea2/AppIcon-0-0-1x_U007emarketing-0-10-0-0-85-220.png/1200x630wa.png"},{id:"bloomberg",name:"Bloomberg",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/bloomberg_sd/default/index.mpd",clearKey:{ef7d9dcfb99b406cb79fb9f675cba426:"b24094f6ca136af25600e44df5987af4"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.ayx_C9FL75IKjIl408wLagHaFj?rs=1&pid=ImgDetMain"},{id:"buko",name:"BUKO",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_buko_sd/default/index.mpd",clearKey:{d273c085f2ab4a248e7bfc375229007d:"7932354c3a84f7fc1b80efa6bcea0615"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.ph_7Uv-meouzQBVcfuuQQwHaIL?rs=1&pid=ImgDetMain"},{id:"cartoon-network",name:"Cartoon Network",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cartoonnetworkhd/default/index.mpd",clearKey:{a2d1f552ff9541558b3296b5a932136b:"cdd48fa884dc0c3a3f85aeebca13d444"},type:"mpd",logo:"https://i.imgur.com/9PLlajp.png"},{id:"cartoon-classics",name:"Cartoon Classics",manifestUri:"https://streams2.sofast.tv/v1/master/611d79b11b77e2f571934fd80ca1413453772ac7/d5543c06-5122-49a7-9662-32187f48aa2c/manifest.m3u8",type:"hls",logo:"https://tse1.mm.bing.net/th/id/OIP.e3EnrHl_y0kw59ySjxxmQAAAAA?rs=1&pid=ImgDetMain"},{id:"celestial-movies-pinoy",name:"Celestial Movies Pinoy",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/celmovie_pinoy_sd/default/index.mpd",clearKey:{"0f8537d8412b11edb8780242ac120002":"2ffd7230416150fd5196fd7ea71c36f3"},type:"mpd",logo:"https://cms.cignal.tv/Upload/Images/Celestial-Logo-2022.jpg"},{id:"celestial-movies",name:"Celestial Movies",manifestUri:"https://linearjitp-playback.astro.com.my/dash-wv/linear/506/default_ott.mpd",clearKey:{c5c1ba26907291afec11a9a78d513410:"361197805d0149c29801946cf2dde67c"},type:"mpd",logo:"https://mir-s3-cdn-cf.behance.net/project_modules/1400/7a0c1582445367.5d1d90a91e63c.jpg"},{id:"cinema-one",name:"CinemaOne",manifestUri:"https://d9rpesrrg1bdi.cloudfront.net/out/v1/93b9db7b231d45f28f64f29b86dc6c65/index.mpd",clearKey:{"58d0e56991194043b8fb82feb4db7276":"d68f41b59649676788889e19fb10d22c"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.3wplDtTyzPCr4Yoyg8t_GgHaDC?rs=1&pid=ImgDetMain"},{id:"cinemo",name:"Cinemo",manifestUri:"https://d1bail49udbz1k.cloudfront.net/out/v1/3a895f368f4a467c9bca0962559efc19/index.mpd",clearKey:{aa8aebe35ccc4541b7ce6292efcb1bfb:"aab1df109d22fc5d7e3ec121ddf24e5f"},type:"mpd",logo:"https://ottepg8.comclark.com:8443/iptvepg/images/markurl/mark_1723219276891.png"},{id:"cinemax",name:"Cinemax",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_cinemax/default/index.mpd",clearKey:{b207c44332844523a3a3b0469e5652d7:"fe71aea346db08f8c6fbf0592209f955"},type:"mpd",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Cinemax_%28Yellow%29.svg/1200px-Cinemax_%28Yellow%29.svg.png"},{id:"cctv4",name:"CCTV4",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_cctv4/default/index.mpd",clearKey:{"0f8541ec412b11edb8780242ac120002":"6cf16c272b7357c48cd47061799a4963"},type:"mpd",logo:"https://w7.pngwing.com/pngs/976/161/png-transparent-china-central-television-cctv-4-cgtn-russian-cctv-channels-television-channel-others-miscellaneous-television-text.png"},{id:"channel-news-asia",name:"Channel News Asia",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/channelnewsasia/default/index.mpd",clearKey:{b259df9987364dd3b778aa5d42cb9acd:"753e3dba96ab467e468269e7e33fb813"},type:"mpd",logo:"https://www.sopasia.com/wp-content/uploads/2014/04/logo_Channel-NewsAsia-logo.jpg"},{id:"cnn-international",name:"CNN INTERNATIONAL",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_cnnhd/default/index.mpd",clearKey:{"900c43f0e02742dd854148b7a75abbec":"da315cca7f2902b4de23199718ed7e90"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.S7pJUpbQ6mU4KQeBF66nMgHaHa?rs=1&pid=ImgDetMain"},{id:"crime-investigation",name:"CRIME INVESTIGATION",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/crime_invest/default/index.mpd",clearKey:{"21e2843b561c4248b8ea487986a16d33":"db6bb638ccdfc1ad1a3e98d728486801"},type:"mpd",logo:"https://download.logo.wine/logo/Crime_%2B_Investigation_(Australian_TV_channel)/Crime_%2B_Investigation_(Australian_TV_channel)-Logo.wine.png"},{id:"dzrh-tv",name:"DZRH TV",type:"youtube",manifestUri:"",embedUrl:"https://www.youtube.com/embed/live_stream?channel=UCcTiBX8js_djhSSlmJRI99A",logo:"https://th.bing.com/th/id/OIP.LA48bslLAx_sTgviWD-EKQAAAA?rs=1&pid=ImgDetMain"},{id:"deped-channel",name:"DepEd Channel",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/depedch_sd/default/index.mpd",clearKey:{"0f853706412b11edb8780242ac120002":"2157d6529d80a760f60a8b5350dbc4df"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.MPPdJ1ObiLG4Q6MFEDQ4pAHaEH?rs=1&pid=ImgDetMain"},{id:"discovery-channel",name:"Discovery Channel",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/discovery/default/index.mpd",clearKey:{d9ac48f5131641a789328257e778ad3a:"b6e67c37239901980c6e37e0607ceee6"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.4ONCH8mk4foZNv6W4xM0nQHaGa?rs=1&pid=ImgDetMain"},{id:"discovery-science",name:"Discovery Science",manifestUri:"https://d1g8wgjurz8via.cloudfront.net/bpk-tv/Discoveryscience2/default/manifest.mpd",clearKey:{"5458f45efedb4d6f8aa6ac76c85b621b":"dbf8a0a306a64525ba3012fd225370c0"},type:"mpd",logo:"https://banner2.cleanpng.com/20180824/ava/kisspng-science-channel-logo-discovery-channel-brand-showing-porn-images-for-greek-italian-porn-www-fre-1713949227223.webp"},{id:"disney-channel",name:"Disney Channel",manifestUri:"https://uselector.cdn.intigral-ott.net/DIS/DIS.isml/manifest.mpd",clearKey:{"72800c62fcf2bfbedd9af27d79ed35d6":"b6ccb9facb2c1c81ebe4dfaab8a45195"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.ry79quPYFII7hj-ZpuoDAQHaDt?rs=1&pid=ImgDetMain"},{id:"dreamworks-hd",name:"Dreamworks HD",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_dreamworks_hd1/default/index.mpd",clearKey:{"4ab9645a2a0a47edbd65e8479c2b9669":"8cb209f1828431ce9b50b593d1f44079"},type:"mpd",logo:"https://logos-world.net/wp-content/uploads/2020/12/DreamWorks-Animation-Logo.png"},{id:"dreamworks-tagalog",name:"Dreamworks Tagalog",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_dreamworktag/default/index.mpd",clearKey:{"564b3b1c781043c19242c66e348699c5":"d3ad27d7fe1f14fb1a2cd5688549fbab"},type:"mpd",logo:"https://logos-world.net/wp-content/uploads/2020/12/DreamWorks-Animation-Logo.png"},{id:"fashion-tv-hd",name:"Fashion TV HD",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/fashiontvhd/default/index.mpd",clearKey:{"971ebbe2d887476398e97c37e0c5c591":"472aa631b1e671070a4bf198f43da0c7"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.fRG_3Wx6qmssHxgeN5leBQHaD4?rs=1&pid=ImgDetMain"},{id:"food-network-hd",name:"Food Network HD",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_foodnetwork_hd1/default/index.mpd",clearKey:{b7299ea0af8945479cd2f287ee7d530e:"b8ae7679cf18e7261303313b18ba7a14"},type:"mpd",logo:"https://upload.wikimedia.org/wikipedia/commons/f/f9/Food_Network_New_Logo.png"},{id:"global-trekker",name:"Global Trekker",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/globaltrekker/default/index.mpd",clearKey:{"5c26c24bce2942078cf6e35216632c2d":"445887a1c0832ff457263d8bcadc993f"},type:"mpd",logo:"https://cdn2.ettoday.net/images/6892/e6892888.jpg"},{id:"gma-youtube",name:"GMA (Youtube Stream)",type:"youtube",manifestUri:"",embedUrl:"https://www.youtube.com/embed/live_stream?channel=UCKL5hAuzgFQsyrsQKgU0Qng",logo:"https://aphrodite.gmanetwork.com/entertainment/shows/images/1200_675_TVShow_MainTCARD_-20220622115633.png"},{id:"gma-pinoy-tv",name:"GMA Pinoy TV",manifestUri:"https://cdn-uw2-prod.tsv2.amagi.tv/linear/amg01006-abs-cbn-abscbn-gma-x7-dash-abscbnono/7c693236-e0c1-40a3-8bd0-bb25e43f5bfc/index.mpd",clearKey:{c95ed4c44b0b4f7fa1c6ebbbbaab21a1:"47635b8e885e19f2ccbdff078c207058"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.ntjNVRaXsZJ0vrhWBA35sQHaE7?rs=1&pid=ImgDetMain"},{id:"hallypop",name:"hallypop",manifestUri:"https://jungotvstream.chanall.tv/jungotv/hallypop/stream.m3u8",type:"hls",logo:"https://static.wixstatic.com/media/3f6f0d_6b141fb2470c4d0d9210f6cac32075ac~mv2.png/v1/fill/w_600,h_139,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/Hallypop_Logo_FullColor.png"},{id:"hbo-family",name:"HBO Family",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_hbofam/default/index.mpd",clearKey:{"872910c843294319800d85f9a0940607":"f79fd895b79c590708cf5e8b5c6263be"},type:"mpd",logo:"https://2.bp.blogspot.com/-fWMY8sHAuHs/TqB9xKDM_-I/AAAAAAAAQh0/N-fI53l9A84/s1600/hbo-family.png"},{id:"hbo-hits",name:"HBO Hits",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_hbohits/default/index.mpd",clearKey:{b04ae8017b5b4601a5a0c9060f6d5b7d:"a8795f3bdb8a4778b7e888ee484cc7a1"},type:"mpd",logo:"https://vignette.wikia.nocookie.net/logopedia/images/0/04/HBO_HiTS.svg/revision/latest/scale-to-width-down/627?cb=20100511073403"},{id:"hbo-signature",name:"HBO Signature",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_hbosign/default/index.mpd",clearKey:{a06ca6c275744151895762e0346380f5:"559da1b63eec77b5a942018f14d3f56f"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.PNeE4yWz4_Tp1O-dCdY_xAHaEP?rs=1&pid=ImgDetMain"},{id:"hbo-hd",name:"HBO HD",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_hbohd/default/index.mpd",clearKey:{d47ebabf7a21430b83a8c4b82d9ef6b1:"54c213b2b5f885f1e0290ee4131d425b"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.lY5V2M3D9jtBFJNbOAI8swHaDt?rs=1&pid=ImgDetMain"},{id:"hgtv-hd",name:"HGTV HD",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/hgtv_hd1/default/index.mpd",clearKey:{f0e3ab943318471abc8b47027f384f5a:"13802a79b19cc3485d2257165a7ef62a"},type:"mpd",logo:"https://upload.wikimedia.org/wikipedia/commons/0/05/HGTV_logo.png"},{id:"history-hd",name:"History HD",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_historyhd/default/index.mpd",clearKey:{a7724b7ca2604c33bb2e963a0319968a:"6f97e3e2eb2bade626e0281ec01d3675"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.Yx9hYOFfO03taYL2CZd6FAHaE8?rs=1&pid=ImgDetMain"},{id:"hits-hd",name:"Hits HD",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/hits_hd1/default/index.mpd",clearKey:{dac605bc197e442c93f4f08595a95100:"975e27ffc1b7949721ee3ccb4b7fd3e5"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.x2dQgh_yGBdnttScluIGYAHaCp?w=900&h=322&rs=1&pid=ImgDetMain"},{id:"hits-movies",name:"Hits Movies",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_hitsmovies/default/index.mpd",clearKey:{f56b57b32d7e4b2cb21748c0b56761a7:"3df06a89aa01b32655a77d93e09e266f"},type:"mpd",logo:"https://tse2.mm.bing.net/th/id/OIP.IVTdT_KbbSE3puMAYpFGaQAAAA?cb=12&w=434&h=284&rs=1&pid=ImgDetMain&o=7&rm=3"},{id:"hits-now",name:"Hits Now",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_hitsnow/default/index.mpd",clearKey:{"14439a1b7afc4527bb0ebc51cf11cbc1":"92b0287c7042f271b266cc11ab7541f1"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.cM1HO2isouoNessbj31CcgAAAA?rs=1&pid=ImgDetMain"},{id:"ibc13",name:"IBC13",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/ibc13_sd_new/default1/index.mpd",clearKey:{"04e292bc99bd4ccba89e778651914254":"ff0a62bdf8920ce453fe680330b563a5"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.sJNkdFUalhzRyZT4SJ9HBAHaEc?rs=1&pid=ImgDetMain"},{id:"iqiyi",name:"iQIYI",manifestUri:"https://mt12.aa.astro.com.my/default_ott.mpd?PID=&PAID=1006&deviceIdType=%5BdevIdType%5D&deviceId=1&appId=astrogo.astro.com.my&appName=%5BappName%5D&devModel=%5BdevModel%5D&playerWidth=%5BplayerWidth%5D&playerHeight=%5BplayerHeight%5D&sessionId=abr-linear-1&optin=true&hhid=1&kvp=lang%7Echi&kvp=genre%7ECHINESE%2CHD%2CALL&daiEnabled=true",clearKey:{"7ef7e913ce85a1131b27036069169a10":"77d98ed71db7524c27875a09a975f9e6"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.tGUjHFJqDIFUuKfn-31TxAHaEN?rs=1&pid=ImgDetMain"},{id:"jungo-pinoy-tv",name:"Jungo Pinoy tv",manifestUri:"https://jungotvstream.chanall.tv/jungotv/jungopinoytv/stream.m3u8",type:"hls",logo:"https://dito.ph/hubfs/Dito_July2021/Ott%20Pages/Jungo-img/Jungo-logo.png"},{id:"kapamilya-channel",name:"Kapamilya Channel",manifestUri:"https://cdn-ue1-prod.tsv2.amagi.tv/linear/amg01006-abs-cbn-kapcha-dash-abscbnono/index.mpd",clearKey:{bd17afb5dc9648a39be79ee3634dd4b8:"3ecf305d54a7729299b93a3d69c02ea5"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.ZzYB03x8FwMJFXEoCw4BcQHaEK?rs=1&pid=ImgDetMain"},{id:"kapamilya-online",name:"Kapamilya Online",type:"youtube",manifestUri:"",embedUrl:"https://www.youtube.com/embed/live_stream?channel=UCstEtN0pgOmCf02EdXsGChw",logo:"https://th.bing.com/th/id/OIP.WJ42CLSN52F8__yoFceMOwHaEK?rs=1&pid=ImgDetMain"},{id:"kbs-world",name:"KBS World",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/kbsworld/default/index.mpd",clearKey:{"22ff2347107e4871aa423bea9c2bd363":"c6e7ba2f48b3a3b8269e8bc360e60404"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.tGUjHFJqDIFUuKfn-31TxAHaEN?rs=1&pid=ImgDetMain"},{id:"kix-hd",name:"Kix HD",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/kix_hd1/default/index.mpd",clearKey:{a8d5712967cd495ca80fdc425bc61d6b:"f248c29525ed4c40cc39baeee9634735"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.tGUjHFJqDIFUuKfn-31TxAHaEN?rs=1&pid=ImgDetMain"},{id:"knowledge-channel",name:"Knowledge Channel",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/knowledge_channel/default/index.mpd",clearKey:{"0f856fa0412b11edb8780242ac120002":"783374273ef97ad3bc992c1d63e091e7"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.ix5ReWijxZg8uPcKrk2GHwHaGd?rs=1&pid=ImgDetMain"},{id:"kplus",name:"Kplus",manifestUri:"https://unifi-live2.secureswiftcontent.com/Content/DASH/Live/channel(Kplus)/master.mpd",clearKey:{"826e7fd2d6a14060bfea9347d96f8824":"176897afb079e0cc76bc912df4cb0b6e"},type:"mpd",logo:"https://www.pngkey.com/png/detail/306-3060351_k-plus-k-plus-channel-logo.png"},{id:"lifetime",name:"Lifetime",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_lifetime/default/index.mpd",clearKey:{cf861d26e7834166807c324d57df5119:"64a81e30f6e5b7547e3516bbf8c647d0"},type:"mpd",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Logo_Lifetime_2020.svg/440px-Logo_Lifetime_2020.svg.png"},{id:"k-movies",name:"K-Movies",manifestUri:"https://7732c5436342497882363a8cd14ceff4.mediatailor.us-east-1.amazonaws.com/v1/master/04fd913bb278d8775298c26fdca9d9841f37601f/Plex_NewMovies/playlist.m3u8",type:"hls",logo:"https://th.bing.com/th/id/OIP.uvYKFBubGFR40NtgWh7W8wHaES?rs=1&pid=ImgDetMain"},{id:"lotus-macau",name:"Lotus Macau",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/lotusmacau_prd/default/index.mpd",clearKey:{"60dc692e64ea443a8fb5ac186c865a9b":"01bdbe22d59b2a4504b53adc2f606cc1"},type:"mpd",logo:"https://i.imgur.com/5G72qjx.png"},{id:"mptv",name:"MPTV",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_mptv/default/index.mpd",clearKey:{"6aab8f40536f4ea98e7c97b8f3aa7d4e":"139aa5a55ade471faaddacc4f4de8807"},type:"mpd",logo:"https://cms.cignal.tv/Upload/Images/MPTV%20-%20Rev.png"},{id:"myx",name:"Myx",manifestUri:"https://d24xfhmhdb6r0q.cloudfront.net/out/v1/e897a7b6414a46019818ee9f2c081c4f/index.mpd",clearKey:{f40a52a3ac9b4702bdd5b735d910fd2f:"5ce1bc7f06b494c276252b4d13c90e51"},type:"mpd",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Cinemax_%28Yellow%29.svg/1200px-Cinemax_%28Yellow%29.svg.png"},{id:"nba-tv-philippines",name:"NBA TV Philippines",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cgnl_nba/default/index.mpd",clearKey:{c5e51f41ceac48709d0bdcd9c13a4d88:"20b91609967e472c27040716ef6a8b9a"},type:"mpd",logo:"https://cms.cignal.tv/Upload/Images/NBA-TV-Philippines.jpg"},{id:"nhk-japan",name:"NHK JAPAN",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_nhk_japan/default/index.mpd",clearKey:{"3d6e9d4de7d7449aadd846b7a684e564":"0800fff80980f47f7ac6bc60b361b0cf"},type:"mpd",logo:"https://logowik.com/content/uploads/images/nhk-world-japan1495.jpg"},{id:"nickjr",name:"Nickjr",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_nickjr/default/index.mpd",clearKey:{bab5c11178b646749fbae87962bf5113:"0ac679aad3b9d619ac39ad634ec76bc8"},type:"mpd",logo:"https://vignette.wikia.nocookie.net/logaekranowe/images/4/45/1024px-Nick_Jr._logo_2009.svg.png/revision/latest?cb=20180616122202&path-prefix=pl"},{id:"nickelodeon",name:"Nickelodeon",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_nickelodeon/default/index.mpd",clearKey:{"9ce58f37576b416381b6514a809bfd8b":"f0fbb758cdeeaddfa3eae538856b4d72"},type:"mpd",logo:"https://logos-download.com/wp-content/uploads/2016/04/Nickelodeon_logo_logotype_2.png"},{id:"one-news-hd",name:"One News HD",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/onenews_hd1/default/index.mpd",clearKey:{d39eb201ae494a0b98583df4d110e8dd:"6797066880d344422abd3f5eda41f45f"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.x5VzEESkd4_1pVGulNU43gHaGN?rs=1&pid=ImgDetMain"},{id:"one-ph",name:"One PH",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/oneph_sd/default/index.mpd",clearKey:{"92834ab4a7e1499b90886c5d49220e46":"a7108d9a6cfcc1b7939eb111daf09ab3"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.uz-f8yhdILIhdUj56NO6YAAAAA?rs=1&pid=ImgDetMain"},{id:"one-sports",name:"One Sports",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_onesports_hd/default/index.mpd",clearKey:{"53c3bf2eba574f639aa21f2d4409ff11":"3de28411cf08a64ea935b9578f6d0edd"},type:"mpd",logo:"https://vignette.wikia.nocookie.net/logopedia/images/5/56/TV5_One_Sports_Channel.png/revision/latest/scale-to-width-down/300?cb=20181221055916"},{id:"one-sports-plus-hd",name:"One Sports Plus HD",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_onesportsplus_hd1/default/index.mpd",clearKey:{"322d06e9326f4753a7ec0908030c13d8":"1e3e0ca32d421fbfec86feced0efefda"},type:"mpd",logo:"https://yt3.ggpht.com/a/AATXAJxL2nOhPRXCDKBEK-ccmTRM0G5r24tnVWUraw=s900-c-k-c0xffffffff-no-rj-mo"},{id:"pba-rush",name:"PBA Rush",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_pbarush_hd1/default/index.mpd",clearKey:{"76dc29dd87a244aeab9e8b7c5da1e5f3":"95b2f2ffd4e14073620506213b62ac82"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.dDzYufwVTWroitJQy9pfXQAAAA?rs=1&pid=ImgDetMain"},{id:"pbb-collab",name:"PBB Collab 2.0",manifestUri:"https://cdn-uw2-prod.tsv2.amagi.tv/linear/amg01006-abs-cbn-pbb-live-dash-abscbnono/index.mpd",type:"mpd",logo:"https://pql-static.abs-cbn.com/images/channel/pbbcelebritycollab_livethumb_20251023021847.jpg"},{id:"pbb-collab-dining",name:"PBB Collab 2.0 Dining Area",manifestUri:"https://abslive.akamaized.net/dash/live/2028025/pbb1/manifest.mpd",clearKey:{b37bb823fe48452eba8cee62516f5da1:"8b48cec6bce94917e4c39c381d607102"},type:"mpd",logo:"https://pql-static.abs-cbn.com/images/channel/pbballaccessstreamdining_livethumb_20251023021947.jpg"},{id:"pbb-collab-pool",name:"PBB Collab 2.0 Pool Area",manifestUri:"https://abslive.akamaized.net/dash/live/2028025/pbb2/manifest.mpd",clearKey:{"9539027a7c42446a8648555af3bb3095":"1cb94c88f68bef1e728cfa4677e1eeca"},type:"mpd",logo:"https://pql-static.abs-cbn.com/images/channel/pbballaccessstreampool_livethumb_20251023022209.jpg"},{id:"pbo",name:"PBO",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/pbo_sd/default/index.mpd",clearKey:{dcbdaaa6662d4188bdf97f9f0ca5e830:"31e752b441bd2972f2b98a4b1bc1c7a1"},type:"mpd",logo:"https://i.imgur.com/ZUZIt9s.png"},{id:"premier-sports",name:"Premier Sports",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_ps_hd1/default/index.mpd",clearKey:{b8b595299fdf41c1a3481fddeb0b55e4:"cd2b4ad0eb286239a4a022e6ca5fd007"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.UEZdJevwcZaL1qmePWjLGgHaHY?rs=1&pid=ImgDetMain"},{id:"premier-tennis",name:"Premier Tennis",manifestUri:"https://qp-pldt-live-grp-13-prod.akamaized.net/out/u/dr_premiertennishd.mpd",clearKey:{"59454adb530b4e0784eae62735f9d850":"61100d0b8c4dd13e4eb8b4851ba192cc"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.yd4QRZWcEgEz2T1EZv41mAAAAA?rs=1&pid=ImgDetMain"},{id:"ptv4",name:"PTV4",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_ptv4_sd/default/index.mpd",clearKey:{"71a130a851b9484bb47141c8966fb4a3":"ad1f003b4f0b31b75ea4593844435600"},type:"mpd",logo:"https://media.philstar.com/images/articles/ptv4_2018-06-14_11-27-10.jpg"},{id:"rakuten-viki",name:"Rakuten Viki",manifestUri:"https://fd18f1cadd404894a31a3362c5f319bd.mediatailor.us-east-1.amazonaws.com/v1/master/04fd913bb278d8775298c26fdca9d9841f37601f/RakutenTV-eu_RakutenViki-1/playlist.m3u8",type:"hls",logo:"https://tse1.mm.bing.net/th/id/OIP.14iQmo2HrOxiL10lttVslgAAAA?rs=1&pid=ImgDetMain&o=7&rm=3"},{id:"red-bull-tv",name:"Red Bull TV",manifestUri:"https://d3k3xxewhm1my2.cloudfront.net/playlist.m3u8",type:"hls",logo:"https://i.ibb.co/cK5FsbyM/unnamed-1.png"},{id:"rock-action",name:"Rock Action",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_rockextreme/default/index.mpd",clearKey:{"0f852fb8412b11edb8780242ac120002":"4cbc004d8c444f9f996db42059ce8178"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.0c6d3hoH5evqsJVNnbhVNwHaC3?rs=1&pid=ImgDetMain"},{id:"rock-entertainment",name:"Rock Entertainment",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_rockentertainment/default/index.mpd",clearKey:{e4ee0cf8ca9746f99af402ca6eed8dc7:"be2a096403346bc1d0bb0f812822bb62"},type:"mpd",logo:"https://assets-global.website-files.com/64e81e52acfdaa1696fd623f/652f763c600497122b122df0_logo_ent_red_web.png"},{id:"rptv",name:"RPTV",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cnn_rptv_prod_hd/default/index.mpd",clearKey:{"1917f4caf2364e6d9b1507326a85ead6":"a1340a251a5aa63a9b0ea5d9d7f67595"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.hWUhA4FmrinqMTykADb9NwHaEX?rs=1&pid=ImgDetMain"},{id:"sarisari",name:"SARISARI",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_sarisari/default/index.mpd",clearKey:{"0a7ab3612f434335aa6e895016d8cd2d":"b21654621230ae21714a5cab52daeb9d"},type:"mpd",logo:"https://vignette1.wikia.nocookie.net/logopedia/images/3/3e/Sari-Sari_alternate_Logo.PNG/revision/latest?cb=20160619031101"},{id:"SineManila",name:"SineManila",manifestUri:"https://live20.bozztv.com/giatv/giatv-sinemanila/sinemanila/chunks.m3u8",type:"hls",logo:"https://i.imgur.com/zcFUYC5.png"},{id:"sony-cine",name:"Sony Cine",manifestUri:"https://a-cdn.klowdtv.com/live1/cine_720p/chunks.m3u8",type:"hls",logo:"https://th.bing.com/th/id/OIP._NGk-Rpn5n6TOVRIjvnZ6QHaHb?rs=1&pid=ImgDetMain"},{id:"spotv",name:"SPOTV",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_spotvhd/default/index.mpd",clearKey:{ec7ee27d83764e4b845c48cca31c8eef:"9c0e4191203fccb0fde34ee29999129e"},type:"mpd",logo:"https://uploads-sportbusiness.imgix.net/uploads/2021/09/SPOTV_LOGO-01-w-2.png?auto=compress,format&crop=faces,entropy,edges&fit=crop&w=620&h=227"},{id:"spotv2",name:"SPOTV2",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_spotv2hd/default/index.mpd",clearKey:{"7eea72d6075245a99ee3255603d58853":"6848ef60575579bf4d415db1032153ed"},type:"mpd",logo:"https://cms.dmpcdn.com/livetv/2023/02/06/00d2eb00-a5c0-11ed-a358-099f80363291_webp_original.png"},{id:"tap-sports",name:"TAP Sports",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/dr_tapsports/default/index.mpd",clearKey:{eabd2d95c89e42f2b0b0b40ce4179ea0:"0e7e35a07e2c12822316c0dc4873903f"},type:"mpd",logo:"https://tapdmv.com/logo-tapSPORTS-2021.png"},{id:"tap-movies",name:"Tap Movies",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_tapmovies_hd1/default/index.mpd",clearKey:{"71cbdf02b595468bb77398222e1ade09":"c3f2aa420b8908ab8761571c01899460"},type:"mpd",logo:"https://cms.cignal.tv/Upload/Images/Tap-movies.jpg"},{id:"tap-tv",name:"TAP TV",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_taptv_sd/default/index.mpd",clearKey:{f6804251e90b4966889b7df94fdc621e:"55c3c014f2bd12d6bd62349658f24566"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.6ypmkyHr4CsiHriWt327pgHaHc?rs=1&pid=ImgDetMain"},{id:"tap-action-flix",name:"Tap Action Flix",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_tapactionflix_hd1/default/index.mpd",clearKey:{bee1066160c0424696d9bf99ca0645e3:"f5b72bf3b89b9848de5616f37de040b7"},type:"mpd",logo:"https://tapdmv.ovationproductionsmanila.com/logo-TapActionFlix-2021-B.png"},{id:"teleradyo",name:"Teleradyo",manifestUri:"https://cdn-ue1-prod.tsv2.amagi.tv/linear/amg01006-abs-cbn-teleradyo-dash-abscbnono/index.mpd",clearKey:{"47c093e0c9fd4f80839a0337da3dd876":"50547394045b3d047dc7d92f57b5fb33"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.VFN5ge6hBzP5uudSV5giGwAAAA?rs=1&pid=ImgDetMain"},{id:"tennis-plus",name:"Tennis+",manifestUri:"https://amg01935-amg01935c1-amgplt0352.playout.now3.amagi.tv/playlist/amg01935-amg01935c1-amgplt0352/playlist.m3u8",type:"hls",logo:"https://i.ibb.co/wNqkRfjw/unnamed.png"},{id:"thrill",name:"Thrill",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_thrill_sd/default/index.mpd",clearKey:{"928114ffb2394d14b5585258f70ed183":"a82edc340bc73447bac16cdfed0a4c62"},type:"mpd",logo:"https://www.mncvision.id/userfiles/image/channel/thrill_150x150px.jpg"},{id:"tmc",name:"TMC",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_tagalogmovie/default/index.mpd",clearKey:{"96701d297d1241e492d41c397631d857":"ca2931211c1a261f082a3a2c4fd9f91b"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.mskveWFrbAwpq6athkC91gAAAA?rs=1&pid=ImgDetMain"},{id:"travel-channel",name:"Travel Channel",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/travel_channel_sd/default/index.mpd",clearKey:{f3047fc13d454dacb6db4207ee79d3d3:"bdbd38748f51fc26932e96c9a2020839"},type:"mpd",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/2018_Travel_Channel_logo.svg/1200px-2018_Travel_Channel_logo.svg.png"},{id:"true-fm-tv",name:"True FM TV",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/truefm_tv/default/index.mpd",clearKey:{"0559c95496d44fadb94105b9176c3579":"40d8bb2a46ffd03540e0c6210ece57ce"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.mnFsqTyoPfS65QqSTLKHLAHaHa?rs=1&pid=ImgDetMain"},{id:"tvn-movies-tagalog",name:"TVN Movies (Tagalog)",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_tvnmovie/default/index.mpd",clearKey:{"2e53f8d8a5e94bca8f9a1e16ce67df33":"3471b2464b5c7b033a03bb8307d9fa35"},type:"mpd",logo:"https://i.imgur.com/3zLgtdM.png"},{id:"tvn",name:"TVN",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_tvnpre/default/index.mpd",clearKey:{e1bde543e8a140b38d3f84ace746553e:"b712c4ec307300043333a6899a402c10"},type:"mpd",logo:"https://i.imgur.com/3zLgtdM.png"},{id:"tvup",name:"TVUP",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/tvup_prd/default/index.mpd",clearKey:{"83e813ccd4ca4837afd611037af02f63":"a97c515dbcb5dcbc432bbd09d15afd41"},type:"mpd",logo:"https://i.imgur.com/3L0yn52.png"},{id:"tv5",name:"TV5",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/tv5_hd/default1/index.mpd",clearKey:{"2615129ef2c846a9bbd43a641c7303ef":"07c7f996b1734ea288641a68e1cfdc4d"},type:"mpd",logo:"https://cms.cignal.tv/Upload/Thumbnails/TV5%20HD%20logo%20(1).png"},{id:"uaap-varsity",name:"UAAP Varsity",manifestUri:"https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_uaap_cplay_sd/default/index.mpd",clearKey:{"95588338ee37423e99358a6d431324b9":"6e0f50a12f36599a55073868f814e81e"},type:"mpd",logo:"https://i.imgur.com/pt2hGDc.png"},{id:"viva",name:"VIVA",manifestUri:"https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/viva_sd/default/index.mpd",clearKey:{"07aa813bf2c147748046edd930f7736e":"3bd6688b8b44e96201e753224adfc8fb"},type:"mpd",logo:"https://i.imgur.com/z8lWIX6.png"},{id:"warner-tv",name:"Warner TV",manifestUri:"https://qp-pldt-live-grp-11-prod.akamaized.net/out/u/dr_warnertvhd.mpd",clearKey:{"4503cf86bca3494ab95a77ed913619a0":"afc9c8f627fb3fb255dee8e3b0fe1d71"},type:"mpd",logo:"https://th.bing.com/th/id/OIP.8xIdcYektX82pKAdaXcQEgHaHr?rs=1&pid=ImgDetMain"}],mye=({isOpen:i,onClose:t})=>{const[r,o]=M.useState(""),[l,c]=M.useState([]),[h,d]=M.useState(!1),m=Xc(),v=M.useRef(null),x=M.useRef(null);M.useEffect(()=>{i&&v.current&&v.current.focus()},[i]),M.useEffect(()=>{const R=P=>{x.current&&!x.current.contains(P.target)&&t()};return i&&document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[i,t]),M.useEffect(()=>{const R=setTimeout(async()=>{if(r.trim().length>=2){d(!0);try{const D=(await nK(r)).filter($=>$.media_type==="movie"||$.media_type==="tv").slice(0,4),N=PE.filter($=>$.name.toLowerCase().includes(r.toLowerCase())).slice(0,3).map($=>({type:"channel",channel:$}));c([...N,...D])}catch(P){console.error("Search error:",P)}finally{d(!1)}}else c([])},300);return()=>clearTimeout(R)},[r]);const T=R=>{if(E(R))m(`/live/${R.channel.id}`);else{const P=R,D="title"in P?"movie":"tv";m(`/watch/${D}/${P.id}`)}o(""),c([]),t()},E=R=>"type"in R&&R.type==="channel",A=R=>{R.preventDefault(),r.trim()&&(m(`/search?q=${encodeURIComponent(r)}`),o(""),c([]),t())},k=R=>"title"in R?R.title:R.name,_=R=>{const P="release_date"in R?R.release_date:R.first_air_date;return P?new Date(P).getFullYear():null};return i?S.jsxs("div",{ref:x,className:"relative",children:[S.jsxs("form",{onSubmit:A,className:"flex items-center gap-2 animate-fade-in",children:[S.jsxs("div",{className:"relative",children:[S.jsx(hr,{ref:v,type:"text",placeholder:"Search movies, shows, channels...",value:r,onChange:R=>o(R.target.value),className:"w-48 sm:w-64 bg-secondary border-border pr-8"}),h&&S.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:S.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}),S.jsx(Ge,{type:"button",variant:"ghost",size:"icon",onClick:t,children:S.jsx(Fo,{className:"w-5 h-5"})})]}),l.length>0&&S.jsxs("div",{className:"absolute top-full mt-2 right-0 w-72 sm:w-80 bg-card border border-border rounded-lg shadow-xl overflow-hidden z-50",children:[l.map(R=>{if(E(R))return S.jsxs("button",{onClick:()=>T(R),className:"w-full flex items-center gap-3 p-3 hover:bg-secondary/80 transition-colors text-left",children:[S.jsx("div",{className:"w-12 h-12 rounded overflow-hidden bg-muted flex-shrink-0 flex items-center justify-center",children:S.jsx("img",{src:R.channel.logo,alt:R.channel.name,className:"w-full h-full object-contain"})}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("p",{className:"font-medium text-foreground truncate",children:R.channel.name}),S.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(pE,{className:"w-3 h-3"}),"Live TV"]})})]})]},`channel-${R.channel.id}`);const P=R;return S.jsxs("button",{onClick:()=>T(R),className:"w-full flex items-center gap-3 p-3 hover:bg-secondary/80 transition-colors text-left",children:[S.jsx("div",{className:"w-12 h-16 rounded overflow-hidden bg-muted flex-shrink-0",children:P.poster_path?S.jsx("img",{src:Bc(P.poster_path,"w200"),alt:k(P),className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"title"in P?S.jsx(om,{className:"w-5 h-5 text-muted-foreground"}):S.jsx(su,{className:"w-5 h-5 text-muted-foreground"})})}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("p",{className:"font-medium text-foreground truncate",children:k(P)}),S.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[S.jsxs("span",{className:"flex items-center gap-1",children:["title"in P?S.jsx(om,{className:"w-3 h-3"}):S.jsx(su,{className:"w-3 h-3"}),"title"in P?"Movie":"TV Show"]}),_(P)&&S.jsxs("span",{children:[" ",_(P)]}),P.vote_average>0&&S.jsxs("span",{className:"flex items-center gap-0.5",children:[" ",S.jsx(ty,{className:"w-3 h-3 fill-yellow-500 text-yellow-500"}),P.vote_average.toFixed(1)]})]})]})]},`${P.id}-${"title"in P?"movie":"tv"}`)}),S.jsxs("button",{onClick:A,className:"w-full p-3 text-center text-sm text-primary hover:bg-secondary/80 transition-colors border-t border-border",children:['See all results for "',r,'"']})]})]}):null},gye=TP,vye=SP,yye=wP,iK=M.forwardRef(({className:i,...t},r)=>S.jsx(oy,{className:yt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...t,ref:r}));iK.displayName=oy.displayName;const xye=Jv("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),sK=M.forwardRef(({side:i="right",className:t,children:r,...o},l)=>S.jsxs(yye,{children:[S.jsx(iK,{}),S.jsxs(ay,{ref:l,className:yt(xye({side:i}),t),...o,children:[r,S.jsxs(kE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[S.jsx(Fo,{className:"h-4 w-4"}),S.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sK.displayName=ay.displayName;const oK=({className:i,...t})=>S.jsx("div",{className:yt("flex flex-col space-y-2 text-center sm:text-left",i),...t});oK.displayName="SheetHeader";const aK=M.forwardRef(({className:i,...t},r)=>S.jsx(ly,{ref:r,className:yt("text-lg font-semibold text-foreground",i),...t}));aK.displayName=ly.displayName;const Tye=M.forwardRef(({className:i,...t},r)=>S.jsx(uy,{ref:r,className:yt("text-sm text-muted-foreground",i),...t}));Tye.displayName=uy.displayName;const PP="my_list",um=()=>{try{const i=localStorage.getItem(PP);return i?JSON.parse(i):[]}catch{return[]}},Sye=i=>{const t=um();if(t.some(o=>o.id===i.id&&o.type===i.type))return!1;const r=[{...i,addedAt:Date.now()},...t];return localStorage.setItem(PP,JSON.stringify(r)),!0},lK=(i,t)=>{const o=um().filter(l=>!(l.id===i&&l.type===t));localStorage.setItem(PP,JSON.stringify(o))},wye=(i,t)=>um().some(o=>o.id===i&&o.type===t),Rw="continue_watching",Eye=20,Lv=()=>{try{const i=localStorage.getItem(Rw);return i?JSON.parse(i):[]}catch{return[]}},o7=i=>{const r=Lv().filter(o=>!(o.id===i.id&&o.type===i.type));if(i.progress<95){const o=[{...i,updatedAt:Date.now()},...r].slice(0,Eye);localStorage.setItem(Rw,JSON.stringify(o))}else localStorage.setItem(Rw,JSON.stringify(r))},bye=(i,t)=>{const o=Lv().filter(l=>!(l.id===i&&l.type===t));localStorage.setItem(Rw,JSON.stringify(o))},ai=()=>{const[i,t]=M.useState(!1),[r,o]=M.useState(0),[l,c]=M.useState(!1),[h,d]=M.useState(0),[m,v]=M.useState(0),[x,T]=M.useState(null),[E,A]=M.useState(!1),k=Yc();M.useEffect(()=>{const P=D=>{D.preventDefault(),T(D),A(!0)};return window.addEventListener("beforeinstallprompt",P),window.matchMedia("(display-mode: standalone)").matches&&A(!1),()=>{window.removeEventListener("beforeinstallprompt",P)}},[]);const _=async()=>{if(!x){gi.info("To install: tap Share  Add to Home Screen");return}x.prompt();const{outcome:P}=await x.userChoice;P==="accepted"&&(gi.success("App installed successfully!"),A(!1)),T(null)};M.useEffect(()=>{l&&(d(um().length),v(Lv().length))},[l]),M.useEffect(()=>{const P=`user_${Math.random().toString(36).substring(2,15)}`,D=Bt.channel("online-users",{config:{presence:{key:P}}});return D.on("presence",{event:"sync"},()=>{const N=D.presenceState(),$=Object.keys(N).length;o(Math.max(1,$))}).subscribe(async N=>{N==="SUBSCRIBED"&&await D.track({online_at:new Date().toISOString()})}),()=>{Bt.removeChannel(D)}},[]);const R=[{path:"/",label:"Home",icon:fE},{path:"/movies",label:"Movies",icon:om},{path:"/tv-shows",label:"TV Shows",icon:GG},{path:"/anime",label:"Anime",icon:qG},{path:"/manga",label:"Manga",icon:nl},{path:"/live-tv",label:"Live TV",icon:su}];return S.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 glass border-b border-border/50",children:S.jsx("div",{className:"container mx-auto px-4",children:S.jsxs("div",{className:"flex items-center justify-between h-16",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsxs(An,{to:"/",className:"flex items-center gap-2",children:[S.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:S.jsx(su,{className:"w-6 h-6 text-primary-foreground"})}),S.jsx("span",{className:"text-xl font-bold text-gradient hidden sm:block",children:"MovieStreamz"})]}),S.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-primary/10 border border-primary/20",children:[S.jsxs("span",{className:"relative flex h-2 w-2",children:[S.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),S.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),S.jsx(xv,{className:"w-3.5 h-3.5 text-primary"}),S.jsx("span",{className:"text-xs font-semibold text-primary tabular-nums",children:r.toLocaleString()}),S.jsx("span",{className:"text-[10px] text-muted-foreground hidden sm:inline",children:"online"})]})]}),S.jsx("div",{className:"hidden md:flex items-center gap-1",children:R.map(P=>{const D=P.icon,N=k.pathname===P.path;return S.jsxs(An,{to:P.path,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 ${N?"bg-primary/20 text-primary":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:[S.jsx(D,{className:"w-4 h-4"}),P.label]},P.path)})}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx("div",{className:`flex items-center transition-all duration-300 ease-in-out ${i?"w-64 md:w-80":"w-10"}`,children:i?S.jsx(mye,{isOpen:i,onClose:()=>t(!1)}):S.jsx(Ge,{variant:"ghost",size:"icon",onClick:()=>t(!0),className:"text-muted-foreground hover:text-foreground","aria-label":"Open search",children:S.jsx(q4,{className:"w-5 h-5"})})}),S.jsx(rye,{}),S.jsxs(gye,{open:l,onOpenChange:c,children:[S.jsx(vye,{asChild:!0,children:S.jsx(Ge,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-foreground",children:S.jsx(xce,{className:"w-5 h-5"})})}),S.jsxs(sK,{side:"right",className:"w-80",children:[S.jsx(oK,{children:S.jsx(aK,{className:"text-left",children:"Menu"})}),S.jsxs("div",{className:"mt-6 space-y-2",children:[S.jsx(An,{to:"/my-list",onClick:()=>c(!1),className:"flex items-center justify-between p-4 rounded-lg bg-card hover:bg-secondary transition-colors",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:S.jsx(vce,{className:"w-5 h-5 text-primary"})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium",children:"My List"}),S.jsxs("p",{className:"text-sm text-muted-foreground",children:[h," ",h===1?"item":"items"," saved"]})]})]})}),S.jsx(An,{to:"/continue-watching",onClick:()=>c(!1),className:"flex items-center justify-between p-4 rounded-lg bg-card hover:bg-secondary transition-colors",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-10 h-10 rounded-lg bg-accent/10 flex items-center justify-center",children:S.jsx(ey,{className:"w-5 h-5 text-accent"})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium",children:"Continue Watching"}),S.jsxs("p",{className:"text-sm text-muted-foreground",children:[m," ",m===1?"item":"items"," in progress"]})]})]})}),S.jsx("a",{href:"https://allplay-video-player.vercel.app",target:"_blank",rel:"noopener noreferrer",onClick:()=>c(!1),className:"flex items-center justify-between p-4 rounded-lg bg-card hover:bg-secondary transition-colors",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/10 flex items-center justify-center",children:S.jsx(su,{className:"w-5 h-5 text-purple-500"})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium",children:"Free IPTV Player"}),S.jsx("p",{className:"text-sm text-muted-foreground",children:"Play M3U8 & MPD streams"})]})]})}),S.jsx("button",{onClick:()=>{_(),c(!1)},className:"w-full flex items-center justify-between p-4 rounded-lg bg-card hover:bg-secondary transition-colors",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/10 flex items-center justify-center",children:S.jsx(hce,{className:"w-5 h-5 text-green-500"})}),S.jsxs("div",{className:"text-left",children:[S.jsx("p",{className:"font-medium",children:"Install App"}),S.jsx("p",{className:"text-sm text-muted-foreground",children:E?"Add to home screen":"Available offline"})]})]})})]})]})]})]})]})})})},Aye=({items:i})=>{const[t,r]=M.useState(0),o=i.slice(0,5);if(M.useEffect(()=>{const v=setInterval(()=>{r(x=>(x+1)%o.length)},8e3);return()=>clearInterval(v)},[o.length]),!o.length)return null;const l=o[t],c=l.title||l.name,h=l.release_date||l.first_air_date,d=h?new Date(h).getFullYear():"",m=l.media_type||"movie";return S.jsxs("section",{className:"relative h-[70vh] md:h-[85vh] overflow-hidden",children:[S.jsxs("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-1000",style:{backgroundImage:`url(${Bc(l.backdrop_path,"original")})`},children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-background via-background/80 to-transparent"}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/20 to-transparent"})]}),S.jsx("div",{className:"relative h-full container mx-auto px-4 flex items-end pb-24 md:pb-32",children:S.jsxs("div",{className:"max-w-2xl animate-slide-up",children:[S.jsx("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-bold mb-4 leading-tight",children:c}),S.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-muted-foreground",children:[S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(ty,{className:"w-4 h-4 text-yellow-400",fill:"currentColor"}),l.vote_average.toFixed(1)]}),d&&S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(dE,{className:"w-4 h-4"}),d]}),S.jsx("span",{className:"px-2 py-0.5 rounded bg-primary/20 text-primary text-xs uppercase font-medium",children:m==="movie"?"Movie":"TV Series"})]}),S.jsx("p",{className:"text-muted-foreground mb-6 line-clamp-3 md:line-clamp-4 text-sm md:text-base",children:l.overview}),S.jsxs("div",{className:"flex flex-wrap gap-3",children:[S.jsx(Ge,{asChild:!0,size:"lg",className:"gap-2",children:S.jsxs(An,{to:`/watch/${m}/${l.id}`,children:[S.jsx(zc,{className:"w-5 h-5",fill:"currentColor"}),"Watch Now"]})}),S.jsx(Ge,{asChild:!0,variant:"outline",size:"lg",className:"gap-2 border-border",children:S.jsxs(An,{to:`/watch/${m}/${l.id}`,children:[S.jsx(mce,{className:"w-5 h-5"}),"More Info"]})})]})]})}),S.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-2",children:o.map((v,x)=>S.jsx("button",{onClick:()=>r(x),className:`w-2 h-2 rounded-full transition-all duration-300 ${x===t?"w-8 bg-primary":"bg-muted-foreground/50 hover:bg-muted-foreground"}`},x))})]})},Iye=i=>i>=8?"text-green-400 bg-green-400/20":i>=6?"text-yellow-400 bg-yellow-400/20":"text-red-400 bg-red-400/20",Im=({item:i,type:t})=>{const r="title"in i?i.title:i.name,o="release_date"in i?i.release_date:i.first_air_date,l=t||i.media_type||"movie",c=o?new Date(o).getFullYear():"",h=i.vote_average;return S.jsxs(An,{to:`/watch/${l}/${i.id}`,className:"group relative block rounded-xl overflow-hidden card-hover",children:[S.jsxs("div",{className:"aspect-[2/3] relative",children:[S.jsx("img",{src:Bc(i.poster_path,"w500"),alt:r,className:"w-full h-full object-cover",loading:"lazy"}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300",children:S.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/90 flex items-center justify-center shadow-lg transform scale-75 group-hover:scale-100 transition-transform duration-300",children:S.jsx(zc,{className:"w-6 h-6 text-primary-foreground ml-1",fill:"currentColor"})})}),S.jsxs("div",{className:`absolute top-2 right-2 flex items-center gap-1 px-2 py-1 rounded-lg backdrop-blur-sm font-bold ${Iye(h)}`,children:[S.jsx(ty,{className:"w-3.5 h-3.5",fill:"currentColor"}),S.jsx("span",{className:"text-sm",children:h.toFixed(1)})]}),h>=7&&S.jsx("div",{className:"absolute top-2 left-2 px-2 py-0.5 rounded bg-primary text-primary-foreground text-xs font-bold",children:"HD"})]}),S.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-background via-background/90 to-transparent",children:[S.jsx("h3",{className:"font-semibold text-sm line-clamp-1 group-hover:text-primary transition-colors",children:r}),S.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[S.jsx("p",{className:"text-xs text-muted-foreground",children:c}),S.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-secondary text-muted-foreground uppercase",children:l==="movie"?"Movie":"TV"})]})]})]})},cp=({title:i,items:t,type:r})=>{const o=M.useRef(null),l=c=>{if(o.current){const h=o.current.clientWidth*.8;o.current.scrollBy({left:c==="left"?-h:h,behavior:"smooth"})}};return t!=null&&t.length?S.jsx("section",{className:"py-6",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-xl md:text-2xl font-bold",children:i}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx(Ge,{variant:"outline",size:"icon",className:"rounded-full border-border hover:bg-secondary",onClick:()=>l("left"),children:S.jsx(Zv,{className:"w-5 h-5"})}),S.jsx(Ge,{variant:"outline",size:"icon",className:"rounded-full border-border hover:bg-secondary",onClick:()=>l("right"),children:S.jsx(yv,{className:"w-5 h-5"})})]})]}),S.jsx("div",{ref:o,className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4 -mx-4 px-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map(c=>S.jsx("div",{className:"flex-shrink-0 w-[140px] sm:w-[160px] md:w-[180px]",children:S.jsx(Im,{item:c,type:r})},c.id))})]})}):null},uK=({channel:i})=>S.jsxs(An,{to:`/live/${i.id}`,className:"group relative block rounded-xl overflow-hidden card-hover bg-card border border-border",children:[S.jsxs("div",{className:"aspect-square sm:aspect-video relative",children:[S.jsx("img",{src:i.logo,alt:i.name,className:"w-full h-full object-contain p-2 sm:p-4 bg-secondary/50",loading:"lazy"}),S.jsxs("div",{className:"absolute top-1.5 left-1.5 sm:top-3 sm:left-3 flex items-center gap-1 sm:gap-1.5 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full bg-destructive/90 text-destructive-foreground text-[10px] sm:text-xs font-medium",children:[S.jsx(pE,{className:"w-2 h-2 sm:w-3 sm:h-3 animate-pulse"}),S.jsx("span",{className:"hidden sm:inline",children:"LIVE"})]}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 bg-background/40",children:S.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 rounded-full bg-primary/90 flex items-center justify-center shadow-lg transform scale-75 group-hover:scale-100 transition-transform duration-300",children:S.jsx(zc,{className:"w-4 h-4 sm:w-6 sm:h-6 text-primary-foreground ml-0.5",fill:"currentColor"})})})]}),S.jsxs("div",{className:"p-2 sm:p-4",children:[S.jsx("h3",{className:"font-semibold text-xs sm:text-base group-hover:text-primary transition-colors line-clamp-1",children:i.name}),S.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-0.5 sm:mt-1 uppercase hidden sm:block",children:i.type==="youtube"?"YouTube Stream":"Live Stream"})]})]}),cK="watch_history",Cye=20,dK=()=>{try{const i=localStorage.getItem(cK);return i?JSON.parse(i):[]}catch{return[]}},kye=i=>{const r=dK().filter(l=>!(l.id===i.id&&l.type===i.type)),o=[{...i,watchedAt:Date.now()},...r].slice(0,Cye);localStorage.setItem(cK,JSON.stringify(o))},_ye=()=>{const i=dK();return i.length>0?i[0]:null},Rye="2283c405a7e1d26a6b72a786916aad85",Lye=({className:i})=>{const[t,r]=M.useState([]),[o,l]=M.useState(null),[c,h]=M.useState(!0);return M.useEffect(()=>{(async()=>{var v;const m=_ye();if(l(m),!m){h(!1);return}try{const T=await(await fetch(`https://api.themoviedb.org/3/${m.type}/${m.id}/recommendations?api_key=${Rye}`)).json();r(((v=T.results)==null?void 0:v.slice(0,10))||[])}catch(x){console.error("Failed to fetch recommendations:",x)}finally{h(!1)}})()},[]),c||!o||t.length===0?null:S.jsx("section",{className:`py-6 ${i||""}`,children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsxs("h2",{className:"text-xl md:text-2xl font-bold mb-4",children:[' Because you watched "',o.title,'"']}),S.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide",children:t.map(d=>S.jsx("div",{className:"flex-shrink-0 w-36 sm:w-44",children:S.jsx(Im,{item:d,type:o.type})},d.id))})]})})},hK=()=>{const i="tvstreamz_visitor_id";let t=localStorage.getItem(i);return t||(t=crypto.randomUUID(),localStorage.setItem(i,t)),t},fK=async i=>{try{const t=hK();await Bt.from("site_analytics").insert({event_type:"page_view",page_path:i,visitor_id:t})}catch(t){console.error("Failed to track page view:",t)}},Pye=async(i,t,r)=>{try{const o=hK();await Bt.from("site_analytics").insert({event_type:"content_view",page_path:`/watch/${t}/${i}`,content_id:i,content_type:t,content_title:r,visitor_id:o})}catch(o){console.error("Failed to track content view:",o)}},Dye=async()=>{try{const i=new Date,t=new Date(i.getFullYear(),i.getMonth(),i.getDate()),r=new Date(t.getTime()-7*24*60*60*1e3),{count:o}=await Bt.from("site_analytics").select("*",{count:"exact",head:!0}),{count:l}=await Bt.from("site_analytics").select("*",{count:"exact",head:!0}).gte("created_at",t.toISOString()),{data:c}=await Bt.from("site_analytics").select("visitor_id"),h=new Set(c==null?void 0:c.map(E=>E.visitor_id)).size,{data:d}=await Bt.from("site_analytics").select("visitor_id").gte("created_at",r.toISOString()),m=new Set(d==null?void 0:d.map(E=>E.visitor_id)).size,{data:v}=await Bt.from("site_analytics").select("content_title, content_type, content_id").not("content_id","is",null).order("created_at",{ascending:!1}).limit(100),x={};v==null||v.forEach(E=>{if(E.content_id&&E.content_title){const A=`${E.content_type}-${E.content_id}`;x[A]||(x[A]={title:E.content_title,type:E.content_type||"movie",id:E.content_id,count:0}),x[A].count++}});const T=Object.values(x).sort((E,A)=>A.count-E.count).slice(0,5);return{totalViews:o||0,todayViews:l||0,uniqueVisitors:h,weeklyVisitors:m,topContent:T}}catch(i){return console.error("Failed to get analytics:",i),{totalViews:0,todayViews:0,uniqueVisitors:0,weeklyVisitors:0,topContent:[]}}},Nye=()=>{const[i,t]=M.useState(null);return M.useEffect(()=>{(async()=>{const o=await Dye();t(o)})()},[]),i?S.jsx("section",{className:"py-8 border-t border-border",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsx("h3",{className:"text-lg font-semibold mb-6 text-center",children:" Site Statistics"}),S.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[S.jsxs("div",{className:"bg-card/50 rounded-lg p-4 text-center border border-border/50",children:[S.jsx(PR,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),S.jsx("p",{className:"text-2xl font-bold",children:i.totalViews.toLocaleString()}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Views"})]}),S.jsxs("div",{className:"bg-card/50 rounded-lg p-4 text-center border border-border/50",children:[S.jsx(gE,{className:"w-6 h-6 mx-auto mb-2 text-green-500"}),S.jsx("p",{className:"text-2xl font-bold",children:i.todayViews.toLocaleString()}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Today's Views"})]}),S.jsxs("div",{className:"bg-card/50 rounded-lg p-4 text-center border border-border/50",children:[S.jsx(xv,{className:"w-6 h-6 mx-auto mb-2 text-blue-500"}),S.jsx("p",{className:"text-2xl font-bold",children:i.uniqueVisitors.toLocaleString()}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique Visitors"})]}),S.jsxs("div",{className:"bg-card/50 rounded-lg p-4 text-center border border-border/50",children:[S.jsx(xv,{className:"w-6 h-6 mx-auto mb-2 text-purple-500"}),S.jsx("p",{className:"text-2xl font-bold",children:i.weeklyVisitors.toLocaleString()}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Weekly Visitors"})]})]}),i.topContent.length>0&&S.jsxs("div",{className:"bg-card/30 rounded-lg p-4 border border-border/50",children:[S.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[S.jsx(om,{className:"w-4 h-4"}),"Popular Content"]}),S.jsx("div",{className:"space-y-2",children:i.topContent.map((r,o)=>S.jsxs("div",{className:"flex items-center justify-between text-sm",children:[S.jsxs("span",{className:"text-muted-foreground",children:[o+1,". ",r.title]}),S.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-2 py-0.5 rounded",children:[r.count," views"]})]},`${r.type}-${r.id}`))})]})]})}):null},Mye={enabled:!0,emoji:"",title:"Welcome to TVStreamz!",message:"Stream your favorite movies, TV shows, anime, and live TV channels for free. Enjoy unlimited entertainment anytime, anywhere!",button_text:"Start Watching ",tags:["Movies","TV Shows","Anime","Live TV"]},Oye=()=>{const[i,t]=M.useState(!1),[r,o]=M.useState(Mye),[l,c]=M.useState(!0);M.useEffect(()=>{(async()=>{try{const{data:v,error:x}=await Bt.from("site_settings").select("value").eq("key","welcome_popup").single();if(!x&&(v!=null&&v.value)){const T=v.value;o(T),T.enabled&&(sessionStorage.getItem("hasSeenWelcomePopup")||(t(!0),sessionStorage.setItem("hasSeenWelcomePopup","true")))}else sessionStorage.getItem("hasSeenWelcomePopup")||(t(!0),sessionStorage.setItem("hasSeenWelcomePopup","true"))}catch(v){console.error("Error fetching welcome popup settings:",v),sessionStorage.getItem("hasSeenWelcomePopup")||(t(!0),sessionStorage.setItem("hasSeenWelcomePopup","true"))}finally{c(!1)}})()},[]);const h=()=>{t(!1)},d=()=>{t(!1)};return l||!i?null:S.jsx(_E,{open:i,onOpenChange:t,children:S.jsxs(cy,{className:"max-w-md p-0 gap-0 overflow-hidden border-primary/20",children:[S.jsx(Ge,{variant:"ghost",size:"icon",className:"absolute right-2 top-2 z-50 h-8 w-8 rounded-full bg-background/80 hover:bg-background",onClick:d,children:S.jsx(Fo,{className:"h-4 w-4"})}),S.jsx("div",{className:"p-6 bg-gradient-to-br from-primary/10 to-primary/5",children:S.jsxs("div",{className:"space-y-4 text-center",children:[S.jsx("div",{className:"text-5xl",children:r.emoji}),S.jsx("h2",{className:"text-2xl font-bold text-foreground",children:r.title}),S.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:r.message}),S.jsx("div",{className:"flex flex-wrap justify-center gap-2 pt-2",children:r.tags.map(m=>S.jsx("span",{className:"px-2 py-1 bg-primary/20 rounded-full text-xs text-primary",children:m},m))})]})}),S.jsx("div",{className:"p-4 bg-muted/30 border-t border-border",children:S.jsx(Ge,{className:"w-full",onClick:h,children:r.button_text})})]})})},jye=()=>{const[i,t]=M.useState([]),[r,o]=M.useState([]),[l,c]=M.useState([]),[h,d]=M.useState([]),[m,v]=M.useState([]),[x,T]=M.useState(!0);return M.useEffect(()=>{fK("/"),(async()=>{try{const[A,k,_,R,P]=await Promise.all([Jq("all","week"),Zq(),eK(),tK(),rK()]);t(A),o(k),c(_),d(R),v(P)}catch(A){console.error("Failed to load content:",A)}finally{T(!1)}})()},[]),x?S.jsx("div",{className:"min-h-screen flex items-center justify-center",children:S.jsx(tr,{className:"w-10 h-10 text-primary animate-spin"})}):S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(Oye,{}),S.jsx(ai,{}),S.jsxs("main",{className:"pt-20",children:[S.jsx(Aye,{items:i}),S.jsxs("div",{className:"relative -mt-20 z-10",children:[S.jsx(Lye,{}),S.jsx(cp,{title:" Trending Now",items:i}),S.jsx(cp,{title:" Now Playing",items:m,type:"movie"}),S.jsx(cp,{title:" Popular Movies",items:r,type:"movie"}),S.jsx(cp,{title:" Popular TV Shows",items:l,type:"tv"}),S.jsx(cp,{title:" Top Rated",items:h,type:"movie"}),S.jsx("section",{className:"py-6",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-xl md:text-2xl font-bold",children:" Live TV"}),S.jsx(An,{to:"/live-tv",className:"text-primary text-sm hover:underline",children:"View All "})]}),S.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:PE.slice(0,4).map(E=>S.jsx(uK,{channel:E},E.id))})]})})]})]}),S.jsx(Nye,{}),S.jsx("footer",{className:"py-8 border-t border-border",children:S.jsxs("div",{className:"container mx-auto px-4 flex flex-col items-center",children:[S.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Support Us / Donate"}),S.jsxs(_E,{children:[S.jsx(Sge,{asChild:!0,children:S.jsx("img",{src:AB,alt:"GCash QR Code for Donation",className:"w-24 h-auto rounded-lg shadow-lg cursor-pointer hover:scale-105 transition-transform"})}),S.jsxs(cy,{className:"max-w-sm p-4",children:[S.jsx("img",{src:AB,alt:"GCash QR Code for Donation",className:"w-full h-auto rounded-lg"}),S.jsx("p",{className:"text-center text-muted-foreground text-sm mt-2",children:"Scan to donate via GCash"}),S.jsx("p",{className:"text-center text-muted-foreground text-xs",children:"Tap outside or press X to close"})]})]}),S.jsx("p",{className:"text-muted-foreground text-sm mt-3",children:"Tap to enlarge"})]})})]})};var Uye=M.createContext(void 0);function hy(i){const t=M.useContext(Uye);return i||t||"ltr"}function Pv(i,[t,r]){return Math.min(r,Math.max(t,i))}function Fye(i,t){return M.useReducer((r,o)=>t[r][o]??r,i)}var DP="ScrollArea",[pK]=Fs(DP),[Bye,$o]=pK(DP),mK=M.forwardRef((i,t)=>{const{__scopeScrollArea:r,type:o="hover",dir:l,scrollHideDelay:c=600,...h}=i,[d,m]=M.useState(null),[v,x]=M.useState(null),[T,E]=M.useState(null),[A,k]=M.useState(null),[_,R]=M.useState(null),[P,D]=M.useState(0),[N,$]=M.useState(0),[V,W]=M.useState(!1),[C,K]=M.useState(!1),ee=Kt(t,fe=>m(fe)),Q=hy(l);return S.jsx(Bye,{scope:r,type:o,dir:Q,scrollHideDelay:c,scrollArea:d,viewport:v,onViewportChange:x,content:T,onContentChange:E,scrollbarX:A,onScrollbarXChange:k,scrollbarXEnabled:V,onScrollbarXEnabledChange:W,scrollbarY:_,onScrollbarYChange:R,scrollbarYEnabled:C,onScrollbarYEnabledChange:K,onCornerWidthChange:D,onCornerHeightChange:$,children:S.jsx(xt.div,{dir:Q,...h,ref:ee,style:{position:"relative","--radix-scroll-area-corner-width":P+"px","--radix-scroll-area-corner-height":N+"px",...i.style}})})});mK.displayName=DP;var gK="ScrollAreaViewport",vK=M.forwardRef((i,t)=>{const{__scopeScrollArea:r,children:o,nonce:l,...c}=i,h=$o(gK,r),d=M.useRef(null),m=Kt(t,d,h.onViewportChange);return S.jsxs(S.Fragment,{children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),S.jsx(xt.div,{"data-radix-scroll-area-viewport":"",...c,ref:m,style:{overflowX:h.scrollbarXEnabled?"scroll":"hidden",overflowY:h.scrollbarYEnabled?"scroll":"hidden",...i.style},children:S.jsx("div",{ref:h.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});vK.displayName=gK;var cl="ScrollAreaScrollbar",NP=M.forwardRef((i,t)=>{const{forceMount:r,...o}=i,l=$o(cl,i.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:h}=l,d=i.orientation==="horizontal";return M.useEffect(()=>(d?c(!0):h(!0),()=>{d?c(!1):h(!1)}),[d,c,h]),l.type==="hover"?S.jsx($ye,{...o,ref:t,forceMount:r}):l.type==="scroll"?S.jsx(Vye,{...o,ref:t,forceMount:r}):l.type==="auto"?S.jsx(yK,{...o,ref:t,forceMount:r}):l.type==="always"?S.jsx(MP,{...o,ref:t}):null});NP.displayName=cl;var $ye=M.forwardRef((i,t)=>{const{forceMount:r,...o}=i,l=$o(cl,i.__scopeScrollArea),[c,h]=M.useState(!1);return M.useEffect(()=>{const d=l.scrollArea;let m=0;if(d){const v=()=>{window.clearTimeout(m),h(!0)},x=()=>{m=window.setTimeout(()=>h(!1),l.scrollHideDelay)};return d.addEventListener("pointerenter",v),d.addEventListener("pointerleave",x),()=>{window.clearTimeout(m),d.removeEventListener("pointerenter",v),d.removeEventListener("pointerleave",x)}}},[l.scrollArea,l.scrollHideDelay]),S.jsx(yo,{present:r||c,children:S.jsx(yK,{"data-state":c?"visible":"hidden",...o,ref:t})})}),Vye=M.forwardRef((i,t)=>{const{forceMount:r,...o}=i,l=$o(cl,i.__scopeScrollArea),c=i.orientation==="horizontal",h=NE(()=>m("SCROLL_END"),100),[d,m]=Fye("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return M.useEffect(()=>{if(d==="idle"){const v=window.setTimeout(()=>m("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(v)}},[d,l.scrollHideDelay,m]),M.useEffect(()=>{const v=l.viewport,x=c?"scrollLeft":"scrollTop";if(v){let T=v[x];const E=()=>{const A=v[x];T!==A&&(m("SCROLL"),h()),T=A};return v.addEventListener("scroll",E),()=>v.removeEventListener("scroll",E)}},[l.viewport,c,m,h]),S.jsx(yo,{present:r||d!=="hidden",children:S.jsx(MP,{"data-state":d==="hidden"?"hidden":"visible",...o,ref:t,onPointerEnter:st(i.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:st(i.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),yK=M.forwardRef((i,t)=>{const r=$o(cl,i.__scopeScrollArea),{forceMount:o,...l}=i,[c,h]=M.useState(!1),d=i.orientation==="horizontal",m=NE(()=>{if(r.viewport){const v=r.viewport.offsetWidth<r.viewport.scrollWidth,x=r.viewport.offsetHeight<r.viewport.scrollHeight;h(d?v:x)}},10);return cm(r.viewport,m),cm(r.content,m),S.jsx(yo,{present:o||c,children:S.jsx(MP,{"data-state":c?"visible":"hidden",...l,ref:t})})}),MP=M.forwardRef((i,t)=>{const{orientation:r="vertical",...o}=i,l=$o(cl,i.__scopeScrollArea),c=M.useRef(null),h=M.useRef(0),[d,m]=M.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),v=EK(d.viewport,d.content),x={...o,sizes:d,onSizesChange:m,hasThumb:v>0&&v<1,onThumbChange:E=>c.current=E,onThumbPointerUp:()=>h.current=0,onThumbPointerDown:E=>h.current=E};function T(E,A){return Wye(E,h.current,d,A)}return r==="horizontal"?S.jsx(Gye,{...x,ref:t,onThumbPositionChange:()=>{if(l.viewport&&c.current){const E=l.viewport.scrollLeft,A=a7(E,d,l.dir);c.current.style.transform=`translate3d(${A}px, 0, 0)`}},onWheelScroll:E=>{l.viewport&&(l.viewport.scrollLeft=E)},onDragScroll:E=>{l.viewport&&(l.viewport.scrollLeft=T(E,l.dir))}}):r==="vertical"?S.jsx(Hye,{...x,ref:t,onThumbPositionChange:()=>{if(l.viewport&&c.current){const E=l.viewport.scrollTop,A=a7(E,d);c.current.style.transform=`translate3d(0, ${A}px, 0)`}},onWheelScroll:E=>{l.viewport&&(l.viewport.scrollTop=E)},onDragScroll:E=>{l.viewport&&(l.viewport.scrollTop=T(E))}}):null}),Gye=M.forwardRef((i,t)=>{const{sizes:r,onSizesChange:o,...l}=i,c=$o(cl,i.__scopeScrollArea),[h,d]=M.useState(),m=M.useRef(null),v=Kt(t,m,c.onScrollbarXChange);return M.useEffect(()=>{m.current&&d(getComputedStyle(m.current))},[m]),S.jsx(TK,{"data-orientation":"horizontal",...l,ref:v,sizes:r,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":DE(r)+"px",...i.style},onThumbPointerDown:x=>i.onThumbPointerDown(x.x),onDragScroll:x=>i.onDragScroll(x.x),onWheelScroll:(x,T)=>{if(c.viewport){const E=c.viewport.scrollLeft+x.deltaX;i.onWheelScroll(E),AK(E,T)&&x.preventDefault()}},onResize:()=>{m.current&&c.viewport&&h&&o({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:m.current.clientWidth,paddingStart:Pw(h.paddingLeft),paddingEnd:Pw(h.paddingRight)}})}})}),Hye=M.forwardRef((i,t)=>{const{sizes:r,onSizesChange:o,...l}=i,c=$o(cl,i.__scopeScrollArea),[h,d]=M.useState(),m=M.useRef(null),v=Kt(t,m,c.onScrollbarYChange);return M.useEffect(()=>{m.current&&d(getComputedStyle(m.current))},[m]),S.jsx(TK,{"data-orientation":"vertical",...l,ref:v,sizes:r,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":DE(r)+"px",...i.style},onThumbPointerDown:x=>i.onThumbPointerDown(x.y),onDragScroll:x=>i.onDragScroll(x.y),onWheelScroll:(x,T)=>{if(c.viewport){const E=c.viewport.scrollTop+x.deltaY;i.onWheelScroll(E),AK(E,T)&&x.preventDefault()}},onResize:()=>{m.current&&c.viewport&&h&&o({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:m.current.clientHeight,paddingStart:Pw(h.paddingTop),paddingEnd:Pw(h.paddingBottom)}})}})}),[qye,xK]=pK(cl),TK=M.forwardRef((i,t)=>{const{__scopeScrollArea:r,sizes:o,hasThumb:l,onThumbChange:c,onThumbPointerUp:h,onThumbPointerDown:d,onThumbPositionChange:m,onDragScroll:v,onWheelScroll:x,onResize:T,...E}=i,A=$o(cl,r),[k,_]=M.useState(null),R=Kt(t,ee=>_(ee)),P=M.useRef(null),D=M.useRef(""),N=A.viewport,$=o.content-o.viewport,V=Gr(x),W=Gr(m),C=NE(T,10);function K(ee){if(P.current){const Q=ee.clientX-P.current.left,fe=ee.clientY-P.current.top;v({x:Q,y:fe})}}return M.useEffect(()=>{const ee=Q=>{const fe=Q.target;(k==null?void 0:k.contains(fe))&&V(Q,$)};return document.addEventListener("wheel",ee,{passive:!1}),()=>document.removeEventListener("wheel",ee,{passive:!1})},[N,k,$,V]),M.useEffect(W,[o,W]),cm(k,C),cm(A.content,C),S.jsx(qye,{scope:r,scrollbar:k,hasThumb:l,onThumbChange:Gr(c),onThumbPointerUp:Gr(h),onThumbPositionChange:W,onThumbPointerDown:Gr(d),children:S.jsx(xt.div,{...E,ref:R,style:{position:"absolute",...E.style},onPointerDown:st(i.onPointerDown,ee=>{ee.button===0&&(ee.target.setPointerCapture(ee.pointerId),P.current=k.getBoundingClientRect(),D.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",A.viewport&&(A.viewport.style.scrollBehavior="auto"),K(ee))}),onPointerMove:st(i.onPointerMove,K),onPointerUp:st(i.onPointerUp,ee=>{const Q=ee.target;Q.hasPointerCapture(ee.pointerId)&&Q.releasePointerCapture(ee.pointerId),document.body.style.webkitUserSelect=D.current,A.viewport&&(A.viewport.style.scrollBehavior=""),P.current=null})})})}),Lw="ScrollAreaThumb",SK=M.forwardRef((i,t)=>{const{forceMount:r,...o}=i,l=xK(Lw,i.__scopeScrollArea);return S.jsx(yo,{present:r||l.hasThumb,children:S.jsx(Kye,{ref:t,...o})})}),Kye=M.forwardRef((i,t)=>{const{__scopeScrollArea:r,style:o,...l}=i,c=$o(Lw,r),h=xK(Lw,r),{onThumbPositionChange:d}=h,m=Kt(t,T=>h.onThumbChange(T)),v=M.useRef(void 0),x=NE(()=>{v.current&&(v.current(),v.current=void 0)},100);return M.useEffect(()=>{const T=c.viewport;if(T){const E=()=>{if(x(),!v.current){const A=Yye(T,d);v.current=A,d()}};return d(),T.addEventListener("scroll",E),()=>T.removeEventListener("scroll",E)}},[c.viewport,x,d]),S.jsx(xt.div,{"data-state":h.hasThumb?"visible":"hidden",...l,ref:m,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:st(i.onPointerDownCapture,T=>{const A=T.target.getBoundingClientRect(),k=T.clientX-A.left,_=T.clientY-A.top;h.onThumbPointerDown({x:k,y:_})}),onPointerUp:st(i.onPointerUp,h.onThumbPointerUp)})});SK.displayName=Lw;var OP="ScrollAreaCorner",wK=M.forwardRef((i,t)=>{const r=$o(OP,i.__scopeScrollArea),o=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&o?S.jsx(zye,{...i,ref:t}):null});wK.displayName=OP;var zye=M.forwardRef((i,t)=>{const{__scopeScrollArea:r,...o}=i,l=$o(OP,r),[c,h]=M.useState(0),[d,m]=M.useState(0),v=!!(c&&d);return cm(l.scrollbarX,()=>{var T;const x=((T=l.scrollbarX)==null?void 0:T.offsetHeight)||0;l.onCornerHeightChange(x),m(x)}),cm(l.scrollbarY,()=>{var T;const x=((T=l.scrollbarY)==null?void 0:T.offsetWidth)||0;l.onCornerWidthChange(x),h(x)}),v?S.jsx(xt.div,{...o,ref:t,style:{width:c,height:d,position:"absolute",right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:0,...i.style}}):null});function Pw(i){return i?parseInt(i,10):0}function EK(i,t){const r=i/t;return isNaN(r)?0:r}function DE(i){const t=EK(i.viewport,i.content),r=i.scrollbar.paddingStart+i.scrollbar.paddingEnd,o=(i.scrollbar.size-r)*t;return Math.max(o,18)}function Wye(i,t,r,o="ltr"){const l=DE(r),c=l/2,h=t||c,d=l-h,m=r.scrollbar.paddingStart+h,v=r.scrollbar.size-r.scrollbar.paddingEnd-d,x=r.content-r.viewport,T=o==="ltr"?[0,x]:[x*-1,0];return bK([m,v],T)(i)}function a7(i,t,r="ltr"){const o=DE(t),l=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,c=t.scrollbar.size-l,h=t.content-t.viewport,d=c-o,m=r==="ltr"?[0,h]:[h*-1,0],v=Pv(i,m);return bK([0,h],[0,d])(v)}function bK(i,t){return r=>{if(i[0]===i[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(i[1]-i[0]);return t[0]+o*(r-i[0])}}function AK(i,t){return i>0&&i<t}var Yye=(i,t=()=>{})=>{let r={left:i.scrollLeft,top:i.scrollTop},o=0;return function l(){const c={left:i.scrollLeft,top:i.scrollTop},h=r.left!==c.left,d=r.top!==c.top;(h||d)&&t(),r=c,o=window.requestAnimationFrame(l)}(),()=>window.cancelAnimationFrame(o)};function NE(i,t){const r=Gr(i),o=M.useRef(0);return M.useEffect(()=>()=>window.clearTimeout(o.current),[]),M.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(r,t)},[r,t])}function cm(i,t){const r=Gr(t);Nr(()=>{let o=0;if(i){const l=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(r)});return l.observe(i),()=>{window.cancelAnimationFrame(o),l.unobserve(i)}}},[i,r])}var IK=mK,Xye=vK,Qye=wK;const Ah=M.forwardRef(({className:i,children:t,...r},o)=>S.jsxs(IK,{ref:o,className:yt("relative overflow-hidden",i),...r,children:[S.jsx(Xye,{className:"h-full w-full rounded-[inherit]",children:t}),S.jsx(jP,{}),S.jsx(Qye,{})]}));Ah.displayName=IK.displayName;const jP=M.forwardRef(({className:i,orientation:t="vertical",...r},o)=>S.jsx(NP,{ref:o,orientation:t,className:yt("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",i),...r,children:S.jsx(SK,{className:"relative flex-1 rounded-full bg-border"})}));jP.displayName=NP.displayName;const UP=({genres:i,selectedGenre:t,onSelectGenre:r})=>S.jsxs(Ah,{className:"w-full whitespace-nowrap",children:[S.jsxs("div",{className:"flex gap-2 pb-2",children:[S.jsx(Ge,{variant:t===null?"default":"outline",size:"sm",onClick:()=>r(null),className:"shrink-0",children:"All"}),i.map(o=>S.jsx(Ge,{variant:t===o.id?"default":"outline",size:"sm",onClick:()=>r(o.id),className:"shrink-0",children:o.name},o.id))]}),S.jsx(jP,{orientation:"horizontal"})]}),Jye=()=>{const[i,t]=M.useState([]),[r,o]=M.useState("popular"),[l,c]=M.useState(null),[h,d]=M.useState(1),[m,v]=M.useState(!0),x=[{id:"popular",label:"Popular"},{id:"top_rated",label:"Top Rated"},{id:"now_playing",label:"Now Playing"},{id:"upcoming",label:"Upcoming"}],T=async(A,k,_)=>{v(!0);try{let R;if(_)R=await LP("movie",{page:k,genre:_,sortBy:A==="top_rated"?"vote_average.desc":"popularity.desc"});else switch(A){case"top_rated":R=await tK(k);break;case"now_playing":R=await rK();break;case"upcoming":R=await lye();break;default:R=await Zq(k)}t(k===1?R:[...i,...R])}catch(R){console.error("Failed to fetch movies:",R)}finally{v(!1)}};M.useEffect(()=>{t([]),d(1),T(r,1,l)},[r,l]);const E=()=>{const A=h+1;d(A),T(r,A,l)};return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsx("main",{className:"pt-24 pb-20 md:pb-12",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Movies"}),S.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:x.map(A=>S.jsx(Ge,{variant:r===A.id?"default":"outline",onClick:()=>o(A.id),className:"border-border",children:A.label},A.id))}),S.jsx("div",{className:"mb-8",children:S.jsx(UP,{genres:Xq,selectedGenre:l,onSelectGenre:c})}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:i.map(A=>S.jsx(Im,{item:A,type:"movie"},A.id))}),S.jsx("div",{className:"flex justify-center mt-8",children:m?S.jsx(tr,{className:"w-8 h-8 text-primary animate-spin"}):S.jsx(Ge,{variant:"outline",onClick:E,className:"border-border",children:"Load More"})})]})})]})},Zye=()=>{const[i,t]=M.useState([]),[r,o]=M.useState("popular"),[l,c]=M.useState(null),[h,d]=M.useState(1),[m,v]=M.useState(!0),x=[{id:"popular",label:"Popular"},{id:"top_rated",label:"Top Rated"}],T=async(A,k,_)=>{v(!0);try{let R;_?R=await LP("tv",{page:k,genre:_,sortBy:A==="top_rated"?"vote_average.desc":"popularity.desc"}):R=A==="top_rated"?await sye(k):await eK(k),t(k===1?R:[...i,...R])}catch(R){console.error("Failed to fetch TV shows:",R)}finally{v(!1)}};M.useEffect(()=>{t([]),d(1),T(r,1,l)},[r,l]);const E=()=>{const A=h+1;d(A),T(r,A,l)};return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsx("main",{className:"pt-24 pb-20 md:pb-12",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6",children:"TV Shows"}),S.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:x.map(A=>S.jsx(Ge,{variant:r===A.id?"default":"outline",onClick:()=>o(A.id),className:"border-border",children:A.label},A.id))}),S.jsx("div",{className:"mb-8",children:S.jsx(UP,{genres:Qq,selectedGenre:l,onSelectGenre:c})}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:i.map(A=>S.jsx(Im,{item:A,type:"tv"},A.id))}),S.jsx("div",{className:"flex justify-center mt-8",children:m?S.jsx(tr,{className:"w-8 h-8 text-primary animate-spin"}):S.jsx(Ge,{variant:"outline",onClick:E,className:"border-border",children:"Load More"})})]})})]})},CK={enabled:!1,url:""};function kK(i){const[t,r]=M.useState(CK),[o,l]=M.useState(!1);return M.useEffect(()=>{(async()=>{const{data:h,error:d}=await Bt.from("site_settings").select("value").eq("key","page_popups").maybeSingle();if(!d&&(h!=null&&h.value)){const m=h.value;m[i]&&r(m[i])}})()},[i]),M.useEffect(()=>{if(t.enabled&&t.url&&!o){l(!0);const c=window.open(t.url,"_blank");(!c||c.closed||typeof c.closed>"u")&&gi(" May special offer para sayo!",{description:"I-click para buksan",action:{label:"Buksan",onClick:()=>window.open(t.url,"_blank")},duration:8e3})}},[t,o]),{config:t,hasTriggered:o}}function e1e(){const[i,t]=M.useState({}),[r,o]=M.useState(!0),[l,c]=M.useState(!1),h=[{id:"anime",label:"Anime"},{id:"livetv",label:"Live TV"},{id:"movies",label:"Movies"},{id:"tvshows",label:"TV Shows"},{id:"home",label:"Home"}];M.useEffect(()=>{d()},[]);const d=async()=>{o(!0);try{const{data:x,error:T}=await Bt.from("site_settings").select("value").eq("key","page_popups").maybeSingle();if(!T&&(x!=null&&x.value))t(x.value);else{const E={};h.forEach(A=>{E[A.id]={enabled:!1,url:""}}),t(E)}}catch(x){console.error("Error fetching page popups:",x)}finally{o(!1)}};return{popups:i,availablePages:h,isLoading:r,isSaving:l,updatePopup:(x,T)=>{t(E=>({...E,[x]:{...E[x]||CK,...T}}))},savePopups:async()=>{c(!0);try{const{data:x}=await Bt.from("site_settings").select("id").eq("key","page_popups").maybeSingle();return x?await Bt.from("site_settings").update({value:i,updated_at:new Date().toISOString()}).eq("key","page_popups"):await Bt.from("site_settings").insert([{key:"page_popups",value:i}]),{success:!0}}catch(x){return console.error("Error saving page popups:",x),{success:!1,error:x}}finally{c(!1)}},refetch:d}}const t1e=()=>{kK("anime");const[i,t]=M.useState([]),[r,o]=M.useState("popular_tv"),[l,c]=M.useState(1),[h,d]=M.useState(!0),m=[{id:"popular_tv",label:"Popular Series"},{id:"movies",label:"Anime Movies"},{id:"top_rated",label:"Top Rated"}],v=async(E,A)=>{d(!0);try{let k;switch(E){case"movies":k=await dye(A);break;case"top_rated":k=await hye(A);break;default:k=await cye(A)}t(A===1?k:[...i,...k])}catch(k){console.error("Failed to fetch anime:",k)}finally{d(!1)}};M.useEffect(()=>{t([]),c(1),v(r,1)},[r]);const x=()=>{const E=l+1;c(E),v(r,E)},T=E=>"title"in E?"movie":"tv";return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsx("main",{className:"pt-24 pb-12",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Anime"}),S.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:m.map(E=>S.jsx(Ge,{variant:r===E.id?"default":"outline",onClick:()=>o(E.id),className:"border-border",children:E.label},E.id))}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:i.map(E=>S.jsx(Im,{item:E,type:T(E)},E.id))}),S.jsx("div",{className:"flex justify-center mt-8",children:h?S.jsx(tr,{className:"w-8 h-8 text-primary animate-spin"}):S.jsx(Ge,{variant:"outline",onClick:x,className:"border-border",children:"Load More"})})]})})]})},_K=i=>({id:i.id,name:i.name,manifestUri:i.stream_url,type:i.stream_type,logo:i.logo_url||"",clearKey:i.license_type==="clearkey"&&i.drm_key_id&&i.drm_key?{[i.drm_key_id]:i.drm_key}:void 0,widevineUrl:i.license_type==="widevine"&&i.license_url?i.license_url:void 0,embedUrl:i.stream_type==="youtube"?i.stream_url:void 0});function FP(i=!1){return zH({queryKey:["channels",i],queryFn:async()=>{let t=Bt.from("channels").select("*").order("sort_order",{ascending:!0,nullsFirst:!1}).order("name",{ascending:!0});i||(t=t.eq("is_active",!0));const{data:r,error:o}=await t;if(o)throw o;return r}})}function n1e(){const i=ry();return hP({mutationFn:async t=>{const{data:r,error:o}=await Bt.from("channels").insert(t).select().single();if(o)throw o;return r},onSuccess:()=>{i.invalidateQueries({queryKey:["channels"]})}})}function r1e(){const i=ry();return hP({mutationFn:async({id:t,...r})=>{const{data:o,error:l}=await Bt.from("channels").update(r).eq("id",t).select().single();if(l)throw l;return o},onSuccess:()=>{i.invalidateQueries({queryKey:["channels"]})}})}function i1e(){const i=ry();return hP({mutationFn:async t=>{const{error:r}=await Bt.from("channels").delete().eq("id",t);if(r)throw r},onSuccess:()=>{i.invalidateQueries({queryKey:["channels"]})}})}function RK(){return zH({queryKey:["channel-views"],queryFn:async()=>{const{data:i,error:t}=await Bt.from("site_analytics").select("content_id").eq("content_type","live_channel").not("content_id","is",null);if(t)throw t;const r={};return i==null||i.forEach(o=>{o.content_id&&(r[o.content_id]=(r[o.content_id]||0)+1)}),r},staleTime:6e4})}const s1e=async(i,t)=>{try{const r=localStorage.getItem("tvstreamz_visitor_id")||crypto.randomUUID();localStorage.getItem("tvstreamz_visitor_id")||localStorage.setItem("tvstreamz_visitor_id",r),await Bt.from("site_analytics").insert({event_type:"content_view",page_path:`/live/${i}`,content_id:i,content_type:"live_channel",content_title:t,visitor_id:r})}catch(r){console.error("Failed to track channel view:",r)}};function fh({className:i,...t}){return S.jsx("div",{className:yt("animate-pulse rounded-md bg-muted",i),...t})}function BP(i){const t=M.useRef({value:i,previous:i});return M.useMemo(()=>(t.current.value!==i&&(t.current.previous=t.current.value,t.current.value=i),t.current.previous),[i])}var o1e=[" ","Enter","ArrowUp","ArrowDown"],a1e=[" ","Enter"],Ih="Select",[ME,OE,l1e]=lE(Ih),[Cm]=Fs(Ih,[l1e,wm]),jE=wm(),[u1e,Qc]=Cm(Ih),[c1e,d1e]=Cm(Ih),LK=i=>{const{__scopeSelect:t,children:r,open:o,defaultOpen:l,onOpenChange:c,value:h,defaultValue:d,onValueChange:m,dir:v,name:x,autoComplete:T,disabled:E,required:A,form:k}=i,_=jE(t),[R,P]=M.useState(null),[D,N]=M.useState(null),[$,V]=M.useState(!1),W=hy(v),[C,K]=hu({prop:o,defaultProp:l??!1,onChange:c,caller:Ih}),[ee,Q]=hu({prop:h,defaultProp:d,onChange:m,caller:Ih}),fe=M.useRef(null),O=R?k||!!R.closest("form"):!0,[re,ce]=M.useState(new Set),Ae=Array.from(re).map(se=>se.props.value).join(";");return S.jsx(AH,{..._,children:S.jsxs(u1e,{required:A,scope:t,trigger:R,onTriggerChange:P,valueNode:D,onValueNodeChange:N,valueNodeHasChildren:$,onValueNodeHasChildrenChange:V,contentId:ou(),value:ee,onValueChange:Q,open:C,onOpenChange:K,dir:W,triggerPointerDownPosRef:fe,disabled:E,children:[S.jsx(ME.Provider,{scope:t,children:S.jsx(c1e,{scope:i.__scopeSelect,onNativeOptionAdd:M.useCallback(se=>{ce(ue=>new Set(ue).add(se))},[]),onNativeOptionRemove:M.useCallback(se=>{ce(ue=>{const le=new Set(ue);return le.delete(se),le})},[]),children:r})}),O?S.jsxs(tz,{"aria-hidden":!0,required:A,tabIndex:-1,name:x,autoComplete:T,value:ee,onChange:se=>Q(se.target.value),disabled:E,form:k,children:[ee===void 0?S.jsx("option",{value:""}):null,Array.from(re)]},Ae):null]})})};LK.displayName=Ih;var PK="SelectTrigger",DK=M.forwardRef((i,t)=>{const{__scopeSelect:r,disabled:o=!1,...l}=i,c=jE(r),h=Qc(PK,r),d=h.disabled||o,m=Kt(t,h.onTriggerChange),v=OE(r),x=M.useRef("touch"),[T,E,A]=rz(_=>{const R=v().filter(N=>!N.disabled),P=R.find(N=>N.value===h.value),D=iz(R,_,P);D!==void 0&&h.onValueChange(D.value)}),k=_=>{d||(h.onOpenChange(!0),A()),_&&(h.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return S.jsx(TE,{asChild:!0,...c,children:S.jsx(xt.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":nz(h.value)?"":void 0,...l,ref:m,onClick:st(l.onClick,_=>{_.currentTarget.focus(),x.current!=="mouse"&&k(_)}),onPointerDown:st(l.onPointerDown,_=>{x.current=_.pointerType;const R=_.target;R.hasPointerCapture(_.pointerId)&&R.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(k(_),_.preventDefault())}),onKeyDown:st(l.onKeyDown,_=>{const R=T.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&E(_.key),!(R&&_.key===" ")&&o1e.includes(_.key)&&(k(),_.preventDefault())})})})});DK.displayName=PK;var NK="SelectValue",MK=M.forwardRef((i,t)=>{const{__scopeSelect:r,className:o,style:l,children:c,placeholder:h="",...d}=i,m=Qc(NK,r),{onValueNodeHasChildrenChange:v}=m,x=c!==void 0,T=Kt(t,m.onValueNodeChange);return Nr(()=>{v(x)},[v,x]),S.jsx(xt.span,{...d,ref:T,style:{pointerEvents:"none"},children:nz(m.value)?S.jsx(S.Fragment,{children:h}):c})});MK.displayName=NK;var h1e="SelectIcon",OK=M.forwardRef((i,t)=>{const{__scopeSelect:r,children:o,...l}=i;return S.jsx(xt.span,{"aria-hidden":!0,...l,ref:t,children:o||""})});OK.displayName=h1e;var f1e="SelectPortal",jK=i=>S.jsx(Xv,{asChild:!0,...i});jK.displayName=f1e;var Ch="SelectContent",UK=M.forwardRef((i,t)=>{const r=Qc(Ch,i.__scopeSelect),[o,l]=M.useState();if(Nr(()=>{l(new DocumentFragment)},[]),!r.open){const c=o;return c?Lh.createPortal(S.jsx(FK,{scope:i.__scopeSelect,children:S.jsx(ME.Slot,{scope:i.__scopeSelect,children:S.jsx("div",{children:i.children})})}),c):null}return S.jsx(BK,{...i,ref:t})});UK.displayName=Ch;var oa=10,[FK,Jc]=Cm(Ch),p1e="SelectContentImpl",m1e=Th("SelectContent.RemoveScroll"),BK=M.forwardRef((i,t)=>{const{__scopeSelect:r,position:o="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:c,onPointerDownOutside:h,side:d,sideOffset:m,align:v,alignOffset:x,arrowPadding:T,collisionBoundary:E,collisionPadding:A,sticky:k,hideWhenDetached:_,avoidCollisions:R,...P}=i,D=Qc(Ch,r),[N,$]=M.useState(null),[V,W]=M.useState(null),C=Kt(t,Pe=>$(Pe)),[K,ee]=M.useState(null),[Q,fe]=M.useState(null),O=OE(r),[re,ce]=M.useState(!1),Ae=M.useRef(!1);M.useEffect(()=>{if(N)return gP(N)},[N]),mP();const se=M.useCallback(Pe=>{const[Rt,...Mt]=O().map(on=>on.ref.current),[$t]=Mt.slice(-1),Ot=document.activeElement;for(const on of Pe)if(on===Ot||(on==null||on.scrollIntoView({block:"nearest"}),on===Rt&&V&&(V.scrollTop=0),on===$t&&V&&(V.scrollTop=V.scrollHeight),on==null||on.focus(),document.activeElement!==Ot))return},[O,V]),ue=M.useCallback(()=>se([K,N]),[se,K,N]);M.useEffect(()=>{re&&ue()},[re,ue]);const{onOpenChange:le,triggerPointerDownPosRef:pe}=D;M.useEffect(()=>{if(N){let Pe={x:0,y:0};const Rt=$t=>{var Ot,on;Pe={x:Math.abs(Math.round($t.pageX)-(((Ot=pe.current)==null?void 0:Ot.x)??0)),y:Math.abs(Math.round($t.pageY)-(((on=pe.current)==null?void 0:on.y)??0))}},Mt=$t=>{Pe.x<=10&&Pe.y<=10?$t.preventDefault():N.contains($t.target)||le(!1),document.removeEventListener("pointermove",Rt),pe.current=null};return pe.current!==null&&(document.addEventListener("pointermove",Rt),document.addEventListener("pointerup",Mt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Rt),document.removeEventListener("pointerup",Mt,{capture:!0})}}},[N,le,pe]),M.useEffect(()=>{const Pe=()=>le(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[le]);const[be,Ce]=rz(Pe=>{const Rt=O().filter(Ot=>!Ot.disabled),Mt=Rt.find(Ot=>Ot.ref.current===document.activeElement),$t=iz(Rt,Pe,Mt);$t&&setTimeout(()=>$t.ref.current.focus())}),ke=M.useCallback((Pe,Rt,Mt)=>{const $t=!Ae.current&&!Mt;(D.value!==void 0&&D.value===Rt||$t)&&(ee(Pe),$t&&(Ae.current=!0))},[D.value]),Ue=M.useCallback(()=>N==null?void 0:N.focus(),[N]),qe=M.useCallback((Pe,Rt,Mt)=>{const $t=!Ae.current&&!Mt;(D.value!==void 0&&D.value===Rt||$t)&&fe(Pe)},[D.value]),ut=o==="popper"?mL:$K,X=ut===mL?{side:d,sideOffset:m,align:v,alignOffset:x,arrowPadding:T,collisionBoundary:E,collisionPadding:A,sticky:k,hideWhenDetached:_,avoidCollisions:R}:{};return S.jsx(FK,{scope:r,content:N,viewport:V,onViewportChange:W,itemRefCallback:ke,selectedItem:K,onItemLeave:Ue,itemTextRefCallback:qe,focusSelectedItem:ue,selectedItemText:Q,position:o,isPositioned:re,searchRef:be,children:S.jsx(IE,{as:m1e,allowPinchZoom:!0,children:S.jsx(bE,{asChild:!0,trapped:D.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:st(l,Pe=>{var Rt;(Rt=D.trigger)==null||Rt.focus({preventScroll:!0}),Pe.preventDefault()}),children:S.jsx(ym,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:h,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>D.onOpenChange(!1),children:S.jsx(ut,{role:"listbox",id:D.contentId,"data-state":D.open?"open":"closed",dir:D.dir,onContextMenu:Pe=>Pe.preventDefault(),...P,...X,onPlaced:()=>ce(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...P.style},onKeyDown:st(P.onKeyDown,Pe=>{const Rt=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Rt&&Pe.key.length===1&&Ce(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let $t=O().filter(Ot=>!Ot.disabled).map(Ot=>Ot.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&($t=$t.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const Ot=Pe.target,on=$t.indexOf(Ot);$t=$t.slice(on+1)}setTimeout(()=>se($t)),Pe.preventDefault()}})})})})})})});BK.displayName=p1e;var g1e="SelectItemAlignedPosition",$K=M.forwardRef((i,t)=>{const{__scopeSelect:r,onPlaced:o,...l}=i,c=Qc(Ch,r),h=Jc(Ch,r),[d,m]=M.useState(null),[v,x]=M.useState(null),T=Kt(t,C=>x(C)),E=OE(r),A=M.useRef(!1),k=M.useRef(!0),{viewport:_,selectedItem:R,selectedItemText:P,focusSelectedItem:D}=h,N=M.useCallback(()=>{if(c.trigger&&c.valueNode&&d&&v&&_&&R&&P){const C=c.trigger.getBoundingClientRect(),K=v.getBoundingClientRect(),ee=c.valueNode.getBoundingClientRect(),Q=P.getBoundingClientRect();if(c.dir!=="rtl"){const Ot=Q.left-K.left,on=ee.left-Ot,gr=C.left-on,Mr=C.width+gr,wa=Math.max(Mr,K.width),xe=window.innerWidth-oa,_e=Pv(on,[oa,Math.max(oa,xe-wa)]);d.style.minWidth=Mr+"px",d.style.left=_e+"px"}else{const Ot=K.right-Q.right,on=window.innerWidth-ee.right-Ot,gr=window.innerWidth-C.right-on,Mr=C.width+gr,wa=Math.max(Mr,K.width),xe=window.innerWidth-oa,_e=Pv(on,[oa,Math.max(oa,xe-wa)]);d.style.minWidth=Mr+"px",d.style.right=_e+"px"}const fe=E(),O=window.innerHeight-oa*2,re=_.scrollHeight,ce=window.getComputedStyle(v),Ae=parseInt(ce.borderTopWidth,10),se=parseInt(ce.paddingTop,10),ue=parseInt(ce.borderBottomWidth,10),le=parseInt(ce.paddingBottom,10),pe=Ae+se+re+le+ue,be=Math.min(R.offsetHeight*5,pe),Ce=window.getComputedStyle(_),ke=parseInt(Ce.paddingTop,10),Ue=parseInt(Ce.paddingBottom,10),qe=C.top+C.height/2-oa,ut=O-qe,X=R.offsetHeight/2,Pe=R.offsetTop+X,Rt=Ae+se+Pe,Mt=pe-Rt;if(Rt<=qe){const Ot=fe.length>0&&R===fe[fe.length-1].ref.current;d.style.bottom="0px";const on=v.clientHeight-_.offsetTop-_.offsetHeight,gr=Math.max(ut,X+(Ot?Ue:0)+on+ue),Mr=Rt+gr;d.style.height=Mr+"px"}else{const Ot=fe.length>0&&R===fe[0].ref.current;d.style.top="0px";const gr=Math.max(qe,Ae+_.offsetTop+(Ot?ke:0)+X)+Mt;d.style.height=gr+"px",_.scrollTop=Rt-qe+_.offsetTop}d.style.margin=`${oa}px 0`,d.style.minHeight=be+"px",d.style.maxHeight=O+"px",o==null||o(),requestAnimationFrame(()=>A.current=!0)}},[E,c.trigger,c.valueNode,d,v,_,R,P,c.dir,o]);Nr(()=>N(),[N]);const[$,V]=M.useState();Nr(()=>{v&&V(window.getComputedStyle(v).zIndex)},[v]);const W=M.useCallback(C=>{C&&k.current===!0&&(N(),D==null||D(),k.current=!1)},[N,D]);return S.jsx(y1e,{scope:r,contentWrapper:d,shouldExpandOnScrollRef:A,onScrollButtonChange:W,children:S.jsx("div",{ref:m,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$},children:S.jsx(xt.div,{...l,ref:T,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});$K.displayName=g1e;var v1e="SelectPopperPosition",mL=M.forwardRef((i,t)=>{const{__scopeSelect:r,align:o="start",collisionPadding:l=oa,...c}=i,h=jE(r);return S.jsx(sP,{...h,...c,ref:t,align:o,collisionPadding:l,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});mL.displayName=v1e;var[y1e,$P]=Cm(Ch,{}),gL="SelectViewport",VK=M.forwardRef((i,t)=>{const{__scopeSelect:r,nonce:o,...l}=i,c=Jc(gL,r),h=$P(gL,r),d=Kt(t,c.onViewportChange),m=M.useRef(0);return S.jsxs(S.Fragment,{children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),S.jsx(ME.Slot,{scope:r,children:S.jsx(xt.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:st(l.onScroll,v=>{const x=v.currentTarget,{contentWrapper:T,shouldExpandOnScrollRef:E}=h;if(E!=null&&E.current&&T){const A=Math.abs(m.current-x.scrollTop);if(A>0){const k=window.innerHeight-oa*2,_=parseFloat(T.style.minHeight),R=parseFloat(T.style.height),P=Math.max(_,R);if(P<k){const D=P+A,N=Math.min(k,D),$=D-N;T.style.height=N+"px",T.style.bottom==="0px"&&(x.scrollTop=$>0?$:0,T.style.justifyContent="flex-end")}}}m.current=x.scrollTop})})})]})});VK.displayName=gL;var GK="SelectGroup",[x1e,T1e]=Cm(GK),S1e=M.forwardRef((i,t)=>{const{__scopeSelect:r,...o}=i,l=ou();return S.jsx(x1e,{scope:r,id:l,children:S.jsx(xt.div,{role:"group","aria-labelledby":l,...o,ref:t})})});S1e.displayName=GK;var HK="SelectLabel",qK=M.forwardRef((i,t)=>{const{__scopeSelect:r,...o}=i,l=T1e(HK,r);return S.jsx(xt.div,{id:l.id,...o,ref:t})});qK.displayName=HK;var Dw="SelectItem",[w1e,KK]=Cm(Dw),zK=M.forwardRef((i,t)=>{const{__scopeSelect:r,value:o,disabled:l=!1,textValue:c,...h}=i,d=Qc(Dw,r),m=Jc(Dw,r),v=d.value===o,[x,T]=M.useState(c??""),[E,A]=M.useState(!1),k=Kt(t,D=>{var N;return(N=m.itemRefCallback)==null?void 0:N.call(m,D,o,l)}),_=ou(),R=M.useRef("touch"),P=()=>{l||(d.onValueChange(o),d.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return S.jsx(w1e,{scope:r,value:o,disabled:l,textId:_,isSelected:v,onItemTextChange:M.useCallback(D=>{T(N=>N||((D==null?void 0:D.textContent)??"").trim())},[]),children:S.jsx(ME.ItemSlot,{scope:r,value:o,disabled:l,textValue:x,children:S.jsx(xt.div,{role:"option","aria-labelledby":_,"data-highlighted":E?"":void 0,"aria-selected":v&&E,"data-state":v?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...h,ref:k,onFocus:st(h.onFocus,()=>A(!0)),onBlur:st(h.onBlur,()=>A(!1)),onClick:st(h.onClick,()=>{R.current!=="mouse"&&P()}),onPointerUp:st(h.onPointerUp,()=>{R.current==="mouse"&&P()}),onPointerDown:st(h.onPointerDown,D=>{R.current=D.pointerType}),onPointerMove:st(h.onPointerMove,D=>{var N;R.current=D.pointerType,l?(N=m.onItemLeave)==null||N.call(m):R.current==="mouse"&&D.currentTarget.focus({preventScroll:!0})}),onPointerLeave:st(h.onPointerLeave,D=>{var N;D.currentTarget===document.activeElement&&((N=m.onItemLeave)==null||N.call(m))}),onKeyDown:st(h.onKeyDown,D=>{var $;(($=m.searchRef)==null?void 0:$.current)!==""&&D.key===" "||(a1e.includes(D.key)&&P(),D.key===" "&&D.preventDefault())})})})})});zK.displayName=Dw;var U0="SelectItemText",WK=M.forwardRef((i,t)=>{const{__scopeSelect:r,className:o,style:l,...c}=i,h=Qc(U0,r),d=Jc(U0,r),m=KK(U0,r),v=d1e(U0,r),[x,T]=M.useState(null),E=Kt(t,P=>T(P),m.onItemTextChange,P=>{var D;return(D=d.itemTextRefCallback)==null?void 0:D.call(d,P,m.value,m.disabled)}),A=x==null?void 0:x.textContent,k=M.useMemo(()=>S.jsx("option",{value:m.value,disabled:m.disabled,children:A},m.value),[m.disabled,m.value,A]),{onNativeOptionAdd:_,onNativeOptionRemove:R}=v;return Nr(()=>(_(k),()=>R(k)),[_,R,k]),S.jsxs(S.Fragment,{children:[S.jsx(xt.span,{id:m.textId,...c,ref:E}),m.isSelected&&h.valueNode&&!h.valueNodeHasChildren?Lh.createPortal(c.children,h.valueNode):null]})});WK.displayName=U0;var YK="SelectItemIndicator",XK=M.forwardRef((i,t)=>{const{__scopeSelect:r,...o}=i;return KK(YK,r).isSelected?S.jsx(xt.span,{"aria-hidden":!0,...o,ref:t}):null});XK.displayName=YK;var vL="SelectScrollUpButton",QK=M.forwardRef((i,t)=>{const r=Jc(vL,i.__scopeSelect),o=$P(vL,i.__scopeSelect),[l,c]=M.useState(!1),h=Kt(t,o.onScrollButtonChange);return Nr(()=>{if(r.viewport&&r.isPositioned){let d=function(){const v=m.scrollTop>0;c(v)};const m=r.viewport;return d(),m.addEventListener("scroll",d),()=>m.removeEventListener("scroll",d)}},[r.viewport,r.isPositioned]),l?S.jsx(ZK,{...i,ref:h,onAutoScroll:()=>{const{viewport:d,selectedItem:m}=r;d&&m&&(d.scrollTop=d.scrollTop-m.offsetHeight)}}):null});QK.displayName=vL;var yL="SelectScrollDownButton",JK=M.forwardRef((i,t)=>{const r=Jc(yL,i.__scopeSelect),o=$P(yL,i.__scopeSelect),[l,c]=M.useState(!1),h=Kt(t,o.onScrollButtonChange);return Nr(()=>{if(r.viewport&&r.isPositioned){let d=function(){const v=m.scrollHeight-m.clientHeight,x=Math.ceil(m.scrollTop)<v;c(x)};const m=r.viewport;return d(),m.addEventListener("scroll",d),()=>m.removeEventListener("scroll",d)}},[r.viewport,r.isPositioned]),l?S.jsx(ZK,{...i,ref:h,onAutoScroll:()=>{const{viewport:d,selectedItem:m}=r;d&&m&&(d.scrollTop=d.scrollTop+m.offsetHeight)}}):null});JK.displayName=yL;var ZK=M.forwardRef((i,t)=>{const{__scopeSelect:r,onAutoScroll:o,...l}=i,c=Jc("SelectScrollButton",r),h=M.useRef(null),d=OE(r),m=M.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return M.useEffect(()=>()=>m(),[m]),Nr(()=>{var x;const v=d().find(T=>T.ref.current===document.activeElement);(x=v==null?void 0:v.ref.current)==null||x.scrollIntoView({block:"nearest"})},[d]),S.jsx(xt.div,{"aria-hidden":!0,...l,ref:t,style:{flexShrink:0,...l.style},onPointerDown:st(l.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(o,50))}),onPointerMove:st(l.onPointerMove,()=>{var v;(v=c.onItemLeave)==null||v.call(c),h.current===null&&(h.current=window.setInterval(o,50))}),onPointerLeave:st(l.onPointerLeave,()=>{m()})})}),E1e="SelectSeparator",ez=M.forwardRef((i,t)=>{const{__scopeSelect:r,...o}=i;return S.jsx(xt.div,{"aria-hidden":!0,...o,ref:t})});ez.displayName=E1e;var xL="SelectArrow",b1e=M.forwardRef((i,t)=>{const{__scopeSelect:r,...o}=i,l=jE(r),c=Qc(xL,r),h=Jc(xL,r);return c.open&&h.position==="popper"?S.jsx(oP,{...l,...o,ref:t}):null});b1e.displayName=xL;var A1e="SelectBubbleInput",tz=M.forwardRef(({__scopeSelect:i,value:t,...r},o)=>{const l=M.useRef(null),c=Kt(o,l),h=BP(t);return M.useEffect(()=>{const d=l.current;if(!d)return;const m=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(m,"value").set;if(h!==t&&x){const T=new Event("change",{bubbles:!0});x.call(d,t),d.dispatchEvent(T)}},[h,t]),S.jsx(xt.select,{...r,style:{...pG,...r.style},ref:c,defaultValue:t})});tz.displayName=A1e;function nz(i){return i===""||i===void 0}function rz(i){const t=Gr(i),r=M.useRef(""),o=M.useRef(0),l=M.useCallback(h=>{const d=r.current+h;t(d),function m(v){r.current=v,window.clearTimeout(o.current),v!==""&&(o.current=window.setTimeout(()=>m(""),1e3))}(d)},[t]),c=M.useCallback(()=>{r.current="",window.clearTimeout(o.current)},[]);return M.useEffect(()=>()=>window.clearTimeout(o.current),[]),[r,l,c]}function iz(i,t,r){const l=t.length>1&&Array.from(t).every(v=>v===t[0])?t[0]:t,c=r?i.indexOf(r):-1;let h=I1e(i,Math.max(c,0));l.length===1&&(h=h.filter(v=>v!==r));const m=h.find(v=>v.textValue.toLowerCase().startsWith(l.toLowerCase()));return m!==r?m:void 0}function I1e(i,t){return i.map((r,o)=>i[(t+o)%i.length])}var C1e=LK,sz=DK,k1e=MK,_1e=OK,R1e=jK,oz=UK,L1e=VK,az=qK,lz=zK,P1e=WK,D1e=XK,uz=QK,cz=JK,dz=ez;const mu=C1e,gu=k1e,sl=M.forwardRef(({className:i,children:t,...r},o)=>S.jsxs(sz,{ref:o,className:yt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",i),...r,children:[t,S.jsx(_1e,{asChild:!0,children:S.jsx(BG,{className:"h-4 w-4 opacity-50"})})]}));sl.displayName=sz.displayName;const hz=M.forwardRef(({className:i,...t},r)=>S.jsx(uz,{ref:r,className:yt("flex cursor-default items-center justify-center py-1",i),...t,children:S.jsx(cce,{className:"h-4 w-4"})}));hz.displayName=uz.displayName;const fz=M.forwardRef(({className:i,...t},r)=>S.jsx(cz,{ref:r,className:yt("flex cursor-default items-center justify-center py-1",i),...t,children:S.jsx(BG,{className:"h-4 w-4"})}));fz.displayName=cz.displayName;const ol=M.forwardRef(({className:i,children:t,position:r="popper",...o},l)=>S.jsx(R1e,{children:S.jsxs(oz,{ref:l,className:yt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",i),position:r,...o,children:[S.jsx(hz,{}),S.jsx(L1e,{className:yt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),S.jsx(fz,{})]})}));ol.displayName=oz.displayName;const N1e=M.forwardRef(({className:i,...t},r)=>S.jsx(az,{ref:r,className:yt("py-1.5 pl-8 pr-2 text-sm font-semibold",i),...t}));N1e.displayName=az.displayName;const kr=M.forwardRef(({className:i,children:t,...r},o)=>S.jsxs(lz,{ref:o,className:yt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",i),...r,children:[S.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:S.jsx(D1e,{children:S.jsx(hE,{className:"h-4 w-4"})})}),S.jsx(P1e,{children:t})]}));kr.displayName=lz.displayName;const M1e=M.forwardRef(({className:i,...t},r)=>S.jsx(dz,{ref:r,className:yt("-mx-1 my-1 h-px bg-muted",i),...t}));M1e.displayName=dz.displayName;const O1e=()=>{const{data:i,isLoading:t}=FP(),{data:r}=RK(),[o,l]=M.useState("a-z");kK("livetv");const c=M.useMemo(()=>{const d=new Map;return(i||[]).forEach(m=>{d.set(m.name.toLowerCase(),m)}),d},[i]),h=M.useMemo(()=>{const d=(i||[]).map(_K),m=new Set(d.map(T=>T.name.toLowerCase())),v=PE.filter(T=>!m.has(T.name.toLowerCase())),x=[...d,...v];switch(o){case"a-z":return x.sort((T,E)=>T.name.localeCompare(E.name));case"popular":return x.sort((T,E)=>{const A=(r==null?void 0:r[T.id])||0,k=(r==null?void 0:r[E.id])||0;return k!==A?k-A:T.name.localeCompare(E.name)});case"recent":return x.sort((T,E)=>{const A=c.get(T.name.toLowerCase()),k=c.get(E.name.toLowerCase());return A&&k?new Date(k.created_at).getTime()-new Date(A.created_at).getTime():A&&!k?-1:!A&&k?1:T.name.localeCompare(E.name)});default:return x}},[i,c,r,o]);return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsx("main",{className:"pt-24 pb-12",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-12 h-12 rounded-full bg-destructive/20 flex items-center justify-center",children:S.jsx(pE,{className:"w-6 h-6 text-destructive animate-pulse"})}),S.jsxs("div",{children:[S.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Live TV"}),S.jsx("p",{className:"text-muted-foreground",children:"Watch your favorite channels live"})]})]}),S.jsxs(mu,{value:o,onValueChange:d=>l(d),children:[S.jsx(sl,{className:"w-[180px] bg-card",children:S.jsx(gu,{placeholder:"Sort by"})}),S.jsxs(ol,{className:"bg-popover",children:[S.jsx(kr,{value:"a-z",children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(FG,{className:"w-4 h-4"}),S.jsx("span",{children:"A-Z"})]})}),S.jsx(kr,{value:"popular",children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(gE,{className:"w-4 h-4"}),S.jsx("span",{children:"Popular"})]})}),S.jsx(kr,{value:"recent",children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(ey,{className:"w-4 h-4"}),S.jsx("span",{children:"Recent Added"})]})})]})]})]}),t?S.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-6",children:[...Array(8)].map((d,m)=>S.jsx(fh,{className:"aspect-video rounded-xl"},m))}):S.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-6",children:h.map(d=>S.jsx(uK,{channel:d},d.id))}),S.jsxs("div",{className:"mt-12 p-6 rounded-xl bg-card border border-border",children:[S.jsx("h2",{className:"font-semibold mb-2",children:"About Live TV"}),S.jsx("p",{className:"text-sm text-muted-foreground",children:"Stream your favorite Filipino channels live. Some channels may require specific browser support for DRM playback. If a channel doesn't load, try using a different browser or the YouTube alternative when available."})]})]})})]})},Ye=Number.isFinite||function(i){return typeof i=="number"&&isFinite(i)},j1e=Number.isSafeInteger||function(i){return typeof i=="number"&&Math.abs(i)<=U1e},U1e=Number.MAX_SAFE_INTEGER||9007199254740991;let pt=function(i){return i.NETWORK_ERROR="networkError",i.MEDIA_ERROR="mediaError",i.KEY_SYSTEM_ERROR="keySystemError",i.MUX_ERROR="muxError",i.OTHER_ERROR="otherError",i}({}),we=function(i){return i.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",i.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",i.KEY_SYSTEM_NO_SESSION="keySystemNoSession",i.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",i.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",i.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",i.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",i.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",i.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",i.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",i.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",i.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",i.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",i.MANIFEST_LOAD_ERROR="manifestLoadError",i.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",i.MANIFEST_PARSING_ERROR="manifestParsingError",i.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",i.LEVEL_EMPTY_ERROR="levelEmptyError",i.LEVEL_LOAD_ERROR="levelLoadError",i.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",i.LEVEL_PARSING_ERROR="levelParsingError",i.LEVEL_SWITCH_ERROR="levelSwitchError",i.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",i.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",i.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",i.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",i.FRAG_LOAD_ERROR="fragLoadError",i.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",i.FRAG_DECRYPT_ERROR="fragDecryptError",i.FRAG_PARSING_ERROR="fragParsingError",i.FRAG_GAP="fragGap",i.REMUX_ALLOC_ERROR="remuxAllocError",i.KEY_LOAD_ERROR="keyLoadError",i.KEY_LOAD_TIMEOUT="keyLoadTimeOut",i.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",i.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",i.BUFFER_APPEND_ERROR="bufferAppendError",i.BUFFER_APPENDING_ERROR="bufferAppendingError",i.BUFFER_STALLED_ERROR="bufferStalledError",i.BUFFER_FULL_ERROR="bufferFullError",i.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",i.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",i.ASSET_LIST_LOAD_ERROR="assetListLoadError",i.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",i.ASSET_LIST_PARSING_ERROR="assetListParsingError",i.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",i.INTERNAL_EXCEPTION="internalException",i.INTERNAL_ABORTED="aborted",i.ATTACH_MEDIA_ERROR="attachMediaError",i.UNKNOWN="unknown",i}({}),H=function(i){return i.MEDIA_ATTACHING="hlsMediaAttaching",i.MEDIA_ATTACHED="hlsMediaAttached",i.MEDIA_DETACHING="hlsMediaDetaching",i.MEDIA_DETACHED="hlsMediaDetached",i.MEDIA_ENDED="hlsMediaEnded",i.STALL_RESOLVED="hlsStallResolved",i.BUFFER_RESET="hlsBufferReset",i.BUFFER_CODECS="hlsBufferCodecs",i.BUFFER_CREATED="hlsBufferCreated",i.BUFFER_APPENDING="hlsBufferAppending",i.BUFFER_APPENDED="hlsBufferAppended",i.BUFFER_EOS="hlsBufferEos",i.BUFFERED_TO_END="hlsBufferedToEnd",i.BUFFER_FLUSHING="hlsBufferFlushing",i.BUFFER_FLUSHED="hlsBufferFlushed",i.MANIFEST_LOADING="hlsManifestLoading",i.MANIFEST_LOADED="hlsManifestLoaded",i.MANIFEST_PARSED="hlsManifestParsed",i.LEVEL_SWITCHING="hlsLevelSwitching",i.LEVEL_SWITCHED="hlsLevelSwitched",i.LEVEL_LOADING="hlsLevelLoading",i.LEVEL_LOADED="hlsLevelLoaded",i.LEVEL_UPDATED="hlsLevelUpdated",i.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",i.LEVELS_UPDATED="hlsLevelsUpdated",i.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",i.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",i.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",i.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",i.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",i.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",i.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",i.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",i.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",i.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",i.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",i.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",i.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",i.CUES_PARSED="hlsCuesParsed",i.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",i.INIT_PTS_FOUND="hlsInitPtsFound",i.FRAG_LOADING="hlsFragLoading",i.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",i.FRAG_LOADED="hlsFragLoaded",i.FRAG_DECRYPTED="hlsFragDecrypted",i.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",i.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",i.FRAG_PARSING_METADATA="hlsFragParsingMetadata",i.FRAG_PARSED="hlsFragParsed",i.FRAG_BUFFERED="hlsFragBuffered",i.FRAG_CHANGED="hlsFragChanged",i.FPS_DROP="hlsFpsDrop",i.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",i.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",i.ERROR="hlsError",i.DESTROYING="hlsDestroying",i.KEY_LOADING="hlsKeyLoading",i.KEY_LOADED="hlsKeyLoaded",i.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",i.BACK_BUFFER_REACHED="hlsBackBufferReached",i.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",i.ASSET_LIST_LOADING="hlsAssetListLoading",i.ASSET_LIST_LOADED="hlsAssetListLoaded",i.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",i.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",i.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",i.INTERSTITIAL_STARTED="hlsInterstitialStarted",i.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",i.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",i.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",i.INTERSTITIAL_ENDED="hlsInterstitialEnded",i.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",i.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",i.EVENT_CUE_ENTER="hlsEventCueEnter",i}({});var sn={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},lt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class tp{constructor(t,r=0,o=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=r,this.totalWeight_=o}sample(t,r){const o=Math.pow(this.alpha_,t);this.estimate_=r*(1-o)+o*this.estimate_,this.totalWeight_+=t}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_}}class F1e{constructor(t,r,o,l=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new tp(t),this.fast_=new tp(r),this.defaultTTFB_=l,this.ttfb_=new tp(t)}update(t,r){const{slow_:o,fast_:l,ttfb_:c}=this;o.halfLife!==t&&(this.slow_=new tp(t,o.getEstimate(),o.getTotalWeight())),l.halfLife!==r&&(this.fast_=new tp(r,l.getEstimate(),l.getTotalWeight())),c.halfLife!==t&&(this.ttfb_=new tp(t,c.getEstimate(),c.getTotalWeight()))}sample(t,r){t=Math.max(t,this.minDelayMs_);const o=8*r,l=t/1e3,c=o/l;this.fast_.sample(l,c),this.slow_.sample(l,c)}sampleTTFB(t){const r=t/1e3,o=Math.sqrt(2)*Math.exp(-Math.pow(r,2)/2);this.ttfb_.sample(o,Math.max(t,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function B1e(i,t,r){return(t=V1e(t))in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r,i}function Nn(){return Nn=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},Nn.apply(null,arguments)}function l7(i,t){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),r.push.apply(r,o)}return r}function _n(i){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l7(Object(r),!0).forEach(function(o){B1e(i,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):l7(Object(r)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})}return i}function $1e(i,t){if(typeof i!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var o=r.call(i,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function V1e(i){var t=$1e(i,"string");return typeof t=="symbol"?t:t+""}class Vo{constructor(t,r){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const o=`[${t}]:`;this.trace=ac,this.debug=r.debug.bind(null,o),this.log=r.log.bind(null,o),this.warn=r.warn.bind(null,o),this.info=r.info.bind(null,o),this.error=r.error.bind(null,o)}}const ac=function(){},G1e={trace:ac,debug:ac,log:ac,warn:ac,info:ac,error:ac};function TL(){return Nn({},G1e)}function H1e(i,t){const r=self.console[i];return r?r.bind(self.console,`${t?"["+t+"] ":""}[${i}] >`):ac}function u7(i,t,r){return t[i]?t[i].bind(t):H1e(i,r)}const SL=TL();function q1e(i,t,r){const o=TL();if(typeof console=="object"&&i===!0||typeof i=="object"){const l=["debug","log","info","warn","error"];l.forEach(c=>{o[c]=u7(c,i,r)});try{o.log(`Debug logs enabled for "${t}" in hls.js version 1.6.15`)}catch{return TL()}l.forEach(c=>{SL[c]=u7(c,i)})}else Nn(SL,o);return o}const Rn=SL;function $c(i=!0){return typeof self>"u"?void 0:(i||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function K1e(i){return typeof self<"u"&&i===self.ManagedMediaSource}function pz(i,t){const r=Object.keys(i),o=Object.keys(t),l=r.length,c=o.length;return!l||!c||l===c&&!r.some(h=>o.indexOf(h)===-1)}function po(i,t=!1){if(typeof TextDecoder<"u"){const v=new TextDecoder("utf-8").decode(i);if(t){const x=v.indexOf("\0");return x!==-1?v.substring(0,x):v}return v.replace(/\0/g,"")}const r=i.length;let o,l,c,h="",d=0;for(;d<r;){if(o=i[d++],o===0&&t)return h;if(o===0||o===3)continue;switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:h+=String.fromCharCode(o);break;case 12:case 13:l=i[d++],h+=String.fromCharCode((o&31)<<6|l&63);break;case 14:l=i[d++],c=i[d++],h+=String.fromCharCode((o&15)<<12|(l&63)<<6|(c&63)<<0);break}}return h}function Pi(i){let t="";for(let r=0;r<i.length;r++){let o=i[r].toString(16);o.length<2&&(o="0"+o),t+=o}return t}function mz(i){return Uint8Array.from(i.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function z1e(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var u_={exports:{}},c7;function W1e(){return c7||(c7=1,function(i,t){(function(r){var o=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,l=/^(?=([^\/?#]*))\1([^]*)$/,c=/(?:\/|^)\.(?=\/)/g,h=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,d={buildAbsoluteURL:function(m,v,x){if(x=x||{},m=m.trim(),v=v.trim(),!v){if(!x.alwaysNormalize)return m;var T=d.parseURL(m);if(!T)throw new Error("Error trying to parse base URL.");return T.path=d.normalizePath(T.path),d.buildURLFromParts(T)}var E=d.parseURL(v);if(!E)throw new Error("Error trying to parse relative URL.");if(E.scheme)return x.alwaysNormalize?(E.path=d.normalizePath(E.path),d.buildURLFromParts(E)):v;var A=d.parseURL(m);if(!A)throw new Error("Error trying to parse base URL.");if(!A.netLoc&&A.path&&A.path[0]!=="/"){var k=l.exec(A.path);A.netLoc=k[1],A.path=k[2]}A.netLoc&&!A.path&&(A.path="/");var _={scheme:A.scheme,netLoc:E.netLoc,path:null,params:E.params,query:E.query,fragment:E.fragment};if(!E.netLoc&&(_.netLoc=A.netLoc,E.path[0]!=="/"))if(!E.path)_.path=A.path,E.params||(_.params=A.params,E.query||(_.query=A.query));else{var R=A.path,P=R.substring(0,R.lastIndexOf("/")+1)+E.path;_.path=d.normalizePath(P)}return _.path===null&&(_.path=x.alwaysNormalize?d.normalizePath(E.path):E.path),d.buildURLFromParts(_)},parseURL:function(m){var v=o.exec(m);return v?{scheme:v[1]||"",netLoc:v[2]||"",path:v[3]||"",params:v[4]||"",query:v[5]||"",fragment:v[6]||""}:null},normalizePath:function(m){for(m=m.split("").reverse().join("").replace(c,"");m.length!==(m=m.replace(h,"")).length;);return m.split("").reverse().join("")},buildURLFromParts:function(m){return m.scheme+m.netLoc+m.path+m.params+m.query+m.fragment}};i.exports=d})()}(u_)),u_.exports}var VP=W1e();class GP{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var jn={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class gz{constructor(t){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof t=="string"&&(t={url:t}),this.base=t,X1e(this,"stats")}setByteRange(t,r){const o=t.split("@",2);let l;o.length===1?l=(r==null?void 0:r.byteRangeEndOffset)||0:l=parseInt(o[1]),this._byteRange=[l,parseInt(o[0])+l]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[jn.AUDIO]:null,[jn.VIDEO]:null,[jn.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(t){this._streams=t}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new GP),this._stats}set stats(t){this._stats=t}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=VP.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(t){this._url=t}clearElementaryStreamInfo(){const{elementaryStreams:t}=this;t[jn.AUDIO]=null,t[jn.VIDEO]=null,t[jn.AUDIOVIDEO]=null}}function Dr(i){return i.sn!=="initSegment"}class c_ extends gz{constructor(t,r){super(r),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=t}get byteLength(){if(this.hasStats){const t=this.stats.total;if(t)return t}if(this.byteRange.length){const t=this.byteRange[0],r=this.byteRange[1];if(Ye(t)&&Ye(r))return r-t}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(t){this._bitrate=t}get decryptdata(){var t;const{levelkeys:r}=this;if(!r||r.NONE)return null;if(r.identity)this._decryptdata||(this._decryptdata=r.identity.getDecryptData(this.sn));else if(!((t=this._decryptdata)!=null&&t.keyId)){const o=Object.keys(r);if(o.length===1){const l=this._decryptdata=r[o[0]]||null;l&&(this._decryptdata=l.getDecryptData(this.sn,r))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const t=Ye(this.duration)?this.duration:0;return this.programDateTime+t*1e3}get encrypted(){var t;if((t=this._decryptdata)!=null&&t.encrypted)return!0;if(this.levelkeys){var r;const o=Object.keys(this.levelkeys),l=o.length;if(l>1||l===1&&(r=this.levelkeys[o[0]])!=null&&r.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(t){if(!Ye(t)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=t}get ref(){return Dr(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(t){this.setStart(this.start+t)}setStart(t){this.start=t,this._ref&&(this._ref.start=t)}setDuration(t){this.duration=t,this._ref&&(this._ref.duration=t)}setKeyFormat(t){const r=this.levelkeys;if(r){var o;const l=r[t];l&&!((o=this._decryptdata)!=null&&o.keyId)&&(this._decryptdata=l.getDecryptData(this.sn,r))}}abortRequests(){var t,r;(t=this.loader)==null||t.abort(),(r=this.keyLoader)==null||r.abort()}setElementaryStreamInfo(t,r,o,l,c,h=!1){const{elementaryStreams:d}=this,m=d[t];if(!m){d[t]={startPTS:r,endPTS:o,startDTS:l,endDTS:c,partial:h};return}m.startPTS=Math.min(m.startPTS,r),m.endPTS=Math.max(m.endPTS,o),m.startDTS=Math.min(m.startDTS,l),m.endDTS=Math.max(m.endDTS,c)}}class Y1e extends gz{constructor(t,r,o,l,c){super(o),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=t.decimalFloatingPoint("DURATION"),this.gap=t.bool("GAP"),this.independent=t.bool("INDEPENDENT"),this.relurl=t.enumeratedString("URI"),this.fragment=r,this.index=l;const h=t.enumeratedString("BYTERANGE");h&&this.setByteRange(h,c),c&&(this.fragOffset=c.fragOffset+c.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:t}=this;return!!(t.audio||t.video||t.audiovideo)}}function vz(i,t){const r=Object.getPrototypeOf(i);if(r){const o=Object.getOwnPropertyDescriptor(r,t);return o||vz(r,t)}}function X1e(i,t){const r=vz(i,t);r&&(r.enumerable=!0,Object.defineProperty(i,t,r))}const d7=Math.pow(2,32)-1,Q1e=[].push,yz={video:1,audio:2,id3:3,text:4};function ni(i){return String.fromCharCode.apply(null,i)}function xz(i,t){const r=i[t]<<8|i[t+1];return r<0?65536+r:r}function Ft(i,t){const r=Tz(i,t);return r<0?4294967296+r:r}function h7(i,t){let r=Ft(i,t);return r*=Math.pow(2,32),r+=Ft(i,t+4),r}function Tz(i,t){return i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3]}function J1e(i){const t=i.byteLength;for(let r=0;r<t;){const o=Ft(i,r);if(o>8&&i[r+4]===109&&i[r+5]===111&&i[r+6]===111&&i[r+7]===102)return!0;r=o>1?r+o:t}return!1}function nn(i,t){const r=[];if(!t.length)return r;const o=i.byteLength;for(let l=0;l<o;){const c=Ft(i,l),h=ni(i.subarray(l+4,l+8)),d=c>1?l+c:o;if(h===t[0])if(t.length===1)r.push(i.subarray(l+8,d));else{const m=nn(i.subarray(l+8,d),t.slice(1));m.length&&Q1e.apply(r,m)}l=d}return r}function Z1e(i){const t=[],r=i[0];let o=8;const l=Ft(i,o);o+=4;let c=0,h=0;r===0?(c=Ft(i,o),h=Ft(i,o+4),o+=8):(c=h7(i,o),h=h7(i,o+8),o+=16),o+=2;let d=i.length+h;const m=xz(i,o);o+=2;for(let v=0;v<m;v++){let x=o;const T=Ft(i,x);x+=4;const E=T&2147483647;if((T&2147483648)>>>31===1)return Rn.warn("SIDX has hierarchical references (not supported)"),null;const k=Ft(i,x);x+=4,t.push({referenceSize:E,subsegmentDuration:k,info:{duration:k/l,start:d,end:d+E-1}}),d+=E,x+=4,o=x}return{earliestPresentationTime:c,timescale:l,version:r,referencesCount:m,references:t}}function Sz(i){const t=[],r=nn(i,["moov","trak"]);for(let l=0;l<r.length;l++){const c=r[l],h=nn(c,["tkhd"])[0];if(h){let d=h[0];const m=Ft(h,d===0?12:20),v=nn(c,["mdia","mdhd"])[0];if(v){d=v[0];const x=Ft(v,d===0?12:20),T=nn(c,["mdia","hdlr"])[0];if(T){const E=ni(T.subarray(8,12)),A={soun:jn.AUDIO,vide:jn.VIDEO}[E],k=nn(c,["mdia","minf","stbl","stsd"])[0],_=exe(k);A?(t[m]={timescale:x,type:A,stsd:_},t[A]=_n({timescale:x,id:m},_)):t[m]={timescale:x,type:E,stsd:_}}}}}return nn(i,["moov","mvex","trex"]).forEach(l=>{const c=Ft(l,4),h=t[c];h&&(h.default={duration:Ft(l,12),flags:Ft(l,20)})}),t}function exe(i){const t=i.subarray(8),r=t.subarray(86),o=ni(t.subarray(4,8));let l=o,c;const h=o==="enca"||o==="encv";if(h){const v=nn(t,[o])[0].subarray(o==="enca"?28:78);nn(v,["sinf"]).forEach(T=>{const E=nn(T,["schm"])[0];if(E){const A=ni(E.subarray(4,8));if(A==="cbcs"||A==="cenc"){const k=nn(T,["frma"])[0];k&&(l=ni(k))}}})}const d=l;switch(l){case"avc1":case"avc2":case"avc3":case"avc4":{const m=nn(r,["avcC"])[0];m&&m.length>3&&(l+="."+lS(m[1])+lS(m[2])+lS(m[3]),c=aS(d==="avc1"?"dva1":"dvav",r));break}case"mp4a":{const m=nn(t,[o])[0],v=nn(m.subarray(28),["esds"])[0];if(v&&v.length>7){let x=4;if(v[x++]!==3)break;x=d_(v,x),x+=2;const T=v[x++];if(T&128&&(x+=2),T&64&&(x+=v[x++]),v[x++]!==4)break;x=d_(v,x);const E=v[x++];if(E===64)l+="."+lS(E);else break;if(x+=12,v[x++]!==5)break;x=d_(v,x);const A=v[x++];let k=(A&248)>>3;k===31&&(k+=1+((A&7)<<3)+((v[x]&224)>>5)),l+="."+k}break}case"hvc1":case"hev1":{const m=nn(r,["hvcC"])[0];if(m&&m.length>12){const v=m[1],x=["","A","B","C"][v>>6],T=v&31,E=Ft(m,2),A=(v&32)>>5?"H":"L",k=m[12],_=m.subarray(6,12);l+="."+x+T,l+="."+txe(E).toString(16).toUpperCase(),l+="."+A+k;let R="";for(let P=_.length;P--;){const D=_[P];(D||R)&&(R="."+D.toString(16).toUpperCase()+R)}l+=R}c=aS(d=="hev1"?"dvhe":"dvh1",r);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{l=aS(l,r)||l;break}case"vp09":{const m=nn(r,["vpcC"])[0];if(m&&m.length>6){const v=m[4],x=m[5],T=m[6]>>4&15;l+="."+Ga(v)+"."+Ga(x)+"."+Ga(T)}break}case"av01":{const m=nn(r,["av1C"])[0];if(m&&m.length>2){const v=m[1]>>>5,x=m[1]&31,T=m[2]>>>7?"H":"M",E=(m[2]&64)>>6,A=(m[2]&32)>>5,k=v===2&&E?A?12:10:E?10:8,_=(m[2]&16)>>4,R=(m[2]&8)>>3,P=(m[2]&4)>>2,D=m[2]&3;l+="."+v+"."+Ga(x)+T+"."+Ga(k)+"."+_+"."+R+P+D+"."+Ga(1)+"."+Ga(1)+"."+Ga(1)+"."+0,c=aS("dav1",r)}break}}return{codec:l,encrypted:h,supplemental:c}}function aS(i,t){const r=nn(t,["dvvC"]),o=r.length?r[0]:nn(t,["dvcC"])[0];if(o){const l=o[2]>>1&127,c=o[2]<<5&32|o[3]>>3&31;return i+"."+Ga(l)+"."+Ga(c)}}function txe(i){let t=0;for(let r=0;r<32;r++)t|=(i>>r&1)<<31-r;return t>>>0}function d_(i,t){const r=t+5;for(;i[t++]&128&&t<r;);return t}function lS(i){return("0"+i.toString(16).toUpperCase()).slice(-2)}function Ga(i){return(i<10?"0":"")+i}function nxe(i,t){if(!i||!t)return;const r=t.keyId;r&&t.isCommonEncryption&&wz(i,(o,l)=>{const c=o.subarray(8,24);c.some(h=>h!==0)||(Rn.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${Pi(c)} -> ${Pi(r)}`),o.set(r,8))})}function rxe(i){const t=[];return wz(i,r=>t.push(r.subarray(8,24))),t}function wz(i,t){nn(i,["moov","trak"]).forEach(o=>{const l=nn(o,["mdia","minf","stbl","stsd"])[0];if(!l)return;const c=l.subarray(8);let h=nn(c,["enca"]);const d=h.length>0;d||(h=nn(c,["encv"])),h.forEach(m=>{const v=d?m.subarray(28):m.subarray(78);nn(v,["sinf"]).forEach(T=>{const E=Ez(T);E&&t(E,d)})})})}function Ez(i){const t=nn(i,["schm"])[0];if(t){const r=ni(t.subarray(4,8));if(r==="cbcs"||r==="cenc"){const o=nn(i,["schi","tenc"])[0];if(o)return o}}}function ixe(i,t,r){const o={},l=nn(i,["moof","traf"]);for(let c=0;c<l.length;c++){const h=l[c],d=nn(h,["tfhd"])[0],m=Ft(d,4),v=t[m];if(!v)continue;o[m]||(o[m]={start:NaN,duration:0,sampleCount:0,timescale:v.timescale,type:v.type});const x=o[m],T=nn(h,["tfdt"])[0];if(T){const N=T[0];let $=Ft(T,4);N===1&&($===d7?r.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):($*=d7+1,$+=Ft(T,8))),Ye($)&&(!Ye(x.start)||$<x.start)&&(x.start=$)}const E=v.default,A=Ft(d,0)|(E==null?void 0:E.flags);let k=(E==null?void 0:E.duration)||0;A&8&&(A&2?k=Ft(d,12):k=Ft(d,8));const _=nn(h,["trun"]);let R=x.start||0,P=0,D=k;for(let N=0;N<_.length;N++){const $=_[N],V=Ft($,4),W=x.sampleCount;x.sampleCount+=V;const C=$[3]&1,K=$[3]&4,ee=$[2]&1,Q=$[2]&2,fe=$[2]&4,O=$[2]&8;let re=8,ce=V;for(C&&(re+=4),K&&V&&(!($[re+1]&1)&&x.keyFrameIndex===void 0&&(x.keyFrameIndex=W),re+=4,ee?(D=Ft($,re),re+=4):D=k,Q&&(re+=4),O&&(re+=4),R+=D,P+=D,ce--);ce--;)ee?(D=Ft($,re),re+=4):D=k,Q&&(re+=4),fe&&($[re+1]&1||x.keyFrameIndex===void 0&&(x.keyFrameIndex=x.sampleCount-(ce+1),x.keyFrameStart=R),re+=4),O&&(re+=4),R+=D,P+=D;!P&&k&&(P+=k*V)}x.duration+=P}if(!Object.keys(o).some(c=>o[c].duration)){let c=1/0,h=0;const d=nn(i,["sidx"]);for(let m=0;m<d.length;m++){const v=Z1e(d[m]);if(v!=null&&v.references){c=Math.min(c,v.earliestPresentationTime/v.timescale);const x=v.references.reduce((T,E)=>T+E.info.duration||0,0);h=Math.max(h,x+v.earliestPresentationTime/v.timescale)}}h&&Ye(h)&&Object.keys(o).forEach(m=>{o[m].duration||(o[m].duration=h*o[m].timescale-o[m].start)})}return o}function sxe(i){const t={valid:null,remainder:null},r=nn(i,["moof"]);if(r.length<2)return t.remainder=i,t;const o=r[r.length-1];return t.valid=i.slice(0,o.byteOffset-8),t.remainder=i.slice(o.byteOffset-8),t}function Bo(i,t){const r=new Uint8Array(i.length+t.length);return r.set(i),r.set(t,i.length),r}function f7(i,t){const r=[],o=t.samples,l=t.timescale,c=t.id;let h=!1;return nn(o,["moof"]).map(m=>{const v=m.byteOffset-8;nn(m,["traf"]).map(T=>{const E=nn(T,["tfdt"]).map(A=>{const k=A[0];let _=Ft(A,4);return k===1&&(_*=Math.pow(2,32),_+=Ft(A,8)),_/l})[0];return E!==void 0&&(i=E),nn(T,["tfhd"]).map(A=>{const k=Ft(A,4),_=Ft(A,0)&16777215,R=(_&1)!==0,P=(_&2)!==0,D=(_&8)!==0;let N=0;const $=(_&16)!==0;let V=0;const W=(_&32)!==0;let C=8;k===c&&(R&&(C+=8),P&&(C+=4),D&&(N=Ft(A,C),C+=4),$&&(V=Ft(A,C),C+=4),W&&(C+=4),t.type==="video"&&(h=UE(t.codec)),nn(T,["trun"]).map(K=>{const ee=K[0],Q=Ft(K,0)&16777215,fe=(Q&1)!==0;let O=0;const re=(Q&4)!==0,ce=(Q&256)!==0;let Ae=0;const se=(Q&512)!==0;let ue=0;const le=(Q&1024)!==0,pe=(Q&2048)!==0;let be=0;const Ce=Ft(K,4);let ke=8;fe&&(O=Ft(K,ke),ke+=4),re&&(ke+=4);let Ue=O+v;for(let qe=0;qe<Ce;qe++){if(ce?(Ae=Ft(K,ke),ke+=4):Ae=N,se?(ue=Ft(K,ke),ke+=4):ue=V,le&&(ke+=4),pe&&(ee===0?be=Ft(K,ke):be=Tz(K,ke),ke+=4),t.type===jn.VIDEO){let ut=0;for(;ut<ue;){const X=Ft(o,Ue);if(Ue+=4,oxe(h,o[Ue])){const Pe=o.subarray(Ue,Ue+X);HP(Pe,h?2:1,i+be/l,r)}Ue+=X,ut+=X+4}}i+=Ae/l}}))})})}),r}function UE(i){if(!i)return!1;const t=i.substring(0,4);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function oxe(i,t){if(i){const r=t>>1&63;return r===39||r===40}else return(t&31)===6}function HP(i,t,r,o){const l=bz(i);let c=0;c+=t;let h=0,d=0,m=0;for(;c<l.length;){h=0;do{if(c>=l.length)break;m=l[c++],h+=m}while(m===255);d=0;do{if(c>=l.length)break;m=l[c++],d+=m}while(m===255);const v=l.length-c;let x=c;if(d<v)c+=d;else if(d>v){Rn.error(`Malformed SEI payload. ${d} is too small, only ${v} bytes left to parse.`);break}if(h===4){if(l[x++]===181){const E=xz(l,x);if(x+=2,E===49){const A=Ft(l,x);if(x+=4,A===1195456820){const k=l[x++];if(k===3){const _=l[x++],R=31&_,P=64&_,D=P?2+R*3:0,N=new Uint8Array(D);if(P){N[0]=_;for(let $=1;$<D;$++)N[$]=l[x++]}o.push({type:k,payloadType:h,pts:r,bytes:N})}}}}}else if(h===5&&d>16){const T=[];for(let k=0;k<16;k++){const _=l[x++].toString(16);T.push(_.length==1?"0"+_:_),(k===3||k===5||k===7||k===9)&&T.push("-")}const E=d-16,A=new Uint8Array(E);for(let k=0;k<E;k++)A[k]=l[x++];o.push({payloadType:h,pts:r,uuid:T.join(""),userData:po(A),userDataBytes:A})}}}function bz(i){const t=i.byteLength,r=[];let o=1;for(;o<t-2;)i[o]===0&&i[o+1]===0&&i[o+2]===3?(r.push(o+2),o+=2):o++;if(r.length===0)return i;const l=t-r.length,c=new Uint8Array(l);let h=0;for(o=0;o<l;h++,o++)h===r[0]&&(h++,r.shift()),c[o]=i[h];return c}function axe(i){const t=i[0];let r="",o="",l=0,c=0,h=0,d=0,m=0,v=0;if(t===0){for(;ni(i.subarray(v,v+1))!=="\0";)r+=ni(i.subarray(v,v+1)),v+=1;for(r+=ni(i.subarray(v,v+1)),v+=1;ni(i.subarray(v,v+1))!=="\0";)o+=ni(i.subarray(v,v+1)),v+=1;o+=ni(i.subarray(v,v+1)),v+=1,l=Ft(i,12),c=Ft(i,16),d=Ft(i,20),m=Ft(i,24),v=28}else if(t===1){v+=4,l=Ft(i,v),v+=4;const T=Ft(i,v);v+=4;const E=Ft(i,v);for(v+=4,h=2**32*T+E,j1e(h)||(h=Number.MAX_SAFE_INTEGER,Rn.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),d=Ft(i,v),v+=4,m=Ft(i,v),v+=4;ni(i.subarray(v,v+1))!=="\0";)r+=ni(i.subarray(v,v+1)),v+=1;for(r+=ni(i.subarray(v,v+1)),v+=1;ni(i.subarray(v,v+1))!=="\0";)o+=ni(i.subarray(v,v+1)),v+=1;o+=ni(i.subarray(v,v+1)),v+=1}const x=i.subarray(v,i.byteLength);return{schemeIdUri:r,value:o,timeScale:l,presentationTime:h,presentationTimeDelta:c,eventDuration:d,id:m,payload:x}}function lxe(i,...t){const r=t.length;let o=8,l=r;for(;l--;)o+=t[l].byteLength;const c=new Uint8Array(o);for(c[0]=o>>24&255,c[1]=o>>16&255,c[2]=o>>8&255,c[3]=o&255,c.set(i,4),l=0,o=8;l<r;l++)c.set(t[l],o),o+=t[l].byteLength;return c}function uxe(i,t,r){if(i.byteLength!==16)throw new RangeError("Invalid system id");let o,l;o=0,l=new Uint8Array;let c;o>0?(c=new Uint8Array(4),t.length>0&&new DataView(c.buffer).setUint32(0,t.length,!1)):c=new Uint8Array;const h=new Uint8Array(4);return r.byteLength>0&&new DataView(h.buffer).setUint32(0,r.byteLength,!1),lxe([112,115,115,104],new Uint8Array([o,0,0,0]),i,c,l,h,r)}function cxe(i){const t=[];if(i instanceof ArrayBuffer){const r=i.byteLength;let o=0;for(;o+32<r;){const l=new DataView(i,o),c=dxe(l);t.push(c),o+=c.size}}return t}function dxe(i){const t=i.getUint32(0),r=i.byteOffset,o=i.byteLength;if(o<t)return{offset:r,size:o};if(i.getUint32(4)!==1886614376)return{offset:r,size:t};const c=i.getUint32(8)>>>24;if(c!==0&&c!==1)return{offset:r,size:t};const h=i.buffer,d=Pi(new Uint8Array(h,r+12,16));let m=null,v=null,x=0;if(c===0)x=28;else{const E=i.getUint32(28);if(!E||o<32+E*16)return{offset:r,size:t};m=[];for(let A=0;A<E;A++)m.push(new Uint8Array(h,r+32+A*16,16));x=32+E*16}if(!x)return{offset:r,size:t};const T=i.getUint32(x);return t-32<T?{offset:r,size:t}:(v=new Uint8Array(h,r+x+4,T),{version:c,systemId:d,kids:m,data:v,offset:r,size:t})}const Az=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),dm={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function qP(i,t){const r=dm[t];return!!r&&!!r[i.slice(0,4)]}function Dv(i,t,r=!0){return!i.split(",").some(o=>!KP(o,t,r))}function KP(i,t,r=!0){var o;const l=$c(r);return(o=l==null?void 0:l.isTypeSupported(Nv(i,t)))!=null?o:!1}function Nv(i,t){return`${t}/mp4;codecs=${i}`}function p7(i){if(i){const t=i.substring(0,4);return dm.video[t]}return 2}function Nw(i){const t=Az();return i.split(",").reduce((r,o)=>{const c=t&&UE(o)?9:dm.video[o];return c?(c*2+r)/(r?3:2):(dm.audio[o]+r)/(r?2:1)},0)}const h_={};function hxe(i,t=!0){if(h_[i])return h_[i];const r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[i];for(let l=0;l<r.length;l++){var o;if(KP(r[l],"audio",t))return h_[i]=r[l],r[l];if(r[l]==="mp3"&&(o=$c(t))!=null&&o.isTypeSupported("audio/mpeg"))return""}return i}const fxe=/flac|opus|mp4a\.40\.34/i;function Mw(i,t=!0){return i.replace(fxe,r=>hxe(r.toLowerCase(),t))}function pxe(i,t){const r=[];if(i){const o=i.split(",");for(let l=0;l<o.length;l++)qP(o[l],"video")||r.push(o[l])}return t&&r.push(t),r.join(",")}function BS(i,t){if(i&&(i.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(i)!==-1)&&(m7(i,"audio")||m7(i,"video")))return i;if(t){const r=t.split(",");if(r.length>1){if(i){for(let o=r.length;o--;)if(r[o].substring(0,4)===i.substring(0,4))return r[o]}return r[0]}}return t||i}function m7(i,t){return qP(i,t)&&KP(i,t)}function mxe(i){const t=i.split(",");for(let r=0;r<t.length;r++){const o=t[r].split(".");o.length>2&&o[0]==="avc1"&&(t[r]=`avc1.${parseInt(o[1]).toString(16)}${("000"+parseInt(o[2]).toString(16)).slice(-4)}`)}return t.join(",")}function gxe(i){if(i.startsWith("av01.")){const t=i.split("."),r=["0","111","01","01","01","0"];for(let o=t.length;o>4&&o<10;o++)t[o]=r[o-4];return t.join(".")}return i}function g7(i){const t=$c(i)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function wL(i){return i.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const vxe={supported:!0,powerEfficient:!0,smooth:!0},yxe={supported:!1,smooth:!1,powerEfficient:!1},Iz={supported:!0,configurations:[],decodingInfoResults:[vxe]};function Cz(i,t){return{supported:!1,configurations:t,decodingInfoResults:[yxe],error:i}}function xxe(i,t,r,o,l,c){const h=i.videoCodec,d=i.audioCodec?i.audioGroups:null,m=c==null?void 0:c.audioCodec,v=c==null?void 0:c.channels,x=v?parseInt(v):m?1/0:2;let T=null;if(d!=null&&d.length)try{d.length===1&&d[0]?T=t.groups[d[0]].channels:T=d.reduce((E,A)=>{if(A){const k=t.groups[A];if(!k)throw new Error(`Audio track group ${A} not found`);Object.keys(k.channels).forEach(_=>{E[_]=(E[_]||0)+k.channels[_]})}return E},{2:0})}catch{return!0}return h!==void 0&&(h.split(",").some(E=>UE(E))||i.width>1920&&i.height>1088||i.height>1920&&i.width>1088||i.frameRate>Math.max(o,30)||i.videoRange!=="SDR"&&i.videoRange!==r||i.bitrate>Math.max(l,8e6))||!!T&&Ye(x)&&Object.keys(T).some(E=>parseInt(E)>x)}function kz(i,t,r,o={}){const l=i.videoCodec;if(!l&&!i.audioCodec||!r)return Promise.resolve(Iz);const c=[],h=Txe(i),d=h.length,m=Sxe(i,t,d>0),v=m.length;for(let x=d||1*v||1;x--;){const T={type:"media-source"};if(d&&(T.video=h[x%d]),v){T.audio=m[x%v];const E=T.audio.bitrate;T.video&&E&&(T.video.bitrate-=E)}c.push(T)}if(l){const x=navigator.userAgent;if(l.split(",").some(T=>UE(T))&&Az())return Promise.resolve(Cz(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${x})`),c))}return Promise.all(c.map(x=>{const T=Exe(x);return o[T]||(o[T]=r.decodingInfo(x))})).then(x=>({supported:!x.some(T=>!T.supported),configurations:c,decodingInfoResults:x})).catch(x=>({supported:!1,configurations:c,decodingInfoResults:[],error:x}))}function Txe(i){var t;const r=(t=i.videoCodec)==null?void 0:t.split(","),o=_z(i),l=i.width||640,c=i.height||480,h=i.frameRate||30,d=i.videoRange.toLowerCase();return r?r.map(m=>{const v={contentType:Nv(gxe(m),"video"),width:l,height:c,bitrate:o,framerate:h};return d!=="sdr"&&(v.transferFunction=d),v}):[]}function Sxe(i,t,r){var o;const l=(o=i.audioCodec)==null?void 0:o.split(","),c=_z(i);return l&&i.audioGroups?i.audioGroups.reduce((h,d)=>{var m;const v=d?(m=t.groups[d])==null?void 0:m.tracks:null;return v?v.reduce((x,T)=>{if(T.groupId===d){const E=parseFloat(T.channels||"");l.forEach(A=>{const k={contentType:Nv(A,"audio"),bitrate:r?wxe(A,c):c};E&&(k.channels=""+E),x.push(k)})}return x},h):h},[]):[]}function wxe(i,t){if(t<=1)return 1;let r=128e3;return i==="ec-3"?r=768e3:i==="ac-3"&&(r=64e4),Math.min(t/2,r)}function _z(i){return Math.ceil(Math.max(i.bitrate*.9,i.averageBitrate)/1e3)*1e3||1}function Exe(i){let t="";const{audio:r,video:o}=i;if(o){const l=wL(o.contentType);t+=`${l}_r${o.height}x${o.width}f${Math.ceil(o.framerate)}${o.transferFunction||"sd"}_${Math.ceil(o.bitrate/1e5)}`}if(r){const l=wL(r.contentType);t+=`${o?"_":""}${l}_c${r.channels}`}return t}const EL=["NONE","TYPE-0","TYPE-1",null];function bxe(i){return EL.indexOf(i)>-1}const Ow=["SDR","PQ","HLG"];function Axe(i){return!!i&&Ow.indexOf(i)>-1}var $S={No:"",Yes:"YES",v2:"v2"};function v7(i){const{canSkipUntil:t,canSkipDateRanges:r,age:o}=i,l=o<t/2;return t&&l?r?$S.v2:$S.Yes:$S.No}class y7{constructor(t,r,o){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=r,this.skip=o}addDirectives(t){const r=new self.URL(t);return this.msn!==void 0&&r.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&r.searchParams.set("_HLS_part",this.part.toString()),this.skip&&r.searchParams.set("_HLS_skip",this.skip),r.href}}class Mv{constructor(t){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[t.url],this._attrs=[t.attrs],this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.frameRate=t.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=t.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.codecSet=[t.videoCodec,t.audioCodec].filter(o=>!!o).map(o=>o.substring(0,4)).join(","),"supplemental"in t){var r;this.supplemental=t.supplemental;const o=(r=t.supplemental)==null?void 0:r.videoCodec;o&&o!==t.videoCodec&&(this.codecSet+=`,${o.substring(0,4)}`)}this.addGroupId("audio",t.attrs.AUDIO),this.addGroupId("text",t.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(t){return x7(this._audioGroups,t)}hasSubtitleGroup(t){return x7(this._subtitleGroups,t)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(t,r){if(r){if(t==="audio"){let o=this._audioGroups;o||(o=this._audioGroups=[]),o.indexOf(r)===-1&&o.push(r)}else if(t==="text"){let o=this._subtitleGroups;o||(o=this._subtitleGroups=[]),o.indexOf(r)===-1&&o.push(r)}}}get urlId(){return 0}set urlId(t){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var t;return(t=this.audioGroups)==null?void 0:t[0]}get textGroupId(){var t;return(t=this.subtitleGroups)==null?void 0:t[0]}addFallback(){}}function x7(i,t){return!t||!i?!1:i.indexOf(t)!==-1}function Ixe(){if(typeof matchMedia=="function"){const i=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(i.media!==t.media)return i.matches===!0}return!1}function Cxe(i,t){let r=!1,o=[];if(i&&(r=i!=="SDR",o=[i]),t){o=t.allowedVideoRanges||Ow.slice(0);const l=o.join("")!=="SDR"&&!t.videoCodec;r=t.preferHDR!==void 0?t.preferHDR:l&&Ixe(),r||(o=["SDR"])}return{preferHDR:r,allowedVideoRanges:o}}const kxe=i=>{const t=new WeakSet;return(r,o)=>{if(i&&(o=i(r,o)),typeof o=="object"&&o!==null){if(t.has(o))return;t.add(o)}return o}},Un=(i,t)=>JSON.stringify(i,kxe(t));function _xe(i,t,r,o,l){const c=Object.keys(i),h=o==null?void 0:o.channels,d=o==null?void 0:o.audioCodec,m=l==null?void 0:l.videoCodec,v=h&&parseInt(h)===2;let x=!1,T=!1,E=1/0,A=1/0,k=1/0,_=1/0,R=0,P=[];const{preferHDR:D,allowedVideoRanges:N}=Cxe(t,l);for(let K=c.length;K--;){const ee=i[c[K]];x||(x=ee.channels[2]>0),E=Math.min(E,ee.minHeight),A=Math.min(A,ee.minFramerate),k=Math.min(k,ee.minBitrate),N.filter(fe=>ee.videoRanges[fe]>0).length>0&&(T=!0)}E=Ye(E)?E:0,A=Ye(A)?A:0;const $=Math.max(1080,E),V=Math.max(30,A);k=Ye(k)?k:r,r=Math.max(k,r),T||(t=void 0);const W=c.length>1;return{codecSet:c.reduce((K,ee)=>{const Q=i[ee];if(ee===K)return K;if(P=T?N.filter(fe=>Q.videoRanges[fe]>0):[],W){if(Q.minBitrate>r)return Ba(ee,`min bitrate of ${Q.minBitrate} > current estimate of ${r}`),K;if(!Q.hasDefaultAudio)return Ba(ee,"no renditions with default or auto-select sound found"),K;if(d&&ee.indexOf(d.substring(0,4))%5!==0)return Ba(ee,`audio codec preference "${d}" not found`),K;if(h&&!v){if(!Q.channels[h])return Ba(ee,`no renditions with ${h} channel sound found (channels options: ${Object.keys(Q.channels)})`),K}else if((!d||v)&&x&&Q.channels[2]===0)return Ba(ee,"no renditions with stereo sound found"),K;if(Q.minHeight>$)return Ba(ee,`min resolution of ${Q.minHeight} > maximum of ${$}`),K;if(Q.minFramerate>V)return Ba(ee,`min framerate of ${Q.minFramerate} > maximum of ${V}`),K;if(!P.some(fe=>Q.videoRanges[fe]>0))return Ba(ee,`no variants with VIDEO-RANGE of ${Un(P)} found`),K;if(m&&ee.indexOf(m.substring(0,4))%5!==0)return Ba(ee,`video codec preference "${m}" not found`),K;if(Q.maxScore<R)return Ba(ee,`max score of ${Q.maxScore} < selected max of ${R}`),K}return K&&(Nw(ee)>=Nw(K)||Q.fragmentError>i[K].fragmentError)?K:(_=Q.minIndex,R=Q.maxScore,ee)},void 0),videoRanges:P,preferHDR:D,minFramerate:A,minBitrate:k,minIndex:_}}function Ba(i,t){Rn.log(`[abr] start candidates with "${i}" ignored because ${t}`)}function Rz(i){return i.reduce((t,r)=>{let o=t.groups[r.groupId];o||(o=t.groups[r.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),o.tracks.push(r);const l=r.channels||"2";return o.channels[l]=(o.channels[l]||0)+1,o.hasDefault=o.hasDefault||r.default,o.hasAutoSelect=o.hasAutoSelect||r.autoselect,o.hasDefault&&(t.hasDefaultAudio=!0),o.hasAutoSelect&&(t.hasAutoSelectAudio=!0),t},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Rxe(i,t,r,o){return i.slice(r,o+1).reduce((l,c,h)=>{if(!c.codecSet)return l;const d=c.audioGroups;let m=l[c.codecSet];m||(l[c.codecSet]=m={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:h,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!d,fragmentError:0}),m.minBitrate=Math.min(m.minBitrate,c.bitrate);const v=Math.min(c.height,c.width);return m.minHeight=Math.min(m.minHeight,v),m.minFramerate=Math.min(m.minFramerate,c.frameRate),m.minIndex=Math.min(m.minIndex,h),m.maxScore=Math.max(m.maxScore,c.score),m.fragmentError+=c.fragmentError,m.videoRanges[c.videoRange]=(m.videoRanges[c.videoRange]||0)+1,d&&d.forEach(x=>{if(!x)return;const T=t.groups[x];T&&(m.hasDefaultAudio=m.hasDefaultAudio||t.hasDefaultAudio?T.hasDefault:T.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(T.channels).forEach(E=>{m.channels[E]=(m.channels[E]||0)+T.channels[E]}))}),l},{})}function T7(i){if(!i)return i;const{lang:t,assocLang:r,characteristics:o,channels:l,audioCodec:c}=i;return{lang:t,assocLang:r,characteristics:o,channels:l,audioCodec:c}}function Qa(i,t,r){if("attrs"in i){const o=t.indexOf(i);if(o!==-1)return o}for(let o=0;o<t.length;o++){const l=t[o];if(ph(i,l,r))return o}return-1}function ph(i,t,r){const{groupId:o,name:l,lang:c,assocLang:h,default:d}=i,m=i.forced;return(o===void 0||t.groupId===o)&&(l===void 0||t.name===l)&&(c===void 0||Lxe(c,t.lang))&&(c===void 0||t.assocLang===h)&&(d===void 0||t.default===d)&&(m===void 0||t.forced===m)&&(!("characteristics"in i)||Pxe(i.characteristics||"",t.characteristics))&&(r===void 0||r(i,t))}function Lxe(i,t="--"){return i.length===t.length?i===t:i.startsWith(t)||t.startsWith(i)}function Pxe(i,t=""){const r=i.split(","),o=t.split(",");return r.length===o.length&&!r.some(l=>o.indexOf(l)===-1)}function Kd(i,t){const{audioCodec:r,channels:o}=i;return(r===void 0||(t.audioCodec||"").substring(0,4)===r.substring(0,4))&&(o===void 0||o===(t.channels||"2"))}function Dxe(i,t,r,o,l){const c=t[o],d=t.reduce((E,A,k)=>{const _=A.uri;return(E[_]||(E[_]=[])).push(k),E},{})[c.uri];d.length>1&&(o=Math.max.apply(Math,d));const m=c.videoRange,v=c.frameRate,x=c.codecSet.substring(0,4),T=S7(t,o,E=>{if(E.videoRange!==m||E.frameRate!==v||E.codecSet.substring(0,4)!==x)return!1;const A=E.audioGroups,k=r.filter(_=>!A||A.indexOf(_.groupId)!==-1);return Qa(i,k,l)>-1});return T>-1?T:S7(t,o,E=>{const A=E.audioGroups,k=r.filter(_=>!A||A.indexOf(_.groupId)!==-1);return Qa(i,k,l)>-1})}function S7(i,t,r){for(let o=t;o>-1;o--)if(r(i[o]))return o;for(let o=t+1;o<i.length;o++)if(r(i[o]))return o;return-1}function jw(i,t){var r;return!!i&&i!==((r=t.loadLevelObj)==null?void 0:r.uri)}class Nxe extends Vo{constructor(t){super("abr",t.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=r=>{var o;const{fragCurrent:l,partCurrent:c,hls:h}=this,{autoLevelEnabled:d,media:m}=h;if(!l||!m)return;const v=performance.now(),x=c?c.stats:l.stats,T=c?c.duration:l.duration,E=v-x.loading.start,A=h.minAutoLevel,k=l.level,_=this._nextAutoLevel;if(x.aborted||x.loaded&&x.loaded===x.total||k<=A){this.clearTimer(),this._nextAutoLevel=-1;return}if(!d)return;const R=_>-1&&_!==k,P=!!r||R;if(!P&&(m.paused||!m.playbackRate||!m.readyState))return;const D=h.mainForwardBufferInfo;if(!P&&D===null)return;const N=this.bwEstimator.getEstimateTTFB(),$=Math.abs(m.playbackRate);if(E<=Math.max(N,1e3*(T/($*2))))return;const V=D?D.len/$:0,W=x.loading.first?x.loading.first-x.loading.start:-1,C=x.loaded&&W>-1,K=this.getBwEstimate(),ee=h.levels,Q=ee[k],fe=Math.max(x.loaded,Math.round(T*(l.bitrate||Q.averageBitrate)/8));let O=C?E-W:E;O<1&&C&&(O=Math.min(E,x.loaded*8/K));const re=C?x.loaded*1e3/O:0,ce=N/1e3,Ae=re?(fe-x.loaded)/re:fe*8/K+ce;if(Ae<=V)return;const se=re?re*8:K,ue=((o=(r==null?void 0:r.details)||this.hls.latestLevelDetails)==null?void 0:o.live)===!0,le=this.hls.config.abrBandWidthUpFactor;let pe=Number.POSITIVE_INFINITY,be;for(be=k-1;be>A;be--){const qe=ee[be].maxBitrate,ut=!ee[be].details||ue;if(pe=this.getTimeToLoadFrag(ce,se,T*qe,ut),pe<Math.min(V,T+ce))break}if(pe>=Ae||pe>T*10)return;C?this.bwEstimator.sample(E-Math.min(N,W),x.loaded):this.bwEstimator.sampleTTFB(E);const Ce=ee[be].maxBitrate;this.getBwEstimate()*le>Ce&&this.resetEstimator(Ce);const ke=this.findBestLevel(Ce,A,be,0,V,1,1);ke>-1&&(be=ke),this.warn(`Fragment ${l.sn}${c?" part "+c.index:""} of level ${k} is loading too slowly;
      Fragment duration: ${l.duration.toFixed(3)}
      Time to underbuffer: ${V.toFixed(3)} s
      Estimated load time for current fragment: ${Ae.toFixed(3)} s
      Estimated load time for down switch fragment: ${pe.toFixed(3)} s
      TTFB estimate: ${W|0} ms
      Current BW estimate: ${Ye(K)?K|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${be} @ ${Ce|0} bps`),h.nextLoadLevel=h.nextAutoLevel=be,this.clearTimer();const Ue=()=>{if(this.clearTimer(),this.fragCurrent===l&&this.hls.loadLevel===be&&be>0){const qe=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${be>0?"and switching down":""}
      Fragment duration: ${l.duration.toFixed(3)} s
      Time to underbuffer: ${qe.toFixed(3)} s`),l.abortRequests(),this.fragCurrent=this.partCurrent=null,be>A){let ut=this.findBestLevel(this.hls.levels[A].bitrate,A,be,0,qe,1,1);ut===-1&&(ut=A),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ut,this.resetEstimator(this.hls.levels[ut].bitrate)}}};R||Ae>pe*2?Ue():this.timer=self.setInterval(Ue,pe*1e3),h.trigger(H.FRAG_LOAD_EMERGENCY_ABORTED,{frag:l,part:c,stats:x})},this.hls=t,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(t){t&&(this.log(`setting initial bwe to ${t}`),this.hls.config.abrEwmaDefaultEstimate=t),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const t=this.hls.config;return new F1e(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate)}registerListeners(){const{hls:t}=this;t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.FRAG_LOADING,this.onFragLoading,this),t.on(H.FRAG_LOADED,this.onFragLoaded,this),t.on(H.FRAG_BUFFERED,this.onFragBuffered,this),t.on(H.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(H.LEVEL_LOADED,this.onLevelLoaded,this),t.on(H.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(H.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.on(H.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t&&(t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.FRAG_LOADING,this.onFragLoading,this),t.off(H.FRAG_LOADED,this.onFragLoaded,this),t.off(H.FRAG_BUFFERED,this.onFragBuffered,this),t.off(H.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(H.LEVEL_LOADED,this.onLevelLoaded,this),t.off(H.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(H.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.off(H.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(t,r){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(t,r){const o=r.frag;if(!this.ignoreFragment(o)){if(!o.bitrateTest){var l;this.fragCurrent=o,this.partCurrent=(l=r.part)!=null?l:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(t,r){this.clearTimer()}onError(t,r){if(!r.fatal)switch(r.details){case we.BUFFER_ADD_CODEC_ERROR:case we.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case we.FRAG_LOAD_TIMEOUT:{const o=r.frag,{fragCurrent:l,partCurrent:c}=this;if(o&&l&&o.sn===l.sn&&o.level===l.level){const h=performance.now(),d=c?c.stats:o.stats,m=h-d.loading.start,v=d.loading.first?d.loading.first-d.loading.start:-1;if(d.loaded&&v>-1){const T=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(m-Math.min(T,v),d.loaded)}else this.bwEstimator.sampleTTFB(m)}break}}}getTimeToLoadFrag(t,r,o,l){const c=t+o/r,h=l?t+this.lastLevelLoadSec:0;return c+h}onLevelLoaded(t,r){const o=this.hls.config,{loading:l}=r.stats,c=l.end-l.first;Ye(c)&&(this.lastLevelLoadSec=c/1e3),r.details.live?this.bwEstimator.update(o.abrEwmaSlowLive,o.abrEwmaFastLive):this.bwEstimator.update(o.abrEwmaSlowVoD,o.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(r.levelInfo)}onFragLoaded(t,{frag:r,part:o}){const l=o?o.stats:r.stats;if(r.type===lt.MAIN&&this.bwEstimator.sampleTTFB(l.loading.first-l.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),r.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const c=o?o.duration:r.duration,h=this.hls.levels[r.level],d=(h.loaded?h.loaded.bytes:0)+l.loaded,m=(h.loaded?h.loaded.duration:0)+c;h.loaded={bytes:d,duration:m},h.realBitrate=Math.round(8*d/m)}if(r.bitrateTest){const c={stats:l,frag:r,part:o,id:r.type};this.onFragBuffered(H.FRAG_BUFFERED,c),r.bitrateTest=!1}else this.lastLoadedFragLevel=r.level}}onFragBuffered(t,r){const{frag:o,part:l}=r,c=l!=null&&l.stats.loaded?l.stats:o.stats;if(c.aborted||this.ignoreFragment(o))return;const h=c.parsing.end-c.loading.start-Math.min(c.loading.first-c.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(h,c.loaded),c.bwEstimate=this.getBwEstimate(),o.bitrateTest?this.bitrateTestDelay=h/1e3:this.bitrateTestDelay=0}ignoreFragment(t){return t.type!==lt.MAIN||t.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:t,minAutoLevel:r}=this.hls,o=this.getBwEstimate(),l=this.hls.config.maxStarvationDelay,c=this.findBestLevel(o,r,t,0,l,1,1);if(c>-1)return c;const h=this.hls.firstLevel,d=Math.min(Math.max(h,r),t);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${h} clamped to ${d}`),d}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const t=this.forcedAutoLevel,o=this.bwEstimator.canEstimate(),l=this.lastLoadedFragLevel>-1;if(t!==-1&&(!o||!l||this.nextAutoLevelKey===this.getAutoLevelKey()))return t;const c=o&&l?this.getNextABRAutoLevel():this.firstAutoLevel;if(t!==-1){const h=this.hls.levels;if(h.length>Math.max(t,c)&&h[t].loadError<=h[c].loadError)return t}return this._nextAutoLevel=c,this.nextAutoLevelKey=this.getAutoLevelKey(),c}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:t,partCurrent:r,hls:o}=this;if(o.levels.length<=1)return o.loadLevel;const{maxAutoLevel:l,config:c,minAutoLevel:h}=o,d=r?r.duration:t?t.duration:0,m=this.getBwEstimate(),v=this.getStarvationDelay();let x=c.abrBandWidthFactor,T=c.abrBandWidthUpFactor;if(v){const R=this.findBestLevel(m,h,l,v,0,x,T);if(R>=0)return this.rebufferNotice=-1,R}let E=d?Math.min(d,c.maxStarvationDelay):c.maxStarvationDelay;if(!v){const R=this.bitrateTestDelay;R&&(E=(d?Math.min(d,c.maxLoadingDelay):c.maxLoadingDelay)-R,this.info(`bitrate test took ${Math.round(1e3*R)}ms, set first fragment max fetchDuration to ${Math.round(1e3*E)} ms`),x=T=1)}const A=this.findBestLevel(m,h,l,v,E,x,T);if(this.rebufferNotice!==A&&(this.rebufferNotice=A,this.info(`${v?"rebuffering expected":"buffer is empty"}, optimal quality level ${A}`)),A>-1)return A;const k=o.levels[h],_=o.loadLevelObj;return _&&(k==null?void 0:k.bitrate)<_.bitrate?h:o.loadLevel}getStarvationDelay(){const t=this.hls,r=t.media;if(!r)return 1/0;const o=r&&r.playbackRate!==0?Math.abs(r.playbackRate):1,l=t.mainForwardBufferInfo;return(l?l.len:0)/o}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(t,r,o,l,c,h,d){var m;const v=l+c,x=this.lastLoadedFragLevel,T=x===-1?this.hls.firstLevel:x,{fragCurrent:E,partCurrent:A}=this,{levels:k,allAudioTracks:_,loadLevel:R,config:P}=this.hls;if(k.length===1)return 0;const D=k[T],N=!!((m=this.hls.latestLevelDetails)!=null&&m.live),$=R===-1||x===-1;let V,W="SDR",C=(D==null?void 0:D.frameRate)||0;const{audioPreference:K,videoPreference:ee}=P,Q=this.audioTracksByGroup||(this.audioTracksByGroup=Rz(_));let fe=-1;if($){if(this.firstSelection!==-1)return this.firstSelection;const se=this.codecTiers||(this.codecTiers=Rxe(k,Q,r,o)),ue=_xe(se,W,t,K,ee),{codecSet:le,videoRanges:pe,minFramerate:be,minBitrate:Ce,minIndex:ke,preferHDR:Ue}=ue;fe=ke,V=le,W=Ue?pe[pe.length-1]:pe[0],C=be,t=Math.max(t,Ce),this.log(`picked start tier ${Un(ue)}`)}else V=D==null?void 0:D.codecSet,W=D==null?void 0:D.videoRange;const O=A?A.duration:E?E.duration:0,re=this.bwEstimator.getEstimateTTFB()/1e3,ce=[];for(let se=o;se>=r;se--){var Ae;const ue=k[se],le=se>T;if(!ue)continue;if(P.useMediaCapabilities&&!ue.supportedResult&&!ue.supportedPromise){const ut=navigator.mediaCapabilities;typeof(ut==null?void 0:ut.decodingInfo)=="function"&&xxe(ue,Q,W,C,t,K)?(ue.supportedPromise=kz(ue,Q,ut,this.supportedCache),ue.supportedPromise.then(X=>{if(!this.hls)return;ue.supportedResult=X;const Pe=this.hls.levels,Rt=Pe.indexOf(ue);X.error?this.warn(`MediaCapabilities decodingInfo error: "${X.error}" for level ${Rt} ${Un(X)}`):X.supported?X.decodingInfoResults.some(Mt=>Mt.smooth===!1||Mt.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${Rt} not smooth or powerEfficient: ${Un(X)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${Rt} ${Un(X)}`),Rt>-1&&Pe.length>1&&(this.log(`Removing unsupported level ${Rt}`),this.hls.removeLevel(Rt),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(X=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${X}`)})):ue.supportedResult=Iz}if((V&&ue.codecSet!==V||W&&ue.videoRange!==W||le&&C>ue.frameRate||!le&&C>0&&C<ue.frameRate||(Ae=ue.supportedResult)!=null&&(Ae=Ae.decodingInfoResults)!=null&&Ae.some(ut=>ut.smooth===!1))&&(!$||se!==fe)){ce.push(se);continue}const pe=ue.details,be=(A?pe==null?void 0:pe.partTarget:pe==null?void 0:pe.averagetargetduration)||O;let Ce;le?Ce=d*t:Ce=h*t;const ke=O&&l>=O*2&&c===0?ue.averageBitrate:ue.maxBitrate,Ue=this.getTimeToLoadFrag(re,Ce,ke*be,pe===void 0);if(Ce>=ke&&(se===x||ue.loadError===0&&ue.fragmentError===0)&&(Ue<=re||!Ye(Ue)||N&&!this.bitrateTestDelay||Ue<v)){const ut=this.forcedAutoLevel;return se!==R&&(ut===-1||ut!==R)&&(ce.length&&this.trace(`Skipped level(s) ${ce.join(",")} of ${o} max with CODECS and VIDEO-RANGE:"${k[ce[0]].codecs}" ${k[ce[0]].videoRange}; not compatible with "${V}" ${W}`),this.info(`switch candidate:${T}->${se} adjustedbw(${Math.round(Ce)})-bitrate=${Math.round(Ce-ke)} ttfb:${re.toFixed(1)} avgDuration:${be.toFixed(1)} maxFetchDuration:${v.toFixed(1)} fetchDuration:${Ue.toFixed(1)} firstSelection:${$} codecSet:${ue.codecSet} videoRange:${ue.videoRange} hls.loadLevel:${R}`)),$&&(this.firstSelection=se),se}}return-1}set nextAutoLevel(t){const r=this.deriveNextAutoLevel(t);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}deriveNextAutoLevel(t){const{maxAutoLevel:r,minAutoLevel:o}=this.hls;return Math.min(Math.max(t,o),r)}}const Lz={search:function(i,t){let r=0,o=i.length-1,l=null,c=null;for(;r<=o;){l=(r+o)/2|0,c=i[l];const h=t(c);if(h>0)r=l+1;else if(h<0)o=l-1;else return c}return null}};function Mxe(i,t,r){if(t===null||!Array.isArray(i)||!i.length||!Ye(t))return null;const o=i[0].programDateTime;if(t<(o||0))return null;const l=i[i.length-1].endProgramDateTime;if(t>=(l||0))return null;for(let c=0;c<i.length;++c){const h=i[c];if(jxe(t,r,h))return h}return null}function kh(i,t,r=0,o=0,l=.005){let c=null;if(i){c=t[1+i.sn-t[0].sn]||null;const d=i.endDTS-r;d>0&&d<15e-7&&(r+=15e-7),c&&i.level!==c.level&&c.end<=i.end&&(c=t[2+i.sn-t[0].sn]||null)}else r===0&&t[0].start===0&&(c=t[0]);if(c&&((!i||i.level===c.level)&&w7(r,o,c)===0||Oxe(c,i,Math.min(l,o))))return c;const h=Lz.search(t,w7.bind(null,r,o));return h&&(h!==i||!c)?h:c}function Oxe(i,t,r){if(t&&t.start===0&&t.level<i.level&&(t.endPTS||0)>0){const o=t.tagList.reduce((l,c)=>(c[0]==="INF"&&(l+=parseFloat(c[1])),l),r);return i.start<=o}return!1}function w7(i=0,t=0,r){if(r.start<=i&&r.start+r.duration>i)return 0;const o=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-o<=i?1:r.start-o>i&&r.start?-1:0}function jxe(i,t,r){const o=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0))*1e3;return(r.endProgramDateTime||0)-o>i}function Pz(i,t,r){if(i&&i.startCC<=t&&i.endCC>=t){let o=i.fragments;const{fragmentHint:l}=i;l&&(o=o.concat(l));let c;return Lz.search(o,h=>h.cc<t?1:h.cc>t?-1:(c=h,h.end<=r?1:h.start>r?-1:0)),c||null}return null}function Uw(i){switch(i.details){case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_TIMEOUT:case we.LEVEL_LOAD_TIMEOUT:case we.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Dz(i){return i.details.startsWith("key")}function Nz(i){return Dz(i)&&!!i.frag&&!i.frag.decryptdata}function E7(i,t){const r=Uw(t);return i.default[`${r?"timeout":"error"}Retry`]}function zP(i,t){const r=i.backoff==="linear"?1:Math.pow(2,t);return Math.min(r*i.retryDelayMs,i.maxRetryDelayMs)}function b7(i){return _n(_n({},i),{errorRetry:null,timeoutRetry:null})}function Fw(i,t,r,o){if(!i)return!1;const l=o==null?void 0:o.code,c=t<i.maxNumRetry&&(Uxe(l)||!!r);return i.shouldRetry?i.shouldRetry(i,t,r,o,c):c}function Uxe(i){return bL(i)||!!i&&(i<400||i>499)}function bL(i){return i===0&&navigator.onLine===!1}var Li={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},no={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class Fxe extends Vo{constructor(t){super("error-controller",t.logger),this.hls=void 0,this.playlistError=0,this.hls=t,this.registerListeners()}registerListeners(){const t=this.hls;t.on(H.ERROR,this.onError,this),t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const t=this.hls;t&&(t.off(H.ERROR,this.onError,this),t.off(H.ERROR,this.onErrorOut,this),t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(t){}stopLoad(){this.playlistError=0}getVariantLevelIndex(t){return(t==null?void 0:t.type)===lt.MAIN?t.level:this.getVariantIndex()}getVariantIndex(){var t;const r=this.hls,o=r.currentLevel;return(t=r.loadLevelObj)!=null&&t.details||o===-1?r.loadLevel:o}variantHasKey(t,r){if(t){var o;if((o=t.details)!=null&&o.hasKey(r))return!0;const l=t.audioGroups;if(l)return this.hls.allAudioTracks.filter(h=>l.indexOf(h.groupId)>=0).some(h=>{var d;return(d=h.details)==null?void 0:d.hasKey(r)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(t,r){var o;if(r.fatal)return;const l=this.hls,c=r.context;switch(r.details){case we.FRAG_LOAD_ERROR:case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_ERROR:case we.KEY_LOAD_TIMEOUT:r.errorAction=this.getFragRetryOrSwitchAction(r);return;case we.FRAG_PARSING_ERROR:if((o=r.frag)!=null&&o.gap){r.errorAction=Op();return}case we.FRAG_GAP:case we.FRAG_DECRYPT_ERROR:{r.errorAction=this.getFragRetryOrSwitchAction(r),r.errorAction.action=Li.SendAlternateToPenaltyBox;return}case we.LEVEL_EMPTY_ERROR:case we.LEVEL_PARSING_ERROR:{var h;const m=r.parent===lt.MAIN?r.level:l.loadLevel;r.details===we.LEVEL_EMPTY_ERROR&&((h=r.context)!=null&&(h=h.levelDetails)!=null&&h.live)?r.errorAction=this.getPlaylistRetryOrSwitchAction(r,m):(r.levelRetry=!1,r.errorAction=this.getLevelSwitchAction(r,m))}return;case we.LEVEL_LOAD_ERROR:case we.LEVEL_LOAD_TIMEOUT:typeof(c==null?void 0:c.level)=="number"&&(r.errorAction=this.getPlaylistRetryOrSwitchAction(r,c.level));return;case we.AUDIO_TRACK_LOAD_ERROR:case we.AUDIO_TRACK_LOAD_TIMEOUT:case we.SUBTITLE_LOAD_ERROR:case we.SUBTITLE_TRACK_LOAD_TIMEOUT:if(c){const m=l.loadLevelObj;if(m&&(c.type===sn.AUDIO_TRACK&&m.hasAudioGroup(c.groupId)||c.type===sn.SUBTITLE_TRACK&&m.hasSubtitleGroup(c.groupId))){r.errorAction=this.getPlaylistRetryOrSwitchAction(r,l.loadLevel),r.errorAction.action=Li.SendAlternateToPenaltyBox,r.errorAction.flags=no.MoveAllAlternatesMatchingHost;return}}return;case we.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:r.errorAction={action:Li.SendAlternateToPenaltyBox,flags:no.MoveAllAlternatesMatchingHDCP};return;case we.KEY_SYSTEM_SESSION_UPDATE_FAILED:case we.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case we.KEY_SYSTEM_NO_SESSION:r.errorAction={action:Li.SendAlternateToPenaltyBox,flags:no.MoveAllAlternatesMatchingKey};return;case we.BUFFER_ADD_CODEC_ERROR:case we.REMUX_ALLOC_ERROR:case we.BUFFER_APPEND_ERROR:if(!r.errorAction){var d;r.errorAction=this.getLevelSwitchAction(r,(d=r.level)!=null?d:l.loadLevel)}return;case we.INTERNAL_EXCEPTION:case we.BUFFER_APPENDING_ERROR:case we.BUFFER_FULL_ERROR:case we.LEVEL_SWITCH_ERROR:case we.BUFFER_STALLED_ERROR:case we.BUFFER_SEEK_OVER_HOLE:case we.BUFFER_NUDGE_ON_STALL:r.errorAction=Op();return}r.type===pt.KEY_SYSTEM_ERROR&&(r.levelRetry=!1,r.errorAction=Op())}getPlaylistRetryOrSwitchAction(t,r){const o=this.hls,l=E7(o.config.playlistLoadPolicy,t),c=this.playlistError++;if(Fw(l,c,Uw(t),t.response))return{action:Li.RetryRequest,flags:no.None,retryConfig:l,retryCount:c};const d=this.getLevelSwitchAction(t,r);return l&&(d.retryConfig=l,d.retryCount=c),d}getFragRetryOrSwitchAction(t){const r=this.hls,o=this.getVariantLevelIndex(t.frag),l=r.levels[o],{fragLoadPolicy:c,keyLoadPolicy:h}=r.config,d=E7(Dz(t)?h:c,t),m=r.levels.reduce((x,T)=>x+T.fragmentError,0);if(l&&(t.details!==we.FRAG_GAP&&l.fragmentError++,!Nz(t)&&Fw(d,m,Uw(t),t.response)))return{action:Li.RetryRequest,flags:no.None,retryConfig:d,retryCount:m};const v=this.getLevelSwitchAction(t,o);return d&&(v.retryConfig=d,v.retryCount=m),v}getLevelSwitchAction(t,r){const o=this.hls;r==null&&(r=o.loadLevel);const l=this.hls.levels[r];if(l){var c,h;const v=t.details;l.loadError++,v===we.BUFFER_APPEND_ERROR&&l.fragmentError++;let x=-1;const{levels:T,loadLevel:E,minAutoLevel:A,maxAutoLevel:k}=o;!o.autoLevelEnabled&&!o.config.preserveManualLevelOnError&&(o.loadLevel=-1);const _=(c=t.frag)==null?void 0:c.type,P=(_===lt.AUDIO&&v===we.FRAG_PARSING_ERROR||t.sourceBufferName==="audio"&&(v===we.BUFFER_ADD_CODEC_ERROR||v===we.BUFFER_APPEND_ERROR))&&T.some(({audioCodec:W})=>l.audioCodec!==W),N=t.sourceBufferName==="video"&&(v===we.BUFFER_ADD_CODEC_ERROR||v===we.BUFFER_APPEND_ERROR)&&T.some(({codecSet:W,audioCodec:C})=>l.codecSet!==W&&l.audioCodec===C),{type:$,groupId:V}=(h=t.context)!=null?h:{};for(let W=T.length;W--;){const C=(W+E)%T.length;if(C!==E&&C>=A&&C<=k&&T[C].loadError===0){var d,m;const K=T[C];if(v===we.FRAG_GAP&&_===lt.MAIN&&t.frag){const ee=T[C].details;if(ee){const Q=kh(t.frag,ee.fragments,t.frag.start);if(Q!=null&&Q.gap)continue}}else{if($===sn.AUDIO_TRACK&&K.hasAudioGroup(V)||$===sn.SUBTITLE_TRACK&&K.hasSubtitleGroup(V))continue;if(_===lt.AUDIO&&(d=l.audioGroups)!=null&&d.some(ee=>K.hasAudioGroup(ee))||_===lt.SUBTITLE&&(m=l.subtitleGroups)!=null&&m.some(ee=>K.hasSubtitleGroup(ee))||P&&l.audioCodec===K.audioCodec||N&&l.codecSet===K.codecSet||!P&&l.codecSet!==K.codecSet)continue}x=C;break}}if(x>-1&&o.loadLevel!==x)return t.levelRetry=!0,this.playlistError=0,{action:Li.SendAlternateToPenaltyBox,flags:no.None,nextAutoLevel:x}}return{action:Li.SendAlternateToPenaltyBox,flags:no.MoveAllAlternatesMatchingHost}}onErrorOut(t,r){var o;switch((o=r.errorAction)==null?void 0:o.action){case Li.DoNothing:break;case Li.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(r),!r.errorAction.resolved&&r.details!==we.FRAG_GAP?r.fatal=!0:/MediaSource readyState: ended/.test(r.error.message)&&(this.warn(`MediaSource ended after "${r.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(r.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(t){const r=this.hls,o=t.errorAction;if(!o)return;const{flags:l}=o,c=o.nextAutoLevel;switch(l){case no.None:this.switchLevel(t,c);break;case no.MoveAllAlternatesMatchingHDCP:{const m=this.getVariantLevelIndex(t.frag),v=r.levels[m],x=v==null?void 0:v.attrs["HDCP-LEVEL"];if(o.hdcpLevel=x,x==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(x){r.maxHdcpLevel=EL[EL.indexOf(x)-1],o.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${r.maxHdcpLevel}" or lower`);break}}case no.MoveAllAlternatesMatchingKey:{const m=t.decryptdata;if(m){const v=this.hls.levels,x=v.length;for(let E=x;E--;)if(this.variantHasKey(v[E],m)){var h,d;this.log(`Banned key found in level ${E} (${v[E].bitrate}bps) or audio group "${(h=v[E].audioGroups)==null?void 0:h.join(",")}" (${(d=t.frag)==null?void 0:d.type} fragment) ${Pi(m.keyId||[])}`),v[E].fragmentError++,v[E].loadError++,this.log(`Removing level ${E} with key error (${t.error})`),this.hls.removeLevel(E)}const T=t.frag;if(this.hls.levels.length<x)o.resolved=!0;else if(T&&T.type!==lt.MAIN){const E=T.decryptdata;E&&!m.matches(E)&&(o.resolved=!0)}}break}}o.resolved||this.switchLevel(t,c)}switchLevel(t,r){if(r!==void 0&&t.errorAction&&(this.warn(`switching to level ${r} after ${t.details}`),this.hls.nextAutoLevel=r,t.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,t.details===we.BUFFER_ADD_CODEC_ERROR&&t.mimeType&&t.sourceBufferName!=="audiovideo")){const o=wL(t.mimeType),l=this.hls.levels;for(let c=l.length;c--;)l[c][`${t.sourceBufferName}Codec`]===o&&(this.log(`Removing level ${c} for ${t.details} ("${o}" not supported)`),this.hls.removeLevel(c))}}}function Op(i){const t={action:Li.DoNothing,flags:no.None};return i&&(t.resolved=!0),t}var ii={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Bxe{constructor(t){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=t,this._registerListeners()}_registerListeners(){const{hls:t}=this;t&&(t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.BUFFER_APPENDED,this.onBufferAppended,this),t.on(H.FRAG_BUFFERED,this.onFragBuffered,this),t.on(H.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:t}=this;t&&(t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.BUFFER_APPENDED,this.onBufferAppended,this),t.off(H.FRAG_BUFFERED,this.onFragBuffered,this),t.off(H.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(t,r){const o=this.activePartLists[r];if(o)for(let l=o.length;l--;){const c=o[l];if(!c)break;if(c.start<=t&&t<=c.end&&c.loaded)return c}return this.getBufferedFrag(t,r)}getBufferedFrag(t,r){return this.getFragAtPos(t,r,!0)}getFragAtPos(t,r,o){const{fragments:l}=this,c=Object.keys(l);for(let h=c.length;h--;){const d=l[c[h]];if((d==null?void 0:d.body.type)===r&&(!o||d.buffered)){const m=d.body;if(m.start<=t&&t<=m.end)return m}}return null}detectEvictedFragments(t,r,o,l,c){this.timeRanges&&(this.timeRanges[t]=r);const h=(l==null?void 0:l.fragment.sn)||-1;Object.keys(this.fragments).forEach(d=>{const m=this.fragments[d];if(!m||h>=m.body.sn)return;if(!m.buffered&&(!m.loaded||c)){m.body.type===o&&this.removeFragment(m.body);return}const v=m.range[t];if(v){if(v.time.length===0){this.removeFragment(m.body);return}v.time.some(x=>{const T=!this.isTimeBuffered(x.startPTS,x.endPTS,r);return T&&this.removeFragment(m.body),T})}})}detectPartialFragments(t){const r=this.timeRanges;if(!r||t.frag.sn==="initSegment")return;const o=t.frag,l=np(o),c=this.fragments[l];if(!c||c.buffered&&o.gap)return;const h=!o.relurl;Object.keys(r).forEach(d=>{const m=o.elementaryStreams[d];if(!m)return;const v=r[d],x=h||m.partial===!0;c.range[d]=this.getBufferedTimes(o,t.part,x,v)}),c.loaded=null,Object.keys(c.range).length?(this.bufferedEnd(c,o),uS(c)||this.removeParts(o.sn-1,o.type)):this.removeFragment(c.body)}bufferedEnd(t,r){t.buffered=!0,(t.body.endList=r.endList||t.body.endList)&&(this.endListFragments[t.body.type]=t)}removeParts(t,r){const o=this.activePartLists[r];o&&(this.activePartLists[r]=A7(o,l=>l.fragment.sn>=t))}fragBuffered(t,r){const o=np(t);let l=this.fragments[o];!l&&r&&(l=this.fragments[o]={body:t,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},t.gap&&(this.hasGaps=!0)),l&&(l.loaded=null,this.bufferedEnd(l,t))}getBufferedTimes(t,r,o,l){const c={time:[],partial:o},h=t.start,d=t.end,m=t.minEndPTS||d,v=t.maxStartPTS||h;for(let x=0;x<l.length;x++){const T=l.start(x)-this.bufferPadding,E=l.end(x)+this.bufferPadding;if(v>=T&&m<=E){c.time.push({startPTS:Math.max(h,l.start(x)),endPTS:Math.min(d,l.end(x))});break}else if(h<E&&d>T){const A=Math.max(h,l.start(x)),k=Math.min(d,l.end(x));k>A&&(c.partial=!0,c.time.push({startPTS:A,endPTS:k}))}else if(d<=T)break}return c}getPartialFragment(t){let r=null,o,l,c,h=0;const{bufferPadding:d,fragments:m}=this;return Object.keys(m).forEach(v=>{const x=m[v];x&&uS(x)&&(l=x.body.start-d,c=x.body.end+d,t>=l&&t<=c&&(o=Math.min(t-l,c-t),h<=o&&(r=x.body,h=o)))}),r}isEndListAppended(t){const r=this.endListFragments[t];return r!==void 0&&(r.buffered||uS(r))}getState(t){const r=np(t),o=this.fragments[r];return o?o.buffered?uS(o)?ii.PARTIAL:ii.OK:ii.APPENDING:ii.NOT_LOADED}isTimeBuffered(t,r,o){let l,c;for(let h=0;h<o.length;h++){if(l=o.start(h)-this.bufferPadding,c=o.end(h)+this.bufferPadding,t>=l&&r<=c)return!0;if(r<=l)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(t,r){if(r.frag.sn==="initSegment"||r.frag.bitrateTest)return;const o=r.frag,l=r.part?null:r,c=np(o);this.fragments[c]={body:o,appendedPTS:null,loaded:l,buffered:!1,range:Object.create(null)}}onBufferAppended(t,r){const{frag:o,part:l,timeRanges:c,type:h}=r;if(o.sn==="initSegment")return;const d=o.type;if(l){let v=this.activePartLists[d];v||(this.activePartLists[d]=v=[]),v.push(l)}this.timeRanges=c;const m=c[h];this.detectEvictedFragments(h,m,d,l)}onFragBuffered(t,r){this.detectPartialFragments(r)}hasFragment(t){const r=np(t);return!!this.fragments[r]}hasFragments(t){const{fragments:r}=this,o=Object.keys(r);if(!t)return o.length>0;for(let l=o.length;l--;){const c=r[o[l]];if((c==null?void 0:c.body.type)===t)return!0}return!1}hasParts(t){var r;return!!((r=this.activePartLists[t])!=null&&r.length)}removeFragmentsInRange(t,r,o,l,c){l&&!this.hasGaps||Object.keys(this.fragments).forEach(h=>{const d=this.fragments[h];if(!d)return;const m=d.body;m.type!==o||l&&!m.gap||m.start<r&&m.end>t&&(d.buffered||c)&&this.removeFragment(m)})}removeFragment(t){const r=np(t);t.clearElementaryStreamInfo();const o=this.activePartLists[t.type];if(o){const l=t.sn;this.activePartLists[t.type]=A7(o,c=>c.fragment.sn!==l)}delete this.fragments[r],t.endList&&delete this.endListFragments[t.type]}removeAllFragments(){var t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=(t=this.hls)==null||(t=t.latestLevelDetails)==null?void 0:t.partList;r&&r.forEach(o=>o.clearElementaryStreamInfo())}}function uS(i){var t,r,o;return i.buffered&&!!(i.body.gap||(t=i.range.video)!=null&&t.partial||(r=i.range.audio)!=null&&r.partial||(o=i.range.audiovideo)!=null&&o.partial)}function np(i){return`${i.type}_${i.level}_${i.sn}`}function A7(i,t){return i.filter(r=>{const o=t(r);return o||r.clearElementaryStreamInfo(),o})}var Vc={cbc:0,ctr:1};class $xe{constructor(t,r,o){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=t,this.aesIV=r,this.aesMode=o}decrypt(t,r){switch(this.aesMode){case Vc.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},r,t);case Vc.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},r,t);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function Vxe(i){const t=i.byteLength,r=t&&new DataView(i.buffer).getUint8(t-1);return r?i.slice(0,t-r):i}class Gxe{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(t){const r=new DataView(t),o=new Uint32Array(4);for(let l=0;l<4;l++)o[l]=r.getUint32(l*4);return o}initTable(){const t=this.sBox,r=this.invSBox,o=this.subMix,l=o[0],c=o[1],h=o[2],d=o[3],m=this.invSubMix,v=m[0],x=m[1],T=m[2],E=m[3],A=new Uint32Array(256);let k=0,_=0,R=0;for(R=0;R<256;R++)R<128?A[R]=R<<1:A[R]=R<<1^283;for(R=0;R<256;R++){let P=_^_<<1^_<<2^_<<3^_<<4;P=P>>>8^P&255^99,t[k]=P,r[P]=k;const D=A[k],N=A[D],$=A[N];let V=A[P]*257^P*16843008;l[k]=V<<24|V>>>8,c[k]=V<<16|V>>>16,h[k]=V<<8|V>>>24,d[k]=V,V=$*16843009^N*65537^D*257^k*16843008,v[P]=V<<24|V>>>8,x[P]=V<<16|V>>>16,T[P]=V<<8|V>>>24,E[P]=V,k?(k=D^A[A[A[$^D]]],_^=A[A[_]]):k=_=1}}expandKey(t){const r=this.uint8ArrayToUint32Array_(t);let o=!0,l=0;for(;l<r.length&&o;)o=r[l]===this.key[l],l++;if(o)return;this.key=r;const c=this.keySize=r.length;if(c!==4&&c!==6&&c!==8)throw new Error("Invalid aes key size="+c);const h=this.ksRows=(c+6+1)*4;let d,m;const v=this.keySchedule=new Uint32Array(h),x=this.invKeySchedule=new Uint32Array(h),T=this.sBox,E=this.rcon,A=this.invSubMix,k=A[0],_=A[1],R=A[2],P=A[3];let D,N;for(d=0;d<h;d++){if(d<c){D=v[d]=r[d];continue}N=D,d%c===0?(N=N<<8|N>>>24,N=T[N>>>24]<<24|T[N>>>16&255]<<16|T[N>>>8&255]<<8|T[N&255],N^=E[d/c|0]<<24):c>6&&d%c===4&&(N=T[N>>>24]<<24|T[N>>>16&255]<<16|T[N>>>8&255]<<8|T[N&255]),v[d]=D=(v[d-c]^N)>>>0}for(m=0;m<h;m++)d=h-m,m&3?N=v[d]:N=v[d-4],m<4||d<=4?x[m]=N:x[m]=k[T[N>>>24]]^_[T[N>>>16&255]]^R[T[N>>>8&255]]^P[T[N&255]],x[m]=x[m]>>>0}networkToHostOrderSwap(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24}decrypt(t,r,o){const l=this.keySize+6,c=this.invKeySchedule,h=this.invSBox,d=this.invSubMix,m=d[0],v=d[1],x=d[2],T=d[3],E=this.uint8ArrayToUint32Array_(o);let A=E[0],k=E[1],_=E[2],R=E[3];const P=new Int32Array(t),D=new Int32Array(P.length);let N,$,V,W,C,K,ee,Q,fe,O,re,ce,Ae,se;const ue=this.networkToHostOrderSwap;for(;r<P.length;){for(fe=ue(P[r]),O=ue(P[r+1]),re=ue(P[r+2]),ce=ue(P[r+3]),C=fe^c[0],K=ce^c[1],ee=re^c[2],Q=O^c[3],Ae=4,se=1;se<l;se++)N=m[C>>>24]^v[K>>16&255]^x[ee>>8&255]^T[Q&255]^c[Ae],$=m[K>>>24]^v[ee>>16&255]^x[Q>>8&255]^T[C&255]^c[Ae+1],V=m[ee>>>24]^v[Q>>16&255]^x[C>>8&255]^T[K&255]^c[Ae+2],W=m[Q>>>24]^v[C>>16&255]^x[K>>8&255]^T[ee&255]^c[Ae+3],C=N,K=$,ee=V,Q=W,Ae=Ae+4;N=h[C>>>24]<<24^h[K>>16&255]<<16^h[ee>>8&255]<<8^h[Q&255]^c[Ae],$=h[K>>>24]<<24^h[ee>>16&255]<<16^h[Q>>8&255]<<8^h[C&255]^c[Ae+1],V=h[ee>>>24]<<24^h[Q>>16&255]<<16^h[C>>8&255]<<8^h[K&255]^c[Ae+2],W=h[Q>>>24]<<24^h[C>>16&255]<<16^h[K>>8&255]<<8^h[ee&255]^c[Ae+3],D[r]=ue(N^A),D[r+1]=ue(W^k),D[r+2]=ue(V^_),D[r+3]=ue($^R),A=fe,k=O,_=re,R=ce,r=r+4}return D.buffer}}class Hxe{constructor(t,r,o){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=t,this.key=r,this.aesMode=o}expandKey(){const t=qxe(this.aesMode);return this.subtle.importKey("raw",this.key,{name:t},!1,["encrypt","decrypt"])}}function qxe(i){switch(i){case Vc.cbc:return"AES-CBC";case Vc.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${i}`)}}const Kxe=16;class WP{constructor(t,{removePKCS7Padding:r=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=t.enableSoftwareAES,this.removePKCS7Padding=r,r)try{const o=self.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:t,remainderData:r}=this;if(!t||r)return this.reset(),null;const o=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?Vxe(o):o}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(t,r,o,l){return this.useSoftware?new Promise((c,h)=>{const d=ArrayBuffer.isView(t)?t:new Uint8Array(t);this.softwareDecrypt(d,r,o,l);const m=this.flush();m?c(m.buffer):h(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(t),r,o,l)}softwareDecrypt(t,r,o,l){const{currentIV:c,currentResult:h,remainderData:d}=this;if(l!==Vc.cbc||r.byteLength!==16)return Rn.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),d&&(t=Bo(d,t),this.remainderData=null);const m=this.getValidChunk(t);if(!m.length)return null;c&&(o=c);let v=this.softwareDecrypter;v||(v=this.softwareDecrypter=new Gxe),v.expandKey(r);const x=h;return this.currentResult=v.decrypt(m.buffer,0,o),this.currentIV=m.slice(-16).buffer,x||null}webCryptoDecrypt(t,r,o,l){if(this.key!==r||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(t,r,o,l));this.key=r,this.fastAesKey=new Hxe(this.subtle,r,l)}return this.fastAesKey.expandKey().then(c=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new $xe(this.subtle,new Uint8Array(o),l).decrypt(t.buffer,c)):Promise.reject(new Error("web crypto not initialized"))).catch(c=>(Rn.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${c.name}: ${c.message}`),this.onWebCryptoError(t,r,o,l)))}onWebCryptoError(t,r,o,l){const c=this.enableSoftwareAES;if(c){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(t,r,o,l);const h=this.flush();if(h)return h.buffer}throw new Error("WebCrypto"+(c?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(t){let r=t;const o=t.length-t.length%Kxe;return o!==t.length&&(r=t.slice(0,o),this.remainderData=t.slice(o)),r}logOnce(t){this.logEnabled&&(Rn.log(`[decrypter]: ${t}`),this.logEnabled=!1)}}const I7=Math.pow(2,17);class zxe{constructor(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(t,r){const o=t.url;if(!o)return Promise.reject(new Ql({type:pt.NETWORK_ERROR,details:we.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error(`Fragment does not have a ${o?"part list":"url"}`),networkDetails:null}));this.abort();const l=this.config,c=l.fLoader,h=l.loader;return new Promise((d,m)=>{if(this.loader&&this.loader.destroy(),t.gap)if(t.tagList.some(k=>k[0]==="GAP")){m(k7(t));return}else t.gap=!1;const v=this.loader=c?new c(l):new h(l),x=C7(t);t.loader=v;const T=b7(l.fragLoadPolicy.default),E={loadPolicy:T,timeout:T.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:t.sn==="initSegment"?1/0:I7};t.stats=v.stats;const A={onSuccess:(k,_,R,P)=>{this.resetLoader(t,v);let D=k.data;R.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(D.slice(0,16)),D=D.slice(16)),d({frag:t,part:null,payload:D,networkDetails:P})},onError:(k,_,R,P)=>{this.resetLoader(t,v),m(new Ql({type:pt.NETWORK_ERROR,details:we.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:_n({url:o,data:void 0},k),error:new Error(`HTTP Error ${k.code} ${k.text}`),networkDetails:R,stats:P}))},onAbort:(k,_,R)=>{this.resetLoader(t,v),m(new Ql({type:pt.NETWORK_ERROR,details:we.INTERNAL_ABORTED,fatal:!1,frag:t,error:new Error("Aborted"),networkDetails:R,stats:k}))},onTimeout:(k,_,R)=>{this.resetLoader(t,v),m(new Ql({type:pt.NETWORK_ERROR,details:we.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,error:new Error(`Timeout after ${E.timeout}ms`),networkDetails:R,stats:k}))}};r&&(A.onProgress=(k,_,R,P)=>r({frag:t,part:null,payload:R,networkDetails:P})),v.load(x,E,A)})}loadPart(t,r,o){this.abort();const l=this.config,c=l.fLoader,h=l.loader;return new Promise((d,m)=>{if(this.loader&&this.loader.destroy(),t.gap||r.gap){m(k7(t,r));return}const v=this.loader=c?new c(l):new h(l),x=C7(t,r);t.loader=v;const T=b7(l.fragLoadPolicy.default),E={loadPolicy:T,timeout:T.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:I7};r.stats=v.stats,v.load(x,E,{onSuccess:(A,k,_,R)=>{this.resetLoader(t,v),this.updateStatsFromPart(t,r);const P={frag:t,part:r,payload:A.data,networkDetails:R};o(P),d(P)},onError:(A,k,_,R)=>{this.resetLoader(t,v),m(new Ql({type:pt.NETWORK_ERROR,details:we.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:r,response:_n({url:x.url,data:void 0},A),error:new Error(`HTTP Error ${A.code} ${A.text}`),networkDetails:_,stats:R}))},onAbort:(A,k,_)=>{t.stats.aborted=r.stats.aborted,this.resetLoader(t,v),m(new Ql({type:pt.NETWORK_ERROR,details:we.INTERNAL_ABORTED,fatal:!1,frag:t,part:r,error:new Error("Aborted"),networkDetails:_,stats:A}))},onTimeout:(A,k,_)=>{this.resetLoader(t,v),m(new Ql({type:pt.NETWORK_ERROR,details:we.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:r,error:new Error(`Timeout after ${E.timeout}ms`),networkDetails:_,stats:A}))}})})}updateStatsFromPart(t,r){const o=t.stats,l=r.stats,c=l.total;if(o.loaded+=l.loaded,c){const m=Math.round(t.duration/r.duration),v=Math.min(Math.round(o.loaded/c),m),T=(m-v)*Math.round(o.loaded/v);o.total=o.loaded+T}else o.total=Math.max(o.loaded,o.total);const h=o.loading,d=l.loading;h.start?h.first+=d.first-d.start:(h.start=d.start,h.first=d.first),h.end=d.end}resetLoader(t,r){t.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()}}function C7(i,t=null){const r=t||i,o={frag:i,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},l=r.byteRangeStartOffset,c=r.byteRangeEndOffset;if(Ye(l)&&Ye(c)){var h;let d=l,m=c;if(i.sn==="initSegment"&&Wxe((h=i.decryptdata)==null?void 0:h.method)){const v=c-l;v%16&&(m=c+(16-v%16)),l!==0&&(o.resetIV=!0,d=l-16)}o.rangeStart=d,o.rangeEnd=m}return o}function k7(i,t){const r=new Error(`GAP ${i.gap?"tag":"attribute"} found`),o={type:pt.MEDIA_ERROR,details:we.FRAG_GAP,fatal:!1,frag:i,error:r,networkDetails:null};return t&&(o.part=t),(t||i).stats.aborted=!0,new Ql(o)}function Wxe(i){return i==="AES-128"||i==="AES-256"}class Ql extends Error{constructor(t){super(t.error.message),this.data=void 0,this.data=t}}class Mz extends Vo{constructor(t,r){super(t,r),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(t){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,t),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class YP{constructor(t,r,o,l=0,c=-1,h=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=cS(),this.buffering={audio:cS(),video:cS(),audiovideo:cS()},this.level=t,this.sn=r,this.id=o,this.size=l,this.part=c,this.partial=h}}function cS(){return{start:0,executeStart:0,executeEnd:0,end:0}}const _7={length:0,start:()=>0,end:()=>0};class qt{static isBuffered(t,r){if(t){const o=qt.getBuffered(t);for(let l=o.length;l--;)if(r>=o.start(l)&&r<=o.end(l))return!0}return!1}static bufferedRanges(t){if(t){const r=qt.getBuffered(t);return qt.timeRangesToArray(r)}return[]}static timeRangesToArray(t){const r=[];for(let o=0;o<t.length;o++)r.push({start:t.start(o),end:t.end(o)});return r}static bufferInfo(t,r,o){if(t){const l=qt.bufferedRanges(t);if(l.length)return qt.bufferedInfo(l,r,o)}return{len:0,start:r,end:r,bufferedIndex:-1}}static bufferedInfo(t,r,o){r=Math.max(0,r),t.length>1&&t.sort((x,T)=>x.start-T.start||T.end-x.end);let l=-1,c=[];if(o)for(let x=0;x<t.length;x++){r>=t[x].start&&r<=t[x].end&&(l=x);const T=c.length;if(T){const E=c[T-1].end;t[x].start-E<o?t[x].end>E&&(c[T-1].end=t[x].end):c.push(t[x])}else c.push(t[x])}else c=t;let h=0,d,m=r,v=r;for(let x=0;x<c.length;x++){const T=c[x].start,E=c[x].end;if(l===-1&&r>=T&&r<=E&&(l=x),r+o>=T&&r<E)m=T,v=E,h=v-r;else if(r+o<T){d=T;break}}return{len:h,start:m||0,end:v||0,nextStart:d,buffered:t,bufferedIndex:l}}static getBuffered(t){try{return t.buffered||_7}catch(r){return Rn.log("failed to get media.buffered",r),_7}}}const Oz=/\{\$([a-zA-Z0-9-_]+)\}/g;function R7(i){return Oz.test(i)}function AL(i,t){if(i.variableList!==null||i.hasVariableRefs){const r=i.variableList;return t.replace(Oz,o=>{const l=o.substring(2,o.length-1),c=r==null?void 0:r[l];return c===void 0?(i.playlistParsingError||(i.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${l}"`)),o):c})}return t}function L7(i,t,r){let o=i.variableList;o||(i.variableList=o={});let l,c;if("QUERYPARAM"in t){l=t.QUERYPARAM;try{const h=new self.URL(r).searchParams;if(h.has(l))c=h.get(l);else throw new Error(`"${l}" does not match any query parameter in URI: "${r}"`)}catch(h){i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${h.message}`))}}else l=t.NAME,c=t.VALUE;l in o?i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${l}"`)):o[l]=c||""}function Yxe(i,t,r){const o=t.IMPORT;if(r&&o in r){let l=i.variableList;l||(i.variableList=l={}),l[o]=r[o]}else i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${o}"`))}const Xxe=/^(\d+)x(\d+)$/,P7=/(.+?)=(".*?"|.*?)(?:,|$)/g;class ur{constructor(t,r){typeof t=="string"&&(t=ur.parseAttrList(t,r)),Nn(this,t)}get clientAttrs(){return Object.keys(this).filter(t=>t.substring(0,2)==="X-")}decimalInteger(t){const r=parseInt(this[t],10);return r>Number.MAX_SAFE_INTEGER?1/0:r}hexadecimalInteger(t){if(this[t]){let r=(this[t]||"0x").slice(2);r=(r.length&1?"0":"")+r;const o=new Uint8Array(r.length/2);for(let l=0;l<r.length/2;l++)o[l]=parseInt(r.slice(l*2,l*2+2),16);return o}return null}hexadecimalIntegerAsNumber(t){const r=parseInt(this[t],16);return r>Number.MAX_SAFE_INTEGER?1/0:r}decimalFloatingPoint(t){return parseFloat(this[t])}optionalFloat(t,r){const o=this[t];return o?parseFloat(o):r}enumeratedString(t){return this[t]}enumeratedStringList(t,r){const o=this[t];return(o?o.split(/[ ,]+/):[]).reduce((l,c)=>(l[c.toLowerCase()]=!0,l),r)}bool(t){return this[t]==="YES"}decimalResolution(t){const r=Xxe.exec(this[t]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}}static parseAttrList(t,r){let o;const l={},c='"';for(P7.lastIndex=0;(o=P7.exec(t))!==null;){const h=o[1].trim();let d=o[2];const m=d.indexOf(c)===0&&d.lastIndexOf(c)===d.length-1;let v=!1;if(m)d=d.slice(1,-1);else switch(h){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":v=!0}if(r&&(m||v))d=AL(r,d);else if(!v&&!m)switch(h){case"CLOSED-CAPTIONS":if(d==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Rn.warn(`${t}: attribute ${h} is missing quotes`)}l[h]=d}return l}}const Qxe="com.apple.hls.interstitial";function Jxe(i){return i!=="ID"&&i!=="CLASS"&&i!=="CUE"&&i!=="START-DATE"&&i!=="DURATION"&&i!=="END-DATE"&&i!=="END-ON-NEXT"}function Zxe(i){return i==="SCTE35-OUT"||i==="SCTE35-IN"||i==="SCTE35-CMD"}class jz{constructor(t,r,o=0){var l;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(r==null?void 0:r.tagAnchor)||null,this.tagOrder=(l=r==null?void 0:r.tagOrder)!=null?l:o,r){const c=r.attr;for(const h in c)if(Object.prototype.hasOwnProperty.call(t,h)&&t[h]!==c[h]){Rn.warn(`DATERANGE tag attribute: "${h}" does not match for tags with ID: "${t.ID}"`),this._badValueForSameId=h;break}t=Nn(new ur({}),c,t)}if(this.attr=t,r?(this._startDate=r._startDate,this._cue=r._cue,this._endDate=r._endDate,this._dateAtEnd=r._dateAtEnd):this._startDate=new Date(t["START-DATE"]),"END-DATE"in this.attr){const c=(r==null?void 0:r.endDate)||new Date(this.attr["END-DATE"]);Ye(c.getTime())&&(this._endDate=c)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const t=this._cue;return t===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):t}get startTime(){const{tagAnchor:t}=this;return t===null||t.programDateTime===null?(Rn.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${t}`),NaN):t.start+(this.startDate.getTime()-t.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const t=this._endDate||this._dateAtEnd;if(t)return t;const r=this.duration;return r!==null?this._dateAtEnd=new Date(this._startDate.getTime()+r*1e3):null}get duration(){if("DURATION"in this.attr){const t=this.attr.decimalFloatingPoint("DURATION");if(Ye(t))return t}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Qxe}get isValid(){return!!this.id&&!this._badValueForSameId&&Ye(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const eTe=10;class tTe{constructor(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=t}reloaded(t){if(!t){this.advanced=!0,this.updated=!0;return}const r=this.lastPartSn-t.lastPartSn,o=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!o||!!r||!this.live,this.advanced=this.endSN>t.endSN||r>0||r===0&&o>0,this.updated||this.advanced?this.misses=Math.floor(t.misses*.6):this.misses=t.misses+1}hasKey(t){return this.encryptedFragments.some(r=>{let o=r.decryptdata;return o||(r.setKeyFormat(t.keyFormat),o=r.decryptdata),!!o&&t.matches(o)})}get hasProgramDateTime(){return this.fragments.length?Ye(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||eTe}get drift(){const t=this.driftEndTime-this.driftStartTime;return t>0?(this.driftEnd-this.driftStart)*1e3/t:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const t=this.partList;if(t){const r=this.lastPartIndex;if(r!==-1){for(let o=t.length;o--;)if(t[o].index>r)return t[o].index;return r}}return 0}get lastPartSn(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const t=this.partEnd-this.fragmentStart;return this.age>Math.max(t,this.totalduration)+this.levelTargetDuration}return!1}}function Bw(i,t){return i.length===t.length?!i.some((r,o)=>r!==t[o]):!1}function D7(i,t){return!i&&!t?!0:!i||!t?!1:Bw(i,t)}function jp(i){return i==="AES-128"||i==="AES-256"||i==="AES-256-CTR"}function XP(i){switch(i){case"AES-128":case"AES-256":return Vc.cbc;case"AES-256-CTR":return Vc.ctr;default:throw new Error(`invalid full segment method ${i}`)}}function QP(i){return Uint8Array.from(atob(i),t=>t.charCodeAt(0))}function IL(i){return Uint8Array.from(unescape(encodeURIComponent(i)),t=>t.charCodeAt(0))}function nTe(i){const t=IL(i).subarray(0,16),r=new Uint8Array(16);return r.set(t,16-t.length),r}function Uz(i){const t=function(o,l,c){const h=o[l];o[l]=o[c],o[c]=h};t(i,0,3),t(i,1,2),t(i,4,5),t(i,6,7)}function Fz(i){const t=i.split(":");let r=null;if(t[0]==="data"&&t.length===2){const o=t[1].split(";"),l=o[o.length-1].split(",");if(l.length===2){const c=l[0]==="base64",h=l[1];c?(o.splice(-1,1),r=QP(h)):r=nTe(h)}}return r}const $w=typeof self<"u"?self:void 0;var fr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Di={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function VS(i){switch(i){case Di.FAIRPLAY:return fr.FAIRPLAY;case Di.PLAYREADY:return fr.PLAYREADY;case Di.WIDEVINE:return fr.WIDEVINE;case Di.CLEARKEY:return fr.CLEARKEY}}function f_(i){switch(i){case fr.FAIRPLAY:return Di.FAIRPLAY;case fr.PLAYREADY:return Di.PLAYREADY;case fr.WIDEVINE:return Di.WIDEVINE;case fr.CLEARKEY:return Di.CLEARKEY}}function F0(i){const{drmSystems:t,widevineLicenseUrl:r}=i,o=t?[fr.FAIRPLAY,fr.WIDEVINE,fr.PLAYREADY,fr.CLEARKEY].filter(l=>!!t[l]):[];return!o[fr.WIDEVINE]&&r&&o.push(fr.WIDEVINE),o}const Bz=function(i){return $w!=null&&(i=$w.navigator)!=null&&i.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function rTe(i,t,r,o){let l;switch(i){case fr.FAIRPLAY:l=["cenc","sinf"];break;case fr.WIDEVINE:case fr.PLAYREADY:l=["cenc"];break;case fr.CLEARKEY:l=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${i}`)}return iTe(l,t,r,o)}function iTe(i,t,r,o){return[{initDataTypes:i,persistentState:o.persistentState||"optional",distinctiveIdentifier:o.distinctiveIdentifier||"optional",sessionTypes:o.sessionTypes||[o.sessionType||"temporary"],audioCapabilities:t.map(c=>({contentType:`audio/mp4; codecs=${c}`,robustness:o.audioRobustness||"",encryptionScheme:o.audioEncryptionScheme||null})),videoCapabilities:r.map(c=>({contentType:`video/mp4; codecs=${c}`,robustness:o.videoRobustness||"",encryptionScheme:o.videoEncryptionScheme||null}))}]}function sTe(i){var t;return!!i&&(i.sessionType==="persistent-license"||!!((t=i.sessionTypes)!=null&&t.some(r=>r==="persistent-license")))}function $z(i){const t=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),r=String.fromCharCode.apply(null,Array.from(t)),o=r.substring(r.indexOf("<"),r.length),h=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("KID")[0];if(h){const d=h.childNodes[0]?h.childNodes[0].nodeValue:h.getAttribute("VALUE");if(d){const m=QP(d).subarray(0,16);return Uz(m),m}}return null}let rp={};class Mc{static clearKeyUriToKeyIdMap(){rp={}}static setKeyIdForUri(t,r){rp[t]=r}static addKeyIdForUri(t){const r=Object.keys(rp).length%Number.MAX_SAFE_INTEGER,o=new Uint8Array(16);return new DataView(o.buffer,12,4).setUint32(0,r),rp[t]=o,o}constructor(t,r,o,l=[1],c=null,h){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=r,this.keyFormat=o,this.keyFormatVersions=l,this.iv=c,this.encrypted=t?t!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!jp(t),h!=null&&h.startsWith("0x")&&(this.keyId=new Uint8Array(mz(h)))}matches(t){return t.uri===this.uri&&t.method===this.method&&t.encrypted===this.encrypted&&t.keyFormat===this.keyFormat&&Bw(t.keyFormatVersions,this.keyFormatVersions)&&D7(t.iv,this.iv)&&D7(t.keyId,this.keyId)}isSupported(){if(this.method){if(jp(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Di.FAIRPLAY:case Di.WIDEVINE:case Di.PLAYREADY:case Di.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(t,r){if(!this.encrypted||!this.uri)return null;if(jp(this.method)){let c=this.iv;return c||(typeof t!="number"&&(Rn.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),t=0),c=aTe(t)),new Mc(this.method,this.uri,"identity",this.keyFormatVersions,c)}if(this.keyId){const c=rp[this.uri];if(c&&!Bw(this.keyId,c)&&Mc.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const o=Fz(this.uri);if(o)switch(this.keyFormat){case Di.WIDEVINE:if(this.pssh=o,!this.keyId){const c=cxe(o.buffer);if(c.length){var l;const h=c[0];this.keyId=(l=h.kids)!=null&&l.length?h.kids[0]:null}}this.keyId||(this.keyId=N7(r));break;case Di.PLAYREADY:{const c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=uxe(c,null,o),this.keyId=$z(o);break}default:{let c=o.subarray(0,16);if(c.length!==16){const h=new Uint8Array(16);h.set(c,16-c.length),c=h}this.keyId=c;break}}if(!this.keyId||this.keyId.byteLength!==16){let c;c=oTe(r),c||(c=N7(r),c||(c=rp[this.uri])),c&&(this.keyId=c,Mc.setKeyIdForUri(this.uri,c))}return this}}function oTe(i){const t=i==null?void 0:i[Di.WIDEVINE];return t?t.keyId:null}function N7(i){const t=i==null?void 0:i[Di.PLAYREADY];if(t){const r=Fz(t.uri);if(r)return $z(r)}return null}function aTe(i){const t=new Uint8Array(16);for(let r=12;r<16;r++)t[r]=i>>8*(15-r)&255;return t}const M7=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,O7=/#EXT-X-MEDIA:(.*)/g,lTe=/^#EXT(?:INF|-X-TARGETDURATION):/m,p_=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),uTe=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Ja{static findGroup(t,r){for(let o=0;o<t.length;o++){const l=t[o];if(l.id===r)return l}}static resolve(t,r){return VP.buildAbsoluteURL(r,t,{alwaysNormalize:!0})}static isMediaPlaylist(t){return lTe.test(t)}static parseMasterPlaylist(t,r){const o=R7(t),l={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:o},c=[];if(M7.lastIndex=0,!t.startsWith("#EXTM3U"))return l.playlistParsingError=new Error("no EXTM3U delimiter"),l;let h;for(;(h=M7.exec(t))!=null;)if(h[1]){var d;const v=new ur(h[1],l),x=AL(l,h[2]),T={attrs:v,bitrate:v.decimalInteger("BANDWIDTH")||v.decimalInteger("AVERAGE-BANDWIDTH"),name:v.NAME,url:Ja.resolve(x,r)},E=v.decimalResolution("RESOLUTION");E&&(T.width=E.width,T.height=E.height),F7(v.CODECS,T);const A=v["SUPPLEMENTAL-CODECS"];A&&(T.supplemental={},F7(A,T.supplemental)),(d=T.unknownCodecs)!=null&&d.length||c.push(T),l.levels.push(T)}else if(h[3]){const v=h[3],x=h[4];switch(v){case"SESSION-DATA":{const T=new ur(x,l),E=T["DATA-ID"];E&&(l.sessionData===null&&(l.sessionData={}),l.sessionData[E]=T);break}case"SESSION-KEY":{const T=j7(x,r,l);T.encrypted&&T.isSupported()?(l.sessionKeys===null&&(l.sessionKeys=[]),l.sessionKeys.push(T)):Rn.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${x}"`);break}case"DEFINE":{{const T=new ur(x,l);L7(l,T,r)}break}case"CONTENT-STEERING":{const T=new ur(x,l);l.contentSteering={uri:Ja.resolve(T["SERVER-URI"],r),pathwayId:T["PATHWAY-ID"]||"."};break}case"START":{l.startTimeOffset=U7(x);break}}}const m=c.length>0&&c.length<l.levels.length;return l.levels=m?c:l.levels,l.levels.length===0&&(l.playlistParsingError=new Error("no levels found in manifest")),l}static parseMasterPlaylistMedia(t,r,o){let l;const c={},h=o.levels,d={AUDIO:h.map(v=>({id:v.attrs.AUDIO,audioCodec:v.audioCodec})),SUBTITLES:h.map(v=>({id:v.attrs.SUBTITLES,textCodec:v.textCodec})),"CLOSED-CAPTIONS":[]};let m=0;for(O7.lastIndex=0;(l=O7.exec(t))!==null;){const v=new ur(l[1],o),x=v.TYPE;if(x){const T=d[x],E=c[x]||[];c[x]=E;const A=v.LANGUAGE,k=v["ASSOC-LANGUAGE"],_=v.CHANNELS,R=v.CHARACTERISTICS,P=v["INSTREAM-ID"],D={attrs:v,bitrate:0,id:m++,groupId:v["GROUP-ID"]||"",name:v.NAME||A||"",type:x,default:v.bool("DEFAULT"),autoselect:v.bool("AUTOSELECT"),forced:v.bool("FORCED"),lang:A,url:v.URI?Ja.resolve(v.URI,r):""};if(k&&(D.assocLang=k),_&&(D.channels=_),R&&(D.characteristics=R),P&&(D.instreamId=P),T!=null&&T.length){const N=Ja.findGroup(T,D.groupId)||T[0];B7(D,N,"audioCodec"),B7(D,N,"textCodec")}E.push(D)}}return c}static parseLevelPlaylist(t,r,o,l,c,h){var d;const m={url:r},v=new tTe(r),x=v.fragments,T=[];let E=null,A=0,k=0,_=0,R=0,P=0,D=null,N=new c_(l,m),$,V,W,C=-1,K=!1,ee=null,Q;if(p_.lastIndex=0,v.m3u8=t,v.hasVariableRefs=R7(t),((d=p_.exec(t))==null?void 0:d[0])!=="#EXTM3U")return v.playlistParsingError=new Error("Missing format identifier #EXTM3U"),v;for(;($=p_.exec(t))!==null;){K&&(K=!1,N=new c_(l,m),N.playlistOffset=_,N.setStart(_),N.sn=A,N.cc=R,P&&(N.bitrate=P),N.level=o,E&&(N.initSegment=E,E.rawProgramDateTime&&(N.rawProgramDateTime=E.rawProgramDateTime,E.rawProgramDateTime=null),ee&&(N.setByteRange(ee),ee=null)));const ce=$[1];if(ce){N.duration=parseFloat(ce);const Ae=(" "+$[2]).slice(1);N.title=Ae||null,N.tagList.push(Ae?["INF",ce,Ae]:["INF",ce])}else if($[3]){if(Ye(N.duration)){N.playlistOffset=_,N.setStart(_),W&&V7(N,W,v),N.sn=A,N.level=o,N.cc=R,x.push(N);const Ae=(" "+$[3]).slice(1);N.relurl=AL(v,Ae),CL(N,D,T),D=N,_+=N.duration,A++,k=0,K=!0}}else{if($=$[0].match(uTe),!$){Rn.warn("No matches on slow regex match for level playlist!");continue}for(V=1;V<$.length&&$[V]===void 0;V++);const Ae=(" "+$[V]).slice(1),se=(" "+$[V+1]).slice(1),ue=$[V+2]?(" "+$[V+2]).slice(1):null;switch(Ae){case"BYTERANGE":D?N.setByteRange(se,D):N.setByteRange(se);break;case"PROGRAM-DATE-TIME":N.rawProgramDateTime=se,N.tagList.push(["PROGRAM-DATE-TIME",se]),C===-1&&(C=x.length);break;case"PLAYLIST-TYPE":v.type&&Kl(v,Ae,$),v.type=se.toUpperCase();break;case"MEDIA-SEQUENCE":v.startSN!==0?Kl(v,Ae,$):x.length>0&&G7(v,Ae,$),A=v.startSN=parseInt(se);break;case"SKIP":{v.skippedSegments&&Kl(v,Ae,$);const le=new ur(se,v),pe=le.decimalInteger("SKIPPED-SEGMENTS");if(Ye(pe)){v.skippedSegments+=pe;for(let Ce=pe;Ce--;)x.push(null);A+=pe}const be=le.enumeratedString("RECENTLY-REMOVED-DATERANGES");be&&(v.recentlyRemovedDateranges=(v.recentlyRemovedDateranges||[]).concat(be.split("	")));break}case"TARGETDURATION":v.targetduration!==0&&Kl(v,Ae,$),v.targetduration=Math.max(parseInt(se),1);break;case"VERSION":v.version!==null&&Kl(v,Ae,$),v.version=parseInt(se);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":v.live||Kl(v,Ae,$),v.live=!1;break;case"#":(se||ue)&&N.tagList.push(ue?[se,ue]:[se]);break;case"DISCONTINUITY":R++,N.tagList.push(["DIS"]);break;case"GAP":N.gap=!0,N.tagList.push([Ae]);break;case"BITRATE":N.tagList.push([Ae,se]),P=parseInt(se)*1e3,Ye(P)?N.bitrate=P:P=0;break;case"DATERANGE":{const le=new ur(se,v),pe=new jz(le,v.dateRanges[le.ID],v.dateRangeTagCount);v.dateRangeTagCount++,pe.isValid||v.skippedSegments?v.dateRanges[pe.id]=pe:Rn.warn(`Ignoring invalid DATERANGE tag: "${se}"`),N.tagList.push(["EXT-X-DATERANGE",se]);break}case"DEFINE":{{const le=new ur(se,v);"IMPORT"in le?Yxe(v,le,h):L7(v,le,r)}break}case"DISCONTINUITY-SEQUENCE":v.startCC!==0?Kl(v,Ae,$):x.length>0&&G7(v,Ae,$),v.startCC=R=parseInt(se);break;case"KEY":{const le=j7(se,r,v);if(le.isSupported()){if(le.method==="NONE"){W=void 0;break}W||(W={});const pe=W[le.keyFormat];pe!=null&&pe.matches(le)||(pe&&(W=Nn({},W)),W[le.keyFormat]=le)}else Rn.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${se}"`);break}case"START":v.startTimeOffset=U7(se);break;case"MAP":{const le=new ur(se,v);if(N.duration){const pe=new c_(l,m);$7(pe,le,o,W),E=pe,N.initSegment=E,E.rawProgramDateTime&&!N.rawProgramDateTime&&(N.rawProgramDateTime=E.rawProgramDateTime)}else{const pe=N.byteRangeEndOffset;if(pe){const be=N.byteRangeStartOffset;ee=`${pe-be}@${be}`}else ee=null;$7(N,le,o,W),E=N,K=!0}E.cc=R;break}case"SERVER-CONTROL":{Q&&Kl(v,Ae,$),Q=new ur(se),v.canBlockReload=Q.bool("CAN-BLOCK-RELOAD"),v.canSkipUntil=Q.optionalFloat("CAN-SKIP-UNTIL",0),v.canSkipDateRanges=v.canSkipUntil>0&&Q.bool("CAN-SKIP-DATERANGES"),v.partHoldBack=Q.optionalFloat("PART-HOLD-BACK",0),v.holdBack=Q.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{v.partTarget&&Kl(v,Ae,$);const le=new ur(se);v.partTarget=le.decimalFloatingPoint("PART-TARGET");break}case"PART":{let le=v.partList;le||(le=v.partList=[]);const pe=k>0?le[le.length-1]:void 0,be=k++,Ce=new ur(se,v),ke=new Y1e(Ce,N,m,be,pe);le.push(ke),N.duration+=ke.duration;break}case"PRELOAD-HINT":{const le=new ur(se,v);v.preloadHint=le;break}case"RENDITION-REPORT":{const le=new ur(se,v);v.renditionReports=v.renditionReports||[],v.renditionReports.push(le);break}default:Rn.warn(`line parsed but not handled: ${$}`);break}}}D&&!D.relurl?(x.pop(),_-=D.duration,v.partList&&(v.fragmentHint=D)):v.partList&&(CL(N,D,T),N.cc=R,v.fragmentHint=N,W&&V7(N,W,v)),v.targetduration||(v.playlistParsingError=new Error("Missing Target Duration"));const fe=x.length,O=x[0],re=x[fe-1];if(_+=v.skippedSegments*v.targetduration,_>0&&fe&&re){v.averagetargetduration=_/fe;const ce=re.sn;v.endSN=ce!=="initSegment"?ce:0,v.live||(re.endList=!0),C>0&&(dTe(x,C),O&&T.unshift(O))}return v.fragmentHint&&(_+=v.fragmentHint.duration),v.totalduration=_,T.length&&v.dateRangeTagCount&&O&&Vz(T,v),v.endCC=R,v}}function Vz(i,t){let r=i.length;if(!r)if(t.hasProgramDateTime){const d=t.fragments[t.fragments.length-1];i.push(d),r++}else return;const o=i[r-1],l=t.live?1/0:t.totalduration,c=Object.keys(t.dateRanges);for(let d=c.length;d--;){const m=t.dateRanges[c[d]],v=m.startDate.getTime();m.tagAnchor=o.ref;for(let x=r;x--;){var h;if(((h=i[x])==null?void 0:h.sn)<t.startSN)break;const T=cTe(t,v,i,x,l);if(T!==-1){m.tagAnchor=t.fragments[T].ref;break}}}}function cTe(i,t,r,o,l){const c=r[o];if(c){const d=c.programDateTime;if(t>=d||o===0){var h;const m=(((h=r[o+1])==null?void 0:h.start)||l)-c.start;if(t<=d+m*1e3){const v=r[o].sn-i.startSN;if(v<0)return-1;const x=i.fragments;if(x.length>r.length){const E=(r[o+1]||x[x.length-1]).sn-i.startSN;for(let A=E;A>v;A--){const k=x[A].programDateTime;if(t>=k&&t<k+x[A].duration*1e3)return A}}return v}}}return-1}function j7(i,t,r){var o,l;const c=new ur(i,r),h=(o=c.METHOD)!=null?o:"",d=c.URI,m=c.hexadecimalInteger("IV"),v=c.KEYFORMATVERSIONS,x=(l=c.KEYFORMAT)!=null?l:"identity";d&&c.IV&&!m&&Rn.error(`Invalid IV: ${c.IV}`);const T=d?Ja.resolve(d,t):"",E=(v||"1").split("/").map(Number).filter(Number.isFinite);return new Mc(h,T,x,E,m,c.KEYID)}function U7(i){const r=new ur(i).decimalFloatingPoint("TIME-OFFSET");return Ye(r)?r:null}function F7(i,t){let r=(i||"").split(/[ ,]+/).filter(o=>o);["video","audio","text"].forEach(o=>{const l=r.filter(c=>qP(c,o));l.length&&(t[`${o}Codec`]=l.map(c=>c.split("/")[0]).join(","),r=r.filter(c=>l.indexOf(c)===-1))}),t.unknownCodecs=r}function B7(i,t,r){const o=t[r];o&&(i[r]=o)}function dTe(i,t){let r=i[t];for(let o=t;o--;){const l=i[o];if(!l)return;l.programDateTime=r.programDateTime-l.duration*1e3,r=l}}function CL(i,t,r){i.rawProgramDateTime?r.push(i):t!=null&&t.programDateTime&&(i.programDateTime=t.endProgramDateTime)}function $7(i,t,r,o){i.relurl=t.URI,t.BYTERANGE&&i.setByteRange(t.BYTERANGE),i.level=r,i.sn="initSegment",o&&(i.levelkeys=o),i.initSegment=null}function V7(i,t,r){i.levelkeys=t;const{encryptedFragments:o}=r;(!o.length||o[o.length-1].levelkeys!==t)&&Object.keys(t).some(l=>t[l].isCommonEncryption)&&o.push(i)}function Kl(i,t,r){i.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${r[0]})`)}function G7(i,t,r){i.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${r[0]})`)}function m_(i,t){const r=t.startPTS;if(Ye(r)){let o=0,l;t.sn>i.sn?(o=r-i.start,l=i):(o=i.start-r,l=t),l.duration!==o&&l.setDuration(o)}else t.sn>i.sn?i.cc===t.cc&&i.minEndPTS?t.setStart(i.start+(i.minEndPTS-i.start)):t.setStart(i.start+i.duration):t.setStart(Math.max(i.start-t.duration,0))}function Gz(i,t,r,o,l,c,h){o-r<=0&&(h.warn("Fragment should have a positive duration",t),o=r+t.duration,c=l+t.duration);let m=r,v=o;const x=t.startPTS,T=t.endPTS;if(Ye(x)){const P=Math.abs(x-r);i&&P>i.totalduration?h.warn(`media timestamps and playlist times differ by ${P}s for level ${t.level} ${i.url}`):Ye(t.deltaPTS)?t.deltaPTS=Math.max(P,t.deltaPTS):t.deltaPTS=P,m=Math.max(r,x),r=Math.min(r,x),l=t.startDTS!==void 0?Math.min(l,t.startDTS):l,v=Math.min(o,T),o=Math.max(o,T),c=t.endDTS!==void 0?Math.max(c,t.endDTS):c}const E=r-t.start;t.start!==0&&t.setStart(r),t.setDuration(o-t.start),t.startPTS=r,t.maxStartPTS=m,t.startDTS=l,t.endPTS=o,t.minEndPTS=v,t.endDTS=c;const A=t.sn;if(!i||A<i.startSN||A>i.endSN)return 0;let k;const _=A-i.startSN,R=i.fragments;for(R[_]=t,k=_;k>0;k--)m_(R[k],R[k-1]);for(k=_;k<R.length-1;k++)m_(R[k],R[k+1]);return i.fragmentHint&&m_(R[R.length-1],i.fragmentHint),i.PTSKnown=i.alignedSliding=!0,E}function hTe(i,t,r){if(i===t)return;let o=null;const l=i.fragments;for(let x=l.length-1;x>=0;x--){const T=l[x].initSegment;if(T){o=T;break}}i.fragmentHint&&delete i.fragmentHint.endPTS;let c;mTe(i,t,(x,T,E,A)=>{if((!t.startCC||t.skippedSegments)&&T.cc!==x.cc){const k=x.cc-T.cc;for(let _=E;_<A.length;_++)A[_].cc+=k;t.endCC=A[A.length-1].cc}Ye(x.startPTS)&&Ye(x.endPTS)&&(T.setStart(T.startPTS=x.startPTS),T.startDTS=x.startDTS,T.maxStartPTS=x.maxStartPTS,T.endPTS=x.endPTS,T.endDTS=x.endDTS,T.minEndPTS=x.minEndPTS,T.setDuration(x.endPTS-x.startPTS),T.duration&&(c=T),t.PTSKnown=t.alignedSliding=!0),x.hasStreams&&(T.elementaryStreams=x.elementaryStreams),T.loader=x.loader,x.hasStats&&(T.stats=x.stats),x.initSegment&&(T.initSegment=x.initSegment,o=x.initSegment)});const h=t.fragments,d=t.fragmentHint?h.concat(t.fragmentHint):h;if(o&&d.forEach(x=>{var T;x&&(!x.initSegment||x.initSegment.relurl===((T=o)==null?void 0:T.relurl))&&(x.initSegment=o)}),t.skippedSegments){if(t.deltaUpdateFailed=h.some(x=>!x),t.deltaUpdateFailed){r.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let x=t.skippedSegments;x--;)h.shift();t.startSN=h[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=fTe(i.dateRanges,t,r));const x=i.fragments.filter(T=>T.rawProgramDateTime);if(i.hasProgramDateTime&&!t.hasProgramDateTime)for(let T=1;T<d.length;T++)d[T].programDateTime===null&&CL(d[T],d[T-1],x);Vz(x,t)}t.endCC=h[h.length-1].cc}if(!t.startCC){var m;const x=Kz(i,t.startSN-1);t.startCC=(m=x==null?void 0:x.cc)!=null?m:h[0].cc}pTe(i.partList,t.partList,(x,T)=>{T.elementaryStreams=x.elementaryStreams,T.stats=x.stats}),c?Gz(t,c,c.startPTS,c.endPTS,c.startDTS,c.endDTS,r):Hz(i,t),h.length&&(t.totalduration=t.edge-h[0].start),t.driftStartTime=i.driftStartTime,t.driftStart=i.driftStart;const v=t.advancedDateTime;if(t.advanced&&v){const x=t.edge;t.driftStart||(t.driftStartTime=v,t.driftStart=x),t.driftEndTime=v,t.driftEnd=x}else t.driftEndTime=i.driftEndTime,t.driftEnd=i.driftEnd,t.advancedDateTime=i.advancedDateTime;t.requestScheduled===-1&&(t.requestScheduled=i.requestScheduled)}function fTe(i,t,r){const{dateRanges:o,recentlyRemovedDateranges:l}=t,c=Nn({},i);l&&l.forEach(m=>{delete c[m]});const d=Object.keys(c).length;return d?(Object.keys(o).forEach(m=>{const v=c[m],x=new jz(o[m].attr,v);x.isValid?(c[m]=x,v||(x.tagOrder+=d)):r.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Un(o[m].attr)}"`)}),c):o}function pTe(i,t,r){if(i&&t){let o=0;for(let l=0,c=i.length;l<=c;l++){const h=i[l],d=t[l+o];h&&d&&h.index===d.index&&h.fragment.sn===d.fragment.sn?r(h,d):o--}}}function mTe(i,t,r){const o=t.skippedSegments,l=Math.max(i.startSN,t.startSN)-t.startSN,c=(i.fragmentHint?1:0)+(o?t.endSN:Math.min(i.endSN,t.endSN))-t.startSN,h=t.startSN-i.startSN,d=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,m=i.fragmentHint?i.fragments.concat(i.fragmentHint):i.fragments;for(let v=l;v<=c;v++){const x=m[h+v];let T=d[v];if(o&&!T&&x&&(T=t.fragments[v]=x),x&&T){r(x,T,v,d);const E=x.relurl,A=T.relurl;if(E&&gTe(E,A)){t.playlistParsingError=H7(`media sequence mismatch ${T.sn}:`,i,t,x,T);return}else if(x.cc!==T.cc){t.playlistParsingError=H7(`discontinuity sequence mismatch (${x.cc}!=${T.cc})`,i,t,x,T);return}}}}function H7(i,t,r,o,l){return new Error(`${i} ${l.url}
Playlist starting @${t.startSN}
${t.m3u8}

Playlist starting @${r.startSN}
${r.m3u8}`)}function Hz(i,t,r=!0){const o=t.startSN+t.skippedSegments-i.startSN,l=i.fragments,c=o>=0;let h=0;if(c&&o<l.length)h=l[o].start;else if(c&&t.startSN===i.endSN+1)h=i.fragmentEnd;else if(c&&r)h=i.fragmentStart+o*t.levelTargetDuration;else if(!t.skippedSegments&&t.fragmentStart===0)h=i.fragmentStart;else return;kL(t,h)}function kL(i,t){if(t){const r=i.fragments;for(let o=i.skippedSegments;o<r.length;o++)r[o].addStart(t);i.fragmentHint&&i.fragmentHint.addStart(t)}}function qz(i,t=1/0){let r=1e3*i.targetduration;if(i.updated){const o=i.fragments;if(o.length&&r*4>t){const c=o[o.length-1].duration*1e3;c<r&&(r=c)}}else r/=2;return Math.round(r)}function Kz(i,t,r){if(!i)return null;let o=i.fragments[t-i.startSN];return o||(o=i.fragmentHint,o&&o.sn===t)?o:t<i.startSN&&r&&r.sn===t?r:null}function q7(i,t,r){return i?zz(i.partList,t,r):null}function zz(i,t,r){if(i)for(let o=i.length;o--;){const l=i[o];if(l.index===r&&l.fragment.sn===t)return l}return null}function Wz(i){i.forEach((t,r)=>{var o;(o=t.details)==null||o.fragments.forEach(l=>{l.level=r,l.initSegment&&(l.initSegment.level=r)})})}function gTe(i,t){return i!==t&&t?K7(i)!==K7(t):!1}function K7(i){return i.replace(/\?[^?]*$/,"")}function J0(i,t){for(let o=0,l=i.length;o<l;o++){var r;if(((r=i[o])==null?void 0:r.cc)===t)return i[o]}return null}function vTe(i,t){return!!(i&&t.startCC<i.endCC&&t.endCC>i.startCC)}function z7(i,t){const r=i.start+t;i.startPTS=r,i.setStart(r),i.endPTS=r+i.duration}function Yz(i,t){const r=t.fragments;for(let o=0,l=r.length;o<l;o++)z7(r[o],i);t.fragmentHint&&z7(t.fragmentHint,i),t.alignedSliding=!0}function yTe(i,t){i&&(Xz(t,i),t.alignedSliding||Vw(t,i),!t.alignedSliding&&!t.skippedSegments&&Hz(i,t,!1))}function Xz(i,t){if(!vTe(t,i))return;const r=Math.min(t.endCC,i.endCC),o=J0(t.fragments,r),l=J0(i.fragments,r);if(!o||!l)return;Rn.log(`Aligning playlist at start of dicontinuity sequence ${r}`);const c=o.start-l.start;Yz(c,i)}function Vw(i,t){if(!i.hasProgramDateTime||!t.hasProgramDateTime)return;const r=i.fragments,o=t.fragments;if(!r.length||!o.length)return;let l,c;const h=Math.min(t.endCC,i.endCC);t.startCC<h&&i.startCC<h&&(l=J0(o,h),c=J0(r,h)),(!l||!c)&&(l=o[Math.floor(o.length/2)],c=J0(r,l.cc)||r[Math.floor(r.length/2)]);const d=l.programDateTime,m=c.programDateTime;if(!d||!m)return;const v=(m-d)/1e3-(c.start-l.start);Yz(v,i)}function fs(i,t,r){Ms(i,t,r),i.addEventListener(t,r)}function Ms(i,t,r){i.removeEventListener(t,r)}const xTe={toString:function(i){let t="";const r=i.length;for(let o=0;o<r;o++)t+=`[${i.start(o).toFixed(3)}-${i.end(o).toFixed(3)}]`;return t}},Re={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class JP extends Mz{constructor(t,r,o,l,c){super(l,t.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Re.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:h,fragCurrent:d,media:m,mediaBuffer:v,state:x}=this,T=m?m.currentTime:0,E=qt.bufferInfo(v||m,T,h.maxBufferHole),A=!E.len;if(this.log(`Media seeking to ${Ye(T)?T.toFixed(3):T}, state: ${x}, ${A?"out of":"in"} buffer`),this.state===Re.ENDED)this.resetLoadingState();else if(d){const k=h.maxFragLookUpTolerance,_=d.start-k,R=d.start+d.duration+k;if(A||R<E.start||_>E.end){const P=T>R;(T<_||P)&&(P&&d.loader&&(this.log(`Cancelling fragment load for seek (sn: ${d.sn})`),d.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(m){this.fragmentTracker.removeFragmentsInRange(T,1/0,this.playlistType,!0);const k=this.lastCurrentTime;if(T>k&&(this.lastCurrentTime=T),!this.loadingParts){const _=Math.max(E.end,T),R=this.shouldLoadParts(this.getLevelDetails(),_);R&&(this.log(`LL-Part loading ON after seeking to ${T.toFixed(2)} with buffer @${_.toFixed(2)}`),this.loadingParts=R)}}this.hls.hasEnoughToStart||(this.log(`Setting ${A?"startPosition":"nextLoadPosition"} to ${T} for seek without enough to start`),this.nextLoadPosition=T,A&&(this.startPosition=T)),A&&this.state===Re.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=c,this.hls=t,this.fragmentLoader=new zxe(t.config),this.keyLoader=o,this.fragmentTracker=r,this.config=t.config,this.decrypter=new WP(t.config)}registerListeners(){const{hls:t}=this;t.on(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(H.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(H.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(t){}stopLoad(){if(this.state===Re.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const t=this.fragCurrent;t!=null&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Re.STOPPED}get startPositionValue(){const{nextLoadPosition:t,startPosition:r}=this;return r===-1&&t?t:r}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(t,r){if(r.live||!this.media)return!1;const o=t.end||0,l=this.config.timelineOffset||0;if(o<=l)return!1;const c=t.buffered;this.config.maxBufferHole&&c&&c.length>1&&(t=qt.bufferedInfo(c,t.start,0));const h=t.nextStart;if(h&&h>l&&h<r.edge||this.media.currentTime<t.start)return!1;const m=r.partList;if(m!=null&&m.length){const x=m[m.length-1];return qt.isBuffered(this.media,x.start+x.duration/2)}const v=r.fragments[r.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(v)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const t=this.config.timelineOffset;if(t){var r;return((r=this.getLevelDetails())==null?void 0:r.appliedTimelineOffset)||t}return 0}onMediaAttached(t,r){const o=this.media=this.mediaBuffer=r.media;fs(o,"seeking",this.onMediaSeeking),fs(o,"ended",this.onMediaEnded);const l=this.config;this.levels&&l.autoStartLoad&&this.state===Re.STOPPED&&this.startLoad(l.startPosition)}onMediaDetaching(t,r){const o=!!r.transferMedia,l=this.media;if(l!==null){if(l.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Ms(l,"seeking",this.onMediaSeeking),Ms(l,"ended",this.onMediaEnded),this.keyLoader&&!o&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,o){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(t,r){}onManifestLoaded(t,r){this.startTimeOffset=r.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Re.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(t,r,o){this.startFragRequested=!0,this._loadFragForPlayback(t,r,o)}_loadFragForPlayback(t,r,o){const l=c=>{const h=c.frag;if(this.fragContextChanged(h)){this.warn(`${h.type} sn: ${h.sn}${c.part?" part: "+c.part.index:""} of ${this.fragInfo(h,!1,c.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(h);return}h.stats.chunkCount++,this._handleFragmentLoadProgress(c)};this._doFragLoad(t,r,o,l).then(c=>{if(!c)return;const h=this.state,d=c.frag;if(this.fragContextChanged(d)){(h===Re.FRAG_LOADING||!this.fragCurrent&&h===Re.PARSING)&&(this.fragmentTracker.removeFragment(d),this.state=Re.IDLE);return}"payload"in c&&(this.log(`Loaded ${d.type} sn: ${d.sn} of ${this.playlistLabel()} ${d.level}`),this.hls.trigger(H.FRAG_LOADED,c)),this._handleFragmentLoadComplete(c)}).catch(c=>{this.state===Re.STOPPED||this.state===Re.ERROR||(this.warn(`Frag error: ${(c==null?void 0:c.message)||c}`),this.resetFragmentLoading(t))})}clearTrackerIfNeeded(t){var r;const{fragmentTracker:o}=this;if(o.getState(t)===ii.APPENDING){const c=t.type,h=this.getFwdBufferInfo(this.mediaBuffer,c),d=Math.max(t.duration,h?h.len:this.config.maxBufferLength),m=this.backtrackFragment;((m?t.sn-m.sn:0)===1||this.reduceMaxBufferLength(d,t.duration))&&o.removeFragment(t)}else((r=this.mediaBuffer)==null?void 0:r.buffered.length)===0?o.removeAllFragments():o.hasParts(t.type)&&(o.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type}),o.getState(t)===ii.PARTIAL&&o.removeFragment(t))}checkLiveUpdate(t){if(t.updated&&!t.live){const r=t.fragments[t.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:r,part:null,stats:r.stats,id:r.type})}t.fragments[0]||(t.deltaUpdateFailed=!0)}waitForLive(t){const r=t.details;return(r==null?void 0:r.live)&&r.type!=="EVENT"&&(this.levelLastLoaded!==t||r.expired)}flushMainBuffer(t,r,o=null){if(!(t-r))return;const l={startOffset:t,endOffset:r,type:o};this.hls.trigger(H.BUFFER_FLUSHING,l)}_loadInitSegment(t,r){this._doFragLoad(t,r).then(o=>{const l=o==null?void 0:o.frag;if(!l||this.fragContextChanged(l)||!this.levels)throw new Error("init load aborted");return o}).then(o=>{const{hls:l}=this,{frag:c,payload:h}=o,d=c.decryptdata;if(h&&h.byteLength>0&&d!=null&&d.key&&d.iv&&jp(d.method)){const m=self.performance.now();return this.decrypter.decrypt(new Uint8Array(h),d.key.buffer,d.iv.buffer,XP(d.method)).catch(v=>{throw l.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.FRAG_DECRYPT_ERROR,fatal:!1,error:v,reason:v.message,frag:c}),v}).then(v=>{const x=self.performance.now();return l.trigger(H.FRAG_DECRYPTED,{frag:c,payload:v,stats:{tstart:m,tdecrypt:x}}),o.payload=v,this.completeInitSegmentLoad(o)})}return this.completeInitSegmentLoad(o)}).catch(o=>{this.state===Re.STOPPED||this.state===Re.ERROR||(this.warn(o),this.resetFragmentLoading(t))})}completeInitSegmentLoad(t){const{levels:r}=this;if(!r)throw new Error("init load aborted, missing levels");const o=t.frag.stats;this.state!==Re.STOPPED&&(this.state=Re.IDLE),t.frag.data=new Uint8Array(t.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(t,r){var o,l;const c=t.tracks;if(c&&!r.encrypted&&((o=c.audio)!=null&&o.encrypted||(l=c.video)!=null&&l.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const h=this.media,d=new Error(`Encrypted track with no key in ${this.fragInfo(r)} (media ${h?"attached mediaKeys: "+h.mediaKeys:"detached"})`);return this.warn(d.message),!h||h.mediaKeys?!1:(this.hls.trigger(H.ERROR,{type:pt.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_KEYS,fatal:!1,error:d,frag:r}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(t){const{fragCurrent:r}=this;return!t||!r||t.sn!==r.sn||t.level!==r.level}fragBufferedComplete(t,r){const o=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${t.type} sn: ${t.sn}${r?" part: "+r.index:""} of ${this.fragInfo(t,!1,r)} > buffer:${o?xTe.toString(qt.getBuffered(o)):"(detached)"})`),Dr(t)){var l;if(t.type!==lt.SUBTITLE){const h=t.elementaryStreams;if(!Object.keys(h).some(d=>!!h[d])){this.state=Re.IDLE;return}}const c=(l=this.levels)==null?void 0:l[t.level];c!=null&&c.fragmentError&&(this.log(`Resetting level fragment error count of ${c.fragmentError} on frag buffered`),c.fragmentError=0)}this.state=Re.IDLE}_handleFragmentLoadComplete(t){const{transmuxer:r}=this;if(!r)return;const{frag:o,part:l,partsLoaded:c}=t,h=!c||c.length===0||c.some(m=>!m),d=new YP(o.level,o.sn,o.stats.chunkCount+1,0,l?l.index:-1,!h);r.flush(d)}_handleFragmentLoadProgress(t){}_doFragLoad(t,r,o=null,l){var c;this.fragCurrent=t;const h=r.details;if(!this.levels||!h)throw new Error(`frag load aborted, missing level${h?"":" detail"}s`);let d=null;if(t.encrypted&&!((c=t.decryptdata)!=null&&c.key)){if(this.log(`Loading key for ${t.sn} of [${h.startSN}-${h.endSN}], ${this.playlistLabel()} ${t.level}`),this.state=Re.KEY_LOADING,this.fragCurrent=t,d=this.keyLoader.load(t).then(E=>{if(!this.fragContextChanged(E.frag))return this.hls.trigger(H.KEY_LOADED,E),this.state===Re.KEY_LOADING&&(this.state=Re.IDLE),E}),this.hls.trigger(H.KEY_LOADING,{frag:t}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else t.encrypted||(d=this.keyLoader.loadClear(t,h.encryptedFragments,this.startFragRequested),d&&this.log("[eme] blocking frag load until media-keys acquired"));const m=this.fragPrevious;if(Dr(t)&&(!m||t.sn!==m.sn)){const E=this.shouldLoadParts(r.details,t.end);E!==this.loadingParts&&(this.log(`LL-Part loading ${E?"ON":"OFF"} loading sn ${m==null?void 0:m.sn}->${t.sn}`),this.loadingParts=E)}if(o=Math.max(t.start,o||0),this.loadingParts&&Dr(t)){const E=h.partList;if(E&&l){o>h.fragmentEnd&&h.fragmentHint&&(t=h.fragmentHint);const A=this.getNextPart(E,t,o);if(A>-1){const k=E[A];t=this.fragCurrent=k.fragment,this.log(`Loading ${t.type} sn: ${t.sn} part: ${k.index} (${A}/${E.length-1}) of ${this.fragInfo(t,!1,k)}) cc: ${t.cc} [${h.startSN}-${h.endSN}], target: ${parseFloat(o.toFixed(3))}`),this.nextLoadPosition=k.start+k.duration,this.state=Re.FRAG_LOADING;let _;return d?_=d.then(R=>!R||this.fragContextChanged(R.frag)?null:this.doFragPartsLoad(t,k,r,l)).catch(R=>this.handleFragLoadError(R)):_=this.doFragPartsLoad(t,k,r,l).catch(R=>this.handleFragLoadError(R)),this.hls.trigger(H.FRAG_LOADING,{frag:t,part:k,targetBufferTime:o}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):_}else if(!t.url||this.loadedEndOfParts(E,o))return Promise.resolve(null)}}if(Dr(t)&&this.loadingParts){var v;this.log(`LL-Part loading OFF after next part miss @${o.toFixed(2)} Check buffer at sn: ${t.sn} loaded parts: ${(v=h.partList)==null?void 0:v.filter(E=>E.loaded).map(E=>`[${E.start}-${E.end}]`)}`),this.loadingParts=!1}else if(!t.url)return Promise.resolve(null);this.log(`Loading ${t.type} sn: ${t.sn} of ${this.fragInfo(t,!1)}) cc: ${t.cc} ${"["+h.startSN+"-"+h.endSN+"]"}, target: ${parseFloat(o.toFixed(3))}`),Ye(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=Re.FRAG_LOADING;const x=this.config.progressive&&t.type!==lt.SUBTITLE;let T;return x&&d?T=d.then(E=>!E||this.fragContextChanged(E.frag)?null:this.fragmentLoader.load(t,l)).catch(E=>this.handleFragLoadError(E)):T=Promise.all([this.fragmentLoader.load(t,x?l:void 0),d]).then(([E])=>(!x&&l&&l(E),E)).catch(E=>this.handleFragLoadError(E)),this.hls.trigger(H.FRAG_LOADING,{frag:t,targetBufferTime:o}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):T}doFragPartsLoad(t,r,o,l){return new Promise((c,h)=>{var d;const m=[],v=(d=o.details)==null?void 0:d.partList,x=T=>{this.fragmentLoader.loadPart(t,T,l).then(E=>{m[T.index]=E;const A=E.part;this.hls.trigger(H.FRAG_LOADED,E);const k=q7(o.details,t.sn,T.index+1)||zz(v,t.sn,T.index+1);if(k)x(k);else return c({frag:t,part:A,partsLoaded:m})}).catch(h)};x(r)})}handleFragLoadError(t){if("data"in t){const r=t.data;r.frag&&r.details===we.INTERNAL_ABORTED?this.handleFragLoadAborted(r.frag,r.part):r.frag&&r.type===pt.KEY_SYSTEM_ERROR?(r.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(r.frag)):this.hls.trigger(H.ERROR,r)}else this.hls.trigger(H.ERROR,{type:pt.OTHER_ERROR,details:we.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0});return null}_handleTransmuxerFlush(t){const r=this.getCurrentContext(t);if(!r||this.state!==Re.PARSING){!this.fragCurrent&&this.state!==Re.STOPPED&&this.state!==Re.ERROR&&(this.state=Re.IDLE);return}const{frag:o,part:l,level:c}=r,h=self.performance.now();o.stats.parsing.end=h,l&&(l.stats.parsing.end=h);const d=this.getLevelDetails(),v=d&&o.sn>d.endSN||this.shouldLoadParts(d,o.end);v!==this.loadingParts&&(this.log(`LL-Part loading ${v?"ON":"OFF"} after parsing segment ending @${o.end.toFixed(2)}`),this.loadingParts=v),this.updateLevelTiming(o,l,c,t.partial)}shouldLoadParts(t,r){if(this.config.lowLatencyMode){if(!t)return this.loadingParts;if(t.partList){var o;const c=t.partList[0];if(c.fragment.type===lt.SUBTITLE)return!1;const h=c.end+(((o=t.fragmentHint)==null?void 0:o.duration)||0);if(r>=h){var l;if((this.hls.hasEnoughToStart?((l=this.media)==null?void 0:l.currentTime)||this.lastCurrentTime:this.getLoadPosition())>c.start-c.fragment.duration)return!0}}}return!1}getCurrentContext(t){const{levels:r,fragCurrent:o}=this,{level:l,sn:c,part:h}=t;if(!(r!=null&&r[l]))return this.warn(`Levels object was unset while buffering fragment ${c} of ${this.playlistLabel()} ${l}. The current chunk will not be buffered.`),null;const d=r[l],m=d.details,v=h>-1?q7(m,c,h):null,x=v?v.fragment:Kz(m,c,o);return x?(o&&o!==x&&(x.stats=o.stats),{frag:x,part:v,level:d}):null}bufferFragmentData(t,r,o,l,c){if(this.state!==Re.PARSING)return;const{data1:h,data2:d}=t;let m=h;if(d&&(m=Bo(h,d)),!m.length)return;const v=this.initPTS[r.cc],x=v?-v.baseTime/v.timescale:void 0,T={type:t.type,frag:r,part:o,chunkMeta:l,offset:x,parent:r.type,data:m};if(this.hls.trigger(H.BUFFER_APPENDING,T),t.dropped&&t.independent&&!o){if(c)return;this.flushBufferGap(r)}}flushBufferGap(t){const r=this.media;if(!r)return;if(!qt.isBuffered(r,r.currentTime)){this.flushMainBuffer(0,t.start);return}const o=r.currentTime,l=qt.bufferInfo(r,o,0),c=t.duration,h=Math.min(this.config.maxFragLookUpTolerance*2,c*.25),d=Math.max(Math.min(t.start-h,l.end-h),o+h);t.start-d>h&&this.flushMainBuffer(d,t.start)}getFwdBufferInfo(t,r){var o;const l=this.getLoadPosition();if(!Ye(l))return null;const h=this.lastCurrentTime>l||(o=this.media)!=null&&o.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(t,l,r,h)}getFwdBufferInfoAtPos(t,r,o,l){const c=qt.bufferInfo(t,r,l);if(c.len===0&&c.nextStart!==void 0){const h=this.fragmentTracker.getBufferedFrag(r,o);if(h&&(c.nextStart<=h.end||h.gap)){const d=Math.max(Math.min(c.nextStart,h.end)-r,l);return qt.bufferInfo(t,r,d)}}return c}getMaxBufferLength(t){const{config:r}=this;let o;return t?o=Math.max(8*r.maxBufferSize/t,r.maxBufferLength):o=r.maxBufferLength,Math.min(o,r.maxMaxBufferLength)}reduceMaxBufferLength(t,r){const o=this.config,l=Math.max(Math.min(t-r,o.maxBufferLength),r),c=Math.max(t-r*3,o.maxMaxBufferLength/2,l);return c>=l?(o.maxMaxBufferLength=c,this.warn(`Reduce max buffer length to ${c}s`),!0):!1}getAppendedFrag(t,r=lt.MAIN){const o=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(t,r):null;return o&&"fragment"in o?o.fragment:o}getNextFragment(t,r){const o=r.fragments,l=o.length;if(!l)return null;const{config:c}=this,h=o[0].start,d=c.lowLatencyMode&&!!r.partList;let m=null;if(r.live){const T=c.initialLiveManifestSize;if(l<T)return this.warn(`Not enough fragments to start playback (have: ${l}, need: ${T})`),null;if(!r.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||t<h){var v;d&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),m=this.getInitialLiveFragment(r);const E=this.hls.startPosition,A=this.hls.liveSyncPosition,k=m?(E!==-1&&E>=h?E:A)||m.start:t;this.log(`Setting startPosition to ${k} to match start frag at live edge. mainStart: ${E} liveSyncPosition: ${A} frag.start: ${(v=m)==null?void 0:v.start}`),this.startPosition=this.nextLoadPosition=k}}else t<=h&&(m=o[0]);if(!m){const T=this.loadingParts?r.partEnd:r.fragmentEnd;m=this.getFragmentAtPosition(t,T,r)}let x=this.filterReplacedPrimary(m,r);if(!x&&m){const T=m.sn-r.startSN;x=this.filterReplacedPrimary(o[T+1]||null,r)}return this.mapToInitFragWhenRequired(x)}isLoopLoading(t,r){const o=this.fragmentTracker.getState(t);return(o===ii.OK||o===ii.PARTIAL&&!!t.gap)&&this.nextLoadPosition>r}getNextFragmentLoopLoading(t,r,o,l,c){let h=null;if(t.gap&&(h=this.getNextFragment(this.nextLoadPosition,r),h&&!h.gap&&o.nextStart)){const d=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,o.nextStart,l,0);if(d!==null&&o.len+d.len>=c){const m=h.sn;return this.loopSn!==m&&(this.log(`buffer full after gaps in "${l}" playlist starting at sn: ${m}`),this.loopSn=m),null}}return this.loopSn=void 0,h}get primaryPrefetch(){if(W7(this.config)){var t;if((t=this.hls.interstitialsManager)==null||(t=t.playingItem)==null?void 0:t.event)return!0}return!1}filterReplacedPrimary(t,r){if(!t)return t;if(W7(this.config)&&t.type!==lt.SUBTITLE){const o=this.hls.interstitialsManager,l=o==null?void 0:o.bufferingItem;if(l){const h=l.event;if(h){if(h.appendInPlace||Math.abs(t.start-l.start)>1||l.start===0)return null}else if(t.end<=l.start&&(r==null?void 0:r.live)===!1||t.start>l.end&&l.nextEvent&&(l.nextEvent.appendInPlace||t.start-l.end>1))return null}const c=o==null?void 0:o.playerQueue;if(c)for(let h=c.length;h--;){const d=c[h].interstitial;if(d.appendInPlace&&t.start>=d.startTime&&t.end<=d.resumeTime)return null}}return t}mapToInitFragWhenRequired(t){return t!=null&&t.initSegment&&!t.initSegment.data&&!this.bitrateTest?t.initSegment:t}getNextPart(t,r,o){let l=-1,c=!1,h=!0;for(let d=0,m=t.length;d<m;d++){const v=t[d];if(h=h&&!v.independent,l>-1&&o<v.start)break;const x=v.loaded;x?l=-1:(c||(v.independent||h)&&v.fragment===r)&&(v.fragment!==r&&this.warn(`Need buffer at ${o} but next unloaded part starts at ${v.start}`),l=d),c=x}return l}loadedEndOfParts(t,r){let o;for(let l=t.length;l--;){if(o=t[l],!o.loaded)return!1;if(r>o.start)return!0}return!1}getInitialLiveFragment(t){const r=t.fragments,o=this.fragPrevious;let l=null;if(o){if(t.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${o.programDateTime}`),l=Mxe(r,o.endProgramDateTime,this.config.maxFragLookUpTolerance)),!l){const c=o.sn+1;if(c>=t.startSN&&c<=t.endSN){const h=r[c-t.startSN];o.cc===h.cc&&(l=h,this.log(`Live playlist, switching playlist, load frag with next SN: ${l.sn}`))}l||(l=Pz(t,o.cc,o.end),l&&this.log(`Live playlist, switching playlist, load frag with same CC: ${l.sn}`))}}else{const c=this.hls.liveSyncPosition;c!==null&&(l=this.getFragmentAtPosition(c,this.bitrateTest?t.fragmentEnd:t.edge,t))}return l}getFragmentAtPosition(t,r,o){const{config:l}=this;let{fragPrevious:c}=this,{fragments:h,endSN:d}=o;const{fragmentHint:m}=o,{maxFragLookUpTolerance:v}=l,x=o.partList,T=!!(this.loadingParts&&x!=null&&x.length&&m);T&&!this.bitrateTest&&x[x.length-1].fragment.sn===m.sn&&(h=h.concat(m),d=m.sn);let E;if(t<r){var A;const _=t<this.lastCurrentTime||t>r-v||(A=this.media)!=null&&A.paused||!this.startFragRequested?0:v;E=kh(c,h,t,_)}else E=h[h.length-1];if(E){const k=E.sn-o.startSN,_=this.fragmentTracker.getState(E);if((_===ii.OK||_===ii.PARTIAL&&E.gap)&&(c=E),c&&E.sn===c.sn&&(!T||x[0].fragment.sn>E.sn||!o.live)&&E.level===c.level){const P=h[k+1];E.sn<d&&this.fragmentTracker.getState(P)!==ii.OK?E=P:E=null}}return E}alignPlaylists(t,r,o){const l=t.fragments.length;if(!l)return this.warn("No fragments in live playlist"),0;const c=t.fragmentStart,h=!r,d=t.alignedSliding&&Ye(c);if(h||!d&&!c){yTe(o,t);const m=t.fragmentStart;return this.log(`Live playlist sliding: ${m.toFixed(2)} start-sn: ${r?r.startSN:"na"}->${t.startSN} fragments: ${l}`),m}return c}waitForCdnTuneIn(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,t.partTarget*3)}setStartPosition(t,r){let o=this.startPosition;o<r&&(o=-1);const l=this.timelineOffset;if(o===-1){const c=this.startTimeOffset!==null,h=c?this.startTimeOffset:t.startTimeOffset;h!==null&&Ye(h)?(o=r+h,h<0&&(o+=t.edge),o=Math.min(Math.max(r,o),r+t.totalduration),this.log(`Setting startPosition to ${o} for start time offset ${h} found in ${c?"multivariant":"media"} playlist`),this.startPosition=o):t.live?(o=this.hls.liveSyncPosition||r,this.log(`Setting startPosition to -1 to start at live edge ${o}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=o=0),this.lastCurrentTime=o+l}this.nextLoadPosition=o+l}getLoadPosition(){var t;const{media:r}=this;let o=0;return(t=this.hls)!=null&&t.hasEnoughToStart&&r?o=r.currentTime:this.nextLoadPosition>=0&&(o=this.nextLoadPosition),o}handleFragLoadAborted(t,r){this.transmuxer&&t.type===this.playlistType&&Dr(t)&&t.stats.aborted&&(this.log(`Fragment ${t.sn}${r?" part "+r.index:""} of ${this.playlistLabel()} ${t.level} was aborted`),this.resetFragmentLoading(t))}resetFragmentLoading(t){(!this.fragCurrent||!this.fragContextChanged(t)&&this.state!==Re.FRAG_LOADING_WAITING_RETRY)&&(this.state=Re.IDLE)}onFragmentOrKeyLoadError(t,r){var o;if(r.chunkMeta&&!r.frag){const P=this.getCurrentContext(r.chunkMeta);P&&(r.frag=P.frag)}const l=r.frag;if(!l||l.type!==t||!this.levels)return;if(this.fragContextChanged(l)){var c;this.warn(`Frag load error must match current frag to retry ${l.url} > ${(c=this.fragCurrent)==null?void 0:c.url}`);return}const h=r.details===we.FRAG_GAP;h&&this.fragmentTracker.fragBuffered(l,!0);const d=r.errorAction;if(!d){this.state=Re.ERROR;return}const{action:m,flags:v,retryCount:x=0,retryConfig:T}=d,E=!!T,A=E&&m===Li.RetryRequest,k=E&&!d.resolved&&v===no.MoveAllAlternatesMatchingHost,_=(o=this.hls.latestLevelDetails)==null?void 0:o.live;if(!A&&k&&Dr(l)&&!l.endList&&_&&!Nz(r))this.resetFragmentErrors(t),this.treatAsGap(l),d.resolved=!0;else if((A||k)&&x<T.maxNumRetry){var R;const P=bL((R=r.response)==null?void 0:R.code),D=zP(T,x);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+D,this.state=Re.FRAG_LOADING_WAITING_RETRY,d.resolved=!0,P){this.log("Waiting for connection (offline)"),this.retryDate=1/0,r.reason="offline";return}this.warn(`Fragment ${l.sn} of ${t} ${l.level} errored with ${r.details}, retrying loading ${x+1}/${T.maxNumRetry} in ${D}ms`)}else if(T)if(this.resetFragmentErrors(t),x<T.maxNumRetry)!h&&m!==Li.RemoveAlternatePermanently&&(d.resolved=!0);else{this.warn(`${r.details} reached or exceeded max retry (${x})`);return}else m===Li.SendAlternateToPenaltyBox?this.state=Re.WAITING_LEVEL:this.state=Re.ERROR;this.tickImmediate()}checkRetryDate(){const t=self.performance.now(),r=this.retryDate,o=r===1/0;(!r||t>=r||o&&!bL(0))&&(o&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Re.IDLE)}reduceLengthAndFlushBuffer(t){if(this.state===Re.PARSING||this.state===Re.PARSED){const r=t.frag,o=t.parent,l=this.getFwdBufferInfo(this.mediaBuffer,o),c=l&&l.len>.5;c&&this.reduceMaxBufferLength(l.len,(r==null?void 0:r.duration)||10);const h=!c;return h&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${o} buffer`),r&&(this.fragmentTracker.removeFragment(r),this.nextLoadPosition=r.start),this.resetLoadingState(),h}return!1}resetFragmentErrors(t){t===lt.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Re.STOPPED&&(this.state=Re.IDLE)}afterBufferFlushed(t,r,o){if(!t)return;const l=qt.getBuffered(t);this.fragmentTracker.detectEvictedFragments(r,l,o),this.state===Re.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Re.STOPPED&&(this.state=Re.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=this.levelLastLoaded,r=t?t.details:null;r!=null&&r.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(r,r.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(t){this.log(`Loading context changed while buffering sn ${t.sn} of ${this.playlistLabel()} ${t.level===-1?"<removed>":t.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(t=0){this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)}updateLevelTiming(t,r,o,l){const c=o.details;if(!c){this.warn("level.details undefined");return}if(!Object.keys(t.elementaryStreams).reduce((m,v)=>{const x=t.elementaryStreams[v];if(x){const T=x.endPTS-x.startPTS;if(T<=0)return this.warn(`Could not parse fragment ${t.sn} ${v} duration reliably (${T})`),m||!1;const E=l?0:Gz(c,t,x.startPTS,x.endPTS,x.startDTS,x.endDTS,this);return this.hls.trigger(H.LEVEL_PTS_UPDATED,{details:c,level:o,drift:E,type:v,frag:t,start:x.startPTS,end:x.endPTS}),!0}return m},!1)){var d;const m=((d=this.transmuxer)==null?void 0:d.error)===null;if((o.fragmentError===0||m&&(o.fragmentError<2||t.endList))&&this.treatAsGap(t,o),m){const v=new Error(`Found no media in fragment ${t.sn} of ${this.playlistLabel()} ${t.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(v.message),this.hls.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!1,error:v,frag:t,reason:`Found no media in msn ${t.sn} of ${this.playlistLabel()} "${o.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Re.PARSED,this.log(`Parsed ${t.type} sn: ${t.sn}${r?" part: "+r.index:""} of ${this.fragInfo(t,!1,r)})`),this.hls.trigger(H.FRAG_PARSED,{frag:t,part:r})}playlistLabel(){return this.playlistType===lt.MAIN?"level":"track"}fragInfo(t,r=!0,o){var l,c;return`${this.playlistLabel()} ${t.level} (${o?"part":"frag"}:[${((l=r&&!o?t.startPTS:(o||t).start)!=null?l:NaN).toFixed(3)}-${((c=r&&!o?t.endPTS:(o||t).end)!=null?c:NaN).toFixed(3)}]${o&&t.type==="main"?"INDEPENDENT="+(o.independent?"YES":"NO"):""}`}treatAsGap(t,r){r&&r.fragmentError++,t.gap=!0,this.fragmentTracker.removeFragment(t),this.fragmentTracker.fragBuffered(t,!0)}resetTransmuxer(){var t;(t=this.transmuxer)==null||t.reset()}recoverWorkerError(t){t.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(t){const r=this._state;r!==t&&(this._state=t,this.log(`${r}->${t}`))}get state(){return this._state}}function W7(i){return!!i.interstitialsController&&i.enableInterstitialPlayback!==!1}class Qz{constructor(){this.chunks=[],this.dataLength=0}push(t){this.chunks.push(t),this.dataLength+=t.length}flush(){const{chunks:t,dataLength:r}=this;let o;if(t.length)t.length===1?o=t[0]:o=TTe(t,r);else return new Uint8Array(0);return this.reset(),o}reset(){this.chunks.length=0,this.dataLength=0}}function TTe(i,t){const r=new Uint8Array(t);let o=0;for(let l=0;l<i.length;l++){const c=i[l];r.set(c,o),o+=c.length}return r}var g_={exports:{}},Y7;function STe(){return Y7||(Y7=1,function(i){var t=Object.prototype.hasOwnProperty,r="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(r=!1));function l(m,v,x){this.fn=m,this.context=v,this.once=x||!1}function c(m,v,x,T,E){if(typeof x!="function")throw new TypeError("The listener must be a function");var A=new l(x,T||m,E),k=r?r+v:v;return m._events[k]?m._events[k].fn?m._events[k]=[m._events[k],A]:m._events[k].push(A):(m._events[k]=A,m._eventsCount++),m}function h(m,v){--m._eventsCount===0?m._events=new o:delete m._events[v]}function d(){this._events=new o,this._eventsCount=0}d.prototype.eventNames=function(){var v=[],x,T;if(this._eventsCount===0)return v;for(T in x=this._events)t.call(x,T)&&v.push(r?T.slice(1):T);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(x)):v},d.prototype.listeners=function(v){var x=r?r+v:v,T=this._events[x];if(!T)return[];if(T.fn)return[T.fn];for(var E=0,A=T.length,k=new Array(A);E<A;E++)k[E]=T[E].fn;return k},d.prototype.listenerCount=function(v){var x=r?r+v:v,T=this._events[x];return T?T.fn?1:T.length:0},d.prototype.emit=function(v,x,T,E,A,k){var _=r?r+v:v;if(!this._events[_])return!1;var R=this._events[_],P=arguments.length,D,N;if(R.fn){switch(R.once&&this.removeListener(v,R.fn,void 0,!0),P){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,x),!0;case 3:return R.fn.call(R.context,x,T),!0;case 4:return R.fn.call(R.context,x,T,E),!0;case 5:return R.fn.call(R.context,x,T,E,A),!0;case 6:return R.fn.call(R.context,x,T,E,A,k),!0}for(N=1,D=new Array(P-1);N<P;N++)D[N-1]=arguments[N];R.fn.apply(R.context,D)}else{var $=R.length,V;for(N=0;N<$;N++)switch(R[N].once&&this.removeListener(v,R[N].fn,void 0,!0),P){case 1:R[N].fn.call(R[N].context);break;case 2:R[N].fn.call(R[N].context,x);break;case 3:R[N].fn.call(R[N].context,x,T);break;case 4:R[N].fn.call(R[N].context,x,T,E);break;default:if(!D)for(V=1,D=new Array(P-1);V<P;V++)D[V-1]=arguments[V];R[N].fn.apply(R[N].context,D)}}return!0},d.prototype.on=function(v,x,T){return c(this,v,x,T,!1)},d.prototype.once=function(v,x,T){return c(this,v,x,T,!0)},d.prototype.removeListener=function(v,x,T,E){var A=r?r+v:v;if(!this._events[A])return this;if(!x)return h(this,A),this;var k=this._events[A];if(k.fn)k.fn===x&&(!E||k.once)&&(!T||k.context===T)&&h(this,A);else{for(var _=0,R=[],P=k.length;_<P;_++)(k[_].fn!==x||E&&!k[_].once||T&&k[_].context!==T)&&R.push(k[_]);R.length?this._events[A]=R.length===1?R[0]:R:h(this,A)}return this},d.prototype.removeAllListeners=function(v){var x;return v?(x=r?r+v:v,this._events[x]&&h(this,x)):(this._events=new o,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,i.exports=d}(g_)),g_.exports}var wTe=STe(),ZP=z1e(wTe);const Ov="1.6.15",hm={};function ETe(){return typeof __HLS_WORKER_BUNDLE__=="function"}function bTe(){const i=hm[Ov];if(i)return i.clientCount++,i;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),r=self.URL.createObjectURL(t),l={worker:new self.Worker(r),objectURL:r,clientCount:1};return hm[Ov]=l,l}function ATe(i){const t=hm[i];if(t)return t.clientCount++,t;const r=new self.URL(i,self.location.href).href,l={worker:new self.Worker(r),scriptURL:r,clientCount:1};return hm[i]=l,l}function ITe(i){const t=hm[i||Ov];if(t&&t.clientCount--===1){const{worker:o,objectURL:l}=t;delete hm[i||Ov],l&&self.URL.revokeObjectURL(l),o.terminate()}}function Jz(i,t){return t+10<=i.length&&i[t]===51&&i[t+1]===68&&i[t+2]===73&&i[t+3]<255&&i[t+4]<255&&i[t+6]<128&&i[t+7]<128&&i[t+8]<128&&i[t+9]<128}function eD(i,t){return t+10<=i.length&&i[t]===73&&i[t+1]===68&&i[t+2]===51&&i[t+3]<255&&i[t+4]<255&&i[t+6]<128&&i[t+7]<128&&i[t+8]<128&&i[t+9]<128}function FE(i,t){let r=0;return r=(i[t]&127)<<21,r|=(i[t+1]&127)<<14,r|=(i[t+2]&127)<<7,r|=i[t+3]&127,r}function jv(i,t){const r=t;let o=0;for(;eD(i,t);){o+=10;const l=FE(i,t+6);o+=l,Jz(i,t+10)&&(o+=10),t+=o}if(o>0)return i.subarray(r,r+o)}function CTe(i,t,r,o){const l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],c=t[r+2],h=c>>2&15;if(h>12){const A=new Error(`invalid ADTS sampling index:${h}`);i.emit(H.ERROR,H.ERROR,{type:pt.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!0,error:A,reason:A.message});return}const d=(c>>6&3)+1,m=t[r+3]>>6&3|(c&1)<<2,v="mp4a.40."+d,x=l[h];let T=h;(d===5||d===29)&&(T-=3);const E=[d<<3|(T&14)>>1,(T&1)<<7|m<<3];return Rn.log(`manifest codec:${o}, parsed codec:${v}, channels:${m}, rate:${x} (ADTS object type:${d} sampling index:${h})`),{config:E,samplerate:x,channelCount:m,codec:v,parsedCodec:v,manifestCodec:o}}function Zz(i,t){return i[t]===255&&(i[t+1]&246)===240}function eW(i,t){return i[t+1]&1?7:9}function tD(i,t){return(i[t+3]&3)<<11|i[t+4]<<3|(i[t+5]&224)>>>5}function kTe(i,t){return t+5<i.length}function Gw(i,t){return t+1<i.length&&Zz(i,t)}function _Te(i,t){return kTe(i,t)&&Zz(i,t)&&tD(i,t)<=i.length-t}function RTe(i,t){if(Gw(i,t)){const r=eW(i,t);if(t+r>=i.length)return!1;const o=tD(i,t);if(o<=r)return!1;const l=t+o;return l===i.length||Gw(i,l)}return!1}function tW(i,t,r,o,l){if(!i.samplerate){const c=CTe(t,r,o,l);if(!c)return;Nn(i,c)}}function nW(i){return 1024*9e4/i}function LTe(i,t){const r=eW(i,t);if(t+r<=i.length){const o=tD(i,t)-r;if(o>0)return{headerLength:r,frameLength:o}}}function rW(i,t,r,o,l){const c=nW(i.samplerate),h=o+l*c,d=LTe(t,r);let m;if(d){const{frameLength:T,headerLength:E}=d,A=E+T,k=Math.max(0,r+A-t.length);k?(m=new Uint8Array(A-E),m.set(t.subarray(r+E,t.length),0)):m=t.subarray(r+E,r+A);const _={unit:m,pts:h};return k||i.samples.push(_),{sample:_,length:A,missing:k}}const v=t.length-r;return m=new Uint8Array(v),m.set(t.subarray(r,t.length),0),{sample:{unit:m,pts:h},length:v,missing:-1}}function PTe(i,t){return eD(i,t)&&FE(i,t+6)+10<=i.length-t}function DTe(i){return i instanceof ArrayBuffer?i:i.byteOffset==0&&i.byteLength==i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer}function v_(i,t=0,r=1/0){return NTe(i,t,r,Uint8Array)}function NTe(i,t,r,o){const l=MTe(i);let c=1;"BYTES_PER_ELEMENT"in o&&(c=o.BYTES_PER_ELEMENT);const h=OTe(i)?i.byteOffset:0,d=(h+i.byteLength)/c,m=(h+t)/c,v=Math.floor(Math.max(0,Math.min(m,d))),x=Math.floor(Math.min(v+Math.max(r,0),d));return new o(l,v,x-v)}function MTe(i){return i instanceof ArrayBuffer?i:i.buffer}function OTe(i){return i&&i.buffer instanceof ArrayBuffer&&i.byteLength!==void 0&&i.byteOffset!==void 0}function jTe(i){const t={key:i.type,description:"",data:"",mimeType:null,pictureType:null},r=3;if(i.size<2)return;if(i.data[0]!==r){console.log("Ignore frame with unrecognized character encoding");return}const o=i.data.subarray(1).indexOf(0);if(o===-1)return;const l=po(v_(i.data,1,o)),c=i.data[2+o],h=i.data.subarray(3+o).indexOf(0);if(h===-1)return;const d=po(v_(i.data,3+o,h));let m;return l==="-->"?m=po(v_(i.data,4+o+h)):m=DTe(i.data.subarray(4+o+h)),t.mimeType=l,t.pictureType=c,t.description=d,t.data=m,t}function UTe(i){if(i.size<2)return;const t=po(i.data,!0),r=new Uint8Array(i.data.subarray(t.length+1));return{key:i.type,info:t,data:r.buffer}}function FTe(i){if(i.size<2)return;if(i.type==="TXXX"){let r=1;const o=po(i.data.subarray(r),!0);r+=o.length+1;const l=po(i.data.subarray(r));return{key:i.type,info:o,data:l}}const t=po(i.data.subarray(1));return{key:i.type,info:"",data:t}}function BTe(i){if(i.type==="WXXX"){if(i.size<2)return;let r=1;const o=po(i.data.subarray(r),!0);r+=o.length+1;const l=po(i.data.subarray(r));return{key:i.type,info:o,data:l}}const t=po(i.data);return{key:i.type,info:"",data:t}}function $Te(i){return i.type==="PRIV"?UTe(i):i.type[0]==="W"?BTe(i):i.type==="APIC"?jTe(i):FTe(i)}function VTe(i){const t=String.fromCharCode(i[0],i[1],i[2],i[3]),r=FE(i,4),o=10;return{type:t,size:r,data:i.subarray(o,o+r)}}const dS=10,GTe=10;function iW(i){let t=0;const r=[];for(;eD(i,t);){const o=FE(i,t+6);i[t+5]>>6&1&&(t+=dS),t+=dS;const l=t+o;for(;t+GTe<l;){const c=VTe(i.subarray(t)),h=$Te(c);h&&r.push(h),t+=c.size+dS}Jz(i,t)&&(t+=dS)}return r}function sW(i){return i&&i.key==="PRIV"&&i.info==="com.apple.streaming.transportStreamTimestamp"}function HTe(i){if(i.data.byteLength===8){const t=new Uint8Array(i.data),r=t[3]&1;let o=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return o/=45,r&&(o+=4772185884e-2),Math.round(o)}}function nD(i){const t=iW(i);for(let r=0;r<t.length;r++){const o=t[r];if(sW(o))return HTe(o)}}let ao=function(i){return i.audioId3="org.id3",i.dateRange="com.apple.quicktime.HLS",i.emsg="https://aomedia.org/emsg/ID3",i.misbklv="urn:misb:KLV:bin:1910.1",i}({});function za(i="",t=9e4){return{type:i,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class rD{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(t,r,o,l){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(t){this.initPTS=t,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(t,r){return!1}appendFrame(t,r,o){}demux(t,r){this.cachedData&&(t=Bo(this.cachedData,t),this.cachedData=null);let o=jv(t,0),l=o?o.length:0,c;const h=this._audioTrack,d=this._id3Track,m=o?nD(o):void 0,v=t.length;for((this.basePTS===null||this.frameIndex===0&&Ye(m))&&(this.basePTS=qTe(m,r,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),o&&o.length>0&&d.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:o,type:ao.audioId3,duration:Number.POSITIVE_INFINITY});l<v;){if(this.canParse(t,l)){const x=this.appendFrame(h,t,l);x?(this.frameIndex++,this.lastPTS=x.sample.pts,l+=x.length,c=l):l=v}else PTe(t,l)?(o=jv(t,l),d.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:o,type:ao.audioId3,duration:Number.POSITIVE_INFINITY}),l+=o.length,c=l):l++;if(l===v&&c!==v){const x=t.slice(c);this.cachedData?this.cachedData=Bo(this.cachedData,x):this.cachedData=x}}return{audioTrack:h,videoTrack:za(),id3Track:d,textTrack:za()}}demuxSampleAes(t,r,o){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(t){const r=this.cachedData;return r&&(this.cachedData=null,this.demux(r,0)),{audioTrack:this._audioTrack,videoTrack:za(),id3Track:this._id3Track,textTrack:za()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const qTe=(i,t,r)=>{if(Ye(i))return i*90;const o=r?r.baseTime*9e4/r.timescale:0;return t*9e4+o};let hS=null;const KTe=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],zTe=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],WTe=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],YTe=[0,1,1,4];function oW(i,t,r,o,l){if(r+24>t.length)return;const c=aW(t,r);if(c&&r+c.frameLength<=t.length){const h=c.samplesPerFrame*9e4/c.sampleRate,d=o+l*h,m={unit:t.subarray(r,r+c.frameLength),pts:d,dts:d};return i.config=[],i.channelCount=c.channelCount,i.samplerate=c.sampleRate,i.samples.push(m),{sample:m,length:c.frameLength,missing:0}}}function aW(i,t){const r=i[t+1]>>3&3,o=i[t+1]>>1&3,l=i[t+2]>>4&15,c=i[t+2]>>2&3;if(r!==1&&l!==0&&l!==15&&c!==3){const h=i[t+2]>>1&1,d=i[t+3]>>6,m=r===3?3-o:o===3?3:4,v=KTe[m*14+l-1]*1e3,T=zTe[(r===3?0:r===2?1:2)*3+c],E=d===3?1:2,A=WTe[r][o],k=YTe[o],_=A*8*k,R=Math.floor(A*v/T+h)*k;if(hS===null){const N=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);hS=N?parseInt(N[1]):0}return!!hS&&hS<=87&&o===2&&v>=224e3&&d===0&&(i[t+3]=i[t+3]|128),{sampleRate:T,channelCount:E,frameLength:R,samplesPerFrame:_}}}function iD(i,t){return i[t]===255&&(i[t+1]&224)===224&&(i[t+1]&6)!==0}function lW(i,t){return t+1<i.length&&iD(i,t)}function XTe(i,t){return iD(i,t)&&4<=i.length-t}function uW(i,t){if(t+1<i.length&&iD(i,t)){const o=aW(i,t);let l=4;o!=null&&o.frameLength&&(l=o.frameLength);const c=t+l;return c===i.length||lW(i,c)}return!1}class QTe extends rD{constructor(t,r){super(),this.observer=void 0,this.config=void 0,this.observer=t,this.config=r}resetInitSegment(t,r,o,l){super.resetInitSegment(t,r,o,l),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:l,inputTimeScale:9e4,dropped:0}}static probe(t,r){if(!t)return!1;const o=jv(t,0);let l=(o==null?void 0:o.length)||0;if(uW(t,l))return!1;for(let c=t.length;l<c;l++)if(RTe(t,l))return r.log("ADTS sync word found !"),!0;return!1}canParse(t,r){return _Te(t,r)}appendFrame(t,r,o){tW(t,this.observer,r,o,t.manifestCodec);const l=rW(t,r,o,this.basePTS,this.frameIndex);if(l&&l.missing===0)return l}}const cW=(i,t)=>{let r=0,o=5;t+=o;const l=new Uint32Array(1),c=new Uint32Array(1),h=new Uint8Array(1);for(;o>0;){h[0]=i[t];const d=Math.min(o,8),m=8-d;c[0]=4278190080>>>24+m<<m,l[0]=(h[0]&c[0])>>m,r=r?r<<d|l[0]:l[0],t+=1,o-=d}return r};class JTe extends rD{constructor(t){super(),this.observer=void 0,this.observer=t}resetInitSegment(t,r,o,l){super.resetInitSegment(t,r,o,l),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:r,duration:l,inputTimeScale:9e4,dropped:0}}canParse(t,r){return r+64<t.length}appendFrame(t,r,o){const l=dW(t,r,o,this.basePTS,this.frameIndex);if(l!==-1)return{sample:t.samples[t.samples.length-1],length:l,missing:0}}static probe(t){if(!t)return!1;const r=jv(t,0);if(!r)return!1;const o=r.length;return t[o]===11&&t[o+1]===119&&nD(r)!==void 0&&cW(t,o)<16}}function dW(i,t,r,o,l){if(r+8>t.length||t[r]!==11||t[r+1]!==119)return-1;const c=t[r+4]>>6;if(c>=3)return-1;const d=[48e3,44100,32e3][c],m=t[r+4]&63,x=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][m*3+c]*2;if(r+x>t.length)return-1;const T=t[r+6]>>5;let E=0;T===2?E+=2:(T&1&&T!==1&&(E+=2),T&4&&(E+=2));const A=(t[r+6]<<8|t[r+7])>>12-E&1,_=[2,1,2,3,3,4,4,5][T]+A,R=t[r+5]>>3,P=t[r+5]&7,D=new Uint8Array([c<<6|R<<1|P>>2,(P&3)<<6|T<<3|A<<2|m>>4,m<<4&224]),N=1536/d*9e4,$=o+l*N,V=t.subarray(r,r+x);return i.config=D,i.channelCount=_,i.samplerate=d,i.samples.push({unit:V,pts:$}),x}class ZTe extends rD{resetInitSegment(t,r,o,l){super.resetInitSegment(t,r,o,l),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:l,inputTimeScale:9e4,dropped:0}}static probe(t){if(!t)return!1;const r=jv(t,0);let o=(r==null?void 0:r.length)||0;if(r&&t[o]===11&&t[o+1]===119&&nD(r)!==void 0&&cW(t,o)<=16)return!1;for(let l=t.length;o<l;o++)if(uW(t,o))return Rn.log("MPEG Audio sync word found !"),!0;return!1}canParse(t,r){return XTe(t,r)}appendFrame(t,r,o){if(this.basePTS!==null)return oW(t,r,o,this.basePTS,this.frameIndex)}}const eSe=/\/emsg[-/]ID3/i;class tSe{constructor(t,r){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=r}resetTimeStamp(){}resetInitSegment(t,r,o,l){const c=this.videoTrack=za("video",1),h=this.audioTrack=za("audio",1),d=this.txtTrack=za("text",1);if(this.id3Track=za("id3",1),this.timeOffset=0,!(t!=null&&t.byteLength))return;const m=Sz(t);if(m.video){const{id:v,timescale:x,codec:T,supplemental:E}=m.video;c.id=v,c.timescale=d.timescale=x,c.codec=T,c.supplemental=E}if(m.audio){const{id:v,timescale:x,codec:T}=m.audio;h.id=v,h.timescale=x,h.codec=T}d.id=yz.text,c.sampleDuration=0,c.duration=h.duration=l}resetContiguity(){this.remainderData=null}static probe(t){return J1e(t)}demux(t,r){this.timeOffset=r;let o=t;const l=this.videoTrack,c=this.txtTrack;if(this.config.progressive){this.remainderData&&(o=Bo(this.remainderData,t));const d=sxe(o);this.remainderData=d.remainder,l.samples=d.valid||new Uint8Array}else l.samples=o;const h=this.extractID3Track(l,r);return c.samples=f7(r,l),{videoTrack:l,audioTrack:this.audioTrack,id3Track:h,textTrack:this.txtTrack}}flush(){const t=this.timeOffset,r=this.videoTrack,o=this.txtTrack;r.samples=this.remainderData||new Uint8Array,this.remainderData=null;const l=this.extractID3Track(r,this.timeOffset);return o.samples=f7(t,r),{videoTrack:r,audioTrack:za(),id3Track:l,textTrack:za()}}extractID3Track(t,r){const o=this.id3Track;if(t.samples.length){const l=nn(t.samples,["emsg"]);l&&l.forEach(c=>{const h=axe(c);if(eSe.test(h.schemeIdUri)){const d=X7(h,r);let m=h.eventDuration===4294967295?Number.POSITIVE_INFINITY:h.eventDuration/h.timeScale;m<=.001&&(m=Number.POSITIVE_INFINITY);const v=h.payload;o.samples.push({data:v,len:v.byteLength,dts:d,pts:d,type:ao.emsg,duration:m})}else if(this.config.enableEmsgKLVMetadata&&h.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const d=X7(h,r);o.samples.push({data:h.payload,len:h.payload.byteLength,dts:d,pts:d,type:ao.misbklv,duration:Number.POSITIVE_INFINITY})}})}return o}demuxSampleAes(t,r,o){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function X7(i,t){return Ye(i.presentationTime)?i.presentationTime/i.timeScale:t+i.presentationTimeDelta/i.timeScale}class nSe{constructor(t,r,o){this.keyData=void 0,this.decrypter=void 0,this.keyData=o,this.decrypter=new WP(r,{removePKCS7Padding:!1})}decryptBuffer(t){return this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,Vc.cbc)}decryptAacSample(t,r,o){const l=t[r].unit;if(l.length<=16)return;const c=l.subarray(16,l.length-l.length%16),h=c.buffer.slice(c.byteOffset,c.byteOffset+c.length);this.decryptBuffer(h).then(d=>{const m=new Uint8Array(d);l.set(m,16),this.decrypter.isSync()||this.decryptAacSamples(t,r+1,o)}).catch(o)}decryptAacSamples(t,r,o){for(;;r++){if(r>=t.length){o();return}if(!(t[r].unit.length<32)&&(this.decryptAacSample(t,r,o),!this.decrypter.isSync()))return}}getAvcEncryptedData(t){const r=Math.floor((t.length-48)/160)*16+16,o=new Int8Array(r);let l=0;for(let c=32;c<t.length-16;c+=160,l+=16)o.set(t.subarray(c,c+16),l);return o}getAvcDecryptedUnit(t,r){const o=new Uint8Array(r);let l=0;for(let c=32;c<t.length-16;c+=160,l+=16)t.set(o.subarray(l,l+16),c);return t}decryptAvcSample(t,r,o,l,c){const h=bz(c.data),d=this.getAvcEncryptedData(h);this.decryptBuffer(d.buffer).then(m=>{c.data=this.getAvcDecryptedUnit(h,m),this.decrypter.isSync()||this.decryptAvcSamples(t,r,o+1,l)}).catch(l)}decryptAvcSamples(t,r,o,l){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;r++,o=0){if(r>=t.length){l();return}const c=t[r].units;for(;!(o>=c.length);o++){const h=c[o];if(!(h.data.length<=48||h.type!==1&&h.type!==5)&&(this.decryptAvcSample(t,r,o,l,h),!this.decrypter.isSync()))return}}}}class hW{constructor(){this.VideoSample=null}createVideoSample(t,r,o){return{key:t,frame:!1,pts:r,dts:o,units:[],length:0}}getLastNalUnit(t){var r;let o=this.VideoSample,l;if((!o||o.units.length===0)&&(o=t[t.length-1]),(r=o)!=null&&r.units){const c=o.units;l=c[c.length-1]}return l}pushAccessUnit(t,r){if(t.units.length&&t.frame){if(t.pts===void 0){const o=r.samples,l=o.length;if(l){const c=o[l-1];t.pts=c.pts,t.dts=c.dts}else{r.dropped++;return}}r.samples.push(t)}}parseNALu(t,r,o){const l=r.byteLength;let c=t.naluState||0;const h=c,d=[];let m=0,v,x,T,E=-1,A=0;for(c===-1&&(E=0,A=this.getNALuType(r,0),c=0,m=1);m<l;){if(v=r[m++],!c){c=v?0:1;continue}if(c===1){c=v?0:2;continue}if(!v)c=3;else if(v===1){if(x=m-c-1,E>=0){const k={data:r.subarray(E,x),type:A};d.push(k)}else{const k=this.getLastNalUnit(t.samples);k&&(h&&m<=4-h&&k.state&&(k.data=k.data.subarray(0,k.data.byteLength-h)),x>0&&(k.data=Bo(k.data,r.subarray(0,x)),k.state=0))}m<l?(T=this.getNALuType(r,m),E=m,A=T,c=0):c=-1}else c=0}if(E>=0&&c>=0){const k={data:r.subarray(E,l),type:A,state:c};d.push(k)}if(d.length===0){const k=this.getLastNalUnit(t.samples);k&&(k.data=Bo(k.data,r))}return t.naluState=c,d}}class Z0{constructor(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const t=this.data,r=this.bytesAvailable,o=t.byteLength-r,l=new Uint8Array(4),c=Math.min(4,r);if(c===0)throw new Error("no bytes available");l.set(t.subarray(o,o+c)),this.word=new DataView(l.buffer).getUint32(0),this.bitsAvailable=c*8,this.bytesAvailable-=c}skipBits(t){let r;t=Math.min(t,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,r=t>>3,t-=r<<3,this.bytesAvailable-=r,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)}readBits(t){let r=Math.min(this.bitsAvailable,t);const o=this.word>>>32-r;if(t>32&&Rn.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0)this.word<<=r;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return r=t-r,r>0&&this.bitsAvailable?o<<r|this.readBits(r):o}skipLZ(){let t;for(t=0;t<this.bitsAvailable;++t)if(this.word&2147483648>>>t)return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const t=this.skipLZ();return this.readBits(t+1)-1}readEG(){const t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class rSe extends hW{parsePES(t,r,o,l){const c=this.parseNALu(t,o.data,l);let h=this.VideoSample,d,m=!1;o.data=null,h&&c.length&&!t.audFound&&(this.pushAccessUnit(h,t),h=this.VideoSample=this.createVideoSample(!1,o.pts,o.dts)),c.forEach(v=>{var x,T;switch(v.type){case 1:{let _=!1;d=!0;const R=v.data;if(m&&R.length>4){const P=this.readSliceType(R);(P===2||P===4||P===7||P===9)&&(_=!0)}if(_){var E;(E=h)!=null&&E.frame&&!h.key&&(this.pushAccessUnit(h,t),h=this.VideoSample=null)}h||(h=this.VideoSample=this.createVideoSample(!0,o.pts,o.dts)),h.frame=!0,h.key=_;break}case 5:d=!0,(x=h)!=null&&x.frame&&!h.key&&(this.pushAccessUnit(h,t),h=this.VideoSample=null),h||(h=this.VideoSample=this.createVideoSample(!0,o.pts,o.dts)),h.key=!0,h.frame=!0;break;case 6:{d=!0,HP(v.data,1,o.pts,r.samples);break}case 7:{var A,k;d=!0,m=!0;const _=v.data,R=this.readSPS(_);if(!t.sps||t.width!==R.width||t.height!==R.height||((A=t.pixelRatio)==null?void 0:A[0])!==R.pixelRatio[0]||((k=t.pixelRatio)==null?void 0:k[1])!==R.pixelRatio[1]){t.width=R.width,t.height=R.height,t.pixelRatio=R.pixelRatio,t.sps=[_];const P=_.subarray(1,4);let D="avc1.";for(let N=0;N<3;N++){let $=P[N].toString(16);$.length<2&&($="0"+$),D+=$}t.codec=D}break}case 8:d=!0,t.pps=[v.data];break;case 9:d=!0,t.audFound=!0,(T=h)!=null&&T.frame&&(this.pushAccessUnit(h,t),h=null),h||(h=this.VideoSample=this.createVideoSample(!1,o.pts,o.dts));break;case 12:d=!0;break;default:d=!1;break}h&&d&&h.units.push(v)}),l&&h&&(this.pushAccessUnit(h,t),this.VideoSample=null)}getNALuType(t,r){return t[r]&31}readSliceType(t){const r=new Z0(t);return r.readUByte(),r.readUEG(),r.readUEG()}skipScalingList(t,r){let o=8,l=8,c;for(let h=0;h<t;h++)l!==0&&(c=r.readEG(),l=(o+c+256)%256),o=l===0?o:l}readSPS(t){const r=new Z0(t);let o=0,l=0,c=0,h=0,d,m,v;const x=r.readUByte.bind(r),T=r.readBits.bind(r),E=r.readUEG.bind(r),A=r.readBoolean.bind(r),k=r.skipBits.bind(r),_=r.skipEG.bind(r),R=r.skipUEG.bind(r),P=this.skipScalingList.bind(this);x();const D=x();if(T(5),k(3),x(),R(),D===100||D===110||D===122||D===244||D===44||D===83||D===86||D===118||D===128){const K=E();if(K===3&&k(1),R(),R(),k(1),A())for(m=K!==3?8:12,v=0;v<m;v++)A()&&(v<6?P(16,r):P(64,r))}R();const N=E();if(N===0)E();else if(N===1)for(k(1),_(),_(),d=E(),v=0;v<d;v++)_();R(),k(1);const $=E(),V=E(),W=T(1);W===0&&k(1),k(1),A()&&(o=E(),l=E(),c=E(),h=E());let C=[1,1];if(A()&&A())switch(x()){case 1:C=[1,1];break;case 2:C=[12,11];break;case 3:C=[10,11];break;case 4:C=[16,11];break;case 5:C=[40,33];break;case 6:C=[24,11];break;case 7:C=[20,11];break;case 8:C=[32,11];break;case 9:C=[80,33];break;case 10:C=[18,11];break;case 11:C=[15,11];break;case 12:C=[64,33];break;case 13:C=[160,99];break;case 14:C=[4,3];break;case 15:C=[3,2];break;case 16:C=[2,1];break;case 255:{C=[x()<<8|x(),x()<<8|x()];break}}return{width:Math.ceil(($+1)*16-o*2-l*2),height:(2-W)*(V+1)*16-(W?2:4)*(c+h),pixelRatio:C}}}class iSe extends hW{constructor(...t){super(...t),this.initVPS=null}parsePES(t,r,o,l){const c=this.parseNALu(t,o.data,l);let h=this.VideoSample,d,m=!1;o.data=null,h&&c.length&&!t.audFound&&(this.pushAccessUnit(h,t),h=this.VideoSample=this.createVideoSample(!1,o.pts,o.dts)),c.forEach(v=>{var x,T;switch(v.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:h||(h=this.VideoSample=this.createVideoSample(!1,o.pts,o.dts)),h.frame=!0,d=!0;break;case 16:case 17:case 18:case 21:if(d=!0,m){var E;(E=h)!=null&&E.frame&&!h.key&&(this.pushAccessUnit(h,t),h=this.VideoSample=null)}h||(h=this.VideoSample=this.createVideoSample(!0,o.pts,o.dts)),h.key=!0,h.frame=!0;break;case 19:case 20:d=!0,(x=h)!=null&&x.frame&&!h.key&&(this.pushAccessUnit(h,t),h=this.VideoSample=null),h||(h=this.VideoSample=this.createVideoSample(!0,o.pts,o.dts)),h.key=!0,h.frame=!0;break;case 39:d=!0,HP(v.data,2,o.pts,r.samples);break;case 32:d=!0,t.vps||(typeof t.params!="object"&&(t.params={}),t.params=Nn(t.params,this.readVPS(v.data)),this.initVPS=v.data),t.vps=[v.data];break;case 33:if(d=!0,m=!0,t.vps!==void 0&&t.vps[0]!==this.initVPS&&t.sps!==void 0&&!this.matchSPS(t.sps[0],v.data)&&(this.initVPS=t.vps[0],t.sps=t.pps=void 0),!t.sps){const A=this.readSPS(v.data);t.width=A.width,t.height=A.height,t.pixelRatio=A.pixelRatio,t.codec=A.codecString,t.sps=[],typeof t.params!="object"&&(t.params={});for(const k in A.params)t.params[k]=A.params[k]}this.pushParameterSet(t.sps,v.data,t.vps),h||(h=this.VideoSample=this.createVideoSample(!0,o.pts,o.dts)),h.key=!0;break;case 34:if(d=!0,typeof t.params=="object"){if(!t.pps){t.pps=[];const A=this.readPPS(v.data);for(const k in A)t.params[k]=A[k]}this.pushParameterSet(t.pps,v.data,t.vps)}break;case 35:d=!0,t.audFound=!0,(T=h)!=null&&T.frame&&(this.pushAccessUnit(h,t),h=null),h||(h=this.VideoSample=this.createVideoSample(!1,o.pts,o.dts));break;default:d=!1;break}h&&d&&h.units.push(v)}),l&&h&&(this.pushAccessUnit(h,t),this.VideoSample=null)}pushParameterSet(t,r,o){(o&&o[0]===this.initVPS||!o&&!t.length)&&t.push(r)}getNALuType(t,r){return(t[r]&126)>>>1}ebsp2rbsp(t){const r=new Uint8Array(t.byteLength);let o=0;for(let l=0;l<t.byteLength;l++)l>=2&&t[l]===3&&t[l-1]===0&&t[l-2]===0||(r[o]=t[l],o++);return new Uint8Array(r.buffer,0,o)}pushAccessUnit(t,r){super.pushAccessUnit(t,r),this.initVPS&&(this.initVPS=null)}readVPS(t){const r=new Z0(t);r.readUByte(),r.readUByte(),r.readBits(4),r.skipBits(2),r.readBits(6);const o=r.readBits(3),l=r.readBoolean();return{numTemporalLayers:o+1,temporalIdNested:l}}readSPS(t){const r=new Z0(this.ebsp2rbsp(t));r.readUByte(),r.readUByte(),r.readBits(4);const o=r.readBits(3);r.readBoolean();const l=r.readBits(2),c=r.readBoolean(),h=r.readBits(5),d=r.readUByte(),m=r.readUByte(),v=r.readUByte(),x=r.readUByte(),T=r.readUByte(),E=r.readUByte(),A=r.readUByte(),k=r.readUByte(),_=r.readUByte(),R=r.readUByte(),P=r.readUByte(),D=[],N=[];for(let xe=0;xe<o;xe++)D.push(r.readBoolean()),N.push(r.readBoolean());if(o>0)for(let xe=o;xe<8;xe++)r.readBits(2);for(let xe=0;xe<o;xe++)D[xe]&&(r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte()),N[xe]&&r.readUByte();r.readUEG();const $=r.readUEG();$==3&&r.skipBits(1);const V=r.readUEG(),W=r.readUEG(),C=r.readBoolean();let K=0,ee=0,Q=0,fe=0;C&&(K+=r.readUEG(),ee+=r.readUEG(),Q+=r.readUEG(),fe+=r.readUEG());const O=r.readUEG(),re=r.readUEG(),ce=r.readUEG(),Ae=r.readBoolean();for(let xe=Ae?0:o;xe<=o;xe++)r.skipUEG(),r.skipUEG(),r.skipUEG();if(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.readBoolean()&&r.readBoolean())for(let _e=0;_e<4;_e++)for(let _r=0;_r<(_e===3?2:6);_r++)if(!r.readBoolean())r.readUEG();else{const Oi=Math.min(64,1<<4+(_e<<1));_e>1&&r.readEG();for(let nr=0;nr<Oi;nr++)r.readEG()}r.readBoolean(),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.skipUEG(),r.skipUEG(),r.readBoolean());const le=r.readUEG();let pe=0;for(let xe=0;xe<le;xe++){let _e=!1;if(xe!==0&&(_e=r.readBoolean()),_e){xe===le&&r.readUEG(),r.readBoolean(),r.readUEG();let _r=0;for(let qr=0;qr<=pe;qr++){const Oi=r.readBoolean();let nr=!1;Oi||(nr=r.readBoolean()),(Oi||nr)&&_r++}pe=_r}else{const _r=r.readUEG(),qr=r.readUEG();pe=_r+qr;for(let Oi=0;Oi<_r;Oi++)r.readUEG(),r.readBoolean();for(let Oi=0;Oi<qr;Oi++)r.readUEG(),r.readBoolean()}}if(r.readBoolean()){const xe=r.readUEG();for(let _e=0;_e<xe;_e++){for(let _r=0;_r<ce+4;_r++)r.readBits(1);r.readBits(1)}}let Ce=0,ke=1,Ue=1,qe=!0,ut=1,X=0;r.readBoolean(),r.readBoolean();let Pe=!1;if(r.readBoolean()){if(r.readBoolean()){const $e=r.readUByte(),Kr=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Tu=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];$e>0&&$e<16?(ke=Kr[$e-1],Ue=Tu[$e-1]):$e===255&&(ke=r.readBits(16),Ue=r.readBits(16))}if(r.readBoolean()&&r.readBoolean(),r.readBoolean()&&(r.readBits(3),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.readUByte(),r.readUByte())),r.readBoolean()&&(r.readUEG(),r.readUEG()),r.readBoolean(),r.readBoolean(),r.readBoolean(),Pe=r.readBoolean(),Pe&&(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG()),r.readBoolean()&&(ut=r.readBits(32),X=r.readBits(32),r.readBoolean()&&r.readUEG(),r.readBoolean())){const Tu=r.readBoolean(),_m=r.readBoolean();let zr=!1;(Tu||_m)&&(zr=r.readBoolean(),zr&&(r.readUByte(),r.readBits(5),r.readBoolean(),r.readBits(5)),r.readBits(4),r.readBits(4),zr&&r.readBits(4),r.readBits(5),r.readBits(5),r.readBits(5));for(let xo=0;xo<=o;xo++){qe=r.readBoolean();const Su=qe||r.readBoolean();let Tt=!1;Su?r.readEG():Tt=r.readBoolean();const Ho=Tt?1:r.readUEG()+1;if(Tu)for(let dl=0;dl<Ho;dl++)r.readUEG(),r.readUEG(),zr&&(r.readUEG(),r.readUEG()),r.skipBits(1);if(_m)for(let dl=0;dl<Ho;dl++)r.readUEG(),r.readUEG(),zr&&(r.readUEG(),r.readUEG()),r.skipBits(1)}}r.readBoolean()&&(r.readBoolean(),r.readBoolean(),r.readBoolean(),Ce=r.readUEG())}let Mt=V,$t=W;if(C){let xe=1,_e=1;$===1?xe=_e=2:$==2&&(xe=2),Mt=V-xe*ee-xe*K,$t=W-_e*fe-_e*Q}const Ot=l?["A","B","C"][l]:"",on=d<<24|m<<16|v<<8|x;let gr=0;for(let xe=0;xe<32;xe++)gr=(gr|(on>>xe&1)<<31-xe)>>>0;let Mr=gr.toString(16);return h===1&&Mr==="2"&&(Mr="6"),{codecString:`hvc1.${Ot}${h}.${Mr}.${c?"H":"L"}${P}.B0`,params:{general_tier_flag:c,general_profile_idc:h,general_profile_space:l,general_profile_compatibility_flags:[d,m,v,x],general_constraint_indicator_flags:[T,E,A,k,_,R],general_level_idc:P,bit_depth:O+8,bit_depth_luma_minus8:O,bit_depth_chroma_minus8:re,min_spatial_segmentation_idc:Ce,chroma_format_idc:$,frame_rate:{fixed:qe,fps:X/ut}},width:Mt,height:$t,pixelRatio:[ke,Ue]}}readPPS(t){const r=new Z0(this.ebsp2rbsp(t));r.readUByte(),r.readUByte(),r.skipUEG(),r.skipUEG(),r.skipBits(2),r.skipBits(3),r.skipBits(2),r.skipUEG(),r.skipUEG(),r.skipEG(),r.skipBits(2),r.readBoolean()&&r.skipUEG(),r.skipEG(),r.skipEG(),r.skipBits(4);const l=r.readBoolean(),c=r.readBoolean();let h=1;return c&&l?h=0:c?h=3:l&&(h=2),{parallelismType:h}}matchSPS(t,r){return String.fromCharCode.apply(null,t).substr(3)===String.fromCharCode.apply(null,r).substr(3)}}const fi=188;class lc{constructor(t,r,o,l){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=t,this.config=r,this.typeSupported=o,this.logger=l,this.videoParser=null}static probe(t,r){const o=lc.syncOffset(t);return o>0&&r.warn(`MPEG2-TS detected but first sync word found @ offset ${o}`),o!==-1}static syncOffset(t){const r=t.length;let o=Math.min(fi*5,r-fi)+1,l=0;for(;l<o;){let c=!1,h=-1,d=0;for(let m=l;m<r;m+=fi)if(t[m]===71&&(r-m===fi||t[m+fi]===71)){if(d++,h===-1&&(h=m,h!==0&&(o=Math.min(h+fi*99,t.length-fi)+1)),c||(c=_L(t,m)===0),c&&d>1&&(h===0&&d>2||m+fi>o))return h}else{if(d)return-1;break}l++}return-1}static createTrack(t,r){return{container:t==="video"||t==="audio"?"video/mp2t":void 0,type:t,id:yz[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:t==="audio"?r:void 0}}resetInitSegment(t,r,o,l){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=lc.createTrack("video"),this._videoTrack.duration=l,this._audioTrack=lc.createTrack("audio",l),this._id3Track=lc.createTrack("id3"),this._txtTrack=lc.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=o}resetTimeStamp(){}resetContiguity(){const{_audioTrack:t,_videoTrack:r,_id3Track:o}=this;t&&(t.pesData=null),r&&(r.pesData=null),o&&(o.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(t,r,o=!1,l=!1){o||(this.sampleAes=null);let c;const h=this._videoTrack,d=this._audioTrack,m=this._id3Track,v=this._txtTrack;let x=h.pid,T=h.pesData,E=d.pid,A=m.pid,k=d.pesData,_=m.pesData,R=null,P=this.pmtParsed,D=this._pmtId,N=t.length;if(this.remainderData&&(t=Bo(this.remainderData,t),N=t.length,this.remainderData=null),N<fi&&!l)return this.remainderData=t,{audioTrack:d,videoTrack:h,id3Track:m,textTrack:v};const $=Math.max(0,lc.syncOffset(t));N-=(N-$)%fi,N<t.byteLength&&!l&&(this.remainderData=new Uint8Array(t.buffer,N,t.buffer.byteLength-N));let V=0;for(let C=$;C<N;C+=fi)if(t[C]===71){const K=!!(t[C+1]&64),ee=_L(t,C),Q=(t[C+3]&48)>>4;let fe;if(Q>1){if(fe=C+5+t[C+4],fe===C+fi)continue}else fe=C+4;switch(ee){case x:K&&(T&&(c=ip(T,this.logger))&&(this.readyVideoParser(h.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(h,v,c,!1)),T={data:[],size:0}),T&&(T.data.push(t.subarray(fe,C+fi)),T.size+=C+fi-fe);break;case E:if(K){if(k&&(c=ip(k,this.logger)))switch(d.segmentCodec){case"aac":this.parseAACPES(d,c);break;case"mp3":this.parseMPEGPES(d,c);break;case"ac3":this.parseAC3PES(d,c);break}k={data:[],size:0}}k&&(k.data.push(t.subarray(fe,C+fi)),k.size+=C+fi-fe);break;case A:K&&(_&&(c=ip(_,this.logger))&&this.parseID3PES(m,c),_={data:[],size:0}),_&&(_.data.push(t.subarray(fe,C+fi)),_.size+=C+fi-fe);break;case 0:K&&(fe+=t[fe]+1),D=this._pmtId=sSe(t,fe);break;case D:{K&&(fe+=t[fe]+1);const O=oSe(t,fe,this.typeSupported,o,this.observer,this.logger);x=O.videoPid,x>0&&(h.pid=x,h.segmentCodec=O.segmentVideoCodec),E=O.audioPid,E>0&&(d.pid=E,d.segmentCodec=O.segmentAudioCodec),A=O.id3Pid,A>0&&(m.pid=A),R!==null&&!P&&(this.logger.warn(`MPEG-TS PMT found at ${C} after unknown PID '${R}'. Backtracking to sync byte @${$} to parse all TS packets.`),R=null,C=$-188),P=this.pmtParsed=!0;break}case 17:case 8191:break;default:R=ee;break}}else V++;V>0&&RL(this.observer,new Error(`Found ${V} TS packet/s that do not start with 0x47`),void 0,this.logger),h.pesData=T,d.pesData=k,m.pesData=_;const W={audioTrack:d,videoTrack:h,id3Track:m,textTrack:v};return l&&this.extractRemainingSamples(W),W}flush(){const{remainderData:t}=this;this.remainderData=null;let r;return t?r=this.demux(t,-1,!1,!0):r={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(r),this.sampleAes?this.decrypt(r,this.sampleAes):r}extractRemainingSamples(t){const{audioTrack:r,videoTrack:o,id3Track:l,textTrack:c}=t,h=o.pesData,d=r.pesData,m=l.pesData;let v;if(h&&(v=ip(h,this.logger))?(this.readyVideoParser(o.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(o,c,v,!0),o.pesData=null)):o.pesData=h,d&&(v=ip(d,this.logger))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,v);break;case"mp3":this.parseMPEGPES(r,v);break;case"ac3":this.parseAC3PES(r,v);break}r.pesData=null}else d!=null&&d.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=d;m&&(v=ip(m,this.logger))?(this.parseID3PES(l,v),l.pesData=null):l.pesData=m}demuxSampleAes(t,r,o){const l=this.demux(t,o,!0,!this.config.progressive),c=this.sampleAes=new nSe(this.observer,this.config,r);return this.decrypt(l,c)}readyVideoParser(t){this.videoParser===null&&(t==="avc"?this.videoParser=new rSe:t==="hevc"&&(this.videoParser=new iSe))}decrypt(t,r){return new Promise(o=>{const{audioTrack:l,videoTrack:c}=t;l.samples&&l.segmentCodec==="aac"?r.decryptAacSamples(l.samples,0,()=>{c.samples?r.decryptAvcSamples(c.samples,0,0,()=>{o(t)}):o(t)}):c.samples&&r.decryptAvcSamples(c.samples,0,0,()=>{o(t)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(t,r){let o=0;const l=this.aacOverFlow;let c=r.data;if(l){this.aacOverFlow=null;const T=l.missing,E=l.sample.unit.byteLength;if(T===-1)c=Bo(l.sample.unit,c);else{const A=E-T;l.sample.unit.set(c.subarray(0,T),A),t.samples.push(l.sample),o=l.missing}}let h,d;for(h=o,d=c.length;h<d-1&&!Gw(c,h);h++);if(h!==o){let T;const E=h<d-1;if(E?T=`AAC PES did not start with ADTS header,offset:${h}`:T="No ADTS header found in AAC PES",RL(this.observer,new Error(T),E,this.logger),!E)return}tW(t,this.observer,c,h,this.audioCodec);let m;if(r.pts!==void 0)m=r.pts;else if(l){const T=nW(t.samplerate);m=l.sample.pts+T}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let v=0,x;for(;h<d;)if(x=rW(t,c,h,m,v),h+=x.length,x.missing){this.aacOverFlow=x;break}else for(v++;h<d-1&&!Gw(c,h);h++);}parseMPEGPES(t,r){const o=r.data,l=o.length;let c=0,h=0;const d=r.pts;if(d===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;h<l;)if(lW(o,h)){const m=oW(t,o,h,d,c);if(m)h+=m.length,c++;else break}else h++}parseAC3PES(t,r){{const o=r.data,l=r.pts;if(l===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const c=o.length;let h=0,d=0,m;for(;d<c&&(m=dW(t,o,d,l,h++))>0;)d+=m}}parseID3PES(t,r){if(r.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const o=Nn({},r,{type:this._videoTrack?ao.emsg:ao.audioId3,duration:Number.POSITIVE_INFINITY});t.samples.push(o)}}function _L(i,t){return((i[t+1]&31)<<8)+i[t+2]}function sSe(i,t){return(i[t+10]&31)<<8|i[t+11]}function oSe(i,t,r,o,l,c){const h={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},d=(i[t+1]&15)<<8|i[t+2],m=t+3+d-4,v=(i[t+10]&15)<<8|i[t+11];for(t+=12+v;t<m;){const x=_L(i,t),T=(i[t+3]&15)<<8|i[t+4];switch(i[t]){case 207:if(!o){y_("ADTS AAC",c);break}case 15:h.audioPid===-1&&(h.audioPid=x);break;case 21:h.id3Pid===-1&&(h.id3Pid=x);break;case 219:if(!o){y_("H.264",c);break}case 27:h.videoPid===-1&&(h.videoPid=x);break;case 3:case 4:!r.mpeg&&!r.mp3?c.log("MPEG audio found, not supported in this browser"):h.audioPid===-1&&(h.audioPid=x,h.segmentAudioCodec="mp3");break;case 193:if(!o){y_("AC-3",c);break}case 129:r.ac3?h.audioPid===-1&&(h.audioPid=x,h.segmentAudioCodec="ac3"):c.log("AC-3 audio found, not supported in this browser");break;case 6:if(h.audioPid===-1&&T>0){let E=t+5,A=T;for(;A>2;){switch(i[E]){case 106:r.ac3!==!0?c.log("AC-3 audio found, not supported in this browser for now"):(h.audioPid=x,h.segmentAudioCodec="ac3");break}const _=i[E+1]+2;E+=_,A-=_}}break;case 194:case 135:return RL(l,new Error("Unsupported EC-3 in M2TS found"),void 0,c),h;case 36:h.videoPid===-1&&(h.videoPid=x,h.segmentVideoCodec="hevc",c.log("HEVC in M2TS found"));break}t+=T+5}return h}function RL(i,t,r,o){o.warn(`parsing error: ${t.message}`),i.emit(H.ERROR,H.ERROR,{type:pt.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:t,reason:t.message})}function y_(i,t){t.log(`${i} with AES-128-CBC encryption found in unencrypted stream`)}function ip(i,t){let r=0,o,l,c,h,d;const m=i.data;if(!i||i.size===0)return null;for(;m[0].length<19&&m.length>1;)m[0]=Bo(m[0],m[1]),m.splice(1,1);if(o=m[0],(o[0]<<16)+(o[1]<<8)+o[2]===1){if(l=(o[4]<<8)+o[5],l&&l>i.size-6)return null;const x=o[7];x&192&&(h=(o[9]&14)*536870912+(o[10]&255)*4194304+(o[11]&254)*16384+(o[12]&255)*128+(o[13]&254)/2,x&64?(d=(o[14]&14)*536870912+(o[15]&255)*4194304+(o[16]&254)*16384+(o[17]&255)*128+(o[18]&254)/2,h-d>60*9e4&&(t.warn(`${Math.round((h-d)/9e4)}s delta between PTS and DTS, align them`),h=d)):d=h),c=o[8];let T=c+9;if(i.size<=T)return null;i.size-=T;const E=new Uint8Array(i.size);for(let A=0,k=m.length;A<k;A++){o=m[A];let _=o.byteLength;if(T)if(T>_){T-=_;continue}else o=o.subarray(T),_-=T,T=0;E.set(o,r),r+=_}return l&&(l-=c+3),{data:E,pts:h,dts:d,len:l}}return null}class aSe{static getSilentFrame(t,r){switch(t){case"mp4a.40.2":if(r===1)return new Uint8Array([0,200,0,128,35,128]);if(r===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(r===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(r===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(r===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(r===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(r===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ju=Math.pow(2,32)-1;class Se{static init(){Se.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let t;for(t in Se.types)Se.types.hasOwnProperty(t)&&(Se.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);const r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),o=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Se.HDLR_TYPES={video:r,audio:o};const l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),c=new Uint8Array([0,0,0,0,0,0,0,0]);Se.STTS=Se.STSC=Se.STCO=c,Se.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Se.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Se.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Se.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const h=new Uint8Array([105,115,111,109]),d=new Uint8Array([97,118,99,49]),m=new Uint8Array([0,0,0,1]);Se.FTYP=Se.box(Se.types.ftyp,h,m,h,d),Se.DINF=Se.box(Se.types.dinf,Se.box(Se.types.dref,l))}static box(t,...r){let o=8,l=r.length;const c=l;for(;l--;)o+=r[l].byteLength;const h=new Uint8Array(o);for(h[0]=o>>24&255,h[1]=o>>16&255,h[2]=o>>8&255,h[3]=o&255,h.set(t,4),l=0,o=8;l<c;l++)h.set(r[l],o),o+=r[l].byteLength;return h}static hdlr(t){return Se.box(Se.types.hdlr,Se.HDLR_TYPES[t])}static mdat(t){return Se.box(Se.types.mdat,t)}static mdhd(t,r){r*=t;const o=Math.floor(r/(Ju+1)),l=Math.floor(r%(Ju+1));return Se.box(Se.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255,85,196,0,0]))}static mdia(t){return Se.box(Se.types.mdia,Se.mdhd(t.timescale||0,t.duration||0),Se.hdlr(t.type),Se.minf(t))}static mfhd(t){return Se.box(Se.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]))}static minf(t){return t.type==="audio"?Se.box(Se.types.minf,Se.box(Se.types.smhd,Se.SMHD),Se.DINF,Se.stbl(t)):Se.box(Se.types.minf,Se.box(Se.types.vmhd,Se.VMHD),Se.DINF,Se.stbl(t))}static moof(t,r,o){return Se.box(Se.types.moof,Se.mfhd(t),Se.traf(o,r))}static moov(t){let r=t.length;const o=[];for(;r--;)o[r]=Se.trak(t[r]);return Se.box.apply(null,[Se.types.moov,Se.mvhd(t[0].timescale||0,t[0].duration||0)].concat(o).concat(Se.mvex(t)))}static mvex(t){let r=t.length;const o=[];for(;r--;)o[r]=Se.trex(t[r]);return Se.box.apply(null,[Se.types.mvex,...o])}static mvhd(t,r){r*=t;const o=Math.floor(r/(Ju+1)),l=Math.floor(r%(Ju+1)),c=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Se.box(Se.types.mvhd,c)}static sdtp(t){const r=t.samples||[],o=new Uint8Array(4+r.length);let l,c;for(l=0;l<r.length;l++)c=r[l].flags,o[l+4]=c.dependsOn<<4|c.isDependedOn<<2|c.hasRedundancy;return Se.box(Se.types.sdtp,o)}static stbl(t){return Se.box(Se.types.stbl,Se.stsd(t),Se.box(Se.types.stts,Se.STTS),Se.box(Se.types.stsc,Se.STSC),Se.box(Se.types.stsz,Se.STSZ),Se.box(Se.types.stco,Se.STCO))}static avc1(t){let r=[],o=[],l,c,h;for(l=0;l<t.sps.length;l++)c=t.sps[l],h=c.byteLength,r.push(h>>>8&255),r.push(h&255),r=r.concat(Array.prototype.slice.call(c));for(l=0;l<t.pps.length;l++)c=t.pps[l],h=c.byteLength,o.push(h>>>8&255),o.push(h&255),o=o.concat(Array.prototype.slice.call(c));const d=Se.box(Se.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|t.sps.length].concat(r).concat([t.pps.length]).concat(o))),m=t.width,v=t.height,x=t.pixelRatio[0],T=t.pixelRatio[1];return Se.box(Se.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,m>>8&255,m&255,v>>8&255,v&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d,Se.box(Se.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Se.box(Se.types.pasp,new Uint8Array([x>>24,x>>16&255,x>>8&255,x&255,T>>24,T>>16&255,T>>8&255,T&255])))}static esds(t){const r=t.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...r,6,1,2])}static audioStsd(t){const r=t.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount||0,0,16,0,0,0,0,r>>8&255,r&255,0,0])}static mp4a(t){return Se.box(Se.types.mp4a,Se.audioStsd(t),Se.box(Se.types.esds,Se.esds(t)))}static mp3(t){return Se.box(Se.types[".mp3"],Se.audioStsd(t))}static ac3(t){return Se.box(Se.types["ac-3"],Se.audioStsd(t),Se.box(Se.types.dac3,t.config))}static stsd(t){const{segmentCodec:r}=t;if(t.type==="audio"){if(r==="aac")return Se.box(Se.types.stsd,Se.STSD,Se.mp4a(t));if(r==="ac3"&&t.config)return Se.box(Se.types.stsd,Se.STSD,Se.ac3(t));if(r==="mp3"&&t.codec==="mp3")return Se.box(Se.types.stsd,Se.STSD,Se.mp3(t))}else if(t.pps&&t.sps){if(r==="avc")return Se.box(Se.types.stsd,Se.STSD,Se.avc1(t));if(r==="hevc"&&t.vps)return Se.box(Se.types.stsd,Se.STSD,Se.hvc1(t))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${t.type} segment codec (${r}/${t.codec})`)}static tkhd(t){const r=t.id,o=(t.duration||0)*(t.timescale||0),l=t.width||0,c=t.height||0,h=Math.floor(o/(Ju+1)),d=Math.floor(o%(Ju+1));return Se.box(Se.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,h>>24,h>>16&255,h>>8&255,h&255,d>>24,d>>16&255,d>>8&255,d&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,l>>8&255,l&255,0,0,c>>8&255,c&255,0,0]))}static traf(t,r){const o=Se.sdtp(t),l=t.id,c=Math.floor(r/(Ju+1)),h=Math.floor(r%(Ju+1));return Se.box(Se.types.traf,Se.box(Se.types.tfhd,new Uint8Array([0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255])),Se.box(Se.types.tfdt,new Uint8Array([1,0,0,0,c>>24,c>>16&255,c>>8&255,c&255,h>>24,h>>16&255,h>>8&255,h&255])),Se.trun(t,o.length+16+20+8+16+8+8),o)}static trak(t){return t.duration=t.duration||4294967295,Se.box(Se.types.trak,Se.tkhd(t),Se.mdia(t))}static trex(t){const r=t.id;return Se.box(Se.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(t,r){const o=t.samples||[],l=o.length,c=12+16*l,h=new Uint8Array(c);let d,m,v,x,T,E;for(r+=8+c,h.set([t.type==="video"?1:0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,l&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255],0),d=0;d<l;d++)m=o[d],v=m.duration,x=m.size,T=m.flags,E=m.cts,h.set([v>>>24&255,v>>>16&255,v>>>8&255,v&255,x>>>24&255,x>>>16&255,x>>>8&255,x&255,T.isLeading<<2|T.dependsOn,T.isDependedOn<<6|T.hasRedundancy<<4|T.paddingValue<<1|T.isNonSync,T.degradPrio&61440,T.degradPrio&15,E>>>24&255,E>>>16&255,E>>>8&255,E&255],12+16*d);return Se.box(Se.types.trun,h)}static initSegment(t){Se.types||Se.init();const r=Se.moov(t);return Bo(Se.FTYP,r)}static hvc1(t){const r=t.params,o=[t.vps,t.sps,t.pps],l=4,c=new Uint8Array([1,r.general_profile_space<<6|(r.general_tier_flag?32:0)|r.general_profile_idc,r.general_profile_compatibility_flags[0],r.general_profile_compatibility_flags[1],r.general_profile_compatibility_flags[2],r.general_profile_compatibility_flags[3],r.general_constraint_indicator_flags[0],r.general_constraint_indicator_flags[1],r.general_constraint_indicator_flags[2],r.general_constraint_indicator_flags[3],r.general_constraint_indicator_flags[4],r.general_constraint_indicator_flags[5],r.general_level_idc,240|r.min_spatial_segmentation_idc>>8,255&r.min_spatial_segmentation_idc,252|r.parallelismType,252|r.chroma_format_idc,248|r.bit_depth_luma_minus8,248|r.bit_depth_chroma_minus8,0,parseInt(r.frame_rate.fps),l-1|r.temporal_id_nested<<2|r.num_temporal_layers<<3|(r.frame_rate.fixed?64:0),o.length]);let h=c.length;for(let k=0;k<o.length;k+=1){h+=3;for(let _=0;_<o[k].length;_+=1)h+=2+o[k][_].length}const d=new Uint8Array(h);d.set(c,0),h=c.length;const m=o.length-1;for(let k=0;k<o.length;k+=1){d.set(new Uint8Array([32+k|(k===m?128:0),0,o[k].length]),h),h+=3;for(let _=0;_<o[k].length;_+=1)d.set(new Uint8Array([o[k][_].length>>8,o[k][_].length&255]),h),h+=2,d.set(o[k][_],h),h+=o[k][_].length}const v=Se.box(Se.types.hvcC,d),x=t.width,T=t.height,E=t.pixelRatio[0],A=t.pixelRatio[1];return Se.box(Se.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,x>>8&255,x&255,T>>8&255,T&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),v,Se.box(Se.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Se.box(Se.types.pasp,new Uint8Array([E>>24,E>>16&255,E>>8&255,E&255,A>>24,A>>16&255,A>>8&255,A&255])))}}Se.types=void 0;Se.HDLR_TYPES=void 0;Se.STTS=void 0;Se.STSC=void 0;Se.STCO=void 0;Se.STSZ=void 0;Se.VMHD=void 0;Se.SMHD=void 0;Se.STSD=void 0;Se.FTYP=void 0;Se.DINF=void 0;const fW=9e4;function sD(i,t,r=1,o=!1){const l=i*t*r;return o?Math.round(l):l}function lSe(i,t,r=1,o=!1){return sD(i,t,1/r,o)}function _0(i,t=!1){return sD(i,1e3,1/fW,t)}function uSe(i,t=1){return sD(i,fW,1/t)}function Q7(i){const{baseTime:t,timescale:r,trackId:o}=i;return`${t/r} (${t}/${r}) trackId: ${o}`}const cSe=10*1e3,dSe=1024,hSe=1152,fSe=1536;let sp=null,x_=null;function J7(i,t,r,o){return{duration:t,size:r,cts:o,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:i?2:1,isNonSync:i?0:1}}}class GS extends Vo{constructor(t,r,o,l){if(super("mp4-remuxer",l),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=t,this.config=r,this.typeSupported=o,this.ISGenerated=!1,sp===null){const h=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);sp=h?parseInt(h[1]):0}if(x_===null){const c=navigator.userAgent.match(/Safari\/(\d+)/i);x_=c?parseInt(c[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(t){const r=this._initPTS;(!r||!t||t.trackId!==r.trackId||t.baseTime!==r.baseTime||t.timescale!==r.timescale)&&this.log(`Reset initPTS: ${r&&Q7(r)} > ${t&&Q7(t)}`),this._initPTS=this._initDTS=t}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(t){let r=!1;const o=t[0].pts,l=t.reduce((c,h)=>{let d=h.pts,m=d-c;return m<-4294967296&&(r=!0,d=ro(d,o),m=d-c),m>0?c:d},o);return r&&this.debug("PTS rollover detected"),l}remux(t,r,o,l,c,h,d,m){let v,x,T,E,A,k,_=c,R=c;const P=t.pid>-1,D=r.pid>-1,N=r.samples.length,$=t.samples.length>0,V=d&&N>0||N>1;if((!P||$)&&(!D||V)||this.ISGenerated||d){if(this.ISGenerated){var C,K,ee,Q;const ce=this.videoTrackConfig;(ce&&(r.width!==ce.width||r.height!==ce.height||((C=r.pixelRatio)==null?void 0:C[0])!==((K=ce.pixelRatio)==null?void 0:K[0])||((ee=r.pixelRatio)==null?void 0:ee[1])!==((Q=ce.pixelRatio)==null?void 0:Q[1]))||!ce&&V||this.nextAudioTs===null&&$)&&this.resetInitSegment()}this.ISGenerated||(T=this.generateIS(t,r,c,h));const fe=this.isVideoContiguous;let O=-1,re;if(V&&(O=pSe(r.samples),!fe&&this.config.forceKeyFrameOnDiscontinuity))if(k=!0,O>0){this.warn(`Dropped ${O} out of ${N} video samples due to a missing keyframe`);const ce=this.getVideoStartPts(r.samples);r.samples=r.samples.slice(O),r.dropped+=O,R+=(r.samples[0].pts-ce)/r.inputTimeScale,re=R}else O===-1&&(this.warn(`No keyframe found out of ${N} video samples`),k=!1);if(this.ISGenerated){if($&&V){const ce=this.getVideoStartPts(r.samples),se=(ro(t.samples[0].pts,ce)-ce)/r.inputTimeScale;_+=Math.max(0,se),R+=Math.max(0,-se)}if($){if(t.samplerate||(this.warn("regenerate InitSegment as audio detected"),T=this.generateIS(t,r,c,h)),x=this.remuxAudio(t,_,this.isAudioContiguous,h,D||V||m===lt.AUDIO?R:void 0),V){const ce=x?x.endPTS-x.startPTS:0;r.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),T=this.generateIS(t,r,c,h)),v=this.remuxVideo(r,R,fe,ce)}}else V&&(v=this.remuxVideo(r,R,fe,0));v&&(v.firstKeyFrame=O,v.independent=O!==-1,v.firstKeyFramePTS=re)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(o.samples.length&&(A=pW(o,c,this._initPTS,this._initDTS)),l.samples.length&&(E=mW(l,c,this._initPTS))),{audio:x,video:v,initSegment:T,independent:k,text:E,id3:A}}computeInitPts(t,r,o,l){const c=Math.round(o*r);let h=ro(t,c);if(h<c+r)for(this.log(`Adjusting PTS for rollover in timeline near ${(c-h)/r} ${l}`);h<c+r;)h+=8589934592;return h-c}generateIS(t,r,o,l){const c=t.samples,h=r.samples,d=this.typeSupported,m={},v=this._initPTS;let x=!v||l,T="audio/mp4",E,A,k,_=-1;if(x&&(E=A=1/0),t.config&&c.length){switch(t.timescale=t.samplerate,t.segmentCodec){case"mp3":d.mpeg?(T="audio/mpeg",t.codec=""):d.mp3&&(t.codec="mp3");break;case"ac3":t.codec="ac-3";break}m.audio={id:"audio",container:T,codec:t.codec,initSegment:t.segmentCodec==="mp3"&&d.mpeg?new Uint8Array(0):Se.initSegment([t]),metadata:{channelCount:t.channelCount}},x&&(_=t.id,k=t.inputTimeScale,!v||k!==v.timescale?E=A=this.computeInitPts(c[0].pts,k,o,"audio"):x=!1)}if(r.sps&&r.pps&&h.length){if(r.timescale=r.inputTimeScale,m.video={id:"main",container:"video/mp4",codec:r.codec,initSegment:Se.initSegment([r]),metadata:{width:r.width,height:r.height}},x)if(_=r.id,k=r.inputTimeScale,!v||k!==v.timescale){const R=this.getVideoStartPts(h),P=ro(h[0].dts,R),D=this.computeInitPts(P,k,o,"video"),N=this.computeInitPts(R,k,o,"video");A=Math.min(A,D),E=Math.min(E,N)}else x=!1;this.videoTrackConfig={width:r.width,height:r.height,pixelRatio:r.pixelRatio}}if(Object.keys(m).length)return this.ISGenerated=!0,x?(v&&this.warn(`Timestamps at playlist time: ${l?"":"~"}${o} ${E/k} != initPTS: ${v.baseTime/v.timescale} (${v.baseTime}/${v.timescale}) trackId: ${v.trackId}`),this.log(`Found initPTS at playlist time: ${o} offset: ${E/k} (${E}/${k}) trackId: ${_}`),this._initPTS={baseTime:E,timescale:k,trackId:_},this._initDTS={baseTime:A,timescale:k,trackId:_}):E=k=void 0,{tracks:m,initPTS:E,timescale:k,trackId:_}}remuxVideo(t,r,o,l){const c=t.inputTimeScale,h=t.samples,d=[],m=h.length,v=this._initPTS,x=v.baseTime*c/v.timescale;let T=this.nextVideoTs,E=8,A=this.videoSampleDuration,k,_,R=Number.POSITIVE_INFINITY,P=Number.NEGATIVE_INFINITY,D=!1;if(!o||T===null){const Ce=x+r*c,ke=h[0].pts-ro(h[0].dts,h[0].pts);sp&&T!==null&&Math.abs(Ce-ke-(T+x))<15e3?o=!0:T=Ce-ke-x}const N=T+x;for(let Ce=0;Ce<m;Ce++){const ke=h[Ce];ke.pts=ro(ke.pts,N),ke.dts=ro(ke.dts,N),ke.dts<h[Ce>0?Ce-1:Ce].dts&&(D=!0)}D&&h.sort(function(Ce,ke){const Ue=Ce.dts-ke.dts,qe=Ce.pts-ke.pts;return Ue||qe}),k=h[0].dts,_=h[h.length-1].dts;const $=_-k,V=$?Math.round($/(m-1)):A||t.inputTimeScale/30;if(o){const Ce=k-N,ke=Ce>V,Ue=Ce<-1;if((ke||Ue)&&(ke?this.warn(`${(t.segmentCodec||"").toUpperCase()}: ${_0(Ce,!0)} ms (${Ce}dts) hole between fragments detected at ${r.toFixed(3)}`):this.warn(`${(t.segmentCodec||"").toUpperCase()}: ${_0(-Ce,!0)} ms (${Ce}dts) overlapping between fragments detected at ${r.toFixed(3)}`),!Ue||N>=h[0].pts||sp)){k=N;const qe=h[0].pts-Ce;if(ke)h[0].dts=k,h[0].pts=qe;else{let ut=!0;for(let X=0;X<h.length&&!(h[X].dts>qe&&ut);X++){const Pe=h[X].pts;if(h[X].dts-=Ce,h[X].pts-=Ce,X<h.length-1){const Rt=h[X+1].pts,Mt=h[X].pts,$t=Rt<=Mt,Ot=Rt<=Pe;ut=$t==Ot}}}this.log(`Video: Initial PTS/DTS adjusted: ${_0(qe,!0)}/${_0(k,!0)}, delta: ${_0(Ce,!0)} ms`)}}k=Math.max(0,k);let W=0,C=0,K=k;for(let Ce=0;Ce<m;Ce++){const ke=h[Ce],Ue=ke.units,qe=Ue.length;let ut=0;for(let X=0;X<qe;X++)ut+=Ue[X].data.length;C+=ut,W+=qe,ke.length=ut,ke.dts<K?(ke.dts=K,K+=V/4|0||1):K=ke.dts,R=Math.min(ke.pts,R),P=Math.max(ke.pts,P)}_=h[m-1].dts;const ee=C+4*W+8;let Q;try{Q=new Uint8Array(ee)}catch(Ce){this.observer.emit(H.ERROR,H.ERROR,{type:pt.MUX_ERROR,details:we.REMUX_ALLOC_ERROR,fatal:!1,error:Ce,bytes:ee,reason:`fail allocating video mdat ${ee}`});return}const fe=new DataView(Q.buffer);fe.setUint32(0,ee),Q.set(Se.types.mdat,4);let O=!1,re=Number.POSITIVE_INFINITY,ce=Number.POSITIVE_INFINITY,Ae=Number.NEGATIVE_INFINITY,se=Number.NEGATIVE_INFINITY;for(let Ce=0;Ce<m;Ce++){const ke=h[Ce],Ue=ke.units;let qe=0;for(let Pe=0,Rt=Ue.length;Pe<Rt;Pe++){const Mt=Ue[Pe],$t=Mt.data,Ot=Mt.data.byteLength;fe.setUint32(E,Ot),E+=4,Q.set($t,E),E+=Ot,qe+=4+Ot}let ut;if(Ce<m-1)A=h[Ce+1].dts-ke.dts,ut=h[Ce+1].pts-ke.pts;else{const Pe=this.config,Rt=Ce>0?ke.dts-h[Ce-1].dts:V;if(ut=Ce>0?ke.pts-h[Ce-1].pts:V,Pe.stretchShortVideoTrack&&this.nextAudioTs!==null){const Mt=Math.floor(Pe.maxBufferHole*c),$t=(l?R+l*c:this.nextAudioTs+x)-ke.pts;$t>Mt?(A=$t-Rt,A<0?A=Rt:O=!0,this.log(`It is approximately ${$t/90} ms to the next segment; using duration ${A/90} ms for the last video frame.`)):A=Rt}else A=Rt}const X=Math.round(ke.pts-ke.dts);re=Math.min(re,A),Ae=Math.max(Ae,A),ce=Math.min(ce,ut),se=Math.max(se,ut),d.push(J7(ke.key,A,qe,X))}if(d.length){if(sp){if(sp<70){const Ce=d[0].flags;Ce.dependsOn=2,Ce.isNonSync=0}}else if(x_&&se-ce<Ae-re&&V/Ae<.025&&d[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Ce=k;for(let ke=0,Ue=d.length;ke<Ue;ke++){const qe=Ce+d[ke].duration,ut=Ce+d[ke].cts;if(ke<Ue-1){const X=qe+d[ke+1].cts;d[ke].duration=X-ut}else d[ke].duration=ke?d[ke-1].duration:V;d[ke].cts=0,Ce=qe}}}A=O||!A?V:A;const ue=_+A;this.nextVideoTs=T=ue-x,this.videoSampleDuration=A,this.isVideoContiguous=!0;const be={data1:Se.moof(t.sequenceNumber++,k,Nn(t,{samples:d})),data2:Q,startPTS:(R-x)/c,endPTS:(P+A-x)/c,startDTS:(k-x)/c,endDTS:T/c,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:t.dropped};return t.samples=[],t.dropped=0,be}getSamplesPerFrame(t){switch(t.segmentCodec){case"mp3":return hSe;case"ac3":return fSe;default:return dSe}}remuxAudio(t,r,o,l,c){const h=t.inputTimeScale,d=t.samplerate?t.samplerate:h,m=h/d,v=this.getSamplesPerFrame(t),x=v*m,T=this._initPTS,E=t.segmentCodec==="mp3"&&this.typeSupported.mpeg,A=[],k=c!==void 0;let _=t.samples,R=E?0:8,P=this.nextAudioTs||-1;const D=T.baseTime*h/T.timescale,N=D+r*h;if(this.isAudioContiguous=o=o||_.length&&P>0&&(l&&Math.abs(N-(P+D))<9e3||Math.abs(ro(_[0].pts,N)-(P+D))<20*x),_.forEach(function(se){se.pts=ro(se.pts,N)}),!o||P<0){const se=_.length;if(_=_.filter(ue=>ue.pts>=0),se!==_.length&&this.warn(`Removed ${_.length-se} of ${se} samples (initPTS ${D} / ${h})`),!_.length)return;c===0?P=0:l&&!k?P=Math.max(0,N-D):P=_[0].pts-D}if(t.segmentCodec==="aac"){const se=this.config.maxAudioFramesDrift;for(let ue=0,le=P+D;ue<_.length;ue++){const pe=_[ue],be=pe.pts,Ce=be-le,ke=Math.abs(1e3*Ce/h);if(Ce<=-se*x&&k)ue===0&&(this.warn(`Audio frame @ ${(be/h).toFixed(3)}s overlaps marker by ${Math.round(1e3*Ce/h)} ms.`),this.nextAudioTs=P=be-D,le=be);else if(Ce>=se*x&&ke<cSe&&k){let Ue=Math.round(Ce/x);for(le=be-Ue*x;le<0&&Ue&&x;)Ue--,le+=x;ue===0&&(this.nextAudioTs=P=le-D),this.warn(`Injecting ${Ue} audio frames @ ${((le-D)/h).toFixed(3)}s due to ${Math.round(1e3*Ce/h)} ms gap.`);for(let qe=0;qe<Ue;qe++){let ut=aSe.getSilentFrame(t.parsedCodec||t.manifestCodec||t.codec,t.channelCount);ut||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ut=pe.unit.subarray()),_.splice(ue,0,{unit:ut,pts:le}),le+=x,ue++}}pe.pts=le,le+=x}}let $=null,V=null,W,C=0,K=_.length;for(;K--;)C+=_[K].unit.byteLength;for(let se=0,ue=_.length;se<ue;se++){const le=_[se],pe=le.unit;let be=le.pts;if(V!==null){const ke=A[se-1];ke.duration=Math.round((be-V)/m)}else if(o&&t.segmentCodec==="aac"&&(be=P+D),$=be,C>0){C+=R;try{W=new Uint8Array(C)}catch(ke){this.observer.emit(H.ERROR,H.ERROR,{type:pt.MUX_ERROR,details:we.REMUX_ALLOC_ERROR,fatal:!1,error:ke,bytes:C,reason:`fail allocating audio mdat ${C}`});return}E||(new DataView(W.buffer).setUint32(0,C),W.set(Se.types.mdat,4))}else return;W.set(pe,R);const Ce=pe.byteLength;R+=Ce,A.push(J7(!0,v,Ce,0)),V=be}const ee=A.length;if(!ee)return;const Q=A[A.length-1];P=V-D,this.nextAudioTs=P+m*Q.duration;const fe=E?new Uint8Array(0):Se.moof(t.sequenceNumber++,$/m,Nn({},t,{samples:A}));t.samples=[];const O=($-D)/h,re=this.nextAudioTs/h,Ae={data1:fe,data2:W,startPTS:O,endPTS:re,startDTS:O,endDTS:re,type:"audio",hasAudio:!0,hasVideo:!1,nb:ee};return this.isAudioContiguous=!0,Ae}}function ro(i,t){let r;if(t===null)return i;for(t<i?r=-8589934592:r=8589934592;Math.abs(i-t)>4294967296;)i+=r;return i}function pSe(i){for(let t=0;t<i.length;t++)if(i[t].key)return t;return-1}function pW(i,t,r,o){const l=i.samples.length;if(!l)return;const c=i.inputTimeScale;for(let d=0;d<l;d++){const m=i.samples[d];m.pts=ro(m.pts-r.baseTime*c/r.timescale,t*c)/c,m.dts=ro(m.dts-o.baseTime*c/o.timescale,t*c)/c}const h=i.samples;return i.samples=[],{samples:h}}function mW(i,t,r){const o=i.samples.length;if(!o)return;const l=i.inputTimeScale;for(let h=0;h<o;h++){const d=i.samples[h];d.pts=ro(d.pts-r.baseTime*l/r.timescale,t*l)/l}i.samples.sort((h,d)=>h.pts-d.pts);const c=i.samples;return i.samples=[],{samples:c}}class mSe extends Vo{constructor(t,r,o,l){super("passthrough-remuxer",l),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(t){this.lastEndTime=null;const r=this.initPTS;r&&t&&r.baseTime===t.baseTime&&r.timescale===t.timescale||(this.initPTS=t)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(t,r,o,l){this.audioCodec=r,this.videoCodec=o,this.generateInitSegment(t,l),this.emitInitSegment=!0}generateInitSegment(t,r){let{audioCodec:o,videoCodec:l}=this;if(!(t!=null&&t.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:c,video:h}=this.initData=Sz(t);if(r)nxe(t,r);else{const m=c||h;m!=null&&m.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${m.codec}")!`)}c&&(o=Z7(c,jn.AUDIO,this)),h&&(l=Z7(h,jn.VIDEO,this));const d={};c&&h?d.audiovideo={container:"video/mp4",codec:o+","+l,supplemental:h.supplemental,encrypted:h.encrypted,initSegment:t,id:"main"}:c?d.audio={container:"audio/mp4",codec:o,encrypted:c.encrypted,initSegment:t,id:"audio"}:h?d.video={container:"video/mp4",codec:l,supplemental:h.supplemental,encrypted:h.encrypted,initSegment:t,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=d}remux(t,r,o,l,c,h){var d,m;let{initPTS:v,lastEndTime:x}=this;const T={audio:void 0,video:void 0,text:l,id3:o,initSegment:void 0};Ye(x)||(x=this.lastEndTime=c||0);const E=r.samples;if(!E.length)return T;const A={initPTS:void 0,timescale:void 0,trackId:void 0};let k=this.initData;if((d=k)!=null&&d.length||(this.generateInitSegment(E),k=this.initData),!((m=k)!=null&&m.length))return this.warn("Failed to generate initSegment."),T;this.emitInitSegment&&(A.tracks=this.initTracks,this.emitInitSegment=!1);const _=ixe(E,k,this),R=k.audio?_[k.audio.id]:null,P=k.video?_[k.video.id]:null,D=fS(P,1/0),N=fS(R,1/0),$=fS(P,0,!0),V=fS(R,0,!0);let W=c,C=0;const K=R&&(!P||!v&&N<D||v&&v.trackId===k.audio.id),ee=K?R:P;if(ee){const le=ee.timescale,pe=ee.start-c*le,be=K?k.audio.id:k.video.id;W=ee.start/le,C=K?V-N:$-D,(h||!v)&&(gSe(v,W,c,C)||le!==v.timescale)&&(v&&this.warn(`Timestamps at playlist time: ${h?"":"~"}${c} ${pe/le} != initPTS: ${v.baseTime/v.timescale} (${v.baseTime}/${v.timescale}) trackId: ${v.trackId}`),this.log(`Found initPTS at playlist time: ${c} offset: ${W-c} (${pe}/${le}) trackId: ${be}`),v=null,A.initPTS=pe,A.timescale=le,A.trackId=be)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${c}`);v?(A.initPTS=v.baseTime,A.timescale=v.timescale,A.trackId=v.trackId):((!A.timescale||A.trackId===void 0||A.initPTS===void 0)&&(this.warn("Could not set initPTS"),A.initPTS=W,A.timescale=1,A.trackId=-1),this.initPTS=v={baseTime:A.initPTS,timescale:A.timescale,trackId:A.trackId});const Q=W-v.baseTime/v.timescale,fe=Q+C;C>0?this.lastEndTime=fe:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const O=!!k.audio,re=!!k.video;let ce="";O&&(ce+="audio"),re&&(ce+="video");const Ae=(k.audio?k.audio.encrypted:!1)||(k.video?k.video.encrypted:!1),se={data1:E,startPTS:Q,startDTS:Q,endPTS:fe,endDTS:fe,type:ce,hasAudio:O,hasVideo:re,nb:1,dropped:0,encrypted:Ae};T.audio=O&&!re?se:void 0,T.video=re?se:void 0;const ue=P==null?void 0:P.sampleCount;if(ue){const le=P.keyFrameIndex,pe=le!==-1;se.nb=ue,se.dropped=le===0||this.isVideoContiguous?0:pe?le:ue,se.independent=pe,se.firstKeyFrame=le,pe&&P.keyFrameStart&&(se.firstKeyFramePTS=(P.keyFrameStart-v.baseTime)/v.timescale),this.isVideoContiguous||(T.independent=pe),this.isVideoContiguous||(this.isVideoContiguous=pe),se.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${le}/${ue} dropped: ${se.dropped} start: ${se.firstKeyFramePTS||"NA"}`)}return T.initSegment=A,T.id3=pW(o,c,v,v),l.samples.length&&(T.text=mW(l,c,v)),T}}function fS(i,t,r=!1){return(i==null?void 0:i.start)!==void 0?(i.start+(r?i.duration:0))/i.timescale:t}function gSe(i,t,r,o){if(i===null)return!0;const l=Math.max(o,1),c=t-i.baseTime/i.timescale;return Math.abs(c-r)>l}function Z7(i,t,r){const o=i.codec;return o&&o.length>4?o:t===jn.AUDIO?o==="ec-3"||o==="ac-3"||o==="alac"?o:o==="fLaC"||o==="Opus"?Mw(o,!1):(r.warn(`Unhandled audio codec "${o}" in mp4 MAP`),o||"mp4a"):(r.warn(`Unhandled video codec "${o}" in mp4 MAP`),o||"avc1")}let Jl;try{Jl=self.performance.now.bind(self.performance)}catch{Jl=Date.now}const HS=[{demux:tSe,remux:mSe},{demux:lc,remux:GS},{demux:QTe,remux:GS},{demux:ZTe,remux:GS}];HS.splice(2,0,{demux:JTe,remux:GS});class e9{constructor(t,r,o,l,c,h){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=t,this.typeSupported=r,this.config=o,this.id=c,this.logger=h}configure(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()}push(t,r,o,l){const c=o.transmuxing;c.executeStart=Jl();let h=new Uint8Array(t);const{currentTransmuxState:d,transmuxConfig:m}=this;l&&(this.currentTransmuxState=l);const{contiguous:v,discontinuity:x,trackSwitch:T,accurateTimeOffset:E,timeOffset:A,initSegmentChange:k}=l||d,{audioCodec:_,videoCodec:R,defaultInitPts:P,duration:D,initSegmentData:N}=m,$=vSe(h,r);if($&&jp($.method)){const K=this.getDecrypter(),ee=XP($.method);if(K.isSync()){let Q=K.softwareDecrypt(h,$.key.buffer,$.iv.buffer,ee);if(o.part>-1){const O=K.flush();Q=O&&O.buffer}if(!Q)return c.executeEnd=Jl(),T_(o);h=new Uint8Array(Q)}else return this.asyncResult=!0,this.decryptionPromise=K.webCryptoDecrypt(h,$.key.buffer,$.iv.buffer,ee).then(Q=>{const fe=this.push(Q,null,o);return this.decryptionPromise=null,fe}),this.decryptionPromise}const V=this.needsProbing(x,T);if(V){const K=this.configureTransmuxer(h);if(K)return this.logger.warn(`[transmuxer] ${K.message}`),this.observer.emit(H.ERROR,H.ERROR,{type:pt.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!1,error:K,reason:K.message}),c.executeEnd=Jl(),T_(o)}(x||T||k||V)&&this.resetInitSegment(N,_,R,D,r),(x||k||V)&&this.resetInitialTimestamp(P),v||this.resetContiguity();const W=this.transmux(h,$,A,E,o);this.asyncResult=Uv(W);const C=this.currentTransmuxState;return C.contiguous=!0,C.discontinuity=!1,C.trackSwitch=!1,c.executeEnd=Jl(),W}flush(t){const r=t.transmuxing;r.executeStart=Jl();const{decrypter:o,currentTransmuxState:l,decryptionPromise:c}=this;if(c)return this.asyncResult=!0,c.then(()=>this.flush(t));const h=[],{timeOffset:d}=l;if(o){const T=o.flush();T&&h.push(this.push(T.buffer,null,t))}const{demuxer:m,remuxer:v}=this;if(!m||!v){r.executeEnd=Jl();const T=[T_(t)];return this.asyncResult?Promise.resolve(T):T}const x=m.flush(d);return Uv(x)?(this.asyncResult=!0,x.then(T=>(this.flushRemux(h,T,t),h))):(this.flushRemux(h,x,t),this.asyncResult?Promise.resolve(h):h)}flushRemux(t,r,o){const{audioTrack:l,videoTrack:c,id3Track:h,textTrack:d}=r,{accurateTimeOffset:m,timeOffset:v}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${o.sn}${o.part>-1?" part: "+o.part:""} of ${this.id===lt.MAIN?"level":"track"} ${o.level}`);const x=this.remuxer.remux(l,c,h,d,v,m,!0,this.id);t.push({remuxResult:x,chunkMeta:o}),o.transmuxing.executeEnd=Jl()}resetInitialTimestamp(t){const{demuxer:r,remuxer:o}=this;!r||!o||(r.resetTimeStamp(t),o.resetTimeStamp(t))}resetContiguity(){const{demuxer:t,remuxer:r}=this;!t||!r||(t.resetContiguity(),r.resetNextTimestamp())}resetInitSegment(t,r,o,l,c){const{demuxer:h,remuxer:d}=this;!h||!d||(h.resetInitSegment(t,r,o,l),d.resetInitSegment(t,r,o,c))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(t,r,o,l,c){let h;return r&&r.method==="SAMPLE-AES"?h=this.transmuxSampleAes(t,r,o,l,c):h=this.transmuxUnencrypted(t,o,l,c),h}transmuxUnencrypted(t,r,o,l){const{audioTrack:c,videoTrack:h,id3Track:d,textTrack:m}=this.demuxer.demux(t,r,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(c,h,d,m,r,o,!1,this.id),chunkMeta:l}}transmuxSampleAes(t,r,o,l,c){return this.demuxer.demuxSampleAes(t,r,o).then(h=>({remuxResult:this.remuxer.remux(h.audioTrack,h.videoTrack,h.id3Track,h.textTrack,o,l,!1,this.id),chunkMeta:c}))}configureTransmuxer(t){const{config:r,observer:o,typeSupported:l}=this;let c;for(let T=0,E=HS.length;T<E;T++){var h;if((h=HS[T].demux)!=null&&h.probe(t,this.logger)){c=HS[T];break}}if(!c)return new Error("Failed to find demuxer by probing fragment data");const d=this.demuxer,m=this.remuxer,v=c.remux,x=c.demux;(!m||!(m instanceof v))&&(this.remuxer=new v(o,r,l,this.logger)),(!d||!(d instanceof x))&&(this.demuxer=new x(o,r,l,this.logger),this.probe=x.probe)}needsProbing(t,r){return!this.demuxer||!this.remuxer||t||r}getDecrypter(){let t=this.decrypter;return t||(t=this.decrypter=new WP(this.config)),t}}function vSe(i,t){let r=null;return i.byteLength>0&&(t==null?void 0:t.key)!=null&&t.iv!==null&&t.method!=null&&(r=t),r}const T_=i=>({remuxResult:{},chunkMeta:i});function Uv(i){return"then"in i&&i.then instanceof Function}class ySe{constructor(t,r,o,l,c){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=r,this.initSegmentData=o,this.duration=l,this.defaultInitPts=c||null}}class xSe{constructor(t,r,o,l,c,h){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=r,this.accurateTimeOffset=o,this.trackSwitch=l,this.timeOffset=c,this.initSegmentChange=h}}let t9=0;class gW{constructor(t,r,o,l){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=t9++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=m=>{const v=m.data,x=this.hls;if(!(!x||!(v!=null&&v.event)||v.instanceNo!==this.instanceNo))switch(v.event){case"init":{var T;const E=(T=this.workerContext)==null?void 0:T.objectURL;E&&self.URL.revokeObjectURL(E);break}case"transmuxComplete":{this.handleTransmuxComplete(v.data);break}case"flush":{this.onFlush(v.data);break}case"workerLog":{x.logger[v.data.logType]&&x.logger[v.data.logType](v.data.message);break}default:{v.data=v.data||{},v.data.frag=this.frag,v.data.part=this.part,v.data.id=this.id,x.trigger(v.event,v.data);break}}},this.onWorkerError=m=>{if(!this.hls)return;const v=new Error(`${m.message}  (${m.filename}:${m.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(H.ERROR,{type:pt.OTHER_ERROR,details:we.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:v})};const c=t.config;this.hls=t,this.id=r,this.useWorker=!!c.enableWorker,this.onTransmuxComplete=o,this.onFlush=l;const h=(m,v)=>{v=v||{},v.frag=this.frag||void 0,m===H.ERROR&&(v=v,v.parent=this.id,v.part=this.part,this.error=v.error),this.hls.trigger(m,v)};this.observer=new ZP,this.observer.on(H.FRAG_DECRYPTED,h),this.observer.on(H.ERROR,h);const d=g7(c.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const m=this.hls.logger;if(c.workerPath||ETe()){try{c.workerPath?(m.log(`loading Web Worker ${c.workerPath} for "${r}"`),this.workerContext=ATe(c.workerPath)):(m.log(`injecting Web Worker for "${r}"`),this.workerContext=bTe());const{worker:x}=this.workerContext;x.addEventListener("message",this.onWorkerMessage),x.addEventListener("error",this.onWorkerError),x.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:d,id:r,config:Un(c)})}catch(x){m.warn(`Error setting up "${r}" Web Worker, fallback to inline`,x),this.terminateWorker(),this.error=null,this.transmuxer=new e9(this.observer,d,c,"",r,t.logger)}return}}this.transmuxer=new e9(this.observer,d,c,"",r,t.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const t=this.instanceNo;this.instanceNo=t9++;const r=this.hls.config,o=g7(r.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:t,typeSupported:o,id:this.id,config:Un(r)})}}terminateWorker(){if(this.workerContext){const{worker:t}=this.workerContext;this.workerContext=null,t.removeEventListener("message",this.onWorkerMessage),t.removeEventListener("error",this.onWorkerError),ITe(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}const t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(t,r,o,l,c,h,d,m,v,x){var T,E;v.transmuxing.start=self.performance.now();const{instanceNo:A,transmuxer:k}=this,_=h?h.start:c.start,R=c.decryptdata,P=this.frag,D=!(P&&c.cc===P.cc),N=!(P&&v.level===P.level),$=P?v.sn-P.sn:-1,V=this.part?v.part-this.part.index:-1,W=$===0&&v.id>1&&v.id===(P==null?void 0:P.stats.chunkCount),C=!N&&($===1||$===0&&(V===1||W&&V<=0)),K=self.performance.now();(N||$||c.stats.parsing.start===0)&&(c.stats.parsing.start=K),h&&(V||!C)&&(h.stats.parsing.start=K);const ee=!(P&&((T=c.initSegment)==null?void 0:T.url)===((E=P.initSegment)==null?void 0:E.url)),Q=new xSe(D,C,m,N,_,ee);if(!C||D||ee){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${c.type} sn: ${v.sn}${v.part>-1?" part: "+v.part:""} ${this.id===lt.MAIN?"level":"track"}: ${v.level} id: ${v.id}
        discontinuity: ${D}
        trackSwitch: ${N}
        contiguous: ${C}
        accurateTimeOffset: ${m}
        timeOffset: ${_}
        initSegmentChange: ${ee}`);const fe=new ySe(o,l,r,d,x);this.configureTransmuxer(fe)}if(this.frag=c,this.part=h,this.workerContext)this.workerContext.worker.postMessage({instanceNo:A,cmd:"demux",data:t,decryptdata:R,chunkMeta:v,state:Q},t instanceof ArrayBuffer?[t]:[]);else if(k){const fe=k.push(t,R,v,Q);Uv(fe)?fe.then(O=>{this.handleTransmuxComplete(O)}).catch(O=>{this.transmuxerError(O,v,"transmuxer-interface push error")}):this.handleTransmuxComplete(fe)}}flush(t){t.transmuxing.start=self.performance.now();const{instanceNo:r,transmuxer:o}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:r,cmd:"flush",chunkMeta:t});else if(o){const l=o.flush(t);Uv(l)?l.then(c=>{this.handleFlushResult(c,t)}).catch(c=>{this.transmuxerError(c,t,"transmuxer-interface flush error")}):this.handleFlushResult(l,t)}}transmuxerError(t,r,o){this.hls&&(this.error=t,this.hls.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,chunkMeta:r,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:t,err:t,reason:o}))}handleFlushResult(t,r){t.forEach(o=>{this.handleTransmuxComplete(o)}),this.onFlush(r)}configureTransmuxer(t){const{instanceNo:r,transmuxer:o}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:r,cmd:"configure",config:t}):o&&o.configure(t)}handleTransmuxComplete(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)}}const n9=100;class TSe extends JP{constructor(t,r,o){super(t,r,o,"audio-stream-controller",lt.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:t}=this;t.on(H.LEVEL_LOADED,this.onLevelLoaded,this),t.on(H.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(H.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(H.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(H.BUFFER_RESET,this.onBufferReset,this),t.on(H.BUFFER_CREATED,this.onBufferCreated,this),t.on(H.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(H.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(H.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(H.FRAG_LOADING,this.onFragLoading,this),t.on(H.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:t}=this;t&&(super.unregisterListeners(),t.off(H.LEVEL_LOADED,this.onLevelLoaded,this),t.off(H.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(H.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(H.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(H.BUFFER_RESET,this.onBufferReset,this),t.off(H.BUFFER_CREATED,this.onBufferCreated,this),t.off(H.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(H.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(H.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(H.FRAG_LOADING,this.onFragLoading,this),t.off(H.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(t,{frag:r,id:o,initPTS:l,timescale:c,trackId:h}){if(o===lt.MAIN){const d=r.cc,m=this.fragCurrent;if(this.initPTS[d]={baseTime:l,timescale:c,trackId:h},this.log(`InitPTS for cc: ${d} found from main: ${l/c} (${l}/${c}) trackId: ${h}`),this.mainAnchor=r,this.state===Re.WAITING_INIT_PTS){const v=this.waitingData;(!v&&!this.loadingParts||v&&v.frag.cc!==d)&&this.syncWithAnchor(r,v==null?void 0:v.frag)}else!this.hls.hasEnoughToStart&&m&&m.cc!==d?(m.abortRequests(),this.syncWithAnchor(r,m)):this.state===Re.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(t,r){var o;const l=((o=this.mainFragLoading)==null?void 0:o.frag)||null;if(r&&(l==null?void 0:l.cc)===r.cc)return;const c=(l||t).cc,h=this.getLevelDetails(),d=this.getLoadPosition(),m=Pz(h,c,d);m&&(this.log(`Syncing with main frag at ${m.start} cc ${m.cc}`),this.startFragRequested=!1,this.nextLoadPosition=m.start,this.resetLoadingState(),this.state===Re.IDLE&&this.doTickIdle())}startLoad(t,r){if(!this.levels){this.startPosition=t,this.state=Re.STOPPED;return}const o=this.lastCurrentTime;this.stopLoad(),this.setInterval(n9),o>0&&t===-1?(this.log(`Override startPosition with lastCurrentTime @${o.toFixed(3)}`),t=o,this.state=Re.IDLE):this.state=Re.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=r?-1:t,this.tick()}doTick(){switch(this.state){case Re.IDLE:this.doTickIdle();break;case Re.WAITING_TRACK:{const{levels:t,trackId:r}=this,o=t==null?void 0:t[r],l=o==null?void 0:o.details;if(l&&!this.waitForLive(o)){if(this.waitForCdnTuneIn(l))break;this.state=Re.WAITING_INIT_PTS}break}case Re.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case Re.WAITING_INIT_PTS:{const t=this.waitingData;if(t){const{frag:r,part:o,cache:l,complete:c}=t,h=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=Re.FRAG_LOADING;const d=l.flush().buffer,m={frag:r,part:o,payload:d,networkDetails:null};this._handleFragmentLoadProgress(m),c&&super._handleFragmentLoadComplete(m)}else h&&h.cc!==t.frag.cc&&this.syncWithAnchor(h,t.frag)}else this.state=Re.IDLE}}this.onTickEnd()}resetLoadingState(){const t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:t}=this;t!=null&&t.readyState&&(this.lastCurrentTime=t.currentTime)}doTickIdle(){var t;const{hls:r,levels:o,media:l,trackId:c}=this,h=r.config;if(!this.buffering||!l&&!this.primaryPrefetch&&(this.startFragRequested||!h.startFragPrefetch)||!(o!=null&&o[c]))return;const d=o[c],m=d.details;if(!m||this.waitForLive(d)||this.waitForCdnTuneIn(m)){this.state=Re.WAITING_TRACK,this.startFragRequested=!1;return}const v=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&v&&(this.bufferFlushed=!1,this.afterBufferFlushed(v,jn.AUDIO,lt.AUDIO));const x=this.getFwdBufferInfo(v,lt.AUDIO);if(x===null)return;if(!this.switchingTrack&&this._streamEnded(x,m)){r.trigger(H.BUFFER_EOS,{type:"audio"}),this.state=Re.ENDED;return}const T=x.len,E=r.maxBufferLength,A=m.fragments,k=A[0].start,_=this.getLoadPosition(),R=this.flushing?_:x.end;if(this.switchingTrack&&l){const N=_;m.PTSKnown&&N<k&&(x.end>k||x.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),l.currentTime=k+.05)}if(T>=E&&!this.switchingTrack&&R<A[A.length-1].start)return;let P=this.getNextFragment(R,m);if(P&&this.isLoopLoading(P,R)&&(P=this.getNextFragmentLoopLoading(P,m,x,lt.MAIN,E)),!P){this.bufferFlushed=!0;return}let D=((t=this.mainFragLoading)==null?void 0:t.frag)||null;if(!this.audioOnly&&this.startFragRequested&&D&&Dr(P)&&!P.endList&&(!m.live||!this.loadingParts&&R<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(D)===ii.OK&&(this.mainFragLoading=D=null),D&&Dr(D))){if(P.start>D.end){const $=this.fragmentTracker.getFragAtPos(R,lt.MAIN);$&&$.end>D.end&&(D=$,this.mainFragLoading={frag:$,targetBufferTime:null})}if(P.start>D.end)return}this.loadFragment(P,d,R)}onMediaDetaching(t,r){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(t,r)}onAudioTracksUpdated(t,{audioTracks:r}){this.resetTransmuxer(),this.levels=r.map(o=>new Mv(o))}onAudioTrackSwitching(t,r){const o=!!r.url;this.trackId=r.id;const{fragCurrent:l}=this;l&&(l.abortRequests(),this.removeUnbufferedFrags(l.start)),this.resetLoadingState(),o?(this.switchingTrack=r,this.flushAudioIfNeeded(r),this.state!==Re.STOPPED&&(this.setInterval(n9),this.state=Re.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=r,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(t,r){this.mainDetails=r.details;const o=this.cachedTrackLoadedData;o&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(H.AUDIO_TRACK_LOADED,o))}onAudioTrackLoaded(t,r){var o;const{levels:l}=this,{details:c,id:h,groupId:d,track:m}=r;if(!l){this.warn(`Audio tracks reset while loading track ${h} "${m.name}" of "${d}"`);return}const v=this.mainDetails;if(!v||c.endCC>v.endCC||v.expired){this.cachedTrackLoadedData=r,this.state!==Re.STOPPED&&(this.state=Re.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${h} "${m.name}" of "${d}" loaded [${c.startSN},${c.endSN}]${c.lastPartSn?`[part-${c.lastPartSn}-${c.lastPartIndex}]`:""},duration:${c.totalduration}`);const x=l[h];let T=0;if(c.live||(o=x.details)!=null&&o.live){if(this.checkLiveUpdate(c),c.deltaUpdateFailed)return;if(x.details){var E;T=this.alignPlaylists(c,x.details,(E=this.levelLastLoaded)==null?void 0:E.details)}c.alignedSliding||(Xz(c,v),c.alignedSliding||Vw(c,v),T=c.fragmentStart)}x.details=c,this.levelLastLoaded=x,this.startFragRequested||this.setStartPosition(v,T),this.hls.trigger(H.AUDIO_TRACK_UPDATED,{details:c,id:h,groupId:r.groupId}),this.state===Re.WAITING_TRACK&&!this.waitForCdnTuneIn(c)&&(this.state=Re.IDLE),this.tick()}_handleFragmentLoadProgress(t){var r;const o=t.frag,{part:l,payload:c}=t,{config:h,trackId:d,levels:m}=this;if(!m){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${o.sn} of level ${o.level} will not be buffered`);return}const v=m[d];if(!v){this.warn("Audio track is undefined on fragment load progress");return}const x=v.details;if(!x){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(o.start);return}const T=h.defaultAudioCodec||v.audioCodec||"mp4a.40.2";let E=this.transmuxer;E||(E=this.transmuxer=new gW(this.hls,lt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const A=this.initPTS[o.cc],k=(r=o.initSegment)==null?void 0:r.data;if(A!==void 0){const R=l?l.index:-1,P=R!==-1,D=new YP(o.level,o.sn,o.stats.chunkCount,c.byteLength,R,P);E.push(c,k,T,"",o,l,x.totalduration,!1,D,A)}else{this.log(`Unknown video PTS for cc ${o.cc}, waiting for video PTS before demuxing audio frag ${o.sn} of [${x.startSN} ,${x.endSN}],track ${d}`);const{cache:_}=this.waitingData=this.waitingData||{frag:o,part:l,cache:new Qz,complete:!1};_.push(new Uint8Array(c)),this.state!==Re.STOPPED&&(this.state=Re.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(t){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(t)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(t,r){this.bufferFlushed=this.flushing=!1;const o=r.tracks.audio;o&&(this.mediaBuffer=o.buffer||null)}onFragLoading(t,r){!this.audioOnly&&r.frag.type===lt.MAIN&&Dr(r.frag)&&(this.mainFragLoading=r,this.state===Re.IDLE&&this.tick())}onFragBuffered(t,r){const{frag:o,part:l}=r;if(o.type!==lt.AUDIO){!this.audioOnly&&o.type===lt.MAIN&&!o.elementaryStreams.video&&!o.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(o)){this.warn(`Fragment ${o.sn}${l?" p: "+l.index:""} of level ${o.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Dr(o)){this.fragPrevious=o;const c=this.switchingTrack;c&&(this.bufferedTrack=c,this.switchingTrack=null,this.hls.trigger(H.AUDIO_TRACK_SWITCHED,_n({},c)))}this.fragBufferedComplete(o,l),this.media&&this.tick()}onError(t,r){var o;if(r.fatal){this.state=Re.ERROR;return}switch(r.details){case we.FRAG_GAP:case we.FRAG_PARSING_ERROR:case we.FRAG_DECRYPT_ERROR:case we.FRAG_LOAD_ERROR:case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_ERROR:case we.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(lt.AUDIO,r);break;case we.AUDIO_TRACK_LOAD_ERROR:case we.AUDIO_TRACK_LOAD_TIMEOUT:case we.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===Re.WAITING_TRACK&&((o=r.context)==null?void 0:o.type)===sn.AUDIO_TRACK&&(this.state=Re.IDLE);break;case we.BUFFER_ADD_CODEC_ERROR:case we.BUFFER_APPEND_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)||this.resetLoadingState();break;case we.BUFFER_FULL_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case we.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onBufferFlushing(t,{type:r}){r!==jn.VIDEO&&(this.flushing=!0)}onBufferFlushed(t,{type:r}){if(r!==jn.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Re.ENDED&&(this.state=Re.IDLE);const o=this.mediaBuffer||this.media;o&&(this.afterBufferFlushed(o,r,lt.AUDIO),this.tick())}}_handleTransmuxComplete(t){var r;const o="audio",{hls:l}=this,{remuxResult:c,chunkMeta:h}=t,d=this.getCurrentContext(h);if(!d){this.resetWhenMissingContext(h);return}const{frag:m,part:v,level:x}=d,{details:T}=x,{audio:E,text:A,id3:k,initSegment:_}=c;if(this.fragContextChanged(m)||!T){this.fragmentTracker.removeFragment(m);return}if(this.state=Re.PARSING,this.switchingTrack&&E&&this.completeAudioSwitch(this.switchingTrack),_!=null&&_.tracks){const R=m.initSegment||m;if(this.unhandledEncryptionError(_,m))return;this._bufferInitSegment(x,_.tracks,R,h),l.trigger(H.FRAG_PARSING_INIT_SEGMENT,{frag:R,id:o,tracks:_.tracks})}if(E){const{startPTS:R,endPTS:P,startDTS:D,endDTS:N}=E;v&&(v.elementaryStreams[jn.AUDIO]={startPTS:R,endPTS:P,startDTS:D,endDTS:N}),m.setElementaryStreamInfo(jn.AUDIO,R,P,D,N),this.bufferFragmentData(E,m,v,h)}if(k!=null&&(r=k.samples)!=null&&r.length){const R=Nn({id:o,frag:m,details:T},k);l.trigger(H.FRAG_PARSING_METADATA,R)}if(A){const R=Nn({id:o,frag:m,details:T},A);l.trigger(H.FRAG_PARSING_USERDATA,R)}}_bufferInitSegment(t,r,o,l){if(this.state!==Re.PARSING||(r.video&&delete r.video,r.audiovideo&&delete r.audiovideo,!r.audio))return;const c=r.audio;c.id=lt.AUDIO;const h=t.audioCodec;this.log(`Init audio buffer, container:${c.container}, codecs[level/parsed]=[${h}/${c.codec}]`),h&&h.split(",").length===1&&(c.levelCodec=h),this.hls.trigger(H.BUFFER_CODECS,r);const d=c.initSegment;if(d!=null&&d.byteLength){const m={type:"audio",frag:o,part:null,chunkMeta:l,parent:o.type,data:d};this.hls.trigger(H.BUFFER_APPENDING,m)}this.tickImmediate()}loadFragment(t,r,o){const l=this.fragmentTracker.getState(t);if(this.switchingTrack||l===ii.NOT_LOADED||l===ii.PARTIAL){var c;if(!Dr(t))this._loadInitSegment(t,r);else if((c=r.details)!=null&&c.live&&!this.initPTS[t.cc]){this.log(`Waiting for video PTS in continuity counter ${t.cc} of live stream before loading audio fragment ${t.sn} of level ${this.trackId}`),this.state=Re.WAITING_INIT_PTS;const h=this.mainDetails;h&&h.fragmentStart!==r.details.fragmentStart&&Vw(r.details,h)}else super.loadFragment(t,r,o)}else this.clearTrackerIfNeeded(t)}flushAudioIfNeeded(t){if(this.media&&this.bufferedTrack){const{name:r,lang:o,assocLang:l,characteristics:c,audioCodec:h,channels:d}=this.bufferedTrack;ph({name:r,lang:o,assocLang:l,characteristics:c,audioCodec:h,channels:d},t,Kd)||(jw(t.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=t)}}completeAudioSwitch(t){const{hls:r}=this;this.flushAudioIfNeeded(t),this.bufferedTrack=t,this.switchingTrack=null,r.trigger(H.AUDIO_TRACK_SWITCHED,_n({},t))}}class oD extends Vo{constructor(t,r){super(r,t.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=t}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(t,r,o){const l=r==null?void 0:r.renditionReports;if(l){let c=-1;for(let h=0;h<l.length;h++){const d=l[h];let m;try{m=new self.URL(d.URI,r.url).href}catch(v){this.warn(`Could not construct new URL for Rendition Report: ${v}`),m=d.URI||""}if(m===t){c=h;break}else m===t.substring(0,m.length)&&(c=h)}if(c!==-1){const h=l[c],d=parseInt(h["LAST-MSN"])||r.lastPartSn;let m=parseInt(h["LAST-PART"])||r.lastPartIndex;if(this.hls.config.lowLatencyMode){const x=Math.min(r.age-r.partTarget,r.targetduration);m>=0&&x>r.partTarget&&(m+=1)}const v=o&&v7(o);return new y7(d,m>=0?m:void 0,v)}}}loadPlaylist(t){this.clearTimer()}loadingPlaylist(t,r){this.clearTimer()}shouldLoadPlaylist(t){return this.canLoad&&!!t&&!!t.url&&(!t.details||t.details.live)}getUrlWithDirectives(t,r){if(r)try{return r.addDirectives(t)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}return t}playlistLoaded(t,r,o){const{details:l,stats:c}=r,h=self.performance.now(),d=c.loading.first?Math.max(0,h-c.loading.first):0;l.advancedDateTime=Date.now()-d;const m=this.hls.config.timelineOffset;if(m!==l.appliedTimelineOffset){const x=Math.max(m||0,0);l.appliedTimelineOffset=x,l.fragments.forEach(T=>{T.setStart(T.playlistOffset+x)})}if(l.live||o!=null&&o.live){const x="levelInfo"in r?r.levelInfo:r.track;if(l.reloaded(o),o&&l.fragments.length>0){hTe(o,l,this);const D=l.playlistParsingError;if(D){this.warn(D);const N=this.hls;if(!N.config.ignorePlaylistParsingErrors){var v;const{networkDetails:$}=r;N.trigger(H.ERROR,{type:pt.NETWORK_ERROR,details:we.LEVEL_PARSING_ERROR,fatal:!1,url:l.url,error:D,reason:D.message,level:r.level||void 0,parent:(v=l.fragments[0])==null?void 0:v.type,networkDetails:$,stats:c});return}l.playlistParsingError=null}}l.requestScheduled===-1&&(l.requestScheduled=c.loading.start);const T=this.hls.mainForwardBufferInfo,E=T?T.end-T.len:0,A=(l.edge-E)*1e3,k=qz(l,A);if(l.requestScheduled+k<h?l.requestScheduled=h:l.requestScheduled+=k,this.log(`live playlist ${t} ${l.advanced?"REFRESHED "+l.lastPartSn+"-"+l.lastPartIndex:l.updated?"UPDATED":"MISSED"}`),!this.canLoad||!l.live)return;let _,R,P;if(l.canBlockReload&&l.endSN&&l.advanced){const D=this.hls.config.lowLatencyMode,N=l.lastPartSn,$=l.endSN,V=l.lastPartIndex,W=V!==-1,C=N===$;W?C?(R=$+1,P=D?0:V):(R=N,P=D?V+1:l.maxPartIndex):R=$+1;const K=l.age,ee=K+l.ageHeader;let Q=Math.min(ee-l.partTarget,l.targetduration*1.5);if(Q>0){if(ee>l.targetduration*3)this.log(`Playlist last advanced ${K.toFixed(2)}s ago. Omitting segment and part directives.`),R=void 0,P=void 0;else if(o!=null&&o.tuneInGoal&&ee-l.partTarget>o.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${o.tuneInGoal} to: ${Q} with playlist age: ${l.age}`),Q=0;else{const fe=Math.floor(Q/l.targetduration);if(R+=fe,P!==void 0){const O=Math.round(Q%l.targetduration/l.partTarget);P+=O}this.log(`CDN Tune-in age: ${l.ageHeader}s last advanced ${K.toFixed(2)}s goal: ${Q} skip sn ${fe} to part ${P}`)}l.tuneInGoal=Q}if(_=this.getDeliveryDirectives(l,r.deliveryDirectives,R,P),D||!C){l.requestScheduled=h,this.loadingPlaylist(x,_);return}}else(l.canBlockReload||l.canSkipUntil)&&(_=this.getDeliveryDirectives(l,r.deliveryDirectives,R,P));_&&R!==void 0&&l.canBlockReload&&(l.requestScheduled=c.loading.first+Math.max(k-d*2,k/2)),this.scheduleLoading(x,_,l)}else this.clearTimer()}scheduleLoading(t,r,o){const l=o||t.details;if(!l){this.loadingPlaylist(t,r);return}const c=self.performance.now(),h=l.requestScheduled;if(c>=h){this.loadingPlaylist(t,r);return}const d=h-c;this.log(`reload live playlist ${t.name||t.bitrate+"bps"} in ${Math.round(d)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(t,r),d)}getDeliveryDirectives(t,r,o,l){let c=v7(t);return r!=null&&r.skip&&t.deltaUpdateFailed&&(o=r.msn,l=r.part,c=$S.No),new y7(o,l,c)}checkRetry(t){const r=t.details,o=Uw(t),l=t.errorAction,{action:c,retryCount:h=0,retryConfig:d}=l||{},m=!!l&&!!d&&(c===Li.RetryRequest||!l.resolved&&c===Li.SendAlternateToPenaltyBox);if(m){var v;if(h>=d.maxNumRetry)return!1;if(o&&(v=t.context)!=null&&v.deliveryDirectives)this.warn(`Retrying playlist loading ${h+1}/${d.maxNumRetry} after "${r}" without delivery-directives`),this.loadPlaylist();else{const x=zP(d,h);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),x),this.warn(`Retrying playlist loading ${h+1}/${d.maxNumRetry} after "${r}" in ${x}ms`)}t.levelRetry=!0,l.resolved=!0}return m}}function vW(i,t){if(i.length!==t.length)return!1;for(let r=0;r<i.length;r++)if(!Fv(i[r].attrs,t[r].attrs))return!1;return!0}function Fv(i,t,r){const o=i["STABLE-RENDITION-ID"];return o&&!r?o===t["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(l=>i[l]!==t[l])}function LL(i,t){return t.label.toLowerCase()===i.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(i.lang||"").toLowerCase())}class SSe extends oD{constructor(t){super(t,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:t}=this;t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.MANIFEST_PARSED,this.onManifestParsed,this),t.on(H.LEVEL_LOADING,this.onLevelLoading,this),t.on(H.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(H.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(H.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.MANIFEST_PARSED,this.onManifestParsed,this),t.off(H.LEVEL_LOADING,this.onLevelLoading,this),t.off(H.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(H.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(H.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(t,r){this.tracks=r.audioTracks||[]}onAudioTrackLoaded(t,r){const{id:o,groupId:l,details:c}=r,h=this.tracksInGroup[o];if(!h||h.groupId!==l){this.warn(`Audio track with id:${o} and group:${l} not found in active group ${h==null?void 0:h.groupId}`);return}const d=h.details;h.details=r.details,this.log(`Audio track ${o} "${h.name}" lang:${h.lang} group:${l} loaded [${c.startSN}-${c.endSN}]`),o===this.trackId&&this.playlistLoaded(o,r,d)}onLevelLoading(t,r){this.switchLevel(r.level)}onLevelSwitching(t,r){this.switchLevel(r.level)}switchLevel(t){const r=this.hls.levels[t];if(!r)return;const o=r.audioGroups||null,l=this.groupIds;let c=this.currentTrack;if(!o||(l==null?void 0:l.length)!==(o==null?void 0:o.length)||o!=null&&o.some(d=>(l==null?void 0:l.indexOf(d))===-1)){this.groupIds=o,this.trackId=-1,this.currentTrack=null;const d=this.tracks.filter(E=>!o||o.indexOf(E.groupId)!==-1);if(d.length)this.selectDefaultTrack&&!d.some(E=>E.default)&&(this.selectDefaultTrack=!1),d.forEach((E,A)=>{E.id=A});else if(!c&&!this.tracksInGroup.length)return;this.tracksInGroup=d;const m=this.hls.config.audioPreference;if(!c&&m){const E=Qa(m,d,Kd);if(E>-1)c=d[E];else{const A=Qa(m,this.tracks);c=this.tracks[A]}}let v=this.findTrackId(c);v===-1&&c&&(v=this.findTrackId(null));const x={audioTracks:d};this.log(`Updating audio tracks, ${d.length} track(s) found in group(s): ${o==null?void 0:o.join(",")}`),this.hls.trigger(H.AUDIO_TRACKS_UPDATED,x);const T=this.trackId;if(v!==-1&&T===-1)this.setAudioTrack(v);else if(d.length&&T===-1){var h;const E=new Error(`No audio track selected for current audio group-ID(s): ${(h=this.groupIds)==null?void 0:h.join(",")} track count: ${d.length}`);this.warn(E.message),this.hls.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:E})}}}onError(t,r){r.fatal||!r.context||r.context.type===sn.AUDIO_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}setAudioOption(t){const r=this.hls;if(r.config.audioPreference=t,t){const o=this.allAudioTracks;if(this.selectDefaultTrack=!1,o.length){const l=this.currentTrack;if(l&&ph(t,l,Kd))return l;const c=Qa(t,this.tracksInGroup,Kd);if(c>-1){const h=this.tracksInGroup[c];return this.setAudioTrack(c),h}else if(l){let h=r.loadLevel;h===-1&&(h=r.firstAutoLevel);const d=Dxe(t,r.levels,o,h,Kd);if(d===-1)return null;r.nextLoadLevel=d}if(t.channels||t.audioCodec){const h=Qa(t,o);if(h>-1)return o[h]}}}return null}setAudioTrack(t){const r=this.tracksInGroup;if(t<0||t>=r.length){this.warn(`Invalid audio track id: ${t}`);return}this.selectDefaultTrack=!1;const o=this.currentTrack,l=r[t],c=l.details&&!l.details.live;if(t===this.trackId&&l===o&&c||(this.log(`Switching to audio-track ${t} "${l.name}" lang:${l.lang} group:${l.groupId} channels:${l.channels}`),this.trackId=t,this.currentTrack=l,this.hls.trigger(H.AUDIO_TRACK_SWITCHING,_n({},l)),c))return;const h=this.switchParams(l.url,o==null?void 0:o.details,l.details);this.loadPlaylist(h)}findTrackId(t){const r=this.tracksInGroup;for(let o=0;o<r.length;o++){const l=r[o];if(!(this.selectDefaultTrack&&!l.default)&&(!t||ph(t,l,Kd)))return o}if(t){const{name:o,lang:l,assocLang:c,characteristics:h,audioCodec:d,channels:m}=t;for(let v=0;v<r.length;v++){const x=r[v];if(ph({name:o,lang:l,assocLang:c,characteristics:h,audioCodec:d,channels:m},x,Kd))return v}for(let v=0;v<r.length;v++){const x=r[v];if(Fv(t.attrs,x.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return v}for(let v=0;v<r.length;v++){const x=r[v];if(Fv(t.attrs,x.attrs,["LANGUAGE"]))return v}}return-1}loadPlaylist(t){super.loadPlaylist();const r=this.currentTrack;this.shouldLoadPlaylist(r)&&jw(r.url,this.hls)&&this.scheduleLoading(r,t)}loadingPlaylist(t,r){super.loadingPlaylist(t,r);const o=t.id,l=t.groupId,c=this.getUrlWithDirectives(t.url,r),h=t.details,d=h==null?void 0:h.age;this.log(`Loading audio-track ${o} "${t.name}" lang:${t.lang} group:${l}${(r==null?void 0:r.msn)!==void 0?" at sn "+r.msn+" part "+r.part:""}${d&&h.live?" age "+d.toFixed(1)+(h.type&&" "+h.type||""):""} ${c}`),this.hls.trigger(H.AUDIO_TRACK_LOADING,{url:c,id:o,groupId:l,deliveryDirectives:r||null,track:t})}}class wSe{constructor(t){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=t}destroy(){this.tracks=this.queues=null}append(t,r,o){if(this.queues===null||this.tracks===null)return;const l=this.queues[r];l.push(t),l.length===1&&!o&&this.executeNext(r)}appendBlocker(t){return new Promise(r=>{const o={label:"async-blocker",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(o,t)})}prependBlocker(t){return new Promise(r=>{if(this.queues){const o={label:"async-blocker-prepend",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[t].unshift(o)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(t=>{var r;const o=(r=t[0])==null?void 0:r.label;(o==="async-blocker"||o==="async-blocker-prepend")&&(t[0].execute(),t.splice(0,1))})}unblockAudio(t){if(this.queues===null)return;this.queues.audio[0]===t&&this.shiftAndExecuteNext("audio")}executeNext(t){if(this.queues===null||this.tracks===null)return;const r=this.queues[t];if(r.length){const l=r[0];try{l.execute()}catch(c){var o;if(l.onError(c),this.queues===null||this.tracks===null)return;const h=(o=this.tracks[t])==null?void 0:o.buffer;h!=null&&h.updating||this.shiftAndExecuteNext(t)}}}shiftAndExecuteNext(t){this.queues!==null&&(this.queues[t].shift(),this.executeNext(t))}current(t){var r;return((r=this.queues)==null?void 0:r[t][0])||null}toString(){const{queues:t,tracks:r}=this;return t===null||r===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(t){var r,o;return(r=this.queues)!=null&&r[t]||(o=this.tracks)!=null&&o[t]?`${t}: (${this.listSbInfo(t)}) ${this.listOps(t)}`:""}listSbInfo(t){var r;const o=(r=this.tracks)==null?void 0:r[t],l=o==null?void 0:o.buffer;return l?`SourceBuffer${l.updating?" updating":""}${o.ended?" ended":""}${o.ending?" ending":""}`:"none"}listOps(t){var r;return((r=this.queues)==null?void 0:r[t].map(o=>o.label).join(", "))||""}}const r9=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,yW="HlsJsTrackRemovedError";class ESe extends Error{constructor(t){super(t),this.name=yW}}class bSe extends Vo{constructor(t,r){super("buffer-controller",t.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=o=>{var l;this.hls&&((l=this.mediaSource)==null?void 0:l.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=o=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=o=>{const{media:l,mediaSource:c}=this;o&&this.log("Media source opened"),!(!l||!c)&&(c.removeEventListener("sourceopen",this._onMediaSourceOpen),l.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(H.MEDIA_ATTACHED,{media:l,mediaSource:c}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:o,_objectUrl:l}=this;o!==l&&this.error(`Media element src was set while attaching MediaSource (${l} > ${o})`)},this.hls=t,this.fragmentTracker=r,this.appendSource=K1e($c(t.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:t}=this;t.on(H.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.MANIFEST_PARSED,this.onManifestParsed,this),t.on(H.BUFFER_RESET,this.onBufferReset,this),t.on(H.BUFFER_APPENDING,this.onBufferAppending,this),t.on(H.BUFFER_CODECS,this.onBufferCodecs,this),t.on(H.BUFFER_EOS,this.onBufferEos,this),t.on(H.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(H.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(H.FRAG_PARSED,this.onFragParsed,this),t.on(H.FRAG_CHANGED,this.onFragChanged,this),t.on(H.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(H.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.MANIFEST_PARSED,this.onManifestParsed,this),t.off(H.BUFFER_RESET,this.onBufferReset,this),t.off(H.BUFFER_APPENDING,this.onBufferAppending,this),t.off(H.BUFFER_CODECS,this.onBufferCodecs,this),t.off(H.BUFFER_EOS,this.onBufferEos,this),t.off(H.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(H.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(H.FRAG_PARSED,this.onFragParsed,this),t.off(H.FRAG_CHANGED,this.onFragChanged,this),t.off(H.ERROR,this.onError,this)}transferMedia(){const{media:t,mediaSource:r}=this;if(!t)return null;const o={};if(this.operationQueue){const c=this.isUpdating();c||this.operationQueue.removeBlockers();const h=this.isQueued();(c||h)&&this.warn(`Transfering MediaSource with${h?" operations in queue":""}${c?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const l=this.transferData;return!this.sourceBufferCount&&l&&l.mediaSource===r?Nn(o,l.tracks):this.sourceBuffers.forEach(c=>{const[h]=c;h&&(o[h]=Nn({},this.tracks[h]),this.removeBuffer(h)),c[0]=c[1]=null}),{media:t,mediaSource:r,tracks:o}}initTracks(){const t={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=t,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(t,r){var o;let l=2;(r.audio&&!r.video||!r.altAudio)&&(l=1),this.bufferCodecEventsTotal=l,this.log(`${l} bufferCodec event(s) expected.`),(o=this.transferData)!=null&&o.mediaSource&&this.sourceBufferCount&&l&&this.bufferCreated()}onMediaAttaching(t,r){const o=this.media=r.media;this.transferData=this.overrides=void 0;const l=$c(this.appendSource);if(l){const c=!!r.mediaSource;(c||r.overrides)&&(this.transferData=r,this.overrides=r.overrides);const h=this.mediaSource=r.mediaSource||new l;if(this.assignMediaSource(h),c)this._objectUrl=o.src,this.attachTransferred();else{const d=this._objectUrl=self.URL.createObjectURL(h);if(this.appendSource)try{o.removeAttribute("src");const m=self.ManagedMediaSource;o.disableRemotePlayback=o.disableRemotePlayback||m&&h instanceof m,i9(o),ASe(o,d),o.load()}catch{o.src=d}else o.src=d}o.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(t){var r,o;this.log(`${((r=this.transferData)==null?void 0:r.mediaSource)===t?"transferred":"created"} media source: ${(o=t.constructor)==null?void 0:o.name}`),t.addEventListener("sourceopen",this._onMediaSourceOpen),t.addEventListener("sourceended",this._onMediaSourceEnded),t.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.addEventListener("startstreaming",this._onStartStreaming),t.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const t=this.media,r=this.transferData;if(!r||!t)return;const o=this.tracks,l=r.tracks,c=l?Object.keys(l):null,h=c?c.length:0,d=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(l&&c&&h){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Un(o,(m,v)=>m==="initSegment"?void 0:v)};
transfer tracks: ${Un(l,(m,v)=>m==="initSegment"?void 0:v)}}`),!pz(l,o)){r.mediaSource=null,r.tracks=void 0;const m=t.currentTime,v=this.details,x=Math.max(m,(v==null?void 0:v.fragments[0].start)||0);if(x-m>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${m} -> ${x}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(l)}"->"${Object.keys(o)}") start time: ${x} currentTime: ${m}`),this.onMediaDetaching(H.MEDIA_DETACHING,{}),this.onMediaAttaching(H.MEDIA_ATTACHING,r),t.currentTime=x;return}this.transferData=void 0,c.forEach(m=>{const v=m,x=l[v];if(x){const T=x.buffer;if(T){const E=this.fragmentTracker,A=x.id;if(E.hasFragments(A)||E.hasParts(A)){const R=qt.getBuffered(T);E.detectEvictedFragments(v,R,A,null,!0)}const k=S_(v),_=[v,T];this.sourceBuffers[k]=_,T.updating&&this.operationQueue&&this.operationQueue.prependBlocker(v),this.trackSourceBuffer(v,x)}}}),d(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),d()}get mediaSourceOpenOrEnded(){var t;const r=(t=this.mediaSource)==null?void 0:t.readyState;return r==="open"||r==="ended"}onMediaDetaching(t,r){const o=!!r.transferMedia;this.transferData=this.overrides=void 0;const{media:l,mediaSource:c,_objectUrl:h}=this;if(c){if(this.log(`media source ${o?"transferring":"detaching"}`),o)this.sourceBuffers.forEach(([d])=>{d&&this.removeBuffer(d)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const d=c.readyState==="open";try{const m=c.sourceBuffers;for(let v=m.length;v--;)d&&m[v].abort(),c.removeSourceBuffer(m[v]);d&&c.endOfStream()}catch(m){this.warn(`onMediaDetaching: ${m.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}c.removeEventListener("sourceopen",this._onMediaSourceOpen),c.removeEventListener("sourceended",this._onMediaSourceEnded),c.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(c.removeEventListener("startstreaming",this._onStartStreaming),c.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}l&&(l.removeEventListener("emptied",this._onMediaEmptied),o||(h&&self.URL.revokeObjectURL(h),this.mediaSrc===h?(l.removeAttribute("src"),this.appendSource&&i9(l),l.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(H.MEDIA_DETACHED,r)}onBufferReset(){this.sourceBuffers.forEach(([t])=>{t&&this.resetBuffer(t)}),this.initTracks()}resetBuffer(t){var r;const o=(r=this.tracks[t])==null?void 0:r.buffer;if(this.removeBuffer(t),o)try{var l;(l=this.mediaSource)!=null&&l.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(o)}catch(c){this.warn(`onBufferReset ${t}`,c)}delete this.tracks[t]}removeBuffer(t){this.removeBufferListeners(t),this.sourceBuffers[S_(t)]=[null,null];const r=this.tracks[t];r&&(r.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new wSe(this.tracks)}onBufferCodecs(t,r){var o;const l=this.tracks,c=Object.keys(r);this.log(`BUFFER_CODECS: "${c}" (current SB count ${this.sourceBufferCount})`);const h="audiovideo"in r&&(l.audio||l.video)||l.audiovideo&&("audio"in r||"video"in r),d=!h&&this.sourceBufferCount&&this.media&&c.some(m=>!l[m]);if(h||d){this.warn(`Unsupported transition between "${Object.keys(l)}" and "${c}" SourceBuffers`);return}c.forEach(m=>{var v,x;const T=r[m],{id:E,codec:A,levelCodec:k,container:_,metadata:R,supplemental:P}=T;let D=l[m];const N=(v=this.transferData)==null||(v=v.tracks)==null?void 0:v[m],$=N!=null&&N.buffer?N:D,V=($==null?void 0:$.pendingCodec)||($==null?void 0:$.codec),W=$==null?void 0:$.levelCodec;D||(D=l[m]={buffer:void 0,listeners:[],codec:A,supplemental:P,container:_,levelCodec:k,metadata:R,id:E});const C=BS(V,W),K=C==null?void 0:C.replace(r9,"$1");let ee=BS(A,k);const Q=(x=ee)==null?void 0:x.replace(r9,"$1");ee&&C&&K!==Q&&(m.slice(0,5)==="audio"&&(ee=Mw(ee,this.appendSource)),this.log(`switching codec ${V} to ${ee}`),ee!==(D.pendingCodec||D.codec)&&(D.pendingCodec=ee),D.container=_,this.appendChangeType(m,_,ee))}),(this.tracksReady||this.sourceBufferCount)&&(r.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!r.video&&((o=r.audio)==null?void 0:o.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((t,r)=>{const o=this.tracks[r];return t[r]={id:o.id,container:o.container,codec:o.codec,levelCodec:o.levelCodec},t},{})}appendChangeType(t,r,o){const l=`${r};codecs=${o}`,c={label:`change-type=${l}`,execute:()=>{const h=this.tracks[t];if(h){const d=h.buffer;d!=null&&d.changeType&&(this.log(`changing ${t} sourceBuffer type to ${l}`),d.changeType(l),h.codec=o,h.container=r)}this.shiftAndExecuteNext(t)},onStart:()=>{},onComplete:()=>{},onError:h=>{this.warn(`Failed to change ${t} SourceBuffer type`,h)}};this.append(c,t,this.isPending(this.tracks[t]))}blockAudio(t){var r;const o=t.start,l=o+t.duration*.05;if(((r=this.fragmentTracker.getAppendedFrag(o,lt.MAIN))==null?void 0:r.gap)===!0)return;const h={label:"block-audio",execute:()=>{var d;const m=this.tracks.video;(this.lastVideoAppendEnd>l||m!=null&&m.buffer&&qt.isBuffered(m.buffer,l)||((d=this.fragmentTracker.getAppendedFrag(l,lt.MAIN))==null?void 0:d.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:d=>{this.warn("Error executing block-audio operation",d)}};this.blockedAudioAppend={op:h,frag:t},this.append(h,"audio",!0)}unblockAudio(){const{blockedAudioAppend:t,operationQueue:r}=this;t&&r&&(this.blockedAudioAppend=null,r.unblockAudio(t.op))}onBufferAppending(t,r){const{tracks:o}=this,{data:l,type:c,parent:h,frag:d,part:m,chunkMeta:v,offset:x}=r,T=v.buffering[c],{sn:E,cc:A}=d,k=self.performance.now();T.start=k;const _=d.stats.buffering,R=m?m.stats.buffering:null;_.start===0&&(_.start=k),R&&R.start===0&&(R.start=k);const P=o.audio;let D=!1;c==="audio"&&(P==null?void 0:P.container)==="audio/mpeg"&&(D=!this.lastMpegAudioChunk||v.id===1||this.lastMpegAudioChunk.sn!==v.sn,this.lastMpegAudioChunk=v);const N=o.video,$=N==null?void 0:N.buffer;if($&&E!=="initSegment"){const C=m||d,K=this.blockedAudioAppend;if(c==="audio"&&h!=="main"&&!this.blockedAudioAppend&&!(N.ending||N.ended)){const Q=C.start+C.duration*.05,fe=$.buffered,O=this.currentOp("video");!fe.length&&!O?this.blockAudio(C):!O&&!qt.isBuffered($,Q)&&this.lastVideoAppendEnd<Q&&this.blockAudio(C)}else if(c==="video"){const ee=C.end;if(K){const Q=K.frag.start;(ee>Q||ee<this.lastVideoAppendEnd||qt.isBuffered($,Q))&&this.unblockAudio()}this.lastVideoAppendEnd=ee}}const V=(m||d).start,W={label:`append-${c}`,execute:()=>{var C;T.executeStart=self.performance.now();const K=(C=this.tracks[c])==null?void 0:C.buffer;K&&(D?this.updateTimestampOffset(K,V,.1,c,E,A):x!==void 0&&Ye(x)&&this.updateTimestampOffset(K,x,1e-6,c,E,A)),this.appendExecutor(l,c)},onStart:()=>{},onComplete:()=>{const C=self.performance.now();T.executeEnd=T.end=C,_.first===0&&(_.first=C),R&&R.first===0&&(R.first=C);const K={};this.sourceBuffers.forEach(([ee,Q])=>{ee&&(K[ee]=qt.getBuffered(Q))}),this.appendErrors[c]=0,c==="audio"||c==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(H.BUFFER_APPENDED,{type:c,frag:d,part:m,chunkMeta:v,parent:d.type,timeRanges:K})},onError:C=>{var K;const ee={type:pt.MEDIA_ERROR,parent:d.type,details:we.BUFFER_APPEND_ERROR,sourceBufferName:c,frag:d,part:m,chunkMeta:v,error:C,err:C,fatal:!1},Q=(K=this.media)==null?void 0:K.error;if(C.code===DOMException.QUOTA_EXCEEDED_ERR||C.name=="QuotaExceededError"||"quota"in C)ee.details=we.BUFFER_FULL_ERROR;else if(C.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!Q)ee.errorAction=Op(!0);else if(C.name===yW&&this.sourceBufferCount===0)ee.errorAction=Op(!0);else{const fe=++this.appendErrors[c];this.warn(`Failed ${fe}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${c}" sourceBuffer (${Q||"no media error"})`),(fe>=this.hls.config.appendErrorMaxRetry||Q)&&(ee.fatal=!0)}this.hls.trigger(H.ERROR,ee)}};this.log(`queuing "${c}" append sn: ${E}${m?" p: "+m.index:""} of ${d.type===lt.MAIN?"level":"track"} ${d.level} cc: ${A}`),this.append(W,c,this.isPending(this.tracks[c]))}getFlushOp(t,r,o){return this.log(`queuing "${t}" remove ${r}-${o}`),{label:"remove",execute:()=>{this.removeExecutor(t,r,o)},onStart:()=>{},onComplete:()=>{this.hls.trigger(H.BUFFER_FLUSHED,{type:t})},onError:l=>{this.warn(`Failed to remove ${r}-${o} from "${t}" SourceBuffer`,l)}}}onBufferFlushing(t,r){const{type:o,startOffset:l,endOffset:c}=r;o?this.append(this.getFlushOp(o,l,c),o):this.sourceBuffers.forEach(([h])=>{h&&this.append(this.getFlushOp(h,l,c),h)})}onFragParsed(t,r){const{frag:o,part:l}=r,c=[],h=l?l.elementaryStreams:o.elementaryStreams;h[jn.AUDIOVIDEO]?c.push("audiovideo"):(h[jn.AUDIO]&&c.push("audio"),h[jn.VIDEO]&&c.push("video"));const d=()=>{const m=self.performance.now();o.stats.buffering.end=m,l&&(l.stats.buffering.end=m);const v=l?l.stats:o.stats;this.hls.trigger(H.FRAG_BUFFERED,{frag:o,part:l,stats:v,id:o.type})};c.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${o.type} level: ${o.level} sn: ${o.sn}`),this.blockBuffers(d,c).catch(m=>{this.warn(`Fragment buffered callback ${m}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(t,r){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([t])=>{if(t){const r=this.tracks[t];if(r)return!r.ended||r.ending}return!1})}onBufferEos(t,r){var o;this.sourceBuffers.forEach(([h])=>{if(h){const d=this.tracks[h];(!r.type||r.type===h)&&(d.ending=!0,d.ended||(d.ended=!0,this.log(`${h} buffer reached EOS`)))}});const l=((o=this.overrides)==null?void 0:o.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([h])=>{var d;return h&&!((d=this.tracks[h])!=null&&d.ended)})?l?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:h}=this;if(!h||h.readyState!=="open"){h&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${h.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),h.endOfStream(),this.hls.trigger(H.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(H.BUFFERED_TO_END,void 0)):r.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([t])=>{if(t!==null){const r=this.tracks[t];r&&(r.ending=!1)}})}onLevelUpdated(t,{details:r}){r.fragments.length&&(this.details=r,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const t=this.getDurationAndRange();t&&this.updateMediaSource(t)})}onError(t,r){if(r.details===we.BUFFER_APPEND_ERROR&&r.frag){var o;const l=(o=r.errorAction)==null?void 0:o.nextAutoLevel;Ye(l)&&l!==r.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:t,details:r,media:o}=this;if(!o||r===null||!this.sourceBufferCount)return;const l=t.config,c=o.currentTime,h=r.levelTargetDuration,d=r.live&&l.liveBackBufferLength!==null?l.liveBackBufferLength:l.backBufferLength;if(Ye(d)&&d>=0){const v=Math.max(d,h),x=Math.floor(c/h)*h-v;this.flushBackBuffer(c,h,x)}const m=l.frontBufferFlushThreshold;if(Ye(m)&&m>0){const v=Math.max(l.maxBufferLength,m),x=Math.max(v,h),T=Math.floor(c/h)*h+x;this.flushFrontBuffer(c,h,T)}}flushBackBuffer(t,r,o){this.sourceBuffers.forEach(([l,c])=>{if(c){const d=qt.getBuffered(c);if(d.length>0&&o>d.start(0)){var h;this.hls.trigger(H.BACK_BUFFER_REACHED,{bufferEnd:o});const m=this.tracks[l];if((h=this.details)!=null&&h.live)this.hls.trigger(H.LIVE_BACK_BUFFER_REACHED,{bufferEnd:o});else if(m!=null&&m.ended){this.log(`Cannot flush ${l} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(H.BUFFER_FLUSHING,{startOffset:0,endOffset:o,type:l})}}})}flushFrontBuffer(t,r,o){this.sourceBuffers.forEach(([l,c])=>{if(c){const h=qt.getBuffered(c),d=h.length;if(d<2)return;const m=h.start(d-1),v=h.end(d-1);if(o>m||t>=m&&t<=v)return;this.hls.trigger(H.BUFFER_FLUSHING,{startOffset:m,endOffset:1/0,type:l})}})}getDurationAndRange(){var t;const{details:r,mediaSource:o}=this;if(!r||!this.media||(o==null?void 0:o.readyState)!=="open")return null;const l=r.edge;if(r.live&&this.hls.config.liveDurationInfinity){if(r.fragments.length&&o.setLiveSeekableRange){const v=Math.max(0,r.fragmentStart),x=Math.max(v,l);return{duration:1/0,start:v,end:x}}return{duration:1/0}}const c=(t=this.overrides)==null?void 0:t.duration;if(c)return Ye(c)?{duration:c}:null;const h=this.media.duration,d=Ye(o.duration)?o.duration:0;return l>d&&l>h||!Ye(h)?{duration:l}:null}updateMediaSource({duration:t,start:r,end:o}){const l=this.mediaSource;!this.media||!l||l.readyState!=="open"||(l.duration!==t&&(Ye(t)&&this.log(`Updating MediaSource duration to ${t.toFixed(3)}`),l.duration=t),r!==void 0&&o!==void 0&&(this.log(`MediaSource duration is set to ${l.duration}. Setting seekable range to ${r}-${o}.`),l.setLiveSeekableRange(r,o)))}get tracksReady(){const t=this.pendingTrackCount;return t>0&&(t>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:t,pendingTrackCount:r,tracks:o}=this;if(this.log(`checkPendingTracks (pending: ${r} codec events expected: ${t}) ${Un(o)}`),this.tracksReady){var l;const c=(l=this.transferData)==null?void 0:l.tracks;c&&Object.keys(c).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const t={};this.sourceBuffers.forEach(([r,o])=>{if(r){const l=this.tracks[r];t[r]={buffer:o,container:l.container,codec:l.codec,supplemental:l.supplemental,levelCodec:l.levelCodec,id:l.id,metadata:l.metadata}}}),this.hls.trigger(H.BUFFER_CREATED,{tracks:t}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([r])=>{this.executeNext(r)})}else{const t=new Error("could not create source buffer for media codec(s)");this.hls.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:t,reason:t.message})}}createSourceBuffers(){const{tracks:t,sourceBuffers:r,mediaSource:o}=this;if(!o)throw new Error("createSourceBuffers called when mediaSource was null");for(const c in t){const h=c,d=t[h];if(this.isPending(d)){const m=this.getTrackCodec(d,h),v=`${d.container};codecs=${m}`;d.codec=m,this.log(`creating sourceBuffer(${v})${this.currentOp(h)?" Queued":""} ${Un(d)}`);try{const x=o.addSourceBuffer(v),T=S_(h),E=[h,x];r[T]=E,d.buffer=x}catch(x){var l;this.error(`error while trying to add sourceBuffer: ${x.message}`),this.shiftAndExecuteNext(h),(l=this.operationQueue)==null||l.removeBlockers(),delete this.tracks[h],this.hls.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:x,sourceBufferName:h,mimeType:v,parent:d.id});return}this.trackSourceBuffer(h,d)}}this.bufferCreated()}getTrackCodec(t,r){const o=t.supplemental;let l=t.codec;o&&(r==="video"||r==="audiovideo")&&Dv(o,"video")&&(l=pxe(l,o));const c=BS(l,t.levelCodec);return c?r.slice(0,5)==="audio"?Mw(c,this.appendSource):c:""}trackSourceBuffer(t,r){const o=r.buffer;if(!o)return;const l=this.getTrackCodec(r,t);this.tracks[t]={buffer:o,codec:l,container:r.container,levelCodec:r.levelCodec,supplemental:r.supplemental,metadata:r.metadata,id:r.id,listeners:[]},this.removeBufferListeners(t),this.addBufferListener(t,"updatestart",this.onSBUpdateStart),this.addBufferListener(t,"updateend",this.onSBUpdateEnd),this.addBufferListener(t,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(t,"bufferedchange",(c,h)=>{const d=h.removedRanges;d!=null&&d.length&&this.hls.trigger(H.BUFFER_FLUSHED,{type:c})})}get mediaSrc(){var t,r;const o=((t=this.media)==null||(r=t.querySelector)==null?void 0:r.call(t,"source"))||this.media;return o==null?void 0:o.src}onSBUpdateStart(t){const r=this.currentOp(t);r&&r.onStart()}onSBUpdateEnd(t){var r;if(((r=this.mediaSource)==null?void 0:r.readyState)==="closed"){this.resetBuffer(t);return}const o=this.currentOp(t);o&&(o.onComplete(),this.shiftAndExecuteNext(t))}onSBUpdateError(t,r){var o;const l=new Error(`${t} SourceBuffer error. MediaSource readyState: ${(o=this.mediaSource)==null?void 0:o.readyState}`);this.error(`${l}`,r),this.hls.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.BUFFER_APPENDING_ERROR,sourceBufferName:t,error:l,fatal:!1});const c=this.currentOp(t);c&&c.onError(l)}updateTimestampOffset(t,r,o,l,c,h){const d=r-t.timestampOffset;Math.abs(d)>=o&&(this.log(`Updating ${l} SourceBuffer timestampOffset to ${r} (sn: ${c} cc: ${h})`),t.timestampOffset=r)}removeExecutor(t,r,o){const{media:l,mediaSource:c}=this,h=this.tracks[t],d=h==null?void 0:h.buffer;if(!l||!c||!d){this.warn(`Attempting to remove from the ${t} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(t);return}const m=Ye(l.duration)?l.duration:1/0,v=Ye(c.duration)?c.duration:1/0,x=Math.max(0,r),T=Math.min(o,m,v);T>x&&(!h.ending||h.ended)?(h.ended=!1,this.log(`Removing [${x},${T}] from the ${t} SourceBuffer`),d.remove(x,T)):this.shiftAndExecuteNext(t)}appendExecutor(t,r){const o=this.tracks[r],l=o==null?void 0:o.buffer;if(!l)throw new ESe(`Attempting to append to the ${r} SourceBuffer, but it does not exist`);o.ending=!1,o.ended=!1,l.appendBuffer(t)}blockUntilOpen(t){if(this.isUpdating()||this.isQueued())this.blockBuffers(t).catch(r=>{this.warn(`SourceBuffer blocked callback ${r}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{t()}catch(r){this.warn(`Callback run without blocking ${this.operationQueue} ${r}`)}}isUpdating(){return this.sourceBuffers.some(([t,r])=>t&&r.updating)}isQueued(){return this.sourceBuffers.some(([t])=>t&&!!this.currentOp(t))}isPending(t){return!!t&&!t.buffer}blockBuffers(t,r=this.sourceBufferTypes){if(!r.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(t);const{operationQueue:o}=this,l=r.map(h=>this.appendBlocker(h));return r.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(l).then(h=>{o===this.operationQueue&&(t(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(t){t.forEach(r=>{var o;const l=(o=this.tracks[r])==null?void 0:o.buffer;!l||l.updating||this.shiftAndExecuteNext(r)})}append(t,r,o){this.operationQueue&&this.operationQueue.append(t,r,o)}appendBlocker(t){if(this.operationQueue)return this.operationQueue.appendBlocker(t)}currentOp(t){return this.operationQueue?this.operationQueue.current(t):null}executeNext(t){t&&this.operationQueue&&this.operationQueue.executeNext(t)}shiftAndExecuteNext(t){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(t)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((t,r)=>t+(this.isPending(this.tracks[r])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((t,[r])=>t+(r?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([t])=>t).filter(t=>!!t)}addBufferListener(t,r,o){const l=this.tracks[t];if(!l)return;const c=l.buffer;if(!c)return;const h=o.bind(this,t);l.listeners.push({event:r,listener:h}),c.addEventListener(r,h)}removeBufferListeners(t){const r=this.tracks[t];if(!r)return;const o=r.buffer;o&&(r.listeners.forEach(l=>{o.removeEventListener(l.event,l.listener)}),r.listeners.length=0)}}function i9(i){const t=i.querySelectorAll("source");[].slice.call(t).forEach(r=>{i.removeChild(r)})}function ASe(i,t){const r=self.document.createElement("source");r.type="video/mp4",r.src=t,i.appendChild(r)}function S_(i){return i==="audio"?1:0}class aD{constructor(t){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(t){this.streamController=t}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:t}=this;t.on(H.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(H.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(H.MANIFEST_PARSED,this.onManifestParsed,this),t.on(H.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(H.BUFFER_CODECS,this.onBufferCodecs,this),t.on(H.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:t}=this;t.off(H.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(H.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(H.MANIFEST_PARSED,this.onManifestParsed,this),t.off(H.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(H.BUFFER_CODECS,this.onBufferCodecs,this),t.off(H.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(t,r){const o=this.hls.levels[r.droppedLevel];this.isLevelAllowed(o)&&this.restrictedLevels.push({bitrate:o.bitrate,height:o.height,width:o.width})}onMediaAttaching(t,r){this.media=r.media instanceof HTMLVideoElement?r.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(t,r){const o=this.hls;this.restrictedLevels=[],this.firstLevel=r.firstLevel,o.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onLevelsUpdated(t,r){this.timer&&Ye(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(t,r){this.hls.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const t=this.hls.levels;if(t.length){const r=this.hls,o=this.getMaxLevel(t.length-1);o!==this.autoLevelCapping&&r.logger.log(`Setting autoLevelCapping to ${o}: ${t[o].height}p@${t[o].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),r.autoLevelCapping=o,r.autoLevelEnabled&&r.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=r.autoLevelCapping}}}getMaxLevel(t){const r=this.hls.levels;if(!r.length)return-1;const o=r.filter((l,c)=>this.isLevelAllowed(l)&&c<=t);return this.clientRect=null,aD.getMaxLevelByMediaSize(o,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const t=this.media,r={width:0,height:0};if(t){const o=t.getBoundingClientRect();r.width=o.width,r.height=o.height,!r.width&&!r.height&&(r.width=o.right-o.left||t.width||0,r.height=o.bottom-o.top||t.height||0)}return this.clientRect=r,r}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let t=1;if(!this.hls.config.ignoreDevicePixelRatio)try{t=self.devicePixelRatio}catch{}return Math.min(t,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(t){return!this.restrictedLevels.some(o=>t.bitrate===o.bitrate&&t.width===o.width&&t.height===o.height)}static getMaxLevelByMediaSize(t,r,o){if(!(t!=null&&t.length))return-1;const l=(d,m)=>m?d.width!==m.width||d.height!==m.height:!0;let c=t.length-1;const h=Math.max(r,o);for(let d=0;d<t.length;d+=1){const m=t[d];if((m.width>=h||m.height>=h)&&l(m,t[d+1])){c=d;break}}return c}}const ISe={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},ks=ISe,CSe={HLS:"h"},kSe=CSe;class al{constructor(t,r){Array.isArray(t)&&(t=t.map(o=>o instanceof al?o:new al(o))),this.value=t,this.params=r}}const _Se="Dict";function RSe(i){return Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":typeof i=="object"?JSON.stringify(i):String(i)}function LSe(i,t,r,o){return new Error(`failed to ${i} "${RSe(t)}" as ${r}`,{cause:o})}function ll(i,t,r){return LSe("serialize",i,t,r)}class xW{constructor(t){this.description=t}}const s9="Bare Item",PSe="Boolean";function DSe(i){if(typeof i!="boolean")throw ll(i,PSe);return i?"?1":"?0"}function NSe(i){return btoa(String.fromCharCode(...i))}const MSe="Byte Sequence";function OSe(i){if(ArrayBuffer.isView(i)===!1)throw ll(i,MSe);return`:${NSe(i)}:`}const jSe="Integer";function USe(i){return i<-999999999999999||999999999999999<i}function TW(i){if(USe(i))throw ll(i,jSe);return i.toString()}function FSe(i){return`@${TW(i.getTime()/1e3)}`}function SW(i,t){if(i<0)return-SW(-i,t);const r=Math.pow(10,t);if(Math.abs(i*r%1-.5)<Number.EPSILON){const l=Math.floor(i*r);return(l%2===0?l:l+1)/r}else return Math.round(i*r)/r}const BSe="Decimal";function $Se(i){const t=SW(i,3);if(Math.floor(Math.abs(t)).toString().length>12)throw ll(i,BSe);const r=t.toString();return r.includes(".")?r:`${r}.0`}const VSe="String",GSe=/[\x00-\x1f\x7f]+/;function HSe(i){if(GSe.test(i))throw ll(i,VSe);return`"${i.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function qSe(i){return i.description||i.toString().slice(7,-1)}const KSe="Token";function o9(i){const t=qSe(i);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t)===!1)throw ll(t,KSe);return t}function PL(i){switch(typeof i){case"number":if(!Ye(i))throw ll(i,s9);return Number.isInteger(i)?TW(i):$Se(i);case"string":return HSe(i);case"symbol":return o9(i);case"boolean":return DSe(i);case"object":if(i instanceof Date)return FSe(i);if(i instanceof Uint8Array)return OSe(i);if(i instanceof xW)return o9(i);default:throw ll(i,s9)}}const zSe="Key";function DL(i){if(/^[a-z*][a-z0-9\-_.*]*$/.test(i)===!1)throw ll(i,zSe);return i}function lD(i){return i==null?"":Object.entries(i).map(([t,r])=>r===!0?`;${DL(t)}`:`;${DL(t)}=${PL(r)}`).join("")}function wW(i){return i instanceof al?`${PL(i.value)}${lD(i.params)}`:PL(i)}function WSe(i){return`(${i.value.map(wW).join(" ")})${lD(i.params)}`}function YSe(i,t={whitespace:!0}){if(typeof i!="object"||i==null)throw ll(i,_Se);const r=i instanceof Map?i.entries():Object.entries(i),o=t!=null&&t.whitespace?" ":"";return Array.from(r).map(([l,c])=>{c instanceof al||(c=new al(c));let h=DL(l);return c.value===!0?h+=lD(c.params):(h+="=",Array.isArray(c.value)?h+=WSe(c):h+=wW(c)),h}).join(`,${o}`)}function EW(i,t){return YSe(i,t)}const $a="CMCD-Object",br="CMCD-Request",$d="CMCD-Session",Zu="CMCD-Status",XSe={br:$a,ab:$a,d:$a,ot:$a,tb:$a,tpb:$a,lb:$a,tab:$a,lab:$a,url:$a,pb:br,bl:br,tbl:br,dl:br,ltc:br,mtp:br,nor:br,nrr:br,rc:br,sn:br,sta:br,su:br,ttfb:br,ttfbb:br,ttlb:br,cmsdd:br,cmsds:br,smrt:br,df:br,cs:br,ts:br,cid:$d,pr:$d,sf:$d,sid:$d,st:$d,v:$d,msd:$d,bs:Zu,bsd:Zu,cdn:Zu,rtp:Zu,bg:Zu,pt:Zu,ec:Zu,e:Zu},QSe={REQUEST:br};function JSe(i){return Object.keys(i).reduce((t,r)=>{var o;return(o=i[r])===null||o===void 0||o.forEach(l=>t[l]=r),t},{})}function ZSe(i,t){const r={};if(!i)return r;const o=Object.keys(i),l=t?JSe(t):{};return o.reduce((c,h)=>{var d;const m=XSe[h]||l[h]||QSe.REQUEST,v=(d=c[m])!==null&&d!==void 0?d:c[m]={};return v[h]=i[h],c},r)}function ewe(i){return["ot","sf","st","e","sta"].includes(i)}function twe(i){return typeof i=="number"?Ye(i):i!=null&&i!==""&&i!==!1}const bW="event";function nwe(i,t){const r=new URL(i),o=new URL(t);if(r.origin!==o.origin)return i;const l=r.pathname.split("/").slice(1),c=o.pathname.split("/").slice(1,-1);for(;l[0]===c[0];)l.shift(),c.shift();for(;c.length;)c.shift(),l.unshift("..");return l.join("/")+r.search+r.hash}const qS=i=>Math.round(i),NL=(i,t)=>Array.isArray(i)?i.map(r=>NL(r,t)):i instanceof al&&typeof i.value=="string"?new al(NL(i.value,t),i.params):(t.baseUrl&&(i=nwe(i,t.baseUrl)),t.version===1?encodeURIComponent(i):i),pS=i=>qS(i/100)*100,rwe=(i,t)=>{let r=i;return t.version>=2&&(i instanceof al&&typeof i.value=="string"?r=new al([i]):typeof i=="string"&&(r=[i])),NL(r,t)},iwe={br:qS,d:qS,bl:pS,dl:pS,mtp:pS,nor:rwe,rtp:pS,tb:qS},AW="request",IW="response",uD=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],swe=["e"],owe=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function BE(i){return owe.test(i)}function awe(i){return uD.includes(i)||swe.includes(i)||BE(i)}const CW=["d","dl","nor","ot","rtp","su"];function lwe(i){return uD.includes(i)||CW.includes(i)||BE(i)}const uwe=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function cwe(i){return uD.includes(i)||CW.includes(i)||uwe.includes(i)||BE(i)}const dwe=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function hwe(i){return dwe.includes(i)||BE(i)}const fwe={[IW]:cwe,[bW]:awe,[AW]:lwe};function kW(i,t={}){const r={};if(i==null||typeof i!="object")return r;const o=t.version||i.v||1,l=t.reportingMode||AW,c=o===1?hwe:fwe[l];let h=Object.keys(i).filter(c);const d=t.filter;typeof d=="function"&&(h=h.filter(d));const m=l===IW||l===bW;m&&!h.includes("ts")&&h.push("ts"),o>1&&!h.includes("v")&&h.push("v");const v=Nn({},iwe,t.formatters),x={version:o,reportingMode:l,baseUrl:t.baseUrl};return h.sort().forEach(T=>{let E=i[T];const A=v[T];if(typeof A=="function"&&(E=A(E,x)),T==="v"){if(o===1)return;E=o}T=="pr"&&E===1||(m&&T==="ts"&&!Ye(E)&&(E=Date.now()),twe(E)&&(ewe(T)&&typeof E=="string"&&(E=new xW(E)),r[T]=E))}),r}function pwe(i,t={}){const r={};if(!i)return r;const o=kW(i,t),l=ZSe(o,t==null?void 0:t.customHeaderMap);return Object.entries(l).reduce((c,[h,d])=>{const m=EW(d,{whitespace:!1});return m&&(c[h]=m),c},r)}function mwe(i,t,r){return Nn(i,pwe(t,r))}const gwe="CMCD";function vwe(i,t={}){return i?EW(kW(i,t),{whitespace:!1}):""}function ywe(i,t={}){if(!i)return"";const r=vwe(i,t);return encodeURIComponent(r)}function xwe(i,t={}){if(!i)return"";const r=ywe(i,t);return`${gwe}=${r}`}const a9=/CMCD=[^&#]+/;function Twe(i,t,r){const o=xwe(t,r);if(!o)return i;if(a9.test(i))return i.replace(a9,o);const l=i.includes("?")?"&":"?";return`${i}${l}${o}`}class Swe{constructor(t){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=l=>{try{this.apply(l,{ot:ks.MANIFEST,su:!this.initialized})}catch(c){this.hls.logger.warn("Could not generate manifest CMCD data.",c)}},this.applyFragmentData=l=>{try{const{frag:c,part:h}=l,d=this.hls.levels[c.level],m=this.getObjectType(c),v={d:(h||c).duration*1e3,ot:m};(m===ks.VIDEO||m===ks.AUDIO||m==ks.MUXED)&&(v.br=d.bitrate/1e3,v.tb=this.getTopBandwidth(m)/1e3,v.bl=this.getBufferLength(m));const x=h?this.getNextPart(h):this.getNextFrag(c);x!=null&&x.url&&x.url!==c.url&&(v.nor=x.url),this.apply(l,v)}catch(c){this.hls.logger.warn("Could not generate segment CMCD data.",c)}},this.hls=t;const r=this.config=t.config,{cmcd:o}=r;o!=null&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=o.sessionId||t.sessionId,this.cid=o.contentId,this.useHeaders=o.useHeaders===!0,this.includeKeys=o.includeKeys,this.registerListeners())}registerListeners(){const t=this.hls;t.on(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(H.MEDIA_DETACHED,this.onMediaDetached,this),t.on(H.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const t=this.hls;t.off(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(H.MEDIA_DETACHED,this.onMediaDetached,this),t.off(H.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(t,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(t,r){var o,l;this.audioBuffer=(o=r.tracks.audio)==null?void 0:o.buffer,this.videoBuffer=(l=r.tracks.video)==null?void 0:l.buffer}createData(){var t;return{v:1,sf:kSe.HLS,sid:this.sid,cid:this.cid,pr:(t=this.media)==null?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(t,r={}){Nn(r,this.createData());const o=r.ot===ks.INIT||r.ot===ks.VIDEO||r.ot===ks.MUXED;this.starved&&o&&(r.bs=!0,r.su=!0,this.starved=!1),r.su==null&&(r.su=this.buffering);const{includeKeys:l}=this;l&&(r=Object.keys(r).reduce((h,d)=>(l.includes(d)&&(h[d]=r[d]),h),{}));const c={baseUrl:t.url};this.useHeaders?(t.headers||(t.headers={}),mwe(t.headers,r,c)):t.url=Twe(t.url,r,c)}getNextFrag(t){var r;const o=(r=this.hls.levels[t.level])==null?void 0:r.details;if(o){const l=t.sn-o.startSN;return o.fragments[l+1]}}getNextPart(t){var r;const{index:o,fragment:l}=t,c=(r=this.hls.levels[l.level])==null||(r=r.details)==null?void 0:r.partList;if(c){const{sn:h}=l;for(let d=c.length-1;d>=0;d--){const m=c[d];if(m.index===o&&m.fragment.sn===h)return c[d+1]}}}getObjectType(t){const{type:r}=t;if(r==="subtitle")return ks.TIMED_TEXT;if(t.sn==="initSegment")return ks.INIT;if(r==="audio")return ks.AUDIO;if(r==="main")return this.hls.audioTracks.length?ks.VIDEO:ks.MUXED}getTopBandwidth(t){let r=0,o;const l=this.hls;if(t===ks.AUDIO)o=l.audioTracks;else{const c=l.maxAutoLevel,h=c>-1?c+1:l.levels.length;o=l.levels.slice(0,h)}return o.forEach(c=>{c.bitrate>r&&(r=c.bitrate)}),r>0?r:NaN}getBufferLength(t){const r=this.media,o=t===ks.AUDIO?this.audioBuffer:this.videoBuffer;return!o||!r?NaN:qt.bufferInfo(o,r.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:t}=this.config,r=this.applyPlaylistData,o=t||this.config.loader;return class{constructor(c){this.loader=void 0,this.loader=new o(c)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(c,h,d){r(c),this.loader.load(c,h,d)}}}createFragmentLoader(){const{fLoader:t}=this.config,r=this.applyFragmentData,o=t||this.config.loader;return class{constructor(c){this.loader=void 0,this.loader=new o(c)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(c,h,d){r(c),this.loader.load(c,h,d)}}}}const wwe=3e5;class Ewe extends Vo{constructor(t){super("content-steering",t.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=t,this.registerListeners()}registerListeners(){const t=this.hls;t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(H.MANIFEST_PARSED,this.onManifestParsed,this),t.on(H.ERROR,this.onError,this)}unregisterListeners(){const t=this.hls;t&&(t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(H.MANIFEST_PARSED,this.onManifestParsed,this),t.off(H.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((t,r)=>(t.indexOf(r.pathwayId)===-1&&t.push(r.pathwayId),t),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(t){this.updatePathwayPriority(t)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const t=this.timeToLoad*1e3-(performance.now()-this.updated);if(t>0){this.scheduleRefresh(this.uri,t);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(t){const r=this.levels;r&&(this.levels=r.filter(o=>o!==t))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(t,r){const{contentSteering:o}=r;o!==null&&(this.pathwayId=o.pathwayId,this.uri=o.uri,this.started&&this.startLoad())}onManifestParsed(t,r){this.audioTracks=r.audioTracks,this.subtitleTracks=r.subtitleTracks}onError(t,r){const{errorAction:o}=r;if((o==null?void 0:o.action)===Li.SendAlternateToPenaltyBox&&o.flags===no.MoveAllAlternatesMatchingHost){const l=this.levels;let c=this._pathwayPriority,h=this.pathwayId;if(r.context){const{groupId:d,pathwayId:m,type:v}=r.context;d&&l?h=this.getPathwayForGroupId(d,v,h):m&&(h=m)}h in this.penalizedPathways||(this.penalizedPathways[h]=performance.now()),!c&&l&&(c=this.pathways()),c&&c.length>1&&(this.updatePathwayPriority(c),o.resolved=this.pathwayId!==h),r.details===we.BUFFER_APPEND_ERROR&&!r.fatal?o.resolved=!0:o.resolved||this.warn(`Could not resolve ${r.details} ("${r.error.message}") with content-steering for Pathway: ${h} levels: ${l&&l.length} priorities: ${Un(c)} penalized: ${Un(this.penalizedPathways)}`)}}filterParsedLevels(t){this.levels=t;let r=this.getLevelsForPathway(this.pathwayId);if(r.length===0){const o=t[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${o}"`),r=this.getLevelsForPathway(o),this.pathwayId=o}return r.length!==t.length&&this.log(`Found ${r.length}/${t.length} levels in Pathway "${this.pathwayId}"`),r}getLevelsForPathway(t){return this.levels===null?[]:this.levels.filter(r=>t===r.pathwayId)}updatePathwayPriority(t){this._pathwayPriority=t;let r;const o=this.penalizedPathways,l=performance.now();Object.keys(o).forEach(c=>{l-o[c]>wwe&&delete o[c]});for(let c=0;c<t.length;c++){const h=t[c];if(h in o)continue;if(h===this.pathwayId)return;const d=this.hls.nextLoadLevel,m=this.hls.levels[d];if(r=this.getLevelsForPathway(h),r.length>0){this.log(`Setting Pathway to "${h}"`),this.pathwayId=h,Wz(r),this.hls.trigger(H.LEVELS_UPDATED,{levels:r});const v=this.hls.levels[d];m&&v&&this.levels&&(v.attrs["STABLE-VARIANT-ID"]!==m.attrs["STABLE-VARIANT-ID"]&&v.bitrate!==m.bitrate&&this.log(`Unstable Pathways change from bitrate ${m.bitrate} to ${v.bitrate}`),this.hls.nextLoadLevel=d);break}}}getPathwayForGroupId(t,r,o){const l=this.getLevelsForPathway(o).concat(this.levels||[]);for(let c=0;c<l.length;c++)if(r===sn.AUDIO_TRACK&&l[c].hasAudioGroup(t)||r===sn.SUBTITLE_TRACK&&l[c].hasSubtitleGroup(t))return l[c].pathwayId;return o}clonePathways(t){const r=this.levels;if(!r)return;const o={},l={};t.forEach(c=>{const{ID:h,"BASE-ID":d,"URI-REPLACEMENT":m}=c;if(r.some(x=>x.pathwayId===h))return;const v=this.getLevelsForPathway(d).map(x=>{const T=new ur(x.attrs);T["PATHWAY-ID"]=h;const E=T.AUDIO&&`${T.AUDIO}_clone_${h}`,A=T.SUBTITLES&&`${T.SUBTITLES}_clone_${h}`;E&&(o[T.AUDIO]=E,T.AUDIO=E),A&&(l[T.SUBTITLES]=A,T.SUBTITLES=A);const k=_W(x.uri,T["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",m),_=new Mv({attrs:T,audioCodec:x.audioCodec,bitrate:x.bitrate,height:x.height,name:x.name,url:k,videoCodec:x.videoCodec,width:x.width});if(x.audioGroups)for(let R=1;R<x.audioGroups.length;R++)_.addGroupId("audio",`${x.audioGroups[R]}_clone_${h}`);if(x.subtitleGroups)for(let R=1;R<x.subtitleGroups.length;R++)_.addGroupId("text",`${x.subtitleGroups[R]}_clone_${h}`);return _});r.push(...v),l9(this.audioTracks,o,m,h),l9(this.subtitleTracks,l,m,h)})}loadSteeringManifest(t){const r=this.hls.config,o=r.loader;this.loader&&this.loader.destroy(),this.loader=new o(r);let l;try{l=new self.URL(t)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${t}`);return}if(l.protocol!=="data:"){const x=(this.hls.bandwidthEstimate||r.abrEwmaDefaultEstimate)|0;l.searchParams.set("_HLS_pathway",this.pathwayId),l.searchParams.set("_HLS_throughput",""+x)}const c={responseType:"json",url:l.href},h=r.steeringManifestLoadPolicy.default,d=h.errorRetry||h.timeoutRetry||{},m={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:d.maxNumRetry||0,retryDelay:d.retryDelayMs||0,maxRetryDelay:d.maxRetryDelayMs||0},v={onSuccess:(x,T,E,A)=>{this.log(`Loaded steering manifest: "${l}"`);const k=x.data;if((k==null?void 0:k.VERSION)!==1){this.log(`Steering VERSION ${k.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=k.TTL;const{"RELOAD-URI":_,"PATHWAY-CLONES":R,"PATHWAY-PRIORITY":P}=k;if(_)try{this.uri=new self.URL(_,l).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${_}`);return}this.scheduleRefresh(this.uri||E.url),R&&this.clonePathways(R);const D={steeringManifest:k,url:l.toString()};this.hls.trigger(H.STEERING_MANIFEST_LOADED,D),P&&this.updatePathwayPriority(P)},onError:(x,T,E,A)=>{if(this.log(`Error loading steering manifest: ${x.code} ${x.text} (${T.url})`),this.stopLoad(),x.code===410){this.enabled=!1,this.log(`Steering manifest ${T.url} no longer available`);return}let k=this.timeToLoad*1e3;if(x.code===429){const _=this.loader;if(typeof(_==null?void 0:_.getResponseHeader)=="function"){const R=_.getResponseHeader("Retry-After");R&&(k=parseFloat(R)*1e3)}this.log(`Steering manifest ${T.url} rate limited`);return}this.scheduleRefresh(this.uri||T.url,k)},onTimeout:(x,T,E)=>{this.log(`Timeout loading steering manifest (${T.url})`),this.scheduleRefresh(this.uri||T.url)}};this.log(`Requesting steering manifest: ${l}`),this.loader.load(c,m,v)}scheduleRefresh(t,r=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var o;const l=(o=this.hls)==null?void 0:o.media;if(l&&!l.ended){this.loadSteeringManifest(t);return}this.scheduleRefresh(t,this.timeToLoad*1e3)},r)}}function l9(i,t,r,o){i&&Object.keys(t).forEach(l=>{const c=i.filter(h=>h.groupId===l).map(h=>{const d=Nn({},h);return d.details=void 0,d.attrs=new ur(d.attrs),d.url=d.attrs.URI=_W(h.url,h.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),d.groupId=d.attrs["GROUP-ID"]=t[l],d.attrs["PATHWAY-ID"]=o,d});i.push(...c)})}function _W(i,t,r,o){const{HOST:l,PARAMS:c,[r]:h}=o;let d;t&&(d=h==null?void 0:h[t],d&&(i=d));const m=new self.URL(i);return l&&!d&&(m.host=l),c&&Object.keys(c).sort().forEach(v=>{v&&m.searchParams.set(v,c[v])}),m.href}class Up extends Vo{constructor(t){super("eme",t.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Up.CDMCleanupPromise?[Up.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=r=>{const{initDataType:o,initData:l}=r,c=`"${r.type}" event: init data type: "${o}"`;if(this.debug(c),l!==null){if(!this.keyFormatPromise){let h=Object.keys(this.keySystemAccessPromises);h.length||(h=F0(this.config));const d=h.map(f_).filter(m=>!!m);this.keyFormatPromise=this.getKeyFormatPromise(d)}this.keyFormatPromise.then(h=>{const d=VS(h);if(o!=="sinf"||d!==fr.FAIRPLAY){this.log(`Ignoring "${r.type}" event with init data type: "${o}" for selected key-system ${d}`);return}let m;try{const A=ni(new Uint8Array(l)),k=QP(JSON.parse(A).sinf),_=Ez(k);if(!_)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");m=new Uint8Array(_.subarray(8,24))}catch(A){this.warn(`${c} Failed to parse sinf: ${A}`);return}const v=Pi(m),{keyIdToKeySessionPromise:x,mediaKeySessions:T}=this;let E=x[v];for(let A=0;A<T.length;A++){const k=T[A],_=k.decryptdata;if(!_.keyId)continue;const R=Pi(_.keyId);if(Bw(m,_.keyId)||_.uri.replace(/-/g,"").indexOf(v)!==-1){if(E=x[R],!E)continue;if(_.pssh)break;delete x[R],_.pssh=new Uint8Array(l),_.keyId=m,E=x[v]=E.then(()=>this.generateRequestWithPreferredKeySession(k,o,l,"encrypted-event-key-match")),E.catch(P=>this.handleError(P));break}}E||this.handleError(new Error(`Key ID ${v} not encountered in playlist. Key-system sessions ${T.length}.`))}).catch(h=>this.handleError(h))}},this.onWaitingForKey=r=>{this.log(`"${r.type}" event`)},this.hls=t,this.config=t.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(H.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(H.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(H.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(H.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(H.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(H.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(H.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(H.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(H.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(H.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(t){const{drmSystems:r,widevineLicenseUrl:o}=this.config,l=r==null?void 0:r[t];if(l)return l.licenseUrl;if(t===fr.WIDEVINE&&o)return o}getLicenseServerUrlOrThrow(t){const r=this.getLicenseServerUrl(t);if(r===void 0)throw new Error(`no license server URL configured for key-system "${t}"`);return r}getServerCertificateUrl(t){const{drmSystems:r}=this.config,o=r==null?void 0:r[t];if(o)return o.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${t}"]`)}attemptKeySystemAccess(t){const r=this.hls.levels,o=(h,d,m)=>!!h&&m.indexOf(h)===d,l=r.map(h=>h.audioCodec).filter(o),c=r.map(h=>h.videoCodec).filter(o);return l.length+c.length===0&&c.push("avc1.42e01e"),new Promise((h,d)=>{const m=v=>{const x=v.shift();this.getMediaKeysPromise(x,l,c).then(T=>h({keySystem:x,mediaKeys:T})).catch(T=>{v.length?m(v):T instanceof to?d(T):d(new to({type:pt.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_ACCESS,error:T,fatal:!0},T.message))})};m(t)})}requestMediaKeySystemAccess(t,r){const{requestMediaKeySystemAccessFunc:o}=this.config;if(typeof o!="function"){let l=`Configured requestMediaKeySystemAccess is not a function ${o}`;return Bz===null&&self.location.protocol==="http:"&&(l=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(l))}return o(t,r)}getMediaKeysPromise(t,r,o){var l;const c=rTe(t,r,o,this.config.drmSystemOptions||{});let h=this.keySystemAccessPromises[t],d=(l=h)==null?void 0:l.keySystemAccess;if(!d){this.log(`Requesting encrypted media "${t}" key-system access with config: ${Un(c)}`),d=this.requestMediaKeySystemAccess(t,c);const m=h=this.keySystemAccessPromises[t]={keySystemAccess:d};return d.catch(v=>{this.log(`Failed to obtain access to key-system "${t}": ${v}`)}),d.then(v=>{this.log(`Access for key-system "${v.keySystem}" obtained`);const x=this.fetchServerCertificate(t);this.log(`Create media-keys for "${t}"`);const T=m.mediaKeys=v.createMediaKeys().then(E=>(this.log(`Media-keys created for "${t}"`),m.hasMediaKeys=!0,x.then(A=>A?this.setMediaKeysServerCertificate(E,t,A):E)));return T.catch(E=>{this.error(`Failed to create media-keys for "${t}"}: ${E}`)}),T})}return d.then(()=>h.mediaKeys)}createMediaKeySessionContext({decryptdata:t,keySystem:r,mediaKeys:o}){this.log(`Creating key-system session "${r}" keyId: ${Pi(t.keyId||[])} keyUri: ${t.uri}`);const l=o.createSession(),c={decryptdata:t,keySystem:r,mediaKeys:o,mediaKeysSession:l,keyStatus:"status-pending"};return this.mediaKeySessions.push(c),c}renewKeySession(t){const r=t.decryptdata;if(r.pssh){const o=this.createMediaKeySessionContext(t),l=mS(r),c="cenc";this.keyIdToKeySessionPromise[l]=this.generateRequestWithPreferredKeySession(o,c,r.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)}updateKeySession(t,r){const o=t.mediaKeysSession;return this.log(`Updating key-session "${o.sessionId}" for keyId ${Pi(t.decryptdata.keyId||[])}
      } (data length: ${r.byteLength})`),o.update(r)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(t=>({keySystem:t,hasMediaKeys:this.keySystemAccessPromises[t].hasMediaKeys})).filter(({hasMediaKeys:t})=>!!t).map(({keySystem:t})=>f_(t)).filter(t=>!!t)}getKeySystemAccess(t){return this.getKeySystemSelectionPromise(t).then(({keySystem:r,mediaKeys:o})=>this.attemptSetMediaKeys(r,o))}selectKeySystem(t){return new Promise((r,o)=>{this.getKeySystemSelectionPromise(t).then(({keySystem:l})=>{const c=f_(l);c?r(c):o(new Error(`Unable to find format for key-system "${l}"`))}).catch(o)})}selectKeySystemFormat(t){const r=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${t.sn} ${t.type}: ${t.level}) key formats ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)),this.keyFormatPromise}getKeyFormatPromise(t){const r=F0(this.config),o=t.map(VS).filter(l=>!!l&&r.indexOf(l)!==-1);return this.selectKeySystem(o)}getKeyStatus(t){const{mediaKeySessions:r}=this;for(let o=0;o<r.length;o++){const l=bwe(t,r[o]);if(l)return l}}loadKey(t){const r=t.keyInfo.decryptdata,o=mS(r),l=this.bannedKeyIds[o];if(l||this.getKeyStatus(r)==="internal-error"){const d=u9(l||"internal-error",r);return this.handleError(d,t.frag),Promise.reject(d)}const c=`(keyId: ${o} format: "${r.keyFormat}" method: ${r.method} uri: ${r.uri})`;this.log(`Starting session for key ${c}`);const h=this.keyIdToKeySessionPromise[o];if(!h){const d=this.getKeySystemForKeyPromise(r).then(({keySystem:m,mediaKeys:v})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${t.frag.sn} ${t.frag.type}: ${t.frag.level} using key ${c}`),this.attemptSetMediaKeys(m,v).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:m,mediaKeys:v,decryptdata:r}))))).then(m=>{const v="cenc",x=r.pssh?r.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(m,v,x,"playlist-key")});return d.catch(m=>this.handleError(m,t.frag)),this.keyIdToKeySessionPromise[o]=d,d}return h.catch(d=>{if(d instanceof to){const m=_n({},d.data);this.getKeyStatus(r)==="internal-error"&&(m.decryptdata=r);const v=new to(m,d.message);this.handleError(v,t.frag)}}),h}throwIfDestroyed(t="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(t,r){if(this.hls)if(t instanceof to){r&&(t.data.frag=r);const o=t.data.decryptdata;this.error(`${t.message}${o?` (${Pi(o.keyId||[])})`:""}`),this.hls.trigger(H.ERROR,t.data)}else this.error(t.message),this.hls.trigger(H.ERROR,{type:pt.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0})}getKeySystemForKeyPromise(t){const r=mS(t),o=this.keyIdToKeySessionPromise[r];if(!o){const l=VS(t.keyFormat),c=l?[l]:F0(this.config);return this.attemptKeySystemAccess(c)}return o}getKeySystemSelectionPromise(t){if(t.length||(t=F0(this.config)),t.length===0)throw new to({type:pt.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Un({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(t)}attemptSetMediaKeys(t,r){if(this.mediaResolved=void 0,this.mediaKeys===r)return Promise.resolve();const o=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${t}"`);const l=Promise.all(o).then(()=>this.media?this.media.setMediaKeys(r):new Promise((c,h)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return h(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=r,this.media.setMediaKeys(r).then(c).catch(h)}}));return this.mediaKeys=r,this.setMediaKeysQueue.push(l),l.then(()=>{this.log(`Media-keys set for "${t}"`),o.push(l),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(c=>o.indexOf(c)===-1)})}generateRequestWithPreferredKeySession(t,r,o,l){var c;const h=(c=this.config.drmSystems)==null||(c=c[t.keySystem])==null?void 0:c.generateRequest;if(h)try{const k=h.call(this.hls,r,o,t);if(!k)throw new Error("Invalid response from configured generateRequest filter");r=k.initDataType,o=k.initData?k.initData:null,t.decryptdata.pssh=o?new Uint8Array(o):null}catch(k){if(this.warn(k.message),this.hls&&this.hls.config.debug)throw k}if(o===null)return this.log(`Skipping key-session request for "${l}" (no initData)`),Promise.resolve(t);const d=mS(t.decryptdata),m=t.decryptdata.uri;this.log(`Generating key-session request for "${l}" keyId: ${d} URI: ${m} (init data type: ${r} length: ${o.byteLength})`);const v=new ZP,x=t._onmessage=k=>{const _=t.mediaKeysSession;if(!_){v.emit("error",new Error("invalid state"));return}const{messageType:R,message:P}=k;this.log(`"${R}" message event for session "${_.sessionId}" message size: ${P.byteLength}`),R==="license-request"||R==="license-renewal"?this.renewLicense(t,P).catch(D=>{v.eventNames().length?v.emit("error",D):this.handleError(D)}):R==="license-release"?t.keySystem===fr.FAIRPLAY&&this.updateKeySession(t,IL("acknowledged")).then(()=>this.removeSession(t)).catch(D=>this.handleError(D)):this.warn(`unhandled media key message type "${R}"`)},T=(k,_)=>{_.keyStatus=k;let R;k.startsWith("usable")?v.emit("resolved"):k==="internal-error"||k==="output-restricted"||k==="output-downscaled"?R=u9(k,_.decryptdata):k==="expired"?R=new Error(`key expired (keyId: ${d})`):k==="released"?R=new Error("key released"):k==="status-pending"||this.warn(`unhandled key status change "${k}" (keyId: ${d})`),R&&(v.eventNames().length?v.emit("error",R):this.handleError(R))},E=t._onkeystatuseschange=k=>{if(!t.mediaKeysSession){v.emit("error",new Error("invalid state"));return}const R=this.getKeyStatuses(t);if(!Object.keys(R).some($=>R[$]!=="status-pending"))return;if(R[d]==="expired"){this.log(`Expired key ${Un(R)} in key-session "${t.mediaKeysSession.sessionId}"`),this.renewKeySession(t);return}let D=R[d];if(D)T(D,t);else{var N;t.keyStatusTimeouts||(t.keyStatusTimeouts={}),(N=t.keyStatusTimeouts)[d]||(N[d]=self.setTimeout(()=>{if(!t.mediaKeysSession||!this.mediaKeys)return;const V=this.getKeyStatus(t.decryptdata);if(V&&V!=="status-pending")return this.log(`No status for keyId ${d} in key-session "${t.mediaKeysSession.sessionId}". Using session key-status ${V} from other session.`),T(V,t);this.log(`key status for ${d} in key-session "${t.mediaKeysSession.sessionId}" timed out after 1000ms`),D="internal-error",T(D,t)},1e3)),this.log(`No status for keyId ${d} (${Un(R)}).`)}};fs(t.mediaKeysSession,"message",x),fs(t.mediaKeysSession,"keystatuseschange",E);const A=new Promise((k,_)=>{v.on("error",_),v.on("resolved",k)});return t.mediaKeysSession.generateRequest(r,o).then(()=>{this.log(`Request generated for key-session "${t.mediaKeysSession.sessionId}" keyId: ${d} URI: ${m}`)}).catch(k=>{throw new to({type:pt.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_SESSION,error:k,decryptdata:t.decryptdata,fatal:!1},`Error generating key-session request: ${k}`)}).then(()=>A).catch(k=>(v.removeAllListeners(),this.removeSession(t).then(()=>{throw k}))).then(()=>(v.removeAllListeners(),t))}getKeyStatuses(t){const r={};return t.mediaKeysSession.keyStatuses.forEach((o,l)=>{if(typeof l=="string"&&typeof o=="object"){const d=l;l=o,o=d}const c="buffer"in l?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l);if(t.keySystem===fr.PLAYREADY&&c.length===16){const d=Pi(c);r[d]=o,Uz(c)}const h=Pi(c);o==="internal-error"&&(this.bannedKeyIds[h]=o),this.log(`key status change "${o}" for keyStatuses keyId: ${h} key-session "${t.mediaKeysSession.sessionId}"`),r[h]=o}),r}fetchServerCertificate(t){const r=this.config,o=r.loader,l=new o(r),c=this.getServerCertificateUrl(t);return c?(this.log(`Fetching server certificate for "${t}"`),new Promise((h,d)=>{const m={responseType:"arraybuffer",url:c},v=r.certLoadPolicy.default,x={loadPolicy:v,timeout:v.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},T={onSuccess:(E,A,k,_)=>{h(E.data)},onError:(E,A,k,_)=>{d(new to({type:pt.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:k,response:_n({url:m.url,data:void 0},E)},`"${t}" certificate request failed (${c}). Status: ${E.code} (${E.text})`))},onTimeout:(E,A,k)=>{d(new to({type:pt.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:k,response:{url:m.url,data:void 0}},`"${t}" certificate request timed out (${c})`))},onAbort:(E,A,k)=>{d(new Error("aborted"))}};l.load(m,x,T)})):Promise.resolve()}setMediaKeysServerCertificate(t,r,o){return new Promise((l,c)=>{t.setServerCertificate(o).then(h=>{this.log(`setServerCertificate ${h?"success":"not supported by CDM"} (${o.byteLength}) on "${r}"`),l(t)}).catch(h=>{c(new to({type:pt.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:h,fatal:!0},h.message))})})}renewLicense(t,r){return this.requestLicense(t,new Uint8Array(r)).then(o=>this.updateKeySession(t,new Uint8Array(o)).catch(l=>{throw new to({type:pt.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:t.decryptdata,error:l,fatal:!1},l.message)}))}unpackPlayReadyKeyMessage(t,r){const o=String.fromCharCode.apply(null,new Uint16Array(r.buffer));if(!o.includes("PlayReadyKeyMessage"))return t.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r;const l=new DOMParser().parseFromString(o,"application/xml"),c=l.querySelectorAll("HttpHeader");if(c.length>0){let x;for(let T=0,E=c.length;T<E;T++){var h,d;x=c[T];const A=(h=x.querySelector("name"))==null?void 0:h.textContent,k=(d=x.querySelector("value"))==null?void 0:d.textContent;A&&k&&t.setRequestHeader(A,k)}}const m=l.querySelector("Challenge"),v=m==null?void 0:m.textContent;if(!v)throw new Error("Cannot find <Challenge> in key message");return IL(atob(v))}setupLicenseXHR(t,r,o,l){const c=this.config.licenseXhrSetup;return c?Promise.resolve().then(()=>{if(!o.decryptdata)throw new Error("Key removed");return c.call(this.hls,t,r,o,l)}).catch(h=>{if(!o.decryptdata)throw h;return t.open("POST",r,!0),c.call(this.hls,t,r,o,l)}).then(h=>(t.readyState||t.open("POST",r,!0),{xhr:t,licenseChallenge:h||l})):(t.open("POST",r,!0),Promise.resolve({xhr:t,licenseChallenge:l}))}requestLicense(t,r){const o=this.config.keyLoadPolicy.default;return new Promise((l,c)=>{const h=this.getLicenseServerUrlOrThrow(t.keySystem);this.log(`Sending license request to URL: ${h}`);const d=new XMLHttpRequest;d.responseType="arraybuffer",d.onreadystatechange=()=>{if(!this.hls||!t.mediaKeysSession)return c(new Error("invalid state"));if(d.readyState===4)if(d.status===200){this._requestLicenseFailureCount=0;let m=d.response;this.log(`License received ${m instanceof ArrayBuffer?m.byteLength:m}`);const v=this.config.licenseResponseCallback;if(v)try{m=v.call(this.hls,d,h,t)}catch(x){this.error(x)}l(m)}else{const m=o.errorRetry,v=m?m.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>v||d.status>=400&&d.status<500)c(new to({type:pt.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:t.decryptdata,fatal:!0,networkDetails:d,response:{url:h,data:void 0,code:d.status,text:d.statusText}},`License Request XHR failed (${h}). Status: ${d.status} (${d.statusText})`));else{const x=v-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${x} attempts left`),this.requestLicense(t,r).then(l,c)}}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=d,this.setupLicenseXHR(d,h,t,r).then(({xhr:m,licenseChallenge:v})=>{t.keySystem==fr.PLAYREADY&&(v=this.unpackPlayReadyKeyMessage(m,v)),m.send(v)}).catch(c)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(t,r){if(!this.config.emeEnabled)return;const o=r.media;this.media=o,fs(o,"encrypted",this.onMediaEncrypted),fs(o,"waitingforkey",this.onWaitingForKey);const l=this.mediaResolved;l?l():this.mediaKeys=o.mediaKeys}onMediaDetached(){const t=this.media;t&&(Ms(t,"encrypted",this.onMediaEncrypted),Ms(t,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var t;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const r=this.mediaResolved;if(r&&r(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const o=this.media,l=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Mc.clearKeyUriToKeyIdMap();const c=l.length;Up.CDMCleanupPromise=Promise.all(l.map(h=>this.removeSession(h)).concat((o==null||(t=o.setMediaKeys(null))==null?void 0:t.catch(h=>{this.log(`Could not clear media keys: ${h}`),this.hls&&this.hls.trigger(H.ERROR,{type:pt.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${h}`)})}))||Promise.resolve())).catch(h=>{this.log(`Could not close sessions and clear media keys: ${h}`),this.hls&&this.hls.trigger(H.ERROR,{type:pt.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${h}`)})}).then(()=>{c&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(t,{sessionKeys:r}){if(!(!r||!this.config.emeEnabled)&&!this.keyFormatPromise){const o=r.reduce((l,c)=>(l.indexOf(c.keyFormat)===-1&&l.push(c.keyFormat),l),[]);this.log(`Selecting key-system from session-keys ${o.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(o)}}removeSession(t){const{mediaKeysSession:r,licenseXhr:o,decryptdata:l}=t;if(r){this.log(`Remove licenses and keys and close session "${r.sessionId}" keyId: ${Pi((l==null?void 0:l.keyId)||[])}`),t._onmessage&&(r.removeEventListener("message",t._onmessage),t._onmessage=void 0),t._onkeystatuseschange&&(r.removeEventListener("keystatuseschange",t._onkeystatuseschange),t._onkeystatuseschange=void 0),o&&o.readyState!==XMLHttpRequest.DONE&&o.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;const c=this.mediaKeySessions.indexOf(t);c>-1&&this.mediaKeySessions.splice(c,1);const{keyStatusTimeouts:h}=t;h&&Object.keys(h).forEach(v=>self.clearTimeout(h[v]));const{drmSystemOptions:d}=this.config;return(sTe(d)?new Promise((v,x)=>{self.setTimeout(()=>x(new Error("MediaKeySession.remove() timeout")),8e3),r.remove().then(v).catch(x)}):Promise.resolve()).catch(v=>{this.log(`Could not remove session: ${v}`),this.hls&&this.hls.trigger(H.ERROR,{type:pt.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${v}`)})}).then(()=>r.close()).catch(v=>{this.log(`Could not close session: ${v}`),this.hls&&this.hls.trigger(H.ERROR,{type:pt.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${v}`)})})}return Promise.resolve()}}Up.CDMCleanupPromise=void 0;function mS(i){if(!i)throw new Error("Could not read keyId of undefined decryptdata");if(i.keyId===null)throw new Error("keyId is null");return Pi(i.keyId)}function bwe(i,t){if(i.keyId&&t.mediaKeysSession.keyStatuses.has(i.keyId))return t.mediaKeysSession.keyStatuses.get(i.keyId);if(i.matches(t.decryptdata))return t.keyStatus}class to extends Error{constructor(t,r){super(r),this.data=void 0,t.error||(t.error=new Error(r)),this.data=t,t.err=t.error}}function u9(i,t){const r=i==="output-restricted",o=r?we.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:we.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new to({type:pt.KEY_SYSTEM_ERROR,details:o,fatal:!1,decryptdata:t},r?"HDCP level output restricted":`key status changed to "${i}"`)}class Awe{constructor(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}setStreamController(t){this.streamController=t}registerListeners(){this.hls.on(H.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(H.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(H.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(H.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(t,r){const o=this.hls.config;if(o.capLevelOnFPSDrop){const l=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=l,l&&typeof l.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),o.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(t,r,o){const l=performance.now();if(r){if(this.lastTime){const c=l-this.lastTime,h=o-this.lastDroppedFrames,d=r-this.lastDecodedFrames,m=1e3*h/c,v=this.hls;if(v.trigger(H.FPS_DROP,{currentDropped:h,currentDecoded:d,totalDroppedFrames:o}),m>0&&h>v.config.fpsDroppedMonitoringThreshold*d){let x=v.currentLevel;v.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+x),x>0&&(v.autoLevelCapping===-1||v.autoLevelCapping>=x)&&(x=x-1,v.trigger(H.FPS_DROP_LEVEL_CAPPING,{level:x,droppedLevel:v.currentLevel}),v.autoLevelCapping=x,this.streamController.nextLevelSwitch())}}this.lastTime=l,this.lastDroppedFrames=o,this.lastDecodedFrames=r}}checkFPSInterval(){const t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){const r=t.getVideoPlaybackQuality();this.checkFPS(t,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)}}function RW(i,t){let r;try{r=new Event("addtrack")}catch{r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=i,t.dispatchEvent(r)}function LW(i,t){const r=i.mode;if(r==="disabled"&&(i.mode="hidden"),i.cues&&!i.cues.getCueById(t.id))try{if(i.addCue(t),!i.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(o){Rn.debug(`[texttrack-utils]: ${o}`);try{const l=new self.TextTrackCue(t.startTime,t.endTime,t.text);l.id=t.id,i.addCue(l)}catch(l){Rn.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${l}`)}}r==="disabled"&&(i.mode=r)}function Ap(i,t){const r=i.mode;if(r==="disabled"&&(i.mode="hidden"),i.cues)for(let o=i.cues.length;o--;)t&&i.cues[o].removeEventListener("enter",t),i.removeCue(i.cues[o]);r==="disabled"&&(i.mode=r)}function ML(i,t,r,o){const l=i.mode;if(l==="disabled"&&(i.mode="hidden"),i.cues&&i.cues.length>0){const c=Cwe(i.cues,t,r);for(let h=0;h<c.length;h++)(!o||o(c[h]))&&i.removeCue(c[h])}l==="disabled"&&(i.mode=l)}function Iwe(i,t){if(t<=i[0].startTime)return 0;const r=i.length-1;if(t>i[r].endTime)return-1;let o=0,l=r,c;for(;o<=l;)if(c=Math.floor((l+o)/2),t<i[c].startTime)l=c-1;else if(t>i[c].startTime&&o<r)o=c+1;else return c;return i[o].startTime-t<t-i[l].startTime?o:l}function Cwe(i,t,r){const o=[],l=Iwe(i,t);if(l>-1)for(let c=l,h=i.length;c<h;c++){const d=i[c];if(d.startTime>=t&&d.endTime<=r)o.push(d);else if(d.startTime>r)return o}return o}function KS(i){const t=[];for(let r=0;r<i.length;r++){const o=i[r];(o.kind==="subtitles"||o.kind==="captions")&&o.label&&t.push(i[r])}return t}class kwe extends oD{constructor(t){super(t,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let r=null;const o=KS(this.media.textTracks);for(let c=0;c<o.length;c++)if(o[c].mode==="hidden")r=o[c];else if(o[c].mode==="showing"){r=o[c];break}const l=this.findTrackForTextTrack(r);this.subtitleTrack!==l&&this.setSubtitleTrack(l)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(t){this._subtitleDisplay=t,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:t}=this;t.on(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.MANIFEST_PARSED,this.onManifestParsed,this),t.on(H.LEVEL_LOADING,this.onLevelLoading,this),t.on(H.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(H.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(H.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.MANIFEST_PARSED,this.onManifestParsed,this),t.off(H.LEVEL_LOADING,this.onLevelLoading,this),t.off(H.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(H.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(H.ERROR,this.onError,this)}onMediaAttached(t,r){this.media=r.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,t)}onMediaDetaching(t,r){const o=this.media;if(!o)return;const l=!!r.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||o.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,l)return;KS(o.textTracks).forEach(h=>{Ap(h)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(t,r){this.tracks=r.subtitleTracks}onSubtitleTrackLoaded(t,r){const{id:o,groupId:l,details:c}=r,h=this.tracksInGroup[o];if(!h||h.groupId!==l){this.warn(`Subtitle track with id:${o} and group:${l} not found in active group ${h==null?void 0:h.groupId}`);return}const d=h.details;h.details=r.details,this.log(`Subtitle track ${o} "${h.name}" lang:${h.lang} group:${l} loaded [${c.startSN}-${c.endSN}]`),o===this.trackId&&this.playlistLoaded(o,r,d)}onLevelLoading(t,r){this.switchLevel(r.level)}onLevelSwitching(t,r){this.switchLevel(r.level)}switchLevel(t){const r=this.hls.levels[t];if(!r)return;const o=r.subtitleGroups||null,l=this.groupIds;let c=this.currentTrack;if(!o||(l==null?void 0:l.length)!==(o==null?void 0:o.length)||o!=null&&o.some(h=>(l==null?void 0:l.indexOf(h))===-1)){this.groupIds=o,this.trackId=-1,this.currentTrack=null;const h=this.tracks.filter(x=>!o||o.indexOf(x.groupId)!==-1);if(h.length)this.selectDefaultTrack&&!h.some(x=>x.default)&&(this.selectDefaultTrack=!1),h.forEach((x,T)=>{x.id=T});else if(!c&&!this.tracksInGroup.length)return;this.tracksInGroup=h;const d=this.hls.config.subtitlePreference;if(!c&&d){this.selectDefaultTrack=!1;const x=Qa(d,h);if(x>-1)c=h[x];else{const T=Qa(d,this.tracks);c=this.tracks[T]}}let m=this.findTrackId(c);m===-1&&c&&(m=this.findTrackId(null));const v={subtitleTracks:h};this.log(`Updating subtitle tracks, ${h.length} track(s) found in "${o==null?void 0:o.join(",")}" group-id`),this.hls.trigger(H.SUBTITLE_TRACKS_UPDATED,v),m!==-1&&this.trackId===-1&&this.setSubtitleTrack(m)}}findTrackId(t){const r=this.tracksInGroup,o=this.selectDefaultTrack;for(let l=0;l<r.length;l++){const c=r[l];if(!(o&&!c.default||!o&&!t)&&(!t||ph(c,t)))return l}if(t){for(let l=0;l<r.length;l++){const c=r[l];if(Fv(t.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<r.length;l++){const c=r[l];if(Fv(t.attrs,c.attrs,["LANGUAGE"]))return l}}return-1}findTrackForTextTrack(t){if(t){const r=this.tracksInGroup;for(let o=0;o<r.length;o++){const l=r[o];if(LL(l,t))return o}}return-1}onError(t,r){r.fatal||!r.context||r.context.type===sn.SUBTITLE_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(t){this.selectDefaultTrack=!1,this.setSubtitleTrack(t)}setSubtitleOption(t){if(this.hls.config.subtitlePreference=t,t){if(t.id===-1)return this.setSubtitleTrack(-1),null;const r=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,r.length){const o=this.currentTrack;if(o&&ph(t,o))return o;const l=Qa(t,this.tracksInGroup);if(l>-1){const c=this.tracksInGroup[l];return this.setSubtitleTrack(l),c}else{if(o)return null;{const c=Qa(t,r);if(c>-1)return r[c]}}}}return null}loadPlaylist(t){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,t)}loadingPlaylist(t,r){super.loadingPlaylist(t,r);const o=t.id,l=t.groupId,c=this.getUrlWithDirectives(t.url,r),h=t.details,d=h==null?void 0:h.age;this.log(`Loading subtitle ${o} "${t.name}" lang:${t.lang} group:${l}${(r==null?void 0:r.msn)!==void 0?" at sn "+r.msn+" part "+r.part:""}${d&&h.live?" age "+d.toFixed(1)+(h.type&&" "+h.type||""):""} ${c}`),this.hls.trigger(H.SUBTITLE_TRACK_LOADING,{url:c,id:o,groupId:l,deliveryDirectives:r||null,track:t})}toggleTrackModes(){const{media:t}=this;if(!t)return;const r=KS(t.textTracks),o=this.currentTrack;let l;if(o&&(l=r.filter(c=>LL(o,c))[0],l||this.warn(`Unable to find subtitle TextTrack with name "${o.name}" and language "${o.lang}"`)),[].slice.call(r).forEach(c=>{c.mode!=="disabled"&&c!==l&&(c.mode="disabled")}),l){const c=this.subtitleDisplay?"showing":"hidden";l.mode!==c&&(l.mode=c)}}setSubtitleTrack(t){const r=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=t;return}if(t<-1||t>=r.length||!Ye(t)){this.warn(`Invalid subtitle track id: ${t}`);return}this.selectDefaultTrack=!1;const o=this.currentTrack,l=r[t]||null;if(this.trackId=t,this.currentTrack=l,this.toggleTrackModes(),!l){this.hls.trigger(H.SUBTITLE_TRACK_SWITCH,{id:t});return}const c=!!l.details&&!l.details.live;if(t===this.trackId&&l===o&&c)return;this.log(`Switching to subtitle-track ${t}`+(l?` "${l.name}" lang:${l.lang} group:${l.groupId}`:""));const{id:h,groupId:d="",name:m,type:v,url:x}=l;this.hls.trigger(H.SUBTITLE_TRACK_SWITCH,{id:h,groupId:d,name:m,type:v,url:x});const T=this.switchParams(l.url,o==null?void 0:o.details,l.details);this.loadPlaylist(T)}}function _we(){try{return crypto.randomUUID()}catch{try{const t=URL.createObjectURL(new Blob),r=t.toString();return URL.revokeObjectURL(t),r.slice(r.lastIndexOf("/")+1)}catch{let r=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{const c=(r+Math.random()*16)%16|0;return r=Math.floor(r/16),(l=="x"?c:c&3|8).toString(16)})}}}function ev(i){let t=5381,r=i.length;for(;r;)t=t*33^i.charCodeAt(--r);return(t>>>0).toString()}const Fp=.025;let Hw=function(i){return i[i.Point=0]="Point",i[i.Range=1]="Range",i}({});function Rwe(i,t,r){return`${i.identifier}-${r+1}-${ev(t)}`}class Lwe{constructor(t,r){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=r,this.dateRange=t,this.setDateRange(t)}setDateRange(t){this.dateRange=t,this.resumeOffset=t.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=t.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=t.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=t.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var t;this.appendInPlaceStarted=!1,(t=this.assetListLoader)==null||t.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(t){var r;if(t>0&&t>=this.assetList.length)return!0;const o=this.playoutLimit;return t<=0||isNaN(o)?!1:o===0?!0:(((r=this.assetList[t])==null?void 0:r.startOffset)||0)>o}findAssetIndex(t){return this.assetList.indexOf(t)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const t=this.dateRange.startTime;if(this.snapOptions.out){const r=this.dateRange.tagAnchor;if(r)return w_(t,r)}return t}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const t=this.dateRange.tagAnchor;if(t){const r=this.dateRange.startTime,o=w_(r,t);return r-o<.1}return!1}get resumptionOffset(){const t=this.resumeOffset,r=Ye(t)?t:this.duration;return this.cumulativeDuration+r}get resumeTime(){const t=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const r=this.resumeAnchor;if(r)return w_(t,r)}return t}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Fp))}set appendInPlace(t){if(this.appendInPlaceStarted){this.resetOnResume=!t;return}this.appendInPlaceDisabled=!t}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(t){this._timelineStart=t}get duration(){const t=this.playoutLimit;let r;return this._duration!==null?r=this._duration:this.dateRange.duration?r=this.dateRange.duration:r=this.dateRange.plannedDuration||0,!isNaN(t)&&t<r&&(r=t),r}set duration(t){this._duration=t}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Hw.Range:Hw.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return Pwe(this)}}function w_(i,t){return i-t.start<t.duration/2&&!(Math.abs(i-(t.start+t.duration))<Fp)?t.start:t.start+t.duration}function PW(i,t,r){const o=new self.URL(i,r);return o.protocol!=="data:"&&o.searchParams.set("_HLS_primary_id",t),o}function E_(i,t){for(;(r=i.assetList[++t])!=null&&r.error;)var r;return t}function Pwe(i){return`["${i.identifier}" ${i.cue.pre?"<pre>":i.cue.post?"<post>":""}${i.timelineStart.toFixed(2)}-${i.resumeTime.toFixed(2)}]`}function dp(i){const t=i.timelineStart,r=i.duration||0;return`["${i.identifier}" ${t.toFixed(2)}-${(t+r).toFixed(2)}]`}class Dwe{constructor(t,r,o,l){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(H.PLAYOUT_LIMIT_REACHED,{})};const c=this.hls=new t(r);this.interstitial=o,this.assetItem=l;const h=()=>{this.hasDetails=!0};c.once(H.LEVEL_LOADED,h),c.once(H.AUDIO_TRACK_LOADED,h),c.once(H.SUBTITLE_TRACK_LOADED,h),c.on(H.MEDIA_ATTACHING,(d,{media:m})=>{this.removeMediaListeners(),this.mediaAttached=m,this.interstitial.playoutLimit&&(m.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&c.on(H.BUFFER_APPENDED,()=>{const x=this.bufferedEnd;this.reachedPlayout(x)&&(this._bufferedEosTime=x,c.trigger(H.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const t=this.hls;if(t)if(t.url)t.levels.length&&!t.started&&t.startLoad(-1,!0);else{let r=this.assetItem.uri;try{r=PW(r,t.config.primarySessionId||"").href}catch{}t.loadSource(r)}}bufferedInPlaceToEnd(t){var r;if(!this.appendInPlace)return!1;if((r=this.hls)!=null&&r.bufferedToEnd)return!0;if(!t)return!1;const o=Math.min(this._bufferedEosTime||1/0,this.duration),l=this.timelineOffset,c=qt.bufferInfo(t,l,0);return this.getAssetTime(c.end)>=o-.02}reachedPlayout(t){const o=this.interstitial.playoutLimit;return this.startOffset+t>=o}get destroyed(){var t;return!((t=this.hls)!=null&&t.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var t;return((t=this.hls)==null?void 0:t.media)||null}get bufferedEnd(){const t=this.media||this.mediaAttached;if(!t)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const r=qt.bufferInfo(t,t.currentTime,.001);return this.getAssetTime(r.end)}get currentTime(){const t=this.media||this.mediaAttached;return t?this.getAssetTime(t.currentTime):this._currentTime||0}get duration(){const t=this.assetItem.duration;if(!t)return 0;const r=this.interstitial.playoutLimit;if(r){const o=r-this.startOffset;if(o>0&&o<t)return o}return t}get remaining(){const t=this.duration;return t?Math.max(0,t-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var t;return((t=this.hls)==null?void 0:t.config.timelineOffset)||0}set timelineOffset(t){const r=this.timelineOffset;if(t!==r){const o=t-r;if(Math.abs(o)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=t}}}getAssetTime(t){const r=this.timelineOffset,o=this.duration;return Math.min(Math.max(0,t-r),o)}removeMediaListeners(){const t=this.mediaAttached;t&&(this._currentTime=t.currentTime,this.bufferSnapShot(),t.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var t;(t=this.hls)!=null&&t.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(t){var r;this.loadSource(),(r=this.hls)==null||r.attachMedia(t)}detachMedia(){var t;this.removeMediaListeners(),this.mediaAttached=null,(t=this.hls)==null||t.detachMedia()}resumeBuffering(){var t;(t=this.hls)==null||t.resumeBuffering()}pauseBuffering(){var t;(t=this.hls)==null||t.pauseBuffering()}transferMedia(){var t;return this.bufferSnapShot(),((t=this.hls)==null?void 0:t.transferMedia())||null}resetDetails(){const t=this.hls;if(t&&this.hasDetails){t.stopLoad();const r=o=>delete o.details;t.levels.forEach(r),t.allAudioTracks.forEach(r),t.allSubtitleTracks.forEach(r),this.hasDetails=!1}}on(t,r,o){var l;(l=this.hls)==null||l.on(t,r)}once(t,r,o){var l;(l=this.hls)==null||l.once(t,r)}off(t,r,o){var l;(l=this.hls)==null||l.off(t,r)}toString(){var t;return`HlsAssetPlayer: ${dp(this.assetItem)} ${(t=this.hls)==null?void 0:t.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const c9=.033;class Nwe extends Vo{constructor(t,r){super("interstitials-sched",r),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=t}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(t=>t.reset()),this.events=this.items=null}resetErrorsInRange(t,r){return this.events?this.events.reduce((o,l)=>t<=l.startOffset&&r>l.startOffset?(delete l.error,o+1):o,0):0}get duration(){const t=this.items;return t?t[t.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(t){return t&&this.eventMap[t]||null}hasEvent(t){return t in this.eventMap}findItemIndex(t,r){if(t.event)return this.findEventIndex(t.event.identifier);let o=-1;t.nextEvent?o=this.findEventIndex(t.nextEvent.identifier)-1:t.previousEvent&&(o=this.findEventIndex(t.previousEvent.identifier)+1);const l=this.items;if(l)for(l[o]||(r===void 0&&(r=t.start),o=this.findItemIndexAtTime(r));o>=0&&(c=l[o])!=null&&c.event;){var c;o--}return o}findItemIndexAtTime(t,r){const o=this.items;if(o)for(let l=0;l<o.length;l++){let c=o[l];if(r&&r!=="primary"&&(c=c[r]),t===c.start||t>c.start&&t<c.end)return l}return-1}findJumpRestrictedIndex(t,r){const o=this.items;if(o)for(let l=t;l<=r&&o[l];l++){const c=o[l].event;if(c!=null&&c.restrictions.jump&&!c.appendInPlace)return l}return-1}findEventIndex(t){const r=this.items;if(r)for(let l=r.length;l--;){var o;if(((o=r[l].event)==null?void 0:o.identifier)===t)return l}return-1}findAssetIndex(t,r){const o=t.assetList,l=o.length;if(l>1)for(let c=0;c<l;c++){const h=o[c];if(!h.error){const d=h.timelineStart;if(r===d||r>d&&(r<d+(h.duration||0)||c===l-1))return c}}return 0}get assetIdAtEnd(){var t;const r=(t=this.items)==null||(t=t[this.length-1])==null?void 0:t.event;if(r){const o=r.assetList,l=o[o.length-1];if(l)return l.identifier}return null}parseInterstitialDateRanges(t,r){const o=t.main.details,{dateRanges:l}=o,c=this.events,h=this.parseDateRanges(l,{url:o.url},r),d=Object.keys(l),m=c?c.filter(v=>!d.includes(v.identifier)):[];h.length&&h.sort((v,x)=>{const T=v.cue.pre,E=v.cue.post,A=x.cue.pre,k=x.cue.post;if(T&&!A)return-1;if(A&&!T||E&&!k)return 1;if(k&&!E)return-1;if(!T&&!A&&!E&&!k){const _=v.startTime,R=x.startTime;if(_!==R)return _-R}return v.dateRange.tagOrder-x.dateRange.tagOrder}),this.events=h,m.forEach(v=>{this.removeEvent(v)}),this.updateSchedule(t,m)}updateSchedule(t,r=[],o=!1){const l=this.events||[];if(l.length||r.length||this.length<2){const c=this.items,h=this.parseSchedule(l,t);(o||r.length||(c==null?void 0:c.length)!==h.length||h.some((m,v)=>Math.abs(m.playout.start-c[v].playout.start)>.005||Math.abs(m.playout.end-c[v].playout.end)>.005))&&(this.items=h,this.onScheduleUpdate(r,c))}}parseDateRanges(t,r,o){const l=[],c=Object.keys(t);for(let h=0;h<c.length;h++){const d=c[h],m=t[d];if(m.isInterstitial){let v=this.eventMap[d];v?v.setDateRange(m):(v=new Lwe(m,r),this.eventMap[d]=v,o===!1&&(v.appendInPlace=o)),l.push(v)}}return l}parseSchedule(t,r){const o=[],l=r.main.details,c=l.live?1/0:l.edge;let h=0;if(t=t.filter(m=>!m.error&&!(m.cue.once&&m.hasPlayed)),t.length){this.resolveOffsets(t,r);let m=0,v=0;if(t.forEach((x,T)=>{const E=x.cue.pre,A=x.cue.post,k=t[T-1]||null,_=x.appendInPlace,R=A?c:x.startOffset,P=x.duration,D=x.timelineOccupancy===Hw.Range?P:0,N=x.resumptionOffset,$=(k==null?void 0:k.startTime)===R,V=R+x.cumulativeDuration;let W=_?V+P:R+N;if(E||!A&&R<=0){const K=v;v+=D,x.timelineStart=V;const ee=h;h+=P,o.push({event:x,start:V,end:W,playout:{start:ee,end:h},integrated:{start:K,end:v}})}else if(R<=c){if(!$){const Q=R-m;if(Q>c9){const fe=m,O=v;v+=Q;const re=h;h+=Q;const ce={previousEvent:t[T-1]||null,nextEvent:x,start:fe,end:fe+Q,playout:{start:re,end:h},integrated:{start:O,end:v}};o.push(ce)}else Q>0&&k&&(k.cumulativeDuration+=Q,o[o.length-1].end=R)}A&&(W=V),x.timelineStart=V;const K=v;v+=D;const ee=h;h+=P,o.push({event:x,start:V,end:W,playout:{start:ee,end:h},integrated:{start:K,end:v}})}else return;const C=x.resumeTime;A||C>c?m=c:m=C}),m<c){var d;const x=m,T=v,E=c-m;v+=E;const A=h;h+=E,o.push({previousEvent:((d=o[o.length-1])==null?void 0:d.event)||null,nextEvent:null,start:m,end:x+E,playout:{start:A,end:h},integrated:{start:T,end:v}})}this.setDurations(c,h,v)}else o.push({previousEvent:null,nextEvent:null,start:0,end:c,playout:{start:0,end:c},integrated:{start:0,end:c}}),this.setDurations(c,c,c);return o}setDurations(t,r,o){this.durations={primary:t,playout:r,integrated:o}}resolveOffsets(t,r){const o=r.main.details,l=o.live?1/0:o.edge;let c=0,h=-1;t.forEach((d,m)=>{const v=d.cue.pre,x=d.cue.post,T=v?0:x?l:d.startTime;this.updateAssetDurations(d),h===T?d.cumulativeDuration=c:(c=0,h=T),!x&&d.snapOptions.in&&(d.resumeAnchor=kh(null,o.fragments,d.startOffset+d.resumptionOffset,0,0)||void 0),d.appendInPlace&&!d.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(d,r)||(d.appendInPlace=!1)),!d.appendInPlace&&m+1<t.length&&t[m+1].startTime-t[m].resumeTime<c9&&(t[m+1].appendInPlace=!1,t[m+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${d}`));const A=Ye(d.resumeOffset)?d.resumeOffset:d.duration;c+=A})}primaryCanResumeInPlaceAt(t,r){const o=t.resumeTime,l=t.startTime+t.resumptionOffset;return Math.abs(o-l)>Fp?(this.log(`"${t.identifier}" resumption ${o} not aligned with estimated timeline end ${l}`),!1):!Object.keys(r).some(h=>{const d=r[h].details,m=d.edge;if(o>=m)return this.log(`"${t.identifier}" resumption ${o} past ${h} playlist end ${m}`),!1;const v=kh(null,d.fragments,o);if(!v)return this.log(`"${t.identifier}" resumption ${o} does not align with any fragments in ${h} playlist (${d.fragStart}-${d.fragmentEnd})`),!0;const x=h==="audio"?.175:0;return Math.abs(v.start-o)<Fp+x||Math.abs(v.end-o)<Fp+x?!1:(this.log(`"${t.identifier}" resumption ${o} not aligned with ${h} fragment bounds (${v.start}-${v.end} sn: ${v.sn} cc: ${v.cc})`),!0)})}updateAssetDurations(t){if(!t.assetListLoaded)return;const r=t.timelineStart;let o=0,l=!1,c=!1;for(let h=0;h<t.assetList.length;h++){const d=t.assetList[h],m=r+o;d.startOffset=o,d.timelineStart=m,l||(l=d.duration===null),c||(c=!!d.error);const v=d.error?0:d.duration||0;o+=v}l&&!c?t.duration=Math.max(o,t.duration):t.duration=o}removeEvent(t){t.reset(),delete this.eventMap[t.identifier]}}function ia(i){return`[${i.event?'"'+i.event.identifier+'"':"primary"}: ${i.start.toFixed(2)}-${i.end.toFixed(2)}]`}class Mwe{constructor(t){this.hls=void 0,this.hls=t}destroy(){this.hls=null}loadAssetList(t,r){const o=t.assetListUrl;let l;try{l=PW(o,this.hls.sessionId,t.baseUrl)}catch(E){const A=this.assignAssetListError(t,we.ASSET_LIST_LOAD_ERROR,E,o);this.hls.trigger(H.ERROR,A);return}r&&l.protocol!=="data:"&&l.searchParams.set("_HLS_start_offset",""+r);const c=this.hls.config,h=c.loader,d=new h(c),m={responseType:"json",url:l.href},v=c.interstitialAssetListLoadPolicy.default,x={loadPolicy:v,timeout:v.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},T={onSuccess:(E,A,k,_)=>{const R=E.data,P=R==null?void 0:R.ASSETS;if(!Array.isArray(P)){const D=this.assignAssetListError(t,we.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),k.url,A,_);this.hls.trigger(H.ERROR,D);return}t.assetListResponse=R,this.hls.trigger(H.ASSET_LIST_LOADED,{event:t,assetListResponse:R,networkDetails:_})},onError:(E,A,k,_)=>{const R=this.assignAssetListError(t,we.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${E.code} ${E.text} (${A.url})`),A.url,_,k);this.hls.trigger(H.ERROR,R)},onTimeout:(E,A,k)=>{const _=this.assignAssetListError(t,we.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${A.url})`),A.url,E,k);this.hls.trigger(H.ERROR,_)}};return d.load(m,x,T),this.hls.trigger(H.ASSET_LIST_LOADING,{event:t}),d}assignAssetListError(t,r,o,l,c,h){return t.error=o,{type:pt.NETWORK_ERROR,details:r,fatal:!1,interstitial:t,url:l,error:o,networkDetails:h,stats:c}}}function d9(i){var t;i==null||(t=i.play())==null||t.catch(()=>{})}function gS(i,t){return`[${i}] Advancing timeline position to ${t}`}class Owe extends Vo{constructor(t,r){super("interstitials",t.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const o=this.currentTime;if(o===void 0||this.playbackDisabled||!this.schedule)return;const l=o-this.timelinePos;if(Math.abs(l)<1/7056e5)return;const h=l<=-.01;this.timelinePos=o,this.bufferedPos=o;const d=this.playingItem;if(!d){this.checkBuffer();return}if(h&&this.schedule.resetErrorsInRange(o,o-l)&&this.updateSchedule(!0),this.checkBuffer(),h&&o<d.start||o>=d.end){var m;const A=this.findItemIndex(d);let k=this.schedule.findItemIndexAtTime(o);if(k===-1&&(k=A+(h?-1:1),this.log(`seeked ${h?"back ":""}to position not covered by schedule ${o} (resolving from ${A} to ${k})`)),!this.isInterstitial(d)&&(m=this.media)!=null&&m.paused&&(this.shouldPlay=!1),!h&&k>A){const _=this.schedule.findJumpRestrictedIndex(A+1,k);if(_>A){this.setSchedulePosition(_);return}}this.setSchedulePosition(k);return}const v=this.playingAsset;if(!v){if(this.playingLastItem&&this.isInterstitial(d)){const A=d.event.assetList[0];A&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(o,A))}return}const x=v.timelineStart,T=v.duration||0;if(h&&o<x||o>=x+T){var E;(E=d.event)!=null&&E.appendInPlace&&(this.clearAssetPlayers(d.event,d),this.flushFrontBuffer(o)),this.setScheduleToAssetAtTime(o,v)}},this.onTimeupdate=()=>{const o=this.currentTime;if(o===void 0||this.playbackDisabled)return;if(o>this.timelinePos)this.timelinePos=o,o>this.bufferedPos&&this.checkBuffer();else return;const l=this.playingItem;if(!l||this.playingLastItem)return;if(o>=l.end){this.timelinePos=l.end;const d=this.findItemIndex(l);this.setSchedulePosition(d+1)}const c=this.playingAsset;if(!c)return;const h=c.timelineStart+(c.duration||0);o>=h&&this.setScheduleToAssetAtTime(o,c)},this.onScheduleUpdate=(o,l)=>{const c=this.schedule;if(!c)return;const h=this.playingItem,d=c.events||[],m=c.items||[],v=c.durations,x=o.map(_=>_.identifier),T=!!(d.length||x.length);(T||l)&&this.log(`INTERSTITIALS_UPDATED (${d.length}): ${d}
Schedule: ${m.map(_=>ia(_))} pos: ${this.timelinePos}`),x.length&&this.log(`Removed events ${x}`);let E=null,A=null;h&&(E=this.updateItem(h,this.timelinePos),this.itemsMatch(h,E)?this.playingItem=E:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const k=this.bufferingItem;if(k&&(A=this.updateItem(k,this.bufferedPos),this.itemsMatch(k,A)?this.bufferingItem=A:k.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(k.event,null))),o.forEach(_=>{_.assetList.forEach(R=>{this.clearAssetPlayer(R.identifier,null)})}),this.playerQueue.forEach(_=>{if(_.interstitial.appendInPlace){const R=_.assetItem.timelineStart,P=_.timelineOffset-R;if(P)try{_.timelineOffset=R}catch(D){Math.abs(P)>Fp&&this.warn(`${D} ("${_.assetId}" ${_.timelineOffset}->${R})`)}}}),T||l){if(this.hls.trigger(H.INTERSTITIALS_UPDATED,{events:d.slice(0),schedule:m.slice(0),durations:v,removedIds:x}),this.isInterstitial(h)&&x.includes(h.event.identifier)){this.warn(`Interstitial "${h.event.identifier}" removed while playing`),this.primaryFallback(h.event);return}h&&this.trimInPlace(E,h),k&&A!==E&&this.trimInPlace(A,k),this.checkBuffer()}},this.hls=t,this.HlsPlayerClass=r,this.assetListLoader=new Mwe(t),this.schedule=new Nwe(this.onScheduleUpdate,t.logger),this.registerListeners()}registerListeners(){const t=this.hls;t&&(t.on(H.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(H.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(H.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),t.on(H.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(H.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),t.on(H.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),t.on(H.ASSET_LIST_LOADED,this.onAssetListLoaded,this),t.on(H.BUFFER_APPENDED,this.onBufferAppended,this),t.on(H.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(H.BUFFERED_TO_END,this.onBufferedToEnd,this),t.on(H.MEDIA_ENDED,this.onMediaEnded,this),t.on(H.ERROR,this.onError,this),t.on(H.DESTROYING,this.onDestroying,this))}unregisterListeners(){const t=this.hls;t&&(t.off(H.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(H.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(H.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),t.off(H.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(H.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),t.off(H.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),t.off(H.ASSET_LIST_LOADED,this.onAssetListLoaded,this),t.off(H.BUFFER_CODECS,this.onBufferCodecs,this),t.off(H.BUFFER_APPENDED,this.onBufferAppended,this),t.off(H.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(H.BUFFERED_TO_END,this.onBufferedToEnd,this),t.off(H.MEDIA_ENDED,this.onMediaEnded,this),t.off(H.ERROR,this.onError,this),t.off(H.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var t;(t=this.getBufferingPlayer())==null||t.resumeBuffering()}pauseBuffering(){var t;(t=this.getBufferingPlayer())==null||t.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const t=this.primaryMedia||this.media;t&&this.removeMediaListeners(t)}removeMediaListeners(t){Ms(t,"play",this.onPlay),Ms(t,"pause",this.onPause),Ms(t,"seeking",this.onSeeking),Ms(t,"timeupdate",this.onTimeupdate)}onMediaAttaching(t,r){const o=this.media=r.media;fs(o,"seeking",this.onSeeking),fs(o,"timeupdate",this.onTimeupdate),fs(o,"play",this.onPlay),fs(o,"pause",this.onPause)}onMediaAttached(t,r){const o=this.effectivePlayingItem,l=this.detachedData;if(this.detachedData=null,o===null)this.checkStart();else if(!l){this.clearScheduleState();const c=this.findItemIndex(o);this.setSchedulePosition(c)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(t,r){const o=!!r.transferMedia,l=this.media;if(this.media=null,!o&&(l&&this.removeMediaListeners(l),this.detachedData)){const c=this.getBufferingPlayer();c&&(this.log(`Removing schedule state for detachedData and ${c}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,c.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const t=this,r=()=>t.bufferingItem||t.waitingItem,o=T=>T&&t.getAssetPlayer(T.identifier),l=(T,E,A,k,_)=>{if(T){let R=T[E].start;const P=T.event;if(P){if(E==="playout"||P.timelineOccupancy!==Hw.Point){const D=o(A);(D==null?void 0:D.interstitial)===P&&(R+=D.assetItem.startOffset+D[_])}}else{const D=k==="bufferedPos"?h():t[k];R+=D-T.start}return R}return 0},c=(T,E)=>{var A;if(T!==0&&E!=="primary"&&(A=t.schedule)!=null&&A.length){var k;const _=t.schedule.findItemIndexAtTime(T),R=(k=t.schedule.items)==null?void 0:k[_];if(R){const P=R[E].start-R.start;return T+P}}return T},h=()=>{const T=t.bufferedPos;return T===Number.MAX_VALUE?d("primary"):Math.max(T,0)},d=T=>{var E,A;return(E=t.primaryDetails)!=null&&E.live?t.primaryDetails.edge:((A=t.schedule)==null?void 0:A.durations[T])||0},m=(T,E)=>{var A,k;const _=t.effectivePlayingItem;if(_!=null&&(A=_.event)!=null&&A.restrictions.skip||!t.schedule)return;t.log(`seek to ${T} "${E}"`);const R=t.effectivePlayingItem,P=t.schedule.findItemIndexAtTime(T,E),D=(k=t.schedule.items)==null?void 0:k[P],N=t.getBufferingPlayer(),$=N==null?void 0:N.interstitial,V=$==null?void 0:$.appendInPlace,W=R&&t.itemsMatch(R,D);if(R&&(V||W)){const C=o(t.playingAsset),K=(C==null?void 0:C.media)||t.primaryMedia;if(K){const ee=E==="primary"?K.currentTime:l(R,E,t.playingAsset,"timelinePos","currentTime"),Q=T-ee,fe=(V?ee:K.currentTime)+Q;if(fe>=0&&(!C||V||fe<=C.duration)){K.currentTime=fe;return}}}if(D){let C=T;if(E!=="primary"){const ee=D[E].start,Q=T-ee;C=D.start+Q}const K=!t.isInterstitial(D);if((!t.isInterstitial(R)||R.event.appendInPlace)&&(K||D.event.appendInPlace)){const ee=t.media||(V?N==null?void 0:N.media:null);ee&&(ee.currentTime=C)}else if(R){const ee=t.findItemIndex(R);if(P>ee){const fe=t.schedule.findJumpRestrictedIndex(ee+1,P);if(fe>ee){t.setSchedulePosition(fe);return}}let Q=0;if(K)t.timelinePos=C,t.checkBuffer();else{const fe=D.event.assetList,O=T-(D[E]||D).start;for(let re=fe.length;re--;){const ce=fe[re];if(ce.duration&&O>=ce.startOffset&&O<ce.startOffset+ce.duration){Q=re;break}}}t.setSchedulePosition(P,Q)}}},v=()=>{const T=t.effectivePlayingItem;if(t.isInterstitial(T))return T;const E=r();return t.isInterstitial(E)?E:null},x={get bufferedEnd(){const T=r(),E=t.bufferingItem;if(E&&E===T){var A;return l(E,"playout",t.bufferingAsset,"bufferedPos","bufferedEnd")-E.playout.start||((A=t.bufferingAsset)==null?void 0:A.startOffset)||0}return 0},get currentTime(){const T=v(),E=t.effectivePlayingItem;return E&&E===T?l(E,"playout",t.effectivePlayingAsset,"timelinePos","currentTime")-E.playout.start:0},set currentTime(T){const E=v(),A=t.effectivePlayingItem;A&&A===E&&m(T+A.playout.start,"playout")},get duration(){const T=v();return T?T.playout.end-T.playout.start:0},get assetPlayers(){var T;const E=(T=v())==null?void 0:T.event.assetList;return E?E.map(A=>t.getAssetPlayer(A.identifier)):[]},get playingIndex(){var T;const E=(T=v())==null?void 0:T.event;return E&&t.effectivePlayingAsset?E.findAssetIndex(t.effectivePlayingAsset):-1},get scheduleItem(){return v()}};return this.manager={get events(){var T;return((T=t.schedule)==null||(T=T.events)==null?void 0:T.slice(0))||[]},get schedule(){var T;return((T=t.schedule)==null||(T=T.items)==null?void 0:T.slice(0))||[]},get interstitialPlayer(){return v()?x:null},get playerQueue(){return t.playerQueue.slice(0)},get bufferingAsset(){return t.bufferingAsset},get bufferingItem(){return r()},get bufferingIndex(){const T=r();return t.findItemIndex(T)},get playingAsset(){return t.effectivePlayingAsset},get playingItem(){return t.effectivePlayingItem},get playingIndex(){const T=t.effectivePlayingItem;return t.findItemIndex(T)},primary:{get bufferedEnd(){return h()},get currentTime(){const T=t.timelinePos;return T>0?T:0},set currentTime(T){m(T,"primary")},get duration(){return d("primary")},get seekableStart(){var T;return((T=t.primaryDetails)==null?void 0:T.fragmentStart)||0}},integrated:{get bufferedEnd(){return l(r(),"integrated",t.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return l(t.effectivePlayingItem,"integrated",t.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(T){m(T,"integrated")},get duration(){return d("integrated")},get seekableStart(){var T;return c(((T=t.primaryDetails)==null?void 0:T.fragmentStart)||0,"integrated")}},skip:()=>{const T=t.effectivePlayingItem,E=T==null?void 0:T.event;if(E&&!E.restrictions.skip){const A=t.findItemIndex(T);if(E.appendInPlace){const k=T.playout.start+T.event.duration;m(k+.001,"playout")}else t.advanceAfterAssetEnded(E,A,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var t;const r=this.playingItem,o=(t=this.schedule)==null?void 0:t.items;return!this.playbackStarted||!r||!o?!1:this.findItemIndex(r)===o.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var t,r;if(this.mediaSelection===null)return;const o=this.waitingItem||this.playingItem;if(this.isInterstitial(o)&&!o.event.appendInPlace)return;let l=this.media;!l&&(t=this.bufferingItem)!=null&&(t=t.event)!=null&&t.appendInPlace&&(l=this.primaryMedia);const c=(r=l)==null?void 0:r.currentTime;if(!(c===void 0||!Ye(c)))return c}get primaryMedia(){var t;return this.media||((t=this.detachedData)==null?void 0:t.media)||null}isInterstitial(t){return!!(t!=null&&t.event)}retreiveMediaSource(t,r){const o=this.getAssetPlayer(t);o&&this.transferMediaFromPlayer(o,r)}transferMediaFromPlayer(t,r){const o=t.interstitial.appendInPlace,l=t.media;if(o&&l===this.primaryMedia){if(this.bufferingAsset=null,(!r||this.isInterstitial(r)&&!r.event.appendInPlace)&&r&&l){this.detachedData={media:l};return}const c=t.transferMedia();this.log(`transfer MediaSource from ${t} ${Un(c)}`),this.detachedData=c}else r&&l&&(this.shouldPlay||(this.shouldPlay=!l.paused))}transferMediaTo(t,r){var o,l;if(t.media===r)return;let c=null;const h=this.hls,d=t!==h,m=d&&t.interstitial.appendInPlace,v=(o=this.detachedData)==null?void 0:o.mediaSource;let x;if(h.media)m&&(c=h.transferMedia(),this.detachedData=c),x="Primary";else if(v){const k=this.getBufferingPlayer();k?(c=k.transferMedia(),x=`${k}`):x="detached MediaSource"}else x="detached media";if(!c){if(v)c=this.detachedData,this.log(`using detachedData: MediaSource ${Un(c)}`);else if(!this.detachedData||h.media===r){const k=this.playerQueue;k.length>1&&k.forEach(_=>{if(d&&_.interstitial.appendInPlace!==m){const R=_.interstitial;this.clearInterstitial(_.interstitial,null),R.appendInPlace=!1,R.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${R}`)}}),this.hls.detachMedia(),this.detachedData={media:r}}}const T=c&&"mediaSource"in c&&((l=c.mediaSource)==null?void 0:l.readyState)!=="closed",E=T&&c?c:r;this.log(`${T?"transfering MediaSource":"attaching media"} to ${d?t:"Primary"} from ${x} (media.currentTime: ${r.currentTime})`);const A=this.schedule;if(E===c&&A){const k=d&&t.assetId===A.assetIdAtEnd;E.overrides={duration:A.duration,endOfStream:!d||k,cueRemoval:!d}}t.attachMedia(E)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const t=this.schedule,r=t==null?void 0:t.events;if(!r||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const o=this.timelinePos,l=this.effectivePlayingItem;if(o===-1){const c=this.hls.startPosition;if(this.log(gS("checkStart",c)),this.timelinePos=c,r.length&&r[0].cue.pre){const h=t.findEventIndex(r[0].identifier);this.setSchedulePosition(h)}else if(c>=0||!this.primaryLive){const h=this.timelinePos=c>0?c:0,d=t.findItemIndexAtTime(h);this.setSchedulePosition(d)}}else if(l&&!this.playingItem){const c=t.findItemIndex(l);this.setSchedulePosition(c)}}advanceAssetBuffering(t,r){const o=t.event,l=o.findAssetIndex(r),c=E_(o,l);if(!o.isAssetPastPlayoutLimit(c))this.bufferedToEvent(t,c);else if(this.schedule){var h;const d=(h=this.schedule.items)==null?void 0:h[this.findItemIndex(t)+1];d&&this.bufferedToItem(d)}}advanceAfterAssetEnded(t,r,o){const l=E_(t,o);if(t.isAssetPastPlayoutLimit(l)){if(this.schedule){const c=this.schedule.items;if(c){const h=r+1,d=c.length;if(h>=d){this.setSchedulePosition(-1);return}const m=t.resumeTime;this.timelinePos<m&&(this.log(gS("advanceAfterAssetEnded",m)),this.timelinePos=m,t.appendInPlace&&this.advanceInPlace(m),this.checkBuffer(this.bufferedPos<m)),this.setSchedulePosition(h)}}}else{if(t.appendInPlace){const c=t.assetList[l];c&&this.advanceInPlace(c.timelineStart)}this.setSchedulePosition(r,l)}}setScheduleToAssetAtTime(t,r){const o=this.schedule;if(!o)return;const l=r.parentIdentifier,c=o.getEvent(l);if(c){const h=o.findEventIndex(l),d=o.findAssetIndex(c,t);this.advanceAfterAssetEnded(c,h,d-1)}}setSchedulePosition(t,r){var o;const l=(o=this.schedule)==null?void 0:o.items;if(!l||this.playbackDisabled)return;const c=t>=0?l[t]:null;this.log(`setSchedulePosition ${t}, ${r} (${c&&ia(c)}) pos: ${this.timelinePos}`);const h=this.waitingItem||this.playingItem,d=this.playingLastItem;if(this.isInterstitial(h)){const x=h.event,T=this.playingAsset,E=T==null?void 0:T.identifier,A=E?this.getAssetPlayer(E):null;if(A&&E&&(!this.eventItemsMatch(h,c)||r!==void 0&&E!==x.assetList[r].identifier)){var m;const k=x.findAssetIndex(T);if(this.log(`INTERSTITIAL_ASSET_ENDED ${k+1}/${x.assetList.length} ${dp(T)}`),this.endedAsset=T,this.playingAsset=null,this.hls.trigger(H.INTERSTITIAL_ASSET_ENDED,{asset:T,assetListIndex:k,event:x,schedule:l.slice(0),scheduleIndex:t,player:A}),h!==this.playingItem){this.itemsMatch(h,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(x,this.findItemIndex(this.playingItem),k);return}this.retreiveMediaSource(E,c),A.media&&!((m=this.detachedData)!=null&&m.mediaSource)&&A.detachMedia()}if(!this.eventItemsMatch(h,c)&&(this.endedItem=h,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${x} ${ia(h)}`),x.hasPlayed=!0,this.hls.trigger(H.INTERSTITIAL_ENDED,{event:x,schedule:l.slice(0),scheduleIndex:t}),x.cue.once)){var v;this.updateSchedule();const k=(v=this.schedule)==null?void 0:v.items;if(c&&k){const _=this.findItemIndex(c);this.advanceSchedule(_,k,r,h,d)}return}}this.advanceSchedule(t,l,r,h,d)}advanceSchedule(t,r,o,l,c){const h=this.schedule;if(!h)return;const d=r[t]||null,m=this.primaryMedia,v=this.playerQueue;if(v.length&&v.forEach(x=>{const T=x.interstitial,E=h.findEventIndex(T.identifier);(E<t||E>t+1)&&this.clearInterstitial(T,d)}),this.isInterstitial(d)){this.timelinePos=Math.min(Math.max(this.timelinePos,d.start),d.end);const x=d.event;if(o===void 0){o=h.findAssetIndex(x,this.timelinePos);const k=E_(x,o-1);if(x.isAssetPastPlayoutLimit(k)||x.appendInPlace&&this.timelinePos===d.end){this.advanceAfterAssetEnded(x,t,o);return}o=k}const T=this.waitingItem;this.assetsBuffered(d,m)||this.setBufferingItem(d);let E=this.preloadAssets(x,o);if(this.eventItemsMatch(d,T||l)||(this.waitingItem=d,this.log(`INTERSTITIAL_STARTED ${ia(d)} ${x.appendInPlace?"append in place":""}`),this.hls.trigger(H.INTERSTITIAL_STARTED,{event:x,schedule:r.slice(0),scheduleIndex:t})),!x.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${x}`);return}if(x.assetListLoader&&(x.assetListLoader.destroy(),x.assetListLoader=void 0),!m){this.log(`Waiting for attachMedia to start Interstitial ${x}`);return}this.waitingItem=this.endedItem=null,this.playingItem=d;const A=x.assetList[o];if(!A){this.advanceAfterAssetEnded(x,t,o||0);return}if(E||(E=this.getAssetPlayer(A.identifier)),E===null||E.destroyed){const k=x.assetList.length;this.warn(`asset ${o+1}/${k} player destroyed ${x}`),E=this.createAssetPlayer(x,A,o),E.loadSource()}if(!this.eventItemsMatch(d,this.bufferingItem)&&x.appendInPlace&&this.isAssetBuffered(A))return;this.startAssetPlayer(E,o,r,t,m),this.shouldPlay&&d9(E.media)}else d?(this.resumePrimary(d,t,l),this.shouldPlay&&d9(this.hls.media)):c&&this.isInterstitial(l)&&(this.endedItem=null,this.playingItem=l,l.event.appendInPlace||this.attachPrimary(h.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var t;return(t=this.mediaSelection)==null?void 0:t.main.details}get primaryLive(){var t;return!!((t=this.primaryDetails)!=null&&t.live)}resumePrimary(t,r,o){var l,c;if(this.playingItem=t,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(t),this.log(`resuming ${ia(t)}`),!((l=this.detachedData)!=null&&l.mediaSource)){let d=this.timelinePos;(d<t.start||d>=t.end)&&(d=this.getPrimaryResumption(t,r),this.log(gS("resumePrimary",d)),this.timelinePos=d),this.attachPrimary(d,t)}if(!o)return;const h=(c=this.schedule)==null?void 0:c.items;h&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${ia(t)}`),this.hls.trigger(H.INTERSTITIALS_PRIMARY_RESUMED,{schedule:h.slice(0),scheduleIndex:r}),this.checkBuffer())}getPrimaryResumption(t,r){const o=t.start;if(this.primaryLive){const l=this.primaryDetails;if(r===0)return this.hls.startPosition;if(l&&(o<l.fragmentStart||o>l.edge))return this.hls.liveSyncPosition||-1}return o}isAssetBuffered(t){const r=this.getAssetPlayer(t.identifier);return r!=null&&r.hls?r.hls.bufferedToEnd:qt.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=t.timelineStart+(t.duration||0)}attachPrimary(t,r,o){r?this.setBufferingItem(r):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const l=this.primaryMedia;if(!l)return;const c=this.hls;c.media?this.checkBuffer():(this.transferMediaTo(c,l),o&&this.startLoadingPrimaryAt(t,o)),o||(this.log(gS("attachPrimary",t)),this.timelinePos=t,this.startLoadingPrimaryAt(t,o))}startLoadingPrimaryAt(t,r){var o;const l=this.hls;!l.loadingEnabled||!l.media||Math.abs((((o=l.mainForwardBufferInfo)==null?void 0:o.start)||l.media.currentTime)-t)>.5?l.startLoad(t,r):l.bufferingEnabled||l.resumeBuffering()}onManifestLoading(){var t;this.stopLoad(),(t=this.schedule)==null||t.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(H.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(H.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(t,r){if(r.level===-1||!this.schedule)return;const o=this.hls.levels[r.level];if(!o.details)return;const l=_n(_n({},this.mediaSelection||this.altSelection),{},{main:o});this.mediaSelection=l,this.schedule.parseInterstitialDateRanges(l,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(t,r){const o=this.hls.audioTracks[r.id],l=this.mediaSelection;if(!l){this.altSelection=_n(_n({},this.altSelection),{},{audio:o});return}const c=_n(_n({},l),{},{audio:o});this.mediaSelection=c}onSubtitleTrackUpdated(t,r){const o=this.hls.subtitleTracks[r.id],l=this.mediaSelection;if(!l){this.altSelection=_n(_n({},this.altSelection),{},{subtitles:o});return}const c=_n(_n({},l),{},{subtitles:o});this.mediaSelection=c}onAudioTrackSwitching(t,r){const o=T7(r);this.playerQueue.forEach(({hls:l})=>l&&(l.setAudioOption(r)||l.setAudioOption(o)))}onSubtitleTrackSwitch(t,r){const o=T7(r);this.playerQueue.forEach(({hls:l})=>l&&(l.setSubtitleOption(r)||r.id!==-1&&l.setSubtitleOption(o)))}onBufferCodecs(t,r){const o=r.tracks;o&&(this.requiredTracks=o)}onBufferAppended(t,r){this.checkBuffer()}onBufferFlushed(t,r){const o=this.playingItem;if(o&&!this.itemsMatch(o,this.bufferingItem)&&!this.isInterstitial(o)){const l=this.timelinePos;this.bufferedPos=l,this.checkBuffer()}}onBufferedToEnd(t){if(!this.schedule)return;const r=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&r){for(let l=0;l<r.length;l++){const c=r[l];if(c.cue.post){var o;const h=this.schedule.findEventIndex(c.identifier),d=(o=this.schedule.items)==null?void 0:o[h];this.isInterstitial(d)&&this.eventItemsMatch(d,this.bufferingItem)&&this.bufferedToItem(d,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(t){const r=this.playingItem;if(!this.playingLastItem&&r){const o=this.findItemIndex(r);this.setSchedulePosition(o+1)}else this.shouldPlay=!1}updateItem(t,r){var o;const l=(o=this.schedule)==null?void 0:o.items;if(t&&l){const c=this.findItemIndex(t,r);return l[c]||null}return null}trimInPlace(t,r){if(this.isInterstitial(t)&&t.event.appendInPlace&&r.end-t.end>.25){t.event.assetList.forEach((c,h)=>{t.event.isAssetPastPlayoutLimit(h)&&this.clearAssetPlayer(c.identifier,null)});const o=t.end+.25,l=qt.bufferInfo(this.primaryMedia,o,0);(l.end>o||(l.nextStart||0)>o)&&(this.log(`trim buffered interstitial ${ia(t)} (was ${ia(r)})`),this.attachPrimary(o,null,!0),this.flushFrontBuffer(o))}}itemsMatch(t,r){return!!r&&(t===r||t.event&&r.event&&this.eventItemsMatch(t,r)||!t.event&&!r.event&&this.findItemIndex(t)===this.findItemIndex(r))}eventItemsMatch(t,r){var o;return!!r&&(t===r||t.event.identifier===((o=r.event)==null?void 0:o.identifier))}findItemIndex(t,r){return t&&this.schedule?this.schedule.findItemIndex(t,r):-1}updateSchedule(t=!1){var r;const o=this.mediaSelection;o&&((r=this.schedule)==null||r.updateSchedule(o,[],t))}checkBuffer(t){var r;const o=(r=this.schedule)==null?void 0:r.items;if(!o)return;const l=qt.bufferInfo(this.primaryMedia,this.timelinePos,0);t&&(this.bufferedPos=this.timelinePos),t||(t=l.len<1),this.updateBufferedPos(l.end,o,t)}updateBufferedPos(t,r,o){const l=this.schedule,c=this.bufferingItem;if(this.bufferedPos>t||!l)return;if(r.length===1&&this.itemsMatch(r[0],c)){this.bufferedPos=t;return}const h=this.playingItem,d=this.findItemIndex(h);let m=l.findItemIndexAtTime(t);if(this.bufferedPos<t){var v;const x=this.findItemIndex(c),T=Math.min(x+1,r.length-1),E=r[T];if((m===-1&&c&&t>=c.end||(v=E.event)!=null&&v.appendInPlace&&t+.01>=E.start)&&(m=T),this.isInterstitial(c)){const A=c.event;if(T-d>1&&A.appendInPlace===!1||A.assetList.length===0&&A.assetListLoader)return}if(this.bufferedPos=t,m>x&&m>d)this.bufferedToItem(E);else{const A=this.primaryDetails;this.primaryLive&&A&&t>A.edge-A.targetduration&&E.start<A.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(E)&&this.preloadAssets(E.event,0)}}else o&&h&&!this.itemsMatch(h,c)&&(m===d?this.bufferedToItem(h):m===d+1&&this.bufferedToItem(r[m]))}assetsBuffered(t,r){return t.event.assetList.length===0?!1:!t.event.assetList.some(l=>{const c=this.getAssetPlayer(l.identifier);return!(c!=null&&c.bufferedInPlaceToEnd(r))})}setBufferingItem(t){const r=this.bufferingItem,o=this.schedule;if(!this.itemsMatch(t,r)&&o){const{items:l,events:c}=o;if(!l||!c)return r;const h=this.isInterstitial(t),d=this.getBufferingPlayer();this.bufferingItem=t,this.bufferedPos=Math.max(t.start,Math.min(t.end,this.timelinePos));const m=d?d.remaining:r?r.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${ia(t)}`+(r?` (${m.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(h){const v=o.findAssetIndex(t.event,this.bufferedPos);t.event.assetList.forEach((x,T)=>{const E=this.getAssetPlayer(x.identifier);E&&(T===v&&E.loadSource(),E.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(v=>v.pauseBuffering());this.hls.trigger(H.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:c.slice(0),schedule:l.slice(0),bufferingIndex:this.findItemIndex(t),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==t&&(this.bufferingItem=t);return r}bufferedToItem(t,r=0){const o=this.setBufferingItem(t);if(!this.playbackDisabled){if(this.isInterstitial(t))this.bufferedToEvent(t,r);else if(o!==null){this.bufferingAsset=null;const l=this.detachedData;l?l.mediaSource?this.attachPrimary(t.start,t,!0):this.preloadPrimary(t):this.preloadPrimary(t)}}}preloadPrimary(t){const r=this.findItemIndex(t),o=this.getPrimaryResumption(t,r);this.startLoadingPrimaryAt(o)}bufferedToEvent(t,r){const o=t.event,l=o.assetList.length===0&&!o.assetListLoader,c=o.cue.once;if(l||!c){const h=this.preloadAssets(o,r);if(h!=null&&h.interstitial.appendInPlace){const d=this.primaryMedia;d&&this.bufferAssetPlayer(h,d)}}}preloadAssets(t,r){const o=t.assetUrl,l=t.assetList.length,c=l===0&&!t.assetListLoader,h=t.cue.once;if(c){const m=t.timelineStart;if(t.appendInPlace){var d;const E=this.playingItem;!this.isInterstitial(E)&&(E==null||(d=E.nextEvent)==null?void 0:d.identifier)===t.identifier&&this.flushFrontBuffer(m+.25)}let v,x=0;if(!this.playingItem&&this.primaryLive&&(x=this.hls.startPosition,x===-1&&(x=this.hls.liveSyncPosition||0)),x&&!(t.cue.pre||t.cue.post)){const E=x-m;E>0&&(v=Math.round(E*1e3)/1e3)}if(this.log(`Load interstitial asset ${r+1}/${o?1:l} ${t}${v?` live-start: ${x} start-offset: ${v}`:""}`),o)return this.createAsset(t,0,0,m,t.duration,o);const T=this.assetListLoader.loadAssetList(t,v);T&&(t.assetListLoader=T)}else if(!h&&l){for(let v=r;v<l;v++){const x=t.assetList[v],T=this.getAssetPlayerQueueIndex(x.identifier);(T===-1||this.playerQueue[T].destroyed)&&!x.error&&this.createAssetPlayer(t,x,v)}const m=t.assetList[r];if(m){const v=this.getAssetPlayer(m.identifier);return v&&v.loadSource(),v}}return null}flushFrontBuffer(t){const r=this.requiredTracks;if(!r)return;this.log(`Removing front buffer starting at ${t}`),Object.keys(r).forEach(l=>{this.hls.trigger(H.BUFFER_FLUSHING,{startOffset:t,endOffset:1/0,type:l})})}getAssetPlayerQueueIndex(t){const r=this.playerQueue;for(let o=0;o<r.length;o++)if(t===r[o].assetId)return o;return-1}getAssetPlayer(t){const r=this.getAssetPlayerQueueIndex(t);return this.playerQueue[r]||null}getBufferingPlayer(){const{playerQueue:t,primaryMedia:r}=this;if(r){for(let o=0;o<t.length;o++)if(t[o].media===r)return t[o]}return null}createAsset(t,r,o,l,c,h){const d={parentIdentifier:t.identifier,identifier:Rwe(t,h,r),duration:c,startOffset:o,timelineStart:l,uri:h};return this.createAssetPlayer(t,d,r)}createAssetPlayer(t,r,o){const l=this.hls,c=l.userConfig;let h=c.videoPreference;const d=l.loadLevelObj||l.levels[l.currentLevel];(h||d)&&(h=Nn({},h),d.videoCodec&&(h.videoCodec=d.videoCodec),d.videoRange&&(h.allowedVideoRanges=[d.videoRange]));const m=l.audioTracks[l.audioTrack],v=l.subtitleTracks[l.subtitleTrack];let x=0;if(this.primaryLive||t.appendInPlace){const $=this.timelinePos-r.timelineStart;if($>1){const V=r.duration;V&&$<V&&(x=$)}}const T=r.identifier,E=_n(_n({},c),{},{maxMaxBufferLength:Math.min(180,l.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:l.sessionId,assetPlayerId:T,abrEwmaDefaultEstimate:l.bandwidthEstimate,interstitialsController:void 0,startPosition:x,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:h,audioPreference:m||c.audioPreference,subtitlePreference:v||c.subtitlePreference});t.appendInPlace&&(t.appendInPlaceStarted=!0,r.timelineStart&&(E.timelineOffset=r.timelineStart));const A=E.cmcd;A!=null&&A.sessionId&&A.contentId&&(E.cmcd=Nn({},A,{contentId:ev(r.uri)})),this.getAssetPlayer(T)&&this.warn(`Duplicate date range identifier ${t} and asset ${T}`);const k=new Dwe(this.HlsPlayerClass,E,t,r);this.playerQueue.push(k),t.assetList[o]=r;let _=!0;const R=$=>{if($.live){var V;const K=new Error(`Interstitials MUST be VOD assets ${t}`),ee={fatal:!0,type:pt.OTHER_ERROR,details:we.INTERSTITIAL_ASSET_ITEM_ERROR,error:K},Q=((V=this.schedule)==null?void 0:V.findEventIndex(t.identifier))||-1;this.handleAssetItemError(ee,t,Q,o,K.message);return}const W=$.edge-$.fragmentStart,C=r.duration;(_||C===null||W>C)&&(_=!1,this.log(`Interstitial asset "${T}" duration change ${C} > ${W}`),r.duration=W,this.updateSchedule())};k.on(H.LEVEL_UPDATED,($,{details:V})=>R(V)),k.on(H.LEVEL_PTS_UPDATED,($,{details:V})=>R(V)),k.on(H.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const P=($,V)=>{const W=this.getAssetPlayer(T);if(W&&V.tracks){W.off(H.BUFFER_CODECS,P),W.tracks=V.tracks;const C=this.primaryMedia;this.bufferingAsset===W.assetItem&&C&&!W.media&&this.bufferAssetPlayer(W,C)}};k.on(H.BUFFER_CODECS,P);const D=()=>{var $;const V=this.getAssetPlayer(T);if(this.log(`buffered to end of asset ${V}`),!V||!this.schedule)return;const W=this.schedule.findEventIndex(t.identifier),C=($=this.schedule.items)==null?void 0:$[W];this.isInterstitial(C)&&this.advanceAssetBuffering(C,r)};k.on(H.BUFFERED_TO_END,D);const N=$=>()=>{if(!this.getAssetPlayer(T)||!this.schedule)return;this.shouldPlay=!0;const W=this.schedule.findEventIndex(t.identifier);this.advanceAfterAssetEnded(t,W,$)};return k.once(H.MEDIA_ENDED,N(o)),k.once(H.PLAYOUT_LIMIT_REACHED,N(1/0)),k.on(H.ERROR,($,V)=>{if(!this.schedule)return;const W=this.getAssetPlayer(T);if(V.details===we.BUFFER_STALLED_ERROR){if(W!=null&&W.appendInPlace){this.handleInPlaceStall(t);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(V,t,this.schedule.findEventIndex(t.identifier),o,`Asset player error ${V.error} ${t}`)}),k.on(H.DESTROYING,()=>{if(!this.getAssetPlayer(T)||!this.schedule)return;const V=new Error(`Asset player destroyed unexpectedly ${T}`),W={fatal:!0,type:pt.OTHER_ERROR,details:we.INTERSTITIAL_ASSET_ITEM_ERROR,error:V};this.handleAssetItemError(W,t,this.schedule.findEventIndex(t.identifier),o,V.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${dp(r)}`),this.hls.trigger(H.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:r,assetListIndex:o,event:t,player:k}),k}clearInterstitial(t,r){this.clearAssetPlayers(t,r),t.reset()}clearAssetPlayers(t,r){t.assetList.forEach(o=>{this.clearAssetPlayer(o.identifier,r)})}resetAssetPlayer(t){const r=this.getAssetPlayerQueueIndex(t);if(r!==-1){this.log(`reset asset player "${t}" after error`);const o=this.playerQueue[r];this.transferMediaFromPlayer(o,null),o.resetDetails()}}clearAssetPlayer(t,r){const o=this.getAssetPlayerQueueIndex(t);if(o!==-1){const l=this.playerQueue[o];this.log(`clear ${l} toSegment: ${r&&ia(r)}`),this.transferMediaFromPlayer(l,r),this.playerQueue.splice(o,1),l.destroy()}}emptyPlayerQueue(){let t;for(;t=this.playerQueue.pop();)t.destroy();this.playerQueue=[]}startAssetPlayer(t,r,o,l,c){const{interstitial:h,assetItem:d,assetId:m}=t,v=h.assetList.length,x=this.playingAsset;this.endedAsset=null,this.playingAsset=d,(!x||x.identifier!==m)&&(x&&(this.clearAssetPlayer(x.identifier,o[l]),delete x.error),this.log(`INTERSTITIAL_ASSET_STARTED ${r+1}/${v} ${dp(d)}`),this.hls.trigger(H.INTERSTITIAL_ASSET_STARTED,{asset:d,assetListIndex:r,event:h,schedule:o.slice(0),scheduleIndex:l,player:t})),this.bufferAssetPlayer(t,c)}bufferAssetPlayer(t,r){var o,l;if(!this.schedule)return;const{interstitial:c,assetItem:h}=t,d=this.schedule.findEventIndex(c.identifier),m=(o=this.schedule.items)==null?void 0:o[d];if(!m)return;t.loadSource(),this.setBufferingItem(m),this.bufferingAsset=h;const v=this.getBufferingPlayer();if(v===t)return;const x=c.appendInPlace;if(x&&(v==null?void 0:v.interstitial.appendInPlace)===!1)return;const T=(v==null?void 0:v.tracks)||((l=this.detachedData)==null?void 0:l.tracks)||this.requiredTracks;if(x&&h!==this.playingAsset){if(!t.tracks){this.log(`Waiting for track info before buffering ${t}`);return}if(T&&!pz(T,t.tracks)){const E=new Error(`Asset ${dp(h)} SourceBuffer tracks ('${Object.keys(t.tracks)}') are not compatible with primary content tracks ('${Object.keys(T)}')`),A={fatal:!0,type:pt.OTHER_ERROR,details:we.INTERSTITIAL_ASSET_ITEM_ERROR,error:E},k=c.findAssetIndex(h);this.handleAssetItemError(A,c,d,k,E.message);return}}this.transferMediaTo(t,r)}handleInPlaceStall(t){const r=this.schedule,o=this.primaryMedia;if(!r||!o)return;const l=o.currentTime,c=r.findAssetIndex(t,l),h=t.assetList[c];if(h){const d=this.getAssetPlayer(h.identifier);if(d){const m=d.currentTime||l-h.timelineStart,v=d.duration-m;if(this.warn(`Stalled at ${m} of ${m+v} in ${d} ${t} (media.currentTime: ${l})`),m&&(v/o.playbackRate<.5||d.bufferedInPlaceToEnd(o))&&d.hls){const x=r.findEventIndex(t.identifier);this.advanceAfterAssetEnded(t,x,c)}}}}advanceInPlace(t){const r=this.primaryMedia;r&&r.currentTime<t&&(r.currentTime=t)}handleAssetItemError(t,r,o,l,c){if(t.details===we.BUFFER_STALLED_ERROR)return;const h=r.assetList[l]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${h&&dp(h)} ${t.error}`),!this.schedule)return;const d=(h==null?void 0:h.identifier)||"",m=this.getAssetPlayerQueueIndex(d),v=this.playerQueue[m]||null,x=this.schedule.items,T=Nn({},t,{fatal:!1,errorAction:Op(!0),asset:h,assetListIndex:l,event:r,schedule:x,scheduleIndex:o,player:v});if(this.hls.trigger(H.INTERSTITIAL_ASSET_ERROR,T),!t.fatal)return;const E=this.playingAsset,A=this.bufferingAsset,k=new Error(c);if(h&&(this.clearAssetPlayer(d,null),h.error=k),!r.assetList.some(_=>!_.error))r.error=k;else for(let _=l;_<r.assetList.length;_++)this.resetAssetPlayer(r.assetList[_].identifier);this.updateSchedule(!0),r.error?this.primaryFallback(r):E&&E.identifier===d?this.advanceAfterAssetEnded(r,o,l):A&&A.identifier===d&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,A)}primaryFallback(t){const r=t.timelineStart,o=this.effectivePlayingItem;let l=this.timelinePos;if(o){this.log(`Fallback to primary from event "${t.identifier}" start: ${r} pos: ${l} playing: ${ia(o)} error: ${t.error}`),l===-1&&(l=this.hls.startPosition);const h=this.updateItem(o,l);this.itemsMatch(o,h)&&this.clearInterstitial(t,null),t.appendInPlace&&(this.attachPrimary(r,null),this.flushFrontBuffer(r))}else if(l===-1){this.checkStart();return}if(!this.schedule)return;const c=this.schedule.findItemIndexAtTime(l);this.setSchedulePosition(c)}onAssetListLoaded(t,r){var o,l;const c=r.event,h=c.identifier,d=r.assetListResponse.ASSETS;if(!((o=this.schedule)!=null&&o.hasEvent(h)))return;const m=c.timelineStart,v=c.duration;let x=0;d.forEach((_,R)=>{const P=parseFloat(_.DURATION);this.createAsset(c,R,x,m+x,P,_.URI),x+=P}),c.duration=x,this.log(`Loaded asset-list with duration: ${x} (was: ${v}) ${c}`);const T=this.waitingItem,E=(T==null?void 0:T.event.identifier)===h;this.updateSchedule();const A=(l=this.bufferingItem)==null?void 0:l.event;if(E){var k;const _=this.schedule.findEventIndex(h),R=(k=this.schedule.items)==null?void 0:k[_];if(R){if(!this.playingItem&&this.timelinePos>R.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==_){c.error=new Error(`Interstitial ${d.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${c}`),this.log(c.error.message),this.updateSchedule(!0),this.primaryFallback(c);return}this.setBufferingItem(R)}this.setSchedulePosition(_)}else if((A==null?void 0:A.identifier)===h){const _=c.assetList[0];if(_){const R=this.getAssetPlayer(_.identifier);if(A.appendInPlace){const P=this.primaryMedia;R&&P&&this.bufferAssetPlayer(R,P)}else R&&R.loadSource()}}}onError(t,r){if(this.schedule)switch(r.details){case we.ASSET_LIST_PARSING_ERROR:case we.ASSET_LIST_LOAD_ERROR:case we.ASSET_LIST_LOAD_TIMEOUT:{const o=r.interstitial;o&&(this.updateSchedule(!0),this.primaryFallback(o));break}case we.BUFFER_STALLED_ERROR:{const o=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(o)&&o.event.appendInPlace){this.handleInPlaceStall(o.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const h9=500;class jwe extends JP{constructor(t,r,o){super(t,r,o,"subtitle-stream-controller",lt.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:t}=this;t.on(H.LEVEL_LOADED,this.onLevelLoaded,this),t.on(H.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(H.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(H.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(H.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(H.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:t}=this;t.off(H.LEVEL_LOADED,this.onLevelLoaded,this),t.off(H.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(H.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(H.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(H.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(H.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(t,r){this.stopLoad(),this.state=Re.IDLE,this.setInterval(h9),this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=r?-1:t,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(t,r){this.tracksBuffered=[],super.onMediaDetaching(t,r)}onLevelLoaded(t,r){this.mainDetails=r.details}onSubtitleFragProcessed(t,r){const{frag:o,success:l}=r;if(this.fragContextChanged(o)||(Dr(o)&&(this.fragPrevious=o),this.state=Re.IDLE),!l)return;const c=this.tracksBuffered[this.currentTrackId];if(!c)return;let h;const d=o.start;for(let v=0;v<c.length;v++)if(d>=c[v].start&&d<=c[v].end){h=c[v];break}const m=o.start+o.duration;h?h.end=m:(h={start:d,end:m},c.push(h)),this.fragmentTracker.fragBuffered(o),this.fragBufferedComplete(o,null),this.media&&this.tick()}onBufferFlushing(t,r){const{startOffset:o,endOffset:l}=r;if(o===0&&l!==Number.POSITIVE_INFINITY){const c=l-1;if(c<=0)return;r.endOffsetSubtitles=Math.max(0,c),this.tracksBuffered.forEach(h=>{for(let d=0;d<h.length;){if(h[d].end<=c){h.shift();continue}else if(h[d].start<c)h[d].start=c;else break;d++}}),this.fragmentTracker.removeFragmentsInRange(o,c,lt.SUBTITLE)}}onError(t,r){const o=r.frag;(o==null?void 0:o.type)===lt.SUBTITLE&&(r.details===we.FRAG_GAP&&this.fragmentTracker.fragBuffered(o,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Re.STOPPED&&(this.state=Re.IDLE))}onSubtitleTracksUpdated(t,{subtitleTracks:r}){if(this.levels&&vW(this.levels,r)){this.levels=r.map(o=>new Mv(o));return}this.tracksBuffered=[],this.levels=r.map(o=>{const l=new Mv(o);return this.tracksBuffered[l.id]=[],l}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,lt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(t,r){var o;if(this.currentTrackId=r.id,!((o=this.levels)!=null&&o.length)||this.currentTrackId===-1){this.clearInterval();return}const l=this.levels[this.currentTrackId];l!=null&&l.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,l&&this.state!==Re.STOPPED&&this.setInterval(h9)}onSubtitleTrackLoaded(t,r){var o;const{currentTrackId:l,levels:c}=this,{details:h,id:d}=r;if(!c){this.warn(`Subtitle tracks were reset while loading level ${d}`);return}const m=c[d];if(d>=c.length||!m)return;this.log(`Subtitle track ${d} loaded [${h.startSN},${h.endSN}]${h.lastPartSn?`[part-${h.lastPartSn}-${h.lastPartIndex}]`:""},duration:${h.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let v=0;if(h.live||(o=m.details)!=null&&o.live){if(h.deltaUpdateFailed)return;const T=this.mainDetails;if(!T){this.startFragRequested=!1;return}const E=T.fragments[0];if(!m.details)h.hasProgramDateTime&&T.hasProgramDateTime?(Vw(h,T),v=h.fragmentStart):E&&(v=E.start,kL(h,v));else{var x;v=this.alignPlaylists(h,m.details,(x=this.levelLastLoaded)==null?void 0:x.details),v===0&&E&&(v=E.start,kL(h,v))}T&&!this.startFragRequested&&this.setStartPosition(T,v)}m.details=h,this.levelLastLoaded=m,d===l&&(this.hls.trigger(H.SUBTITLE_TRACK_UPDATED,{details:h,id:d,groupId:r.groupId}),this.tick(),h.live&&!this.fragCurrent&&this.media&&this.state===Re.IDLE&&(kh(null,h.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),m.details=void 0)))}_handleFragmentLoadComplete(t){const{frag:r,payload:o}=t,l=r.decryptdata,c=this.hls;if(!this.fragContextChanged(r)&&o&&o.byteLength>0&&l!=null&&l.key&&l.iv&&jp(l.method)){const h=performance.now();this.decrypter.decrypt(new Uint8Array(o),l.key.buffer,l.iv.buffer,XP(l.method)).catch(d=>{throw c.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.FRAG_DECRYPT_ERROR,fatal:!1,error:d,reason:d.message,frag:r}),d}).then(d=>{const m=performance.now();c.trigger(H.FRAG_DECRYPTED,{frag:r,payload:d,stats:{tstart:h,tdecrypt:m}})}).catch(d=>{this.warn(`${d.name}: ${d.message}`),this.state=Re.IDLE})}}doTick(){if(!this.media){this.state=Re.IDLE;return}if(this.state===Re.IDLE){const{currentTrackId:t,levels:r}=this,o=r==null?void 0:r[t];if(!o||!r.length||!o.details||this.waitForLive(o))return;const{config:l}=this,c=this.getLoadPosition(),h=qt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],c,l.maxBufferHole),{end:d,len:m}=h,v=o.details,x=this.hls.maxBufferLength+v.levelTargetDuration;if(m>x)return;const T=v.fragments,E=T.length,A=v.edge;let k=null;const _=this.fragPrevious;if(d<A){const D=l.maxFragLookUpTolerance,N=d>A-D?0:D;k=kh(_,T,Math.max(T[0].start,d),N),!k&&_&&_.start<T[0].start&&(k=T[0])}else k=T[E-1];if(k=this.filterReplacedPrimary(k,o.details),!k)return;const R=k.sn-v.startSN,P=T[R-1];if(P&&P.cc===k.cc&&this.fragmentTracker.getState(P)===ii.NOT_LOADED&&(k=P),this.fragmentTracker.getState(k)===ii.NOT_LOADED){const D=this.mapToInitFragWhenRequired(k);D&&this.loadFragment(D,o,d)}}}loadFragment(t,r,o){Dr(t)?super.loadFragment(t,r,o):this._loadInitSegment(t,r)}get mediaBufferTimeRanges(){return new Uwe(this.tracksBuffered[this.currentTrackId]||[])}}class Uwe{constructor(t){this.buffered=void 0;const r=(o,l,c)=>{if(l=l>>>0,l>c-1)throw new DOMException(`Failed to execute '${o}' on 'TimeRanges': The index provided (${l}) is greater than the maximum bound (${c})`);return t[l][o]};this.buffered={get length(){return t.length},end(o){return r("end",o,t.length)},start(o){return r("start",o,t.length)}}}}const Fwe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},DW=i=>String.fromCharCode(Fwe[i]||i),aa=15,zl=100,Bwe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},$we={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Vwe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Gwe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Hwe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class qwe{constructor(){this.time=null,this.verboseLevel=0}log(t,r){if(this.verboseLevel>=t){const o=typeof r=="function"?r():r;Rn.log(`${this.time} [${t}] ${o}`)}}}const Vd=function(t){const r=[];for(let o=0;o<t.length;o++)r.push(t[o].toString(16));return r};class NW{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(t){const r=["foreground","underline","italics","background","flash"];for(let o=0;o<r.length;o++){const l=r[o];t.hasOwnProperty(l)&&(this[l]=t[l])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash}copy(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Kwe{constructor(){this.uchar=" ",this.penState=new NW}reset(){this.uchar=" ",this.penState.reset()}setChar(t,r){this.uchar=t,this.penState.copy(r)}setPenState(t){this.penState.copy(t)}equals(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)}copy(t){this.uchar=t.uchar,this.penState.copy(t.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class zwe{constructor(t){this.chars=[],this.pos=0,this.currPenState=new NW,this.cueStartTime=null,this.logger=void 0;for(let r=0;r<zl;r++)this.chars.push(new Kwe);this.logger=t}equals(t){for(let r=0;r<zl;r++)if(!this.chars[r].equals(t.chars[r]))return!1;return!0}copy(t){for(let r=0;r<zl;r++)this.chars[r].copy(t.chars[r])}isEmpty(){let t=!0;for(let r=0;r<zl;r++)if(!this.chars[r].isEmpty()){t=!1;break}return t}setCursor(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>zl&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=zl)}moveCursor(t){const r=this.pos+t;if(t>1)for(let o=this.pos+1;o<r+1;o++)this.chars[o].setPenState(this.currPenState);this.setCursor(r)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(t){t>=144&&this.backSpace();const r=DW(t);if(this.pos>=zl){this.logger.log(0,()=>"Cannot insert "+t.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1)}clearFromPos(t){let r;for(r=t;r<zl;r++)this.chars[r].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const t=[];let r=!0;for(let o=0;o<zl;o++){const l=this.chars[o].uchar;l!==" "&&(r=!1),t.push(l)}return r?"":t.join("")}setPenStyles(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)}}class b_{constructor(t){this.rows=[],this.currRow=aa-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let r=0;r<aa;r++)this.rows.push(new zwe(t));this.logger=t}reset(){for(let t=0;t<aa;t++)this.rows[t].clear();this.currRow=aa-1}equals(t){let r=!0;for(let o=0;o<aa;o++)if(!this.rows[o].equals(t.rows[o])){r=!1;break}return r}copy(t){for(let r=0;r<aa;r++)this.rows[r].copy(t.rows[r])}isEmpty(){let t=!0;for(let r=0;r<aa;r++)if(!this.rows[r].isEmpty()){t=!1;break}return t}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(t){this.rows[this.currRow].insertChar(t)}setPen(t){this.rows[this.currRow].setPenStyles(t)}moveCursor(t){this.rows[this.currRow].moveCursor(t)}setCursor(t){this.logger.log(2,"setCursor: "+t),this.rows[this.currRow].setCursor(t)}setPAC(t){this.logger.log(2,()=>"pacData = "+Un(t));let r=t.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(let d=0;d<aa;d++)this.rows[d].clear();const c=this.currRow+1-this.nrRollUpRows,h=this.lastOutputScreen;if(h){const d=h.rows[c].cueStartTime,m=this.logger.time;if(d!==null&&m!==null&&d<m)for(let v=0;v<this.nrRollUpRows;v++)this.rows[r-this.nrRollUpRows+v+1].copy(h.rows[c+v])}}this.currRow=r;const o=this.rows[this.currRow];if(t.indent!==null){const c=t.indent,h=Math.max(c-1,0);o.setCursor(t.indent),t.color=o.chars[h].penState.foreground}const l={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(l)}setBkgData(t){this.logger.log(2,()=>"bkgData = "+Un(t)),this.backSpace(),this.setPen(t),this.insertChar(32)}setRollUpRows(t){this.nrRollUpRows=t}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const t=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(t,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}getDisplayText(t){t=t||!1;const r=[];let o="",l=-1;for(let c=0;c<aa;c++){const h=this.rows[c].getTextString();h&&(l=c+1,t?r.push("Row "+l+": '"+h+"'"):r.push(h.trim()))}return r.length>0&&(t?o="["+r.join(" | ")+"]":o=r.join(`
`)),o}getTextAndFormat(){return this.rows}}class f9{constructor(t,r,o){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new b_(o),this.nonDisplayedMemory=new b_(o),this.lastOutputScreen=new b_(o),this.currRollUpRow=this.displayedMemory.rows[aa-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=o}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[aa-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(t){this.outputFilter=t}setPAC(t){this.writeScreen.setPAC(t)}setBkgData(t){this.writeScreen.setBkgData(t)}setMode(t){t!==this.mode&&(this.mode=t,this.logger.log(2,()=>"MODE="+t),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)}insertChars(t){for(let o=0;o<t.length;o++)this.writeScreen.insertChar(t[o]);const r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>r+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)}ccMIDROW(t){const r={flash:!1};if(r.underline=t%2===1,r.italics=t>=46,r.italics)r.foreground="white";else{const o=Math.floor(t/2)-16,l=["white","green","blue","cyan","red","yellow","magenta"];r.foreground=l[o]}this.logger.log(2,"MIDROW: "+Un(r)),this.writeScreen.setPen(r)}outputDataUpdate(t=!1){const r=this.logger.time;r!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=r:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}}class p9{constructor(t,r,o){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Ywe(),this.logger=void 0;const l=this.logger=new qwe;this.channels=[null,new f9(t,r,l),new f9(t+1,o,l)]}getHandler(t){return this.channels[t].getHandler()}setHandler(t,r){this.channels[t].setHandler(r)}addData(t,r){this.logger.time=t;for(let o=0;o<r.length;o+=2){const l=r[o]&127,c=r[o+1]&127;let h=!1,d=null;if(l===0&&c===0)continue;this.logger.log(3,()=>"["+Vd([r[o],r[o+1]])+"] -> ("+Vd([l,c])+")");const m=this.cmdHistory;if(l>=16&&l<=31){if(Wwe(l,c,m)){vS(null,null,m),this.logger.log(3,()=>"Repeated command ("+Vd([l,c])+") is dropped");continue}vS(l,c,this.cmdHistory),h=this.parseCmd(l,c),h||(h=this.parseMidrow(l,c)),h||(h=this.parsePAC(l,c)),h||(h=this.parseBackgroundAttributes(l,c))}else vS(null,null,m);if(!h&&(d=this.parseChars(l,c),d)){const x=this.currentChannel;x&&x>0?this.channels[x].insertChars(d):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!h&&!d&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Vd([l,c])+" orig: "+Vd([r[o],r[o+1]]))}}parseCmd(t,r){const o=(t===20||t===28||t===21||t===29)&&r>=32&&r<=47,l=(t===23||t===31)&&r>=33&&r<=35;if(!(o||l))return!1;const c=t===20||t===21||t===23?1:2,h=this.channels[c];return t===20||t===21||t===28||t===29?r===32?h.ccRCL():r===33?h.ccBS():r===34?h.ccAOF():r===35?h.ccAON():r===36?h.ccDER():r===37?h.ccRU(2):r===38?h.ccRU(3):r===39?h.ccRU(4):r===40?h.ccFON():r===41?h.ccRDC():r===42?h.ccTR():r===43?h.ccRTD():r===44?h.ccEDM():r===45?h.ccCR():r===46?h.ccENM():r===47&&h.ccEOC():h.ccTO(r-32),this.currentChannel=c,!0}parseMidrow(t,r){let o=0;if((t===17||t===25)&&r>=32&&r<=47){if(t===17?o=1:o=2,o!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const l=this.channels[o];return l?(l.ccMIDROW(r),this.logger.log(3,()=>"MIDROW ("+Vd([t,r])+")"),!0):!1}return!1}parsePAC(t,r){let o;const l=(t>=17&&t<=23||t>=25&&t<=31)&&r>=64&&r<=127,c=(t===16||t===24)&&r>=64&&r<=95;if(!(l||c))return!1;const h=t<=23?1:2;r>=64&&r<=95?o=h===1?Bwe[t]:Vwe[t]:o=h===1?$we[t]:Gwe[t];const d=this.channels[h];return d?(d.setPAC(this.interpretPAC(o,r)),this.currentChannel=h,!0):!1}interpretPAC(t,r){let o;const l={color:null,italics:!1,indent:null,underline:!1,row:t};return r>95?o=r-96:o=r-64,l.underline=(o&1)===1,o<=13?l.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(o/2)]:o<=15?(l.italics=!0,l.color="white"):l.indent=Math.floor((o-16)/2)*4,l}parseChars(t,r){let o,l=null,c=null;if(t>=25?(o=2,c=t-8):(o=1,c=t),c>=17&&c<=19){let h;c===17?h=r+80:c===18?h=r+112:h=r+144,this.logger.log(2,()=>"Special char '"+DW(h)+"' in channel "+o),l=[h]}else t>=32&&t<=127&&(l=r===0?[t]:[t,r]);return l&&this.logger.log(3,()=>"Char codes =  "+Vd(l).join(",")),l}parseBackgroundAttributes(t,r){const o=(t===16||t===24)&&r>=32&&r<=47,l=(t===23||t===31)&&r>=45&&r<=47;if(!(o||l))return!1;let c;const h={};t===16||t===24?(c=Math.floor((r-32)/2),h.background=Hwe[c],r%2===1&&(h.background=h.background+"_semi")):r===45?h.background="transparent":(h.foreground="black",r===47&&(h.underline=!0));const d=t<=23?1:2;return this.channels[d].setBkgData(h),!0}reset(){for(let t=0;t<Object.keys(this.channels).length;t++){const r=this.channels[t];r&&r.reset()}vS(null,null,this.cmdHistory)}cueSplitAtTime(t){for(let r=0;r<this.channels.length;r++){const o=this.channels[r];o&&o.cueSplitAtTime(t)}}}function vS(i,t,r){r.a=i,r.b=t}function Wwe(i,t,r){return r.a===i&&r.b===t}function Ywe(){return{a:null,b:null}}var cD=function(){if($w!=null&&$w.VTTCue)return self.VTTCue;const i=["","lr","rl"],t=["start","middle","end","left","right"];function r(d,m){if(typeof m!="string"||!Array.isArray(d))return!1;const v=m.toLowerCase();return~d.indexOf(v)?v:!1}function o(d){return r(i,d)}function l(d){return r(t,d)}function c(d,...m){let v=1;for(;v<arguments.length;v++){const x=arguments[v];for(const T in x)d[T]=x[T]}return d}function h(d,m,v){const x=this,T={enumerable:!0};x.hasBeenReset=!1;let E="",A=!1,k=d,_=m,R=v,P=null,D="",N=!0,$="auto",V="start",W=50,C="middle",K=50,ee="middle";Object.defineProperty(x,"id",c({},T,{get:function(){return E},set:function(Q){E=""+Q}})),Object.defineProperty(x,"pauseOnExit",c({},T,{get:function(){return A},set:function(Q){A=!!Q}})),Object.defineProperty(x,"startTime",c({},T,{get:function(){return k},set:function(Q){if(typeof Q!="number")throw new TypeError("Start time must be set to a number.");k=Q,this.hasBeenReset=!0}})),Object.defineProperty(x,"endTime",c({},T,{get:function(){return _},set:function(Q){if(typeof Q!="number")throw new TypeError("End time must be set to a number.");_=Q,this.hasBeenReset=!0}})),Object.defineProperty(x,"text",c({},T,{get:function(){return R},set:function(Q){R=""+Q,this.hasBeenReset=!0}})),Object.defineProperty(x,"region",c({},T,{get:function(){return P},set:function(Q){P=Q,this.hasBeenReset=!0}})),Object.defineProperty(x,"vertical",c({},T,{get:function(){return D},set:function(Q){const fe=o(Q);if(fe===!1)throw new SyntaxError("An invalid or illegal string was specified.");D=fe,this.hasBeenReset=!0}})),Object.defineProperty(x,"snapToLines",c({},T,{get:function(){return N},set:function(Q){N=!!Q,this.hasBeenReset=!0}})),Object.defineProperty(x,"line",c({},T,{get:function(){return $},set:function(Q){if(typeof Q!="number"&&Q!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");$=Q,this.hasBeenReset=!0}})),Object.defineProperty(x,"lineAlign",c({},T,{get:function(){return V},set:function(Q){const fe=l(Q);if(!fe)throw new SyntaxError("An invalid or illegal string was specified.");V=fe,this.hasBeenReset=!0}})),Object.defineProperty(x,"position",c({},T,{get:function(){return W},set:function(Q){if(Q<0||Q>100)throw new Error("Position must be between 0 and 100.");W=Q,this.hasBeenReset=!0}})),Object.defineProperty(x,"positionAlign",c({},T,{get:function(){return C},set:function(Q){const fe=l(Q);if(!fe)throw new SyntaxError("An invalid or illegal string was specified.");C=fe,this.hasBeenReset=!0}})),Object.defineProperty(x,"size",c({},T,{get:function(){return K},set:function(Q){if(Q<0||Q>100)throw new Error("Size must be between 0 and 100.");K=Q,this.hasBeenReset=!0}})),Object.defineProperty(x,"align",c({},T,{get:function(){return ee},set:function(Q){const fe=l(Q);if(!fe)throw new SyntaxError("An invalid or illegal string was specified.");ee=fe,this.hasBeenReset=!0}})),x.displayState=void 0}return h.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},h}();class Xwe{decode(t,r){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}function MW(i){function t(o,l,c,h){return(o|0)*3600+(l|0)*60+(c|0)+parseFloat(h||0)}const r=i.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?t(r[2],r[3],0,r[4]):t(r[1],r[2],r[3],r[4]):null}class Qwe{constructor(){this.values=Object.create(null)}set(t,r){!this.get(t)&&r!==""&&(this.values[t]=r)}get(t,r,o){return o?this.has(t)?this.values[t]:r[o]:this.has(t)?this.values[t]:r}has(t){return t in this.values}alt(t,r,o){for(let l=0;l<o.length;++l)if(r===o[l]){this.set(t,r);break}}integer(t,r){/^-?\d+$/.test(r)&&this.set(t,parseInt(r,10))}percent(t,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){const o=parseFloat(r);if(o>=0&&o<=100)return this.set(t,o),!0}return!1}}function OW(i,t,r,o){const l=o?i.split(o):[i];for(const c in l){if(typeof l[c]!="string")continue;const h=l[c].split(r);if(h.length!==2)continue;const d=h[0],m=h[1];t(d,m)}}const OL=new cD(0,0,""),yS=OL.align==="middle"?"middle":"center";function Jwe(i,t,r){const o=i;function l(){const d=MW(i);if(d===null)throw new Error("Malformed timestamp: "+o);return i=i.replace(/^[^\sa-zA-Z-]+/,""),d}function c(d,m){const v=new Qwe;OW(d,function(E,A){let k;switch(E){case"region":for(let _=r.length-1;_>=0;_--)if(r[_].id===A){v.set(E,r[_].region);break}break;case"vertical":v.alt(E,A,["rl","lr"]);break;case"line":k=A.split(","),v.integer(E,k[0]),v.percent(E,k[0])&&v.set("snapToLines",!1),v.alt(E,k[0],["auto"]),k.length===2&&v.alt("lineAlign",k[1],["start",yS,"end"]);break;case"position":k=A.split(","),v.percent(E,k[0]),k.length===2&&v.alt("positionAlign",k[1],["start",yS,"end","line-left","line-right","auto"]);break;case"size":v.percent(E,A);break;case"align":v.alt(E,A,["start",yS,"end","left","right"]);break}},/:/,/\s/),m.region=v.get("region",null),m.vertical=v.get("vertical","");let x=v.get("line","auto");x==="auto"&&OL.line===-1&&(x=-1),m.line=x,m.lineAlign=v.get("lineAlign","start"),m.snapToLines=v.get("snapToLines",!0),m.size=v.get("size",100),m.align=v.get("align",yS);let T=v.get("position","auto");T==="auto"&&OL.position===50&&(T=m.align==="start"||m.align==="left"?0:m.align==="end"||m.align==="right"?100:50),m.position=T}function h(){i=i.replace(/^\s+/,"")}if(h(),t.startTime=l(),h(),i.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+o);i=i.slice(3),h(),t.endTime=l(),h(),c(i,t)}function jW(i){return i.replace(/<br(?: \/)?>/gi,`
`)}class Zwe{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Xwe,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(t){const r=this;t&&(r.buffer+=r.decoder.decode(t,{stream:!0}));function o(){let c=r.buffer,h=0;for(c=jW(c);h<c.length&&c[h]!=="\r"&&c[h]!==`
`;)++h;const d=c.slice(0,h);return c[h]==="\r"&&++h,c[h]===`
`&&++h,r.buffer=c.slice(h),d}function l(c){OW(c,function(h,d){},/:/)}try{let c="";if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;c=o();const d=c.match(/^()?WEBVTT([ \t].*)?$/);if(!(d!=null&&d[0]))throw new Error("Malformed WebVTT signature.");r.state="HEADER"}let h=!1;for(;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(h?h=!1:c=o(),r.state){case"HEADER":/:/.test(c)?l(c):c||(r.state="ID");continue;case"NOTE":c||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(c)){r.state="NOTE";break}if(!c)continue;if(r.cue=new cD(0,0,""),r.state="CUE",c.indexOf("-->")===-1){r.cue.id=c;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{Jwe(c,r.cue,r.regionList)}catch{r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":{const d=c.indexOf("-->")!==-1;if(!c||d&&(h=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(r.cue===null)continue;r.cue.text&&(r.cue.text+=`
`),r.cue.text+=c}continue;case"BADCUE":c||(r.state="ID")}}}catch{r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const t=this;try{if((t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL"||t.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(r){t.onparsingerror&&t.onparsingerror(r)}return t.onflush&&t.onflush(),this}}const eEe=/\r\n|\n\r|\n|\r/g,A_=function(t,r,o=0){return t.slice(o,o+r.length)===r},tEe=function(t){let r=parseInt(t.slice(-3));const o=parseInt(t.slice(-6,-4)),l=parseInt(t.slice(-9,-7)),c=t.length>9?parseInt(t.substring(0,t.indexOf(":"))):0;if(!Ye(r)||!Ye(o)||!Ye(l)||!Ye(c))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${t}`);return r+=1e3*o,r+=60*1e3*l,r+=60*60*1e3*c,r};function dD(i,t,r){return ev(i.toString())+ev(t.toString())+ev(r)}const nEe=function(t,r,o){let l=t[r],c=t[l.prevCC];if(!c||!c.new&&l.new){t.ccOffset=t.presentationOffset=l.start,l.new=!1;return}for(;(h=c)!=null&&h.new;){var h;t.ccOffset+=l.start-c.start,l.new=!1,l=c,c=t[l.prevCC]}t.presentationOffset=o};function rEe(i,t,r,o,l,c,h){const d=new Zwe,m=po(new Uint8Array(i)).trim().replace(eEe,`
`).split(`
`),v=[],x=t?uSe(t.baseTime,t.timescale):0;let T="00:00.000",E=0,A=0,k,_=!0;d.oncue=function(R){const P=r[o];let D=r.ccOffset;const N=(E-x)/9e4;if(P!=null&&P.new&&(A!==void 0?D=r.ccOffset=P.start:nEe(r,o,N)),N){if(!t){k=new Error("Missing initPTS for VTT MPEGTS");return}D=N-r.presentationOffset}const $=R.endTime-R.startTime,V=ro((R.startTime+D-A)*9e4,l*9e4)/9e4;R.startTime=Math.max(V,0),R.endTime=Math.max(V+$,0);const W=R.text.trim();R.text=decodeURIComponent(encodeURIComponent(W)),R.id||(R.id=dD(R.startTime,R.endTime,W)),R.endTime>0&&v.push(R)},d.onparsingerror=function(R){k=R},d.onflush=function(){if(k){h(k);return}c(v)},m.forEach(R=>{if(_)if(A_(R,"X-TIMESTAMP-MAP=")){_=!1,R.slice(16).split(",").forEach(P=>{A_(P,"LOCAL:")?T=P.slice(6):A_(P,"MPEGTS:")&&(E=parseInt(P.slice(7)))});try{A=tEe(T)/1e3}catch(P){k=P}return}else R===""&&(_=!1);d.parse(R+`
`)}),d.flush()}const I_="stpp.ttml.im1t",UW=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,FW=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,iEe={left:"start",center:"center",right:"end",start:"start",end:"end"};function m9(i,t,r,o){const l=nn(new Uint8Array(i),["mdat"]);if(l.length===0){o(new Error("Could not parse IMSC1 mdat"));return}const c=l.map(d=>po(d)),h=lSe(t.baseTime,1,t.timescale);try{c.forEach(d=>r(sEe(d,h)))}catch(d){o(d)}}function sEe(i,t){const l=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("tt")[0];if(!l)throw new Error("Invalid ttml");const c={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},h=Object.keys(c).reduce((T,E)=>(T[E]=l.getAttribute(`ttp:${E}`)||c[E],T),{}),d=l.getAttribute("xml:space")!=="preserve",m=g9(C_(l,"styling","style")),v=g9(C_(l,"layout","region")),x=C_(l,"body","[begin]");return[].map.call(x,T=>{const E=BW(T,d);if(!E||!T.hasAttribute("begin"))return null;const A=__(T.getAttribute("begin"),h),k=__(T.getAttribute("dur"),h);let _=__(T.getAttribute("end"),h);if(A===null)throw v9(T);if(_===null){if(k===null)throw v9(T);_=A+k}const R=new cD(A-t,_-t,E);R.id=dD(R.startTime,R.endTime,R.text);const P=v[T.getAttribute("region")],D=m[T.getAttribute("style")],N=oEe(P,D,m),{textAlign:$}=N;if($){const V=iEe[$];V&&(R.lineAlign=V),R.align=$}return Nn(R,N),R}).filter(T=>T!==null)}function C_(i,t,r){const o=i.getElementsByTagName(t)[0];return o?[].slice.call(o.querySelectorAll(r)):[]}function g9(i){return i.reduce((t,r)=>{const o=r.getAttribute("xml:id");return o&&(t[o]=r),t},{})}function BW(i,t){return[].slice.call(i.childNodes).reduce((r,o,l)=>{var c;return o.nodeName==="br"&&l?r+`
`:(c=o.childNodes)!=null&&c.length?BW(o,t):t?r+o.textContent.trim().replace(/\s+/g," "):r+o.textContent},"")}function oEe(i,t,r){const o="http://www.w3.org/ns/ttml#styling";let l=null;const c=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],h=i!=null&&i.hasAttribute("style")?i.getAttribute("style"):null;return h&&r.hasOwnProperty(h)&&(l=r[h]),c.reduce((d,m)=>{const v=k_(t,o,m)||k_(i,o,m)||k_(l,o,m);return v&&(d[m]=v),d},{})}function k_(i,t,r){return i&&i.hasAttributeNS(t,r)?i.getAttributeNS(t,r):null}function v9(i){return new Error(`Could not parse ttml timestamp ${i}`)}function __(i,t){if(!i)return null;let r=MW(i);return r===null&&(UW.test(i)?r=aEe(i,t):FW.test(i)&&(r=lEe(i,t))),r}function aEe(i,t){const r=UW.exec(i),o=(r[4]|0)+(r[5]|0)/t.subFrameRate;return(r[1]|0)*3600+(r[2]|0)*60+(r[3]|0)+o/t.frameRate}function lEe(i,t){const r=FW.exec(i),o=Number(r[1]);switch(r[2]){case"h":return o*3600;case"m":return o*60;case"ms":return o*1e3;case"f":return o/t.frameRate;case"t":return o/t.tickRate}return o}class xS{constructor(t,r){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=r}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(t,r,o){(this.startTime===null||this.startTime>t)&&(this.startTime=t),this.endTime=r,this.screen=o,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class uEe{constructor(t){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=x9(),this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},t.on(H.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(H.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(H.FRAG_LOADING,this.onFragLoading,this),t.on(H.FRAG_LOADED,this.onFragLoaded,this),t.on(H.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(H.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(H.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(H.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(H.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:t}=this;t.off(H.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(H.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(H.FRAG_LOADING,this.onFragLoading,this),t.off(H.FRAG_LOADED,this.onFragLoaded,this),t.off(H.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(H.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(H.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(H.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(H.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const t=new xS(this,"textTrack1"),r=new xS(this,"textTrack2"),o=new xS(this,"textTrack3"),l=new xS(this,"textTrack4");this.cea608Parser1=new p9(1,t,r),this.cea608Parser2=new p9(3,o,l)}addCues(t,r,o,l,c){let h=!1;for(let d=c.length;d--;){const m=c[d],v=cEe(m[0],m[1],r,o);if(v>=0&&(m[0]=Math.min(m[0],r),m[1]=Math.max(m[1],o),h=!0,v/(o-r)>.5))return}if(h||c.push([r,o]),this.config.renderTextTracksNatively){const d=this.captionsTracks[t];this.Cues.newCue(d,r,o,l)}else{const d=this.Cues.newCue(null,r,o,l);this.hls.trigger(H.CUES_PARSED,{type:"captions",cues:d,track:t})}}onInitPtsFound(t,{frag:r,id:o,initPTS:l,timescale:c,trackId:h}){const{unparsedVttFrags:d}=this;o===lt.MAIN&&(this.initPTS[r.cc]={baseTime:l,timescale:c,trackId:h}),d.length&&(this.unparsedVttFrags=[],d.forEach(m=>{this.initPTS[m.frag.cc]?this.onFragLoaded(H.FRAG_LOADED,m):this.hls.trigger(H.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:m.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(t,r){const{media:o}=this;if(o)for(let l=0;l<o.textTracks.length;l++){const c=o.textTracks[l];if(y9(c,{name:t,lang:r,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return c}return null}createCaptionsTrack(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)}createNativeTrack(t){if(this.captionsTracks[t])return;const{captionsProperties:r,captionsTracks:o,media:l}=this,{label:c,languageCode:h}=r[t],d=this.getExistingTrack(c,h);if(d)o[t]=d,Ap(o[t]),RW(o[t],l);else{const m=this.createTextTrack("captions",c,h);m&&(m[t]=!0,o[t]=m)}}createNonNativeTrack(t){if(this.nonNativeCaptionsTracks[t])return;const r=this.captionsProperties[t];if(!r)return;const o=r.label,l={_id:t,label:o,kind:"captions",default:r.media?!!r.media.default:!1,closedCaptions:r.media};this.nonNativeCaptionsTracks[t]=l,this.hls.trigger(H.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[l]})}createTextTrack(t,r,o){const l=this.media;if(l)return l.addTextTrack(t,r,o)}onMediaAttaching(t,r){this.media=r.media,r.mediaSource||this._cleanTracks()}onMediaDetaching(t,r){const o=!!r.transferMedia;if(this.media=null,o)return;const{captionsTracks:l}=this;Object.keys(l).forEach(c=>{Ap(l[c]),delete l[c]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=x9(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:t}=this;if(!t)return;const r=t.textTracks;if(r)for(let o=0;o<r.length;o++)Ap(r[o])}onSubtitleTracksUpdated(t,r){const o=r.subtitleTracks||[],l=o.some(c=>c.textCodec===I_);if(this.config.enableWebVTT||l&&this.config.enableIMSC1){if(vW(this.tracks,o)){this.tracks=o;return}if(this.textTracks=[],this.tracks=o,this.config.renderTextTracksNatively){const h=this.media,d=h?KS(h.textTracks):null;if(this.tracks.forEach((m,v)=>{let x;if(d){let T=null;for(let E=0;E<d.length;E++)if(d[E]&&y9(d[E],m)){T=d[E],d[E]=null;break}T&&(x=T)}if(x)Ap(x);else{const T=$W(m);x=this.createTextTrack(T,m.name,m.lang),x&&(x.mode="disabled")}x&&this.textTracks.push(x)}),d!=null&&d.length){const m=d.filter(v=>v!==null).map(v=>v.label);m.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${m.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const h=this.tracks.map(d=>({label:d.name,kind:d.type.toLowerCase(),default:d.default,subtitleTrack:d}));this.hls.trigger(H.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:h})}}}onManifestLoaded(t,r){this.config.enableCEA708Captions&&r.captions&&r.captions.forEach(o=>{const l=/(?:CC|SERVICE)([1-4])/.exec(o.instreamId);if(!l)return;const c=`textTrack${l[1]}`,h=this.captionsProperties[c];h&&(h.label=o.name,o.lang&&(h.languageCode=o.lang),h.media=o)})}closedCaptionsForLevel(t){const r=this.hls.levels[t.level];return r==null?void 0:r.attrs["CLOSED-CAPTIONS"]}onFragLoading(t,r){if(this.enabled&&r.frag.type===lt.MAIN){var o,l;const{cea608Parser1:c,cea608Parser2:h,lastSn:d}=this,{cc:m,sn:v}=r.frag,x=(o=(l=r.part)==null?void 0:l.index)!=null?o:-1;c&&h&&(v!==d+1||v===d&&x!==this.lastPartIndex+1||m!==this.lastCc)&&(c.reset(),h.reset()),this.lastCc=m,this.lastSn=v,this.lastPartIndex=x}}onFragLoaded(t,r){const{frag:o,payload:l}=r;if(o.type===lt.SUBTITLE)if(l.byteLength){const c=o.decryptdata,h="stats"in r;if(c==null||!c.encrypted||h){const d=this.tracks[o.level],m=this.vttCCs;m[o.cc]||(m[o.cc]={start:o.start,prevCC:this.prevCC,new:!0},this.prevCC=o.cc),d&&d.textCodec===I_?this._parseIMSC1(o,l):this._parseVTTs(r)}}else this.hls.trigger(H.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o,error:new Error("Empty subtitle payload")})}_parseIMSC1(t,r){const o=this.hls;m9(r,this.initPTS[t.cc],l=>{this._appendCues(l,t.level),o.trigger(H.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},l=>{o.logger.log(`Failed to parse IMSC1: ${l}`),o.trigger(H.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:l})})}_parseVTTs(t){var r;const{frag:o,payload:l}=t,{initPTS:c,unparsedVttFrags:h}=this,d=c.length-1;if(!c[o.cc]&&d===-1){h.push(t);return}const m=this.hls,v=(r=o.initSegment)!=null&&r.data?Bo(o.initSegment.data,new Uint8Array(l)).buffer:l;rEe(v,this.initPTS[o.cc],this.vttCCs,o.cc,o.start,x=>{this._appendCues(x,o.level),m.trigger(H.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:o})},x=>{const T=x.message==="Missing initPTS for VTT MPEGTS";T?h.push(t):this._fallbackToIMSC1(o,l),m.logger.log(`Failed to parse VTT cue: ${x}`),!(T&&d>o.cc)&&m.trigger(H.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o,error:x})})}_fallbackToIMSC1(t,r){const o=this.tracks[t.level];o.textCodec||m9(r,this.initPTS[t.cc],()=>{o.textCodec=I_,this._parseIMSC1(t,r)},()=>{o.textCodec="wvtt"})}_appendCues(t,r){const o=this.hls;if(this.config.renderTextTracksNatively){const l=this.textTracks[r];if(!l||l.mode==="disabled")return;t.forEach(c=>LW(l,c))}else{const l=this.tracks[r];if(!l)return;const c=l.default?"default":"subtitles"+r;o.trigger(H.CUES_PARSED,{type:"subtitles",cues:t,track:c})}}onFragDecrypted(t,r){const{frag:o}=r;o.type===lt.SUBTITLE&&this.onFragLoaded(H.FRAG_LOADED,r)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(t,r){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:o,samples:l}=r;if(!(o.type===lt.MAIN&&this.closedCaptionsForLevel(o)==="NONE"))for(let c=0;c<l.length;c++){const h=l[c].bytes;if(h){this.cea608Parser1||this.initCea608Parsers();const d=this.extractCea608Data(h);this.cea608Parser1.addData(l[c].pts,d[0]),this.cea608Parser2.addData(l[c].pts,d[1])}}}onBufferFlushing(t,{startOffset:r,endOffset:o,endOffsetSubtitles:l,type:c}){const{media:h}=this;if(!(!h||h.currentTime<o)){if(!c||c==="video"){const{captionsTracks:d}=this;Object.keys(d).forEach(m=>ML(d[m],r,o))}if(this.config.renderTextTracksNatively&&r===0&&l!==void 0){const{textTracks:d}=this;Object.keys(d).forEach(m=>ML(d[m],r,l))}}}extractCea608Data(t){const r=[[],[]],o=t[0]&31;let l=2;for(let c=0;c<o;c++){const h=t[l++],d=127&t[l++],m=127&t[l++];if(d===0&&m===0)continue;if((4&h)!==0){const x=3&h;(x===0||x===1)&&(r[x].push(d),r[x].push(m))}}return r}}function $W(i){return i.characteristics&&/transcribes-spoken-dialog/gi.test(i.characteristics)&&/describes-music-and-sound/gi.test(i.characteristics)?"captions":"subtitles"}function y9(i,t){return!!i&&i.kind===$W(t)&&LL(t,i)}function cEe(i,t,r,o){return Math.min(t,o)-Math.max(i,r)}function x9(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const dEe=/\s/,hEe={newCue(i,t,r,o){const l=[];let c,h,d,m,v;const x=self.VTTCue||self.TextTrackCue;for(let E=0;E<o.rows.length;E++)if(c=o.rows[E],d=!0,m=0,v="",!c.isEmpty()){var T;for(let _=0;_<c.chars.length;_++)dEe.test(c.chars[_].uchar)&&d?m++:(v+=c.chars[_].uchar,d=!1);c.cueStartTime=t,t===r&&(r+=1e-4),m>=16?m--:m++;const A=jW(v.trim()),k=dD(t,r,A);i!=null&&(T=i.cues)!=null&&T.getCueById(k)||(h=new x(t,r,A),h.id=k,h.line=E+1,h.align="left",h.position=10+Math.min(80,Math.floor(m*8/32)*10),l.push(h))}return i&&l.length&&(l.sort((E,A)=>E.line==="auto"||A.line==="auto"?0:E.line>8&&A.line>8?A.line-E.line:E.line-A.line),l.forEach(E=>LW(i,E))),l}};function fEe(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const pEe=/(\d+)-(\d+)\/(\d+)/;class T9{constructor(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||yEe,this.controller=new self.AbortController,this.stats=new GP}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var t;this.abortInternal(),(t=this.callbacks)!=null&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(t,r,o){const l=this.stats;if(l.loading.start)throw new Error("Loader can only be used once.");l.loading.start=self.performance.now();const c=mEe(t,this.controller.signal),h=t.responseType==="arraybuffer",d=h?"byteLength":"length",{maxTimeToFirstByteMs:m,maxLoadTimeMs:v}=r.loadPolicy;this.context=t,this.config=r,this.callbacks=o,this.request=this.fetchSetup(t,c),self.clearTimeout(this.requestTimeout),r.timeout=m&&Ye(m)?m:v,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(l,t,this.response))},r.timeout),(Uv(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(T=>{var E;this.response=this.loader=T;const A=Math.max(self.performance.now(),l.loading.start);if(self.clearTimeout(this.requestTimeout),r.timeout=v,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(l,t,this.response))},v-(A-l.loading.start)),!T.ok){const{status:_,statusText:R}=T;throw new xEe(R||"fetch, bad network response",_,T)}l.loading.first=A,l.total=vEe(T.headers)||l.total;const k=(E=this.callbacks)==null?void 0:E.onProgress;return k&&Ye(r.highWaterMark)?this.loadProgressively(T,l,t,r.highWaterMark,k):h?T.arrayBuffer():t.responseType==="json"?T.json():T.text()}).then(T=>{var E,A;const k=this.response;if(!k)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),l.loading.end=Math.max(self.performance.now(),l.loading.first);const _=T[d];_&&(l.loaded=l.total=_);const R={url:k.url,data:T,code:k.status},P=(E=this.callbacks)==null?void 0:E.onProgress;P&&!Ye(r.highWaterMark)&&P(l,t,T,k),(A=this.callbacks)==null||A.onSuccess(R,l,t,k)}).catch(T=>{var E;if(self.clearTimeout(this.requestTimeout),l.aborted)return;const A=T&&T.code||0,k=T?T.message:null;(E=this.callbacks)==null||E.onError({code:A,text:k},t,T?T.details:null,l)})}getCacheAge(){let t=null;if(this.response){const r=this.response.headers.get("age");t=r?parseFloat(r):null}return t}getResponseHeader(t){return this.response?this.response.headers.get(t):null}loadProgressively(t,r,o,l=0,c){const h=new Qz,d=t.body.getReader(),m=()=>d.read().then(v=>{if(v.done)return h.dataLength&&c(r,o,h.flush().buffer,t),Promise.resolve(new ArrayBuffer(0));const x=v.value,T=x.length;return r.loaded+=T,T<l||h.dataLength?(h.push(x),h.dataLength>=l&&c(r,o,h.flush().buffer,t)):c(r,o,x.buffer,t),m()}).catch(()=>Promise.reject());return m()}}function mEe(i,t){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(Nn({},i.headers))};return i.rangeEnd&&r.headers.set("Range","bytes="+i.rangeStart+"-"+String(i.rangeEnd-1)),r}function gEe(i){const t=pEe.exec(i);if(t)return parseInt(t[2])-parseInt(t[1])+1}function vEe(i){const t=i.get("Content-Range");if(t){const o=gEe(t);if(Ye(o))return o}const r=i.get("Content-Length");if(r)return parseInt(r)}function yEe(i,t){return new self.Request(i.url,t)}class xEe extends Error{constructor(t,r,o){super(t),this.code=void 0,this.details=void 0,this.code=r,this.details=o}}const TEe=/^age:\s*[\d.]+\s*$/im;class VW{constructor(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=t&&t.xhrSetup||null,this.stats=new GP,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,t.readyState!==4&&(this.stats.aborted=!0,t.abort()))}abort(){var t;this.abortInternal(),(t=this.callbacks)!=null&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(t,r,o){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=r,this.callbacks=o,this.loadInternal()}loadInternal(){const{config:t,context:r}=this;if(!t||!r)return;const o=this.loader=new self.XMLHttpRequest,l=this.stats;l.loading.first=0,l.loaded=0,l.aborted=!1;const c=this.xhrSetup;c?Promise.resolve().then(()=>{if(!(this.loader!==o||this.stats.aborted))return c(o,r.url)}).catch(h=>{if(!(this.loader!==o||this.stats.aborted))return o.open("GET",r.url,!0),c(o,r.url)}).then(()=>{this.loader!==o||this.stats.aborted||this.openAndSendXhr(o,r,t)}).catch(h=>{var d;(d=this.callbacks)==null||d.onError({code:o.status,text:h.message},r,o,l)}):this.openAndSendXhr(o,r,t)}openAndSendXhr(t,r,o){t.readyState||t.open("GET",r.url,!0);const l=r.headers,{maxTimeToFirstByteMs:c,maxLoadTimeMs:h}=o.loadPolicy;if(l)for(const d in l)t.setRequestHeader(d,l[d]);r.rangeEnd&&t.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=r.responseType,self.clearTimeout(this.requestTimeout),o.timeout=c&&Ye(c)?c:h,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.timeout),t.send()}readystatechange(){const{context:t,loader:r,stats:o}=this;if(!t||!r)return;const l=r.readyState,c=this.config;if(!o.aborted&&l>=2&&(o.loading.first===0&&(o.loading.first=Math.max(self.performance.now(),o.loading.start),c.timeout!==c.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),c.timeout=c.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),c.loadPolicy.maxLoadTimeMs-(o.loading.first-o.loading.start)))),l===4)){self.clearTimeout(this.requestTimeout),r.onreadystatechange=null,r.onprogress=null;const v=r.status,x=r.responseType==="text"?r.responseText:null;if(v>=200&&v<300){const k=x??r.response;if(k!=null){var h,d;o.loading.end=Math.max(self.performance.now(),o.loading.first);const _=r.responseType==="arraybuffer"?k.byteLength:k.length;o.loaded=o.total=_,o.bwEstimate=o.total*8e3/(o.loading.end-o.loading.first);const R=(h=this.callbacks)==null?void 0:h.onProgress;R&&R(o,t,k,r);const P={url:r.responseURL,data:k,code:v};(d=this.callbacks)==null||d.onSuccess(P,o,t,r);return}}const T=c.loadPolicy.errorRetry,E=o.retry,A={url:t.url,data:void 0,code:v};if(Fw(T,E,!1,A))this.retry(T);else{var m;Rn.error(`${v} while loading ${t.url}`),(m=this.callbacks)==null||m.onError({code:v,text:r.statusText},t,r,o)}}}loadtimeout(){if(!this.config)return;const t=this.config.loadPolicy.timeoutRetry,r=this.stats.retry;if(Fw(t,r,!0))this.retry(t);else{var o;Rn.warn(`timeout while loading ${(o=this.context)==null?void 0:o.url}`);const l=this.callbacks;l&&(this.abortInternal(),l.onTimeout(this.stats,this.context,this.loader))}}retry(t){const{context:r,stats:o}=this;this.retryDelay=zP(t,o.retry),o.retry++,Rn.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${r==null?void 0:r.url}, retrying ${o.retry}/${t.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(t){const r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total)}getCacheAge(){let t=null;if(this.loader&&TEe.test(this.loader.getAllResponseHeaders())){const r=this.loader.getResponseHeader("age");t=r?parseFloat(r):null}return t}getResponseHeader(t){return this.loader&&new RegExp(`^${t}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(t):null}}const SEe={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},wEe=_n(_n({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:VW,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Nxe,bufferController:bSe,capLevelController:aD,errorController:Fxe,fpsController:Awe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Bz,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:SEe},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},EEe()),{},{subtitleStreamController:jwe,subtitleTrackController:kwe,timelineController:uEe,audioStreamController:TSe,audioTrackController:SSe,emeController:Up,cmcdController:Swe,contentSteeringController:Ewe,interstitialsController:Owe});function EEe(){return{cueHandler:hEe,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function bEe(i,t,r){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(t.liveMaxLatencyDurationCount!==void 0&&(t.liveSyncDurationCount===void 0||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(t.liveMaxLatencyDuration!==void 0&&(t.liveSyncDuration===void 0||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const o=jL(i),l=["manifest","level","frag"],c=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return l.forEach(h=>{const d=`${h==="level"?"playlist":h}LoadPolicy`,m=t[d]===void 0,v=[];c.forEach(x=>{const T=`${h}Loading${x}`,E=t[T];if(E!==void 0&&m){v.push(T);const A=o[d].default;switch(t[d]={default:A},x){case"TimeOut":A.maxLoadTimeMs=E,A.maxTimeToFirstByteMs=E;break;case"MaxRetry":A.errorRetry.maxNumRetry=E,A.timeoutRetry.maxNumRetry=E;break;case"RetryDelay":A.errorRetry.retryDelayMs=E,A.timeoutRetry.retryDelayMs=E;break;case"MaxRetryTimeout":A.errorRetry.maxRetryDelayMs=E,A.timeoutRetry.maxRetryDelayMs=E;break}}}),v.length&&r.warn(`hls.js config: "${v.join('", "')}" setting(s) are deprecated, use "${d}": ${Un(t[d])}`)}),_n(_n({},o),t)}function jL(i){return i&&typeof i=="object"?Array.isArray(i)?i.map(jL):Object.keys(i).reduce((t,r)=>(t[r]=jL(i[r]),t),{}):i}function AEe(i,t){const r=i.loader;r!==T9&&r!==VW?(t.log("[config]: Custom loader detected, cannot enable progressive streaming"),i.progressive=!1):fEe()&&(i.loader=T9,i.progressive=!0,i.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}const zS=2,IEe=.1,CEe=.05,kEe=100;class _Ee extends Mz{constructor(t,r){super("gap-controller",t.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var o;(o=this.media)!=null&&o.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var o;this.ended=((o=this.media)==null?void 0:o.currentTime)||1,this.hls.trigger(H.MEDIA_ENDED,{stalled:!1})}},this.hls=t,this.fragmentTracker=r,this.registerListeners()}registerListeners(){const{hls:t}=this;t&&(t.on(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(H.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:t}=this;t&&(t.off(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(H.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(t,r){this.setInterval(kEe),this.mediaSource=r.mediaSource;const o=this.media=r.media;fs(o,"playing",this.onMediaPlaying),fs(o,"waiting",this.onMediaWaiting),fs(o,"ended",this.onMediaEnded)}onMediaDetaching(t,r){this.clearInterval();const{media:o}=this;o&&(Ms(o,"playing",this.onMediaPlaying),Ms(o,"waiting",this.onMediaWaiting),Ms(o,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(t,r){this.buffered=r.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var t;if(!((t=this.media)!=null&&t.readyState)||!this.hasBuffered)return;const r=this.media.currentTime;this.poll(r,this.lastCurrentTime),this.lastCurrentTime=r}poll(t,r){var o,l;const c=(o=this.hls)==null?void 0:o.config;if(!c)return;const h=this.media;if(!h)return;const{seeking:d}=h,m=this.seeking&&!d,v=!this.seeking&&d,x=h.paused&&!d||h.ended||h.playbackRate===0;if(this.seeking=d,t!==r){r&&(this.ended=0),this.moved=!0,d||(this.nudgeRetry=0,c.nudgeOnVideoHole&&!x&&t>r&&this.nudgeOnVideoHole(t,r)),this.waiting===0&&this.stallResolved(t);return}if(v||m){m&&this.stallResolved(t);return}if(x){this.nudgeRetry=0,this.stallResolved(t),!this.ended&&h.ended&&this.hls&&(this.ended=t||1,this.hls.trigger(H.MEDIA_ENDED,{stalled:!1}));return}if(!qt.getBuffered(h).length){this.nudgeRetry=0;return}const T=qt.bufferInfo(h,t,0),E=T.nextStart||0,A=this.fragmentTracker;if(d&&A&&this.hls){const W=S9(this.hls.inFlightFragments,t),C=T.len>zS,K=!E||W||E-t>zS&&!A.getPartialFragment(t);if(C||K)return;this.moved=!1}const k=(l=this.hls)==null?void 0:l.latestLevelDetails;if(!this.moved&&this.stalled!==null&&A){if(!(T.len>0)&&!E)return;const C=Math.max(E,T.start||0)-t,ee=!!(k!=null&&k.live)?k.targetduration*2:zS,Q=TS(t,A);if(C>0&&(C<=ee||Q)){h.paused||this._trySkipBufferHole(Q);return}}const _=c.detectStallWithCurrentTimeMs,R=self.performance.now(),P=this.waiting;let D=this.stalled;if(D===null)if(P>0&&R-P<_)D=this.stalled=P;else{this.stalled=R;return}const N=R-D;if(!d&&(N>=_||P)&&this.hls){var $;if((($=this.mediaSource)==null?void 0:$.readyState)==="ended"&&!(k!=null&&k.live)&&Math.abs(t-((k==null?void 0:k.edge)||0))<1){if(this.ended)return;this.ended=t||1,this.hls.trigger(H.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(T),!this.media||!this.hls)return}const V=qt.bufferInfo(h,t,c.maxBufferHole);this._tryFixBufferStall(V,N,t)}stallResolved(t){const r=this.stalled;if(r&&this.hls&&(this.stalled=null,this.stallReported)){const o=self.performance.now()-r;this.log(`playback not stuck anymore @${t}, after ${Math.round(o)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(H.STALL_RESOLVED,{})}}nudgeOnVideoHole(t,r){var o;const l=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(o=this.buffered.audio)!=null&&o.length&&l&&l.length>1&&t>l.end(0)){const c=qt.bufferedInfo(qt.timeRangesToArray(this.buffered.audio),t,0);if(c.len>1&&r>=c.start){const h=qt.timeRangesToArray(l),d=qt.bufferedInfo(h,r,0).bufferedIndex;if(d>-1&&d<h.length-1){const m=qt.bufferedInfo(h,t,0).bufferedIndex,v=h[d].end,x=h[d+1].start;if((m===-1||m>d)&&x-v<1&&t-v<2){const T=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${t} hole: ${v} -> ${x} buffered index: ${m}`);this.warn(T.message),this.media.currentTime+=1e-6;let E=TS(t,this.fragmentTracker);E&&"fragment"in E?E=E.fragment:E||(E=void 0);const A=qt.bufferInfo(this.media,t,0);this.hls.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:T,reason:T.message,frag:E,buffer:A.len,bufferInfo:A})}}}}}_tryFixBufferStall(t,r,o){var l,c;const{fragmentTracker:h,media:d}=this,m=(l=this.hls)==null?void 0:l.config;if(!d||!h||!m)return;const v=(c=this.hls)==null?void 0:c.latestLevelDetails,x=TS(o,h);if((x||v!=null&&v.live&&o<v.fragmentStart)&&(this._trySkipBufferHole(x)||!this.media))return;const T=t.buffered,E=this.adjacentTraversal(t,o);(T&&T.length>1&&t.len>m.maxBufferHole||t.nextStart&&(t.nextStart-o<m.maxBufferHole||E))&&(r>m.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(t))}adjacentTraversal(t,r){const o=this.fragmentTracker,l=t.nextStart;if(o&&l){const c=o.getFragAtPos(r,lt.MAIN),h=o.getFragAtPos(l,lt.MAIN);if(c&&h)return h.sn-c.sn<2}return!1}_reportStall(t){const{hls:r,media:o,stallReported:l,stalled:c}=this;if(!l&&c!==null&&o&&r){this.stallReported=!0;const h=new Error(`Playback stalling at @${o.currentTime} due to low buffer (${Un(t)})`);this.warn(h.message),r.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.BUFFER_STALLED_ERROR,fatal:!1,error:h,buffer:t.len,bufferInfo:t,stalled:{start:c}})}}_trySkipBufferHole(t){var r;const{fragmentTracker:o,media:l}=this,c=(r=this.hls)==null?void 0:r.config;if(!l||!o||!c)return 0;const h=l.currentTime,d=qt.bufferInfo(l,h,0),m=h<d.start?d.start:d.nextStart;if(m&&this.hls){const x=d.len<=c.maxBufferHole,T=d.len>0&&d.len<1&&l.readyState<3,E=m-h;if(E>0&&(x||T)){if(E>c.maxBufferHole){let k=!1;if(h===0){const _=o.getAppendedFrag(0,lt.MAIN);_&&m<_.end&&(k=!0)}if(!k&&t){var v;if(!((v=this.hls.loadLevelObj)!=null&&v.details)||S9(this.hls.inFlightFragments,m))return 0;let R=!1,P=t.end;for(;P<m;){const D=TS(P,o);if(D)P+=D.duration;else{R=!0;break}}if(R)return 0}}const A=Math.max(m+CEe,h+IEe);if(this.warn(`skipping hole, adjusting currentTime from ${h} to ${A}`),this.moved=!0,l.currentTime=A,!(t!=null&&t.gap)){const k=new Error(`fragment loaded with buffer holes, seeking from ${h} to ${A}`),_={type:pt.MEDIA_ERROR,details:we.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:k,reason:k.message,buffer:d.len,bufferInfo:d};t&&("fragment"in t?_.part=t:_.frag=t),this.hls.trigger(H.ERROR,_)}return A}}return 0}_tryNudgeBuffer(t){const{hls:r,media:o,nudgeRetry:l}=this,c=r==null?void 0:r.config;if(!o||!c)return 0;const h=o.currentTime;if(this.nudgeRetry++,l<c.nudgeMaxRetry){const d=h+(l+1)*c.nudgeOffset,m=new Error(`Nudging 'currentTime' from ${h} to ${d}`);this.warn(m.message),o.currentTime=d,r.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.BUFFER_NUDGE_ON_STALL,error:m,fatal:!1,buffer:t.len,bufferInfo:t})}else{const d=new Error(`Playhead still not moving while enough data buffered @${h} after ${c.nudgeMaxRetry} nudges`);this.error(d.message),r.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.BUFFER_STALLED_ERROR,error:d,fatal:!0,buffer:t.len,bufferInfo:t})}}}function S9(i,t){const r=w9(i.main);if(r&&r.start<=t)return r;const o=w9(i.audio);return o&&o.start<=t?o:null}function w9(i){if(!i)return null;switch(i.state){case Re.IDLE:case Re.STOPPED:case Re.ENDED:case Re.ERROR:return null}return i.frag}function TS(i,t){return t.getAppendedFrag(i,lt.MAIN)||t.getPartialFragment(i)}const REe=.25;function UL(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function R_(i,t,r,o,l){let c=new i(t,r,"");try{c.value=o,l&&(c.type=l)}catch{c=new i(t,r,Un(l?_n({type:l},o):o))}return c}const SS=(()=>{const i=UL();try{i&&new i(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class LEe{constructor(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(H.EVENT_CUE_ENTER,{})},this.hls=t,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:t}=this;t&&(t.on(H.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(H.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(H.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(H.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:t}=this;t&&(t.off(H.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(H.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(H.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(H.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(t,r){var o;this.media=r.media,((o=r.overrides)==null?void 0:o.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var t;const r=(t=this.hls)==null?void 0:t.latestLevelDetails;r&&this.updateDateRangeCues(r)}onMediaDetaching(t,r){this.media=null,!r.transferMedia&&(this.id3Track&&(this.removeCues&&Ap(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(t){const r=this.getID3Track(t.textTracks);return r.mode="hidden",r}getID3Track(t){if(this.media){for(let r=0;r<t.length;r++){const o=t[r];if(o.kind==="metadata"&&o.label==="id3")return RW(o,this.media),o}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(t,r){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:o,enableID3MetadataCues:l}=this.hls.config;if(!o&&!l)return;const{samples:c}=r;this.id3Track||(this.id3Track=this.createTrack(this.media));const h=UL();if(h)for(let d=0;d<c.length;d++){const m=c[d].type;if(m===ao.emsg&&!o||!l)continue;const v=iW(c[d].data),x=c[d].pts;let T=x+c[d].duration;T>SS&&(T=SS),T-x<=0&&(T=x+REe);for(let A=0;A<v.length;A++){const k=v[A];if(!sW(k)){this.updateId3CueEnds(x,m);const _=R_(h,x,T,k,m);_&&this.id3Track.addCue(_)}}}}updateId3CueEnds(t,r){var o;const l=(o=this.id3Track)==null?void 0:o.cues;if(l)for(let c=l.length;c--;){const h=l[c];h.type===r&&h.startTime<t&&h.endTime===SS&&(h.endTime=t)}}onBufferFlushing(t,{startOffset:r,endOffset:o,type:l}){const{id3Track:c,hls:h}=this;if(!h)return;const{config:{enableEmsgMetadataCues:d,enableID3MetadataCues:m}}=h;if(c&&(d||m)){let v;l==="audio"?v=x=>x.type===ao.audioId3&&m:l==="video"?v=x=>x.type===ao.emsg&&d:v=x=>x.type===ao.audioId3&&m||x.type===ao.emsg&&d,ML(c,r,o,v)}}onLevelUpdated(t,{details:r}){this.updateDateRangeCues(r,!0)}onLevelPtsUpdated(t,r){Math.abs(r.drift)>.01&&this.updateDateRangeCues(r.details)}updateDateRangeCues(t,r){if(!this.hls||!this.media)return;const{assetPlayerId:o,timelineOffset:l,enableDateRangeMetadataCues:c,interstitialsController:h}=this.hls.config;if(!c)return;const d=UL();if(o&&l&&!h){const{fragmentStart:_,fragmentEnd:R}=t;let P=this.assetCue;P?(P.startTime=_,P.endTime=R):d&&(P=this.assetCue=R_(d,_,R,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),P&&(P.id=o,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(P),P.addEventListener("enter",this.onEventCueEnter)))}if(!t.hasProgramDateTime)return;const{id3Track:m}=this,{dateRanges:v}=t,x=Object.keys(v);let T=this.dateRangeCuesAppended;if(m&&r){var E;if((E=m.cues)!=null&&E.length){const _=Object.keys(T).filter(R=>!x.includes(R));for(let R=_.length;R--;){var A;const P=_[R],D=(A=T[P])==null?void 0:A.cues;delete T[P],D&&Object.keys(D).forEach(N=>{const $=D[N];if($){$.removeEventListener("enter",this.onEventCueEnter);try{m.removeCue($)}catch{}}})}}else T=this.dateRangeCuesAppended={}}const k=t.fragments[t.fragments.length-1];if(!(x.length===0||!Ye(k==null?void 0:k.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let _=0;_<x.length;_++){const R=x[_],P=v[R],D=P.startTime,N=T[R],$=(N==null?void 0:N.cues)||{};let V=(N==null?void 0:N.durationKnown)||!1,W=SS;const{duration:C,endDate:K}=P;if(K&&C!==null)W=D+C,V=!0;else if(P.endOnNext&&!V){const Q=x.reduce((fe,O)=>{if(O!==P.id){const re=v[O];if(re.class===P.class&&re.startDate>P.startDate&&(!fe||P.startDate<fe.startDate))return re}return fe},null);Q&&(W=Q.startTime,V=!0)}const ee=Object.keys(P.attr);for(let Q=0;Q<ee.length;Q++){const fe=ee[Q];if(!Jxe(fe))continue;const O=$[fe];if(O)V&&!(N!=null&&N.durationKnown)?O.endTime=W:Math.abs(O.startTime-D)>.01&&(O.startTime=D,O.endTime=W);else if(d){let re=P.attr[fe];Zxe(fe)&&(re=mz(re));const Ae=R_(d,D,W,{key:fe,data:re},ao.dateRange);Ae&&(Ae.id=R,this.id3Track.addCue(Ae),$[fe]=Ae,h&&(fe==="X-ASSET-LIST"||fe==="X-ASSET-URL")&&Ae.addEventListener("enter",this.onEventCueEnter))}}T[R]={cues:$,dateRange:P,durationKnown:V}}}}}class PEe{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:r}=this,o=this.levelDetails;if(!r||!o)return;this.currentTime=r.currentTime;const l=this.computeLatency();if(l===null)return;this._latency=l;const{lowLatencyMode:c,maxLiveSyncPlaybackRate:h}=this.config;if(!c||h===1||!o.live)return;const d=this.targetLatency;if(d===null)return;const m=l-d,v=Math.min(this.maxLatency,d+o.targetduration);if(m<v&&m>.05&&this.forwardBufferLength>1){const T=Math.min(2,Math.max(1,h)),E=Math.round(2/(1+Math.exp(-.75*m-this.edgeStalled))*20)/20,A=Math.min(T,Math.max(1,E));this.changeMediaPlaybackRate(r,A)}else r.playbackRate!==1&&r.playbackRate!==0&&this.changeMediaPlaybackRate(r,1)},this.hls=t,this.config=t.config,this.registerListeners()}get levelDetails(){var t;return((t=this.hls)==null?void 0:t.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:t}=this;if(t.liveMaxLatencyDuration!==void 0)return t.liveMaxLatencyDuration;const r=this.levelDetails;return r?t.liveMaxLatencyDurationCount*r.targetduration:0}get targetLatency(){const t=this.levelDetails;if(t===null||this.hls===null)return null;const{holdBack:r,partHoldBack:o,targetduration:l}=t,{liveSyncDuration:c,liveSyncDurationCount:h,lowLatencyMode:d}=this.config,m=this.hls.userConfig;let v=d&&o||r;(this._targetLatencyUpdated||m.liveSyncDuration||m.liveSyncDurationCount||v===0)&&(v=c!==void 0?c:h*l);const x=l;return v+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,x)}set targetLatency(t){this.stallCount=0,this.config.liveSyncDuration=t,this._targetLatencyUpdated=!0}get liveSyncPosition(){const t=this.estimateLiveEdge(),r=this.targetLatency;if(t===null||r===null)return null;const o=this.levelDetails;if(o===null)return null;const l=o.edge,c=t-r-this.edgeStalled,h=l-o.totalduration,d=l-(this.config.lowLatencyMode&&o.partTarget||o.targetduration);return Math.min(Math.max(h,c),d)}get drift(){const t=this.levelDetails;return t===null?1:t.drift}get edgeStalled(){const t=this.levelDetails;if(t===null)return 0;const r=(this.config.lowLatencyMode&&t.partTarget||t.targetduration)*3;return Math.max(t.age-r,0)}get forwardBufferLength(){const{media:t}=this,r=this.levelDetails;if(!t||!r)return 0;const o=t.buffered.length;return(o?t.buffered.end(o-1):r.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:t}=this;t&&(t.on(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(H.ERROR,this.onError,this))}unregisterListeners(){const{hls:t}=this;t&&(t.off(H.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(H.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(H.ERROR,this.onError,this))}onMediaAttached(t,r){this.media=r.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(t,{details:r}){r.advanced&&this.onTimeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(t,r){var o;r.details===we.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(o=this.levelDetails)!=null&&o.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(t,r){var o,l;t.playbackRate!==r&&((o=this.hls)==null||o.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(l=this.targetLatency)==null?void 0:l.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${t.playbackRate} to ${r}`),t.playbackRate=r)}estimateLiveEdge(){const t=this.levelDetails;return t===null?null:t.edge+t.age}computeLatency(){const t=this.estimateLiveEdge();return t===null?null:t-this.currentTime}}class DEe extends oD{constructor(t,r){super(t,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=r,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(H.LEVEL_LOADED,this.onLevelLoaded,this),t.on(H.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(H.FRAG_BUFFERED,this.onFragBuffered,this),t.on(H.ERROR,this.onError,this)}_unregisterListeners(){const{hls:t}=this;t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(H.LEVEL_LOADED,this.onLevelLoaded,this),t.off(H.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(H.FRAG_BUFFERED,this.onFragBuffered,this),t.off(H.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(r=>{r.loadError=0,r.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(t,r){this.resetLevels()}onManifestLoaded(t,r){const o=this.hls.config.preferManagedMediaSource,l=[],c={},h={};let d=!1,m=!1,v=!1;r.levels.forEach(x=>{const T=x.attrs;let{audioCodec:E,videoCodec:A}=x;E&&(x.audioCodec=E=Mw(E,o)||void 0),A&&(A=x.videoCodec=mxe(A));const{width:k,height:_,unknownCodecs:R}=x,P=(R==null?void 0:R.length)||0;if(d||(d=!!(k&&_)),m||(m=!!A),v||(v=!!E),P||E&&!this.isAudioSupported(E)||A&&!this.isVideoSupported(A)){this.log(`Some or all CODECS not supported "${T.CODECS}"`);return}const{CODECS:D,"FRAME-RATE":N,"HDCP-LEVEL":$,"PATHWAY-ID":V,RESOLUTION:W,"VIDEO-RANGE":C}=T,ee=`${`${V||"."}-`}${x.bitrate}-${W}-${N}-${D}-${C}-${$}`;if(c[ee])if(c[ee].uri!==x.url&&!x.attrs["PATHWAY-ID"]){const Q=h[ee]+=1;x.attrs["PATHWAY-ID"]=new Array(Q+1).join(".");const fe=this.createLevel(x);c[ee]=fe,l.push(fe)}else c[ee].addGroupId("audio",T.AUDIO),c[ee].addGroupId("text",T.SUBTITLES);else{const Q=this.createLevel(x);c[ee]=Q,h[ee]=1,l.push(Q)}}),this.filterAndSortMediaOptions(l,r,d,m,v)}createLevel(t){const r=new Mv(t),o=t.supplemental;if(o!=null&&o.videoCodec&&!this.isVideoSupported(o.videoCodec)){const l=new Error(`SUPPLEMENTAL-CODECS not supported "${o.videoCodec}"`);this.log(l.message),r.supportedResult=Cz(l,[])}return r}isAudioSupported(t){return Dv(t,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(t){return Dv(t,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(t,r,o,l,c){var h;let d=[],m=[],v=t;const x=((h=r.stats)==null?void 0:h.parsing)||{};if((o||l)&&c&&(v=v.filter(({videoCodec:D,videoRange:N,width:$,height:V})=>(!!D||!!($&&V))&&Axe(N))),v.length===0){Promise.resolve().then(()=>{if(this.hls){let D="no level with compatible codecs found in manifest",N=D;r.levels.length&&(N=`one or more CODECS in variant not supported: ${Un(r.levels.map(V=>V.attrs.CODECS).filter((V,W,C)=>C.indexOf(V)===W))}`,this.warn(N),D+=` (${N})`);const $=new Error(D);this.hls.trigger(H.ERROR,{type:pt.MEDIA_ERROR,details:we.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:r.url,error:$,reason:N})}}),x.end=performance.now();return}r.audioTracks&&(d=r.audioTracks.filter(D=>!D.audioCodec||this.isAudioSupported(D.audioCodec)),E9(d)),r.subtitles&&(m=r.subtitles,E9(m));const T=v.slice(0);v.sort((D,N)=>{if(D.attrs["HDCP-LEVEL"]!==N.attrs["HDCP-LEVEL"])return(D.attrs["HDCP-LEVEL"]||"")>(N.attrs["HDCP-LEVEL"]||"")?1:-1;if(o&&D.height!==N.height)return D.height-N.height;if(D.frameRate!==N.frameRate)return D.frameRate-N.frameRate;if(D.videoRange!==N.videoRange)return Ow.indexOf(D.videoRange)-Ow.indexOf(N.videoRange);if(D.videoCodec!==N.videoCodec){const $=p7(D.videoCodec),V=p7(N.videoCodec);if($!==V)return V-$}if(D.uri===N.uri&&D.codecSet!==N.codecSet){const $=Nw(D.codecSet),V=Nw(N.codecSet);if($!==V)return V-$}return D.averageBitrate!==N.averageBitrate?D.averageBitrate-N.averageBitrate:0});let E=T[0];if(this.steering&&(v=this.steering.filterParsedLevels(v),v.length!==T.length)){for(let D=0;D<T.length;D++)if(T[D].pathwayId===v[0].pathwayId){E=T[D];break}}this._levels=v;for(let D=0;D<v.length;D++)if(v[D]===E){var A;this._firstLevel=D;const N=E.bitrate,$=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${v.length} level(s) found, first bitrate: ${N}`),((A=this.hls.userConfig)==null?void 0:A.abrEwmaDefaultEstimate)===void 0){const V=Math.min(N,this.hls.config.abrEwmaDefaultEstimateMax);V>$&&$===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=V)}break}const k=c&&!l,_=this.hls.config,R=!!(_.audioStreamController&&_.audioTrackController),P={levels:v,audioTracks:d,subtitleTracks:m,sessionData:r.sessionData,sessionKeys:r.sessionKeys,firstLevel:this._firstLevel,stats:r.stats,audio:c,video:l,altAudio:R&&!k&&d.some(D=>!!D.url)};x.end=performance.now(),this.hls.trigger(H.MANIFEST_PARSED,P)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(t){const r=this._levels;if(r.length===0)return;if(t<0||t>=r.length){const x=new Error("invalid level idx"),T=t<0;if(this.hls.trigger(H.ERROR,{type:pt.OTHER_ERROR,details:we.LEVEL_SWITCH_ERROR,level:t,fatal:T,error:x,reason:x.message}),T)return;t=Math.min(t,r.length-1)}const o=this.currentLevelIndex,l=this.currentLevel,c=l?l.attrs["PATHWAY-ID"]:void 0,h=r[t],d=h.attrs["PATHWAY-ID"];if(this.currentLevelIndex=t,this.currentLevel=h,o===t&&l&&c===d)return;this.log(`Switching to level ${t} (${h.height?h.height+"p ":""}${h.videoRange?h.videoRange+" ":""}${h.codecSet?h.codecSet+" ":""}@${h.bitrate})${d?" with Pathway "+d:""} from level ${o}${c?" with Pathway "+c:""}`);const m={level:t,attrs:h.attrs,details:h.details,bitrate:h.bitrate,averageBitrate:h.averageBitrate,maxBitrate:h.maxBitrate,realBitrate:h.realBitrate,width:h.width,height:h.height,codecSet:h.codecSet,audioCodec:h.audioCodec,videoCodec:h.videoCodec,audioGroups:h.audioGroups,subtitleGroups:h.subtitleGroups,loaded:h.loaded,loadError:h.loadError,fragmentError:h.fragmentError,name:h.name,id:h.id,uri:h.uri,url:h.url,urlId:0,audioGroupIds:h.audioGroupIds,textGroupIds:h.textGroupIds};this.hls.trigger(H.LEVEL_SWITCHING,m);const v=h.details;if(!v||v.live){const x=this.switchParams(h.uri,l==null?void 0:l.details,v);this.loadPlaylist(x)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(t){this.manualLevelIndex=t,this._startLevel===void 0&&(this._startLevel=t),t!==-1&&(this.level=t)}get firstLevel(){return this._firstLevel}set firstLevel(t){this._firstLevel=t}get startLevel(){if(this._startLevel===void 0){const t=this.hls.config.startLevel;return t!==void 0?t:this.hls.firstAutoLevel}return this._startLevel}set startLevel(t){this._startLevel=t}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(t){if(this.steering){const r=this.steering.pathways(),o=t.filter(l=>r.indexOf(l)!==-1);if(t.length<1){this.warn(`pathwayPriority ${t} should contain at least one pathway from list: ${r}`);return}this.steering.pathwayPriority=o}}onError(t,r){r.fatal||!r.context||r.context.type===sn.LEVEL&&r.context.level===this.level&&this.checkRetry(r)}onFragBuffered(t,{frag:r}){if(r!==void 0&&r.type===lt.MAIN){const o=r.elementaryStreams;if(!Object.keys(o).some(c=>!!o[c]))return;const l=this._levels[r.level];l!=null&&l.loadError&&(this.log(`Resetting level error count of ${l.loadError} on frag buffered`),l.loadError=0)}}onLevelLoaded(t,r){var o;const{level:l,details:c}=r,h=r.levelInfo;if(!h){var d;this.warn(`Invalid level index ${l}`),(d=r.deliveryDirectives)!=null&&d.skip&&(c.deltaUpdateFailed=!0);return}if(h===this.currentLevel||r.withoutMultiVariant){h.fragmentError===0&&(h.loadError=0);let m=h.details;m===r.details&&m.advanced&&(m=void 0),this.playlistLoaded(l,r,m)}else(o=r.deliveryDirectives)!=null&&o.skip&&(c.deltaUpdateFailed=!0)}loadPlaylist(t){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,t)}loadingPlaylist(t,r){super.loadingPlaylist(t,r);const o=this.getUrlWithDirectives(t.uri,r),l=this.currentLevelIndex,c=t.attrs["PATHWAY-ID"],h=t.details,d=h==null?void 0:h.age;this.log(`Loading level index ${l}${(r==null?void 0:r.msn)!==void 0?" at sn "+r.msn+" part "+r.part:""}${c?" Pathway "+c:""}${d&&h.live?" age "+d.toFixed(1)+(h.type&&" "+h.type||""):""} ${o}`),this.hls.trigger(H.LEVEL_LOADING,{url:o,level:l,levelInfo:t,pathwayId:t.attrs["PATHWAY-ID"],id:0,deliveryDirectives:r||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}removeLevel(t){var r;if(this._levels.length===1)return;const o=this._levels.filter((c,h)=>h!==t?!0:(this.steering&&this.steering.removeLevel(c),c===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,c.details&&c.details.fragments.forEach(d=>d.level=-1)),!1));Wz(o),this._levels=o,this.currentLevelIndex>-1&&(r=this.currentLevel)!=null&&r.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const l=o.length-1;this._firstLevel=Math.min(this._firstLevel,l),this._startLevel&&(this._startLevel=Math.min(this._startLevel,l)),this.hls.trigger(H.LEVELS_UPDATED,{levels:o})}onLevelsUpdated(t,{levels:r}){this._levels=r}checkMaxAutoUpdated(){const{autoLevelCapping:t,maxAutoLevel:r,maxHdcpLevel:o}=this.hls;this._maxAutoLevel!==r&&(this._maxAutoLevel=r,this.hls.trigger(H.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:t,levels:this.levels,maxAutoLevel:r,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:o}))}}function E9(i){const t={};i.forEach(r=>{const o=r.groupId||"";r.id=t[o]=t[o]||0,t[o]++})}function GW(){return self.SourceBuffer||self.WebKitSourceBuffer}function HW(){if(!$c())return!1;const t=GW();return!t||t.prototype&&typeof t.prototype.appendBuffer=="function"&&typeof t.prototype.remove=="function"}function NEe(){if(!HW())return!1;const i=$c();return typeof(i==null?void 0:i.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>i.isTypeSupported(Nv(t,"video")))||["mp4a.40.2","fLaC"].some(t=>i.isTypeSupported(Nv(t,"audio"))))}function MEe(){var i;const t=GW();return typeof(t==null||(i=t.prototype)==null?void 0:i.changeType)=="function"}const OEe=100;class jEe extends JP{constructor(t,r,o){super(t,r,o,"stream-controller",lt.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const l=this.media,c=l?l.currentTime:null;if(c===null||!Ye(c)||(this.log(`Media seeked to ${c.toFixed(3)}`),!this.getBufferedFrag(c)))return;const h=this.getFwdBufferInfoAtPos(l,c,lt.MAIN,0);if(h===null||h.len===0){this.warn(`Main forward buffer length at ${c} on "seeked" event ${h?h.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:t}=this;t.on(H.MANIFEST_PARSED,this.onManifestParsed,this),t.on(H.LEVEL_LOADING,this.onLevelLoading,this),t.on(H.LEVEL_LOADED,this.onLevelLoaded,this),t.on(H.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(H.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(H.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(H.BUFFER_CREATED,this.onBufferCreated,this),t.on(H.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(H.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(H.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:t}=this;t.off(H.MANIFEST_PARSED,this.onManifestParsed,this),t.off(H.LEVEL_LOADED,this.onLevelLoaded,this),t.off(H.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(H.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(H.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(H.BUFFER_CREATED,this.onBufferCreated,this),t.off(H.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(H.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(H.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(t,r){if(this.levels){const{lastCurrentTime:o,hls:l}=this;if(this.stopLoad(),this.setInterval(OEe),this.level=-1,!this.startFragRequested){let c=l.startLevel;c===-1&&(l.config.testBandwidth&&this.levels.length>1?(c=0,this.bitrateTest=!0):c=l.firstAutoLevel),l.nextLoadLevel=c,this.level=l.loadLevel,this._hasEnoughToStart=!!r}o>0&&t===-1&&!r&&(this.log(`Override startPosition with lastCurrentTime @${o.toFixed(3)}`),t=o),this.state=Re.IDLE,this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=r?-1:t,this.tick()}else this._forceStartLoad=!0,this.state=Re.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Re.WAITING_LEVEL:{const{levels:t,level:r}=this,o=t==null?void 0:t[r],l=o==null?void 0:o.details;if(l&&(!l.live||this.levelLastLoaded===o&&!this.waitForLive(o))){if(this.waitForCdnTuneIn(l))break;this.state=Re.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Re.IDLE;break}break}case Re.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===Re.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var t;super.onTickEnd(),(t=this.media)!=null&&t.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:t,levelLastLoaded:r,levels:o,media:l}=this;if(r===null||!l&&!this.primaryPrefetch&&(this.startFragRequested||!t.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const c=this.buffering?t.nextLoadLevel:t.loadLevel;if(!(o!=null&&o[c]))return;const h=o[c],d=this.getMainFwdBufferInfo();if(d===null)return;const m=this.getLevelDetails();if(m&&this._streamEnded(d,m)){const _={};this.altAudio===2&&(_.type="video"),this.hls.trigger(H.BUFFER_EOS,_),this.state=Re.ENDED;return}if(!this.buffering)return;t.loadLevel!==c&&t.manualLevel===-1&&this.log(`Adapting to level ${c} from level ${this.level}`),this.level=t.nextLoadLevel=c;const v=h.details;if(!v||this.state===Re.WAITING_LEVEL||this.waitForLive(h)){this.level=c,this.state=Re.WAITING_LEVEL,this.startFragRequested=!1;return}const x=d.len,T=this.getMaxBufferLength(h.maxBitrate);if(x>=T)return;this.backtrackFragment&&this.backtrackFragment.start>d.end&&(this.backtrackFragment=null);const E=this.backtrackFragment?this.backtrackFragment.start:d.end;let A=this.getNextFragment(E,v);if(this.couldBacktrack&&!this.fragPrevious&&A&&Dr(A)&&this.fragmentTracker.getState(A)!==ii.OK){var k;const R=((k=this.backtrackFragment)!=null?k:A).sn-v.startSN,P=v.fragments[R-1];P&&A.cc===P.cc&&(A=P,this.fragmentTracker.removeFragment(P))}else this.backtrackFragment&&d.len&&(this.backtrackFragment=null);if(A&&this.isLoopLoading(A,E)){if(!A.gap){const R=this.audioOnly&&!this.altAudio?jn.AUDIO:jn.VIDEO,P=(R===jn.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;P&&this.afterBufferFlushed(P,R,lt.MAIN)}A=this.getNextFragmentLoopLoading(A,v,d,lt.MAIN,T)}A&&(A.initSegment&&!A.initSegment.data&&!this.bitrateTest&&(A=A.initSegment),this.loadFragment(A,h,E))}loadFragment(t,r,o){const l=this.fragmentTracker.getState(t);l===ii.NOT_LOADED||l===ii.PARTIAL?Dr(t)?this.bitrateTest?(this.log(`Fragment ${t.sn} of level ${t.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(t,r)):super.loadFragment(t,r,o):this._loadInitSegment(t,r):this.clearTrackerIfNeeded(t)}getBufferedFrag(t){return this.fragmentTracker.getBufferedFrag(t,lt.MAIN)}followingBufferedFrag(t){return t?this.getBufferedFrag(t.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:t,media:r}=this;if(r!=null&&r.readyState){let o;const l=this.getAppendedFrag(r.currentTime);l&&l.start>1&&this.flushMainBuffer(0,l.start-1);const c=this.getLevelDetails();if(c!=null&&c.live){const d=this.getMainFwdBufferInfo();if(!d||d.len<c.targetduration*2)return}if(!r.paused&&t){const d=this.hls.nextLoadLevel,m=t[d],v=this.fragLastKbps;v&&this.fragCurrent?o=this.fragCurrent.duration*m.maxBitrate/(1e3*v)+1:o=0}else o=0;const h=this.getBufferedFrag(r.currentTime+o);if(h){const d=this.followingBufferedFrag(h);if(d){this.abortCurrentFrag();const m=d.maxStartPTS?d.maxStartPTS:d.start,v=d.duration,x=Math.max(h.end,m+Math.min(Math.max(v-this.config.maxFragLookUpTolerance,v*(this.couldBacktrack?.5:.125)),v*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(x,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case Re.KEY_LOADING:case Re.FRAG_LOADING:case Re.FRAG_LOADING_WAITING_RETRY:case Re.PARSING:case Re.PARSED:this.state=Re.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(t,r){super.flushMainBuffer(t,r,this.altAudio===2?"video":null)}onMediaAttached(t,r){super.onMediaAttached(t,r);const o=r.media;fs(o,"playing",this.onMediaPlaying),fs(o,"seeked",this.onMediaSeeked)}onMediaDetaching(t,r){const{media:o}=this;o&&(Ms(o,"playing",this.onMediaPlaying),Ms(o,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(t,r),!r.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(H.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(t,r){let o=!1,l=!1;for(let c=0;c<r.levels.length;c++){const h=r.levels[c].audioCodec;h&&(o=o||h.indexOf("mp4a.40.2")!==-1,l=l||h.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=o&&l&&!MEe(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=r.levels,this.startFragRequested=!1}onLevelLoading(t,r){const{levels:o}=this;if(!o||this.state!==Re.IDLE)return;const l=r.levelInfo;(!l.details||l.details.live&&(this.levelLastLoaded!==l||l.details.expired)||this.waitForCdnTuneIn(l.details))&&(this.state=Re.WAITING_LEVEL)}onLevelLoaded(t,r){var o;const{levels:l,startFragRequested:c}=this,h=r.level,d=r.details,m=d.totalduration;if(!l){this.warn(`Levels were reset while loading level ${h}`);return}this.log(`Level ${h} loaded [${d.startSN},${d.endSN}]${d.lastPartSn?`[part-${d.lastPartSn}-${d.lastPartIndex}]`:""}, cc [${d.startCC}, ${d.endCC}] duration:${m}`);const v=r.levelInfo,x=this.fragCurrent;x&&(this.state===Re.FRAG_LOADING||this.state===Re.FRAG_LOADING_WAITING_RETRY)&&x.level!==r.level&&x.loader&&this.abortCurrentFrag();let T=0;if(d.live||(o=v.details)!=null&&o.live){var E;if(this.checkLiveUpdate(d),d.deltaUpdateFailed)return;T=this.alignPlaylists(d,v.details,(E=this.levelLastLoaded)==null?void 0:E.details)}if(v.details=d,this.levelLastLoaded=v,c||this.setStartPosition(d,T),this.hls.trigger(H.LEVEL_UPDATED,{details:d,level:h}),this.state===Re.WAITING_LEVEL){if(this.waitForCdnTuneIn(d))return;this.state=Re.IDLE}c&&d.live&&this.synchronizeToLiveEdge(d),this.tick()}synchronizeToLiveEdge(t){const{config:r,media:o}=this;if(!o)return;const l=this.hls.liveSyncPosition,c=this.getLoadPosition(),h=t.fragmentStart,d=t.edge,m=c>=h-r.maxFragLookUpTolerance&&c<=d;if(l!==null&&o.duration>l&&(c<l||!m)){const x=r.liveMaxLatencyDuration!==void 0?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*t.targetduration;if((!m&&o.readyState<4||c<d-x)&&(this._hasEnoughToStart||(this.nextLoadPosition=l),o.readyState))if(this.warn(`Playback: ${c.toFixed(3)} is located too far from the end of live sliding playlist: ${d}, reset currentTime to : ${l.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var v;const T=qt.bufferInfo(o,l,0);if(!((v=T.buffered)!=null&&v.length)){o.currentTime=l;return}if(T.start<=c){o.currentTime=l;return}const{nextStart:A}=qt.bufferedInfo(T.buffered,c,0);A&&(o.currentTime=A)}else o.currentTime=l}}_handleFragmentLoadProgress(t){var r;const o=t.frag,{part:l,payload:c}=t,{levels:h}=this;if(!h){this.warn(`Levels were reset while fragment load was in progress. Fragment ${o.sn} of level ${o.level} will not be buffered`);return}const d=h[o.level];if(!d){this.warn(`Level ${o.level} not found on progress`);return}const m=d.details;if(!m){this.warn(`Dropping fragment ${o.sn} of level ${o.level} after level details were reset`),this.fragmentTracker.removeFragment(o);return}const v=d.videoCodec,x=m.PTSKnown||!m.live,T=(r=o.initSegment)==null?void 0:r.data,E=this._getAudioCodec(d),A=this.transmuxer=this.transmuxer||new gW(this.hls,lt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),k=l?l.index:-1,_=k!==-1,R=new YP(o.level,o.sn,o.stats.chunkCount,c.byteLength,k,_),P=this.initPTS[o.cc];A.push(c,T,E,v,o,l,m.totalduration,x,R,P)}onAudioTrackSwitching(t,r){const o=this.hls,l=this.altAudio!==0;if(jw(r.url,o))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const h=this.fragCurrent;h&&(this.log("Switching to main audio track, cancel main fragment load"),h.abortRequests(),this.fragmentTracker.removeFragment(h)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(l){this.altAudio=0,this.fragmentTracker.removeAllFragments(),o.once(H.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(H.AUDIO_TRACK_SWITCHED,r)}),o.trigger(H.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}o.trigger(H.AUDIO_TRACK_SWITCHED,r)}}onAudioTrackSwitched(t,r){const o=jw(r.url,this.hls);if(o){const l=this.videoBuffer;l&&this.mediaBuffer!==l&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=l)}this.altAudio=o?2:0,this.tick()}onBufferCreated(t,r){const o=r.tracks;let l,c,h=!1;for(const d in o){const m=o[d];if(m.id==="main"){if(c=d,l=m,d==="video"){const v=o[d];v&&(this.videoBuffer=v.buffer)}}else h=!0}h&&l?(this.log(`Alternate track found, use ${c}.buffered to schedule main fragment loading`),this.mediaBuffer=l.buffer):this.mediaBuffer=this.media}onFragBuffered(t,r){const{frag:o,part:l}=r,c=o.type===lt.MAIN;if(c){if(this.fragContextChanged(o)){this.warn(`Fragment ${o.sn}${l?" p: "+l.index:""} of level ${o.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Re.PARSED&&(this.state=Re.IDLE);return}const d=l?l.stats:o.stats;this.fragLastKbps=Math.round(8*d.total/(d.buffering.end-d.loading.first)),Dr(o)&&(this.fragPrevious=o),this.fragBufferedComplete(o,l)}const h=this.media;h&&(!this._hasEnoughToStart&&qt.getBuffered(h).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),c&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(t,r){var o;if(r.fatal){this.state=Re.ERROR;return}switch(r.details){case we.FRAG_GAP:case we.FRAG_PARSING_ERROR:case we.FRAG_DECRYPT_ERROR:case we.FRAG_LOAD_ERROR:case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_ERROR:case we.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(lt.MAIN,r);break;case we.LEVEL_LOAD_ERROR:case we.LEVEL_LOAD_TIMEOUT:case we.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===Re.WAITING_LEVEL&&((o=r.context)==null?void 0:o.type)===sn.LEVEL&&(this.state=Re.IDLE);break;case we.BUFFER_ADD_CODEC_ERROR:case we.BUFFER_APPEND_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&this.resetLoadingState();break;case we.BUFFER_FULL_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case we.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onFragLoadEmergencyAborted(){this.state=Re.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(t,{type:r}){if(r!==jn.AUDIO||!this.altAudio){const o=(r===jn.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;o&&(this.afterBufferFlushed(o,r,lt.MAIN),this.tick())}}onLevelsUpdated(t,r){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=r.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:t}=this;if(!t)return;const r=t.currentTime;let o=this.startPosition;if(o>=0&&r<o){if(t.seeking){this.log(`could not seek to ${o}, already seeking at ${r}`);return}const l=this.timelineOffset;l&&o&&(o+=l);const c=this.getLevelDetails(),h=qt.getBuffered(t),d=h.length?h.start(0):0,m=d-o,v=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||m>0&&(m<v||this.loadingParts&&m<2*((c==null?void 0:c.partTarget)||0)))&&(this.log(`adjusting start position by ${m} to match buffer start`),o+=m,this.startPosition=o),r<o&&(this.log(`seek to target start position ${o} from current time ${r} buffer start ${d}`),t.currentTime=o)}}_getAudioCodec(t){let r=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&r&&(this.log("Swapping audio codec"),r.indexOf("mp4a.40.5")!==-1?r="mp4a.40.2":r="mp4a.40.5"),r}_loadBitrateTestFrag(t,r){t.bitrateTest=!0,this._doFragLoad(t,r).then(o=>{const{hls:l}=this,c=o==null?void 0:o.frag;if(!c||this.fragContextChanged(c))return;r.fragmentError=0,this.state=Re.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const h=c.stats;h.parsing.start=h.parsing.end=h.buffering.start=h.buffering.end=self.performance.now(),l.trigger(H.FRAG_LOADED,o),c.bitrateTest=!1}).catch(o=>{this.state===Re.STOPPED||this.state===Re.ERROR||(this.warn(o),this.resetFragmentLoading(t))})}_handleTransmuxComplete(t){const r=this.playlistType,{hls:o}=this,{remuxResult:l,chunkMeta:c}=t,h=this.getCurrentContext(c);if(!h){this.resetWhenMissingContext(c);return}const{frag:d,part:m,level:v}=h,{video:x,text:T,id3:E,initSegment:A}=l,{details:k}=v,_=this.altAudio?void 0:l.audio;if(this.fragContextChanged(d)){this.fragmentTracker.removeFragment(d);return}if(this.state=Re.PARSING,A){const R=A.tracks;if(R){const $=d.initSegment||d;if(this.unhandledEncryptionError(A,d))return;this._bufferInitSegment(v,R,$,c),o.trigger(H.FRAG_PARSING_INIT_SEGMENT,{frag:$,id:r,tracks:R})}const P=A.initPTS,D=A.timescale,N=this.initPTS[d.cc];if(Ye(P)&&(!N||N.baseTime!==P||N.timescale!==D)){const $=A.trackId;this.initPTS[d.cc]={baseTime:P,timescale:D,trackId:$},o.trigger(H.INIT_PTS_FOUND,{frag:d,id:r,initPTS:P,timescale:D,trackId:$})}}if(x&&k){_&&x.type==="audiovideo"&&this.logMuxedErr(d);const R=k.fragments[d.sn-1-k.startSN],P=d.sn===k.startSN,D=!R||d.cc>R.cc;if(l.independent!==!1){const{startPTS:N,endPTS:$,startDTS:V,endDTS:W}=x;if(m)m.elementaryStreams[x.type]={startPTS:N,endPTS:$,startDTS:V,endDTS:W};else if(x.firstKeyFrame&&x.independent&&c.id===1&&!D&&(this.couldBacktrack=!0),x.dropped&&x.independent){const C=this.getMainFwdBufferInfo(),K=(C?C.end:this.getLoadPosition())+this.config.maxBufferHole,ee=x.firstKeyFramePTS?x.firstKeyFramePTS:N;if(!P&&K<ee-this.config.maxBufferHole&&!D){this.backtrack(d);return}else D&&(d.gap=!0);d.setElementaryStreamInfo(x.type,d.start,$,d.start,W,!0)}else P&&N-(k.appliedTimelineOffset||0)>zS&&(d.gap=!0);d.setElementaryStreamInfo(x.type,N,$,V,W),this.backtrackFragment&&(this.backtrackFragment=d),this.bufferFragmentData(x,d,m,c,P||D)}else if(P||D)d.gap=!0;else{this.backtrack(d);return}}if(_){const{startPTS:R,endPTS:P,startDTS:D,endDTS:N}=_;m&&(m.elementaryStreams[jn.AUDIO]={startPTS:R,endPTS:P,startDTS:D,endDTS:N}),d.setElementaryStreamInfo(jn.AUDIO,R,P,D,N),this.bufferFragmentData(_,d,m,c)}if(k&&E!=null&&E.samples.length){const R={id:r,frag:d,details:k,samples:E.samples};o.trigger(H.FRAG_PARSING_METADATA,R)}if(k&&T){const R={id:r,frag:d,details:k,samples:T.samples};o.trigger(H.FRAG_PARSING_USERDATA,R)}}logMuxedErr(t){this.warn(`${Dr(t)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${t.url}`)}_bufferInitSegment(t,r,o,l){if(this.state!==Re.PARSING)return;this.audioOnly=!!r.audio&&!r.video,this.altAudio&&!this.audioOnly&&(delete r.audio,r.audiovideo&&this.logMuxedErr(o));const{audio:c,video:h,audiovideo:d}=r;if(c){const v=t.audioCodec;let x=BS(c.codec,v);x==="mp4a"&&(x="mp4a.40.5");const T=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){x&&(x.indexOf("mp4a.40.5")!==-1?x="mp4a.40.2":x="mp4a.40.5");const E=c.metadata;E&&"channelCount"in E&&(E.channelCount||1)!==1&&T.indexOf("firefox")===-1&&(x="mp4a.40.5")}x&&x.indexOf("mp4a.40.5")!==-1&&T.indexOf("android")!==-1&&c.container!=="audio/mpeg"&&(x="mp4a.40.2",this.log(`Android: force audio codec to ${x}`)),v&&v!==x&&this.log(`Swapping manifest audio codec "${v}" for "${x}"`),c.levelCodec=x,c.id=lt.MAIN,this.log(`Init audio buffer, container:${c.container}, codecs[selected/level/parsed]=[${x||""}/${v||""}/${c.codec}]`),delete r.audiovideo}if(h){h.levelCodec=t.videoCodec,h.id=lt.MAIN;const v=h.codec;if((v==null?void 0:v.length)===4)switch(v){case"hvc1":case"hev1":h.codec="hvc1.1.6.L120.90";break;case"av01":h.codec="av01.0.04M.08";break;case"avc1":h.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${h.container}, codecs[level/parsed]=[${t.videoCodec||""}/${v}]${h.codec!==v?" parsed-corrected="+h.codec:""}${h.supplemental?" supplemental="+h.supplemental:""}`),delete r.audiovideo}d&&(this.log(`Init audiovideo buffer, container:${d.container}, codecs[level/parsed]=[${t.codecs}/${d.codec}]`),delete r.video,delete r.audio);const m=Object.keys(r);if(m.length){if(this.hls.trigger(H.BUFFER_CODECS,r),!this.hls)return;m.forEach(v=>{const T=r[v].initSegment;T!=null&&T.byteLength&&this.hls.trigger(H.BUFFER_APPENDING,{type:v,data:T,frag:o,part:null,chunkMeta:l,parent:o.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const t=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(t,lt.MAIN)}get maxBufferLength(){const{levels:t,level:r}=this,o=t==null?void 0:t[r];return o?this.getMaxBufferLength(o.maxBitrate):this.config.maxBufferLength}backtrack(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=Re.IDLE}checkFragmentChanged(){const t=this.media;let r=null;if(t&&t.readyState>1&&t.seeking===!1){const o=t.currentTime;if(qt.isBuffered(t,o)?r=this.getAppendedFrag(o):qt.isBuffered(t,o+.1)&&(r=this.getAppendedFrag(o+.1)),r){this.backtrackFragment=null;const l=this.fragPlaying,c=r.level;(!l||r.sn!==l.sn||l.level!==c)&&(this.fragPlaying=r,this.hls.trigger(H.FRAG_CHANGED,{frag:r}),(!l||l.level!==c)&&this.hls.trigger(H.LEVEL_SWITCHED,{level:c}))}}}get nextLevel(){const t=this.nextBufferedFrag;return t?t.level:-1}get currentFrag(){var t;if(this.fragPlaying)return this.fragPlaying;const r=((t=this.media)==null?void 0:t.currentTime)||this.lastCurrentTime;return Ye(r)?this.getAppendedFrag(r):null}get currentProgramDateTime(){var t;const r=((t=this.media)==null?void 0:t.currentTime)||this.lastCurrentTime;if(Ye(r)){const o=this.getLevelDetails(),l=this.currentFrag||(o?kh(null,o.fragments,r):null);if(l){const c=l.programDateTime;if(c!==null){const h=c+(r-l.start)*1e3;return new Date(h)}}}return null}get currentLevel(){const t=this.currentFrag;return t?t.level:-1}get nextBufferedFrag(){const t=this.currentFrag;return t?this.followingBufferedFrag(t):null}get forceStartLoad(){return this._forceStartLoad}}class UEe extends Vo{constructor(t,r){super("key-loader",r),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=t}abort(t){for(const o in this.keyIdToKeyInfo){const l=this.keyIdToKeyInfo[o].loader;if(l){var r;if(t&&t!==((r=l.context)==null?void 0:r.frag.type))return;l.abort()}}}detach(){for(const t in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[t];(r.mediaKeySessionContext||r.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[t]}}destroy(){this.detach();for(const t in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[t].loader;r&&r.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(t,r=we.KEY_LOAD_ERROR,o,l,c){return new Ql({type:pt.NETWORK_ERROR,details:r,fatal:!1,frag:t,response:c,error:o,networkDetails:l})}loadClear(t,r,o){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(r.length)for(let l=0,c=r.length;l<c;l++){const h=r[l];if(t.cc<=h.cc&&(!Dr(t)||!Dr(h)||t.sn<h.sn)||!o&&l==c-1)return this.emeController.selectKeySystemFormat(h).then(d=>{if(!this.emeController)return;h.setKeyFormat(d);const m=VS(d);if(m)return this.emeController.getKeySystemAccess([m])})}if(this.config.requireKeySystemAccessOnStart){const l=F0(this.config);if(l.length)return this.emeController.getKeySystemAccess(l)}}return null}load(t){return!t.decryptdata&&t.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(t).then(r=>this.loadInternal(t,r)):this.loadInternal(t)}loadInternal(t,r){var o,l;r&&t.setKeyFormat(r);const c=t.decryptdata;if(!c){const v=new Error(r?`Expected frag.decryptdata to be defined after setting format ${r}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(t,we.KEY_LOAD_ERROR,v))}const h=c.uri;if(!h)return Promise.reject(this.createKeyLoadError(t,we.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${h}"`)));const d=L_(c);let m=this.keyIdToKeyInfo[d];if((o=m)!=null&&o.decryptdata.key)return c.key=m.decryptdata.key,Promise.resolve({frag:t,keyInfo:m});if(this.emeController&&(l=m)!=null&&l.keyLoadPromise)switch(this.emeController.getKeyStatus(m.decryptdata)){case"usable":case"usable-in-future":return m.keyLoadPromise.then(x=>{const{keyInfo:T}=x;return c.key=T.decryptdata.key,{frag:t,keyInfo:T}})}switch(this.log(`${this.keyIdToKeyInfo[d]?"Rel":"L"}oading${c.keyId?" keyId: "+Pi(c.keyId):""} URI: ${c.uri} from ${t.type} ${t.level}`),m=this.keyIdToKeyInfo[d]={decryptdata:c,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},c.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return c.keyFormat==="identity"?this.loadKeyHTTP(m,t):this.loadKeyEME(m,t);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(m,t);default:return Promise.reject(this.createKeyLoadError(t,we.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${c.method}"`)))}}loadKeyEME(t,r){const o={frag:r,keyInfo:t};if(this.emeController&&this.config.emeEnabled){var l;if(!t.decryptdata.keyId&&(l=r.initSegment)!=null&&l.data){const h=rxe(r.initSegment.data);if(h.length){let d=h[0];d.some(m=>m!==0)?(this.log(`Using keyId found in init segment ${Pi(d)}`),Mc.setKeyIdForUri(t.decryptdata.uri,d)):(d=Mc.addKeyIdForUri(t.decryptdata.uri),this.log(`Generating keyId to patch media ${Pi(d)}`)),t.decryptdata.keyId=d}}if(!t.decryptdata.keyId&&!Dr(r))return Promise.resolve(o);const c=this.emeController.loadKey(o);return(t.keyLoadPromise=c.then(h=>(t.mediaKeySessionContext=h,o))).catch(h=>{throw t.keyLoadPromise=null,"data"in h&&(h.data.frag=r),h})}return Promise.resolve(o)}loadKeyHTTP(t,r){const o=this.config,l=o.loader,c=new l(o);return r.keyLoader=t.loader=c,t.keyLoadPromise=new Promise((h,d)=>{const m={keyInfo:t,frag:r,responseType:"arraybuffer",url:t.decryptdata.uri},v=o.keyLoadPolicy.default,x={loadPolicy:v,timeout:v.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},T={onSuccess:(E,A,k,_)=>{const{frag:R,keyInfo:P}=k,D=L_(P.decryptdata);if(!R.decryptdata||P!==this.keyIdToKeyInfo[D])return d(this.createKeyLoadError(R,we.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),_));P.decryptdata.key=R.decryptdata.key=new Uint8Array(E.data),R.keyLoader=null,P.loader=null,h({frag:R,keyInfo:P})},onError:(E,A,k,_)=>{this.resetLoader(A),d(this.createKeyLoadError(r,we.KEY_LOAD_ERROR,new Error(`HTTP Error ${E.code} loading key ${E.text}`),k,_n({url:m.url,data:void 0},E)))},onTimeout:(E,A,k)=>{this.resetLoader(A),d(this.createKeyLoadError(r,we.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),k))},onAbort:(E,A,k)=>{this.resetLoader(A),d(this.createKeyLoadError(r,we.INTERNAL_ABORTED,new Error("key loading aborted"),k))}};c.load(m,x,T)})}resetLoader(t){const{frag:r,keyInfo:o,url:l}=t,c=o.loader;r.keyLoader===c&&(r.keyLoader=null,o.loader=null);const h=L_(o.decryptdata)||l;delete this.keyIdToKeyInfo[h],c&&c.destroy()}}function L_(i){if(i.keyFormat!==Di.FAIRPLAY){const t=i.keyId;if(t)return Pi(t)}return i.uri}function b9(i){const{type:t}=i;switch(t){case sn.AUDIO_TRACK:return lt.AUDIO;case sn.SUBTITLE_TRACK:return lt.SUBTITLE;default:return lt.MAIN}}function P_(i,t){let r=i.url;return(r===void 0||r.indexOf("data:")===0)&&(r=t.url),r}class FEe{constructor(t){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=t,this.registerListeners()}startLoad(t){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:t}=this;t.on(H.MANIFEST_LOADING,this.onManifestLoading,this),t.on(H.LEVEL_LOADING,this.onLevelLoading,this),t.on(H.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(H.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),t.on(H.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:t}=this;t.off(H.MANIFEST_LOADING,this.onManifestLoading,this),t.off(H.LEVEL_LOADING,this.onLevelLoading,this),t.off(H.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(H.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),t.off(H.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(t){const r=this.hls.config,o=r.pLoader,l=r.loader,c=o||l,h=new c(r);return this.loaders[t.type]=h,h}getInternalLoader(t){return this.loaders[t.type]}resetInternalLoader(t){this.loaders[t]&&delete this.loaders[t]}destroyInternalLoaders(){for(const t in this.loaders){const r=this.loaders[t];r&&r.destroy(),this.resetInternalLoader(t)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(t,r){const{url:o}=r;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:sn.MANIFEST,url:o,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(t,r){const{id:o,level:l,pathwayId:c,url:h,deliveryDirectives:d,levelInfo:m}=r;this.load({id:o,level:l,pathwayId:c,responseType:"text",type:sn.LEVEL,url:h,deliveryDirectives:d,levelOrTrack:m})}onAudioTrackLoading(t,r){const{id:o,groupId:l,url:c,deliveryDirectives:h,track:d}=r;this.load({id:o,groupId:l,level:null,responseType:"text",type:sn.AUDIO_TRACK,url:c,deliveryDirectives:h,levelOrTrack:d})}onSubtitleTrackLoading(t,r){const{id:o,groupId:l,url:c,deliveryDirectives:h,track:d}=r;this.load({id:o,groupId:l,level:null,responseType:"text",type:sn.SUBTITLE_TRACK,url:c,deliveryDirectives:h,levelOrTrack:d})}onLevelsUpdated(t,r){const o=this.loaders[sn.LEVEL];if(o){const l=o.context;l&&!r.levels.some(c=>c===l.levelOrTrack)&&(o.abort(),delete this.loaders[sn.LEVEL])}}load(t){var r;const o=this.hls.config;let l=this.getInternalLoader(t);if(l){const v=this.hls.logger,x=l.context;if(x&&x.levelOrTrack===t.levelOrTrack&&(x.url===t.url||x.deliveryDirectives&&!t.deliveryDirectives)){x.url===t.url?v.log(`[playlist-loader]: ignore ${t.url} ongoing request`):v.log(`[playlist-loader]: ignore ${t.url} in favor of ${x.url}`);return}v.log(`[playlist-loader]: aborting previous loader for type: ${t.type}`),l.abort()}let c;if(t.type===sn.MANIFEST?c=o.manifestLoadPolicy.default:c=Nn({},o.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),l=this.createInternalLoader(t),Ye((r=t.deliveryDirectives)==null?void 0:r.part)){let v;if(t.type===sn.LEVEL&&t.level!==null?v=this.hls.levels[t.level].details:t.type===sn.AUDIO_TRACK&&t.id!==null?v=this.hls.audioTracks[t.id].details:t.type===sn.SUBTITLE_TRACK&&t.id!==null&&(v=this.hls.subtitleTracks[t.id].details),v){const x=v.partTarget,T=v.targetduration;if(x&&T){const E=Math.max(x*3,T*.8)*1e3;c=Nn({},c,{maxTimeToFirstByteMs:Math.min(E,c.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(E,c.maxTimeToFirstByteMs)})}}}const h=c.errorRetry||c.timeoutRetry||{},d={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:h.maxNumRetry||0,retryDelay:h.retryDelayMs||0,maxRetryDelay:h.maxRetryDelayMs||0},m={onSuccess:(v,x,T,E)=>{const A=this.getInternalLoader(T);this.resetInternalLoader(T.type);const k=v.data;x.parsing.start=performance.now(),Ja.isMediaPlaylist(k)||T.type!==sn.MANIFEST?this.handleTrackOrLevelPlaylist(v,x,T,E||null,A):this.handleMasterPlaylist(v,x,T,E)},onError:(v,x,T,E)=>{this.handleNetworkError(x,T,!1,v,E)},onTimeout:(v,x,T)=>{this.handleNetworkError(x,T,!0,void 0,v)}};l.load(t,d,m)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:t,startPosition:r},forceStartLoad:o}=this.hls;(t||o)&&(this.hls.logger.log(`${t?"auto":"force"} startLoad with configured startPosition ${r}`),this.hls.startLoad(r))}handleMasterPlaylist(t,r,o,l){const c=this.hls,h=t.data,d=P_(t,o),m=Ja.parseMasterPlaylist(h,d);if(m.playlistParsingError){r.parsing.end=performance.now(),this.handleManifestParsingError(t,o,m.playlistParsingError,l,r);return}const{contentSteering:v,levels:x,sessionData:T,sessionKeys:E,startTimeOffset:A,variableList:k}=m;this.variableList=k,x.forEach(D=>{const{unknownCodecs:N}=D;if(N){const{preferManagedMediaSource:$}=this.hls.config;let{audioCodec:V,videoCodec:W}=D;for(let C=N.length;C--;){const K=N[C];Dv(K,"audio",$)?(D.audioCodec=V=V?`${V},${K}`:K,dm.audio[V.substring(0,4)]=2,N.splice(C,1)):Dv(K,"video",$)&&(D.videoCodec=W=W?`${W},${K}`:K,dm.video[W.substring(0,4)]=2,N.splice(C,1))}}});const{AUDIO:_=[],SUBTITLES:R,"CLOSED-CAPTIONS":P}=Ja.parseMasterPlaylistMedia(h,d,m);_.length&&!_.some(N=>!N.url)&&x[0].audioCodec&&!x[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),_.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ur({}),bitrate:0,url:""})),c.trigger(H.MANIFEST_LOADED,{levels:x,audioTracks:_,subtitles:R,captions:P,contentSteering:v,url:d,stats:r,networkDetails:l,sessionData:T,sessionKeys:E,startTimeOffset:A,variableList:k})}handleTrackOrLevelPlaylist(t,r,o,l,c){const h=this.hls,{id:d,level:m,type:v}=o,x=P_(t,o),T=Ye(m)?m:Ye(d)?d:0,E=b9(o),A=Ja.parseLevelPlaylist(t.data,x,T,E,0,this.variableList);if(v===sn.MANIFEST){const k={attrs:new ur({}),bitrate:0,details:A,name:"",url:x};A.requestScheduled=r.loading.start+qz(A,0),h.trigger(H.MANIFEST_LOADED,{levels:[k],audioTracks:[],url:x,stats:r,networkDetails:l,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}r.parsing.end=performance.now(),o.levelDetails=A,this.handlePlaylistLoaded(A,t,r,o,l,c)}handleManifestParsingError(t,r,o,l,c){this.hls.trigger(H.ERROR,{type:pt.NETWORK_ERROR,details:we.MANIFEST_PARSING_ERROR,fatal:r.type===sn.MANIFEST,url:t.url,err:o,error:o,reason:o.message,response:t,context:r,networkDetails:l,stats:c})}handleNetworkError(t,r,o=!1,l,c){let h=`A network ${o?"timeout":"error"+(l?" (status "+l.code+")":"")} occurred while loading ${t.type}`;t.type===sn.LEVEL?h+=`: ${t.level} id: ${t.id}`:(t.type===sn.AUDIO_TRACK||t.type===sn.SUBTITLE_TRACK)&&(h+=` id: ${t.id} group-id: "${t.groupId}"`);const d=new Error(h);this.hls.logger.warn(`[playlist-loader]: ${h}`);let m=we.UNKNOWN,v=!1;const x=this.getInternalLoader(t);switch(t.type){case sn.MANIFEST:m=o?we.MANIFEST_LOAD_TIMEOUT:we.MANIFEST_LOAD_ERROR,v=!0;break;case sn.LEVEL:m=o?we.LEVEL_LOAD_TIMEOUT:we.LEVEL_LOAD_ERROR,v=!1;break;case sn.AUDIO_TRACK:m=o?we.AUDIO_TRACK_LOAD_TIMEOUT:we.AUDIO_TRACK_LOAD_ERROR,v=!1;break;case sn.SUBTITLE_TRACK:m=o?we.SUBTITLE_TRACK_LOAD_TIMEOUT:we.SUBTITLE_LOAD_ERROR,v=!1;break}x&&this.resetInternalLoader(t.type);const T={type:pt.NETWORK_ERROR,details:m,fatal:v,url:t.url,loader:x,context:t,error:d,networkDetails:r,stats:c};if(l){const E=(r==null?void 0:r.url)||t.url;T.response=_n({url:E,data:void 0},l)}this.hls.trigger(H.ERROR,T)}handlePlaylistLoaded(t,r,o,l,c,h){const d=this.hls,{type:m,level:v,levelOrTrack:x,id:T,groupId:E,deliveryDirectives:A}=l,k=P_(r,l),_=b9(l);let R=typeof l.level=="number"&&_===lt.MAIN?v:void 0;const P=t.playlistParsingError;if(P){if(this.hls.logger.warn(`${P} ${t.url}`),!d.config.ignorePlaylistParsingErrors){d.trigger(H.ERROR,{type:pt.NETWORK_ERROR,details:we.LEVEL_PARSING_ERROR,fatal:!1,url:k,error:P,reason:P.message,response:r,context:l,level:R,parent:_,networkDetails:c,stats:o});return}t.playlistParsingError=null}if(!t.fragments.length){const D=t.playlistParsingError=new Error("No Segments found in Playlist");d.trigger(H.ERROR,{type:pt.NETWORK_ERROR,details:we.LEVEL_EMPTY_ERROR,fatal:!1,url:k,error:D,reason:D.message,response:r,context:l,level:R,parent:_,networkDetails:c,stats:o});return}switch(t.live&&h&&(h.getCacheAge&&(t.ageHeader=h.getCacheAge()||0),(!h.getCacheAge||isNaN(t.ageHeader))&&(t.ageHeader=0)),m){case sn.MANIFEST:case sn.LEVEL:if(R){if(!x)R=0;else if(x!==d.levels[R]){const D=d.levels.indexOf(x);D>-1&&(R=D)}}d.trigger(H.LEVEL_LOADED,{details:t,levelInfo:x||d.levels[0],level:R||0,id:T||0,stats:o,networkDetails:c,deliveryDirectives:A,withoutMultiVariant:m===sn.MANIFEST});break;case sn.AUDIO_TRACK:d.trigger(H.AUDIO_TRACK_LOADED,{details:t,track:x,id:T||0,groupId:E||"",stats:o,networkDetails:c,deliveryDirectives:A});break;case sn.SUBTITLE_TRACK:d.trigger(H.SUBTITLE_TRACK_LOADED,{details:t,track:x,id:T||0,groupId:E||"",stats:o,networkDetails:c,deliveryDirectives:A});break}}}class ma{static get version(){return Ov}static isMSESupported(){return HW()}static isSupported(){return NEe()}static getMediaSource(){return $c()}static get Events(){return H}static get MetadataSchema(){return ao}static get ErrorTypes(){return pt}static get ErrorDetails(){return we}static get DefaultConfig(){return ma.defaultConfig?ma.defaultConfig:wEe}static set DefaultConfig(t){ma.defaultConfig=t}constructor(t={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new ZP,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const r=this.logger=q1e(t.debug||!1,"Hls instance",t.assetPlayerId),o=this.config=bEe(ma.DefaultConfig,t,r);this.userConfig=t,o.progressive&&AEe(o,r);const{abrController:l,bufferController:c,capLevelController:h,errorController:d,fpsController:m}=o,v=new d(this),x=this.abrController=new l(this),T=new Bxe(this),E=o.interstitialsController,A=E?this.interstitialsController=new E(this,ma):null,k=this.bufferController=new c(this,T),_=this.capLevelController=new h(this),R=new m(this),P=new FEe(this),D=o.contentSteeringController,N=D?new D(this):null,$=this.levelController=new DEe(this,N),V=new LEe(this),W=new UEe(this.config,this.logger),C=this.streamController=new jEe(this,T,W),K=this.gapController=new _Ee(this,T);_.setStreamController(C),R.setStreamController(C);const ee=[P,$,C];A&&ee.splice(1,0,A),N&&ee.splice(1,0,N),this.networkControllers=ee;const Q=[x,k,K,_,R,V,T];this.audioTrackController=this.createController(o.audioTrackController,ee);const fe=o.audioStreamController;fe&&ee.push(this.audioStreamController=new fe(this,T,W)),this.subtitleTrackController=this.createController(o.subtitleTrackController,ee);const O=o.subtitleStreamController;O&&ee.push(this.subtititleStreamController=new O(this,T,W)),this.createController(o.timelineController,Q),W.emeController=this.emeController=this.createController(o.emeController,Q),this.cmcdController=this.createController(o.cmcdController,Q),this.latencyController=this.createController(PEe,Q),this.coreComponents=Q,ee.push(v);const re=v.onErrorOut;typeof re=="function"&&this.on(H.ERROR,re,v),this.on(H.MANIFEST_LOADED,P.onManifestLoaded,P)}createController(t,r){if(t){const o=new t(this);return r&&r.push(o),o}return null}on(t,r,o=this){this._emitter.on(t,r,o)}once(t,r,o=this){this._emitter.once(t,r,o)}removeAllListeners(t){this._emitter.removeAllListeners(t)}off(t,r,o=this,l){this._emitter.off(t,r,o,l)}listeners(t){return this._emitter.listeners(t)}emit(t,r,o){return this._emitter.emit(t,r,o)}trigger(t,r){if(this.config.debug)return this.emit(t,t,r);try{return this.emit(t,t,r)}catch(o){if(this.logger.error("An internal error happened while handling event "+t+'. Error message: "'+o.message+'". Here is a stacktrace:',o),!this.triggeringException){this.triggeringException=!0;const l=t===H.ERROR;this.trigger(H.ERROR,{type:pt.OTHER_ERROR,details:we.INTERNAL_EXCEPTION,fatal:l,event:t,error:o}),this.triggeringException=!1}}return!1}listenerCount(t){return this._emitter.listenerCount(t)}destroy(){this.logger.log("destroy"),this.trigger(H.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(r=>r.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(r=>r.destroy()),this.coreComponents.length=0;const t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null}attachMedia(t){if(!t||"media"in t&&!t.media){const c=new Error(`attachMedia failed: invalid argument (${t})`);this.trigger(H.ERROR,{type:pt.OTHER_ERROR,details:we.ATTACH_MEDIA_ERROR,fatal:!0,error:c});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const r="media"in t,o=r?t.media:t,l=r?t:{media:o};this._media=o,this.trigger(H.MEDIA_ATTACHING,l)}detachMedia(){this.logger.log("detachMedia"),this.trigger(H.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const t=this.bufferController.transferMedia();return this.trigger(H.MEDIA_DETACHING,{transferMedia:t}),t}loadSource(t){this.stopLoad();const r=this.media,o=this._url,l=this._url=VP.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${l}`),r&&o&&(o!==l||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(r)),this.trigger(H.MANIFEST_LOADING,{url:t})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(t=-1,r){this.logger.log(`startLoad(${t+(r?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let o=0;o<this.networkControllers.length&&(this.networkControllers[o].startLoad(t,r),!(!this.started||!this.networkControllers));o++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].stopLoad(),!(this.started||!this.networkControllers));t++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(t=>{t.resumeBuffering&&t.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(t=>{t.pauseBuffering&&t.pauseBuffering()}))}get inFlightFragments(){const t={[lt.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(t[lt.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(t[lt.SUBTITLE]=this.subtititleStreamController.inFlightFrag),t}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const t=this._media,r=t==null?void 0:t.currentTime;this.detachMedia(),t&&(this.attachMedia(t),r&&this.startLoad(r))}removeLevel(t){this.levelController.removeLevel(t)}get sessionId(){let t=this._sessionId;return t||(t=this._sessionId=_we()),t}get levels(){const t=this.levelController.levels;return t||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(t){this.logger.log(`set currentLevel:${t}`),this.levelController.manualLevel=t,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(t){this.logger.log(`set nextLevel:${t}`),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(t){this.logger.log(`set loadLevel:${t}`),this.levelController.manualLevel=t}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(t){this.levelController.nextLoadLevel=t}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(t){this.logger.log(`set firstLevel:${t}`),this.levelController.firstLevel=t}get startLevel(){const t=this.levelController.startLevel;return t===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:t}set startLevel(t){this.logger.log(`set startLevel:${t}`),t!==-1&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(t){const r=!!t;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimate():NaN}set bandwidthEstimate(t){this.abrController.resetEstimator(t)}get abrEwmaDefaultEstimate(){const{bwEstimator:t}=this.abrController;return t?t.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimateTTFB():NaN}set autoLevelCapping(t){this._autoLevelCapping!==t&&(this.logger.log(`set autoLevelCapping:${t}`),this._autoLevelCapping=t,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(t){bxe(t)&&this._maxHdcpLevel!==t&&(this._maxHdcpLevel=t,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:t,config:{minAutoBitrate:r}}=this;if(!t)return 0;const o=t.length;for(let l=0;l<o;l++)if(t[l].maxBitrate>=r)return l;return 0}get maxAutoLevel(){const{levels:t,autoLevelCapping:r,maxHdcpLevel:o}=this;let l;if(r===-1&&t!=null&&t.length?l=t.length-1:l=r,o)for(let c=l;c--;){const h=t[c].attrs["HDCP-LEVEL"];if(h&&h<=o)return c}return l}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(t){this.abrController.nextAutoLevel=t}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(t){var r;return((r=this.audioTrackController)==null?void 0:r.setAudioOption(t))||null}setSubtitleOption(t){var r;return((r=this.subtitleTrackController)==null?void 0:r.setSubtitleOption(t))||null}get allAudioTracks(){const t=this.audioTrackController;return t?t.allAudioTracks:[]}get audioTracks(){const t=this.audioTrackController;return t?t.audioTracks:[]}get audioTrack(){const t=this.audioTrackController;return t?t.audioTrack:-1}set audioTrack(t){const r=this.audioTrackController;r&&(r.audioTrack=t)}get allSubtitleTracks(){const t=this.subtitleTrackController;return t?t.allSubtitleTracks:[]}get subtitleTracks(){const t=this.subtitleTrackController;return t?t.subtitleTracks:[]}get subtitleTrack(){const t=this.subtitleTrackController;return t?t.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(t){const r=this.subtitleTrackController;r&&(r.subtitleTrack=t)}get subtitleDisplay(){const t=this.subtitleTrackController;return t?t.subtitleDisplay:!1}set subtitleDisplay(t){const r=this.subtitleTrackController;r&&(r.subtitleDisplay=t)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(t){this.config.lowLatencyMode=t}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(t){this.latencyController.targetLatency=t}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(t){this.levelController.pathwayPriority=t}get bufferedToEnd(){var t;return!!((t=this.bufferController)!=null&&t.bufferedToEnd)}get interstitialsManager(){var t;return((t=this.interstitialsController)==null?void 0:t.interstitialsManager)||null}getMediaDecodingInfo(t,r=this.allAudioTracks){const o=Rz(r);return kz(t,o,navigator.mediaCapabilities)}}ma.defaultConfig=void 0;var qW={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(i){(function(){var t=typeof window<"u"?window:Boe,r={};(function(l,c,h){var d,m=typeof Object.create=="function"?Object.create:function(e){function n(){}return n.prototype=e,new n},v=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,n,s){return e==Array.prototype||e==Object.prototype||(e[n]=s.value),e};function x(e){e=[typeof globalThis=="object"&&globalThis,e,typeof l=="object"&&l,typeof self=="object"&&self,typeof c=="object"&&c];for(var n=0;n<e.length;++n){var s=e[n];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")}var T=x(this),E="Int8 Uint8 Uint8Clamped Int16 Uint16 Int32 Uint32 Float32 Float64".split(" ");T.BigInt64Array&&(E.push("BigInt64"),E.push("BigUint64"));function A(e,n){if(n)for(var s=0;s<E.length;s++)_(E[s]+"Array.prototype."+e,n)}function k(e,n){n&&_(e,n)}function _(e,n){var s=T;e=e.split(".");for(var a=0;a<e.length-1;a++){var u=e[a];if(!(u in s))return;s=s[u]}e=e[e.length-1],a=s[e],n=n(a),n!=a&&n!=null&&v(s,e,{configurable:!0,writable:!0,value:n})}var R;if(typeof Object.setPrototypeOf=="function")R=Object.setPrototypeOf;else{var P;e:{var D={a:!0},N={};try{N.__proto__=D,P=N.a;break e}catch{}P=!1}R=P?function(e,n){if(e.__proto__=n,e.__proto__!==n)throw new TypeError(e+" is not extensible");return e}:null}var $=R;function V(e,n){if(e.prototype=m(n.prototype),e.prototype.constructor=e,$)$(e,n);else for(var s in n)if(s!="prototype")if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a)}else e[s]=n[s];e.Xn=n.prototype}function W(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}}function C(e){var n=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(n)return n.call(e);if(typeof e.length=="number")return{next:W(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function K(e){if(!(e instanceof Array)){e=C(e);for(var n,s=[];!(n=e.next()).done;)s.push(n.value);e=s}return e}function ee(){this.u=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.C=this.i=null}function Q(e){if(e.u)throw new TypeError("Generator is already running");e.u=!0}ee.prototype.A=function(e){this.h=e};function fe(e,n){e.i={$i:n,nj:!0},e.g=e.m||e.j}ee.prototype.return=function(e){this.i={return:e},this.g=this.j};function O(e,n,s){return e.g=s,{value:n}}ee.prototype.B=function(e){this.g=e};function re(e){e.g=0}function ce(e,n,s){e.m=n,s!=null&&(e.j=s)}function Ae(e,n){e.m=0,e.j=n||0}function se(e,n,s){e.g=n,e.m=s||0}function ue(e,n){return e.m=n||0,n=e.i.$i,e.i=null,n}function le(e){e.C=[e.i],e.m=0,e.j=0}function pe(e,n){var s=e.C.splice(0)[0];(s=e.i=e.i||s)?s.nj?e.g=e.m||e.j:s.B!=null&&e.j<s.B?(e.g=s.B,e.i=null):e.g=e.j:e.g=n}function be(e){this.g=new ee,this.h=e}function Ce(e,n){Q(e.g);var s=e.g.l;return s?ke(e,"return"in s?s.return:function(a){return{value:a,done:!0}},n,e.g.return):(e.g.return(n),Ue(e))}function ke(e,n,s,a){try{var u=n.call(e.g.l,s);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.u=!1,u;var f=u.value}catch(p){return e.g.l=null,fe(e.g,p),Ue(e)}return e.g.l=null,a.call(e.g,f),Ue(e)}function Ue(e){for(;e.g.g;)try{var n=e.h(e.g);if(n)return e.g.u=!1,{value:n.value,done:!1}}catch(s){e.g.h=void 0,fe(e.g,s)}if(e.g.u=!1,e.g.i){if(n=e.g.i,e.g.i=null,n.nj)throw n.$i;return{value:n.return,done:!0}}return{value:void 0,done:!0}}function qe(e){this.next=function(n){return Q(e.g),e.g.l?n=ke(e,e.g.l.next,n,e.g.A):(e.g.A(n),n=Ue(e)),n},this.throw=function(n){return Q(e.g),e.g.l?n=ke(e,e.g.l.throw,n,e.g.A):(fe(e.g,n),n=Ue(e)),n},this.return=function(n){return Ce(e,n)},this[Symbol.iterator]=function(){return this}}function ut(e){function n(a){return e.next(a)}function s(a){return e.throw(a)}return new Promise(function(a,u){function f(p){p.done?a(p.value):Promise.resolve(p.value).then(n,s).then(f,u)}f(e.next())})}function X(e){return ut(new qe(new be(e)))}function Pe(){for(var e=Number(this),n=[],s=e;s<arguments.length;s++)n[s-e]=arguments[s];return n}k("Symbol",function(e){function n(f){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return new s(a+(f||"")+"_"+u++,f)}function s(f,p){this.g=f,v(this,"description",{configurable:!0,writable:!0,value:p})}if(e)return e;s.prototype.toString=function(){return this.g};var a="jscomp_symbol_"+(Math.random()*1e9>>>0)+"_",u=0;return n}),k("Symbol.iterator",function(e){return e||(e=Symbol("Symbol.iterator"),v(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return Rt(W(this))}}),e)});function Rt(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}k("Promise",function(e){function n(p){this.h=0,this.i=void 0,this.g=[],this.u=!1;var g=this.j();try{p(g.resolve,g.reject)}catch(y){g.reject(y)}}function s(){this.g=null}function a(p){return p instanceof n?p:new n(function(g){g(p)})}if(e)return e;s.prototype.h=function(p){if(this.g==null){this.g=[];var g=this;this.i(function(){g.l()})}this.g.push(p)};var u=T.setTimeout;s.prototype.i=function(p){u(p,0)},s.prototype.l=function(){for(;this.g&&this.g.length;){var p=this.g;this.g=[];for(var g=0;g<p.length;++g){var y=p[g];p[g]=null;try{y()}catch(w){this.j(w)}}}this.g=null},s.prototype.j=function(p){this.i(function(){throw p})},n.prototype.j=function(){function p(w){return function(b){y||(y=!0,w.call(g,b))}}var g=this,y=!1;return{resolve:p(this.G),reject:p(this.l)}},n.prototype.G=function(p){if(p===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(p instanceof n)this.I(p);else{e:switch(typeof p){case"object":var g=p!=null;break e;case"function":g=!0;break e;default:g=!1}g?this.F(p):this.m(p)}},n.prototype.F=function(p){var g=void 0;try{g=p.then}catch(y){this.l(y);return}typeof g=="function"?this.J(g,p):this.m(p)},n.prototype.l=function(p){this.A(2,p)},n.prototype.m=function(p){this.A(1,p)},n.prototype.A=function(p,g){if(this.h!=0)throw Error("Cannot settle("+p+", "+g+"): Promise already settled in state"+this.h);this.h=p,this.i=g,this.h===2&&this.H(),this.C()},n.prototype.H=function(){var p=this;u(function(){if(p.D()){var g=T.console;typeof g<"u"&&g.error(p.i)}},1)},n.prototype.D=function(){if(this.u)return!1;var p=T.CustomEvent,g=T.Event,y=T.dispatchEvent;return typeof y>"u"?!0:(typeof p=="function"?p=new p("unhandledrejection",{cancelable:!0}):typeof g=="function"?p=new g("unhandledrejection",{cancelable:!0}):(p=T.document.createEvent("CustomEvent"),p.initCustomEvent("unhandledrejection",!1,!0,p)),p.promise=this,p.reason=this.i,y(p))},n.prototype.C=function(){if(this.g!=null){for(var p=0;p<this.g.length;++p)f.h(this.g[p]);this.g=null}};var f=new s;return n.prototype.I=function(p){var g=this.j();p.pf(g.resolve,g.reject)},n.prototype.J=function(p,g){var y=this.j();try{p.call(g,y.resolve,y.reject)}catch(w){y.reject(w)}},n.prototype.then=function(p,g){function y(L,j){return typeof L=="function"?function(U){try{w(L(U))}catch(F){b(F)}}:j}var w,b,I=new n(function(L,j){w=L,b=j});return this.pf(y(p,w),y(g,b)),I},n.prototype.catch=function(p){return this.then(void 0,p)},n.prototype.pf=function(p,g){function y(){switch(w.h){case 1:p(w.i);break;case 2:g(w.i);break;default:throw Error("Unexpected state: "+w.h)}}var w=this;this.g==null?f.h(y):this.g.push(y),this.u=!0},n.resolve=a,n.reject=function(p){return new n(function(g,y){y(p)})},n.race=function(p){return new n(function(g,y){for(var w=C(p),b=w.next();!b.done;b=w.next())a(b.value).pf(g,y)})},n.all=function(p){var g=C(p),y=g.next();return y.done?a([]):new n(function(w,b){function I(U){return function(F){L[U]=F,j--,j==0&&w(L)}}var L=[],j=0;do L.push(void 0),j++,a(y.value).pf(I(L.length-1),b),y=g.next();while(!y.done)})},n});function Mt(e,n){return Object.prototype.hasOwnProperty.call(e,n)}k("WeakMap",function(e){function n(y){if(this.g=(g+=Math.random()+1).toString(),y){y=C(y);for(var w;!(w=y.next()).done;)w=w.value,this.set(w[0],w[1])}}function s(){}function a(y){var w=typeof y;return w==="object"&&y!==null||w==="function"}function u(y){if(!Mt(y,p)){var w=new s;v(y,p,{value:w})}}function f(y){var w=Object[y];w&&(Object[y]=function(b){return b instanceof s?b:(Object.isExtensible(b)&&u(b),w(b))})}if(function(){if(!e||!Object.seal)return!1;try{var y=Object.seal({}),w=Object.seal({}),b=new e([[y,2],[w,3]]);return b.get(y)!=2||b.get(w)!=3?!1:(b.delete(y),b.set(w,4),!b.has(y)&&b.get(w)==4)}catch{return!1}}())return e;var p="$jscomp_hidden_"+Math.random();f("freeze"),f("preventExtensions"),f("seal");var g=0;return n.prototype.set=function(y,w){if(!a(y))throw Error("Invalid WeakMap key");if(u(y),!Mt(y,p))throw Error("WeakMap key fail: "+y);return y[p][this.g]=w,this},n.prototype.get=function(y){return a(y)&&Mt(y,p)?y[p][this.g]:void 0},n.prototype.has=function(y){return a(y)&&Mt(y,p)&&Mt(y[p],this.g)},n.prototype.delete=function(y){return a(y)&&Mt(y,p)&&Mt(y[p],this.g)?delete y[p][this.g]:!1},n}),k("Map",function(e){function n(){var g={};return g.Ic=g.next=g.head=g}function s(g,y){var w=g[1];return Rt(function(){if(w){for(;w.head!=g[1];)w=w.Ic;for(;w.next!=w.head;)return w=w.next,{done:!1,value:y(w)};w=null}return{done:!0,value:void 0}})}function a(g,y){var w=y&&typeof y;w=="object"||w=="function"?f.has(y)?w=f.get(y):(w=""+ ++p,f.set(y,w)):w="p_"+y;var b=g[0][w];if(b&&Mt(g[0],w))for(g=0;g<b.length;g++){var I=b[g];if(y!==y&&I.key!==I.key||y===I.key)return{id:w,list:b,index:g,entry:I}}return{id:w,list:b,index:-1,entry:void 0}}function u(g){if(this[0]={},this[1]=n(),this.size=0,g){g=C(g);for(var y;!(y=g.next()).done;)y=y.value,this.set(y[0],y[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var g=Object.seal({x:4}),y=new e(C([[g,"s"]]));if(y.get(g)!="s"||y.size!=1||y.get({x:4})||y.set({x:4},"t")!=y||y.size!=2)return!1;var w=y.entries(),b=w.next();return b.done||b.value[0]!=g||b.value[1]!="s"?!1:(b=w.next(),!(b.done||b.value[0].x!=4||b.value[1]!="t"||!w.next().done))}catch{return!1}}())return e;var f=new WeakMap;u.prototype.set=function(g,y){g=g===0?0:g;var w=a(this,g);return w.list||(w.list=this[0][w.id]=[]),w.entry?w.entry.value=y:(w.entry={next:this[1],Ic:this[1].Ic,head:this[1],key:g,value:y},w.list.push(w.entry),this[1].Ic.next=w.entry,this[1].Ic=w.entry,this.size++),this},u.prototype.delete=function(g){return g=a(this,g),g.entry&&g.list?(g.list.splice(g.index,1),g.list.length||delete this[0][g.id],g.entry.Ic.next=g.entry.next,g.entry.next.Ic=g.entry.Ic,g.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this[0]={},this[1]=this[1].Ic=n(),this.size=0},u.prototype.has=function(g){return!!a(this,g).entry},u.prototype.get=function(g){return(g=a(this,g).entry)&&g.value},u.prototype.entries=function(){return s(this,function(g){return[g.key,g.value]})},u.prototype.keys=function(){return s(this,function(g){return g.key})},u.prototype.values=function(){return s(this,function(g){return g.value})},u.prototype.forEach=function(g,y){for(var w=this.entries(),b;!(b=w.next()).done;)b=b.value,g.call(y,b[1],b[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var p=0;return u});function $t(e,n){e instanceof String&&(e+="");var s=0,a=!1,u={next:function(){if(!a&&s<e.length){var f=s++;return{value:n(f,e[f]),done:!1}}return a=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}k("Array.prototype.keys",function(e){return e||function(){return $t(this,function(n){return n})}}),k("Set",function(e){function n(s){if(this.g=new Map,s){s=C(s);for(var a;!(a=s.next()).done;)this.add(a.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var s=Object.seal({x:4}),a=new e(C([s]));if(!a.has(s)||a.size!=1||a.add(s)!=a||a.size!=1||a.add({x:4})!=a||a.size!=2)return!1;var u=a.entries(),f=u.next();return f.done||f.value[0]!=s||f.value[1]!=s?!1:(f=u.next(),f.done||f.value[0]==s||f.value[0].x!=4||f.value[1]!=f.value[0]?!1:u.next().done)}catch{return!1}}()?e:(n.prototype.add=function(s){return s=s===0?0:s,this.g.set(s,s),this.size=this.g.size,this},n.prototype.delete=function(s){return s=this.g.delete(s),this.size=this.g.size,s},n.prototype.clear=function(){this.g.clear(),this.size=0},n.prototype.has=function(s){return this.g.has(s)},n.prototype.entries=function(){return this.g.entries()},n.prototype.values=function(){return this.g.values()},n.prototype.keys=n.prototype.values,n.prototype[Symbol.iterator]=n.prototype.values,n.prototype.forEach=function(s,a){var u=this;this.g.forEach(function(f){return s.call(a,f,f,u)})},n)}),k("Array.prototype.values",function(e){return e||function(){return $t(this,function(n,s){return s})}}),k("Array.from",function(e){return e||function(n,s,a){s=s??function(g){return g};var u=[],f=typeof Symbol<"u"&&Symbol.iterator&&n[Symbol.iterator];if(typeof f=="function"){n=f.call(n);for(var p=0;!(f=n.next()).done;)u.push(s.call(a,f.value,p++))}else for(f=n.length,p=0;p<f;p++)u.push(s.call(a,n[p],p));return u}});function Ot(e,n,s){if(e==null)throw new TypeError("The 'this' value for String.prototype."+s+" must not be null or undefined");if(n instanceof RegExp)throw new TypeError("First argument to String.prototype."+s+" must not be a regular expression");return e+""}k("String.prototype.startsWith",function(e){return e||function(n,s){var a=Ot(this,n,"startsWith"),u=a.length,f=n.length;s=Math.max(0,Math.min(s|0,a.length));for(var p=0;p<f&&s<u;)if(a[s++]!=n[p++])return!1;return p>=f}}),k("Object.is",function(e){return e||function(n,s){return n===s?n!==0||1/n===1/s:n!==n&&s!==s}}),k("Array.prototype.includes",function(e){return e||function(n,s){var a=this;a instanceof String&&(a=String(a));var u=a.length;for(s=s||0,s<0&&(s=Math.max(s+u,0));s<u;s++){var f=a[s];if(f===n||Object.is(f,n))return!0}return!1}}),k("String.prototype.includes",function(e){return e||function(n,s){return Ot(this,n,"includes").indexOf(n,s||0)!==-1}}),k("String.fromCodePoint",function(e){return e||function(n){for(var s="",a=0;a<arguments.length;a++){var u=Number(arguments[a]);if(u<0||u>1114111||u!==Math.floor(u))throw new RangeError("invalid_code_point "+u);u<=65535?s+=String.fromCharCode(u):(u-=65536,s+=String.fromCharCode(u>>>10&1023|55296),s+=String.fromCharCode(u&1023|56320))}return s}});function on(e,n,s){e instanceof String&&(e=String(e));for(var a=e.length,u=0;u<a;u++){var f=e[u];if(n.call(s,f,u,e))return{jj:u,v:f}}return{jj:-1,v:void 0}}k("Array.prototype.findIndex",function(e){return e||function(n,s){return on(this,n,s).jj}}),k("WeakSet",function(e){function n(s){if(this.g=new WeakMap,s){s=C(s);for(var a;!(a=s.next()).done;)this.add(a.value)}}return function(){if(!e||!Object.seal)return!1;try{var s=Object.seal({}),a=Object.seal({}),u=new e([s]);return!u.has(s)||u.has(a)?!1:(u.delete(s),u.add(a),!u.has(s)&&u.has(a))}catch{return!1}}()?e:(n.prototype.add=function(s){return this.g.set(s,!0),this},n.prototype.has=function(s){return this.g.has(s)},n.prototype.delete=function(s){return this.g.delete(s)},n)}),k("Array.prototype.find",function(e){return e||function(n,s){return on(this,n,s).v}}),k("Object.entries",function(e){return e||function(n){var s=[],a;for(a in n)Mt(n,a)&&s.push([a,n[a]]);return s}});var gr=typeof Object.assign=="function"?Object.assign:function(e,n){if(e==null)throw new TypeError("No nullish arg");e=Object(e);for(var s=1;s<arguments.length;s++){var a=arguments[s];if(a)for(var u in a)Mt(a,u)&&(e[u]=a[u])}return e};k("Object.assign",function(e){return e||gr}),k("Promise.prototype.finally",function(e){return e||function(n){return this.then(function(s){return Promise.resolve(n()).then(function(){return s})},function(s){return Promise.resolve(n()).then(function(){throw s})})}}),k("Array.prototype.entries",function(e){return e||function(){return $t(this,function(n,s){return[n,s]})}}),k("Number.isNaN",function(e){return e||function(n){return typeof n=="number"&&isNaN(n)}}),k("String.prototype.repeat",function(e){return e||function(n){var s=Ot(this,null,"repeat");if(n<0||n>1342177279)throw new RangeError("Invalid count value");n|=0;for(var a="";n;)n&1&&(a+=s),(n>>>=1)&&(s+=s);return a}}),k("Number.EPSILON",function(){return 2220446049250313e-31}),k("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),k("Number.isFinite",function(e){return e||function(n){return typeof n!="number"?!1:!isNaN(n)&&n!==1/0&&n!==-1/0}}),k("Object.values",function(e){return e||function(n){var s=[],a;for(a in n)Mt(n,a)&&s.push(n[a]);return s}}),k("Math.log2",function(e){return e||function(n){return Math.log(n)/Math.LN2}}),k("String.prototype.endsWith",function(e){return e||function(n,s){var a=Ot(this,n,"endsWith");s===void 0&&(s=a.length),s=Math.max(0,Math.min(s|0,a.length));for(var u=n.length;u>0&&s>0;)if(a[--s]!=n[--u])return!1;return u<=0}}),k("Math.trunc",function(e){return e||function(n){if(n=Number(n),isNaN(n)||n===1/0||n===-1/0||n===0)return n;var s=Math.floor(Math.abs(n));return n<0?-s:s}});function Mr(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]}k("Array.prototype.at",function(e){return e||Mr}),A("at",function(e){return e||Mr}),k("String.prototype.at",function(e){return e||Mr});var wa=this||self;function xe(e,n){e=e.split(".");var s=wa;e[0]in s||typeof s.execScript>"u"||s.execScript("var "+e[0]);for(var a;e.length&&(a=e.shift());)e.length||n===void 0?s[a]&&s[a]!==Object.prototype[a]?s=s[a]:s=s[a]={}:s[a]=n}function _e(e,n){if(n)if(n instanceof Map)for(var s=C(n.keys()),a=s.next();!a.done;a=s.next())a=a.value,Object.defineProperty(this,a,{value:n.get(a),writable:!0,enumerable:!0});else for(s in n)Object.defineProperty(this,s,{value:n[s],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=l.performance&&l.performance.now?l.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function _r(e){var n=new _e(e.type),s;for(s in e)Object.defineProperty(n,s,{value:e[s],writable:!0,enumerable:!0});return n}_e.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},_e.prototype.stopImmediatePropagation=function(){this.g=!0},_e.prototype.stopPropagation=function(){},xe("shaka.util.FakeEvent",_e);var qr={Km:"abrstatuschanged",Lm:"adaptation",Mm:"audiotrackchanged",Nm:"audiotrackschanged",Om:"boundarycrossed",Pm:"buffering",Qm:"canupdatestarttime",Rm:"complete",Sm:"currentitemchanged",Tm:"downloadcompleted",Um:"downloadfailed",Vm:"downloadheadersreceived",Wm:"drmsessionupdate",Xm:"emsg",dn:"itemsinserted",fn:"itemsremoved",xn:"prft",Error:"error",Ym:"expirationupdated",Zm:"firstquartile",$m:"gapjumped",gn:"keystatuschanged",ln:"loaded",mn:"loading",on:"manifestparsed",pn:"manifestupdated",qn:"mediaqualitychanged",rn:"mediasourcerecovered",tn:"metadataadded",Metadata:"metadata",un:"midpoint",vn:"nospatialvideoinfo",wn:"onstatechange",yn:"ratechange",Bn:"segmentappended",Cn:"sessiondata",Dn:"spatialvideoinfo",En:"stalldetected",Fn:"started",Gn:"statechanged",Hn:"streaming",In:"textchanged",Jn:"texttrackvisibility",Kn:"thirdquartile",Ln:"timelineregionadded",Mn:"timelineregionenter",Nn:"timelineregionexit",On:"trackschanged",Qn:"unloading",Sn:"variantchanged"};function Oi(){}function nr(){}function $e(){}function Kr(e){var n=Pe.apply(1,arguments);xo.has(e)||(xo.add(e),$e.apply(Oi,K(n)))}function Tu(){}function _m(){}function zr(){}var xo=new Set;l.console&&(new Map().set(1,function(){return console.error.apply(console,K(Pe.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,K(Pe.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,K(Pe.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,K(Pe.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,K(Pe.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,K(Pe.apply(0,arguments)))}),$e=function(){return console.warn.apply(console,K(Pe.apply(0,arguments)))},nr=function(){console.error.apply(console,K(Pe.apply(0,arguments)))});function Su(){this.g=new Map}d=Su.prototype,d.push=function(e,n){this.g.has(e)?this.g.get(e).push(n):this.g.set(e,[n])},d.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},d.remove=function(e,n){if(this.g.has(e)){var s=this.g.get(e).filter(function(a){return a!=n});this.g.set(e,s),s.length||this.g.delete(e)}},d.forEach=function(e){this.g.forEach(function(n,s){e(s,n)})},d.size=function(){return this.g.size},d.keys=function(){return Array.from(this.g.keys())};function Tt(){this.hb=new Su,this.cf=this}Tt.prototype.addEventListener=function(e,n){this.hb&&this.hb.push(e,n)},Tt.prototype.removeEventListener=function(e,n){this.hb&&this.hb.remove(e,n)},Tt.prototype.dispatchEvent=function(e){if(!this.hb)return!0;var n=this.hb.get(e.type)||[],s=this.hb.get("All");for(s&&(n=n.concat(s)),n=C(n),s=n.next();!s.done;s=n.next()){s=s.value,e.target=this.cf,e.currentTarget=this.cf;try{s.handleEvent?s.handleEvent(e):s.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Tt.prototype.release=function(){this.hb=null};function Ho(e,n){var s=[];e=C(e);for(var a=e.next();!a.done;a=e.next())s.push(n(a.value));return s}function dl(e,n){e=C(e);for(var s=e.next();!s.done;s=e.next())if(!n(s.value))return!1;return!0}function Rm(e,n){e=C(e);for(var s=e.next();!s.done;s=e.next())if(n(s.value))return!0;return!1}function Ea(e,n){var s=[];e=C(e);for(var a=e.next();!a.done;a=e.next())a=a.value,n(a)&&s.push(a);return s}var wu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Cn(e){var n;e instanceof Cn?(qo(this,e.qc),this.yd=e.yd,Nh(this,e.Ib),Lm(this,e.Ud),this.Tb=e.Tb,ba(this,e.g.clone()),this.gd=e.gd):e&&(n=String(e).match(wu))?(qo(this,n[1]||"",!0),this.yd=hl(n[2]||""),Nh(this,n[3]||"",!0),Lm(this,n[4]),this.Tb=hl(n[5]||"",!0),ba(this,n[6]||"",!0),this.gd=hl(n[7]||"")):this.g=new li(null)}d=Cn.prototype,d.qc="",d.yd="",d.Ib="",d.Ud=null,d.Tb="",d.gd="",d.toString=function(){var e=[],n=this.qc;if(n&&e.push(ed(n,Ko,!0),":"),n=this.Ib){e.push("//");var s=this.yd;s&&e.push(ed(s,Ko,!0),"@"),e.push(encodeURIComponent(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.Ud,n!=null&&e.push(":",String(n))}return(n=this.Tb)&&(this.Ib&&n.charAt(0)!="/"&&e.push("/"),e.push(ed(n,n.charAt(0)=="/"?Gt:WE,!0))),(n=this.g.toString())&&e.push("?",n),(n=this.gd)&&e.push("#",ed(n,Fn)),e.join("")},d.resolve=function(e){var n=this.clone();n.qc==="data"&&(n=new Cn);var s=!!e.qc;s?qo(n,e.qc):s=!!e.yd,s?n.yd=e.yd:s=!!e.Ib,s?Nh(n,e.Ib):s=e.Ud!=null;var a=e.Tb;if(s)Lm(n,e.Ud);else if(s=!!e.Tb){if(a.charAt(0)!="/")if(this.Ib&&!this.Tb)a="/"+a;else{var u=n.Tb.lastIndexOf("/");u!=-1&&(a=n.Tb.substr(0,u+1)+a)}if(a==".."||a==".")a="";else if(a.indexOf("./")!=-1||a.indexOf("/.")!=-1){u=a.lastIndexOf("/",0)==0,a=a.split("/");for(var f=[],p=0;p<a.length;){var g=a[p++];g=="."?u&&p==a.length&&f.push(""):g==".."?((f.length>1||f.length==1&&f[0]!="")&&f.pop(),u&&p==a.length&&f.push("")):(f.push(g),u=!0)}a=f.join("/")}}return s?n.Tb=a:s=e.g.toString()!=="",s?ba(n,e.g.clone()):s=!!e.gd,s&&(n.gd=e.gd),n},d.clone=function(){return new Cn(this)};function qo(e,n,s){e.qc=s?hl(n,!0):n,e.qc&&(e.qc=e.qc.replace(/:$/,""))}function Nh(e,n,s){e.Ib=s?hl(n,!0):n}function Lm(e,n){if(n){if(n=Number(n),isNaN(n)||n<0)throw Error("Bad port number "+n);e.Ud=n}else e.Ud=null}function ba(e,n,s){n instanceof li?e.g=n:(s||(n=ed(n,bn)),e.g=new li(n))}function hl(e,n){return e?n?decodeURI(e):decodeURIComponent(e):""}function ed(e,n,s){return e!=null?(e=encodeURI(e).replace(n,Pm),s&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Pm(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Ko=/[#\/\?@]/g,WE=/[#\?:]/g,Gt=/[#\?]/g,bn=/[#\?@]/g,Fn=/#/g;function li(e){this.g=e||null}function ji(e){if(!e.ob&&(e.ob=new Map,e.pe=0,e.g))for(var n=e.g.split("&"),s=0;s<n.length;s++){var a=n[s].indexOf("="),u=null;if(a>=0){var f=n[s].substring(0,a);u=n[s].substring(a+1)}else f=n[s];f=decodeURIComponent(f),u=u||"",e.add(f,decodeURIComponent(u))}}d=li.prototype,d.ob=null,d.pe=null;function zo(e){return ji(e),e.pe}d.add=function(e,n){ji(this),this.g=null;var s=this.ob.has(e)?this.ob.get(e):null;return s||this.ob.set(e,s=[]),s.push(n),this.pe++,this},d.set=function(e,n){return ji(this),this.g=null,this.ob.has(e)?this.ob.set(e,[n]):this.add(e,n),this},d.get=function(e){return ji(this),this.ob.get(e)||[]},d.toString=function(){if(this.g)return this.g;if(!this.ob||!this.ob.size)return"";for(var e=[],n=C(this.ob.keys()),s=n.next();!s.done;s=n.next()){var a=s.value;s=encodeURIComponent(a),a=this.ob.get(a);for(var u=0;u<a.length;u++){var f=s;a[u]!==""&&(f+="="+encodeURIComponent(a[u])),e.push(f)}}return this.g=e.join("&")},d.clone=function(){var e=new li;if(e.g=this.g,this.ob){for(var n=new Map,s=C(this.ob),a=s.next();!a.done;a=s.next()){var u=C(a.value);a=u.next().value,u=u.next().value,n.set(a,u.concat())}e.ob=n,e.pe=this.pe}return e};function vs(){}function Rr(e,n){if(!e&&!n)return!0;if(!e||!n||e.byteLength!=n.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(n)?n.buffer:n)&&(e.byteOffset||0)==(n.byteOffset||0))return!0;var s=nt(e);n=nt(n);for(var a=0;a<e.byteLength;a++)if(s[a]!=n[a])return!1;return!0}function vr(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function nt(e,n,s){return s=s===void 0?1/0:s,YE(e,n===void 0?0:n,s,Uint8Array)}function SD(e,n,s){return s=s===void 0?1/0:s,YE(e,n===void 0?0:n,s,Uint16Array)}function Ui(e,n,s){return s=s===void 0?1/0:s,YE(e,n===void 0?0:n,s,DataView)}function YE(e,n,s,a){var u=ArrayBuffer.isView(e)?e.buffer:e,f=1;"BYTES_PER_ELEMENT"in a&&(f=a.BYTES_PER_ELEMENT);var p=((e.byteOffset||0)+e.byteLength)/f;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+n)/f,p))),new a(u,e,Math.floor(Math.min(e+Math.max(s,0),p))-e)}xe("shaka.util.BufferUtils",vs),vs.toDataView=Ui,vs.toUint16=SD,vs.toUint8=nt,vs.toArrayBuffer=vr,vs.equal=Rr;function gn(e){this.h=e,this.g=void 0}gn.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};function wD(e,n){if(e===n||!e.length||!n.length)return!0;e=C(e);for(var s=e.next();!s.done;s=e.next()){if(s=s.value,gy(s))return!0;for(var a=C(n),u=a.next();!u.done;u=a.next())if(u=u.value,s.keySystem===u.keySystem||gy(u))return!0}return!1}function ED(e,n){if(!e.length)return n;if(!n.length)return e;var s=[];e=C(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;for(var u=C(n),f=u.next();!f.done;f=u.next())if(f=f.value,a.keySystem==f.keySystem){u=new Map;for(var p=C((a.initData||[]).concat(f.initData||[])),g=p.next();!g.done;g=p.next())g=g.value,u.set(g.keyId,g);u=Array.from(u.values()),p=a.keyIds&&f.keyIds?new Set([].concat(K(a.keyIds),K(f.keyIds))):a.keyIds||f.keyIds,s.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||f.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||f.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||f.persistentStateRequired,videoRobustness:a.videoRobustness||f.videoRobustness,audioRobustness:a.audioRobustness||f.audioRobustness,serverCertificate:a.serverCertificate||f.serverCertificate,serverCertificateUri:a.serverCertificateUri||f.serverCertificateUri,initData:u,keyIds:p});break}else gy(a)?s.push(a):gy(f)&&s.push(f)}return s}function XE(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Dm(e){return e?!!e.match(/^com\.apple\.fps/):!1}function gy(e){return(e=e.licenseServerUri)?e.startsWith("data:application/json;base64,"):!1}function QE(e,n,s,a){return a=[].concat(K(new Set(a))).sort().join("#"),e+"#"+n+"#"+s+"#"+a}var vy=new gn(function(){return vr(new Uint8Array([0]))}),Mh=new Map;function oe(e,n,s){var a=Pe.apply(3,arguments);this.severity=e,this.category=n,this.code=s,this.data=a,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}oe.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},xe("shaka.util.Error",oe),oe.Severity={RECOVERABLE:1,CRITICAL:2},oe.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},oe.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4055,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};/*
 @license
 Shaka Player
 Copyright 2025 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function ht(){return HX.value()}var Wo=null,JE=null,HX=new gn(function(){var e=void 0;return Wo&&(e=Wo()),!e&&JE&&(e=JE()),e});function td(){}function yn(e){if(!e)return"";if(e=nt(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),l.TextDecoder&&!ht().oi())return e=new TextDecoder().decode(e),e.includes("")&&nr('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var n="",s=0;s<e.length;++s){var a=65533;if(e[s]&128?e.length>=s+2&&(e[s]&224)==192&&(e[s+1]&192)==128?(a=(e[s]&31)<<6|e[s+1]&63,s+=1):e.length>=s+3&&(e[s]&240)==224&&(e[s+1]&192)==128&&(e[s+2]&192)==128?(a=(e[s]&15)<<12|(e[s+1]&63)<<6|e[s+2]&63,s+=2):e.length>=s+4&&(e[s]&241)==240&&(e[s+1]&192)==128&&(e[s+2]&192)==128&&(e[s+3]&192)==128&&(a=(e[s]&7)<<18|(e[s+1]&63)<<12|(e[s+2]&63)<<6|e[s+3]&63,s+=3):a=e[s],a<=65535)n+=String.fromCharCode(a);else{a-=65536;var u=a&1023;n+=String.fromCharCode(55296+(a>>10)),n+=String.fromCharCode(56320+u)}}return n}function Eu(e,n,s){if(!e)return"";if(!s&&e.byteLength%2!=0)throw new oe(2,2,2004);s=Math.floor(e.byteLength/2);var a=new Uint16Array(s);e=Ui(e);for(var u=0;u<s;u++)a[u]=e.getUint16(u*2,n);return yy.value()(a)}function Aa(e){function n(a){return s.byteLength<=a||s[a]>=9&&s[a]<=126}if(!e)return"";var s=nt(e);if(s[0]==239&&s[1]==187&&s[2]==191)return yn(s);if(s[0]==254&&s[1]==255)return Eu(s.subarray(2),!1);if(s[0]==255&&s[1]==254)return Eu(s.subarray(2),!0);if(s[0]==0&&s[2]==0)return Eu(e,!1);if(s[1]==0&&s[3]==0)return Eu(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return yn(e);throw new oe(2,2,2003)}function To(e){if(l.TextEncoder&&!ht().oi()){var n=new TextEncoder;return vr(n.encode(e))}e=encodeURIComponent(e),e=unescape(e),n=new Uint8Array(e.length);for(var s=0;s<e.length;s++)n[s]=e[s].charCodeAt(0);return vr(n)}function ZE(e,n){for(var s=new ArrayBuffer(e.length*2),a=new DataView(s),u=0;u<e.length;++u)a.setUint16(u*2,e.charCodeAt(u),n);return s}function yi(e){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},s=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,a=RegExp(s.source);return e&&a.test(e)?e.replace(s,function(u){return u[1]=="#"?(u=u[2]=="x"||u[2]=="X"?parseInt(u.substring(3),16):parseInt(u.substring(2),10),u>=0&&u<=1114111?String.fromCodePoint(u):""):n[u]||"'"}):e||""}xe("shaka.util.StringUtils",td),td.resetFromCharCode=function(){yy.g=void 0},td.toUTF16=ZE,td.toUTF8=To,td.fromBytesAutoDetect=Aa,td.fromUTF16=Eu,td.fromUTF8=yn;var yy=new gn(function(){function e(s){try{var a=new Uint8Array(s);return String.fromCharCode.apply(null,a).length>0}catch{return!1}}for(var n={cd:65536};n.cd>0;n={cd:n.cd},n.cd/=2)if(e(n.cd))return function(s){return function(a){for(var u="",f=0;f<a.length;f+=s.cd)u+=String.fromCharCode.apply(null,a.subarray(f,f+s.cd));return u}}(n);return null});function Wr(){}function xy(e){return e=nt(e),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64",omitPadding:!1}):(e=yy.value()(e),btoa(e))}function fl(e,n){return n=n??!0,Uint8Array.prototype.toBase64?nt(e).toBase64({alphabet:"base64url",omitPadding:!n}):(e=xy(e).replace(/\+/g,"-").replace(/\//g,"_"),n?e:e.replace(/[=]*$/,""))}function Bs(e){if(!("fromBase64"in Uint8Array)){e=l.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(e.length),s=0;s<e.length;++s)n[s]=e.charCodeAt(s);return n}return e=e.replace(/\s+/g,""),Uint8Array.fromBase64(e,{alphabet:/[-_]/.test(e)?"base64url":"base64"})}function nd(e){if(!("fromHex"in Uint8Array)){for(var n=e.length/2,s=new Uint8Array(n),a=0;a<n;a++)s[a]=l.parseInt(e.substr(a*2,2),16);return s}return Uint8Array.fromHex(e)}function pl(e){var n=nt(e);if(!Uint8Array.prototype.toHex){e="",n=C(n);for(var s=n.next();!s.done;s=n.next())s=s.value,s=s.toString(16),s.length==1&&(s="0"+s),e+=s;return e}return n.toHex()}function Hn(){for(var e=Pe.apply(0,arguments),n=0,s=0;s<e.length;++s)n+=e[s].byteLength;n=new Uint8Array(n);for(var a=s=0;a<e.length;++a){var u=e[a];ArrayBuffer.isView(u)&&u.BYTES_PER_ELEMENT===1?n.set(u,s):n.set(nt(u),s),s+=u.byteLength}return n}xe("shaka.util.Uint8ArrayUtils",Wr),Wr.concat=Hn,Wr.toHex=pl,Wr.fromHex=nd,Wr.fromBase64=Bs,Wr.toBase64=fl,Wr.toStandardBase64=xy;function yr(e,n,s){if(s=s===void 0?"":s,n.length==0)return e;if(e.length==1&&n.length==1){var a=new Cn(e[0]);return n=new Cn(n[0]),n=a.resolve(n),s&&ba(n,s),[n.toString()]}n=n.map(function(g){return new Cn(g)}),a=[],e=C(e);for(var u=e.next();!u.done;u=e.next()){u=new Cn(u.value);for(var f=C(n),p=f.next();!p.done;p=f.next())p=u.resolve(p.value),s&&ba(p,s),a.push(p.toString())}return a}function ml(e,n,s,a,u){return n={keySystem:e,encryptionScheme:n,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:s||[],keyIds:new Set,mediaTypes:u},a&&(n.keySystemUris=new Set([a])),!s&&Dm(e)&&n.initData.push({initDataType:"sinf",initData:new Uint8Array(0),keyId:null}),n}function bD(e,n){n=n===void 0?"cenc":n;var s=[],a=[],u=[];e.forEach(function(p,g){var y=g;y.length!=22&&(y=fl(nd(g),!1));var w=p;w.length!=22&&(w=fl(nd(p),!1)),p={kty:"oct",kid:y,k:w},s.push(p),a.push(p.kid),u.push(g)}),e=JSON.stringify({keys:s});var f=JSON.stringify({kids:a});return f=[{initData:nt(To(f)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:n,licenseServerUri:"data:application/json;base64,"+l.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:f,keyIds:new Set(u)}}function Oh(e,n){if(n.length==1)return n[0];if(e=Fi(e,n),e!=null)return e;throw new oe(2,4,4025,n)}function Fi(e,n){var s=ID.get(e);s=C(s);for(var a=s.next();!a.done;a=s.next()){a=a.value;for(var u=C(n),f=u.next();!f.done;f=u.next())if(f=f.value,a.test(f.trim()))return f.trim()}return e==mt?"":null}function eb(e,n){var s=[];e=ID.get(e),e=C(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;for(var u=C(n),f=u.next();!f.done;f=u.next())f=f.value,a.test(f.trim())&&s.push(f.trim())}return s}var mt="text",qn={Ga:"video",ia:"audio",Va:mt,Dg:"image",Im:"application"},AD=1/15,ID=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function So(){}function jh(e,n){return e=Ht(e),n=Ht(n),e.split("-")[0]==n.split("-")[0]}function Nm(e,n){return e=Ht(e),n=Ht(n),e=e.split("-"),n=n.split("-"),e[0]==n[0]&&e.length==1&&n.length==2}function tb(e,n){return e=Ht(e),n=Ht(n),e=e.split("-"),n=n.split("-"),e.length==2&&n.length==2&&e[0]==n[0]}function Ht(e){e=C(e.split("-x-"));var n=e.next().value;n=n===void 0?"":n,e=e.next().value,e=e===void 0?"":e;var s=C(n.split("-"));return n=s.next().value,n=n===void 0?"":n,s=s.next().value,s=s===void 0?"":s,e=e?"x-"+e:"",n=n.toLowerCase(),n=kD.get(n)||n,s=s.toUpperCase(),(s?n+"-"+s:n)+(e?"-"+e:"")}function CD(e,n){var s=id(e),a=id(n);return e!=s&&n!=a&&s==a}function rd(e,n){return e=Ht(e),n=Ht(n),n==e?4:Nm(n,e)?3:tb(n,e)?2:Nm(e,n)?1:0}function id(e){var n=e.indexOf("-");return e=n>=0?e.substring(0,n):e,e=e.toLowerCase(),e=kD.get(e)||e}function nb(e){return e.language?Ht(e.language):e.audio&&e.audio.language?Ht(e.audio.language):e.video&&e.video.language?Ht(e.video.language):"und"}function Ty(e,n){e=Ht(e);var s=new Set;n=C(n);for(var a=n.next();!a.done;a=n.next())s.add(Ht(a.value));for(n=C(s),a=n.next();!a.done;a=n.next())if(a=a.value,a==e)return a;for(n=C(s),a=n.next();!a.done;a=n.next())if(a=a.value,Nm(a,e))return a;for(n=C(s),a=n.next();!a.done;a=n.next())if(a=a.value,tb(a,e))return a;for(s=C(s),n=s.next();!n.done;n=s.next())if(n=n.value,Nm(e,n))return n;return null}xe("shaka.util.LanguageUtils",So),So.findClosestLocale=Ty,So.getLocaleForVariant=nb,So.getLocaleForText=function(e){return Ht(e.language||"und")},So.getBase=id,So.relatedness=rd,So.areSiblings=CD,So.normalize=Ht,So.isSiblingOf=tb,So.isParentOf=Nm,So.areLanguageCompatible=jh,So.areLocaleCompatible=function(e,n){return e=Ht(e),n=Ht(n),e==n};var kD=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function xr(e){Tt.call(this),this.j=Ht(e),this.i=new Map,this.g=new Set,this.h=new Map}V(xr,Tt),d=xr.prototype,d.release=function(){Tt.prototype.release.call(this)},d.Ri=function(e){var n=this;this.g.clear(),e=C(e);for(var s=e.next();!s.done;s=e.next())this.g.add(Ht(s.value));_D(this),e=Ea(this.g,function(a){return!n.h.has(a)}),e.length&&this.dispatchEvent(new _e("unknown-locales",new Map().set("locales",e))),e=Ea(this.g,function(a){return n.h.has(a)}),e=new Map().set("locales",e.length?e:[this.j]),this.dispatchEvent(new _e("locale-changed",e))},d.Xa=function(e,n,s){e=Ht(e),s===void 0&&(s=rb);var a=this.h.get(e)||new Map;return n.forEach(function(u,f){a.has(f)&&s!=rb||a.set(f,u)}),this.h.set(e,a),_D(this),this.dispatchEvent(new _e("locale-updated")),this},d.nm=function(e){for(var n=C(e.keys()),s=n.next();!s.done;s=n.next())s=s.value,e.set(s,this.resolve(s))},d.resolve=function(e){var n=this.i.get(e);return n||(e=new Map().set("locales",Array.from(this.g)).set("missing",e),this.dispatchEvent(new _e("unknown-localization",e)),"")},d.Qk=function(){return this.g};function _D(e){for(var n=e.h,s=e.j,a=e.g,u=new Set,f=C(a),p=f.next(),g={};!p.done;g={De:void 0},p=f.next()){g.De=p.value,u.add(g.De),u.add(id(g.De)),p=Ea(n.keys(),function(w){return function(b){return CD(b,w.De)}}(g)),p.sort(),p=C(p);for(var y=p.next();!y.done;y=p.next())u.add(y.value);for(g=Ea(n.keys(),function(w){return function(b){return id(b)==w.De}}(g)),g.sort(),g=C(g),p=g.next();!p.done;p=g.next())u.add(p.value)}for(u.add(s),s=[],u=C(u),f=u.next();!f.done;f=u.next())(f=n.get(f.value))&&s.push(f);for(s.reverse(),e.i.clear(),n=C(s),u=n.next();!u.done;u=n.next())u.value.forEach(function(w,b){e.i.set(b,w)});for(n=e.i.keys(),u=new Set,s=C(e.g),f=s.next();!f.done;f=s.next())f=e.h.get(f.value)||new Map,qX(f,n,u);u.size>0&&(a=new Map().set("locales",Array.from(a)).set("missing",Array.from(u)),e.dispatchEvent(new _e("missing-localizations",a)))}function qX(e,n,s){n=C(n);for(var a=n.next();!a.done;a=n.next())a=a.value,e.get(a)||s.add(a)}xe("shaka.ui.Localization",xr),xr.prototype.getCurrentLocales=xr.prototype.Qk,xr.prototype.resolve=xr.prototype.resolve,xr.prototype.resolveDictionary=xr.prototype.nm,xr.prototype.insert=xr.prototype.Xa,xr.prototype.changeLocale=xr.prototype.Ri,xr.prototype.release=xr.prototype.release;var rb=1;xr.ConflictResolution={USE_OLD:0,USE_NEW:rb},xr.UNKNOWN_LOCALES="unknown-locales",xr.UNKNOWN_LOCALIZATION="unknown-localization",xr.MISSING_LOCALIZATIONS="missing-localizations",xr.LOCALE_CHANGED="locale-changed",xr.LOCALE_UPDATED="locale-updated";function Uh(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Uh.prototype.sample=function(e,n){var s=Math.pow(this.g,e);n=n*(1-s)+s*this.h,isNaN(n)||(this.h=n,this.i+=e)};function Sy(e){return e.h/(1-Math.pow(e.g,e.i))}function Mm(){this.h=new Uh(2),this.j=new Uh(5),this.g=0,this.i=128e3,this.l=16e3}Mm.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Mm.prototype.sample=function(e,n){if(!(n<this.l)){var s=8e3*n/e;e/=1e3,this.g+=n,this.h.sample(e,s),this.j.sample(e,s)}},Mm.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Sy(this.h),Sy(this.j))};function RD(e,n){return typeof e=="number"&&typeof n=="number"&&isNaN(e)&&isNaN(n)?!0:e===n}function wo(e,n){n=e.indexOf(n),n>-1&&e.splice(n,1)}function sd(e,n,s){if(s||(s=RD),e.length!=n.length)return!1;n=n.slice(),e=C(e);for(var a=e.next(),u={};!a.done;u={oj:void 0},a=e.next()){if(u.oj=a.value,a=n.findIndex(function(f){return function(p){return s(f.oj,p)}}(u)),a==-1)return!1;n[a]=n[n.length-1],n.pop()}return n.length==0}function gl(e,n,s){if(e===n)return!0;if(!e||!n)return e==n;if(s||(s=RD),e.length!=n.length)return!1;for(var a=0;a<e.length;a++)if(!s(e[a],n[a]))return!1;return!0}function Dt(){this.g=new Su}d=Dt.prototype,d.release=function(){this.Ta(),this.g=null},d.o=function(e,n,s,a){this.g&&(e=new LD(e,n,s,a),this.g.push(n,e))},d.qa=function(e,n,s,a){function u(p){f.Ea(e,n,u),s(p)}var f=this;this.o(e,n,u,a)},d.Ea=function(e,n,s){if(this.g){var a=this.g.get(n)||[];a=C(a);for(var u=a.next();!u.done;u=a.next())u=u.value,u.target!=e||s!=u.listener&&s||(u.Ea(),this.g.remove(n,u))}},d.Ta=function(){if(this.g){for(var e=[],n=C(this.g.g.values()),s=n.next();!s.done;s=n.next())e.push.apply(e,K(s.value));for(e=C(e),n=e.next();!n.done;n=e.next())n.value.Ea();this.g.g.clear()}},xe("shaka.util.EventManager",Dt),Dt.prototype.removeAll=Dt.prototype.Ta,Dt.prototype.unlisten=Dt.prototype.Ea,Dt.prototype.listenOnce=Dt.prototype.qa,Dt.prototype.listen=Dt.prototype.o,Dt.prototype.release=Dt.prototype.release;function LD(e,n,s,a){this.target=e,this.type=n,this.listener=s,this.g=KX(e,a),this.target.addEventListener(n,s,this.g)}LD.prototype.Ea=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function KX(e,n){if(n==null)return!1;if(typeof n=="boolean")return n;var s=new Set(["passive","capture"]);return Object.keys(n).filter(function(a){return!s.has(a)}),zX(e)?n:n.capture||!1}function zX(e){var n=PD;if(n==null){n=!1;try{var s={},a={get:function(){return n=!0,!1}};Object.defineProperty(s,"passive",a),Object.defineProperty(s,"capture",a),a=function(){},e.addEventListener("test",a,s),e.removeEventListener("test",a,s)}catch{n=!1}PD=n}return n||!1}var PD=void 0;xe("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function ib(e,n){this.g=e,this.h=n}ib.prototype.toString=function(){return"v"+this.g+"."+this.h};function Nt(e,n){var s=new ib(5,0),a=DD,u=a.g,f=s.h-u.h;((s.g-u.g||f)>0?a.i:a.h)(a.g,s,e,n)}function WX(e,n,s,a){$e([s,"has been deprecated and will be removed in",n,". We are currently at version",e,". Additional information:",a].join(" "))}function YX(e,n,s,a){nr([s,"has been deprecated and has been removed in",n,". We are now at version",e,". Additional information:",a].join(" "))}var DD=null;function Om(e,n,s,a){this.g=null,this.l=e,this.i=n,this.m=s,this.u=a,this.j=!1;e:{if(typeof libDPIModule>"u"&&$e("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Nt("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{$e("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?($e("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||$e(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function wy(e,n,s,a){a.type!=="video"||e.u&&!a.baseOriginalId||e.g&&e.g.appendBuffer(n,"video",a.id,-s,!e.u)}function ND(e){e.g&&e.i.classList.add("shaka-hidden")}Om.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function MD(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}xe("shaka.lcevc.Dec",Om),Om.prototype.release=Om.prototype.release;function jm(){}function od(e,n){Fh.set(e,n)}function XX(){var e={};if(ht(),Pa())for(var n=C(Fh.keys()),s=n.next();!s.done;s=n.next())e[s.value]=!0;for(n=C(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),s=n.next();!s.done;s=n.next())s=s.value,e[s]=Pa()?Fh.has(s):Td().canPlayType(s)!="";return e}function OD(e,n){if(n){var s=Fh.get(n.toLowerCase());if(s)return s}throw new oe(2,4,4e3,e,n)}xe("shaka.media.ManifestParser",jm),jm.unregisterParserByMime=function(e){Fh.delete(e)},jm.registerParserByMime=od,jm.registerParserByExtension=function(){Nt("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},jm.AccessibilityPurpose={Rn:"visually impaired",an:"hard of hearing",An:"spoken subtitles"};var Fh=new Map;function Um(){}Um.prototype.extract=function(){},Um.prototype.decode=function(){return[]},Um.prototype.clear=function(){},Um.prototype.getStreams=function(){return[]};function sb(){}sb.prototype.init=function(){},sb.prototype.parse=function(){return[]};function jD(){}d=jD.prototype,d.init=function(){},d.Yf=function(){},d.je=function(){},d.remove=function(){},d.Eg=function(){},xe("shaka.media.IClosedCaptionParser",jD);function Yo(e){this.h=new Map,this.i=0,this.j=new sb,(e=UD(e.toLowerCase()))&&(this.j=e()),this.g=new Um,(e=ad)&&(this.g=e(),this.h.set(this.i,this.g))}d=Yo.prototype,d.init=function(e,n,s){if(n=n===void 0?!1:n,s=s===void 0?-1:s,s!=-1&&this.i!=s){n=s;var a=this.h.get(n);this.h.set(this.i,this.g),a?this.g=a:((a=ad)&&(this.g=a()),this.h.set(n,this.g))}else n||this.je();this.j.init(e),s!=-1&&(this.i=s)},d.Yf=function(e){e=this.j.parse(e),e=C(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var s=nt(n.packet);s.length>0&&this.g.extract(s,n.pts)}return this.g.decode()},d.je=function(){this.g.clear()},d.remove=function(e){e=e===void 0?[]:e,e=new Set(e);for(var n=C(this.h.keys()),s=n.next();!s.done;s=n.next())if(s=s.value,!e.has(s)){var a=this.h.get(s);a&&a.clear(),this.h.delete(s)}},d.Eg=function(){return this.g.getStreams()};function ob(e,n){ab.set(e,n)}function UD(e){return ab.get(e)}xe("shaka.media.ClosedCaptionParser",Yo),Yo.findDecoder=function(){return ad},Yo.unregisterDecoder=function(){ad=null},Yo.registerDecoder=function(e){ad=e},Yo.findParser=UD,Yo.unregisterParser=function(e){ab.delete(e)},Yo.registerParser=ob;var ab=new Map,ad=null;function ld(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Zi,this.scroll=FD}xe("shaka.text.CueRegion",ld);var Zi=1;ld.units={PX:0,PERCENTAGE:Zi,LINES:2};var FD="";ld.scrollMode={NONE:FD,UP:"up"};function Bh(e){this.h=e||"",this.g=0}function $h(e){bu(e,/[ \t]+/gm)}function bu(e,n){return n.lastIndex=e.g,n=n.exec(e.h),n=n==null?null:{position:n.index,length:n[0].length,results:n},e.g==e.h.length||n==null||n.position!=e.g?null:(e.g+=n.length,n.results)}function ud(e){return e.g==e.h.length?null:(e=bu(e,/[^ \t\n]*/gm))?e[0]:null}function Fm(e){if(e=bu(e,QX),e==null)return null;var n=Number(e[2]),s=Number(e[3]);return n>59||s>59?null:(Number(e[6])||0)/1e3+s+n*60+(Number(e[1])||0)*3600}function Vh(e){return e?Fm(new Bh(e)):null}var QX=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Ey(){}function Eo(e){function n(a){switch(typeof a){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return a;default:if(!a||ArrayBuffer.isView(a))return a;if(s.has(a))return null;var u=Array.isArray(a);if(a.constructor!=Object&&!u)return null;s.add(a);var f=u?[]:{},p;for(p in a)f[p]=n(a[p]);return u&&(f.length=a.length),f}}var s=new WeakSet;return n(e)}function Au(e){var n={},s;for(s in e)n[s]=e[s];return n}function by(e){if(Array.isArray(e)){for(var n=[],s=0;s<e.length;s++){var a=s.toString(),u=e[s];u!==void 0&&(u=by(u))&&n.push(a+":"+u)}e="["+n.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(s=Object.keys(e),s.sort(),n=[],s=C(s),a=s.next();!a.done;a=s.next())u=a.value,a=JSON.stringify(u),u=e[u],u!==void 0&&(u=by(u))&&n.push(a+":"+u);e="{"+n.join(",")+"}"}else e=JSON.stringify(e);return e}xe("shaka.util.ObjectUtils",Ey),Ey.alphabeticalKeyOrderStringify=by,Ey.shallowCloneObject=Au,Ey.cloneObject=Eo;/*
 @license
 tXml
 Copyright 2015 Tobias Nickel
 SPDX-License-Identifier: MIT
*/function Bm(e,n){var s=s===void 0?!1:s;return e=Aa(e),cd(e,n,s)}function cd(e,n,s){return e=JX(e,s===void 0?!1:s),!n&&e.length?e[0]:(e=e.find(function(a){return n.split(",").includes(a.tagName)}))?e:null}function lb(e){return cb.has(e)?cb.get(e):""}function JX(e,n){function s(f,p){p=p===void 0?!1:p;for(var g=[];e[u];)if(e.charCodeAt(u)==60){if(e.charCodeAt(u+1)===47){p=u+2,u=e.indexOf(">",u),p=e.substring(p,u);var y=p.indexOf(f);if(y==-1){var w=f.indexOf(".");w>0&&(y=p.indexOf(f.substring(0,w)))}if(y==-1)throw f=e.substring(0,u).split(`
`),Error(`Unexpected close tag
Line: `+(f.length-1)+`
Column: `+(f[f.length-1].length+1)+`
Char: `+e[u]);u+1&&(u+=1);break}else if(e.charCodeAt(u+1)===33){if(e.charCodeAt(u+2)==45){for(;u!==-1&&(e.charCodeAt(u)!==62||e.charCodeAt(u-1)!=45||e.charCodeAt(u-2)!=45||u==-1);)u=e.indexOf(">",u+1);u===-1&&(u=e.length)}else if(e.charCodeAt(u+2)===91&&e.charCodeAt(u+8)===91&&e.substr(u+3,5).toLowerCase()==="cdata"){y=e.indexOf("]]>",u),y==-1?(g.push(e.substr(u+9)),u=e.length):(g.push(e.substring(u+9,y)),u=y+3);continue}u++;continue}e:{w=p,u++;var b=a(),I={};for(y=[];e.charCodeAt(u)!==62&&e[u];){var L=e.charCodeAt(u);if(L>64&&L<91||L>96&&L<123){L=a();for(var j=e.charCodeAt(u);j&&j!==39&&j!==34&&!(j>64&&j<91||j>96&&j<123)&&j!==62;)u++,j=e.charCodeAt(u);var U=u+1;if(u=e.indexOf(e[u],U),U=(" "+e.slice(U,u)).slice(1),j===39||j===34){if(u===-1){if(w={tagName:b,attributes:I,children:y,parent:null},n)for(b=0;b<y.length;b++)typeof y[b]!="string"&&(y[b].parent=w);y=w;break e}}else U=null,u--;if(L.startsWith("xmlns:")){j=U;var F=L.split(":")[1];cb.set(j,F),db.set(F,j)}b==="tt"&&L==="xml:space"&&U==="preserve"&&(w=!0),I[L]=U}u++}for(e.charCodeAt(u-1)!==47?(u++,y=s(b,w)):u++,w={tagName:b,attributes:I,children:y,parent:null},b=y.length,I=0;I<b;I++)L=y[I],typeof L!="string"?n&&(L.parent=w):I==b-1&&L==`
`&&y.pop();y=w}if(g.push(y),typeof y=="string")break;y.tagName[0]==="?"&&y.children&&(g.push.apply(g,K(y.children)),y.children=[])}else y=u,u=e.indexOf("<",u)-1,u===-2&&(u=e.length),y=(" "+e.slice(y,u+1)).slice(1),p?y.length>0&&g.push(y):(g.length&&y.length==1&&y[0]==`
`||y.trim().length>0)&&g.push(y),u++;return g}function a(){for(var f=u;`\r
	>/= `.indexOf(e[u])===-1&&e[u];)u++;return(" "+e.slice(f,u)).slice(1)}var u=0;return s("")}function Ay(e){return typeof e=="string"}function BD(e){var n=[];if(!e.children)return[];e=C(e.children);for(var s=e.next();!s.done;s=e.next())s=s.value,typeof s!="string"&&n.push(s);return n}function Yt(e,n){var s=[];if(!e.children)return[];e=C(e.children);for(var a=e.next();!a.done;a=e.next())a=a.value,a.tagName===n&&s.push(a);return s}function Bn(e){return typeof e=="string"?yi(e):(e=e.children.reduce(function(n,s){return typeof s=="string"?n+s:n},""),e===""?null:yi(e))}function xi(e){return Array.from(e.children).every(function(n){return typeof n=="string"})?((e=Bn(e))&&(e=e.trim()),e):null}function Xo(e,n,s){if(s=s===void 0?[]:s,e.tagName===n&&s.push(e),e.children){e=C(e.children);for(var a=e.next();!a.done;a=e.next())Xo(a.value,n,s)}return s}function fn(e,n){return e=Yt(e,n),e.length!=1?null:e[0]}function $s(e,n,s){return e=$D(e,n,s),e.length!=1?null:e[0]}function rt(e,n,s,a){a=a===void 0?null:a;var u=null;return e=e.attributes[n],e!=null&&(u=s(e)),u??a}function vl(e,n,s){return n=lb(n),e.attributes[n+":"+s]||null}function $D(e,n,s){var a=lb(n);if(n=[],e.children)for(s=a?a+":"+s:s,e=C(e.children),a=e.next();!a.done;a=e.next())(a=a.value)&&a.tagName===s&&n.push(a);return n}function Ia(e,n,s){n=C(n);for(var a=n.next();!a.done;a=n.next())if(a=vl(e,a.value,s))return a;return null}function yl(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Ca(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Iy(e){var n=/([0-9]+)-([0-9]+)/.exec(e);return!n||(e=Number(n[1]),!isFinite(e))?null:(n=Number(n[2]),isFinite(n)?{start:e,end:n}:null)}function Or(e){return e=Number(e),e%1===0?e:null}function ka(e){return e=Number(e),e%1===0&&e>0?e:null}function jr(e){return e=Number(e),e%1===0&&e>=0?e:null}function Cy(e){return e=Number(e),isNaN(e)?null:e}function ky(e){return e?e.toLowerCase()==="true":!1}function ZX(e){var n,s=(n=e.match(/^(\d+)\/(\d+)$/))?Number(n[1])/Number(n[2]):Number(e);return isNaN(s)?null:s}function _y(e){var n=[];e=yi(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=C(e);for(var s=e.next();!s.done;s=e.next()){s=s.value;var a=s.match(/^([\w]+)/);if(a){var u=s.match(/(@id='(.*?)')/),f=s.match(/(@t='(\d+)')/),p=s.match(/(@n='(\d+)')/),g=s.match(/\[(\d+)\]/);n.push({name:a[0],id:u?u[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:f?Number(f[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:p?Number(p[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:g?Number(g[1])-1:null,Oc:s.split("/@")[1]||null})}else s.startsWith("@")&&n.length&&(n[n.length-1].Oc=s.slice(1))}return n}function VD(e,n){var s=_y(n.attributes.sel||"");if(s.length){var a=s[s.length-1],u=n.attributes.pos||null;s=a.position,s==null&&(a.t!==null&&(s=GD(e,"t",a.t)),a.n!==null&&(s=GD(e,"n",a.n))),s===null?s=u==="prepend"?0:e.length:u==="prepend"?--s:u==="after"&&++s,u=n.tagName,(a=a.Oc)&&e[s]?HD(e[s],u,a,xi(n)||""):(u!=="remove"&&u!=="replace"||e.splice(s,1),u!=="add"&&u!=="replace"||e.splice.apply(e,[s,0].concat(K(n.children))))}}function GD(e,n,s){var a=0;e=C(e);for(var u=e.next();!u.done;u=e.next()){if(Number(u.value.attributes[n])===s)return a;a++}return null}function HD(e,n,s,a){n==="remove"?delete e.attributes[s]:(n==="add"||n==="replace")&&(e.attributes[s]=a)}function qD(e){var n="",s=e.tagName.split(":");s.length>0&&(n=s[0],n=db.has(n)?db.get(n):""),n=document.createElementNS(n,e.tagName);for(var a in e.attributes)n.setAttribute(a,e.attributes[a]);for(e=C(e.children),a=e.next();!a.done;a=e.next())a=a.value,s=void 0,typeof a=="string"?s=new Text(a):s=qD(a),n.appendChild(s);return n}function ub(e){if(!e)return null;var n={tagName:e.tagName,attributes:Au(e.attributes),children:[],parent:null};e=C(e.children);for(var s=e.next();!s.done;s=e.next())s=s.value,typeof s=="string"||(s=ub(s),s.parent=n),n.children.push(s);return n}var cb=new Map,db=new Map;function cn(e,n,s){this.startTime=e,this.endTime=n,this.payload=s,this.region=new ld,this.position=null,this.positionAlign=Py,this.size=0,this.textAlign=_a,this.direction=Gm,this.writingMode=dd,this.lineInterpretation=Hm,this.line=null,this.lineHeight="",this.lineAlign=hd,this.displayAlign=Vm,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=JD,this.fontStyle=pb,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={columns:32,rows:15}}function KD(e,n){return e=new cn(e,n,""),e.lineBreak=!0,e}cn.prototype.clone=function(){var e=new cn(0,0,""),n;for(n in this)e[n]=this[n],Array.isArray(e[n])&&(e[n]=e[n].slice());return e};function Ry(e,n){if(e.payload!=n.payload||!(Math.abs(e.startTime-n.startTime)<.001&&Math.abs(e.endTime-n.endTime)<.001))return!1;for(var s in e)if(s!="startTime"&&s!="endTime"&&s!="payload"){if(s=="nestedCues"){if(!gl(e.nestedCues,n.nestedCues,Ry))return!1}else if(s=="region"||s=="cellResolution"){for(var a in e[s])if(e[s][a]!=n[s][a])return!1}else if(Array.isArray(e[s])){if(!gl(e[s],n[s]))return!1}else if(e[s]!=n[s])return!1}return!0}function Ly(e,n){n=n===void 0?new Map:n;var s=e.payload;if(s.includes("<")){n.size===0&&zD(n);var a=s;s=[];for(var u=-1,f=0;f<a.length;f++)a[f]==="<"?u=f+1:a[f]===">"&&u>0&&(u=a.substr(u,f-u),u.match(tQ)&&s.push(u),u=-1);for(s=C(s),f=s.next();!f.done;f=s.next())f=f.value,a=a.replace("<"+f+">",'<div time="'+f+'">'),a+="</div>";e:{f=a,u=[];var p=-1;s="",a=!1;for(var g=0;g<f.length;g++)if(f[g]==="/"){var y=f.indexOf(">",g);if(y===-1){s=f;break e}if((y=f.substring(g+1,y))&&y=="v"){a=!0;var w=null;if(u.length&&(w=u[u.length-1]),w){if(w===y)s+="/"+y+">";else{if(!w.startsWith("v")){s+=f[g];continue}s+="/"+w+">"}g+=y.length+1}else s+=f[g]}else s+=f[g]}else f[g]==="<"?(p=g+1,f[p]!="v"&&(p=-1)):f[g]===">"&&p>0&&(u.push(f.substr(p,g-p)),p=-1),s+=f[g];for(f=C(u),u=f.next();!u.done;u=f.next())u=u.value,p=u.replace(" ",".voice-"),s=s.replace("<"+u+">","<"+p+">"),s=s.replace("</"+u+">","</"+p+">"),a||(s+="</"+p+">")}s=eQ(s),e.payload="",a="<span>"+s.replace(/\n/g,"<br />")+"</span>";try{var b=cd(a,"span")}catch{}if(b)if(b=b.children,b.length!=1||b[0].tagName)for(b=C(b),s=b.next();!s.done;s=b.next())WD(s.value,e,n);else e.payload=yi(s);else e.payload=yi(s)}else e.payload=yi(s)}function zD(e){for(var n=C(Object.entries(XD)),s=n.next();!s.done;s=n.next()){var a=C(s.value);s=a.next().value,a=a.next().value;var u=new cn(0,0,"");u.color=a,e.set("."+s,u)}for(n=C(Object.entries(QD)),s=n.next();!s.done;s=n.next())a=C(s.value),s=a.next().value,a=a.next().value,u=new cn(0,0,""),u.backgroundColor=a,e.set("."+s,u)}function eQ(e){var n={"< ":""," >":" &gt;"},s=/(< +>|<\s|\s>)/g,a=RegExp(s.source);return e&&a.test(e)?e.replace(s,function(u){return n[u]||""}):e||""}function WD(e,n,s){var a=n.clone();if(a.nestedCues=[],a.payload="",a.rubyTag="",a.line=null,a.region=new ld,a.position=null,a.size=0,a.textAlign=_a,e.tagName)for(var u=C(e.tagName.split(/(?=[ .])+/g)),f=u.next();!f.done;f=u.next()){var p=f=f.value;if(p.startsWith(".voice-")){var g=p.split("-").pop();p='v[voice="'+g+'"]',s.has(p)||(p="v[voice="+g+"]")}switch(s.has(p)&&(g=a,p=s.get(p))&&(g.backgroundColor=$m(p.backgroundColor,g.backgroundColor),g.color=$m(p.color,g.color),g.fontFamily=$m(p.fontFamily,g.fontFamily),g.fontSize=$m(p.fontSize,g.fontSize),g.textShadow=$m(p.textShadow,g.textShadow),g.fontWeight=p.fontWeight,g.fontStyle=p.fontStyle,g.opacity=p.opacity,g.rubyTag=p.rubyTag,g.textCombineUpright=p.textCombineUpright,g.wrapLine=p.wrapLine),f){case"br":a=KD(a.startTime,a.endTime),n.nestedCues.push(a);return;case"b":a.fontWeight=Gh;break;case"i":a.fontStyle=Hh;break;case"u":a.textDecoration.push(xl);break;case"font":(f=e.attributes.color)&&(a.color=f);break;case"div":if(f=e.attributes.time,!f)break;(f=Vh(f))&&(a.startTime=f);break;case"ruby":case"rp":case"rt":a.rubyTag=f}}if(u=e.children,Ay(e)||u.length==1&&Ay(u[0]))for(s=Bn(e).split(`
`),e=!0,s=C(s),u=s.next();!u.done;u=s.next())u=u.value,e||(e=KD(a.startTime,a.endTime),n.nestedCues.push(e)),u.length>0&&(e=a.clone(),e.payload=yi(u),n.nestedCues.push(e)),e=!1;else for(n.nestedCues.push(a),n=C(u),e=n.next();!e.done;e=n.next())WD(e.value,a,s)}function $m(e,n){return e&&e.length>0?e:n}xe("shaka.text.Cue",cn),cn.parseCuePayload=Ly,cn.equal=Ry,cn.prototype.clone=cn.prototype.clone;var Py="auto";cn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Py};var _a="center",hb={LEFT:"left",RIGHT:"right",CENTER:_a,START:"start",END:"end"};cn.textAlign=hb;var Vm="after",YD={BEFORE:"before",CENTER:"center",AFTER:Vm};cn.displayAlign=YD;var Gm="ltr";cn.direction={HORIZONTAL_LEFT_TO_RIGHT:Gm,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var dd="horizontal-tb";cn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:dd,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Hm=0;cn.lineInterpretation={LINE_NUMBER:Hm,PERCENTAGE:1};var hd="start",fb={CENTER:"center",START:hd,END:"end"};cn.lineAlign=fb;var XD={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};cn.defaultTextColor=XD;var QD={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};cn.defaultTextBackgroundColor=QD;var JD=400,Gh=700;cn.fontWeight={NORMAL:JD,BOLD:Gh};var pb="normal",Hh="italic",ZD={NORMAL:pb,ITALIC:Hh,OBLIQUE:"oblique"};cn.fontStyle=ZD;var xl="underline";cn.textDecoration={UNDERLINE:xl,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var tQ=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Iu(){}Iu.prototype.destroy=function(){};function Tl(e,n,s){mb.set(e.toLowerCase().split(";")[0]+"-"+s,{priority:s,Zf:n})}function qh(e,n){for(var s=e.toLowerCase().split(";")[0],a=C([e3,vb,gb,Cu]),u=a.next();!u.done;u=a.next())if(u=mb.get(s+"-"+u.value)){var f=u.Zf(),p=f.isSupported(e,n);if(f.destroy(),p)return u.Zf}return null}xe("shaka.transmuxer.TransmuxerEngine",Iu),Iu.findTransmuxer=qh,Iu.unregisterTransmuxer=function(e,n){mb.delete(e.toLowerCase().split(";")[0]+"-"+n)},Iu.registerTransmuxer=Tl,Iu.prototype.destroy=Iu.prototype.destroy;var mb=new Map,Cu=1,gb=2,vb=3,e3=4;Iu.PluginPriority={FALLBACK:Cu,PREFERRED_SECONDARY:gb,PREFERRED:vb,APPLICATION:e3};function yb(){}function Pn(e,n){var s=e;return n&&!Sl.includes(e)&&(s+='; codecs="'+n+'"'),s}function Dy(e,n){return n&&(e+='; codecs="'+n+'"'),e}function xb(e,n,s){var a=Pn(e,n);return n=Dy(e,n),qh(n)?(e=qh(n))?(e=e(),s=e.convertCodecs(s,n),e.destroy()):s=n:s=e!="video/mp2t"&&s=="audio"?a.replace("video","audio"):a,s}function qm(e){return e.split(";")[0].split("/")[1]}function Dn(e){var n=t3(e);switch(e=n[0].toLowerCase(),n=n[1].toLowerCase(),!0){case(e==="mp4a"&&n==="69"):case(e==="mp4a"&&n==="6b"):case(e==="mp4a"&&n==="40.34"):return"mp3";case(e==="mp4a"&&n==="66"):case(e==="mp4a"&&n==="67"):case(e==="mp4a"&&n==="68"):case(e==="mp4a"&&n==="40.2"):case(e==="mp4a"&&n==="40.02"):case(e==="mp4a"&&n==="40.5"):case(e==="mp4a"&&n==="40.05"):case(e==="mp4a"&&n==="40.29"):case(e==="mp4a"&&n==="40.42"):return"aac";case(e==="mp4a"&&n==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&n==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&n==="b2"):return"dtsx";case(e==="mp4a"&&n==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return n&&n.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc";case e==="lvc1":return"lcevc"}return e}function ku(e){var n=[];e=C(e.split(","));for(var s=e.next();!s.done;s=e.next())s=t3(s.value),n.push(s[0]);return n.sort().join(",")}function es(e){return e.split(";")[0]}function Bi(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(n){return n.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Ny(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function t3(e){e=e.split(".");var n=e[0];return e.shift(),[n,e.join(".")]}xe("shaka.util.MimeUtils",yb),yb.getFullTypeWithAllCodecs=Dy,yb.getFullType=Pn,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var Sl=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function wl(e){this.i=null,this.l=e,this.D=!1,this.m=this.A=0,this.u=1/0,this.h=this.g=null,this.F="",this.C=function(){},this.j=new Map}function Ur(e,n){Wm.set(e,n)}function Km(e){return Wm.get(e)}function zm(e){return Wm.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!ad:!1}wl.prototype.destroy=function(){return this.l=this.i=null,this.j.clear(),Promise.resolve()};function nQ(e,n,s,a,u){var f,p,g,y,w,b,I;return X(function(L){if(L.g==1)return O(L,Promise.resolve(),2);if(!e.i||!e.l)return L.return();if(s==null||a==null)return e.i.parseInit(nt(n)),L.return();for(f=e.D?s:e.A,p={periodStart:e.A,segmentStart:s,segmentEnd:a,vttOffset:f},g=e.i.parseMedia(nt(n),p,u,[]),y=C(g),w=y.next();!w.done;w=y.next())b=w.value,e.C(b,u||null,p);I=g.filter(function(j){return j.startTime>=e.m&&j.startTime<e.u}),e.l.append(I),e.g==null&&(e.g=Math.max(s,e.m)),e.h=Math.min(a,e.u),re(L)})}wl.prototype.remove=function(e,n,s){s=s===void 0?!1:s;var a=this;return X(function(u){if(u.g==1)return O(u,Promise.resolve(),2);if(e>=n)return u.return();s&&sQ(a,e,n),a.l&&a.l.remove(e,n)&&a.g!=null&&(n<=a.g||e>=a.h||(e<=a.g&&n>=a.h?a.g=a.h=null:e<=a.g&&n<a.h?a.g=n:e>a.g&&n>=a.h&&(a.h=e)),i3(a)),re(u)})};function rQ(e,n,s){e.m=n,e.u=s}function n3(e,n,s){e.F=n,(n=e.j.get(n))&&(n=n.filter(function(a){return a.endTime<=s}),n.length&&e.l.append(n))}function r3(e,n,s){n.startTime+=s,n.endTime+=s,n=C(n.nestedCues);for(var a=n.next();!a.done;a=n.next())r3(e,a.value,s)}function iQ(e,n,s){var a=new Map;n=C(n);for(var u=n.next();!u.done;u=n.next()){var f=u.value;u=f.stream,f=f.cue,a.has(u)||a.set(u,[]),r3(e,f,s),f.startTime>=e.m&&f.startTime<e.u&&(a.get(u).push(f),u==e.F&&e.l.append([f]))}for(s=C(a.keys()),n=s.next();!n.done;n=s.next())for(n=n.value,e.j.has(n)||e.j.set(n,[]),u=C(a.get(n)),f=u.next();!f.done;f=u.next())f=f.value,e.j.get(n).push(f);i3(e)}function sQ(e,n,s){for(var a=C(e.j.keys()),u=a.next();!u.done;u=a.next()){u=u.value;var f=e.j.get(u);f=f.filter(function(p){return p.startTime<n||p.endTime>=s}),e.j.set(u,f)}}function i3(e){for(var n=1/0,s=-1/0,a=C(e.j.values()),u=a.next();!u.done;u=a.next()){u=C(u.value);for(var f=u.next();!f.done;f=u.next())f=f.value,n=Math.min(n,f.startTime),s=Math.max(s,f.endTime)}n!==1/0&&s!==-1/0&&(e.g=e.g==null?Math.max(n,e.m):Math.min(e.g,Math.max(n,e.m)),e.h=Math.max(e.h,Math.min(s,e.u)))}xe("shaka.text.TextEngine",wl),wl.prototype.destroy=wl.prototype.destroy,wl.findParser=Km,wl.unregisterParser=function(e){Wm.delete(e)},wl.registerParser=Ur;var Wm=new Map;function Ym(e){this.h=e,this.g=null}Ym.prototype.Y=function(e){var n=this;this.stop();var s=!0,a=null;return this.g=function(){l.clearTimeout(a),s=!1},a=l.setTimeout(function(){s&&n.h()},e*1e3),this},Ym.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function Ke(e){this.h=e,this.g=null}Ke.prototype.Ka=function(){return this.stop(),this.h(),this},Ke.prototype.Y=function(e){var n=this;return this.stop(),this.g=new Ym(function(){n.h()}).Y(e),this},Ke.prototype.xa=function(e){var n=this;return this.stop(),this.g=new Ym(function(){n.g.Y(e),n.h()}).Y(e),this},Ke.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},xe("shaka.util.Timer",Ke),Ke.prototype.stop=Ke.prototype.stop,Ke.prototype.tickEvery=Ke.prototype.xa,Ke.prototype.tickAfter=Ke.prototype.Y,Ke.prototype.tickNow=Ke.prototype.Ka;function oQ(e,n){return e.concat(n)}function aQ(){}function _u(e){return e!=null}function My(e,n){return Promise.race([n,new Promise(function(s,a){new Ke(a).Y(e)})])}function s3(){}function o3(e,n,s,a,u){if(u.length){var f=e.textStreams;u=C(u);for(var p=u.next(),g={};!p.done;g={zi:void 0},p=u.next())if(g.zi=p.value,p=f.filter(function(U){return function(F){return!!(F.codecs.startsWith(U.zi)||F.mimeType.startsWith(U.zi))}}(g)),p.length){f=p;break}e.textStreams=f}if(f=e.variants,(n.length||s.length)&&(f=lQ(f,n,s)),a.length){for(n=new Su,f=C(f),s=f.next();!s.done;s=f.next())s=s.value,n.push(String(s.video.width||0),s);var y=[];n.forEach(function(U,F){U=0;var B=[];F=C(F);for(var q=F.next(),G={};!q.done;G={Cg:void 0},q=F.next())G.Cg=q.value,q=a.filter(function(z){return function(J){return z.Cg.decodingInfos[0][J]}}(G)).length,q>U?(U=q,B=[G.Cg]):q==U&&B.push(G.Cg);y.push.apply(y,K(B))}),f=y}for(n=new Set,s=C(f),u=s.next();!u.done;u=s.next())u=u.value,u.video&&n.add(u.video);if(n.size){var w={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};u=Array.from(n).sort(function(U,F){return U.bandwidth&&F.bandwidth&&U.bandwidth!=F.bandwidth?U.bandwidth-F.bandwidth:U.width!=F.width?U.width-F.width:U.codecs&&F.codecs?(U=Dn(U.codecs),F=Dn(F.codecs),(w[U]||1)-(w[F]||1)):0});var b=[];for(n=new Map,s=function(U){var F=[String(U.width||""),String(U.height||""),String(Math.round(U.frameRate||0)),U.hdr||"",U.fastSwitching];return U.dependencyStream&&F.push(U.dependencyStream.baseOriginalId||""),U.roles&&F.push(U.roles.sort().join("_")),F.join(";")},u=C(u),p=u.next();!p.done;p=u.next()){p=p.value,g=s(p);var I=n.get(g)||[];if(I.length){var L=Dn(I[I.length-1].codecs),j=Dn(p.codecs);L==j&&(I.push(p),b.push(p.id))}else I.push(p),b.push(p.id);n.set(g,I)}e.variants=f.filter(function(U){return!((U=U.video)&&!b.includes(U.id))})}else e.variants=f}function lQ(e,n,s){n=C(n);for(var a=n.next(),u={};!a.done;u={lk:void 0},a=n.next())if(u.lk=a.value,a=e.filter(function(f){return function(p){return p.video&&p.video.codecs.startsWith(f.lk)}}(u)),a.length){e=a;break}for(s=C(s),n=s.next(),a={};!n.done;a={Mi:void 0},n=s.next())if(a.Mi=n.value,n=e.filter(function(f){return function(p){return p.audio&&p.audio.codecs.startsWith(f.Mi)}}(a)),n.length){e=n;break}return e}function uQ(e,n,s){e.variants=e.variants.filter(function(a){return Oy(a,n,s)})}function Oy(e,n,s){function a(p,g,y){return p>=g&&p<=y}if(e&&e.video&&e.video.width&&e.video.height){var u=e.video.width,f=e.video.height;if(f>u&&(f=C([f,u]),u=f.next().value,f=f.next().value),!a(u,n.minWidth,Math.min(n.maxWidth,s.width))||!a(f,n.minHeight,Math.min(n.maxHeight,s.height))||!a(u*f,n.minPixels,n.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!a(e.video.frameRate,n.minFrameRate,n.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!a(e.audio.channelsCount,n.minChannelsCount,n.maxChannelsCount)||!a(e.bandwidth,n.minBandwidth,n.maxBandwidth))}function cQ(e,n,s,a){return s=s===void 0?[]:s,a=a===void 0?{}:a,X(function(u){return u.g==1?O(u,a3(e,n,n.offlineSessionIds.length>0,s,a),2):(pQ(n),O(u,mQ(n),0))})}function a3(e,n,s,a,u){var f,p;return X(function(g){if(g.g==1)return ht().Wj()&&dQ(n.variants),O(g,Tb(n.variants,s,!1,a),2);f=null,e&&(p=e.g)&&(f=p.keySystem),n.variants=n.variants.filter(function(y){var w=hQ(y,f,u);if(!w){var b=[];y.audio&&b.push(p3(y.audio)),y.video&&b.push(p3(y.video))}return w}),re(g)})}function dQ(e){var n=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),s=new Set;e=C(e);for(var a=e.next();!a.done;a=e.next())a=a.value,a.video&&s.add(a.video);for(s=C(s),e=s.next();!e.done;e=s.next()){e=e.value,a=C(n);for(var u=a.next();!u.done;u=a.next()){var f=C(u.value);if(u=f.next().value,f=f.next().value,e.codecs.includes(u)){e.codecs=e.codecs.replace(u,f);break}}}}function hQ(e,n,s){if(!e.decodingInfos.some(function(y){return!(!y.supported||n&&(y=y.keySystemAccess)&&(s[y.keySystem]||y.keySystem)!=n)}))return!1;var a=ht(),u=a.Vb()==="Xbox";a=a.Oa()==="MOBILE"&&a.Ja()==="GECKO";var f=e.video,p=f&&f.width||0,g=f&&f.height||0;return u&&f&&(p>1920||g>1080)&&(f.codecs.includes("avc1.")||f.codecs.includes("avc3."))||(u=f&&f.dependencyStream)&&!MD(u)?!1:(e=e.audio,!(a&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function l3(e,n){var s,a,u,f,p,g,y;return X(function(w){if(w.g==1){for(s=function(b,I){if(b){var L=Au(b);return L.supported=b.supported&&I.supported,L.powerEfficient=b.powerEfficient&&I.powerEfficient,L.smooth=b.smooth&&I.smooth,I.keySystemAccess&&!L.keySystemAccess&&(L.keySystemAccess=I.keySystemAccess),L}return I},a=null,u=[],f=C(n),p=f.next(),g={};!p.done;g={cache:void 0,nf:void 0},p=f.next())y=p.value,g.nf=by(y),g.cache=By,g.cache.has(g.nf)?a=s(a,g.cache.get(g.nf)):u.push(fQ(y).then(function(b){return function(I){var L=null;I=C(I||[]);for(var j=I.next();!j.done;j=I.next())L=s(L,j.value);L&&(b.cache.set(b.nf,L),a=s(a,L))}}(g)));return O(w,Promise.all(u),2)}a&&e.decodingInfos.push(a),re(w)})}function fQ(e){var n=[""];e.video&&(n=Bi(e.video.contentType).split(","));var s=[""];e.audio&&(s=Bi(e.audio.contentType).split(","));var a=[];n=C(n);for(var u=n.next();!u.done;u=n.next()){u=u.value;for(var f=C(s),p=f.next(),g={};!p.done;g={fd:void 0},p=f.next())p=p.value,g.fd=Eo(e),e.video&&(g.fd.video.contentType=Pn(es(g.fd.video.contentType),u)),e.audio&&(g.fd.audio.contentType=Pn(es(g.fd.audio.contentType),p)),a.push(new Promise(function(y){return function(w,b){(ht().Oa()=="MOBILE"?My(5,navigator.mediaCapabilities.decodingInfo(y.fd)):navigator.mediaCapabilities.decodingInfo(y.fd)).then(function(I){w(I)}).catch(b)}}(g)))}return Promise.all(a).catch(function(){return JSON.stringify(e),null})}function Tb(e,n,s,a){var u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie;return X(function(Y){switch(Y.g){case 1:if(e.some(function(ne){return ne.decodingInfos.length}))return Y.return();u=C(a),f=u.next(),p={};case 2:if(f.done){Y.B(4);break}p.Cj=f.value,g=!1,y=C(e),w=y.next();case 5:if(w.done){Y.B(7);break}b=w.value,I=u3(b,n,s).filter(function(ne){return function(Z){return Z=Z[0],(Z.keySystemConfiguration&&Z.keySystemConfiguration.keySystem)===ne.Cj}}(p)),L=C(I),j=L.next();case 8:if(j.done){Y.B(10);break}return U=j.value,O(Y,l3(b,U),9);case 9:j=L.next(),Y.B(8);break;case 10:b.decodingInfos.some(function(ne){return ne.supported})&&(g=!0),w=y.next(),Y.B(5);break;case 7:if(g)return Y.return();p={Cj:void 0},f=u.next(),Y.B(2);break;case 4:F=C(e),B=F.next();case 12:if(B.done){Y.B(0);break}q=B.value,G=u3(q,n,s).filter(function(ne){return ne=ne[0],ne=ne.keySystemConfiguration&&ne.keySystemConfiguration.keySystem,!ne||!a.includes(ne)}),z=C(G),J=z.next();case 15:if(J.done){B=F.next(),Y.B(12);break}return ie=J.value,O(Y,l3(q,ie),16);case 16:J=z.next(),Y.B(15)}})}function u3(e,n,s){var a=e.audio,u=e.video,f=[],p=[];if(u)for(var g=C(u.fullMimeTypes),y=g.next();!y.done;y=g.next()){y=y.value;var w=Bi(y);if(w.includes(",")&&!a){var b=w.split(","),I=es(y);w=Oh("video",b),b=Oh("audio",b),b=Xm(b,I),I=xb(I,b,"audio"),p.push({contentType:I,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(w=c3(w),y={contentType:xb(es(y),w,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||30},u.hdr)switch(u.hdr){case"PQ":y.transferFunction="pq";break;case"HLG":y.transferFunction="hlg"}u.colorGamut&&(y.colorGamut=u.colorGamut),f.push(y)}if(a)for(g=C(a.fullMimeTypes),y=g.next();!y.done;y=g.next())w=y.value,y=es(w),w=Xm(Bi(w),y),y=xb(y,w,"audio"),p.push({contentType:y,channels:a.channelsCount||2,bitrate:a.bandwidth||e.bandwidth||1,samplerate:a.audioSamplingRate||1,spatialRendering:a.spatialAudio});for(g=[],f.length==0&&f.push(null),p.length==0&&p.push(null),f=C(f),y=f.next();!y.done;y=f.next())for(y=y.value,w=C(p),I=w.next();!I.done;I=w.next())I=I.value,b={type:s?"file":"media-source"},y&&(b.video=y),I&&(b.audio=I),g.push(b);if(p=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!p.length)return[g];for(e=[],s=new Map,p=C(p),f=p.next();!f.done;f=p.next())f=f.value,s.get(f.keySystem)||s.set(f.keySystem,[]),s.get(f.keySystem).push(f);for(p=n?"required":"optional",n=n?["persistent-license"]:["temporary"],f=C(s.keys()),y=f.next();!y.done;y=f.next()){for(y=y.value,I=s.get(y),w=new Map,I=C(I),b=I.next();!b.done;b=I.next()){b=b.value;var L=b.videoRobustness+","+b.audioRobustness;w.get(L)||w.set(L,[]),w.get(L).push(b)}for(w=C(w.values()),I=w.next();!I.done;I=w.next()){I=I.value,b=[],L=C(g);for(var j=L.next();!j.done;j=L.next()){j=Object.assign({},j.value);for(var U={keySystem:y,initDataType:"cenc",persistentState:p,distinctiveIdentifier:"optional",sessionTypes:n},F=C(I),B=F.next();!B.done;B=F.next()){if(B=B.value,B.initData&&B.initData.length){for(var q=new Set,G=C(B.initData),z=G.next();!z.done;z=G.next())q.add(z.value.initDataType);U.initDataType=B.initData[0].initDataType}B.distinctiveIdentifierRequired&&(U.distinctiveIdentifier="required"),B.persistentStateRequired&&(U.persistentState="required"),B.sessionType&&(U.sessionTypes=[B.sessionType]),a&&(U.audio?(B.encryptionScheme&&(U.audio.encryptionScheme=U.audio.encryptionScheme||B.encryptionScheme),U.audio.robustness=U.audio.robustness||B.audioRobustness):(U.audio={robustness:B.audioRobustness},B.encryptionScheme&&(U.audio.encryptionScheme=B.encryptionScheme)),U.audio.robustness==""&&delete U.audio.robustness),u&&(U.video?(B.encryptionScheme&&(U.video.encryptionScheme=U.video.encryptionScheme||B.encryptionScheme),U.video.robustness=U.video.robustness||B.videoRobustness):(U.video={robustness:B.videoRobustness},B.encryptionScheme&&(U.video.encryptionScheme=B.encryptionScheme)),U.video.robustness==""&&delete U.video.robustness)}j.keySystemConfiguration=U,b.push(j)}e.push(b)}}return e}function Xm(e,n){var s=ht();return e.toLowerCase()=="flac"?s.Ja()!="WEBKIT"?"flac":"fLaC":e.toLowerCase()==="opus"?s.Ja()!="WEBKIT"?"opus":qm(n)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&s.Le()?"ec-3":e}function c3(e){if(e.includes("avc1")){var n=e.split(".");if(n.length==3)return e=n.shift()+".",e+=parseInt(n.shift(),10).toString(16),e+=("000"+parseInt(n.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function pQ(e){e.textStreams=e.textStreams.filter(function(n){return n=Pn(n.mimeType,n.codecs),zm(n)})}function mQ(e){var n,s,a,u,f,p,g;return X(function(y){switch(y.g){case 1:n=[],s=C(e.imageStreams),a=s.next();case 2:if(a.done){y.B(4);break}if(u=a.value,f=u.mimeType,f=="application/mp4"&&u.codecs=="mjpg"&&(f="image/jpg"),$y.has(f)){y.B(5);break}if(p=xQ.get(f),!p){$y.set(f,!1),y.B(5);break}return O(y,gQ(p),7);case 7:g=y.h,$y.set(f,g);case 5:$y.get(f)&&n.push(u),a=s.next(),y.B(2);break;case 4:e.imageStreams=n,re(y)}})}function gQ(e){return new Promise(function(n){var s=new Image;s.src=e,"decode"in s?s.decode().then(function(){n(!0)}).catch(function(){n(!1)}):s.onload=s.onerror=function(){n(s.height===2)}})}function fd(e){var n=e.audio,s=e.video,a=n?n.mimeType:null,u=s?s.mimeType:null,f=n?n.codecs:null,p=s?s.codecs:null,g=n?n.groupId:null,y=[];s&&y.push(s.mimeType),n&&y.push(n.mimeType),y=y[0]||null;var w=[];n&&w.push(n.kind),s&&w.push(s.kind),w=w[0]||null;var b=new Set;if(n)for(var I=C(n.roles),L=I.next();!L.done;L=I.next())b.add(L.value);if(s)for(I=C(s.roles),L=I.next();!L.done;L=I.next())b.add(L.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,videoLabel:null,kind:w,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:y,audioMimeType:a,videoMimeType:u,codecs:"",audioCodec:f,videoCodec:p,primary:e.primary,roles:Array.from(b),audioRoles:null,videoRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:g,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},s&&(e.videoId=s.id,e.originalVideoId=s.originalId,e.width=s.width||null,e.height=s.height||null,e.frameRate=s.frameRate||null,e.pixelAspectRatio=s.pixelAspectRatio||null,e.videoBandwidth=s.bandwidth||null,e.hdr=s.hdr||null,e.colorGamut=s.colorGamut||null,e.videoLayout=s.videoLayout||null,e.videoRoles=s.roles,e.videoLabel=s.label,(a=s.dependencyStream)&&(e.width=a.width||e.width,e.height=a.height||e.height,e.videoCodec=a.codecs||e.videoCodec,e.pixelAspectRatio=a.pixelAspectRatio||e.pixelAspectRatio,e.videoBandwidth&&a.bandwidth&&(e.videoBandwidth+=a.bandwidth)),p.includes(","))){e.channelsCount=s.channelsCount,e.audioSamplingRate=s.audioSamplingRate,e.spatialAudio=s.spatialAudio,e.originalLanguage=s.originalLanguage,e.audioMimeType=u,u=p.split(",");try{e.videoCodec=Oh("video",u),e.audioCodec=Oh("audio",u)}catch{}}return n&&(e.audioId=n.id,e.originalAudioId=n.originalId,e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.audioBandwidth=n.bandwidth||null,e.spatialAudio=n.spatialAudio,e.label=n.label,e.audioRoles=n.roles,e.accessibilityPurpose=n.accessibilityPurpose,e.originalLanguage=n.originalLanguage,u=n.dependencyStream)&&(e.audioCodec=u.codecs||e.audioCodec,e.audioBandwidth&&u.bandwidth&&(e.audioBandwidth+=u.bandwidth)),s&&!e.videoBandwidth&&(n?e.audioBandwidth&&(e.videoBandwidth=e.bandwidth-e.audioBandwidth):e.videoBandwidth=e.bandwidth),n&&!e.audioBandwidth&&(s?e.videoBandwidth&&(e.audioBandwidth=e.bandwidth-e.videoBandwidth):e.audioBandwidth=e.bandwidth),n=[],e.videoCodec&&n.push(e.videoCodec),e.audioCodec&&n.push(e.audioCodec),e.codecs=n.join(", "),e}function pd(e){return{id:e.id,active:!1,type:mt,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function Sb(e){var n=e.width||null,s=e.height||null,a=null;e.segmentIndex&&(a=Qo(e.segmentIndex));var u=e.tilesLayout;return a&&(u=a.tilesLayout||u),u&&n!=null&&(n/=Number(u.split("x")[0])),u&&s!=null&&(s/=Number(u.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:n,height:s,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:u||null,originalImageId:e.originalId}}function jy(e){return e.__shaka_id||(e.__shaka_id=yQ++),e.__shaka_id}function d3(e){var n={id:jy(e),active:e.mode!="disabled",type:mt,bandwidth:0,language:Ht(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:e.kind=="forced",originalTextId:e.id,originalLanguage:e.language};return e.kind=="captions"&&(n.mimeType="unknown"),e.kind=="subtitles"&&(n.mimeType="text/vtt"),e.kind&&(n.roles=[e.kind]),n}function Uy(e,n){var s=e?e.language:null;if(s={id:jy(e||n),active:e?e.enabled:n.selected,type:"variant",bandwidth:0,language:Ht(s||"und"),label:e?e.label:null,videoLabel:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:e?e.kind=="main":!1,roles:[],forced:!1,audioRoles:null,videoRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:n?n.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:s},e&&e.kind&&(s.roles=[e.kind],s.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(s.audioCodec=e.configuration.codec,s.codecs=s.audioCodec),e.configuration.bitrate&&(s.audioBandwidth=e.configuration.bitrate,s.bandwidth+=s.audioBandwidth),e.configuration.sampleRate&&(s.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(s.channelsCount=e.configuration.numberOfChannels)),n&&n.configuration&&(n.configuration.codec&&(s.videoCodec=n.configuration.codec,s.codecs=s.codecs?s.codecs+(","+s.videoCodec):s.videoCodec),n.configuration.bitrate&&(s.videoBandwidth=n.configuration.bitrate,s.bandwidth+=s.videoBandwidth),n.configuration.framerate&&(s.frameRate=n.configuration.framerate),n.configuration.width&&(s.width=n.configuration.width),n.configuration.height&&(s.height=n.configuration.height),n.configuration.colorSpace&&n.configuration.colorSpace.transfer))switch(n.configuration.colorSpace.transfer){case"pq":s.hdr="PQ";break;case"hlg":s.hdr="HLG";break;case"bt709":s.hdr="SDR"}return s}function Qm(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Fy(e){return e.filter(function(n){return Qm(n)})}function Kh(e,n,s,a){var u=e,f=e.filter(function(y){return y.primary});f.length&&(u=f);var p=u.length?u[0].language:"";if(u=u.filter(function(y){return y.language==p}),n){var g=Ty(Ht(n),e.map(function(y){return y.language}));g&&(u=e.filter(function(y){return Ht(y.language)==g}))}if(u=u.filter(function(y){return y.forced==a}),s){if(e=h3(u,s),e.length)return e}else if(e=u.filter(function(y){return y.roles.length==0}),e.length)return e;return e=u.map(function(y){return y.roles}).reduce(oQ,[]),e.length?h3(u,e[0]):u}function h3(e,n){return e.filter(function(s){return s.roles.includes(n)})}function vQ(e){var n=[];return e.audio&&n.push(e.audio),e.video&&n.push(e.video),n}function f3(e,n){n.length&&(n=n.filter(function(s){return Dn(e.codecs)==Dn(s.codecs)}).sort(function(s,a){return s.bandwidth&&a.bandwidth&&s.bandwidth!=a.bandwidth?s.bandwidth-a.bandwidth:(s.width||0)-(a.width||0)}),e.trickModeVideo=n[0],n.length>1&&(n=n.find(function(s){return e.width==s.width&&e.height==s.height})))&&(e.trickModeVideo=n)}function p3(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function m3(e,n,s){if(s.autoShowText==0)return!1;if(s.autoShowText==1)return!0;var a=Ht(s.preferredTextLanguage);return n=Ht(n.language),s.autoShowText==2?jh(n,a):s.autoShowText==3?e?(e=Ht(e.language),jh(n,a)&&!jh(e,n)):!1:($e("Invalid autoShowText setting!"),!1)}function g3(e){var n={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]};e=C(e);for(var s=e.next();!s.done;s=e.next()){s=s.value;var a={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:s?es(s):"",codecs:s?Bi(s):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};a.fullMimeTypes.add(Pn(a.mimeType,a.codecs)),s.startsWith("audio/")?(a.type="audio",n.audio=a):n.video=a}return n}xe("shaka.util.StreamUtils",s3),s3.meetsRestrictions=Oy;var By=new Map,yQ=0,$y=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),xQ=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Sn(){var e=this;this.H=null,this.G=!1,this.A=new Mm,this.j=new Dt,navigator.connection&&navigator.connection.addEventListener&&this.j.o(navigator.connection,"change",function(){e.g.useNetworkInformation&&navigator.onLine&&(e.A=new Mm,e.g&&e.A.configure(e.g.advanced),e.trySuggestStreams())}),this.l=[],this.I=1,this.J=!1,this.h=this.u=this.g=this.C=null,this.m=new Ke(function(){if(e.G&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var n=e.chooseVariant();n&&e.H(n,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.D=l,"documentPictureInPicture"in l&&this.j.o(l.documentPictureInPicture,"enter",function(){e.D=l.documentPictureInPicture.window,e.m&&e.m.Ka(),e.j.qa(e.D,"pagehide",function(){e.D=l,e.m&&e.m.Ka()})}),this.F=this.i=null}d=Sn.prototype,d.stop=function(){this.H=null,this.G=!1,this.l=[],this.I=1,this.u=this.C=null,this.h&&(this.h.disconnect(),this.h=null),this.m&&this.m.stop(),this.F=this.i=null},d.release=function(){this.stop(),this.j.release(),this.m=null},d.init=function(e){this.H=e},d.chooseVariant=function(e){e=e===void 0?!1:e;var n=1/0,s=1/0;if(this.g.restrictToScreenSize&&(s=this.g.ignoreDevicePixelRatio?1:this.D.devicePixelRatio,n=this.D.screen.height*s,s*=this.D.screen.width),this.h&&this.g.restrictToElementSize){var a=this.g.ignoreDevicePixelRatio?1:this.D.devicePixelRatio,u=this.u.clientHeight,f=this.u.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.u&&(u=this.i.height,f=this.i.width),n=Math.min(n,u*a),s=Math.min(s,f*a)}if(u=this.l.filter(function(w){return w&&!(w.audio&&w.audio.fastSwitching||w.video&&w.video.fastSwitching)}),u.length||(u=this.l),a=u,e&&u.length!=this.l.length&&(a=this.l.filter(function(w){return w&&!!(w.audio&&w.audio.fastSwitching||w.video&&w.video.fastSwitching)})),e=wb(this,this.g.restrictions,a,1/0,1/0),n!=1/0||s!=1/0){for(e=TQ(e),e=C(e),u=e.next();!u.done;u=e.next())if(u=u.value,u.height>=n&&u.width>=s){n=u.height,s=u.width;break}e=wb(this,this.g.restrictions,a,n,s)}for(n=this.getBandwidthEstimate(),a.length&&!e.length&&(e=wb(this,null,a,1/0,1/0),e=[e[0]]),s=e[0]||null,a=0;a<e.length;a++){u=e[a];var p=isNaN(this.I)?1:Math.abs(this.I);f=p*u.bandwidth/this.g.bandwidthDowngradeTarget;for(var g={bandwidth:1/0},y=a+1;y<e.length;y++)if(u.bandwidth!=e[y].bandwidth){g=e[y];break}p=p*g.bandwidth/this.g.bandwidthUpgradeTarget,s&&u&&n>=f&&n<=p&&(s.bandwidth!=u.bandwidth||s.bandwidth==u.bandwidth&&s.video&&u.video&&(s.video.width<u.video.width||s.video.height<u.video.height))&&(s=u)}return this.C=Date.now(),s},d.enable=function(){this.G=!0,this.l.length&&this.trySuggestStreams()},d.disable=function(){this.G=!1},d.segmentDownloaded=function(e,n,s,a){var u=e;this.g.removeLatencyFromFirstPacketTime&&a&&a.packetNumber===1&&a.timeToFirstByte&&(u=e-a.timeToFirstByte),u>=this.g.cacheLoadThreshold&&this.A.sample(u,n),s&&this.C!=null&&this.G&&v3(this)},d.trySuggestStreams=function(){this.G&&(this.C=Date.now(),v3(this,!0))},d.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=navigator.connection.downlink*1e6),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.A.getBandwidthEstimate(e),this.F?this.F.getBandwidthEstimate(e):e)},d.setVariants=function(e){return sd(e,this.l)?!1:(this.l=e,!0)},d.playbackRateChanged=function(e){this.I=e},d.setMediaElement=function(e){function n(){s.m.Y(SQ)}var s=this;this.u=e,this.h&&(this.h.disconnect(),this.h=null),this.u&&"ResizeObserver"in l&&(this.h=new ResizeObserver(n),this.h.observe(this.u)),this.j.o(e,"enterpictureinpicture",function(a){a.pictureInPictureWindow&&(s.i=a.pictureInPictureWindow,s.j.o(s.i,"resize",n))}),this.j.o(e,"leavepictureinpicture",function(){s.i&&s.j.Ea(s.i,"resize",n),s.i=null})},d.setCmsdManager=function(e){this.F=e},d.configure=function(e){this.g=e,this.A&&this.g&&this.A.configure(this.g.advanced)};function v3(e,n){if(n===void 0||!n){if(!e.J){if(n=e.A,!(n.g>=n.i))return;e.J=!0,e.C-=(e.g.switchInterval-e.g.minTimeToSwitch)*1e3}if(Date.now()-e.C<e.g.switchInterval*1e3)return}n=e.chooseVariant(),e.getBandwidthEstimate(),n&&e.H(n,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function wb(e,n,s,a,u){if(e.F){var f=e.F.dj();f&&(s=s.filter(function(p){return p.bandwidth&&f?p.bandwidth<=f:!0}))}return n&&(s=s.filter(function(p){return Oy(p,n,{width:u,height:a})})),s.sort(function(p,g){return p.bandwidth-g.bandwidth})}function TQ(e){var n=[];e=C(e);for(var s=e.next();!s.done;s=e.next())(s=s.value)&&(s=s.video)&&s.height&&s.width&&n.push({height:s.height,width:s.width});return n.sort(function(a,u){return a.width-u.width})}xe("shaka.abr.SimpleAbrManager",Sn),Sn.prototype.configure=Sn.prototype.configure,Sn.prototype.setCmsdManager=Sn.prototype.setCmsdManager,Sn.prototype.setMediaElement=Sn.prototype.setMediaElement,Sn.prototype.playbackRateChanged=Sn.prototype.playbackRateChanged,Sn.prototype.setVariants=Sn.prototype.setVariants,Sn.prototype.getBandwidthEstimate=Sn.prototype.getBandwidthEstimate,Sn.prototype.trySuggestStreams=Sn.prototype.trySuggestStreams,Sn.prototype.segmentDownloaded=Sn.prototype.segmentDownloaded,Sn.prototype.disable=Sn.prototype.disable,Sn.prototype.enable=Sn.prototype.enable,Sn.prototype.chooseVariant=Sn.prototype.chooseVariant,Sn.prototype.init=Sn.prototype.init,Sn.prototype.release=Sn.prototype.release,Sn.prototype.stop=Sn.prototype.stop;var SQ=1;function y3(e,n){var s=bo();this.l=e.maxAttempts==null?s.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?s.baseDelay:e.baseDelay,this.u=e.fuzzFactor==null?s.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?s.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=n===void 0?!1:n)&&(this.g=1)}function x3(e){var n,s;return X(function(a){if(a.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new oe(2,7,1010);return n=e.g,e.g++,n==0?a.return():(s=e.h*(1+(Math.random()*2-1)*e.u),O(a,new Promise(function(u){new Ke(u).Y(s/1e3)}),2))}e.h*=e.m,re(a)})}function bo(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function en(){var e,n,s=new Promise(function(a,u){e=a,n=u});return s.resolve=e,s.reject=n,s}en.prototype.resolve=function(){},en.prototype.reject=function(){};function Mn(e,n){this.promise=e,this.i=n,this.g=null}function Ru(e){return new Mn(Promise.reject(e),function(){return Promise.resolve()})}function Eb(){var e=Promise.reject(new oe(2,7,7001));return e.catch(function(){}),new Mn(e,function(){return Promise.resolve()})}function zh(e){return new Mn(Promise.resolve(e),function(){return Promise.resolve()})}function T3(e){return new Mn(e,function(){return e.catch(function(){})})}Mn.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function S3(e){return new Mn(Promise.all(e.map(function(n){return n.promise})),function(){return Promise.all(e.map(function(n){return n.abort()}))})}Mn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Mn.prototype.cb=function(e,n){function s(g){return function(y){if(u.g&&g)f.reject(p);else{var w=g?e:n;w?a=wQ(w,y,f):(g?f.resolve:f.reject)(y)}}}function a(){return f.reject(p),u.abort()}var u=this,f=new en;f.catch(function(){});var p=new oe(2,7,7001);return this.promise.then(s(!0),s(!1)),new Mn(f,function(){return a()})};function wQ(e,n,s){try{var a=e(n);return a&&a.promise&&a.abort?(s.resolve(a.promise),function(){return a.abort()}):(s.resolve(a),function(){return Promise.resolve(a).then(function(){},function(){})})}catch(u){return s.reject(u),function(){return Promise.resolve()}}}T.Object.defineProperties(Mn.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),xe("shaka.util.AbortableOperation",Mn),Mn.prototype.chain=Mn.prototype.cb,Mn.prototype.finally=Mn.prototype.finally,Mn.all=S3,Mn.prototype.abort=Mn.prototype.abort,Mn.notAbortable=T3,Mn.completed=zh,Mn.aborted=Eb,Mn.failed=Ru;function Wh(){this.g=[]}function md(e,n){e.g.push(n.finally(function(){wo(e.g,n)}))}Wh.prototype.destroy=function(){for(var e=[],n=C(this.g),s=n.next();!s.done;s=n.next())s=s.value,s.promise.catch(function(){}),e.push(s.abort());return this.g=[],Promise.all(e)};function pn(e,n,s,a,u,f,p){Tt.call(this),this.i=null,this.j=!1,this.A=new Wh,this.g=new Set,this.h=new Set,this.u=e||null,this.m=n||null,this.C=s||null,this.D=a||null,this.F=u||null,this.H=f||null,this.G=p||null,this.l=new Map}V(pn,Tt),d=pn.prototype,d.configure=function(e){this.i=e};function El(e,n,s,a){a=a===void 0?!1:a,s=s||I3;var u=Gy.get(e);(!u||s>=u.priority)&&Gy.set(e,{priority:s,Zf:n,$l:a})}function w3(e,n){for(var s=C(e.g),a=s.next();!a.done;a=s.next())n.g.add(a.value);for(e=C(e.h),s=e.next();!s.done;s=e.next())n.h.add(s.value)}d.dm=function(e){this.g.add(e)},d.Dm=function(e){this.g.delete(e)},d.yk=function(){this.g.clear()},d.fm=function(e){this.h.add(e)},d.Em=function(e){this.h.delete(e)},d.zk=function(){this.h.clear()},d.Ti=function(){this.l.clear()};function Kn(e,n,s){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:n,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:s===void 0?null:s}}d.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),Tt.prototype.release.call(this),this.A.destroy()},d.request=function(e,n,s){var a=this,u=new A3;if(this.j){var f=Promise.reject(new oe(2,7,7001));return f.catch(function(){}),new Vy(f,function(){return Promise.resolve()},u)}n.method=n.method||"GET",n.headers=n.headers||{},n.retryParameters=n.retryParameters?Eo(n.retryParameters):bo(),n.uris=Eo(n.uris),f=EQ(this,e,n,s);var p=f.cb(function(){return E3(a,e,n,s,new y3(n.retryParameters,!1),0,null,u)}),g=p.cb(function(L){return bQ(a,e,L,s)}),y=Date.now(),w=0;f.promise.then(function(){w=Date.now()-y},function(){});var b=0;p.promise.then(function(){b=Date.now()},function(){});var I=g.cb(function(L){var j=Date.now()-b,U=L.response;return U.timeMs+=w,U.timeMs+=j,L.El||!a.u||U.fromCache||n.method=="HEAD"||e!=ys||a.u(U.timeMs,U.data.byteLength,b3(s),n,s),a.G&&a.G(e,U,s),U},function(L){throw L&&(L.severity=2),L});return f=new Vy(I.promise,function(){return I.abort()},u),md(this.A,f),f};function EQ(e,n,s,a){function u(g){f=f.cb(function(){return s.body&&(s.body=vr(s.body)),g(n,s,a)})}var f=zh(void 0);e.F&&u(e.F),e=C(e.g);for(var p=e.next();!p.done;p=e.next())u(p.value);return f.cb(void 0,function(g){throw g instanceof oe&&g.code==7001?g:new oe(2,1,1006,g)})}function E3(e,n,s,a,u,f,p,g){e.i.forceHTTP&&(s.uris[f]=s.uris[f].replace("https://","http://")),e.i.forceHTTPS&&(s.uris[f]=s.uris[f].replace("http://","https://")),f>0&&e.H&&e.H(n,a,s.uris[f],s.uris[f-1]);var y=new Cn(s.uris[f]),w=y.qc,b=!1;w||(w=location.protocol,w=w.slice(0,-1),qo(y,w),s.uris[f]=y.toString()),w=w.toLowerCase();var I=(w=Gy.get(w))?w.Zf:null;if(!I)return Ru(new oe(2,1,1e3,y));var L=w.$l;(y=e.l.get(y.Ib))&&(s.headers["common-access-token"]=y);var j=null,U=null,F=!1,B=!1,q;return T3(x3(u)).cb(function(){if(e.j)return Eb();q=Date.now();var G=0;s.requestStartTime=Date.now();var z=I(s.uris[f],s,n,function(Y,ne,Z){j&&j.stop(),U&&U.Y(ie/1e3),e.u&&n==ys&&(G++,s.packetNumber=G,e.u(Y,ne,b3(a),s,a),b=!0,g.g=Z)},function(Y){B=!0,s.timeToFirstByte=Date.now()-s.requestStartTime,e.m&&e.m(Y,s,n)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!L)return z;var J=s.retryParameters.connectionTimeout;J&&(j=new Ke(function(){F=!0,z.abort()}),j.Y(J/1e3));var ie=s.retryParameters.stallTimeout;return ie&&(U=new Ke(function(){F=!0,z.abort()})),z}).cb(function(G){j&&j.stop(),U&&U.stop(),G.timeMs==null&&(G.timeMs=Date.now()-q);var z=G.headers["common-access-token"];if(z){var J=new Cn(G.uri);e.l.set(J.Ib,z)}return z={response:G,El:b},!B&&e.m&&e.m(G.headers,s,n),e.C&&e.C(s,G),z},function(G){if(j&&j.stop(),U&&U.stop(),e.D){var z=null,J=0;G instanceof oe&&(z=G,G.code==1001&&(J=G.data[1])),e.D(s,z,J,F)}if(e.j)return Eb();if(F&&(G=new oe(1,1,1003,s.uris[f],n)),G instanceof oe){if(G.code==7001)throw G;if(G.code==1010)throw p;if(G.severity==1){if(z=new Map().set("error",G),z=new _e("retry",z),z.cancelable=!0,e.dispatchEvent(z),z.defaultPrevented)throw G;return f=(f+1)%s.uris.length,E3(e,n,s,a,u,f,G,g)}}throw G})}function bQ(e,n,s,a){var u=zh(void 0);e=C(e.h);for(var f=e.next(),p={};!f.done;p={Ij:void 0},f=e.next())p.Ij=f.value,u=u.cb(function(g){return function(){var y=s.response;return y.data&&(y.data=vr(y.data)),(0,g.Ij)(n,y,a)}}(p));return u.cb(function(){return s},function(g){var y=2;if(g instanceof oe){if(g.code==7001)throw g;y=g.severity}throw new oe(y,1,1007,g)})}function b3(e){if(e){var n=e.segment;if(e=e.stream,n&&e&&e.fastSwitching&&n.od)return!1}return!0}xe("shaka.net.NetworkingEngine",pn),pn.prototype.request=pn.prototype.request,pn.prototype.destroy=pn.prototype.destroy,pn.makeRequest=Kn,pn.defaultRetryParameters=function(){return bo()},pn.prototype.clearCommonAccessTokenMap=pn.prototype.Ti,pn.prototype.clearAllResponseFilters=pn.prototype.zk,pn.prototype.unregisterResponseFilter=pn.prototype.Em,pn.prototype.registerResponseFilter=pn.prototype.fm,pn.prototype.clearAllRequestFilters=pn.prototype.yk,pn.prototype.unregisterRequestFilter=pn.prototype.Dm,pn.prototype.registerRequestFilter=pn.prototype.dm,pn.unregisterScheme=function(e){Gy.delete(e)},pn.registerScheme=El,pn.prototype.configure=pn.prototype.configure;function A3(){this.g=0}pn.NumBytesRemainingClass=A3;function Vy(e,n,s){Mn.call(this,e,n),this.h=s}V(Vy,Mn),pn.PendingRequest=Vy;var ys=1;pn.RequestType={MANIFEST:0,SEGMENT:ys,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8,CMCD:9},pn.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var I3=3;pn.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:I3};var Gy=new Map;function Yh(e){this.g=!1,this.h=new en,this.i=e}Yh.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function ln(e,n){if(e.g)throw n instanceof oe&&n.code==7003?n:new oe(2,7,7003,n)}function Xh(e){for(var n=new Map,s=C(Object.keys(e)),a=s.next();!a.done;a=s.next())a=a.value,n.set(a,e[a]);return n}function bb(e){var n={};return e.forEach(function(s,a){n[a]=s}),n}function dn(e,n){this.h=Ui(e),this.i=n==C3,this.g=0}d=dn.prototype,d.Qa=function(){return this.g<this.h.byteLength},d.Wa=function(){return this.g},d.getLength=function(){return this.h.byteLength},d.ba=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw bl()}},d.Ia=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw bl()}},d.$=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw bl()}},d.Wh=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw bl()}},d.Vd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),n=this.h.getUint32(this.g+4,!0);else n=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw bl()}if(n>2097151)throw new oe(2,3,3001);return this.g+=8,n*4294967296+e},d.bc=function(e,n){if(this.g+e>this.h.byteLength)throw bl();var s=nt(this.h,this.g,e);return this.g+=e,n?new Uint8Array(s):s},d.skip=function(e){if(this.g+e>this.h.byteLength)throw bl();this.g+=e},d.Jj=function(e){if(this.g<e)throw bl();this.g-=e},d.seek=function(e){if(e<0||e>this.h.byteLength)throw bl();this.g=e},d.pd=function(){for(var e=this.g;this.Qa()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=nt(this.h,e,this.g-e),this.g+=1,yn(e)};function bl(){return new oe(2,3,3e3)}xe("shaka.util.DataViewReader",dn),dn.prototype.readTerminatedString=dn.prototype.pd,dn.prototype.seek=dn.prototype.seek,dn.prototype.rewind=dn.prototype.Jj,dn.prototype.skip=dn.prototype.skip,dn.prototype.readBytes=dn.prototype.bc,dn.prototype.readUint64=dn.prototype.Vd,dn.prototype.readInt32=dn.prototype.Wh,dn.prototype.readUint32=dn.prototype.$,dn.prototype.readUint16=dn.prototype.Ia,dn.prototype.readUint8=dn.prototype.ba,dn.prototype.getLength=dn.prototype.getLength,dn.prototype.getPosition=dn.prototype.Wa,dn.prototype.hasMoreData=dn.prototype.Qa;var C3=1;dn.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:C3};function Jt(){this.i=new Map,this.h=new Map,this.g=!1}d=Jt.prototype,d.box=function(e,n){return e=k3(e),this.i.set(e,AQ),this.h.set(e,n),this},d.X=function(e,n){return e=k3(e),this.i.set(e,_3),this.h.set(e,n),this},d.stop=function(){this.g=!0},d.parse=function(e,n,s){for(e=new dn(e,0),this.g=!1;e.Qa()&&!this.g;)this.Sd(0,e,n,s)},d.Sd=function(e,n,s,a){var u=n.Wa();if(a&&u+8>n.getLength())this.g=!0;else{var f=n.$(),p=n.$(),g=qy(p),y=!1;switch(f){case 0:f=n.getLength()-u;break;case 1:if(a&&n.Wa()+8>n.getLength()){this.g=!0;return}f=n.Vd(),y=!0}var w=this.h.get(p);if(w){var b=null,I=null;if(this.i.get(p)==_3){if(a&&n.Wa()+4>n.getLength()){this.g=!0;return}I=n.$(),b=I>>>24,I&=16777215}p=u+f,s&&p>n.getLength()&&(p=n.getLength()),a&&p>n.getLength()?this.g=!0:(p-=n.Wa(),n=p>0?n.bc(p,!1):new Uint8Array(0),n=new dn(n,0),w({name:g,parser:this,partialOkay:s||!1,stopOnPartial:a||!1,version:b,flags:I,reader:n,size:f,start:u+e,has64BitSize:y}))}else n.skip(Math.min(u+f-n.Wa(),n.getLength()-n.Wa()))}};function ft(e){for(var n=Lu(e);e.reader.Qa()&&!e.parser.g;)e.parser.Sd(e.start+n,e.reader,e.partialOkay,e.stopOnPartial)}function Al(e){for(var n=Lu(e),s=e.reader.$(),a=0;a<s&&(e.parser.Sd(e.start+n,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);a++);}function ts(e){var n=Lu(e);for(e.reader.skip(78);e.reader.Qa()&&!e.parser.g;)e.parser.Sd(e.start+n,e.reader,e.partialOkay,e.stopOnPartial)}function Hy(e){var n=Lu(e);e.reader.skip(8);var s=e.reader.Ia();for(e.reader.skip(6),s==2?e.reader.skip(48):e.reader.skip(12),s==1&&e.reader.skip(16);e.reader.Qa()&&!e.parser.g;)e.parser.Sd(e.start+n,e.reader,e.partialOkay,e.stopOnPartial)}function gd(e,n){return function(s){e(s.reader.bc(s.reader.getLength()-s.reader.Wa(),n))}}function k3(e){var n=0;e=C(e);for(var s=e.next();!s.done;s=e.next())n=n<<8|s.value.charCodeAt(0);return n}function qy(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Lu(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}xe("shaka.util.Mp4Parser",Jt),Jt.headerSize=Lu,Jt.typeToString=qy,Jt.allData=gd,Jt.audioSampleEntry=Hy,Jt.visualSampleEntry=ts,Jt.sampleDescription=Al,Jt.children=ft,Jt.prototype.parseNext=Jt.prototype.Sd,Jt.prototype.parse=Jt.prototype.parse,Jt.prototype.stop=Jt.prototype.stop,Jt.prototype.fullBox=Jt.prototype.X,Jt.prototype.box=Jt.prototype.box;var AQ=0,_3=1;function Ab(e){var n=this;this.g=[],this.h=[],this.data=[],new Jt().box("moov",ft).box("moof",ft).X("pssh",function(s){if(!(s.version>1)){var a=nt(s.reader.h,-12,s.size);if(n.data.push(a),a=s.reader.bc(16,!1),n.g.push(pl(a)),s.version>0){a=s.reader.$();for(var u=0;u<a;u++){var f=s.reader.bc(16,!1);f=pl(f),n.h.push(f)}}}}).parse(e)}function Ky(e,n,s,a){var u=e.length,f=12+n.length+4+u;a>0&&(f+=4+16*s.size);var p=new Uint8Array(f),g=Ui(p),y=0;if(g.setUint32(y,f),y+=4,g.setUint32(y,1886614376),y+=4,a<1?g.setUint32(y,0):g.setUint32(y,16777216),y+=4,p.set(n,y),y+=n.length,a>0)for(g.setUint32(y,s.size),y+=4,n=C(s),s=n.next();!s.done;s=n.next())s=nd(s.value),p.set(s,y),y+=s.length;return g.setUint32(y,u),p.set(e,y+4),p}function zy(e){var n=this;this.F=e,this.l=this.C=null,this.W=this.R=!1,this.J=0,this.g=null,this.u=new Dt,this.i=new Map,this.V=[],this.D=new Map,this.K=!1,this.m=new en,this.h=null,this.A=function(s){s.severity==2&&n.m.reject(s),e.onError(s)},this.Z=new Map,this.aa=new Map,this.L=new Ke(function(){return OQ(n)}),this.P=!1,this.M=[],this.ea=!1,this.G=new Ke(function(){UQ(n)}),this.m.catch(function(){}),this.j=new Yh(function(){return IQ(n)}),this.O=!1,this.H=this.I=null,this.T=function(){return!1}}d=zy.prototype,d.destroy=function(){return this.j.destroy()};function IQ(e){return X(function(n){switch(n.g){case 1:return e.u.release(),e.u=null,e.m.reject(),e.G.stop(),e.G=null,e.L.stop(),e.L=null,O(n,Zm(e),2);case 2:if(!e.l){n.B(3);break}return ce(n,4),O(n,e.l.setMediaKeys(null),6);case 6:se(n,5);break;case 4:ue(n);case 5:e.l=null;case 3:e.g=null,e.C=null,e.D=new Map,e.h=null,e.A=function(){},e.F=null,e.O=!1,e.I=null,re(n)}})}d.configure=function(e,n){this.h=e,n&&(this.T=n),this.G&&this.R&&this.g&&this.G.xa(this.h.updateExpirationTime)};function CQ(e,n,s){return e.W=!0,e.D=new Map,e.P=s,L3(e,n,!1)}function R3(e,n,s,a){a=a===void 0?!0:a,e.D=new Map,s=C(s);for(var u=s.next();!u.done;u=s.next())e.D.set(u.value,{initData:null,initDataType:null});for(s=C(e.h.persistentSessionsMetadata),u=s.next();!u.done;u=s.next())u=u.value,e.D.set(u.sessionId,{initData:u.initData,initDataType:u.initDataType});return e.P=e.D.size>0,L3(e,n,a)}function kQ(e,n,s,a,u,f){var p,g,y,w,b;return X(function(I){return I.g==1?(p=[],f.length&&p.push(f[0].contentType),u.length&&p.push(u[0].contentType),g=function(L){return L=ml(n,L,null),L.licenseServerUri=s,L.serverCertificate=a,L.persistentStateRequired=!0,L.sessionType="persistent-license",L},y=g3(p),y.video&&(w=g(f[0].encryptionScheme||""),y.video.drmInfos.push(w)),y.audio&&(b=g(u[0].encryptionScheme||""),y.audio.drmInfos.push(b)),O(I,Tb([y],!0,e.O,[]),2)):(ln(e.j),I.return(M3(e,[y])))})}function L3(e,n,s){var a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J;return X(function(ie){if(ie.g==1){for($3(e.h.clearKeys,n),a=n.some(function(Y){return!!(Y.video&&Y.video.drmInfos.length||Y.audio&&Y.audio.drmInfos.length)}),u=Xh(e.h.servers),f=Xh(e.h.advanced||{}),!a&&s&&BQ(n,u),p=new WeakSet,g=C(n),y=g.next();!y.done;y=g.next())for(w=y.value,b=B3(w),I=C(b),L=I.next();!L.done;L=I.next())j=L.value,p.has(j)||(p.add(j),VQ(j,u,f,e.h.keySystemsMapping));for(U=function(Y,ne){var Z=[];Y=C(Y);for(var de=Y.next();!de.done;de=Y.next()){de=de.value;var te=de[ne]||f.has(de.keySystem)&&f.get(de.keySystem)[ne]||"",ae;if((ae=te=="")&&(ae=(ae=de.keySystem)?!!ae.match(/^com\.widevine\.alpha/):!1),ae&&(ne=="audioRobustness"?te=[e.h.defaultAudioRobustnessForWidevine]:ne=="videoRobustness"&&(te=[e.h.defaultVideoRobustnessForWidevine])),typeof te=="string")Z.push(de);else if(Array.isArray(te))for(te.length===0&&(te=[""]),te=C(te),ae=te.next();!ae.done;ae=te.next()){var he={};Z.push(Object.assign({},de,(he[ne]=ae.value,he)))}}return Z},F=new WeakSet,B=C(n),q=B.next();!q.done;q=B.next())G=q.value,G.video&&!F.has(G.video)&&(G.video.drmInfos=U(G.video.drmInfos,"videoRobustness"),G.video.drmInfos=U(G.video.drmInfos,"audioRobustness"),F.add(G.video)),G.audio&&!F.has(G.audio)&&(G.audio.drmInfos=U(G.audio.drmInfos,"videoRobustness"),G.audio.drmInfos=U(G.audio.drmInfos,"audioRobustness"),F.add(G.audio));return O(ie,Tb(n,e.P,e.O,e.h.preferredKeySystems),2)}return ln(e.j),z=a||u.size>0,z?(J=M3(e,n),ie.return(a?J:J.catch(function(){}))):(e.R=!0,ie.return(Promise.resolve()))})}function P3(e){var n;return X(function(s){switch(s.g){case 1:if(e.l.mediaKeys)return s.return();if(!e.I){s.B(2);break}return O(s,e.I,3);case 3:return ln(e.j),s.return();case 2:return ce(s,4),e.I=e.l.setMediaKeys(e.C),O(s,e.I,6);case 6:se(s,5);break;case 4:n=ue(s),e.A(new oe(2,6,6003,n.message));case 5:ln(e.j),re(s)}})}function _Q(e,n){return X(function(s){if(s.g==1)return O(s,P3(e),2);Jm(e,n.initDataType,nt(n.initData)),re(s)})}d.Ub=function(e){var n=this,s,a;return X(function(u){if(u.g==1)return n.l===e?u.return():n.C?(n.l=e,n.h.delayLicenseRequestUntilPlayed&&n.u.qa(n.l,"play",function(){for(var f=C(n.M),p=f.next();!p.done;p=f.next())kb(n,p.value);n.ea=!0,n.M=[]}),n.l.remote?(n.u.o(n.l.remote,"connect",function(){return Zm(n)}),n.u.o(n.l.remote,"connecting",function(){return Zm(n)}),n.u.o(n.l.remote,"disconnect",function(){return Zm(n)})):"webkitCurrentPlaybackTargetIsWireless"in n.l&&n.u.o(n.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Zm(n)}),n.H=n.g&&n.g.initData.find(function(f){return f.initData.length>0})||null,s=n.g.keySystem,(a=ht().Oh(s))||!n.H&&n.g.keySystem==="com.apple.fps"&&!n.D.size?u.B(2):O(u,P3(n),2)):(n.u.qa(e,"encrypted",function(){n.A(new oe(2,6,6010))}),u.return());D3(n).catch(function(){}),!a&&(n.H||n.D.size||n.h.parseInbandPsshEnabled)||n.u.o(n.l,"encrypted",function(f){return _Q(n,f)}),re(u)})};function RQ(e){var n,s,a,u,f;return X(function(p){switch(p.g){case 1:if(!e.C||!e.g)return p.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){p.B(2);break}return n=Kn([e.g.serverCertificateUri],e.h.retryParameters),ce(p,3),s=e.F.Gc.request(5,n,{isPreload:e.T()}),O(p,s.promise,5);case 5:a=p.h,e.g.serverCertificate=nt(a.data),se(p,4);break;case 3:throw u=ue(p),new oe(2,6,6017,u);case 4:if(e.j.g)return p.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?p.return():(ce(p,6),O(p,e.C.setServerCertificate(e.g.serverCertificate),8));case 8:se(p,0);break;case 6:throw f=ue(p),new oe(2,6,6004,f.message)}})}function LQ(e,n){var s,a,u;return X(function(f){if(f.g==1)return O(f,j3(e,n,{initData:null,initDataType:null}),2);if(f.g!=3)return s=f.h,s?(a=[],(u=e.i.get(s))&&(u.Qb=new en,a.push(u.Qb)),a.push(s.remove()),O(f,Promise.all(a),3)):f.return();e.i.delete(s),re(f)})}function D3(e){var n,s,a,u,f;return X(function(p){if(p.g==1)return e.D.size?(e.D.forEach(function(g,y){j3(e,y,g)}),O(p,e.m,3)):p.B(2);if(p.g!=2){if(n=e.g&&e.g.keyIds||new Set([]),n.size>0&&FQ(e))return p.return(e.m);e.K=!1,e.m=new en,e.m.catch(function(){})}for(s=(e.g?e.g.initData:[])||[],a=C(s),u=a.next();!u.done;u=a.next())f=u.value,Jm(e,f.initDataType,f.initData);return eg(e)&&e.m.resolve(),p.return(e.m)})}function Jm(e,n,s){if(s.length){try{s=e.h.initDataTransform(s,n,e.g)}catch(p){n=p,p instanceof oe||(n=new oe(2,6,6016,p)),e.A(n);return}if(e.h.ignoreDuplicateInitData){var a=e.i.values();a=C(a);for(var u=a.next();!u.done;u=a.next())if(Rr(s,u.value.initData))return;var f=!1;if(e.D.forEach(function(p){!f&&Rr(s,p.initData)&&(f=!0)}),f)return}e.K=!0,e.i.size>0&&eg(e)&&(e.m.resolve(),e.K=!1,e.m=new en,e.m.catch(function(){})),NQ(e,n,s,e.g.sessionType)}}function N3(e){return e=e.i.keys(),e=Ho(e,function(n){return n.sessionId}),Array.from(e)}d.sh=function(){var e=this,n=this.i.keys();return n=Ho(n,function(s){var a=e.i.get(s);return{sessionId:s.sessionId,sessionType:a.type,initData:a.initData,initDataType:a.initDataType}}),Array.from(n)},d.ue=function(){var e=1/0,n=this.i.keys();n=C(n);for(var s=n.next();!s.done;s=n.next())s=s.value,isNaN(s.expiration)||(e=Math.min(e,s.expiration));return e};function PQ(e){return e.J?e.J:NaN}d.yf=function(){return bb(this.aa)};function M3(e,n){var s,a,u,f,p,g,y;return X(function(w){switch(w.g){case 1:if(s=new Map,a=DQ(e,n,s),!a)throw navigator.requestMediaKeySystemAccess?new oe(2,6,6001):new oe(2,6,6020);ln(e.j),ce(w,2),a.getConfiguration();var b=u=e.h.keySystemsMapping[a.keySystem]||a.keySystem,I=s.get(u),L=[],j=[],U=[],F=[],B=[],q=new Set,G=new Set;$Q(I,L,j,F,U,B,q,G);var z=e.P?"persistent-license":"temporary";for(b={keySystem:b,encryptionScheme:L[0],licenseServerUri:j[0],distinctiveIdentifierRequired:I[0].distinctiveIdentifierRequired,persistentStateRequired:I[0].persistentStateRequired,sessionType:I[0].sessionType||z,audioRobustness:I[0].audioRobustness||"",videoRobustness:I[0].videoRobustness||"",serverCertificate:F[0],serverCertificateUri:U[0],initData:B,keyIds:q,mediaTypes:I[0].mediaTypes},G.size>0&&(b.keySystemUris=G),I=C(I),G=I.next();!G.done;G=I.next())G=G.value,G.distinctiveIdentifierRequired&&(b.distinctiveIdentifierRequired=G.distinctiveIdentifierRequired),G.persistentStateRequired&&(b.persistentStateRequired=G.persistentStateRequired);if(e.g=b,!e.g.licenseServerUri)throw new oe(2,6,6012,e.g.keySystem);return O(w,a.createMediaKeys(),4);case 4:if(f=w.h,ln(e.j),e.C=f,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.C)){w.B(5);break}return ce(w,6),O(w,e.C.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),8);case 8:if(p=w.h,p!="usable")throw new oe(2,6,6018);ln(e.j),se(w,5,2);break;case 6:throw g=ue(w,2),g instanceof oe?g:new oe(2,6,6019,g.message);case 5:return e.R=!0,e.G.xa(e.h.updateExpirationTime),O(w,RQ(e),9);case 9:ln(e.j),se(w,0);break;case 2:throw y=ue(w),ln(e.j,y),e.g=null,y instanceof oe?y:new oe(2,6,6002,y.message)}})}function DQ(e,n,s){for(var a=C(n),u=a.next();!u.done;u=a.next()){u=C(B3(u.value));for(var f=u.next();!f.done;f=u.next())f=f.value,s.has(f.keySystem)||s.set(f.keySystem,[]),s.get(f.keySystem).push(f)}if(s.size==1&&s.has(""))throw new oe(2,6,6e3);a=e.h.preferredKeySystems,a.length||(u=Xh(e.h.servers),u.size==1&&(a=Array.from(u.keys()))),u=C(a);var p=u.next();for(f={};!p.done;f={Dj:void 0},p=u.next()){f.Dj=p.value,p=C(n);for(var g=p.next();!g.done;g=p.next())if(g=g.value.decodingInfos.find(function(I){return function(L){return L.supported&&L.keySystemAccess!=null&&L.keySystemAccess.keySystem==I.Dj}}(f)))return g.keySystemAccess}for(u=C([!0,!1]),f=u.next();!f.done;f=u.next())for(f=f.value,p=C(n),g=p.next();!g.done;g=p.next()){g=C(g.value.decodingInfos);for(var y=g.next();!y.done;y=g.next())if(y=y.value,y.supported&&y.keySystemAccess){var w=y.keySystemAccess.keySystem;if(!a.includes(w)){var b=s.get(w);for(!b&&e.h.keySystemsMapping[w]&&(b=s.get(e.h.keySystemsMapping[w])),w=C(b),b=w.next();!b.done;b=w.next())if(!!b.value.licenseServerUri==f)return y.keySystemAccess}}}return null}function Ib(e){eg(e)&&e.m.resolve()}function O3(e,n){new Ke(function(){n.loaded=!0,Ib(e)}).Y(HQ)}function j3(e,n,s){var a,u,f,p,g,y,w;return X(function(b){switch(b.g){case 1:try{a=e.C.createSession("persistent-license")}catch(I){return u=new oe(2,6,6005,I.message),e.A(u),b.return(Promise.reject(u))}return e.u.o(a,"message",function(I){Cb(e)?e.M.push(I):kb(e,I)}),e.u.o(a,"keystatuseschange",function(I){return U3(e,I)}),f={initData:s.initData,initDataType:s.initDataType,loaded:!1,Rh:1/0,Qb:null,type:"persistent-license"},e.i.set(a,f),ce(b,2),O(b,a.load(n),4);case 4:return p=b.h,ln(e.j),p||(e.i.delete(a),g=e.h.persistentSessionOnlinePlayback?1:2,e.A(new oe(g,6,6013)),f.loaded=!0),O3(e,f),Ib(e),b.return(a);case 2:y=ue(b),ln(e.j,y),e.i.delete(a),w=e.h.persistentSessionOnlinePlayback?1:2,e.A(new oe(w,6,6005,y.message)),f.loaded=!0,Ib(e);case 3:return b.return(Promise.resolve())}})}function NQ(e,n,s,a){try{var u=e.C.createSession(a)}catch(f){e.A(new oe(2,6,6005,f.message));return}e.u.o(u,"message",function(f){Cb(e)?e.M.push(f):kb(e,f)}),e.u.o(u,"keystatuseschange",function(f){return U3(e,f)}),e.i.set(u,{initData:s,initDataType:n,loaded:!1,Rh:1/0,Qb:null,type:a}),e.h.logLicenseExchange&&fl(s),u.generateRequest(n,s).catch(function(f){if(!e.j.g){e.i.delete(u);var p=f.errorCode;if(p&&p.systemCode){var g=p.systemCode;g<0&&(g+=4294967296),g="0x"+g.toString(16)}e.A(new oe(2,6,6006,f.message,f,g))}})}function Cb(e){return e.l?e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.ea:!e.W&&e.h.delayLicenseRequestUntilPlayed}function MQ(e){return X(function(n){return n.g==1?!e.K||Cb(e)?n.B(0):O(n,e.m,3):O(n,Promise.all(e.V.map(function(s){return s.promise})),0)})}function kb(e,n){var s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q;X(function(G){switch(G.g){case 1:if(s=n.target,e.h.logLicenseExchange&&fl(n.message),a=e.i.get(s),u=e.g.licenseServerUri,f=e.h.advanced[e.g.keySystem],n.messageType=="individualization-request"&&f&&f.individualizationServer&&(u=f.individualizationServer),p=Kn([u],e.h.retryParameters),p.body=n.message,p.method="POST",p.licenseRequestType=n.messageType,p.sessionId=s.sessionId,p.drmInfo=e.g,a&&(p.initData=a.initData,p.initDataType=a.initDataType),f&&f.headers)for(g in f.headers)p.headers[g]=f.headers[g];if(e.g.keySystem==="org.w3.clearkey"){var z=p,J=e.g;try{var ie=Aa(z.body);if(ie){var Y=JSON.parse(ie);Y.type||(Y.type=J.sessionType,z.body=To(JSON.stringify(Y)))}}catch{}}if(XE(e.g.keySystem))if(z=Eu(p.body,!0,!0),z.includes("PlayReadyKeyMessage")){for(z=cd(z,"PlayReadyKeyMessage"),J=Xo(z,"HttpHeader"),J=C(J),ie=J.next();!ie.done;ie=J.next())Y=ie.value,ie=Xo(Y,"name")[0],Y=Xo(Y,"value")[0],p.headers[Bn(ie)]=Bn(Y);z=Xo(z,"Challenge")[0],p.body=Bs(Bn(z))}else p.headers["Content-Type"]="text/xml; charset=utf-8";return y=Date.now(),ce(G,2),b=e.F.Gc.request(2,p,{isPreload:e.T()}),e.V.push(b),O(G,b.promise,4);case 4:w=G.h,wo(e.V,b),se(G,3);break;case 2:return I=ue(G),e.j.g||(L={sessionId:s.sessionId,sessionType:a.type,initData:a.initData,initDataType:a.initDataType},j=new oe(2,6,6007,I,L),e.i.size==1?(e.A(j),a&&a.Qb&&a.Qb.reject(j)):(a&&a.Qb&&a.Qb.reject(j),e.i.delete(s),eg(e)&&(e.m.resolve(),e.L.Y(.1)))),G.return();case 3:return e.j.g?G.return():(e.J+=(Date.now()-y)/1e3,e.h.logLicenseExchange&&fl(w.data),ce(G,5),O(G,s.update(w.data),7));case 7:se(G,6);break;case 5:return F=(U=ue(G))&&U.message||String(U),B=new oe(2,6,6008,F),e.A(B),a&&a.Qb&&a.Qb.reject(B),G.return();case 6:if(e.j.g)return G.return();q=new _e("drmsessionupdate"),e.F.onEvent(q),a&&(a.Qb&&a.Qb.resolve(),O3(e,a)),re(G)}})}function U3(e,n){n=n.target;var s=e.i.get(n),a=!1;n.keyStatuses.forEach(function(f,p){if(typeof p=="string"){var g=p;p=f,f=g}if(g=ht(),XE(e.g.keySystem)&&p.byteLength==16&&g.gg()){g=Ui(p);var y=g.getUint32(0,!0),w=g.getUint16(4,!0),b=g.getUint16(6,!0);g.setUint32(0,y,!1),g.setUint16(4,w,!1),g.setUint16(6,b,!1)}f!="status-pending"&&(s.loaded=!0),f=="expired"&&(a=!0),p=pl(p).slice(0,32),e.Z.set(p,f)});var u=n.expiration-Date.now();(u<0||a&&u<1e3)&&s&&!s.Qb&&(e.i.delete(n),F3(n)),eg(e)&&(e.m.resolve(),e.L.Y(qQ))}function OQ(e){var n=e.Z,s=e.aa;s.clear(),n.forEach(function(a,u){return s.set(u,a)}),n=Array.from(s.values()),n.length&&n.every(function(a){return a=="expired"})&&e.A(new oe(2,6,6014)),e.F.Xf(bb(s))}function jQ(){var e,n,s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he;return X(function(Ee){if(Ee.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(l.MediaKeys&&l.navigator&&l.navigator.requestMediaKeySystemAccess&&l.MediaKeySystemAccess&&l.MediaKeySystemAccess.prototype.getConfiguration)){for(n={},s=C(e),a=s.next();!a.done;a=s.next())u=a.value,n[u]=null;return Ee.return(n)}for(f="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),p=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],g=["150","2000","3000"],y={"com.widevine.alpha":p,"com.widevine.alpha.experiment":p,"com.microsoft.playready.recommendation":g},w=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],b=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],I={videoCapabilities:w,audioCapabilities:b,initDataTypes:["cenc","sinf","skd","keyids"]},L=[null,"cenc","cbcs"],j=new Map,U=ht(),F=function(Te,ge,ve){var Ie,Le,at,je,Vt,ct,Xt,At,St,kt,Ut,_t,wt;return X(function(It){switch(It.g){case 1:return ce(It,2),O(It,ge.createMediaKeys(),5);case 5:Ie=It.h;case 4:se(It,3);break;case 2:return ue(It),It.return();case 3:if(at=(Le=ge.getConfiguration().sessionTypes)?Le.includes("persistent-license"):!1,U.vj()&&(at=!1),je=ge.getConfiguration().videoCapabilities,Vt=ge.getConfiguration().audioCapabilities,ct={persistentState:at,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},j.get(Te)?ct=j.get(Te):j.set(Te,ct),(Xt=je[0].encryptionScheme)&&!ct.encryptionSchemes.includes(Xt)&&ct.encryptionSchemes.push(Xt),(At=je[0].robustness)&&!ct.videoRobustnessLevels.includes(At)&&ct.videoRobustnessLevels.push(At),(St=Vt[0].robustness)&&!ct.audioRobustnessLevels.includes(St)&&ct.audioRobustnessLevels.push(St),!(ve&&"getStatusForPolicy"in Ie)){It.B(0);break}kt=C(f),Ut=kt.next();case 7:if(Ut.done){It.B(0);break}if(_t=Ut.value,ct.minHdcpVersions.includes(_t)){It.B(8);break}return O(It,Ie.getStatusForPolicy({minHdcpVersion:_t}),10);case 10:if(wt=It.h,wt=="usable")ct.minHdcpVersions.includes(_t)||ct.minHdcpVersions.push(_t);else{It.B(0);break}case 8:Ut=kt.next(),It.B(7)}})},B=function(Te,ge,ve,Ie,Le){Le=Le===void 0?!1:Le;var at,je,Vt,ct,Xt,At,St,kt,Ut,_t,wt;return X(function(It){switch(It.g){case 1:for(ce(It,2),at=Eo(I),je=C(at.videoCapabilities),Vt=je.next();!Vt.done;Vt=je.next())ct=Vt.value,ct.encryptionScheme=ge,ct.robustness=ve;for(Xt=C(at.audioCapabilities),At=Xt.next();!At.done;At=Xt.next())St=At.value,St.encryptionScheme=ge,St.robustness=Ie;return kt=Eo(at),kt.persistentState="required",kt.sessionTypes=["persistent-license"],Ut=[kt,at],wt=ht(),wt.Oa()=="MOBILE"?O(It,My(5,navigator.requestMediaKeySystemAccess(Te,Ut)),7):O(It,navigator.requestMediaKeySystemAccess(Te,Ut),6);case 6:_t=It.h,It.B(5);break;case 7:_t=It.h;case 5:return O(It,F(Te,_t,Le),8);case 8:se(It,0);break;case 2:ue(It),re(It)}})},q=function(Te){return!(ht().Ja()==="WEBKIT"&&Te==="org.w3.clearkey")},G=[],z=C(e),J=z.next();!J.done;J=z.next())if(ie=J.value,j.set(ie,null),q(ie)){for(Y=!0,ne=C(L),Z=ne.next();!Z.done;Z=ne.next())de=Z.value,G.push(B(ie,de,"","",Y)),Y=!1;for(te=C(y[ie]||[]),ae=te.next();!ae.done;ae=te.next())he=ae.value,G.push(B(ie,null,he,"")),G.push(B(ie,null,"",he))}return O(Ee,Promise.all(G),2)}return Ee.return(bb(j))})}function F3(e){return X(function(n){if(n.g==1)return ce(n,2),O(n,My(GQ,Promise.all([e.close().catch(function(){}),e.closed])),4);if(n.g!=2)return se(n,0);ue(n),re(n)})}function Zm(e){var n;return X(function(s){return n=Array.from(e.i.entries()),e.i.clear(),O(s,Promise.all(n.map(function(a){a=C(a);var u=a.next().value,f=a.next().value;return X(function(p){if(p.g==1)return ce(p,2),e.W||e.D.has(u.sessionId)||f.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?O(p,F3(u),5):O(p,u.remove(),5);if(p.g!=2)return se(p,0);ue(p),re(p)})})),0)})}function B3(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function UQ(e){e.i.forEach(function(n,s){var a=n.Rh,u=s.expiration;isNaN(u)&&(u=1/0),u!=a&&(e.F.onExpirationUpdated(s.sessionId,u),n.Rh=u)})}function eg(e){return e=e.i.values(),dl(e,function(n){return n.loaded})}function FQ(e){for(var n=C(e.g&&e.g.keyIds||new Set([])),s=n.next();!s.done;s=n.next())if(e.Z.get(s.value)!=="usable")return!1;return!0}function BQ(e,n){var s=[];for(n.forEach(function(a,u){s.push({keySystem:u,licenseServerUri:a,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=C(e),n=e.next();!n.done;n=e.next())n=n.value,n.video&&(n.video.drmInfos=s),n.audio&&(n.audio.drmInfos=s)}function $Q(e,n,s,a,u,f,p,g){var y=[];e=C(e);for(var w=e.next(),b={};!w.done;b={Ua:void 0},w=e.next()){if(b.Ua=w.value,n.includes(b.Ua.encryptionScheme)||n.push(b.Ua.encryptionScheme),b.Ua.keySystem=="org.w3.clearkey"&&b.Ua.licenseServerUri.startsWith("data:application/json;base64,")?y.includes(b.Ua.licenseServerUri)||y.push(b.Ua.licenseServerUri):s.includes(b.Ua.licenseServerUri)||s.push(b.Ua.licenseServerUri),u.includes(b.Ua.serverCertificateUri)||u.push(b.Ua.serverCertificateUri),b.Ua.serverCertificate&&(a.some(function(j){return function(U){return Rr(U,j.Ua.serverCertificate)}}(b))||a.push(b.Ua.serverCertificate)),b.Ua.initData){w=C(b.Ua.initData);for(var I=w.next(),L={};!I.done;L={Hh:void 0},I=w.next())L.Hh=I.value,f.some(function(j){return function(U){var F=j.Hh;return U.keyId&&U.keyId==F.keyId?!0:U.initDataType==F.initDataType&&Rr(U.initData,F.initData)}}(L))||f.push(L.Hh)}if(b.Ua.keyIds)for(w=C(b.Ua.keyIds),I=w.next();!I.done;I=w.next())p.add(I.value);if(b.Ua.keySystemUris&&g)for(b=C(b.Ua.keySystemUris),w=b.next();!w.done;w=b.next())g.add(w.value)}if(y.length==1)s.push(y[0]);else if(y.length>0){for(n=[],y=C(y),a=y.next();!a.done;a=y.next())a=l.atob(a.value.split("data:application/json;base64,").pop()),a=JSON.parse(a),n.push.apply(n,K(a.keys));y=JSON.stringify({keys:n}),s.push("data:application/json;base64,"+l.btoa(y))}}function VQ(e,n,s,a){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(n.size&&n.get(u)&&(n=n.get(u),e.licenseServerUri=n),e.keyIds||(e.keyIds=new Set),(s=s.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=s.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=s.persistentStateRequired),e.serverCertificate||(e.serverCertificate=s.serverCertificate),s.sessionType&&(e.sessionType=s.sessionType),e.serverCertificateUri||(e.serverCertificateUri=s.serverCertificateUri)),a[u]&&(e.keySystem=a[u]),l.cast&&l.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function $3(e,n){if(e=Xh(e),e.size!=0){e=bD(e),n=C(n);for(var s=n.next();!s.done;s=n.next())s=s.value,s.video&&(s.video.drmInfos=[e]),s.audio&&(s.audio.drmInfos=[e])}}var GQ=1,HQ=5,qQ=.5;function KQ(){this.g=yd,this.j=new Map().set(yd,2).set(vd,1),this.i=0,this.h=-1}function _b(e,n){var s=e.g!==n;return e.g=n,s&&n===yd&&(e.i=Date.now()),s}var vd=0,yd=1;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Rb(e,n,s){this.h=e,this.i=n,this.g=s}function V3(e,n){return X(function(s){if(s.g==1)return O(s,cQ(e.g,n,e.h.drm.preferredKeySystems,e.h.drm.keySystemsMapping),2);if(e.h.streaming.dontChooseCodecs||o3(n,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes,e.h.preferredTextFormats),!n.variants.some(Qm))throw new oe(2,4,4032);return s.return(H3(e,n))})}function G3(e,n){var s=e.h.restrictions;e=e.i;var a=!1;n=C(n.variants);for(var u=n.next();!u.done;u=n.next()){u=u.value;var f=u.allowedByApplication;u.allowedByApplication=Oy(u,s,e),f!=u.allowedByApplication&&(a=!0)}return a}function H3(e,n){var s=G3(e,n);if(n){var a=e.g?e.g.g:null;if(a&&e.g.C){for(var u=new Set,f=C(n.variants),p=f.next();!p.done;p=f.next())p=p.value,p.audio&&u.add(p.audio),p.video&&u.add(p.video);for(u=C(u),f=u.next();!f.done;f=u.next())q3(e,a.keySystem,f.value)}K3(e,n)}return s}function q3(e,n,s){s=C(s.drmInfos);for(var a=s.next();!a.done;a=s.next())if(a=a.value,a.keySystem==n){for(var u=C(a.initData||[]),f=u.next();!f.done;f=u.next())f=f.value,Jm(e.g,f.initDataType,f.initData);u=e.g,u.g&&u.g.mediaTypes!==a.mediaTypes&&(u.g.mediaTypes=a.mediaTypes)}}function K3(e,n){function s(w){if(w&&!g.has(w)&&(g.add(w),w.keyIds.size)){w=C(w.keyIds);for(var b=w.next();!b.done;b=w.next()){b=b.value;var I=a[u?"00":b];I?z3.includes(I)&&p.add(I):f.add(b)}}}var a=e.g?e.g.yf():{};e=Object.keys(a);var u=e.length&&e[0]=="00";e=!1;var f=new Set,p=new Set,g=new WeakSet;n=C(n.variants);for(var y=n.next();!y.done;y=n.next()){if(y=y.value,!y.allowedByApplication)e=!0;else if(y.allowedByKeySystem)return;s(y.audio),s(y.video)}throw e={hasAppRestrictions:e,missingKeys:Array.from(f),restrictedKeyStatuses:Array.from(p)},new oe(2,4,4012,e)}var z3=["output-restricted","internal-error"];xe("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function ui(e){if(Lb.has(e))return Lb.get(e);var n=l.ManagedMediaSource||l.MediaSource;return n?(n=n.isTypeSupported(e),Lb.set(e,n),n):!1}function W3(){var e=l.ManagedMediaSource||l.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var Lb=new Map;function Wy(e,n){var s=null,a=null,u=null,f=null,p=e.$();return n&1&&(u=e.Vd()),n&2&&(f=e.$()),n&8&&(s=e.$()),n&16&&(a=e.$()),{trackId:p,qe:s,re:a,wk:u,Kj:f}}function Yy(e,n){return n==1?(n=e.$(),e=e.$(),{baseMediaDecodeTime:n*4294967296+e}):{baseMediaDecodeTime:e.$()}}function Xy(e,n){return n==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),n=e.$(),e.skip(4),e=e.Ia(),{timescale:n,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Qy(e,n,s){var a=e.$(),u=[],f=null;s&1&&(f=e.Wh()),s&4&&e.skip(4);for(var p=0;p<a;p++){var g={di:null,sampleSize:null,hg:null};s&256&&(g.di=e.$()),s&512&&(g.sampleSize=e.$()),s&1024&&e.skip(4),s&2048&&(g.hg=n==0?e.$():e.Wh()),u.push(g)}return{Wn:a,ci:u,Yg:f}}function Y3(e){e.skip(6),e.skip(2),e.skip(8);var n=e.Ia();return e.skip(2),e.skip(2),e.skip(2),e=e.Ia()+e.Ia()/65536,{channelCount:n,sampleRate:e}}function Pb(e){return e=e.$(),{codec:qy(e)}}function zQ(e){var n=null,s=null,a=e.bc(4,!1),u=String.fromCharCode(a[0]);if(u+=String.fromCharCode(a[1]),u+=String.fromCharCode(a[2]),u+=String.fromCharCode(a[3]),u==="nclx"){switch(e.Ia()){case 1:case 5:case 6:case 7:n="srgb";break;case 9:n="rec2020";break;case 11:case 12:n="p3"}switch(a=e.Ia(),e.Ia(),a){case 1:case 6:case 13:case 14:case 15:s="SDR";break;case 16:s="PQ";break;case 18:s="HLG"}}return{colorGamut:n,Se:s}}function tg(e,n){return n=n===void 0?!1:n,e=e.toString(16).toUpperCase(),n?e:("0"+e).slice(-2)}function ns(e){return(e<10?"0":"")+e}function Qh(e){this.g=e}function Jh(e){for(var n=[],s=C(e.g),a=s.next();!a.done;a=s.next()){var u=n,f=u.push,p=a.value;a=Ct;var g=p.id+1,y=p.stream.width||0,w=p.stream.height||0;p.type=="audio"&&(w=y=0);var b=p.duration*p.timescale,I=Math.floor(b/(Pu+1));switch(b=Math.floor(b%(Pu+1)),g=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(K(xn(g,4)),[0,0,0,0],K(xn(I,4)),K(xn(b,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],K(xn(y,2)),[0,0],K(xn(w,2)),[0,0])),g=Ct("tkhd",g),y=Ct,I=p.duration*p.timescale,w=Math.floor(I/(Pu+1)),I=Math.floor(I%(Pu+1)),b=p.stream.language,b=b.charCodeAt(0)-96<<10|b.charCodeAt(1)-96<<5|b.charCodeAt(2)-96,w=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(K(xn(p.timescale,4)),K(xn(w,4)),K(xn(I,4)),K(xn(b,2)),[0,0])),w=Ct("mdhd",w),I=p,b=new Uint8Array([]),I.type){case"video":b=YQ.value();break;case"audio":b=XQ.value()}I=Ct("hdlr",b);e:{switch(p.type){case"video":p=Ct("minf",Ct("vmhd",tJ.value()),tN.value(),X3(p));break e;case"audio":p=Ct("minf",Ct("smhd",nJ.value()),tN.value(),X3(p));break e}p=new Uint8Array([])}p=y("mdia",w,I,p),a=a("trak",g,p),f.call(u,a)}for(n=Hn.apply(Wr,K(n)),f=e.g[0],s=Ct,a=f.duration*f.timescale,u=Math.floor(a/(Pu+1)),a=Math.floor(a%(Pu+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(K(xn(f.timescale,4)),K(xn(u,4)),K(xn(a,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=Ct("mvhd",u),a=[],e=C(e.g),y=e.next();!y.done;y=e.next())p=a,g=p.push,y=new Uint8Array([0,0,0,0].concat(K(xn(y.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),y=Ct("trex",y),g.call(p,y);if(e=Hn.apply(Wr,K(a)),e=Ct("mvex",e),a=[],f.encrypted){for(f=C(f.stream.drmInfos),p=f.next();!p.done;p=f.next())if(p=p.value,p.initData)for(p=C(p.initData),g=p.next();!g.done;g=p.next())a.push(g.value.initData);f=Hn.apply(Wr,K(a))}else f=new Uint8Array([]);return e=s("moov",u,n,e,f),n=iJ.value(),s=new Uint8Array(n.byteLength+e.byteLength),s.set(n),s.set(e,n.byteLength),s}function X3(e){var n=Ct,s="aac";e.codecs.includes("mp3")?s="mp3":e.codecs.includes("ac-3")?s=ht().Le()?"ec-3":"ac-3":e.codecs.includes("ec-3")?s="ec-3":e.codecs.includes("opus")&&(s="opus");var a=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(s=e.stream.width||0,a=e.stream.height||0,e.Ya.byteLength>0)var u=Ct("avcC",e.Ya);else{u=Ct;for(var f=7,p=[],g=[],y=0,w=0,b=0,I=0;I<e.Gb.length;I++){var L=J3(e.Gb[I]);switch(L[0]&31){case 7:p.push(L),f+=L.length+2;break;case 8:g.push(L),f+=L.length+2}}for(p.length>0&&(y=p[0][1],b=p[0][2],w=p[0][3]),f=new Uint8Array(f),I=0,f[I++]=1,f[I++]=y,f[I++]=b,f[I++]=w,f[I++]=255,f[I++]=224|p.length,y=0;y<p.length;y++)f[I++]=(p[y].length&65280)>>8,f[I++]=p[y].length&255,f.set(p[y],I),I+=p[y].length;for(f[I++]=g.length,p=0;p<g.length;p++)f[I++]=(g[p].length&65280)>>8,f[I++]=g[p].length&255,f.set(g[p],I),I+=g[p].length;u=u("avcC",f)}s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(K(xn(s,2)),K(xn(a,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),a="avc1",g=Q3(e),p=new Uint8Array([]),e.encrypted&&(p=xd(e.stream,e.codecs),a="encv"),a=Ct(a,s,u,g,p)}else e.codecs.includes("hvc1")&&(a=e.stream.width||0,u=e.stream.height||0,s=new Uint8Array([]),e.Ya.byteLength>0&&(s=Ct("hvcC",e.Ya)),a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(K(xn(a,2)),K(xn(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",g=Q3(e),p=new Uint8Array([]),e.encrypted&&(p=xd(e.stream,e.codecs),u="encv"),a=Ct(u,a,s,g,p));break;case"audio":s=="mp3"?e=Ct(".mp3",ng(e)):s=="ac-3"?(s=Ct("dac3",e.Ma),a="ac-3",u=new Uint8Array([]),e.encrypted&&(u=xd(e.stream,e.codecs),a="enca"),e=Ct(a,ng(e),s,u)):s=="ec-3"?(s=Ct("dec3",e.Ma),a="ec-3",u=new Uint8Array([]),e.encrypted&&(u=xd(e.stream,e.codecs),a="enca"),e=Ct(a,ng(e),s,u)):s=="opus"?(s=Ct("dOps",e.Ma),a="Opus",u=new Uint8Array([]),e.encrypted&&(u=xd(e.stream,e.codecs),a="enca"),e=Ct(a,ng(e),s,u)):(e.Ma.byteLength>0?s=Ct("esds",e.Ma):(s=Ct,a=e.id+1,u=e.stream.channelsCount||2,p=e.stream.audioSamplingRate||44100,y=Oh("audio",e.codecs.split(",")),w={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},g=w[p],(y==="mp4a.40.5"||y==="mp4a.40.29")&&(g=w[p*2]),p=parseInt(y.split(".").pop(),10),a=new Uint8Array([0,0,0,0,3,25].concat(K(xn(a,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,p<<3|g>>>1,g<<7|u<<3,6,1,2])),s=s("esds",a)),a="mp4a",u=new Uint8Array([]),e.encrypted&&(u=xd(e.stream,e.codecs),a="enca"),e=Ct(a,ng(e),s,u)),a=e}return e=Ct("stsd",rJ.value(),a),n("stbl",e,Ct("stts",QQ.value()),Ct("stsc",JQ.value()),Ct("stsz",eJ.value()),Ct("stco",ZQ.value()))}function Q3(e){if(!e.fb&&!e.gb)return new Uint8Array([]);var n=e.gb;return e=new Uint8Array([].concat(K(xn(e.fb,4)),K(xn(n,4)))),Ct("pasp",e)}function ng(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(K(xn(e.stream.audioSamplingRate||44100,2)),[0,0]))}function xd(e,n){var s=Ct;n=new Uint8Array([].concat(K(xn(Z3(n.split(".")[0]),4)))),n=Ct("frma",n);var a="cenc",u=e.drmInfos[0];u&&u.encryptionScheme&&(a=u.encryptionScheme),a=new Uint8Array([0,0,0,0].concat(K(xn(Z3(a),4)),[0,1,0,0])),a=Ct("schm",a),u=Ct;var f=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=C(e.drmInfos);for(var p=e.next();!p.done;p=e.next())if((p=p.value)&&p.keyIds&&p.keyIds.size){p=C(p.keyIds);for(var g=p.next();!g.done;g=p.next())f=J3(g.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),f=Ct("tenc",e,f),s("sinf",n,a,u("schi",f))}function rg(e){var n=[];e=C(e.g);for(var s=e.next();!s.done;s=e.next()){s=s.value;var a=n.push,u=a.apply,f=Ct,p=new Uint8Array([0,0,0,0].concat(K(xn(s.data?s.data.sequenceNumber:0,4))));p=Ct("mfhd",p);var g,y=s.data?s.data.Eb:[],w=new Uint8Array(4+y.length);for(g=0;g<y.length;g++){var b=y[g].flags;w[g+4]=b.rb<<4|b.ub<<2|b.sb}y=Ct("sdtp",w);var I=y.length+32+20+8+16+8+8;w=Ct,g=new Uint8Array([0,0,0,58].concat(K(xn(s.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),g=Ct("tfhd",g),b=s.data?s.data.baseMediaDecodeTime:0;var L=Math.floor(b%(Pu+1));b=new Uint8Array([1,0,0,0].concat(K(xn(Math.floor(b/(Pu+1)),4)),K(xn(L,4)))),b=Ct("tfdt",b);var j=I;I=s.data?s.data.Eb:[],L=I.length;var U=12+16*L,F=new Uint8Array(U);for(j+=8+U,F.set([s.type==="video"?1:0,0,15,1].concat(K(xn(L,4)),K(xn(j,4))),0),j=0;j<L;j++){var B=I[j];U=xn(B.duration,4);var q=xn(B.size,4),G=B.flags;B=xn(B.Ab,4),F.set([].concat(K(U),K(q),[G.Cb<<2|G.rb,G.ub<<6|G.sb<<4|G.Db,G.qb&61440,G.qb&15],K(B)),12+16*j)}I=Ct("trun",F),y=w("traf",g,b,I,y),f=f("moof",p,y),u.call(a,n,[f,WQ(s)])}return Hn.apply(Wr,K(n))}function WQ(e){return e=(e.data?e.data.Eb:[]).map(function(n){return n.data}),e=Hn.apply(Wr,K(e)),Ct("mdat",e)}function xn(e,n){var s=[];for(--n;n>=0;n--)s.push(e>>8*n&255);return s}function J3(e){for(var n=new Uint8Array(e.length/2),s=0;s<e.length/2;s+=1)n[s]=parseInt(String(e[s*2]+e[s*2+1]),16);return n}function Z3(e){for(var n=0,s=0;s<e.length;s+=1)n|=e.charCodeAt(s)<<(e.length-s-1)*8;return n}function Ct(e){var n=Pe.apply(1,arguments),s=eN.get(e);s||(s=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],eN.set(e,s));for(var a=8,u=n.length-1;u>=0;u--)a+=n[u].byteLength;for(u=new Uint8Array(a),u[0]=a>>24&255,u[1]=a>>16&255,u[2]=a>>8&255,u[3]=a&255,u.set(s,4),s=0,a=8;s<n.length;s++)u.set(n[s],a),a+=n[s].byteLength;return u}var Pu=4294967295,eN=new Map,YQ=new gn(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),XQ=new gn(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),QQ=new gn(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),JQ=new gn(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),ZQ=new gn(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),eJ=new gn(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),tJ=new gn(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),nJ=new gn(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),rJ=new gn(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),iJ=new gn(function(){var e=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);return Ct("ftyp",e,s,e,n)}),tN=new gn(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=Ct("dref",e),Ct("dinf",e)});function sJ(e){e=nt(e);var n=null;return new Jt().box("moov",ft).box("trak",ft).box("mdia",ft).box("minf",ft).box("stbl",ft).X("stsd",Al).box("enca",function(s){return n=s.reader.h,Hy(s)}).box("sinf",ft).box("frma",function(s){s.parser.stop(),Pb(s.reader).codec==="ec-3"&&n&&n.getUint16(16)!==2&&n.setUint16(16,2)}).parse(e),e}function oJ(e,n,s){function a(j){I.push({box:j,xj:1701733217})}function u(j){I.push({box:j,xj:1701733238})}function f(j){y=!0,j.parser.stop()}function p(j){b.push(j),ft(j)}var g=n=nt(n),y=!1,w,b=[],I=[];if(new Jt().box("moov",p).box("trak",p).box("mdia",p).box("minf",p).box("stbl",p).X("stsd",function(j){w=j,b.push(j),Al(j)}).X("encv",f).X("enca",f).X("dvav",u).X("dva1",u).X("dvh1",u).X("dvhe",u).X("dvc1",u).X("dvi1",u).X("hev1",u).X("hvc1",u).X("avc1",u).X("avc3",u).X("ac-3",a).X("ec-3",a).X("ac-4",a).X("Opus",a).X("fLaC",a).X("mp4a",a).parse(n),y)return n;if(I.length==0||!w)throw pl(n),new oe(2,3,3019,s);I.reverse(),s=C(I);for(var L=s.next();!L.done;L=s.next())L=L.value,g=uJ(e,g,w,L.box,b,L.xj);return ht().$h()?(e=new Uint8Array(n.byteLength+g.byteLength),e.set(g),e.set(n,g.byteLength),e):g}function aJ(e){e=nt(e);var n=[];new Jt().box("mdat",function(p){n.push(p)}).parse(e);for(var s=[],a=0;a<n.length;a++){var u=n[a-1],f=n[a];s.push(lJ(e.subarray(u?u.start+u.size:0,f.start+f.size)))}return Hn.apply(Wr,K(s))}function lJ(e){function n(I){p.push(I),ft(I)}var s,a,u,f,p=[];if(new Jt().box("moof",n).box("traf",n).X("tfhd",function(I){s=I,u=Wy(I.reader,I.flags)}).X("trun",function(I){a=I,f=Qy(I.reader,I.version,I.flags)}).parse(e),u&&u.Kj!==2){var g=s.start+Lu(s)+4+(u.wk!==null?8:0),y=Ui(e);if(u.Kj!==null)y.setUint32(g,2);else{Jy(e,s.start,s.size+4);var w=y.getUint32(s.start+8);y.setUint32(s.start+8,w|2),f&&f.Yg!==null&&y.setInt32(a.start+Lu(a)+4,f.Yg+4),w=e.subarray(0,g),y=e.subarray(g),e=new Uint8Array(e.byteLength+4),e.set(w),w=[];for(var b=3;b>=0;b--)w.push(2>>8*b&255);for(e.set(new Uint8Array(w),g),e.set(y,g+4),g=C(p),y=g.next();!y.done;y=g.next())y=y.value,Jy(e,y.start,y.size+4)}}return e}function uJ(e,n,s,a,u,f){var p=xd(e,a.name),g=n.subarray(a.start,a.start+a.size);for(e=new Uint8Array(a.size+p.byteLength),e.set(g,0),Ui(e).setUint32(4,f),e.set(p,a.size),Jy(e,0,e.byteLength),f=new Uint8Array(n.byteLength+e.byteLength),a=ht().Gf()?a.start:a.start+a.size,p=n.subarray(a),f.set(n.subarray(0,a)),f.set(e,a),f.set(p,a+e.byteLength),n=C(u),u=n.next();!u.done;u=n.next())u=u.value,Jy(f,u.start,u.size+e.byteLength);return e=Ui(f,s.start),s=Lu(s),n=e.getUint32(s),e.setUint32(s,n+1),f}function Jy(e,n,s){e=Ui(e,n),n=e.getUint32(0),n!=0&&(n==1?(e.setUint32(8,s>>32),e.setUint32(12,s&4294967295)):e.setUint32(0,s))}function cJ(e){function n(u){a.push({start:u.start,size:u.size}),ft(u)}var s=nt(e),a=[];return new Jt().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).box("stsd",function(u){a.push({start:u.start,size:u.size});for(var f=Ui(s,u.start),p=0;p<u.size-3;p++){var g=f.getUint32(p);g==1633889587?f.setUint32(p,1700998451):g==1684103987&&f.setUint32(p,1684366131)}}).parse(s),s}function $i(e,n,s,a,u,f,p,g){this.S=e,this.startByte=n,this.endByte=s,this.Pd=a===void 0?null:a,this.timescale=u===void 0?null:u,this.h=f===void 0?null:f,this.aesKey=p===void 0?null:p,this.g=this.mimeType=this.codecs=null,this.encrypted=g===void 0?!1:g}$i.prototype.Uc=function(){return this.startByte},$i.prototype.Sc=function(){return this.endByte},$i.prototype.Ne=function(e){this.h=e},$i.prototype.jc=function(){return this.h};function ig(e,n){return e===n?!0:e&&n?e.Uc()==n.Uc()&&e.Sc()==n.Sc()&&gl(e.S().sort(),n.S().sort())&&Rr(e.jc(),n.jc()):e==n}xe("shaka.media.InitSegmentReference",$i),$i.prototype.getEndByte=$i.prototype.Sc,$i.prototype.getStartByte=$i.prototype.Uc;function Xe(e,n,s,a,u,f,p,g,y,w,b,I,L,j,U,F){for(w=w===void 0?[]:w,j=j===void 0?Il:j,this.startTime=e,this.j=this.endTime=n,this.D=s,this.startByte=a,this.endByte=u,this.ka=f,this.timestampOffset=p,this.appendWindowStart=g,this.appendWindowEnd=y,this.g=w,this.tilesLayout=b===void 0?"":b,this.C=I===void 0?null:I,this.h=L===void 0?null:L,this.status=j,this.preload=!1,this.l=!0,this.u=!1,this.aesKey=U===void 0?null:U,this.thumbnailSprite=null,this.i=-1,this.m=F===void 0?!1:F,this.Ce=this.od=!1,e=C(this.g),n=e.next();!n.done;n=e.next())n.value.tj();this.m&&this.g.length&&this.g[this.g.length-1].sj(),this.A=this.bandwidth=this.mimeType=this.codecs=null,this.F=!1}d=Xe.prototype,d.S=function(){return this.D()},d.getStartTime=function(){return this.startTime},d.Sk=function(){return this.endTime},d.Uc=function(){return this.startByte},d.Sc=function(){return this.endByte};function Db(e){if(e.endByte)return e.endByte+1-e.startByte;if(e.bandwidth){var n=e.bandwidth*(e.endTime-e.startTime);if(!isNaN(n)&&n>0)return n}if(e.g.length>0&&e.m)for(e=C(e.g),e=e.next();!e.done;e=e.next()){Db(e.value);break}return null}d.xl=function(){return this.tilesLayout},d.wl=function(){return this.C},d.Vc=function(){return this.status},d.Sl=function(){this.status=rN},d.Nh=function(){this.preload=!0},d.isPreload=function(){return this.preload},d.Od=function(){this.l=!1},d.Il=function(){return this.l},d.tj=function(){this.od=!0},d.Kl=function(){return this.od},d.sj=function(){this.Ce=!0},d.Jl=function(){return this.Ce},d.rj=function(){this.u=!0},d.Fl=function(){return this.u},d.og=function(e){this.thumbnailSprite=e},d.vl=function(){return this.thumbnailSprite},d.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var n=C(this.g),s=n.next();!s.done;s=n.next())s=s.value,s.startTime+=e,s.endTime+=e,s.j+=e},d.wi=function(e){this.h==null?nr("Sync attempted without sync time!"):(e=this.h-e-this.startTime,Math.abs(e)>=.001&&this.offset(e))},d.Ne=function(e,n){this.A=e,this.F=n===void 0?!1:n},d.jc=function(e){var n=this.A;return(e===void 0||e)&&this.F&&(this.A=null),n};function nN(e,n){e.ka=n,e=C(e.g);for(var s=e.next();!s.done;s=e.next())nN(s.value,n)}xe("shaka.media.SegmentReference",Xe),Xe.prototype.getSegmentData=Xe.prototype.jc,Xe.prototype.setSegmentData=Xe.prototype.Ne,Xe.prototype.syncAgainst=Xe.prototype.wi,Xe.prototype.offset=Xe.prototype.offset,Xe.prototype.getThumbnailSprite=Xe.prototype.vl,Xe.prototype.setThumbnailSprite=Xe.prototype.og,Xe.prototype.hasByterangeOptimization=Xe.prototype.Fl,Xe.prototype.markAsByterangeOptimization=Xe.prototype.rj,Xe.prototype.isLastPartial=Xe.prototype.Jl,Xe.prototype.markAsLastPartial=Xe.prototype.sj,Xe.prototype.isPartial=Xe.prototype.Kl,Xe.prototype.markAsPartial=Xe.prototype.tj,Xe.prototype.isIndependent=Xe.prototype.Il,Xe.prototype.markAsNonIndependent=Xe.prototype.Od,Xe.prototype.isPreload=Xe.prototype.isPreload,Xe.prototype.markAsPreload=Xe.prototype.Nh,Xe.prototype.markAsUnavailable=Xe.prototype.Sl,Xe.prototype.getStatus=Xe.prototype.Vc,Xe.prototype.getTileDuration=Xe.prototype.wl,Xe.prototype.getTilesLayout=Xe.prototype.xl,Xe.prototype.getEndByte=Xe.prototype.Sc,Xe.prototype.getStartByte=Xe.prototype.Uc,Xe.prototype.getEndTime=Xe.prototype.Sk,Xe.prototype.getStartTime=Xe.prototype.getStartTime,Xe.prototype.getUris=Xe.prototype.S;var Il=0,rN=1;Xe.Status={Jm:Il,Pn:rN,nn:2};function sg(e){return e.length==1&&e.end(0)-e.start(0)<1e-4}function iN(e){return!e||sg(e)?null:e.length==1&&e.start(0)<0?0:e.length?e.start(0):null}function Zy(e){return!e||sg(e)?null:e.length?e.end(e.length-1):null}function Nb(e,n){return!e||!e.length||sg(e)||n>e.end(e.length-1)?!1:n>=e.start(0)}function sN(e,n){if(!e||!e.length||sg(e))return 0;var s=0;e=C(Cl(e));for(var a=e.next();!a.done;a=e.next()){var u=a.value;a=u.start,u=u.end,u>n&&(s+=u-Math.max(a,n))}return s}function dJ(e,n,s){return!e||!e.length||sg(e)?null:(e=Cl(e).findIndex(function(a,u,f){return a.start>n&&(u==0||f[u-1].end-n<=s)}),e>=0?e:null)}function Cl(e){if(!e)return[];for(var n=[],s=0;s<e.length;s++)n.push({start:e.start(s),end:e.end(s)});return n}function Mb(){}function Ne(e){return document.createElement(e)}function oN(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Tn(){var e=document.createElement("button");return e.setAttribute("type","button"),e}function aN(e,n){var s=document.createElement("source");return s.src=e,s.type=n===void 0?"":n,s}function e1(e){for(var n=!1,s=e.getElementsByTagName("source"),a=s.length-1;a>=0;--a)e.removeChild(s[a]),n=!0;return e.src&&(e.removeAttribute("src"),n=!0),n}function hJ(e){return e=e.getElementsByClassName("shaka-overflow-quality-mark"),e.length?e[0]:null}function Ra(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Td(){return Zh||(Ob||(Ob=new Ke(function(){Zh=null})),(Zh=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Zh=document.createElement("video")),Ob.Y(1),Zh)}function fJ(e,n){var s,a,u,f,p;return X(function(g){if(g.g==1)return"fonts"in document&&"FontFace"in l?O(g,document.fonts.ready,2):g.return();if(!("entries"in document.fonts))return g.return();for(s=function(y){y=y.entries();for(var w=[],b=y.next();b.done===!1;)w.push(b.value),b=y.next();return w},a=C(s(document.fonts)),u=a.next();!u.done;u=a.next())if(f=u.value,f.family===e&&f.display==="swap")return g.return();p=new FontFace(e,"url("+n+")",{display:"swap"}),document.fonts.add(p),re(g)})}xe("shaka.util.Dom",Mb),Mb.removeAllChildren=Ra,Mb.clearSourceFromVideo=e1;var Ob=null,Zh=null;/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function jb(){}function lN(e,n){return n+10<=e.length&&e[n]===73&&e[n+1]===68&&e[n+2]===51&&e[n+3]<255&&e[n+4]<255&&e[n+6]<128&&e[n+7]<128&&e[n+8]<128&&e[n+9]<128}function uN(e,n){return n+10<=e.length&&e[n]===51&&e[n+1]===68&&e[n+2]===73&&e[n+3]<255&&e[n+4]<255&&e[n+6]<128&&e[n+7]<128&&e[n+8]<128&&e[n+9]<128}function Ub(e,n){var s=(e[n]&127)<<21;return s|=(e[n+1]&127)<<14,s|=(e[n+2]&127)<<7,s|=e[n+3]&127}function pJ(e){var n={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(e.size<2||e.data[0]!==3)return null;var s=e.data.subarray(1).indexOf(0);if(s===-1)return null;var a=yn(nt(e.data,1,s)),u=e.data[2+s],f=e.data.subarray(3+s).indexOf(0);if(f===-1)return null;var p=yn(nt(e.data,3+s,f)),g;return a==="-->"?g=yn(nt(e.data,4+s+f)):g=vr(e.data.subarray(4+s+f)),n.mimeType=a,n.pictureType=u,n.description=p,n.data=g,n}return e.type==="TXXX"?e.size<2||e.data[0]!==3||(a=e.data.subarray(1).indexOf(0),a===-1)?null:(s=yn(nt(e.data,1,a)),e=yn(nt(e.data,2+a)).replace(/\0*$/,""),n.description=s,n.data=e,n):e.type==="WXXX"?e.size<2||e.data[0]!==3||(a=e.data.subarray(1).indexOf(0),a===-1)?null:(s=yn(nt(e.data,1,a)),e=yn(nt(e.data,2+a)).replace(/\0*$/,""),n.description=s,n.data=e,n):e.type==="PRIV"?e.size<2||(s=e.data.indexOf(0),s===-1)?null:(s=yn(nt(e.data,0,s)),n.description=s,s=="com.apple.streaming.transportStreamTimestamp"?(s=e.data.subarray(s.length+1),e=s[3]&1,s=(s[4]<<23)+(s[5]<<15)+(s[6]<<7)+s[7],s/=45,e&&(s+=4772185884e-2),n.data=s):(e=vr(e.data.subarray(s.length+1)),n.data=e),n):e.type[0]==="T"?e.size<2||e.data[0]!==3?null:(e=yn(e.data.subarray(1)).replace(/\0*$/,""),n.data=e,n):e.type[0]==="W"?(e=yn(e.data).replace(/\0*$/,""),n.data=e,n):e.data?(n.data=vr(e.data),n):null}function Sd(e){for(var n=0,s=[];lN(e,n);){var a=Ub(e,n+6);for(e[n+5]>>6&1&&(n+=10),n+=10,a=n+a;n+10<a;){var u=e.subarray(n),f=Ub(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:f,data:u.subarray(10,10+f)},(f=pJ(u))&&s.push(f),n+=u.size+10}uN(e,n)&&(n+=10)}return s}function ef(e,n){for(var s=n=n===void 0?0:n,a=0;lN(e,n);)e[n+5]>>6&1&&(a+=10),a+=10,a+=Ub(e,n+6),uN(e,n+10)&&(a+=10),n+=a;return a>0?e.subarray(s,s+a):new Uint8Array([])}xe("shaka.util.Id3Utils",jb),jb.getID3Data=ef,jb.getID3Frames=Sd;function cN(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function kl(e,n){if(this.j=e,n!==void 0&&n){n=new Uint8Array(e.byteLength);for(var s=0,a=0;a<e.byteLength;a++)a>=2&&e[a]==3&&e[a-1]==0&&e[a-2]==0||(n[s]=e[a],s++);this.j=nt(n,0,s)}this.i=this.j.byteLength,this.g=this.h=0}function Fb(e){var n=e.j.byteLength-e.i,s=new Uint8Array(4),a=Math.min(4,e.i);a!==0&&(s.set(e.j.subarray(n,n+a)),e.h=new dn(s,0).$(),e.g=a*8,e.i-=a)}function rs(e,n){if(e.g<=n){n-=e.g;var s=Math.floor(n/8);n-=s*8,e.g-=s,Fb(e)}e.h<<=n,e.g-=n}function bt(e,n){var s=Math.min(e.g,n),a=e.h>>>32-s;return e.g-=s,e.g>0?e.h<<=s:e.i>0&&Fb(e),s=n-s,s>0?a<<s|bt(e,s):a}function Bb(e){var n;for(n=0;n<e.g;++n)if(e.h&2147483648>>>n)return e.h<<=n,e.g-=n,n;return Fb(e),n+Bb(e)}function Fr(e){rs(e,1+Bb(e))}function Fe(e){var n=Bb(e);return bt(e,n+1)-1}function tf(e){return e=Fe(e),1&e?1+e>>>1:-1*(e>>>1)}function ze(e){return bt(e,1)===1}function zt(e){return bt(e,8)}function t1(e,n){for(var s=8,a=8,u=0;u<n;u++)a!==0&&(a=tf(e),a=(s+a+256)%256),s=a===0?s:a}function mJ(e){return zt(e),Fe(e),Fe(e)}xe("shaka.util.ExpGolomb",kl);function un(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.D=this.F=null,this.i=[],this.h=[],this.G=null,this.l=[],this.C=this.H=this.u=this.A=null}d=un.prototype,d.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},d.lg=function(e){this.C!=null&&this.C!=e&&(this.u=this.A=null),this.C=e},d.parse=function(e){if(e.length<564)return this;for(var n=Math.max(0,Vb(e)),s=e.length-(e.length+n)%188,a=!1,u=n;u<s;u+=188)if(e[u]==71){var f=!!(e[u+1]&64),p=((e[u+1]&31)<<8)+e[u+2];if((e[u+3]&48)>>4>1){var g=u+5+e[u+4];if(g==u+188)continue}else g=u+4;switch(p){case 0:f&&(g+=e[g]+1),this.I=(e[g+10]&31)<<8|e[g+11];break;case 17:case 8191:break;case this.I:f&&(g+=e[g]+1),f=e,p={audio:-1,video:-1,Ef:-1,audioCodec:"",videoCodec:""};var y=g+3+((f[g+1]&15)<<8|f[g+2])-4;for(g+=12+((f[g+10]&15)<<8|f[g+11]);g<y;){var w=(f[g+1]&31)<<8|f[g+2],b=(f[g+3]&15)<<8|f[g+4];switch(f[g]){case 6:if(b>0)for(var I=g+5,L=b;L>2;){var j=f[I+1]+2;switch(f[I]){case 5:var U=f.subarray(I+2,I+j);U=yy.value()(U),p.audio==-1&&U==="Opus"?(p.audio=w,p.audioCodec="opus"):p.video==-1&&U==="AV01"&&(p.video=w,p.videoCodec="av1");break;case 106:p.audio==-1&&(p.audio=w,p.audioCodec="ac3");break;case 122:p.audio==-1&&(p.audio=w,p.audioCodec="ec3");break;case 124:p.audio==-1&&(p.audio=w,p.audioCodec="aac");break;case 127:p.audioCodec=="opus"&&(U=null,f[I+2]===128&&(U=f[I+3]),U!=null&&(this.H={channelCount:U&15?U&15:2,xk:U,sampleRate:48e3}))}I+=j,L-=j}break;case 15:p.audio==-1&&(p.audio=w,p.audioCodec="aac");break;case 17:p.audio==-1&&(p.audio=w,p.audioCodec="aac-loas");break;case 21:p.Ef==-1&&(p.Ef=w);break;case 27:p.video==-1&&(p.video=w,p.videoCodec="avc");break;case 3:case 4:p.audio==-1&&(p.audio=w,p.audioCodec="mp3");break;case 36:p.video==-1&&(p.video=w,p.videoCodec="hvc");break;case 129:p.audio==-1&&(p.audio=w,p.audioCodec="ac3");break;case 132:case 135:p.audio==-1&&(p.audio=w,p.audioCodec="ec3")}g+=b+5}f=p,f.video!=-1&&(this.K=f.video,this.m=f.videoCodec),f.audio!=-1&&(this.F=f.audio,this.D=f.audioCodec),f.Ef!=-1&&(this.G=f.Ef),a&&!this.J&&(a=!1,u=n-188),this.J=!0;break;case this.K:g=e.subarray(g,u+188),f?this.j.push([g]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(g);break;case this.F:g=e.subarray(g,u+188),f?this.i.push([g]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(g);break;case this.G:g=e.subarray(g,u+188),f?this.l.push([g]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(g);break;default:a=!0}}return this};function $b(e,n){if((n[0]<<16|n[1]<<8|n[2])!==1)return null;var s={data:new Uint8Array(0),packetLength:n[4]<<8|n[5],pts:null,dts:null,nalus:[]};if(s.packetLength&&s.packetLength>n.byteLength-6)return null;var a=n[7];if(a&192){var u=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2;e.A==null&&(e.A=u),s.pts=hN(u,e.A),e.A=s.pts,s.dts=s.pts,a&64&&(a=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,e.u==null&&(e.u=a),s.dts=s.pts!=u?hN(a,e.u):a),e.u=s.dts}return e=n[8]+9,n.byteLength<=e?null:(s.data=n.subarray(e),s)}d.Zl=function(e){return Nt("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Th(e,{Fe:null,state:null})},d.Th=function(e,n){var s=e.pts?e.pts/9e4:null;e=e.data;var a=e.byteLength,u=1;this.m=="hvc"&&(u=2);var f=n.state||0,p=f,g=0,y=[],w=-1,b=0;for(f==-1&&(w=0,b=this.m=="hvc"?e[0]>>1&63:e[0]&31,f=0,g=1);g<a;){var I=e[g++];f?f===1?f=I?0:2:I?I==1?(I=g-f-1,w>=0?y.push({data:e.subarray(w+u,I),fullData:e.subarray(w,I),type:b,time:s,state:null}):(f=y.length?y[y.length-1]:n.Fe)&&(p&&g<=4-p&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-p),f.fullData=f.fullData.subarray(0,f.fullData.byteLength-p)),I>0&&(I=e.subarray(0,I),f.data=Hn(f.data,I),f.fullData=Hn(f.fullData,I),f.state=0)),g<a?(b=this.m=="hvc"?e[g]>>1&63:e[g]&31,w=g,f=0):f=-1):f=0:f=3:f=I?0:1}return w>=0&&f>=0&&y.push({data:e.subarray(w+u,a),fullData:e.subarray(w,a),type:b,time:s,state:f}),!y.length&&n.Fe&&(s=y.length?y[y.length-1]:n.Fe)&&(s.data=Hn(s.data,e),s.fullData=Hn(s.fullData,e)),n.state=f,y},d.getMetadata=function(){for(var e=[],n=C(this.l),s=n.next();!s.done;s=n.next())s=Hn.apply(Wr,K(s.value)),(s=$b(this,s))&&e.push({cueTime:s.pts?s.pts/9e4:null,data:s.data,frames:Sd(s.data),dts:s.dts,pts:s.pts});return e},d.Bb=function(){if(this.i.length&&!this.h.length)for(var e=C(this.i),n=e.next();!n.done;n=e.next()){var s=Hn.apply(Wr,K(n.value)),a=$b(this,s);n=this.h.length?this.h[this.h.length-1]:null,a&&a.pts!=null&&a.dts!=null&&(!n||n.pts!=a.pts&&n.dts!=a.dts)?this.h.push(a):this.h.length&&(s=a?a.data:s)&&(n=this.h.pop(),n.data=Hn(n.data,s),this.h.push(n))}return this.h},d.Kd=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var n=C(this.j),s=n.next();!s.done;s=n.next()){var a=Hn.apply(Wr,K(s.value)),u=$b(this,a);s=this.g.length?this.g[this.g.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!s||s.pts!=u.pts&&s.dts!=u.dts)?this.g.push(u):this.g.length&&(a=u?u.data:a)&&(s=this.g.pop(),s.data=Hn(s.data,a),this.g.push(s))}if(e){for(n={Fe:null,state:null},s=[],a=C(this.g),u=a.next();!u.done;u=a.next())u=u.value,u.nalus=this.Th(u,n),u.nalus.length&&(s.push(u),n.Fe=u.nalus[u.nalus.length-1]);this.g=s}}return e?this.g:(e=this.g,this.g=[],e)},d.getStartTime=function(e){if(e=="audio"){e=null;var n=this.Bb();return n.length&&(e=n[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,n=this.Kd(!1),n.length&&(e=n[0],e=Math.min(e.dts,e.pts)/9e4),e):null},d.se=function(){return{audio:this.D,video:this.m}},d.Df=function(){for(var e=[],n=C(this.Kd()),s=n.next();!s.done;s=n.next())e.push.apply(e,K(s.value.nalus));return e},d.Cl=function(){Nt("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Ch();return{height:e.height,width:e.width}},d.Ch=function(){return this.m=="hvc"?vJ(this):gJ(this)};function dN(e){var n=e.Kd();return n.length>1&&(e=n[0].pts,n=n[1].pts,!isNaN(n-e))?String(Math.abs(1/(n-e)*9e4)):null}function gJ(e){var n={height:null,width:null,codec:null,frameRate:null},s=e.Df();if(!s.length||(s=s.find(function(j){return j.type==7}),!s))return n;s=new kl(s.data);var a=zt(s),u=zt(s),f=zt(s);if(Fr(s),yJ.includes(a)){var p=Fe(s);if(p===3&&rs(s,1),Fr(s),Fr(s),rs(s,1),ze(s)){p=p!==3?8:12;for(var g=0;g<p;g++)ze(s)&&(g<6?t1(s,16):t1(s,64))}}if(Fr(s),p=Fe(s),p===0)Fe(s);else if(p===1)for(rs(s,1),Fr(s),Fr(s),p=Fe(s),g=0;g<p;g++)Fr(s);Fr(s),rs(s,1),p=Fe(s),g=Fe(s);var y=bt(s,1);y===0&&rs(s,1),rs(s,1);var w=0,b=0,I=0,L=0;return ze(s)&&(w=Fe(s),b=Fe(s),I=Fe(s),L=Fe(s)),n.height=String((2-y)*(g+1)*16-I*2-L*2),n.width=String((p+1)*16-w*2-b*2),n.codec="avc1."+("0"+a.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2)+("0"+f.toString(16).toUpperCase()).slice(-2),n.frameRate=dN(e),n}function vJ(e){var n={height:null,width:null,codec:null,frameRate:null},s=e.Df();if(!s.length||(s=s.find(function(ie){return ie.type==33}),!s))return n;var a=new kl(s.fullData,!0);zt(a),zt(a),bt(a,4);var u=bt(a,3);ze(a);var f=bt(a,2),p=bt(a,1),g=bt(a,5),y=bt(a,32);s=zt(a);for(var w=zt(a),b=zt(a),I=zt(a),L=zt(a),j=zt(a),U=zt(a),F=[],B=[],q=0;q<u;q++)F.push(ze(a)),B.push(ze(a));if(u>0)for(q=u;q<8;q++)bt(a,2);for(q=0;q<u;q++)F[q]&&bt(a,88),B[q]&&zt(a);Fe(a),u=Fe(a),u==3&&bt(a,1),F=Fe(a),B=Fe(a);var G=q=0,z=0,J=0;return ze(a)&&(q+=Fe(a),G+=Fe(a),z+=Fe(a),J+=Fe(a)),n.width=String(F-(q+G)*(u===1||u===2?2:1)),n.height=String(B-(z+J)*(u===1?2:1)),a=function(ie){for(var Y=0,ne=0;ne<32;ne++)Y|=(ie>>ne&1)<<31-ne;return Y>>>0}(y),p=p==1?"H":"L",f="hvc1"+("."+["","A","B","C"][f]+g),f+="."+a.toString(16).toUpperCase(),f+="."+p+U,j&&(f+="."+j.toString(16).toUpperCase()),L&&(f+="."+L.toString(16).toUpperCase()),I&&(f+="."+I.toString(16).toUpperCase()),b&&(f+="."+b.toString(16).toUpperCase()),w&&(f+="."+w.toString(16).toUpperCase()),s&&(f+="."+s.toString(16).toUpperCase()),n.codec=f,n.frameRate=dN(e),n}function hN(e,n){var s=1;for(e>n&&(s=-1);Math.abs(n-e)>4294967296;)e+=s*8589934592;return e}function nf(e){return!(Vb(e)<0)}function Vb(e){for(var n=Math.min(1e3,e.length-564),s=0;s<n;){if(e[s]==71&&e[s+188]==71&&e[s+376]==71)return s;s++}return-1}xe("shaka.util.TsParser",un),un.syncOffset=Vb,un.probe=nf,un.prototype.getVideoInfo=un.prototype.Ch,un.prototype.getVideoResolution=un.prototype.Cl,un.prototype.getVideoNalus=un.prototype.Df,un.prototype.getCodecs=un.prototype.se,un.prototype.getStartTime=un.prototype.getStartTime,un.prototype.getVideoData=un.prototype.Kd,un.prototype.getAudioData=un.prototype.Bb,un.prototype.getMetadata=un.prototype.getMetadata,un.prototype.parseNalus=un.prototype.Th,un.prototype.parseAvcNalus=un.prototype.Zl,un.prototype.parse=un.prototype.parse,un.prototype.setDiscontinuitySequence=un.prototype.lg,un.prototype.clearData=un.prototype.clearData,un.Timescale=9e4;var yJ=[100,110,122,244,44,83,86,118,128,138,139,134];function fN(e,n,s,a,u){var f=this;this.g=e,this.O=s,this.C=a,this.Z=n,this.l=new Map,this.G=new Map,this.La=new Map,this.h=null,this.Fa=!1,this.D=u||null,this.u=new Map,this.A=new Dt,this.j=new Map,this.K=null,this.L=new en,this.ya="",this.kb=!1,this.ua=!0,this.M=!1,this.F=this.P=null,this.i=Gb(this,this.L),this.Na=this.H=!1,this.I=new Yh(function(){return SJ(f)}),this.J=!1,this.V="UNKNOWN",this.$a=this.jb=!1,this.hb=new en,this.m=!1,this.sa=null,this.W=new Map,this.ea=this.R=this.oa=this.T=null,this.aa=new en,this.g.remote&&(this.M=this.g.remote.state!="disconnected",this.A.o(this.g.remote,"connect",function(){f.M=f.g.remote.state!="disconnected"}),this.A.o(this.g.remote,"connecting",function(){f.M=f.g.remote.state!="disconnected"}),this.A.o(this.g.remote,"disconnect",function(){f.M=f.g.remote.state!="disconnected"}))}function Gb(e,n){if(e.ua=!0,l.ManagedMediaSource){e.F||(e.g.disableRemotePlayback=!0);var s=new ManagedMediaSource;e.A.o(s,"startstreaming",function(){e.ua=!0}),e.A.o(s,"endstreaming",function(){e.ua=!1})}else s=new MediaSource;return e.A.qa(s,"sourceopen",function(){URL.revokeObjectURL(e.ya),n.resolve()}),e.A.qa(e.g,"playing",function(){e.kb=!0}),e.ya=zb(s),e.C.useSourceElements?(e.g.removeAttribute("src"),e.P&&e.g.removeChild(e.P),e.F&&e.g.removeChild(e.F),e.P=aN(e.ya),e.g.appendChild(e.P),e.F&&e.g.appendChild(e.F),e.g.load()):e.g.src=e.ya,s}function xJ(e,n,s){e.g&&l.ManagedMediaSource&&e.i&&e.C.useSourceElements&&(e.F&&e.g.removeChild(e.F),e.F=aN(n,s),e.g.appendChild(e.F),e.g.disableRemotePlayback=!1)}function TJ(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="av01.0.31M.10.0.111.09.16.09.0",video/mp4; codecs="av01.0.31M.10.0.112.09.18.09.0",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.03",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(K(Sl)),n={};ht(),e=C(e);for(var s=e.next();!s.done;s=e.next()){if(s=s.value,zm(s))n[s]=!0;else if(Pa()){var a=es(s),u=Xm(Bi(s),a);a=Pn(a,u),n[s]=ui(a)||!!qh(a)}else n[s]=Td().canPlayType(s)!="";a=s.split(";")[0],n[a]=n[a]||n[s]}return n}d=fN.prototype,d.destroy=function(){return this.I.destroy()};function SJ(e){var n,s,a,u,f,p,g,y,w,b,I,L,j,U,F;return X(function(B){if(B.g==1){for(n=[],s=C(e.u),a=s.next();!a.done;a=s.next())for(u=a.value,f=C(u),p=f.next().value,g=f.next().value,y=g[0],w=p,e.u.set(w,g.slice(0,1)),y&&n.push(y.p.catch(aQ)),b=C(g.slice(1)),I=b.next();!I.done;I=b.next())L=I.value,L.p.reject(new oe(2,7,7003,void 0));return e.h&&n.push(e.h.destroy()),O(B,Promise.all(n),2)}for(j=C(e.j.values()),U=j.next();!U.done;U=j.next())F=U.value,F.destroy();e.A&&(e.A.release(),e.A=null),e.g&&e.F&&e.g.removeChild(e.F),e.g&&e.P&&(e.g.removeChild(e.P),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.P=null,e.F=null,e.C=null,e.i=null,e.h=null,e.Z=null,e.l.clear(),e.La.clear(),e.j.clear(),e.K=null,e.u.clear(),e.D=null,e.W.clear(),e.O=null,re(B)})}d.init=function(e,n,s,a){n=n===void 0?!1:n,s=s===void 0?"UNKNOWN":s,a=a===void 0?!1:a;var u=this,f,p,g,y,w,b;return X(function(I){if(I.g==1)return f=qn,O(I,u.L,2);if(I.g!=3)return!wd(u)&&!Du(u)?I.B(3):(nr("Expected MediaSource to be open during init(); reopening the media source."),u.L=new en,u.i=Gb(u,u.L),O(I,u.L,3));for(u.J=n,u.V=s,u.jb=a,u.$a=!u.J&&u.V=="HLS"&&!u.jb,u.W.clear(),u.T=null,u.oa=null,u.R=null,u.ea=null,u.aa=new en,p=C(e.keys()),g=p.next();!g.done;g=p.next())y=g.value,w=e.get(y),n1(u,y,w,w.codecs),u.m?(u.u.set(f.ia,[]),u.u.set(f.Ga,[])):u.u.set(y,[]);(b=e.get(f.ia))&&b.isAudioMuxedInVideo&&(u.m=!0),re(I)})};function n1(e,n,s,a){n=="audio"&&a&&(a=Xm(a,s.mimeType));var u=Pn(s.mimeType,a);if(n==mt)r1(e,u,e.J,s.external);else{var f=e.C.forceTransmux;(!ui(u)||!e.J&&Sl.includes(u))&&(f=!0);var p=Dy(s.mimeType,a);if(f){if(f=Fi("audio",(a||"").split(",")),a=Fi("video",(a||"").split(",")),f&&a){e.m=!0,n1(e,"audio",s,f),n1(e,"video",s,a);return}(a=qh(p))&&(u=a(),e.j.set(n,u),u=u.convertCodecs(n,p))}p=u+e.C.addExtraFeaturesToSourceBuffer(u),ln(e.I);try{var g=e.i.addSourceBuffer(p)}catch(y){throw new oe(2,3,3015,y,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.J&&(g.mode=NJ),e.A.o(g,"error",function(){var y=e.u.get(n)[0];y.p.reject(new oe(2,3,3014,e.g.error?e.g.error.code:0,y.uri))}),e.A.o(g,"updateend",function(){return Nu(e,n)}),e.l.set(n,g),e.G.set(n,u),e.La.set(n,!!s.drmInfos.length)}}d.configure=function(e){this.C=e,this.h&&(this.h.C=e.modifyCueCallback)};function pN(e){return e.ua&&!e.M&&!e.H}function r1(e,n,s,a){e.h||(e.h=new wl(e.Z),e.h&&(e.h.C=e.C.modifyCueCallback));var u=e.h;a=a||e.Fa,e=e.V,n=="application/cea-608"||n=="application/cea-708"?u.i=null:(u.i=Wm.get(n)(),u.i.setSequenceMode?u.i.setSequenceMode(s):Nt("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):Nt("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.D=a)}function wd(e){return e.H?!1:e.i?e.i.readyState=="ended":!0}function Du(e){return e.H?!1:e.i?e.i.readyState=="closed":!0}function Hb(e,n){return e.l.size?n==mt?e.h.g:iN(rf(e,n)):null}function Ed(e,n){return e.l.size?n==mt?e.h.h:Zy(rf(e,n)):null}function wJ(e,n,s){return n==mt?(e=e.h,e.h==null||e.h<s?0:e.h-Math.max(s,e.g)):(e=rf(e,n),sN(e,s))}d.Rc=function(){var e={total:this.H?[]:Cl(this.g.buffered),audio:Cl(rf(this,"audio")),video:Cl(rf(this,"video")),text:[]};if(this.h){var n=this.h.g,s=this.h.h;n!=null&&s!=null&&e.text.push({start:n,end:s})}return e};function rf(e,n){if(e.H||e.M||Du(e))return null;try{return e.l.get(n).buffered}catch{return e.l.has(n),null}}function EJ(e,n,s,a,u,f,p){p=p===void 0?!1:p;var g=null,y=[],w=nt(s);if(Sl.includes(f))s=Sd(w),s.length&&a&&((p=s.find(function(U){return U.description==="com.apple.streaming.transportStreamTimestamp"}))&&typeof p.data=="number"&&(g=Math.round(p.data)/1e3),e.O.onMetadata([{cueTime:a.startTime,data:w,frames:s,dts:a.startTime,pts:a.startTime}],0,a.endTime));else if(f.includes("/mp4")&&a&&a.ka){w=new Jt;var b=u.emsgSchemeIdUris!=null&&u.emsgSchemeIdUris.length>0||e.C.dispatchAllEmsgBoxes;b&&w.X("emsg",function(U){var F=u.emsgSchemeIdUris;if(U.version===0)var B=U.reader.pd(),q=U.reader.pd(),G=U.reader.$(),z=U.reader.$(),J=U.reader.$(),ie=U.reader.$(),Y=a.startTime+z/G;else G=U.reader.$(),Y=U.reader.Vd()/G+a.timestampOffset,z=Y-a.startTime,J=U.reader.$(),ie=U.reader.$(),B=U.reader.pd(),q=U.reader.pd();U=U.reader.bc(U.reader.getLength()-U.reader.Wa(),!0),(F&&F.includes(B)||e.C.dispatchAllEmsgBoxes)&&(B=="urn:mpeg:dash:event:2012"?e.O.Yl():(F=Y+J/G,e.O.Wl({startTime:Y,endTime:F,schemeIdUri:B,value:q,timescale:G,presentationTimeDelta:z,eventDuration:J,id:ie,messageData:U}),(B=="https://aomedia.org/emsg/ID3"||B=="https://developer.apple.com/streaming/emsg-id3")&&(G=Sd(U),G.length&&e.O.onMetadata([{cueTime:Y,data:U,frames:G,dts:Y,pts:Y}],0,F))))});var I=a.ka.timescale;n=I&&!isNaN(I);var L=0,j=!1;n&&w.X("prft",function(U){var F=U.reader,B=U.version;F.$(),U=F.$();var q=F.$();U=U*1e3+q/4294967296*1e3,B===0?F=F.$():(B=F.$(),F=F.$(),F=B*4294967296+F),U=cN(U),F=new Map().set("detail",{wallClockTime:U,programStartDate:new Date(U-F/I*1e3)}),F=new _e("prft",F),e.O.onEvent(F)}).box("moof",ft).box("traf",ft).X("tfdt",function(U){j||(L=Yy(U.reader,U.version).baseMediaDecodeTime/I,j=!0,b||U.parser.stop())}),(b||n)&&w.parse(s,!1,p),j&&a.timestampOffset==0&&(g=L)}else f.includes("/mp4")||f.includes("/webm")||!nf(w)||(e.W.has(n)||e.W.set(n,new un),y=e.W.get(n),y.clearData(),y.lg(a.i),y.parse(w),w=y.getStartTime(n),w!=null&&(g=w),y=y.getMetadata());return{timestamp:g,metadata:y}}function i1(e,n,s,a,u,f,p,g,y,w,b){p=p===void 0?!1:p,g=g===void 0?!1:g,y=y===void 0?!1:y,w=w===void 0?!1:w;var I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te;return X(function(ge){switch(ge.g){case 1:if(I=qn,n!=I.Va){ge.B(2);break}if(e.V!="HLS"){ge.B(3);break}return O(ge,e.hb,4);case 4:L=ge.h,e.h.A=L;case 3:return O(ge,nQ(e.h,s,a?a.startTime:null,a?a.endTime:null,a?a.S()[0]:null),5);case 5:return ge.return();case 2:if(w||!e.m){ge.B(6);break}return O(ge,i1(e,I.ia,s,a,u,f,p,g,y,!0),7);case 7:return O(ge,i1(e,I.Ga,s,a,u,f,p,g,y,!0),8);case 8:return ge.return();case 6:if(!e.l.has(n))return ge.return();if(j=e.l.get(n).timestampOffset,U=e.G.get(n),e.j.has(n)&&(U=e.j.get(n).getOriginalMimeType()),a&&(F=EJ(e,n,s,a,u,U,y),B=F.timestamp,q=F.metadata,B!=null&&(e.T==null&&n==I.Ga&&(e.T=B,e.oa=a.startTime,e.R!=null&&(G=0,e.oa==e.ea&&(G=e.T-e.R),e.aa.resolve(G))),e.R==null&&n==I.ia&&(e.R=B,e.ea=a.startTime,e.T!=null&&(z=0,e.oa==e.ea&&(z=e.T-e.R),e.aa.resolve(z))),J=B,ie=Sl,!e.J&&ie.includes(e.G.get(n))&&(J=0),Y=a.startTime-J,ne=Math.abs(j-Y),(ne>=.001||p||g)&&(!y||Y>0||!j)&&(j=Y,e.$a&&(rr(e,n,function(){return sf(e,n)},null),rr(e,n,function(){return of(e,n,j)},null))),(n==I.Ga||!e.l.has(I.Ga))&&e.hb.resolve(j)),q.length)&&e.O.onMetadata(q,j,a?a.endTime:null),f&&n==I.Ga&&(e.h||r1(e,"application/cea-608",e.J,!1),e.K||(Z=U.split(";",1)[0],e.K=new Yo(Z)),a?(de=e.K.Yf(s),de.length&&iQ(e.h,de,j)):e.K.init(s,g,b)),!e.j.has(n)){ge.B(9);break}return O(ge,e.j.get(n).transmux(s,u,a,e.i.duration,n),10);case 10:te=ge.h,ArrayBuffer.isView(te)?s=te:(ae=te,ae.init!=null&&(he=ae.init,rr(e,n,function(){e.D&&wy(e.D,he,j,u),e.l.get(n).appendBuffer(he)},a?a.S()[0]:null)),s=ae.data);case 9:if(s=_J(e,u,s,a,n),!a||!e.J||n==I.Va){ge.B(11);break}if(!p&&!g){ge.B(11);break}if(Ee=a.startTime,e.V!="HLS"||e.m||n!=I.ia||!e.l.has(I.Ga)){ge.B(13);break}return O(ge,e.aa,14);case 14:Te=ge.h,Math.abs(Te)>.15&&(Ee-=Te);case 13:rr(e,n,function(){return sf(e,n)},null),rr(e,n,function(){return of(e,n,Ee)},null);case 11:return O(ge,rr(e,n,function(){var ve=s;e.D&&wy(e.D,ve,j,u),e.l.get(n).appendBuffer(ve)},a?a.S()[0]:null),15);case 15:re(ge)}})}function bJ(e,n){var s=Ed(e,"video")||0;n3(e.h,n,s)}function AJ(e){e.h&&n3(e.h,"",0)}d.remove=function(e,n,s,a){var u=this,f,p;return X(function(g){return g.g==1?(f=qn,e==f.Ga&&u.K&&(u.K.remove(a),p=u.h.g||0,u.h.remove(p,s,!0)),e==f.Va?O(g,u.h.remove(n,s),0):s>n?O(g,rr(u,e,function(){return s1(u,e,n,s)},null),5):g.B(0)):u.m?O(g,rr(u,f.ia,function(){return s1(u,f.ia,n,s)},null),0):g.B(0)})};function mN(e,n){var s;return X(function(a){return a.g==1?(s=qn,n==s.Va?e.h?O(a,e.h.remove(0,1/0),0):a.return():n===s.Ga&&e.K&&e.h?O(a,e.h.remove(0,1/0,!0),4):a.B(4)):a.g!=6?O(a,rr(e,n,function(){return s1(e,n,0,e.i.duration)},null),6):e.m?O(a,rr(e,s.ia,function(){return s1(e,s.ia,0,e.i.duration)},null),0):a.B(0)})}d.flush=function(e){var n=this,s;return X(function(a){return a.g==1?(s=qn,e==s.Va?a.return():O(a,rr(n,e,function(){n.g.currentTime-=.001,Nu(n,e)},null),2)):n.m?O(a,rr(n,s.ia,function(){var u=s.ia;n.g.currentTime-=.001,Nu(n,u)},null),0):a.B(0)})};function gN(e,n,s,a,u,f,p,g,y){var w,b,I;return X(function(L){return L.g==1?(w=qn,n==w.Va?(f||(e.h.A=s),rQ(e.h,a,u),L.return()):(b=[],O(L,PJ(e,n,p,g,y),2))):(I=L.h,I||(b.push(rr(e,n,function(){return sf(e,n)},null)),e.m&&b.push(rr(e,w.ia,function(){return sf(e,w.ia)},null))),f||(b.push(rr(e,n,function(){return of(e,n,s)},null)),e.m&&b.push(rr(e,w.ia,function(){return of(e,w.ia,s)},null))),(a!=0||u!=1/0)&&(b.push(rr(e,n,function(){return vN(e,n,a,u)},null)),e.m&&b.push(rr(e,w.ia,function(){return vN(e,w.ia,a,u)},null))),b.length?O(L,Promise.all(b),0):L.B(0))})}function IJ(e,n,s){var a,u;return X(function(f){return f.g==1?(a=qn,n==a.Va||(n==a.Ga&&(e.hb=new en),!e.J||(u=Ed(e,n))&&Math.abs(u-s)<.15)?f.return():(rr(e,n,function(){return sf(e,n)},null),e.m&&rr(e,a.ia,function(){return sf(e,a.ia)},null),O(f,rr(e,n,function(){return of(e,n,s)},null),2))):e.m?O(f,rr(e,a.ia,function(){return of(e,a.ia,s)},null),0):f.B(0)})}d.endOfStream=function(e){var n=this;return X(function(s){return O(s,og(n,function(){wd(n)||Du(n)||(e?n.i.endOfStream(e):n.i.endOfStream())}),0)})},d.Fb=function(e){var n=this;return X(function(s){return O(s,og(n,function(){if(n.C.durationReductionEmitsUpdateEnd&&e<n.i.duration)for(var a=C(n.l.keys()),u=a.next();!u.done;u=a.next()){u=u.value;var f={start:function(){},p:new en,uri:null};n.u.get(u).unshift(f)}n.i.duration=e,n.sa=e}),0)})},d.getDuration=function(){return this.i.duration};function CJ(e,n,s){X(function(a){return e.I.g||e.g.error||e.M||e.H||wd(e)||Du(e)?a.return():O(a,og(e,function(){wd(e)||Du(e)||e.i.setLiveSeekableRange(n,s)}),0)})}function qb(e){X(function(n){return e.I.g||e.g.error||e.M||e.H||wd(e)||Du(e)?n.return():O(n,og(e,function(){wd(e)||Du(e)||e.i.clearLiveSeekableRange()}),0)})}function s1(e,n,s,a){if(a<=s)Nu(e,n);else{if(e.D){var u=e.D;n==="video"&&u.g&&u.g.flushBuffer(s,a)}e.l.get(n).remove(s,a)}}function sf(e,n){var s=e.l.get(n),a=s.appendWindowStart,u=s.appendWindowEnd;s.abort(),s.appendWindowStart=a,s.appendWindowEnd=u,Nu(e,n)}function of(e,n,s){s<0&&(s+=.001),e.l.get(n).timestampOffset=s,Nu(e,n)}function vN(e,n,s,a){var u=e.l.get(n);(u.appendWindowEnd!==a||u.appendWindowStart!==s)&&(u.appendWindowStart=0,u.appendWindowEnd=a,u.appendWindowStart=s),Nu(e,n)}function Nu(e,n){if(e.H||e.I.g){var s=e.u.get(n);s&&s.length&&((s=s[0])&&s.p&&s.p.resolve(),e.u.set(n,[]))}else(s=e.u.get(n)[0])&&(s.p.resolve(),Kb(e,n))}function rr(e,n,s,a){return ln(e.I),s={start:s,p:new en,uri:a},e.u.get(n).push(s),e.u.get(n).length==1&&yN(e,n),s.p}function og(e,n){var s,a,u,f,p,g,y,w,b,I,L,j,U;return X(function(F){switch(F.g){case 1:for(ln(e.I),s=[],a=Array.from(e.l.keys()),u=C(a),f=u.next(),p={};!f.done;p={ready:void 0},f=u.next())g=f.value,p.ready=new en,y={start:function(B){return function(){return B.ready.resolve()}}(p),p:p.ready,uri:null},w=e.u.get(g),w.push(y),s.push(p.ready),w.length==1&&y.start();return ce(F,2),O(F,Promise.all(s),4);case 4:se(F,3);break;case 2:throw b=ue(F),b;case 3:return ce(F,5,6),O(F,n(),6);case 6:for(le(F),I=C(a),L=I.next();!L.done;L=I.next())j=L.value,Kb(e,j);pe(F,0);break;case 5:throw U=ue(F),new oe(2,3,3015,U,e.g.error||"No error in the media element",null)}})}function Kb(e,n){e.u.get(n).shift(),yN(e,n)}function yN(e,n){var s=e.u.get(n)[0];if(s)try{s.start()}catch(a){a.name=="QuotaExceededError"?s.p.reject(new oe(2,3,3017,n)):pN(e)?s.p.reject(new oe(2,3,3015,a,e.g.error||"No error in the media element",s.uri)):s.p.reject(new oe(2,3,3024,n)),Kb(e,n)}}function kJ(e,n){e.Z=n,e.h&&(e.h.l=n)}function _J(e,n,s,a,u){if(qm(e.G.get(u))!="mp4")return s;var f=a===null,p=e.La.get(u),g=e.O.Wk(),y=!1;a&&a.ka&&(y=a.ka.encrypted),a=a?a.S()[0]:null;var w=ht();return e.C.correctEc3Enca&&f&&u==="audio"&&(s=sJ(s)),e.C.insertFakeEncryptionInInit&&p&&w.Wd(g,u)&&(f?s=oJ(n,s,a):!y&&w.Gj(u)&&(s=aJ(s))),f&&w.Le()&&(s=cJ(s)),s}function RJ(e,n,s,a){return rr(e,n,function(){if(n!==mt){if(e.G.get(n),ht().Pb()){e.j.has(n)&&(e.j.get(n).destroy(),e.j.delete(n)),a&&e.j.set(n,a);var u=s+e.C.addExtraFeaturesToSourceBuffer(s);e.l.get(n).changeType(u),e.G.set(n,s)}Nu(e,n)}},null)}function LJ(e,n){var s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie;return X(function(Y){if(Y.g==1){if(e.H||e.M)return Y.return();for(s=qn,e.H=!0,e.m=!1,a=e.g.currentTime,u=e.g.autoplay,e.g.paused||(e.Na=!0),e.kb&&(e.g.autoplay=!1),Ae(Y,2),e.A.Ta(),f=C(e.j.values()),p=f.next();!p.done;p=f.next())g=p.value,g.destroy();for(y=C(e.l.values()),w=y.next();!w.done;w=y.next()){b=w.value;try{e.i.removeSourceBuffer(b)}catch{}}return e.j.clear(),e.l.clear(),I=e.i.duration,e.L=new en,e.i=Gb(e,e.L),O(Y,e.L,4)}if(Y.g!=2){for(!isNaN(I)&&I?e.i.duration=I:!isNaN(e.sa)&&e.sa&&(e.i.duration=e.sa),L=new en,j=e.i.sourceBuffers,U=n.size,F=0,B=function(){F++,F===U&&(L.resolve(),e.A.Ea(j,"addsourcebuffer",B))},e.A.o(j,"addsourcebuffer",B),q=C(n.keys()),G=q.next();!G.done;G=q.next())z=G.value,J=n.get(z),n1(e,z,J,J.codecs);return(ie=n.get(s.ia))&&ie.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.u.has(s.ia)&&e.u.set(s.ia,[]),O(Y,L,2)}return le(Y),e.H=!1,ln(e.I),e.A.qa(e.g,"loadedmetadata",function(){e.I.g||(e.g.currentTime=a)}),e.A.qa(e.g,"canplaythrough",function(){e.I.g||(e.g.autoplay=u,e.Na&&(e.Na=!1,e.g.play()))}),pe(Y,0)})}function xN(e,n){return og(e,function(){return LJ(e,n)})}function TN(e,n,s,a){var u=!1,f=Fi("audio",(a||"").split(",")),p=Fi("video",(a||"").split(",")),g=p;n=="audio"&&(g=f),g||(g=a);var y=Pn(s,g),w=es(e.G.get(n)),b=e.C.forceTransmux;if(!ui(y)||!e.J&&Sl.includes(y)?b=!0:b||s==w||(b=!ht().qg()&&Sl.includes(s)),b&&(e=Dy(s,g),g=qh(e))){var I=g();f&&p&&(u=!0),y=I.convertCodecs(n,e)}return!I&&n==="video"&&f&&(y=Pn(s,a)),n=Dn(Bi(y)),{uc:I,Cm:u,Oi:es(y),codec:n,mimeType:y}}function SN(e,n,s,a,u){if(n==mt)return{type:Wb,Uf:s,uc:null};var f=Dn(Bi(e.G.get(n))),p=es(e.G.get(n)),g=TN(e,n,s,a),y=g.uc,w=g.Cm,b=g.Oi,I=g.codec;g=g.mimeType;var L=!0;return w&&e.G.has("audio")&&(s=TN(e,"audio",s,a),a=Dn(Bi(e.G.get("audio"))),L=es(e.G.get("audio")),L=a==s.codec&&L==s.Oi,s.uc&&s.uc.destroy()),f===I&&p===b&&L?{type:Wb,Uf:g,uc:y}:(f=!0,(e.m&&!u.has("audio")||w&&y&&!e.j.has(n))&&(f=!1),n=ht(),f&&e.C.codecSwitchingStrategy==="smooth"&&n.Pb()?{type:wN,Uf:g,uc:y}:(y&&y.destroy(),{type:Yb,Uf:g,uc:null}))}function PJ(e,n,s,a,u){var f,p,g,y,w,b;return X(function(I){return I.g==1?(f=qn,p=SN(e,n,s,a,u),g=p.type,y=p.uc,w=p.Uf,(b=u.get(f.ia))&&(e.m=b.isAudioMuxedInVideo),g==Wb?(e.j.has(n)&&!y?(e.j.get(n).destroy(),e.j.delete(n)):!e.j.has(n)&&y?e.j.set(n,y):y&&(e.j.has(n)&&e.j.get(n).transmux!==y.transmux?(e.j.get(n).destroy(),e.j.set(n,y)):y.destroy()),I.return(!1)):g==wN?O(I,RJ(e,n,w,y),3):g!=Yb?I.B(3):(y&&y.destroy(),O(I,xN(e,u),3))):I.return(!0)})}function DJ(e,n,s,a,u){return e=SN(e,n,s,a,u),e.uc&&e.uc.destroy(),e.type==Yb}var zb=l.URL.createObjectURL,NJ="sequence",Wb="none",Yb="reset",wN="changeType";function tt(e,n,s){this.i=e,this.F=n,this.A=this.l=1/0,this.h=1,this.g=this.j=null,this.C=0,this.D=!0,this.J=!1,this.I=0,this.G=s===void 0?!0:s,this.H=0,this.u=!1,this.m=e}d=tt.prototype,d.getDuration=function(){return this.l},d.al=function(){return this.h},d.Tj=function(e){this.i=e},d.Fb=function(e){this.l=e},d.jl=function(){return this.i},d.Qj=function(e){this.C=e},d.td=function(e){e&&!this.D&&(this.J=!0),this.D=e},d.mg=function(e){this.A=e},d.Cf=function(){return this.A},d.ii=function(e){this.F=e},d.Rk=function(){return this.F},d.Aj=function(e,n){if(e.length!=0){var s=(Date.now()+this.C)/1e3;if(e=e.filter(function(u){return u.start+n<s}),e.length!=0){var a=e[e.length-1].end+n;this.Vf(e[0].start+n),this.h=e.reduce(function(u,f){return Math.max(u,f.end-f.start)},this.h),this.g=Math.max(this.g,a),this.i!=null&&this.G&&!this.u&&(this.i=s-this.g-this.h)}}},d.Ge=function(e){if(e.length!=0){var n=e[0].startTime,s=e[0].endTime,a=(Date.now()+this.C)/1e3;e=C(e);for(var u=e.next();!u.done;u=e.next())u=u.value,a<u.startTime||(n=Math.min(n,u.startTime),s=Math.max(s,u.endTime),this.h=Math.max(this.h,u.endTime-u.startTime));this.Vf(n),this.g=Math.max(this.g,s),this.i!=null&&this.G&&!this.u&&(this.i=a-this.g-this.h)}},d.zj=function(e,n){this.Vf(e),n==1/0||this.U()||(this.g=Math.max(this.g,n))},d.cl=function(){return this.g},d.Pf=function(){this.u=!0},d.Ml=function(){return this.u},d.ki=function(e){this.m=e},d.Vk=function(){return this.m},d.Vf=function(e){this.j==null?this.j=e:this.J||(this.j=Math.min(this.j,e))},d.Ph=function(e){this.h=Math.max(this.h,e)},d.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},d.U=function(){return this.l==1/0&&!this.D},d.md=function(){return this.l!=1/0&&!this.D},d.Mb=function(){return Math.max(this.I,this.Tc()-this.A)},d.Vj=function(e){this.I=e},d.Tc=function(){return this.U()||this.md()?Math.min(Math.max(0,(Date.now()+this.C)/1e3-this.h-this.i)+this.H,this.l):this.g?Math.min(this.g,this.l):this.l},d.ve=function(e){var n=Math.max(this.j,this.I);return this.A==1/0?Math.ceil(n*1e3)/1e3:Math.max(n,Math.min(this.Tc()-this.A+e,this.Lb()))},d.hc=function(){return this.ve(0)},d.Lb=function(){return Math.max(0,this.Tc()-(this.U()||this.md()?this.F:0))},d.jk=function(){return!(this.i==null||this.g!=null&&this.G)},d.Pj=function(e){this.H=e},d.Hk=function(){return this.H},xe("shaka.media.PresentationTimeline",tt),tt.prototype.getAvailabilityTimeOffset=tt.prototype.Hk,tt.prototype.setAvailabilityTimeOffset=tt.prototype.Pj,tt.prototype.usingPresentationStartTime=tt.prototype.jk,tt.prototype.getSeekRangeEnd=tt.prototype.Lb,tt.prototype.getSeekRangeStart=tt.prototype.hc,tt.prototype.getSafeSeekRangeStart=tt.prototype.ve,tt.prototype.getSegmentAvailabilityEnd=tt.prototype.Tc,tt.prototype.setUserSeekStart=tt.prototype.Vj,tt.prototype.getSegmentAvailabilityStart=tt.prototype.Mb,tt.prototype.isInProgress=tt.prototype.md,tt.prototype.isLive=tt.prototype.U,tt.prototype.offset=tt.prototype.offset,tt.prototype.notifyMaxSegmentDuration=tt.prototype.Ph,tt.prototype.notifyMinSegmentStartTime=tt.prototype.Vf,tt.prototype.getInitialProgramDateTime=tt.prototype.Vk,tt.prototype.setInitialProgramDateTime=tt.prototype.ki,tt.prototype.isStartTimeLocked=tt.prototype.Ml,tt.prototype.lockStartTime=tt.prototype.Pf,tt.prototype.getMaxSegmentEndTime=tt.prototype.cl,tt.prototype.notifyPeriodDuration=tt.prototype.zj,tt.prototype.notifySegments=tt.prototype.Ge,tt.prototype.notifyTimeRange=tt.prototype.Aj,tt.prototype.getDelay=tt.prototype.Rk,tt.prototype.setDelay=tt.prototype.ii,tt.prototype.getSegmentAvailabilityDuration=tt.prototype.Cf,tt.prototype.setSegmentAvailabilityDuration=tt.prototype.mg,tt.prototype.setStatic=tt.prototype.td,tt.prototype.setClockOffset=tt.prototype.Qj,tt.prototype.getPresentationStartTime=tt.prototype.jl,tt.prototype.setDuration=tt.prototype.Fb,tt.prototype.setPresentationStartTime=tt.prototype.Tj,tt.prototype.getMaxSegmentDuration=tt.prototype.al,tt.prototype.getDuration=tt.prototype.getDuration;function Xb(e,n,s,a){var u=this;this.A=a,this.g=e,this.F=n,this.h=s,this.j=new Dt,this.m=!1,this.l=0,this.D=!1,this.H=this.G=0,this.u=OJ(this),this.C=!1,this.j.o(e,"waiting",function(){return ag(u)}),this.i=new Ke(function(){ag(u)}).xa(this.h.gapJumpTimerTime)}Xb.prototype.release=function(){this.j&&(this.j.release(),this.j=null),this.i!=null&&(this.i.stop(),this.i=null),this.u&&(this.u.release(),this.u=null),this.g=this.F=this.A=null},Xb.prototype.Rd=function(){this.C=!0,this.i&&this.i.xa(this.h.gapJumpTimerTime),ag(this)};function ag(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==e.l&&(e.g.autoplay||e.g.currentTime!=e.l)){var n;if(!(n=!e.u)){n=e.u;var s=n.h,a=AN(s),u=s.g.currentTime,f=Date.now()/1e3;(n.g!=u||n.m!=a)&&(n.l=f,n.g=u,n.m=a,n.i=!1),u=f-n.l,(a=u>=n.u&&a&&!n.i)&&(n.j&&n.j(n.g,u),n.i=!0,n.g=s.g.currentTime),n=!a}n&&(n=e.g.currentTime,s=e.g.buffered,a=dJ(s,n,e.h.gapDetectionThreshold),a==null||a==0&&!e.C||(u=s.start(a),(f=e.h.gapPadding)&&(u=Math.ceil((u+f)*100)/100),u>=e.F.Lb()||u-n<.001||(a!=0&&s.end(a-1),MJ(e,u),n==e.l&&(e.l=u),e.G++,e.A(new _e("gapjumped")))))}}}function MJ(e,n){e.D=!0,e.j.qa(e.g,"seeked",function(){e.D=!1}),e.g.currentTime=n}function OJ(e){if(!e.h.stallEnabled)return null;var n=e.h.stallThreshold,s=e.h.stallSkip;return new EN(new bN(e.g),n,function(){var a;return X(function(u){if(u.g==1)return a=Cl(e.g.buffered),a.length?s?(e.g.currentTime+=s,u.B(2)):O(u,e.g.play(),3):u.return();if(u.g!=2){if(!e.g)return u.return();e.g.pause(),e.g.play()}e.H++,e.A(new _e("stalldetected")),re(u)})})}function EN(e,n,s){this.h=e,this.m=AN(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.u=n,this.j=s}EN.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null};function bN(e){var n=this;this.g=e,this.h=new Dt,this.i=!1,this.h.o(this.g,"audiofocuspaused",function(){n.i=!0}),this.h.o(this.g,"audiofocusgranted",function(){n.i=!1}),this.h.o(this.g,"audiofocuslost",function(){n.i=!0})}function AN(e){if(e.g.paused||e.g.playbackRate==0||e.i||e.g.buffered.length==0)var n=!1;else e:{n=e.g.currentTime,e=C(Cl(e.g.buffered));for(var s=e.next();!s.done;s=e.next())if(s=s.value,!(n<s.start-.1||n>s.end-.5)){n=!0;break e}n=!1}return n}bN.prototype.release=function(){this.h&&this.h.release(),this.h=null};function bd(e,n,s,a){n==HTMLMediaElement.HAVE_NOTHING||e.readyState>=n?a():(n=jJ.value().get(n),s.qa(e,n,a))}var jJ=new gn(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function IN(e,n,s,a){var u=this;this.g=e,this.m=n,this.A=s,this.l=null,this.j=function(){return u.l==null&&(u.l=a()),u.l},this.u=!1,this.h=new Dt,this.i=new RN(e),bd(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){kN(u,u.j())})}IN.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Qb(e){return e.u?e.g.currentTime:e.j()}function CN(e,n){e.g.readyState>0?LN(e.i,n):bd(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){kN(e,e.j())})}function kN(e,n){Math.abs(e.g.currentTime-n)<.001?_N(e):(e.h.qa(e.g,"seeking",function(){_N(e)}),LN(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:n))}function _N(e){e.u=!0,e.h.o(e.g,"seeking",function(){return e.m()}),e.A(e.g.currentTime)}function RN(e){var n=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new Ke(function(){n.i<=0||n.g.currentTime!=n.l||n.g.currentTime===n.j?n.h.stop():(n.g.currentTime=n.j,n.i--)})}RN.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function LN(e,n){e.l=e.g.currentTime,e.j=n,e.i=e.m,e.g.currentTime=n,e.h.xa(.1)}function PN(e){this.g=e,this.i=!1,this.h=null,this.j=new Dt}d=PN.prototype,d.ready=function(){function e(){if(n.h==null||n.h==0&&n.g.duration!=1/0)n.i=!0;else{var s=n.g.currentTime,a=null;if(typeof n.h=="number")a=n.h;else if(n.h instanceof Date){var u=DN(n);u!==null&&(a=n.h.getTime()/1e3-u,a=NN(n,a))}a==null?n.i=!0:(a<0&&(a=Math.max(0,s+a)),s!=a?(n.j.qa(n.g,"seeking",function(){n.i=!0}),n.g.currentTime=a):n.i=!0)}}var n=this;bd(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){e()})},d.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},d.Fg=function(e){this.h=this.i?this.h:e},d.ke=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=e.getTime()/1e3-(DN(this)||0),e=NN(this,e)),e||0},d.Hi=function(){return 0},d.Fi=function(){return 0},d.Gi=function(){return!1},d.yj=function(){},d.mj=function(){var e=Zy(this.g.buffered);return e!=null&&e>=this.g.duration-1};function DN(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function NN(e,n){return e=e.g.seekable,e.length>0&&(n=Math.max(e.start(0),n),n=Math.min(e.end(e.length-1),n)),n}function MN(e,n,s,a,u,f){var p=this;this.h=e,this.g=n.presentationTimeline,this.l=s,this.A=u,this.u=null,this.i=new Xb(e,n.presentationTimeline,s,f),this.j=new IN(e,function(){e:{var g=p.i;g.m=!0,g.C=!1,g.i&&g.i.xa(g.h.gapJumpTimerTime),ag(g);var y=Qb(p.j);if(g=UN(p,y),!W3()&&Math.abs(g-y)>.001){y=!1;var w=ht().Lj();if(w){var b=Date.now()/1e3;(!p.u||p.u<b-w)&&(p.u=b,y=!0)}else y=!0;if(y){CN(p.j,g),g=void 0;break e}}p.A(),g=void 0}return g},function(g){var y=p.i;y.g.seeking&&!y.m&&(y.m=!0,y.l=g),y.i&&y.i.xa(y.h.gapJumpTimerTime),ag(y)},function(){return ON(p,a)}),this.m=new Ke(function(){if(p.h.readyState!=0&&!p.h.paused){var g=Qb(p.j),y=p.g.hc(),w=p.g.Lb();w-y<3&&(y=w-3),g<y&&(g=UN(p,g),p.h.currentTime=g)}})}d=MN.prototype,d.ready=function(){this.m.xa(.25)},d.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.m&&(this.m.stop(),this.m=null),this.h=this.j=this.g=this.l=null,this.A=function(){}},d.Fg=function(e){CN(this.j,ON(this,e))},d.ke=function(){var e=Qb(this.j);return this.h.readyState>0&&!this.h.paused?FN(this,e):e},d.Hi=function(){return this.i.H},d.Fi=function(){return this.i.G},d.Gi=function(){return this.i.D};function ON(e,n){return n==null?n=e.g.getDuration()<1/0?e.g.hc():e.g.Lb():n instanceof Date?n=n.getTime()/1e3-(e.g.m||e.g.i):n<0&&(n=e.g.Lb()+n),jN(e,FN(e,n))}d.yj=function(){this.i.Rd()},d.mj=function(){if(this.g.U()){var e=this.g.Tc(),n=Zy(this.h.buffered);if(n!=null&&n>=e)return!0}return!1};function jN(e,n){var s=e.g.getDuration();return n>=s?s-e.l.durationBackoff:n}function UN(e,n){var s=e.l.rebufferingGoal,a=e.l.safeSeekOffset,u=e.g.hc(),f=e.g.Lb(),p=e.g.getDuration();f-u<3&&(u=f-3);var g=e.g.ve(s),y=e.g.ve(a);return s=e.g.ve(s+a),n>=p?jN(e,n):n>f?f-e.l.safeSeekEndOffset:n<u?e.g.U()&&e.l.returnToEndOfLiveWindowWhenOutside?f-e.l.safeSeekEndOffset:Nb(e.h.buffered,y)?y:s:n>=g||Nb(e.h.buffered,n)?n:s}function FN(e,n){var s=e.g.hc();return n<s?s:(e=e.g.Lb(),n>e?e:n)}function jt(e){this.g=e,this.m=null,this.i=0,this.u=!1}d=jt.prototype,d.getNumReferences=function(){return this.g.length},d.getNumEvicted=function(){return this.i},d.release=function(){this.u||(this.g=[],this.m&&this.m.stop(),this.m=null)},d.Tl=function(){this.u=!0},d.Kb=function(e){for(var n=C(this.g),s=n.next();!s.done;s=n.next())e(s.value)};function Qo(e){return e.g[0]||null}d.find=function(e){for(var n=this.g.length-1,s=n;s>=0;--s){var a=this.g[s],u=s<n?this.g[s+1].startTime:a.endTime;if(e>=a.startTime&&e<u)return s+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},d.get=function(e){return this.g.length==0?null:(e-=this.i,e<0||e>=this.g.length?null:this.g[e])},d.offset=function(e){if(!this.u)for(var n=C(this.g),s=n.next();!s.done;s=n.next())s.value.offset(e)},d.Rf=function(e){if(!this.u&&e.length){var n=Math.round(e[0].startTime*1e3)/1e3;this.g=this.g.filter(function(s){return Math.round(s.startTime*1e3)/1e3<n}),this.g.push.apply(this.g,K(e))}},d.Ee=function(e,n){var s=this;e=e.filter(function(a){return a.endTime>n&&(s.g.length==0||a.endTime>s.g[0].startTime)}),this.Rf(e),this.eb(n)},d.eb=function(e){if(!this.u){var n=this.g.length;this.g=this.g.filter(function(s){return s.endTime>e}),this.i+=n-this.g.length}},d.Hd=function(e,n,s){if(s=s===void 0?!1:s,!this.u){for(;this.g.length&&this.g[this.g.length-1].startTime>=n;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),s||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],n=new Xe(e.startTime,n,e.D,e.startByte,e.endByte,e.ka,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.C,e.h,e.status,e.aesKey),n.mimeType=e.mimeType,n.codecs=e.codecs,n.i=e.i,this.g[this.g.length-1]=n)}},d.wg=function(e,n){var s=this;this.u||(this.m&&this.m.stop(),this.m=new Ke(function(){var a=n();a?s.g.push.apply(s.g,K(a)):(s.m.stop(),s.m=null)}),this.m.xa(e))},jt.prototype[Symbol.iterator]=function(){return this.fc(0)},jt.prototype.fc=function(e,n,s){n=n===void 0?!1:n,s=s===void 0?!1:s;var a=this.find(e);if(a==null)return null;var u=this.get(a);s?a++:a--;var f=-1;if(u&&u.g.length>0)for(var p=u.g.length-1;p>=0;--p){var g=u.g[p];if(e>=g.startTime&&e<g.endTime){if(!n){for(;p&&!g.l;)p--,g=u.g[p];if(!g.l)return nr("No independent partial segment found!"),null}s?a--:a++,f=p-1;break}}return new Vs(this,a,f,s)},jt.prototype.tf=function(){return-1};function o1(e,n,s){return e=new Xe(e,e+n,function(){return s},0,null,null,e,e,e+n),new jt([e])}xe("shaka.media.SegmentIndex",jt),jt.forSingleSegment=o1,jt.prototype.getIteratorForTime=jt.prototype.fc,jt.prototype.updateEvery=jt.prototype.wg,jt.prototype.fit=jt.prototype.Hd,jt.prototype.evict=jt.prototype.eb,jt.prototype.mergeAndEvict=jt.prototype.Ee,jt.prototype.offset=jt.prototype.offset,jt.prototype.get=jt.prototype.get,jt.prototype.find=jt.prototype.find,jt.prototype.markImmutable=jt.prototype.Tl,jt.prototype.release=jt.prototype.release,jt.prototype.getNumEvicted=jt.prototype.getNumEvicted,jt.prototype.getNumReferences=jt.prototype.getNumReferences;function Vs(e,n,s,a){this.i=e,this.h=n,this.g=s,this.reverse=a}d=Vs.prototype,d.$d=function(e){this.reverse=e},d.Ck=function(){return this.h},d.current=function(){var e=this.i.get(this.h);return e&&e.g.length>0&&e.m&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&e.g.length>0?e.g[this.g]:e},d.next=function(){var e=this.i.get(this.h);return this.reverse?e&&e.g.length>0?(this.g--,this.g<0&&(this.h--,this.g=(e=this.i.get(this.h))&&e.g.length>0?e.g.length-1:0)):(this.h--,this.g=0):e&&e.g.length>0?(this.g++,e.m&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},d.ai=function(){var e=this.current();if(e&&e.od&&!e.l&&(e=this.i.get(this.h))&&e.g.length>0)for(var n=e.g[this.g];n.l&&!(this.g<=0);)this.g--,n=e.g[this.g]},xe("shaka.media.SegmentIterator",Vs),Vs.prototype.resetToLastIndependent=Vs.prototype.ai,Vs.prototype.next=Vs.prototype.next,Vs.prototype.current=Vs.prototype.current,Vs.prototype.currentPosition=Vs.prototype.Ck,Vs.prototype.setReverse=Vs.prototype.$d;function wn(){jt.call(this,[]),this.h=[]}V(wn,jt),d=wn.prototype,d.clone=function(){var e=new wn;return e.h=this.h.slice(),e.i=this.i,e},d.release=function(){this.h=[]},d.Kb=function(e){for(var n=C(this.h),s=n.next();!s.done;s=n.next())s.value.Kb(e)};function UJ(e,n){e=C(e.h);for(var s=e.next();!s.done;s=e.next())n(s.value)}d.find=function(e){for(var n=this.i,s=C(this.h),a=s.next();!a.done;a=s.next()){a=a.value;var u=a.find(e);if(u!=null)return u+n;n+=a.getNumEvicted()+a.getNumReferences()}return null};function FJ(e,n){e=C(e.h);for(var s=e.next();!s.done;s=e.next())if(s=s.value,s.find(n)!=null)return s.tf();return-1}d.get=function(e){for(var n=this.i,s=C(this.h),a=s.next();!a.done;a=s.next()){a=a.value;var u=a.get(e-n);if(u)return u;u=a.getNumReferences(),n+=a.getNumEvicted()+u}return null},d.offset=function(){},d.Rf=function(){},d.eb=function(e){if(this.h.length){var n=this.h[0];n.eb(e),n.getNumReferences()==0&&(this.h.shift(),this.i+=n.getNumEvicted(),n.release(),this.eb(e))}},d.Ee=function(){},d.Hd=function(){},d.wg=function(){},xe("shaka.media.MetaSegmentIndex",wn),wn.prototype.updateEvery=wn.prototype.wg,wn.prototype.fit=wn.prototype.Hd,wn.prototype.mergeAndEvict=wn.prototype.Ee,wn.prototype.evict=wn.prototype.eb,wn.prototype.merge=wn.prototype.Rf,wn.prototype.offset=wn.prototype.offset,wn.prototype.get=wn.prototype.get,wn.prototype.find=wn.prototype.find,wn.prototype.forEachTopLevelReference=wn.prototype.Kb,wn.prototype.release=wn.prototype.release;function lg(e){var n=this;this.g=e,this.j=!1,this.i=this.g.Bf(),this.h=new Ke(function(){n.g.wj(n.i*.25)})}lg.prototype.release=function(){this.set(this.kd()),this.h&&(this.h.stop(),this.h=null),this.g=null},lg.prototype.set=function(e){this.i=e,Jb(this)},lg.prototype.kd=function(){return this.g.kd()};function Jb(e){e.h.stop();var n=e.j?0:e.i;if(n>=0)try{e.g.Bf()!=n&&e.g.li(n);return}catch{}e.h.xa(.25),e.g.Bf()!=0&&e.g.li(0)}function Zb(e){var n=this;this.j=e,this.h=new Dt,this.g=new Set,this.i=new Ke(function(){BN(n,!1)}).Ka(),e.paused||this.i.xa(.25),this.h.o(e,"playing",function(){n.i.Ka().xa(.25)}),this.h.o(e,"pause",function(){n.i.stop()})}Zb.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=C(this.g),n=e.next();!n.done;n=e.next())n.value.release();this.g.clear()};function BN(e,n){var s=e.j.currentTime;e=C(e.g);for(var a=e.next();!a.done;a=e.next())a.value.j(s,n)}function a1(e){Tt.call(this),this.g=new Map,this.h=e}V(a1,Tt),a1.prototype.release=function(){this.g.clear(),Tt.prototype.release.call(this)};function BJ(e,n){var s=e.g.get(n);return s||(s={Ke:[],Xg:null,contentType:n},e.g.set(n,s)),s}function $J(e,n,s){var a=BJ(e,n.contentType);VJ(e,a),e={Pd:n,position:s},a=a.Ke,n=a.findIndex(function(u){return u.position>=s}),n>=0?a.splice(n,a[n].position==s?1:0,e):a.push(e)}a1.prototype.j=function(e){for(var n=C(this.g.values()),s=n.next();!s.done;s=n.next()){s=s.value;var a=s.Xg;e:{for(var u=s.Ke,f=u.length-1;f>=0;f--){var p=u[f];if(p.position<=e){u=p.Pd;break e}}u=null}f=u&&!(a===u||a&&u&&a.bandwidth==u.bandwidth&&a.audioSamplingRate==u.audioSamplingRate&&a.codecs==u.codecs&&a.contentType==u.contentType&&a.frameRate==u.frameRate&&a.height==u.height&&a.mimeType==u.mimeType&&a.channelsCount==u.channelsCount&&a.pixelAspectRatio==u.pixelAspectRatio&&a.width==u.width),p=u&&a&&u.label&&a.label&&a.label!==u.label;var g=u&&a&&u.language&&a.language&&a.language!==u.language;a=u&&a&&u.roles&&a.roles&&!gl(a.roles,u.roles),(p||g||a)&&$N(this,e,u.contentType)&&(s.Xg=u,a=new _e("audiotrackchange",new Map([["quality",u],["position",e]])),this.dispatchEvent(a)),f&&$N(this,e,u.contentType)&&(s.Xg=u,JSON.stringify(u),s=new _e("qualitychange",new Map([["quality",u],["position",e]])),this.dispatchEvent(s))}};function $N(e,n,s){return!!((e=e.h()[s])&&e.length>0&&(s=e[e.length-1].end,n>=e[0].start&&n<s))}function VJ(e,n){if((e=e.h()[n.contentType])&&e.length>0){var s=e[0].start,a=e[e.length-1].end,u=n.Ke;n.Ke=u.filter(function(f,p){return!(f.position<=s&&p+1<u.length&&u[p+1].position<=s||f.position>=a)})}else n.Ke=[]}function l1(e){var n={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(n.frameRate=e.frameRate||null,n.height=e.height||null,n.pixelAspectRatio=e.pixelAspectRatio||null,n.width=e.width||null),e.type=="audio"&&(n.audioSamplingRate=e.audioSamplingRate,n.channelsCount=e.channelsCount,n.label=e.label||null,n.language=e.language),n}function ug(e){Tt.call(this),this.h=new Map,this.i=e,this.g=null}V(ug,Tt),ug.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),Tt.prototype.release.call(this)};function e2(e,n){var s=n.schemeIdUri+"_"+n.id+"_"+(n.startTime.toFixed(1)+"_"+n.endTime.toFixed(1));e.h.has(s)||(e.h.set(s,n),n=new _e("regionadd",new Map([["region",n]])),e.dispatchEvent(n),GJ(e))}function GJ(e){e.g||(e.g=new Ke(function(){for(var n=e.i(),s=C(e.h),a=s.next();!a.done;a=s.next()){var u=C(a.value);a=u.next().value,u=u.next().value,u.endTime<n.start&&(e.h.delete(a),a=new _e("regionremove",new Map([["region",u]])),e.dispatchEvent(a))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).xa(2))}function u1(e,n,s,a,u){function f(p,g){return!(g.fastSwitching&&p.od&&p.Ce)}this.m=e,this.i=n,this.l=s,this.g=new Map,this.j=new Map,this.h=null,this.u=a,this.A=u||f}function HJ(e,n){e.l=n,e=C(e.g.values());for(var s=e.next();!s.done;s=e.next())s.value.g=n}function cg(e,n,s){if(s=s===void 0?!1:s,!e.i.segmentIndex||(e.h||(e.h=e.i.segmentIndex.fc(n,!0,e.u)),!e.h))return Promise.resolve();for(s&&e.h.next(),n=[];e.g.size<e.m&&(s=e.h.next().value,!!s);){var a=!0;if(s.isPreload()&&s.endByte!=null&&(a=!1),s.Vc()==2&&(a=!1),s.jc(!1)&&(a=!1),a&&s.ka&&n.push(VN(e,s.ka)),a&&!e.g.has(s)&&(a=new n2(e.l),n.push(qN(a,s,e.i)),e.g.set(s,a)),!e.A(s,e.i))break}return t2(e),Promise.all(n)}function VN(e,n){if(!e.i.segmentIndex||n.jc()||Array.from(e.j.keys()).some(function(u){return ig(u,n)}))return Promise.resolve();var s=new n2(e.l),a=qN(s,n,e.i);return e.j.set(n,s),a}function GN(e,n){n=C(n.keys());for(var s=n.next();!s.done;s=n.next())(s=s.value)&&dg(e,s)}function Jo(e){GN(e,e.g),GN(e,e.j),e.h=null}u1.prototype.eb=function(e,n){n=n===void 0?!1:n;for(var s=C(this.g.keys()),a=s.next();!a.done;a=s.next())a=a.value,e>a.endTime&&dg(this,a);n&&t2(this)},u1.prototype.$d=function(e){this.u=e,this.h&&this.h.$d(e)};function t2(e){if(e.g.size)for(var n=Array.from(e.g.keys()),s=C(e.j.keys()),a=s.next(),u={};!a.done;u={Ih:void 0},a=s.next())u.Ih=a.value,n.some(function(f){return function(p){return ig(p.ka,f.Ih)}}(u))||dg(e,u.Ih)}function HN(e,n){e.m=n;for(var s=Array.from(e.g.keys());s.length>n;){var a=s.pop();a&&dg(e,a)}t2(e)}function qJ(e,n){n&&n!==e.i&&(Jo(e),e.i=n)}function dg(e,n){var s=e.g;n instanceof $i&&(s=e.j),e=s.get(n),s.delete(n),e&&e.abort()}function n2(e){this.g=e,this.He=this.si=null}function qN(e,n,s){var a=new Uint8Array(0);return e.He=e.g(n,s,function(u){return X(function(f){if(f.g==1)return a.byteLength>0?a=Hn(a,u):a=u,e.si?O(f,e.si(a),3):f.B(0);a=new Uint8Array(0),re(f)})}),e.He.promise.catch(function(u){return u instanceof oe&&u.code==7001?Promise.resolve():Promise.reject(u)})}n2.prototype.abort=function(){this.He&&this.He.abort()},xe("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function r2(e){var n=es(e),s=n.split("/")[0];return e=Bi(e),{type:s,mimeType:n,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Se:null,colorGamut:null,frameRate:null,timescale:null}}function KJ(e,n,s){function a(Z){G=Z.name;var de=Z.reader;de.skip(24);var te=de.Ia(),ae=de.Ia();de.skip(50),L=String(te),I=String(ae),Z.reader.Qa()&&ft(Z)}function u(Z){var de=Y3(Z.reader);j=de.channelCount,U=de.sampleRate,f(Z.name)}function f(Z){switch(Z=Z.toLowerCase(),Z){case"avc1":case"avc3":g.push(Z+".42E01E"),w=!0;break;case"hev1":case"hvc1":g.push(Z+".1.6.L93.90"),w=!0;break;case"dvh1":case"dvhe":g.push(Z+".05.04"),w=!0;break;case"vp09":g.push(Z+".00.10.08"),w=!0;break;case"av01":g.push(Z+".0.01M.08"),w=!0;break;case"mp4a":p.push("mp4a.40.2"),y=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":p.push(Z),y=!0;break;case"apac":p.push("apac.31.00"),y=!0}}var p=[],g=[],y=!1,w=!1,b=null,I=null,L=null,j=null,U=null,F=null,B=null,q=null,G;if(new Jt().box("moov",ft).box("trak",ft).box("mdia",ft).X("mdhd",function(Z){Z=Xy(Z.reader,Z.version),b=Z.language,q=Z.timescale}).box("minf",ft).box("stbl",ft).X("stsd",Al).box("mp4a",function(Z){var de=Y3(Z.reader);j=de.channelCount,U=de.sampleRate,Z.reader.Qa()?ft(Z):f(Z.name)}).box("esds",function(Z){Z=Z.reader;for(var de="mp4a",te,ae;Z.Qa();){te=Z.ba();for(var he=Z.ba();he&128;)he=Z.ba();if(te==3)Z.Ia(),he=Z.ba(),he&128&&Z.Ia(),he&64&&Z.skip(Z.ba()),he&32&&Z.Ia();else if(te==4)ae=Z.ba(),Z.skip(12);else if(te==5)break}ae&&(de+="."+tg(ae),te==5&&Z.Qa()&&(te=Z.ba(),ae=(te&248)>>3,ae===31&&Z.Qa()&&(ae=32+((te&7)<<3)+((Z.ba()&224)>>5)),de+="."+ae)),p.push(de),y=!0}).box("ac-3",u).box("ec-3",u).box("ac-4",u).box("Opus",u).box("fLaC",u).box("apac",u).box("avc1",a).box("avc3",a).box("hev1",a).box("hvc1",a).box("dva1",a).box("dvav",a).box("dvh1",a).box("dvhe",a).box("vp09",a).box("av01",a).box("avcC",function(Z){var de=G||"";switch(G){case"dvav":de="avc3";break;case"dva1":de="avc1"}Z=Z.reader,Z.skip(1),Z=de+"."+tg(Z.ba())+tg(Z.ba())+tg(Z.ba()),g.push(Z),w=!0}).box("hvcC",function(Z){var de=G||"";switch(G){case"dvh1":de="hvc1";break;case"dvhe":de="hev1"}var te=Z.reader;te.skip(1),Z=te.ba();var ae=["","A","B","C"][Z>>6],he=Z&31,Ee=te.$(),Te=(Z&32)>>5?"H":"L";Z=[te.ba(),te.ba(),te.ba(),te.ba(),te.ba(),te.ba()],te=te.ba();for(var ge=0,ve=0;ve<32&&(ge|=Ee&1,ve!=31);ve++)ge<<=1,Ee>>=1;for(de=de+("."+ae+he)+("."+tg(ge,!0)),de+="."+Te+te,ae="",he=Z.length;he--;)((Te=Z[he])||ae)&&(ae="."+Te.toString(16).toUpperCase()+ae);de+=ae,g.push(de),w=!0}).box("dvcC",function(Z){var de=G||"";switch(G){case"hvc1":de="dvh1";break;case"hev1":de="dvhe";break;case"avc1":de="dva1";break;case"avc3":de="dvav";break;case"av01":de="dav1"}var te=Z.reader;te.skip(2),Z=te.ba(),te=te.ba(),g.push(de+"."+ns(Z>>1&127)+"."+ns(Z<<5&32|te>>3&31)),w=!0}).box("dvvC",function(Z){var de=G||"";switch(G){case"hvc1":de="dvh1";break;case"hev1":de="dvhe";break;case"avc1":de="dva1";break;case"avc3":de="dvav";break;case"av01":de="dav1"}var te=Z.reader;te.skip(2),Z=te.ba(),te=te.ba(),g.push(de+"."+ns(Z>>1&127)+"."+ns(Z<<5&32|te>>3&31)),w=!0}).X("vpcC",function(Z){var de=G||"",te=Z.reader;Z=te.ba();var ae=te.ba();te=te.ba()>>4&15,g.push(de+"."+ns(Z)+"."+ns(ae)+"."+ns(te)),w=!0}).box("av1C",function(Z){var de=G||"";switch(G){case"dav1":de="av01"}var te=Z.reader;te.skip(1),Z=te.ba(),te=te.ba();var ae=Z>>>5,he=(te&64)>>6;g.push(de+"."+ae+"."+ns(Z&31)+(te>>>7?"H":"M")+"."+ns(ae===2&&he?(te&32)>>5?12:10:he?10:8)+"."+((te&16)>>4)+"."+((te&8)>>3)+((te&4)>>2)+(te&3)+"."+ns(1)+"."+ns(1)+"."+ns(1)+".0"),w=!0}).box("enca",Hy).box("encv",ts).box("sinf",ft).box("frma",function(Z){Z=Pb(Z.reader).codec,f(Z)}).box("colr",function(Z){g=g.map(function(ae){if(ae.startsWith("av01.")){var he=Z.reader,Ee=he.Wa(),Te=he.bc(4,!1),ge=String.fromCharCode(Te[0]);if(ge+=String.fromCharCode(Te[1]),ge+=String.fromCharCode(Te[2]),ge+=String.fromCharCode(Te[3]),ge==="nclx"){Te=he.Ia(),ge=he.Ia();var ve=he.Ia(),Ie=he.ba()>>7,Le=ae.split(".");Le.length==10&&(Le[6]=ns(Te),Le[7]=ns(ge),Le[8]=ns(ve),Le[9]=String(Ie),ae=Le.join("."))}he.seek(Ee)}return ae});var de=zQ(Z.reader),te=de.colorGamut;F=de.Se,B=te}).parse(e||n,!0,!0),!p.length&&!g.length)return null;var z=y&&!w,J=new Map;if(w&&!s){s=new Yo("video/mp4"),e&&s.init(e);try{s.Yf(n);for(var ie=C(s.Eg()),Y=ie.next();!Y.done;Y=ie.next()){var ne=Y.value;J.set(ne,ne)}}catch{}s.je()}return{type:z?"audio":"video",mimeType:z?"audio/mp4":"video/mp4",codecs:i2(p.concat(g)).join(", "),language:b,height:I,width:L,channelCount:j,sampleRate:U,closedCaptions:J,Se:F,colorGamut:B,frameRate:null,timescale:q}}function i2(e){var n=new Set,s=[];e=C(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;var u=ku(a);n.has(u)||(s.push(a),n.add(u))}return n=eb("audio",s),a=eb("video",s),e=eb(mt,s),a=zJ(a),n=n.concat(a).concat(e),s.length&&!n.length?s:n}function zJ(e){if(e.length<=1)return e;var n=e.find(function(s){return s.startsWith("dvav.")||s.startsWith("dva1.")||s.startsWith("dvh1.")||s.startsWith("dvhe.")||s.startsWith("dav1.")||s.startsWith("dvc1.")||s.startsWith("dvi1.")});return n?ui('video/mp4; codecs="'+n+'"')?[n]:e.filter(function(s){return s!=n}):e}function WJ(e){var n=null;return new Jt().box("moov",ft).box("trak",ft).box("mdia",ft).box("minf",ft).box("stbl",ft).X("stsd",Al).box("encv",ts).box("enca",Hy).box("sinf",ft).box("schi",ft).X("tenc",function(s){s=s.reader,s.ba(),s.ba(),s.ba(),s.ba(),s=s.bc(16,!1),n=pl(s)}).parse(e,!0),n}function s2(e,n,s){var a,u,f,p,g;return X(function(y){if(y.g==1)return a=n,a.cryptoKey?y.B(2):O(y,a.fetchKey(),3);if(u=a.iv,!u)for(u=nt(new ArrayBuffer(16)),f=a.firstMediaSequenceNumber+s,p=u.byteLength-1;p>=0;p--)u[p]=f&255,f>>=8;return n.blockCipherMode=="CBC"?g={name:"AES-CBC",iv:u}:g={name:"AES-CTR",counter:u,length:64},y.return(l.crypto.subtle.decrypt(g,a.cryptoKey,e))})}function af(e,n,s){var a,u,f,p,g,y,w;return X(function(b){switch(b.g){case 1:return a=lf(e),(u=YJ.get(a))?b.return(u):(f=0,p=Kn([e],s),ce(b,2),p.method="HEAD",O(b,n.request(f,p).promise,4));case 4:g=b.h,u=g.headers["content-type"],se(b,3);break;case 2:if(y=ue(b),!y||y.code!=1002&&y.code!=1001){b.B(3);break}return p.method="GET",O(b,n.request(f,p).promise,6);case 6:w=b.h,u=w.headers["content-type"];case 3:return b.return(u?u.toLowerCase().split(";").shift():"")}})}function lf(e){return e=new Cn(e).Tb.split("/").pop().split("."),e.length==1?"":e.pop().toLowerCase()}function uf(e,n,s,a,u){return e=Kn(e,a,u),(n!=0||s!=null)&&(e.headers.Range=s?"bytes="+n+"-"+s:"bytes="+n+"-"),e}var YJ=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");function KN(e,n){var s=this;this.g=n,this.j=e,this.i=null,this.L=new Map,this.D=1,this.C=this.u=null,this.T=0,this.h=new Map,this.M=!1,this.V=null,this.F=!1,this.l=new Yh(function(){return XJ(s)}),this.P=Date.now()/1e3,this.m=new Map,this.R={projection:null,hfov:null},this.Z=0,this.W=1/0,this.H=null,this.O=[],this.A=new Ke(function(){if(s.j&&s.g)if(s.j.presentationTimeline.U()){var a=s.j.presentationTimeline.hc(),u=s.j.presentationTimeline.Lb();u-a>1?CJ(s.g.ha,a,u):qb(s.g.ha)}else qb(s.g.ha),s.A&&s.A.stop();else s.A&&s.A.stop()}),this.I=null,this.J=!1,this.K=new Ke(function(){var a=s.g.video;!a.ended&&s.I&&(s.J=!0,a.currentTime=s.I,s.I=null)}),this.G=new Dt}d=KN.prototype,d.destroy=function(){return this.l.destroy()};function XJ(e){var n,s,a,u,f,p,g;return X(function(y){if(y.g==1){for(e.A&&e.A.stop(),e.A=null,e.K&&e.K.stop(),e.K=null,e.G&&(e.G.release(),e.G=null),n=[],s=C(e.h.values()),a=s.next();!a.done;a=s.next())u=a.value,_l(u),n.push(p1(u)),u.na&&(Jo(u.na),u.na=null);for(f=C(e.m.values()),p=f.next();!p.done;p=f.next())g=p.value,Jo(g);return O(y,Promise.all(n),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.I=null,re(y)})}d.configure=function(e){if(this.i=e,this.V=new y3({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var n=this.h.get("audio");n&&n.na&&(Jo(n.na),n.na=null),n=C(this.m.keys());for(var s=n.next();!s.done;s=n.next())s=s.value,Jo(this.m.get(s)),this.m.delete(s)}for(e.disableTextPrefetch&&(n=this.h.get(mt))&&n.na&&(Jo(n.na),n.na=null),e.disableVideoPrefetch&&(n=this.h.get("video"))&&n.na&&(Jo(n.na),n.na=null),n=C(this.h.keys()),s=n.next();!s.done;s=n.next())s=this.h.get(s.value),s.na?(HN(s.na,e.segmentPrefetchLimit),e.segmentPrefetchLimit>0||(Jo(s.na),s.na=null)):e.segmentPrefetchLimit>0&&(s.na=a2(this,s.stream));e.disableAudioPrefetch||rZ(this)};function QJ(e,n,s){e.j.presentationTimeline.U()||(e.Z=n,e.W=s)}d.start=function(e){var n=this;return X(function(s){if(s.g==1)return O(s,nZ(n,e||new Map),2);ln(n.l),n.M=!0,re(s)})};function JJ(e,n){var s,a,u,f,p,g;X(function(y){switch(y.g){case 1:return s=qn,e.T++,a=e.T,ce(y,2),O(y,mN(e.g.ha,s.Va),4);case 4:se(y,3);break;case 2:u=ue(y),e.g&&e.g.onError(u);case 3:f=Pn(n.mimeType,n.codecs),r1(e.g.ha,f,e.j.sequenceMode,n.external),p=e.g.ha.Z,(p.isTextVisible()||e.i.alwaysStreamText)&&e.T==a&&(g=d1(e,n),e.h.set(s.Va,g),ci(e,g,0)),re(y)}})}function ZJ(e){var n=e.h.get(mt);n&&(_l(n),p1(n).catch(function(){}),e.H=e.h.get(mt),e.h.delete(mt),n.stream&&n.stream.closeSegmentIndex&&n.stream.closeSegmentIndex()),e.C=null}function zN(e,n){for(var s=e.g.Za()<0,a=C(e.h.values()),u=a.next();!u.done;u=a.next())u=u.value,u.Ba&&u.Ba.$d(s),u.na&&u.na.$d(s);for(a=C(e.m.values()),u=a.next();!u.done;u=a.next())u.value.$d(s);(s=e.h.get("video"))&&(a=s.stream)&&(n?(n=a.trickModeVideo)&&!s.$c&&(cf(e,n,!1,0,!1),s.$c=a):(n=s.$c)&&(s.$c=null,cf(e,n,!0,0,!1)))}function WN(e,n,s,a,u,f){s=s===void 0?!1:s,a=a===void 0?0:a,u=u===void 0?!1:u,f=f===void 0?!1:f,e.u=n,e.M&&(n.video&&cf(e,n.video,s,a,u,f),n.audio&&cf(e,n.audio,s,a,u,f))}function c1(e,n){X(function(s){if(s.g==1)return e.H=null,e.C=n,e.M?n.segmentIndex?s.B(2):O(s,n.createSegmentIndex(),2):s.return();cf(e,n,!0,0,!1),re(s)})}function eZ(e){var n=e.h.get(mt);n&&cf(e,n.stream,!0,0,!0)}function tZ(e,n){for(var s=C(e.L.entries()),a=s.next();!a.done;a=s.next()){var u=C(a.value);a=u.next().value,u=u.next().value,a.includes(n.type)&&(u(),e.L.delete(a))}}function cf(e,n,s,a,u,f){var p=e.h.get(n.type);p||n.type!=mt?p&&(p.$c&&(n.trickModeVideo?(p.$c=n,n=n.trickModeVideo):p.$c=null),p.stream!=n||u)&&(e.m.has(n)?p.na=e.m.get(n):p.na&&qJ(p.na,n),n.type==mt&&p.stream!=n&&(u=Pn(n.mimeType,n.codecs),r1(e.g.ha,u,e.j.sequenceMode,n.external)),!e.m.has(p.stream)&&p.stream.closeSegmentIndex&&(p.Sa?(u="("+p.type+":"+p.stream.id+")",e.L.has(u)||e.L.set(u,p.stream.closeSegmentIndex)):p.stream.closeSegmentIndex()),u=p.stream.isAudioMuxedInVideo!=n.isAudioMuxedInVideo,p.stream=n,p.Ba=null,p.Lg=!!f,n.dependencyStream?p.Qc=d1(e,n.dependencyStream):p.Qc=null,ZN(e),u&&(p.xb=null,p.Ec=null,p.Dc=null,n.isAudioMuxedInVideo&&(n=null,p.type==="video"?n=e.h.get("audio"):p.type==="audio"&&(n=e.h.get("video")),n&&(p1(n).catch(function(){}),n.xb=null,n.Ec=null,n.Dc=null,o2(e,n),YN(e,n).catch(function(g){e.g&&e.g.onError(g)})))),s?p.ec?p.fe=!0:p.Sa?(p.dc=!0,p.Dd=a,p.fe=!0):(_l(p),c2(e,p,!0,a).catch(function(g){e.g&&e.g.onError(g)})):p.Sa||p.yb||ci(e,p,0),YN(e,p).catch(function(g){e.g&&e.g.onError(g)})):JJ(e,n)}function YN(e,n){var s,a,u;return X(function(f){if(f.g==1)return n.ab?(s=n.stream,a=n.ab,s.segmentIndex?f.B(2):O(f,s.createSegmentIndex(),2)):f.return();if(f.g!=4)return u=s.dependencyStream,!u||u.segmentIndex?f.B(4):O(f,u.createSegmentIndex(),4);if(n.ab!=a||n.stream!=s)return f.return();var p=e.g.Bc(),g=Ed(e.g.ha,n.type),y=n.stream.segmentIndex.find(n.Ra?n.Ra.endTime:p),w=y==null?null:n.stream.segmentIndex.get(y);y=w?Db(w):null,w&&!y&&(y=(w.endTime-w.getStartTime())*(n.stream.bandwidth||e.u.bandwidth)/8),y?((w=w.ka)&&(y+=(w.endByte?w.endByte+1-w.startByte:null)||0),w=e.g.getBandwidthEstimate(),p=y*8/w<(g||0)-p-e.i.rebufferingGoal||n.ab.h.g>y):p=!0,p&&n.ab.abort(),re(f)})}d.sd=function(){if(this.g){for(var e=this.g.Bc(),n=C(this.h.keys()),s=n.next();!s.done;s=n.next()){var a=s.value;s=this.h.get(a);var u;if((u=!this.J)&&(u=this.g.ha,a==mt?(u=u.h,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=rf(u,a),u=Nb(u,e)),u=!u),u){if(this.P=0,s.na&&(s.na.h=null),s.type==="audio"){u=C(this.m.values());for(var f=u.next();!f.done;f=u.next())f.value.h=null}s.Ba=null,(Ed(this.g.ha,a)!=null||s.Sa)&&o2(this,s),s.ab&&(s.ab.abort(),s.ab=null),a===mt&&(a=this.g.ha,a.K&&a.K.je()),s.sd=!0}!this.J||s.ec||s.Sa||s.yb||ci(this,s,0)}fg(this)&&f2(this)}};function o2(e,n){n.ec||n.dc||(n.Sa?(n.dc=!0,n.Dd=0):Hb(e.g.ha,n.type)==null?n.yb==null&&ci(e,n,0):(_l(n),c2(e,n,!1,0).catch(function(s){e.g&&e.g.onError(s)})))}function nZ(e,n){var s,a,u,f,p,g,y,w;return X(function(b){if(b.g==1){if(!e.u)throw new oe(2,5,5006);return s=g1(e,!0),a=e.g.ha,O(b,a.init(s,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(ln(e.l),e.updateDuration(),u=C(s.keys()),f=u.next();!f.done;f=u.next())p=f.value,g=s.get(p),e.h.has(p)||(y=d1(e,g),n.has(g.id)&&(w=n.get(g.id),HJ(w,function(I,L,j){return f1(I,L,j||null,e.i.retryParameters,e.g.Gc)}),y.na=w),e.h.set(p,y),ci(e,y,0));ZN(e),re(b)})}function d1(e,n){var s={stream:n,type:n.type,Ba:null,na:a2(e,n),Ra:null,xb:null,Of:null,Ec:null,Dc:null,Mf:null,Nf:null,$c:null,endOfStream:!1,Sa:!1,yb:null,dc:!1,Dd:0,fe:!1,ec:!1,sd:!0,Lg:!1,Xh:!1,xe:!1,ab:null,Qc:null};return n.dependencyStream&&(s.Qc=d1(e,n.dependencyStream)),s}function a2(e,n){if(n.type==="video"&&e.i.disableVideoPrefetch||n.type==="audio"&&e.i.disableAudioPrefetch||n.type===mt&&(n.mimeType=="application/cea-608"||n.mimeType=="application/cea-708")||n.type===mt&&e.i.disableTextPrefetch)return null;if(e.m.has(n))return e.m.get(n);var s=e.h.get(n.type);return(s=s&&s.na)&&n===s.i?s:e.i.segmentPrefetchLimit>0?new u1(e.i.segmentPrefetchLimit,n,function(a,u,f){return f1(a,u,f||null,e.i.retryParameters,e.g.Gc)},e.g.Za()<0,e.g.Am):null}function rZ(e){for(var n=e.i.segmentPrefetchLimit,s=e.i.prefetchAudioLanguages,a=C(e.j.variants),u=a.next(),f={};!u.done;f={Sb:void 0},u=a.next())if(f.Sb=u.value,f.Sb.audio)if(e.m.has(f.Sb.audio)){if(u=e.m.get(f.Sb.audio),HN(u,n),!(n>0&&s.some(function(g){return function(y){return jh(g.Sb.audio.language,y)}}(f)))){var p=e.h.get(f.Sb.audio.type);u!==(p&&p.na)&&Jo(u),e.m.delete(f.Sb.audio)}}else n<=0||!s.some(function(g){return function(y){return jh(g.Sb.audio.language,y)}}(f))||!(u=a2(e,f.Sb.audio))||(f.Sb.audio.segmentIndex||f.Sb.audio.createSegmentIndex(),e.m.set(f.Sb.audio,u))}d.updateDuration=function(){var e=W3(),n=this.j.presentationTimeline.getDuration();n<1/0?(e&&(this.A&&this.A.stop(),qb(this.g.ha)),this.g.ha.Fb(n)):e?(this.A&&this.A.xa(.5),this.g.ha.Fb(1/0)):this.g.ha.Fb(4294967296)};function iZ(e,n){var s,a,u,f,p,g,y,w,b;return X(function(I){switch(I.g){case 1:if(ln(e.l),s=qn,n.Sa||n.yb==null||n.ec)return I.return();if(n.yb=null,!n.dc){I.B(2);break}return O(I,c2(e,n,n.fe,n.Dd),3);case 3:return I.return();case 2:if(tZ(e,n),n.stream.segmentIndex){I.B(4);break}return a=n.stream,ce(I,5),O(I,n.stream.createSegmentIndex(),7);case 7:se(I,6);break;case 5:return u=ue(I),O(I,d2(e,n,u),8);case 8:return I.return();case 6:if(a!=n.stream)return a.closeSegmentIndex&&a.closeSegmentIndex(),n.Sa||n.yb||ci(e,n,0),I.return();case 4:if(!n.Qc){I.B(9);break}if(n.Qc.stream.segmentIndex){I.B(9);break}return ce(I,11),O(I,n.Qc.stream.createSegmentIndex(),13);case 13:se(I,9);break;case 11:ue(I);case 9:ce(I,14),f=sZ(e,n),f!=null&&(ci(e,n,f),n.xe=!1),se(I,15);break;case 14:return p=ue(I),O(I,d2(e,n,p),16);case 16:return I.return();case 15:if(n.type===s.Va)return I.return();if(g=[],n.stream&&!n.stream.isAudioMuxedInVideo&&g.push(n),y=n.type===s.ia?s.Ga:s.ia,(w=e.h.get(y))&&w.stream&&!w.stream.isAudioMuxedInVideo&&g.push(w),!e.M||!g.every(function(L){return L.endOfStream})){I.B(0);break}return O(I,e.g.ha.endOfStream(),18);case 18:ln(e.l),b=e.g.ha.getDuration(),b!=0&&b<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.Fb(b),re(I)}})}function sZ(e,n){if(u2(n))return bJ(e.g.ha,n.stream.originalId||""),null;if(n.type==mt&&AJ(e.g.ha),n.stream.isAudioMuxedInVideo&&n.type=="audio")return null;if(n.type!=mt&&Du(e.g.ha))return m1(e,!0),null;var s=e.i.updateIntervalSeconds/Math.max(1,Math.abs(e.g.Za()));if(!pN(e.g.ha)&&n.type!=mt)return s/2;var a=e.g.Bc();if(n.type==="audio")for(var u=C(e.m.keys()),f=u.next();!f.done;f=u.next())f=e.m.get(f.value),f.eb(a,!0),cg(f,a);u=n.Ra?n.Ra.endTime:a;var p=wJ(e.g.ha,n.type,a);f=Math.max(1,Math.max(e.i.rebufferingGoal,e.i.bufferingGoal)*e.D);var g=e.j.presentationTimeline.getDuration()-u,y=Ed(e.g.ha,n.type);if(g<1e-6&&y)return n.endOfStream=!0,n.type=="video"&&(s=e.h.get(mt))&&u2(s)&&(s.endOfStream=!0),null;if(n.endOfStream=!1,p>=f)return s/2;if(g=!n.Ba,y=XN(e,n,a,y),!y)return e=1/0,(n=n.Ra)&&(e=n.endTime-n.startTime),Math.min(e/2,s);p=n.xb;var w=y.ka;p&&w&&ig(w,p)&&(p.g=w.g),p=!1,g&&n.Lg&&(p=!0,n.Lg=!1),g=1/0,w=Array.from(e.h.values()),w=C(w);for(var b=w.next();!b.done;b=w.next())b=b.value,u2(b)||b.Ba&&!b.Ba.current()||(g=Math.min(g,b.Ra?b.Ra.endTime:a));return u>=g+e.j.presentationTimeline.h?s:(n.na&&n.Ba&&!e.m.has(n.stream)&&(n.na.eb(y.startTime+.001),cg(n.na,y.startTime).catch(function(){})),fg(e)&&cZ(e,n,y)||(oZ(e,n,a,y,p).catch(function(){}),n.Qc&&QN(e,n.Qc,a,f)),null)}function XN(e,n,s,a){if(n.Ba)return(s=n.Ba.current())&&n.Ra&&Math.abs(n.Ra.startTime-s.startTime)<.001&&(s=n.Ba.next().value),s;if(n.Ra||a)return s=n.Ra?n.Ra.endTime:a,e=e.g.Za()<0,n.stream.segmentIndex&&(n.Ba=n.stream.segmentIndex.fc(s,!1,e)),n.Ba&&n.Ba.next().value;a=e.j.sequenceMode||fg(e)?0:e.i.inaccurateManifestTolerance;var u=Math.max(s-a,0);e=e.g.Za()<0;var f=null;return a&&(n.stream.segmentIndex&&(n.Ba=n.stream.segmentIndex.fc(u,!1,e)),f=n.Ba&&n.Ba.next().value),f||(n.stream.segmentIndex&&(n.Ba=n.stream.segmentIndex.fc(s,!1,e)),f=n.Ba&&n.Ba.next().value),f}function oZ(e,n,s,a,u){var f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie;return X(function(Y){switch(Y.g){case 1:if(f=qn,p=n.stream,g=n.Ba,n.Sa=!0,ce(Y,2),a.Vc()==2)throw new oe(1,1,1011);return O(Y,lZ(e,n,a,u),4);case 4:return ln(e.l),e.F?Y.return():(y=p.mimeType=="video/mp4"||p.mimeType=="audio/mp4",w=l.ReadableStream,e.i.lowLatencyMode&&e.j.isLowLatency&&w&&y&&(e.j.type!="HLS"||a.u)?(L=new Uint8Array(0),U=j=!1,B=function(ne){var Z,de,te;return X(function(ae){switch(ae.g){case 1:if(j||(U=!0,ln(e.l),e.F))return ae.return();if(ce(ae,2),L=Hn(L,ne),Z=!1,de=0,new Jt().box("mdat",function(he){de=he.size+he.start,Z=!0}).parse(L,!1,!0),!Z){ae.B(4);break}return te=L.subarray(0,de),L=L.subarray(de),O(ae,l2(e,n,s,p,a,te,!0,u),5);case 5:n.na&&n.Ba&&cg(n.na,a.startTime,!0);case 4:se(ae,0);break;case 2:F=ue(ae),re(ae)}})},O(Y,hg(e,n,a,B),9)):(b=hg(e,n,a),O(Y,b,7)));case 7:return I=Y.h,ln(e.l),e.F?Y.return():(ln(e.l),n.dc?(n.Sa=!1,ci(e,n,0),Y.return()):O(Y,l2(e,n,s,p,a,I,!1,u),6));case 9:if(q=Y.h,F)throw F;if(U){Y.B(10);break}return j=!0,ln(e.l),e.F?Y.return():n.dc?(n.Sa=!1,ci(e,n,0),Y.return()):O(Y,l2(e,n,s,p,a,q,!1,u),10);case 10:n.na&&n.Ba&&cg(n.na,a.startTime,!0);case 6:if(ln(e.l),e.F)return Y.return();n.Ra=a,g.next(),n.Sa=!1,n.Xh=!1,G=e.g.ha.Rc(),z=G[n.type],JSON.stringify(z),n.dc||(J=null,n.type===f.Ga?J=e.h.get(f.ia):n.type===f.ia&&(J=e.h.get(f.Ga)),J&&J.type==f.ia?e.g.Rd(a,n.stream,J.stream.isAudioMuxedInVideo,!1):e.g.Rd(a,n.stream,n.stream.codecs.includes(","),!1)),_l(n),ci(e,n,0),se(Y,0);break;case 2:if(ie=ue(Y),ln(e.l,ie),e.F)return Y.return();if(n.Sa=!1,ie.code==7001)n.Sa=!1,_l(n),ci(e,n,0),Y.B(0);else if(n.type==f.Va&&e.i.ignoreTextStreamFailures)e.h.delete(f.Va),Y.B(0);else return ie.code==3017?O(Y,aZ(e,n,ie),0):(n.xe=!0,ie.category==1&&n.na&&dg(n.na,a),ie.severity=2,O(Y,d2(e,n,ie),0))}})}function QN(e,n,s,a){var u,f,p,g,y,w,b,I,L,j,U,F,B;return X(function(q){switch(q.g){case 1:for(u=qn,f=n.stream,y=(g=(p=f.segmentIndex)&&p.fc(s))&&g.next().value;y&&e.O.includes(y.startTime);)y=g&&g.next().value;if(!y){q.B(0);break}if(w=y.ka,!w||ig(w,n.xb)){q.B(3);break}return n.xb=w,ce(q,4),O(q,hg(e,n,w),6);case 6:b=q.h;var G=e.g.ha;G.D&&wy(G.D,b,0,f),e.O=[],se(q,3);break;case 4:throw I=ue(q),n.xb=null,I;case 3:if(n.Ra&&n.Ra==y){q.B(0);break}return n.Ra=y,ce(q,8),O(q,hg(e,n,y),10);case 10:L=q.h,G=e.g.ha,G.D&&wy(G.D,L,0,f),e.O.push(y.startTime),se(q,9);break;case 8:throw j=ue(q),n.Ra=null,j;case 9:if(n.dc||(U=null,n.type===u.Ga?U=e.h.get(u.ia):n.type===u.ia&&(U=e.h.get(u.Ga)),U&&U.type==u.ia?e.g.Rd(y,n.stream,U.stream.isAudioMuxedInVideo,!0):e.g.Rd(y,n.stream,n.stream.codecs.includes(","),!0)),F=Math.max.apply(Math,[0].concat(K(e.O))),B=e.g.Bc(),B+a>F)return O(q,QN(e,n,y.startTime,a),0);q.B(0)}})}function aZ(e,n,s){var a,u,f,p,g,y,w;return X(function(b){switch(b.g){case 1:if(a=Array.from(e.h.values()),a.some(function(I){return I!=n&&I.Xh})){b.B(2);break}if(e.i.avoidEvictionOnQuotaExceededError)return u=h2(e,s),e.g.disableStream(n.stream,u)||ci(e,n,4),b.return();if(f=Math.round(100*e.D),f>20){e.D-=.2,b.B(3);break}if(f>4){e.D-=.04,b.B(3);break}if(p=h2(e,s),g=e.g.disableStream(n.stream,p),!g){n.xe=!0,e.F=!0,e.g.onError(s),b.B(5);break}return e.D=1,y=e.g.Bc(),O(b,h1(e,n,y),5);case 5:return b.return();case 3:return n.Xh=!0,w=e.g.Bc(),O(b,h1(e,n,w),2);case 2:ci(e,n,4),re(b)}})}function lZ(e,n,s,a){var u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z;return X(function(J){switch(J.g){case 1:if(u=qn,f=n.Ra==null,p=[],g=Math.max(0,Math.max(s.appendWindowStart,e.Z)-.1),y=Math.min(s.appendWindowEnd,e.W)+.1,w=s.codecs||n.stream.codecs,b=ku(w),I=es(s.mimeType||n.stream.mimeType),L=s.timestampOffset,L==n.Of&&g==n.Ec&&y==n.Dc&&b==n.Mf&&I==n.Nf){J.B(2);break}if(j=n.Mf&&n.Nf&&DJ(e.g.ha,n.type,I,w,g1(e)),!j){J.B(3);break}if(U=null,n.type===u.Ga?U=e.h.get(u.ia):n.type===u.ia&&(U=e.h.get(u.Ga)),!U){J.B(3);break}return O(J,p1(U).catch(function(){}),5);case 5:U.xb=null,U.Ec=null,U.Dc=null,o2(e,U);case 3:return O(J,JN(e,n,L,g,y,s,b,I),2);case 2:return ig(s.ka,n.xb)||(n.xb=s.ka,s.l&&s.ka&&(F=hg(e,n,s.ka),B=function(){var ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge;return X(function(ve){switch(ve.g){case 1:return ce(ve,2),O(ve,F,4);case 4:return ie=ve.h,ln(e.l),Y=null,ne=new Map,Z={projection:null,hfov:null},n.stream&&(de=n.stream.videoLayout)&&(te=de.split("/"),te.includes("PROJ-RECT")?Z.projection="rect":te.includes("PROJ-EQUI")?Z.projection="equi":te.includes("PROJ-HEQU")?Z.projection="hequ":te.includes("PROJ-PRIM")?Z.projection="prim":te.includes("PROJ-AIV")&&(Z.projection="hequ")),ae=new Jt,ae.box("moov",ft).box("trak",ft).box("mdia",ft).X("mdhd",function(Ie){Y=Xy(Ie.reader,Ie.version).timescale}).box("hdlr",function(Ie){switch(Ie=Ie.reader,Ie.skip(8),Ie.pd()){case"soun":ne.set(u.ia,Y);break;case"vide":ne.set(u.Ga,Y)}Y=null}),n.type!==u.Ga||Z.projection||ae.box("minf",ft).box("stbl",ft).X("stsd",Al).box("encv",ts).box("avc1",ts).box("avc3",ts).box("hev1",ts).box("hvc1",ts).box("dvav",ts).box("dva1",ts).box("dvh1",ts).box("dvhe",ts).box("dvc1",ts).box("dvi1",ts).box("vexu",ft).box("proj",ft).X("prji",function(Ie){Ie=Ie.reader.pd(),Z.projection=Ie}).box("hfov",function(Ie){Ie=Ie.reader.$()/1e3,Z.hfov=Ie}),ae.parse(ie,!0,!0),n.type===u.Ga&&uZ(e,Z),ne.has(n.type)?s.ka.timescale=ne.get(n.type):Y!=null&&(s.ka.timescale=Y),he=n.stream.segmentIndex,he instanceof wn&&(Ee=FJ(he,s.startTime)),Te=n.stream.closedCaptions&&n.stream.closedCaptions.size>0,O(ve,e.g.Pi(n.type,ie),5);case 5:return O(ve,i1(e.g.ha,n.type,ie,null,n.stream,Te,n.sd,a,!1,!1,Ee),6);case 6:se(ve,0);break;case 2:throw ge=ue(ve),n.xb=null,ge}})},q=s.startTime,f&&(G=Ed(e.g.ha,n.type),G!=null&&(q=G)),e.g.Xl(q,s.ka),p.push(B()))),z=n.Ra?n.Ra.i:-1,s.i!=z&&p.push(IJ(e.g.ha,n.type,s.startTime)),O(J,Promise.all(p),0)}})}function JN(e,n,s,a,u,f,p,g){var y,w,b,I,L;return X(function(j){switch(j.g){case 1:if(y=qn,w=g1(e),ce(j,2),n.Ec=a,n.Dc=u,p&&(n.Mf=p),g&&(n.Nf=g),n.Of=s,b=e.j.sequenceMode||e.j.type=="HLS",I=null,n.type===y.Ga?I=e.h.get(y.ia):n.type===y.ia&&(I=e.h.get(y.Ga)),!(I&&I.stream&&I.stream.isAudioMuxedInVideo)){j.B(4);break}return O(j,gN(e.g.ha,I.type,s,a,u,b,I.stream.mimeType,I.stream.codecs,w),4);case 4:return O(j,gN(e.g.ha,n.type,s,a,u,b,f.mimeType||n.stream.mimeType,f.codecs||n.stream.codecs,w),6);case 6:se(j,0);break;case 2:throw L=ue(j),n.Ec=null,n.Dc=null,n.Mf=null,n.Nf=null,n.Of=null,L}})}function l2(e,n,s,a,u,f,p,g){p=p===void 0?!1:p,g=g===void 0?!1:g;var y,w,b,I;return X(function(L){switch(L.g){case 1:return y=a.closedCaptions&&a.closedCaptions.size>0,e.i.shouldFixTimestampOffset&&(w=a.mimeType=="video/mp4"||a.mimeType=="audio/mp4",b=null,u.ka&&(b=u.ka.timescale),w&&b&&a.type==="video"&&e.j.type=="DASH"&&new Jt().box("moof",ft).box("traf",ft).X("tfdt",function(j){var U,F,B,q,G,z;return X(function(J){return U=Yy(j.reader,j.version),F=U.baseMediaDecodeTime,F?(B=-F/b,q=Number(n.Of)||0,q<B?(G=n.Ec,z=n.Dc,O(J,JN(e,n,B,G,z,u),0)):J.B(0)):J.return()})}).parse(f,!1,p)),O(L,h1(e,n,s),2);case 2:return ln(e.l),I=n.sd,n.sd=!1,O(L,e.g.Pi(n.type,f),3);case 3:return O(L,i1(e.g.ha,n.type,f,u,a,y,I,g,p),4);case 4:ln(e.l),re(L)}})}function h1(e,n,s){var a,u,f,p,g,y,w,b,I;return X(function(L){if(L.g==1)return e.H==n&&(e.H=null),a=n.stream.segmentIndex,a instanceof wn&&(a.eb(e.j.presentationTimeline.Mb()),u=[],UJ(a,function(j){u.push(j.tf())})),f=Math.max(e.i.bufferBehind*e.D,e.j.presentationTimeline.h),p=Hb(e.g.ha,n.type),p==null?L.return():(g=s-p,y=e.i.evictionGoal,w=e.j.presentationTimeline.hc(),b=e.j.presentationTimeline.Lb(),I=g-f,b-w>y&&(I=Math.max(g-f,w-y-p)),I<=y?L.return():O(L,e.g.ha.remove(n.type,p,p+I,u),2));if(L.g!=4)return ln(e.l),e.H?O(L,h1(e,e.H,s),4):L.B(0);ln(e.l),re(L)})}function u2(e){return e&&e.type==mt&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function hg(e,n,s,a){var u,f,p,g,y;return X(function(w){switch(w.g){case 1:if(u=s.jc())return w.return(u);if(f=null,n.na){var b=n.na,I=b.g;s instanceof $i&&(I=b.j),I.has(s)?(b=I.get(s),a&&(b.si=a),f=b.He):f=null}return f||(f=f1(s,n.stream,a||null,e.i.retryParameters,e.g.Gc)),p=0,n.Ba&&(p=n.Ba.h),n.ab=f,O(w,f.promise,2);case 2:if(g=w.h,n.ab=null,y=g.data,!s.aesKey){w.B(3);break}return O(w,s2(y,s.aesKey,p),4);case 4:y=w.h;case 3:return w.return(y)}})}function f1(e,n,s,a,u,f){f=f===void 0?!1:f;var p=e instanceof Xe?e:void 0,g=p?1:0;return e=uf(e.S(),e.startByte,e.endByte,a,s),e.contentType=n.type,u.request(ys,e,{type:g,stream:n,segment:p,isPreload:f})}function c2(e,n,s,a){var u,f;return X(function(p){if(p.g==1)return n.dc=!1,n.fe=!1,n.Dd=0,n.ec=!0,n.Ra=null,n.Ba=null,n.na&&!e.m.has(n.stream)&&Jo(n.na),a?(u=e.g.Bc(),f=e.g.ha.getDuration(),O(p,e.g.ha.remove(n.type,u+a,f),3)):O(p,mN(e.g.ha,n.type),4);if(p.g!=3)return ln(e.l),s?O(p,e.g.ha.flush(n.type),3):p.B(3);ln(e.l),n.ec=!1,n.endOfStream=!1,n.Sa||n.yb||ci(e,n,0),re(p)})}function ci(e,n,s){var a=n.type;(a!=mt||e.h.has(a))&&(n.yb=new Ym(function(){var u;return X(function(f){if(f.g==1)return ce(f,2),O(f,iZ(e,n),4);if(f.g!=2)return se(f,0);u=ue(f),e.g&&e.g.onError(u),re(f)})}).Y(s))}function _l(e){e.yb!=null&&(e.yb.stop(),e.yb=null)}function p1(e){return X(function(n){return e.ab?O(n,e.ab.abort(),0):n.B(0)})}function d2(e,n,s){var a;return X(function(u){if(u.g==1)return s.code==3024?(n.Sa=!1,_l(n),ci(e,n,0),u.return()):O(u,x3(e.V),2);if(ln(e.l),s.category===1&&s.code!=1003){if(n.$c)return zN(e,!1),u.return();a=h2(e,s),s.handled=e.g.disableStream(n.stream,a),s.handled&&(s.severity=1)}(!s.handled||s.code!=1011)&&e.g.onError(s),s.handled||e.i.failureCallback(s),re(u)})}function h2(e,n){return e.i.maxDisabledTime===0&&n.code==1011?1:e.i.maxDisabledTime}function m1(e,n){n=n===void 0?!1:n;var s,a,u,f,p,g;return X(function(y){if(y.g==1){if(s=Date.now()/1e3,a=e.i.minTimeBetweenRecoveries,!n){if(!e.i.allowMediaSourceRecoveries||s-e.P<a)return y.return(!1);e.P=s}return u=qn,(f=e.h.get(u.ia))&&(_l(f),f.ab&&(f.ab.abort(),f.ab=null),f.xb=null,f.Ec=null,f.Dc=null,f.Sa=!1,f.dc=!1,f.Dd=0,f.fe=!1,f.ec=!1,f.Ba&&f.Ba.ai()),(p=e.h.get(u.Ga))&&(_l(p),p.ab&&(p.ab.abort(),p.ab=null),p.xb=null,p.Ec=null,p.Dc=null,p.Sa=!1,p.dc=!1,p.Dd=0,p.fe=!1,p.ec=!1,p.Ba&&p.Ba.ai()),g=e.g.video.paused,O(y,xN(e.g.ha,g1(e)),2)}return!p||p.ec||p.Sa||p.yb||ci(e,p,0),!f||f.ec||f.Sa||f.yb||ci(e,f,0),g||e.g.video.play(),y.return(!0)})}function uZ(e,n){if(e.R.projection!=n.projection||e.R.hfov!=n.hfov){if(n.projection!=null||n.hfov!=null){var s=new Map().set("detail",n);s=new _e("spatialvideoinfo",s)}else s=new _e("nospatialvideoinfo");s.cancelable=!0,e.g.onEvent(s),e.R=n}}function fg(e){if(e.i.crossBoundaryStrategy!=="keep")return!0;var n=ht();if(n.Pb()){if(!n.qg()){for(n=C(e.h.keys()),s=n.next();!s.done;s=n.next())if(s=e.h.get(s.value),s.type!==qn.Va&&(s=s.stream)&&s.fullMimeTypes&&s.fullMimeTypes.size>1){for(e=new Set,n=C(s.fullMimeTypes),s=n.next();!s.done;s=n.next())e.add(qm(s.value));return e.size>1}}}else{n=C(e.h.keys());for(var s=n.next();!s.done;s=n.next())if(s=e.h.get(s.value),s.type!==qn.Va&&(s=s.stream)&&s.fullMimeTypes&&s.fullMimeTypes.size>1)return!0}return!1}function ZN(e){e.G.Ta(),fg(e)&&(e.G.o(e.g.video,"waiting",function(){return f2(e)}),e.G.o(e.g.video,"timeupdate",function(){return f2(e)}))}function f2(e){if(fg(e)){e.K.stop();var n=e.g.Bc(),s=e.h.get("video")||e.h.get("audio");s&&(s=s.xb)&&s.g!==null&&(n=s.g-n,n<0||n>1||(e.I=s.g+.1,e.K.Y(n)))}}function cZ(e,n,s){if(n.type===mt)return!1;var a=n.xb;if(!a)return!1;var u=s.ka;if(s=a.g!==u.g,e.i.crossBoundaryStrategy==="reset_to_encrypted"&&(a.encrypted||u.encrypted||(s=!1),a.encrypted&&(e.i.crossBoundaryStrategy="keep")),e.i.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&a.encrypted==u.encrypted&&(s=!1),e.i.crossBoundaryStrategy==="keep"&&a.mimeType&&u.mimeType){var f=Dn(Bi(a.mimeType)),p=Dn(Bi(a.mimeType));a.mimeType==u.mimeType&&f==p&&(s=!1)}return s&&(e.J||n.sd)&&(e.J=!1,m1(e,!0).then(function(){var g=new Map().set("oldEncrypted",a.encrypted).set("newEncrypted",u.encrypted);e.g.onEvent(new _e("boundarycrossed",g))})),s}function g1(e,n){function s(f){if(f.fullMimeTypes&&f.fullMimeTypes.size>1&&e.h.has(f.type)){var p=e.h.get(f.type),g=Ed(e.g.ha,p.type),y=e.g.Bc();(p=XN(e,p,y,g))&&p.codecs&&p.mimeType&&(f.codecs=p.codecs,f.mimeType=p.mimeType)}}n=n===void 0?!1:n;var a=new Map,u=e.u.audio;return u&&(s(u),a.set("audio",u)),(u=e.u.video)&&(s(u),a.set("video",u)),n&&e.C&&a.set(mt,e.C),a}function v1(){}function pg(e,n,s,a,u){var f=u in a,p=f?s.constructor==Object&&Object.keys(a).length==0:s.constructor==Object&&Object.keys(s).length==0,g=f||p,y=!0,w;for(w in n){var b=u+"."+w,I=f?a[u]:s[w];g||w in s?n[w]===void 0?I===void 0||g?delete e[w]:e[w]=Eo(I):p?e[w]=n[w]:I.constructor==Object&&n[w]&&n[w].constructor==Object?(e[w]||(e[w]=Eo(I)),b=pg(e[w],n[w],I,a,b),y=y&&b):typeof n[w]!=typeof I||n[w]==null||typeof n[w]!="function"&&n[w].constructor!=I.constructor?(nr("Invalid config, wrong type for "+b),y=!1):typeof s[w]=="function"&&s[w].length!=n[w].length?($e("Unexpected number of arguments for "+b),e[w]=n[w]):e[w]=Array.isArray(e[w])?n[w].slice():n[w]:(nr("Invalid config, unrecognized key "+b),y=!1)}return y}function mg(e,n){for(var s={},a=s,u=0,f=0;u=e.indexOf(".",u),!(u<0);)(u==0||e[u-1]!="\\")&&(f=e.substring(f,u).replace(/\\\./g,"."),a[f]={},a=a[f],f=u+1),u+=1;return a[e.substring(f).replace(/\\\./g,".")]=n,s}function df(e,n){return e&&n}function p2(e,n){function s(f){for(var p=C(Object.keys(f)),g=p.next();!g.done;g=p.next())if(g=g.value,!(f[g]instanceof HTMLElement))if(u(f[g])&&Object.keys(f[g]).length===0)delete f[g];else{var y=f[g];Array.isArray(y)&&y.length===0||typeof f[g]=="function"?delete f[g]:u(f[g])&&(s(f[g]),Object.keys(f[g]).length===0&&delete f[g])}}function a(f,p){return Object.keys(f).reduce(function(g,y){var w=f[y];return p.hasOwnProperty(y)?w instanceof HTMLElement&&p[y]instanceof HTMLElement?w.isEqualNode(p[y])||(g[y]=w):u(w)&&u(p[y])?(w=a(w,p[y]),(Object.keys(w).length>0||!u(w))&&(g[y]=w)):Array.isArray(w)&&Array.isArray(p[y])?sd(w,p[y])||(g[y]=w):Number.isNaN(w)&&Number.isNaN(p[y])||w!==p[y]&&(g[y]=w):g[y]=w,g},{})}function u(f){return f&&typeof f=="object"&&!Array.isArray(f)}return e=a(e,n),s(e),e}xe("shaka.util.ConfigUtils",v1),v1.getDifferenceFromConfigObjects=p2,v1.convertToConfigObject=mg,v1.mergeConfigObjects=pg,xe("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2});function Vi(){}function eM(e){return e=Aa(e),new Cn(e).Ib}function gg(e,n,s){function a(g){Ui(f).setUint32(p,g.byteLength,!0),p+=4,f.set(nt(g),p),p+=g.byteLength}if(!s||!s.byteLength)throw new oe(2,6,6015);var u;typeof n=="string"?u=ZE(n,!0):u=n,e=Aa(e),e=ZE(e,!0);var f=new Uint8Array(12+e.byteLength+u.byteLength+s.byteLength),p=0;return a(e),a(u),a(s),f}function m2(e,n,s){return n!=="skd"?e:(n=s.serverCertificate,s=Aa(e).split("skd://").pop(),gg(e,s,n))}function y1(e,n){e===2&&(e=n.drmInfo)&&Dm(e.keySystem)&&(n.headers["Content-Type"]="application/octet-stream")}xe("shaka.drm.FairPlay",Vi),Vi.commonFairPlayResponse=function(e,n){if(e===2&&(e=n.originalRequest.drmInfo)&&Dm(e.keySystem)){try{var s=yn(n.data)}catch{return}if(e=!1,s=s.trim(),s.substr(0,5)==="<ckc>"&&s.substr(-6)==="</ckc>"&&(s=s.slice(5,-6),e=!0),!e)try{var a=JSON.parse(s);a.ckc&&(s=a.ckc,e=!0),a.CkcMessage&&(s=a.CkcMessage,e=!0),a.License&&(s=a.License,e=!0)}catch{}e&&(n.data=vr(Bs(s)))}},Vi.muxFairPlayRequest=function(e,n){y1(e,n)},Vi.expressplayFairPlayRequest=function(e,n){if(e===2){var s=n.drmInfo;s&&Dm(s.keySystem)&&y1(e,n)}},Vi.conaxFairPlayRequest=function(e,n){y1(e,n)},Vi.ezdrmFairPlayRequest=function(e,n){y1(e,n)},Vi.verimatrixFairPlayRequest=function(e,n){e===2&&(e=n.drmInfo)&&Dm(e.keySystem)&&(e=nt(n.body),e=fl(e),n.headers["Content-Type"]="application/x-www-form-urlencoded",n.body=To("spc="+e))},Vi.muxInitDataTransform=function(e,n,s){return m2(e,n,s)},Vi.expressplayInitDataTransform=function(e,n,s){return m2(e,n,s)},Vi.conaxInitDataTransform=function(e,n,s){if(n!=="skd")return e;n=s.serverCertificate,s=Aa(e).split("skd://").pop().split("?").shift(),s=l.atob(s);var a=new ArrayBuffer(s.length*2);a=SD(a);for(var u=0,f=s.length;u<f;u++)a[u]=s.charCodeAt(u);return gg(e,a,n)},Vi.ezdrmInitDataTransform=function(e,n,s){return n!=="skd"?e:(n=s.serverCertificate,s=Aa(e).split(";").pop(),gg(e,s,n))},Vi.verimatrixInitDataTransform=function(e,n,s){return m2(e,n,s)},Vi.initDataTransform=gg,Vi.defaultGetContentId=eM,Vi.isFairPlaySupported=function(){var e;return X(function(n){return n.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ce(n,2),O(n,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):n.g!=2?n.return(!0):(ue(n),n.return(!1))})};function x1(e,n,s){for(s=s===void 0?!0:s,this.h=e,this.g=new Set([e]),n=n||[],e=C(n),n=e.next();!n.done;n=e.next())this.add(n.value,s)}x1.prototype.add=function(e,n){var s=this.h;n=n===void 0?!0:n;var a;if(!(a=!!s.audio!=!!e.audio||!!s.video!=!!e.video||s.language!=e.language)&&(a=s.audio&&e.audio)){a=s.audio;var u=e.audio;a=!(!((!a.channelsCount||!u.channelsCount||a.channelsCount>2||u.channelsCount>2)&&a.channelsCount!=u.channelsCount||a.spatialAudio!==u.spatialAudio||n&&!tM(a,u))&&sd(a.roles,u.roles)&&a.groupId===u.groupId)}return!a&&(a=s.video&&e.video)&&(s=s.video,a=e.video,a=!((!n||tM(s,a))&&sd(s.roles,a.roles))),a?!1:(this.g.add(e),!0)},x1.prototype.values=function(){return this.g.values()};function tM(e,n){return e.mimeType!=n.mimeType?!1:(e=e.codecs.split(",").map(function(s){return ku(s)}),n=n.codecs.split(",").map(function(s){return ku(s)}),sd(e,n))}xe("shaka.media.AdaptationSet",x1);function vg(){this.h=this.g=null}vg.prototype.configure=function(e){this.g=e},vg.prototype.getConfiguration=function(){return this.g},vg.prototype.create=function(e){var n;if(this.g.language){var s=dZ(e,this.g.language);s.length&&(n=s)}n||(n=e.filter(function(f){return f.primary}),n=n.length?n:e),e=hZ(n,this.g.role),e.length&&(n=e),e=fZ(n,this.g.videoRole),e.length&&(n=e),this.g.videoLayout&&(e=yZ(n,this.g.videoLayout),e.length&&(n=e)),this.g.hdrLevel&&(e=vZ(n,this.g.hdrLevel),e.length&&(n=e));var a=[this.g.channelCount,this.g.preferredAudioChannelCount];if(e=a.filter(function(f,p){return f&&a.indexOf(f)===p}),e.length){for(e=C(e),s=e.next();!s.done;s=e.next())if(s=gZ(n,s.value),s.length){n=s;break}}this.g.audioLabel&&(e=pZ(n,this.g.audioLabel),e.length&&(n=e)),this.g.videoLabel&&(e=mZ(n,this.g.videoLabel),e.length&&(n=e)),e=xZ(n,this.g.spatialAudio),e.length&&(n=e);var u=[this.g.audioCodec,this.g.activeAudioCodec].concat(K(this.g.preferredAudioCodecs));if(e=u.filter(function(f,p){return f&&u.indexOf(f)===p}),e.length){for(e=C(e),s=e.next();!s.done;s=e.next())if(s=TZ(n,s.value),s.length){n=s;break}}return e=ht(),e=this.g.codecSwitchingStrategy=="smooth"&&e.Pb(),this.h=new x1(n[0],n,!e)},vg.prototype.getLastAdaptationSet=function(){return this.h};function dZ(e,n){n=Ht(n);var s=Ty(n,e.map(function(a){return nb(a)}));return s?e.filter(function(a){return s==nb(a)}):[]}function hZ(e,n){return e.filter(function(s){return s.audio?n?s.audio.roles.includes(n):s.audio.roles.length==0:!1})}function fZ(e,n){return e.filter(function(s){return s.video?n?s.video.roles.includes(n):s.video.roles.length==0:!1})}function pZ(e,n){return e.filter(function(s){return s.audio&&s.audio.label?s.audio.label.toLowerCase()==n.toLowerCase():!1})}function mZ(e,n){return e.filter(function(s){return s.video&&s.video.label?s.video.label.toLowerCase()==n.toLowerCase():!1})}function gZ(e,n){return e.filter(function(s){return!(s.audio&&s.audio.channelsCount&&s.audio.channelsCount>n)}).sort(function(s,a){return s.audio||a.audio?s.audio?a.audio?(a.audio.channelsCount||0)-(s.audio.channelsCount||0):1:-1:0})}function vZ(e,n){if(n=="AUTO"){var s=e.some(function(a){return!!(a.video&&a.video.hdr&&a.video.hdr=="HLG")});n=ht().Jd(s)}return e.filter(function(a){return!(a.video&&a.video.hdr&&a.video.hdr!=n)})}function yZ(e,n){return e.filter(function(s){return!(s.video&&s.video.videoLayout&&s.video.videoLayout!=n)})}function xZ(e,n){return e.filter(function(s){return!(s.audio&&s.audio.spatialAudio!=n)})}function TZ(e,n){return e.filter(function(s){return!(s.audio&&s.audio.codecs!=n)})}function T1(){}function hf(){var e=1/0,n=ht();navigator.connection&&navigator.connection.saveData&&(e=360);var s={retryParameters:bo(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(g,y,w){return l.shakaMediaKeysPolyfill==="apple"&&y=="skd"&&(y=w.serverCertificate,w=eM(g),g=gg(g,w,y)),g},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},a="reload";n.Pb()&&(a="smooth");var u={retryParameters:bo(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,enableAudioGroups:!0,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:S1,manifestPreprocessorTXml:w1,sequenceMode:!1,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:n.wd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:S1,manifestPreprocessorTXml:w1,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},f={trackSelectionCallback:function(g){return X(function(y){return y.return(g)})},downloadSizeCallback:function(g){var y;return X(function(w){return w.g==1?navigator.storage&&navigator.storage.estimate?O(w,navigator.storage.estimate(),3):w.return(!0):(y=w.h,w.return(y.usage+g<y.quota*.95))})},progressCallback:function(g,y){return df([g,y])},usePersistentLicense:!0,numberOfParallelDownloads:5},p={drm:s,manifest:u,streaming:{retryParameters:bo(),failureCallback:function(g){return df([g])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!0,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:a,addExtraFeaturesToSourceBuffer:function(g){return df([g],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(g,y,w){return df([g,y,w])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:f,abrFactory:function(){return new Sn},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(vg,[null].concat(K(Pe.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!1},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredAudioRole:"",preferredVideoRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1,targets:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:1/0,preloadPrevItem:!0,repeatMode:0}};return f.trackSelectionCallback=function(g){return X(function(y){return y.return(SZ(g,p.preferredAudioLanguage,p.preferredVideoHdrLevel))})},n.bb(p)}function nM(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function Rl(e,n,s){var a={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return pg(e,n,s||hf(),a,"")}function SZ(e,n,s){var a=s;a=="AUTO"&&(s=e.some(function(g){return!!(g.hdr&&g.hdr=="HLG")}),a=ht().Jd(s));var u=e.filter(function(g){return!(g.type!="variant"||g.hdr&&g.hdr!=a)});s=[];var f=Ty(n,u.map(function(g){return g.language}));f&&(s=u.filter(function(g){return Ht(g.language)==f})),s.length==0&&(s=u.filter(function(g){return g.primary})),s.length==0&&(u.map(function(g){return g.language}),s=u);var p=s.filter(function(g){return g.height&&g.height<=480});for(p.length&&(p.sort(function(g,y){return y.height-g.height}),s=p.filter(function(g){return g.height==p[0].height})),n=[],s.length&&(u=Math.floor(s.length/2),s.sort(function(g,y){return g.bandwidth-y.bandwidth}),n.push(s[u])),e=C(e),s=e.next();!s.done;s=e.next())s=s.value,s.type!=mt&&s.type!="image"||n.push(s);return n}function S1(e){return df([e],e)}function w1(e){return df([e],e)}xe("shaka.util.PlayerConfiguration",T1),T1.mergeConfigObjects=Rl,T1.createDefaultForLL=nM,T1.createDefault=hf;function wZ(){this.g=null,this.h=[]}function g2(e,n){var s=0;e.g&&e.g.state==n&&(s+=e.g.duration),e=C(e.h);for(var a=e.next();!a.done;a=e.next())a=a.value,s+=a.state==n?a.duration:0;return s}function EZ(e){function n(f){return{timestamp:f.timestamp,state:f.state,duration:f.duration}}for(var s=[],a=C(e.h),u=a.next();!u.done;u=a.next())s.push(n(u.value));return e.g&&s.push(n(e.g)),s}function bZ(){this.i=this.h=null,this.g=[]}function v2(e,n,s){e.i!=n&&(e.i=n,e.g.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:s,bandwidth:null}))}function E1(){this.D=this.V=NaN,this.l="",this.j=this.qj=this.A=this.C=this.K=this.F=this.u=this.m=this.J=this.G=this.i=this.R=this.T=this.M=this.O=this.P=NaN,this.L=0,this.H=this.I=NaN,this.g=new wZ,this.h=new bZ}function AZ(e,n,s){e.P=n,e.O=s}function rM(e,n,s){e.V=n,e.D=s}function IZ(e,n){e.i=isNaN(e.i)?n:Math.max(e.i,n)}function iM(e,n){e.j=isNaN(e.j)?n:e.j+n}function CZ(e){var n=e.V,s=e.D,a=e.l,u=e.C,f=e.O,p=e.P,g=e.M,y=e.T,w=e.R,b=e.A,I=e.i,L=e.G,j=e.J,U=e.m,F=g2(e.g,"playing"),B=g2(e.g,"paused"),q=g2(e.g,"buffering"),G=e.u,z=e.F,J=e.K,ie=e.qj,Y=e.j,ne=e.L,Z=e.I,de=e.H,te=EZ(e.g),ae=[];e=C(e.h.g);for(var he=e.next();!he.done;he=e.next())he=he.value,ae.push({timestamp:he.timestamp,id:he.id,type:he.type,fromAdaptation:he.fromAdaptation,bandwidth:he.bandwidth});return{width:n,height:s,currentCodecs:a,streamBandwidth:u,decodedFrames:f,droppedFrames:p,corruptedFrames:g,stallsDetected:y,gapsJumped:w,estimatedBandwidth:b,completionPercent:I,loadLatency:L,manifestTimeSeconds:j,drmTimeSeconds:U,playTime:F,pauseTime:B,bufferingTime:q,licenseTime:G,liveLatency:z,maxSegmentDuration:J,manifestSizeBytes:ie,bytesDownloaded:Y,nonFatalErrorCount:ne,manifestPeriodCount:Z,manifestGapCount:de,stateHistory:te,switchHistory:ae}}function Gs(e,n,s,a){Tt.call(this),this.M=e,this.T=n,this.ya=a.networkingEngine,this.u=s,this.D=null,this.ua=0,this.La=a.Ed,this.G=a.Ql,this.Na=a.Rl,this.g=a.config,this.m=this.H=this.h=null,this.ea=!1,this.I=a.bm,this.oa=!1,this.j=null,this.Z=!1,this.A=null,this.L=new Map,this.sa=!1,this.Fa=a.am,this.V=new E1,this.aa=new en,this.C=new en,this.O=null,this.l=!1,this.W=a.vk,this.R=this.i=null,this.P=!1,this.K=[],this.J=[],this.F=!0}V(Gs,Tt);function yg(e,n,s){(e=n?e.J:e.K)?e.push(s):s()}function kZ(e){if(e.J)for(var n=C(e.J),s=n.next();!s.done;s=n.next())s=s.value,s();e.J=null}function sM(e,n){if(e.O=n,e.P=!0,e.K){n=C(e.K);for(var s=n.next();!s.done;s=n.next())s=s.value,s()}e.K=null}d=Gs.prototype,d.getStartTime=function(){return this.u},d.jd=function(){return this.M},d.yh=function(){return this.h};function _Z(e){return e.oa=!0,e.I}d.getStats=function(){return this.V};function RZ(e){return e.Z=!0,e.j}d.il=function(){return this.i?fd(this.i):null},d.hl=function(){return this.R?pd(this.R):null};function LZ(e){return e.sa=!0,e.L}d.start=function(){var e=this;(function(){var n;return X(function(s){switch(s.g){case 1:return O(s,Promise.resolve(),2);case 2:return ce(s,3),O(s,PZ(e),5);case 5:if(Mu(e),l.shakaMediaKeysPolyfill==="webkit"){s.B(6);break}return O(s,oM(e),7);case 7:Mu(e);case 6:return O(s,NZ(e),8);case 8:if(Mu(e),!e.W){s.B(9);break}return O(s,MZ(e),10);case 10:Mu(e);case 9:if(!e.W||!e.j){s.B(11);break}return O(s,MQ(e.j),12);case 12:Mu(e);case 11:e.C.resolve(),se(s,0);break;case 3:n=ue(s),n instanceof oe&&(n.code==7001||n.code==7003)||e.C.reject(n),re(s)}})})()},d.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Tt.prototype.dispatchEvent.call(this,e)},d.onError=function(e){e.severity===2&&(this.C.reject(e),this.destroy());var n=new Map().set("detail",e);n=new _e("error",n),this.dispatchEvent(n),n.defaultPrevented&&(e.handled=!0)};function Mu(e){if(e.l)throw new oe(2,7,7003)}function y2(e,n){e.dispatchEvent(new _e("onstatechange",new Map().set("state",n)))}function PZ(e){var n,s,a,u,f,p;return X(function(g){switch(g.g){case 1:if(y2(e,"manifest-parser"),e.m||(e.H=OD(e.M,e.T),e.m=e.H(),e.m.configure(e.g.manifest,function(){return e.F})),n=Date.now()/1e3,y2(e,"manifest"),e.h){g.B(2);break}return O(g,e.m.start(e.M,e.Na),3);case 3:return e.h=g.h,lM(e.h),O(g,DZ(e),2);case 2:return e.aa.resolve(),s=new _e("manifestparsed",void 0),O(g,Promise.resolve(),5);case 5:if(e.dispatchEvent(s),e.h.variants.length==0)throw new oe(2,4,4036);if(lM(e.h),a=G3(e.G,e.h),!a){g.B(6);break}return u=new _e("trackschanged",void 0),O(g,Promise.resolve(),7);case 7:Mu(e),e.dispatchEvent(u);case 6:f=Date.now()/1e3,p=f-n,e.V.J=p,re(g)}})}function oM(e,n){var s,a,u,f;return X(function(p){switch(p.g){case 1:return!e.h||e.j?p.return():(y2(e,"drm-engine"),e.ua=Date.now()/1e3,e.j=e.La(),e.G.g=e.j,e.j.configure(e.g.drm,function(){return e.F}),s=Fy(e.h.variants),a=!0,e.h&&e.h.presentationTimeline&&(a=e.h.presentationTimeline.U()),O(p,R3(e.j,s,e.h.offlineSessionIds,a),2));case 2:if(Mu(e),!n){p.B(3);break}return O(p,e.j.Ub(n),4);case 4:Mu(e);case 3:return O(p,V3(e.G,e.h),5);case 5:if(u=p.h,!u){p.B(0);break}return f=new _e("trackschanged",void 0),O(p,Promise.resolve(),7);case 7:e.dispatchEvent(f),re(p)}})}d.configure=function(e,n){e=mg(e,n),Rl(this.g,e)},d.getConfiguration=function(){return Eo(this.g)};function DZ(e){return X(function(n){return e.D||(e.D=e.g.adaptationSetCriteriaFactory(),e.D.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredAudioRole,videoRole:e.g.preferredVideoRole,channelCount:0,hdrLevel:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,audioLabel:e.g.preferredAudioLabel,videoLabel:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),e.i||!e.h.variants.length||e.h.variants.length!=1&&e.h.type!="HLS"?n.B(0):(e.i=x2(e),e.i?O(n,aM(e.i),0):n.B(0))})}function NZ(e){return X(function(n){return n.g==1?!e.i||e.h.variants.includes(e.i)?n.B(0):O(n,OZ(e.i),3):(e.i=x2(e),e.i?O(n,aM(e.i),0):n.B(0))})}function MZ(e){var n,s,a,u,f;return X(function(p){return!e.i&&(n=x2(e))&&(e.i=n),e.i?(s=e.h.presentationTimeline.U(),a=[],u=e.i,u.video&&a.push(T2(e,u.video,s)),u.audio&&a.push(T2(e,u.audio,s)),(f=Kh(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&m3(u.audio,f,e.g)&&(a.push(T2(e,f,s)),e.R=f),O(p,Promise.all(a),0)):p.B(0)})}function x2(e){if(!e.A){var n=e.g.abrFactory;e.A=n(),e.A.configure(e.g.abr)}return n=Fy(e.h.variants),n=e.D.create(n),e.A.setVariants(Array.from(n.values())),e.A.chooseVariant(!0)}function T2(e,n,s){var a,u,f,p,g;return X(function(y){return y.g==1?(a=e.g.streaming.segmentPrefetchLimit||2,u=new u1(a,n,function(w,b,I){return f1(w,b,I||null,e.g.streaming.retryParameters,e.ya,e.F)},!1),e.L.set(n.id,u),n.segmentIndex?y.B(2):O(y,n.createSegmentIndex(),2)):(f=typeof e.u=="number"?e.u:0,p=n.segmentIndex.fc(f),g=null,p&&(g=p.current(),g||(g=p.next().value)),g||(g=Qo(n.segmentIndex)),g?s?g.ka?O(y,VN(u,g.ka),0):y.B(0):O(y,cg(u,g.startTime),0):y.B(0))})}function aM(e){var n,s,a,u;return X(function(f){for(n=[],s=C([e.video,e.audio]),a=s.next();!a.done;a=s.next())(u=a.value)&&!u.segmentIndex&&n.push(u.createSegmentIndex());return n.length>0?O(f,Promise.all(n),0):f.B(0)})}function OZ(e){var n,s,a,u;return X(function(f){for(n=[],s=C([e.video,e.audio]),a=s.next();!a.done;a=s.next())(u=a.value)&&u.segmentIndex&&u.closeSegmentIndex&&n.push(u.closeSegmentIndex());return n.length>0?O(f,Promise.all(n),0):f.B(0)})}d.Hm=function(){return this.C},d.destroy=function(){var e=this,n,s,a;return X(function(u){if(u.g==1)return e.l=!0,!e.m||e.ea?u.B(2):O(u,e.m.stop(),2);if(u.g!=4)return e.A&&e.A.release(),e.I&&!e.oa&&e.I.release(),!e.j||e.Z?u.B(4):O(u,e.j.destroy(),4);if(e.L.size>0&&!e.sa)for(n=C(e.L.values()),s=n.next();!s.done;s=n.next())a=s.value,Jo(a);re(u)})};function lM(e){function n(s){return s.video&&s.audio||s.video&&s.video.codecs.includes(",")}e.variants.some(n)&&(e.variants=e.variants.filter(n))}xe("shaka.media.PreloadManager",Gs),Gs.prototype.destroy=Gs.prototype.destroy,Gs.prototype.waitForFinish=Gs.prototype.Hm,Gs.prototype.getPrefetchedTextTrack=Gs.prototype.hl,Gs.prototype.getPrefetchedVariantTrack=Gs.prototype.il;function Ad(e,n){Tt.call(this);var s=this;this.i=e,this.l=n,this.g=new Map,this.m=[{Bd:null,zd:ff,ld:function(a,u){return Ll(s,"enter",a,u)}},{Bd:xg,zd:ff,ld:function(a,u){return Ll(s,"enter",a,u)}},{Bd:Tg,zd:ff,ld:function(a,u){return Ll(s,"enter",a,u)}},{Bd:ff,zd:xg,ld:function(a,u){return Ll(s,"exit",a,u)}},{Bd:ff,zd:Tg,ld:function(a,u){return Ll(s,"exit",a,u)}},{Bd:xg,zd:Tg,ld:function(a,u){u?Ll(s,"skip",a,u):(Ll(s,"enter",a,u),Ll(s,"exit",a,u))}},{Bd:Tg,zd:xg,ld:function(a,u){return Ll(s,"skip",a,u)}}],this.h=new Dt,this.h.o(this.i,"regionremove",function(a){s.g.delete(a.region)})}V(Ad,Tt),Ad.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Tt.prototype.release.call(this)},Ad.prototype.j=function(e,n){if(!this.l||e!=0){this.l=!1;for(var s=C(this.i.h.values()),a=s.next();!a.done;a=s.next()){a=a.value;var u=this.g.get(a),f=e<a.startTime?xg:e>a.endTime?Tg:ff;this.g.set(a,f);for(var p=C(this.m),g=p.next();!g.done;g=p.next())g=g.value,g.Bd==u&&g.zd==f&&g.ld(a,n)}}};function Ll(e,n,s,a){n=new _e(n,new Map([["region",s],["seeking",a]])),e.dispatchEvent(n)}var xg=1,ff=2,Tg=3;/*
	 @license
	 Copyright 2013 Ali Al Dallal

	 Licensed under the MIT license.

	 Permission is hereby granted, free of charge, to any person obtaining a copy
	 of this software and associated documentation files (the "Software"), to deal
	 in the Software without restriction, including without limitation the rights
	 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 copies of the Software, and to permit persons to whom the Software is
	 furnished to do so, subject to the following conditions:

	 The above copyright notice and this permission notice shall be included in
	 all copies or substantial portions of the Software.

	 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	 SOFTWARE.
	*/for(var Ao={ach:"Lwo",ady:"",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Ti",ar:"","ar-AR":"","ar-MA":"","ar-SA":" ()","ay-BO":"Aymar aru",az:"Azrbaycan dili","az-AZ":"Azrbaycan dili","be-BY":"",bg:"","bg-BG":"",bn:"","bn-IN":" ()","bn-BD":"()","bs-BA":"Bosanski",ca:"Catal","ca-ES":"Catal",cak:"Maya Kaqchikel","ck-US":" (tsalagi)",cs:"etina","cs-CZ":"etina",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (sterreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbina",el:"","el-GR":"",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Espaol","es-AR":"Espaol (Argentine)","es-419":"Espaol (Latinoamrica)","es-CL":"Espaol (Chile)","es-CO":"Espaol (Colombia)","es-EC":"Espaol (Ecuador)","es-ES":"Espaol (Espaa)","es-LA":"Espaol (Latinoamrica)","es-NI":"Espaol (Nicaragua)","es-MX":"Espaol (Mxico)","es-US":"Espaol (Estados Unidos)","es-VE":"Espaol (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"","fa-IR":"","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Froyskt",fr:"Franais","fr-CA":"Franais (Canada)","fr-FR":"Franais (France)","fr-BE":"Franais (Belgique)","fr-CH":"Franais (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avae'","gu-IN":"","gx-GR":" ",he:"","he-IL":"",hi:"","hi-IN":"",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbina",ht:"Kreyl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"slenska","is-IS":"slenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"","ja-JP":"","jv-ID":"Basa Jawa","ka-GE":"","kk-KZ":"",km:"","km-KH":"",kab:"Taqbaylit",kn:"","kn-IN":" (India)",ko:"","ko-KR":" ()",ku:"Kurd","ku-TR":"Kurd",la:"Latin","la-VA":"Latin",lb:"Ltzebuergesch","li-NL":"Lmbrgs",lt:"Lietuvi","lt-LT":"Lietuvi",lv:"Latvieu","lv-LV":"Latvieu",mai:", ","mg-MG":"Malagasy",mk:"","mk-MK":" ()",ml:"","ml-IN":"","mn-MN":"",mr:"","mr-IN":"",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"",nb:"Norsk (bokml)","nb-NO":"Norsk (bokml)",ne:"","ne-NP":"",nl:"Nederlands","nl-BE":"Nederlands (Belgi)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"",pa:"","pa-IN":" ( )",pl:"Polski","pl-PL":"Polski","ps-AF":"",pt:"Portugus","pt-BR":"Portugus (Brasil)","pt-PT":"Portugus (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Romn","ro-RO":"Romn",ru:"","ru-RU":"","sa-IN":"","se-NO":"Davvismegiella","si-LK":"",sk:"Slovenina","sk-SK":"Slovenina (Slovakia)",sl:"Slovenina","sl-SI":"Slovenina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"","sr-RS":" (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"","ta-IN":"",te:"","te-IN":"",tg:" ","tg-TJ":"",th:"","th-TH":" ()",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Trke","tr-TR":"Trke","tt-RU":"",uk:"","uk-UA":"",ur:"","ur-PK":"",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Ting Vit","vi-VN":"Ting Vit","xh-ZA":"isiXhosa",yi:"","yi-DE":" (German)",zh:"","zh-HANS":"","zh-HANT":"","zh-CN":"","zh-HK":"","zh-SG":"","zh-TW":"","zu-ZA":"isiZulu"},uM=C(Object.keys(Ao)),S2=uM.next();!S2.done;S2=uM.next()){var cM=S2.value;Ao[cM.toLowerCase()]=Ao[cM]}function dM(e,n){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(p){return dM(p,e)}).join("");if(!e.payload)return e.payload;var s=[],a=e.fontWeight>=Gh,u=e.fontStyle==Hh,f=e.textDecoration.includes(xl);return a&&s.push(["b"]),u&&s.push(["i"]),f&&s.push(["u"]),u=e.color,u==""&&n&&(u=n.color),a="",(u=hM(u))&&(a+="."+u),u=e.backgroundColor,u==""&&n&&(u=n.backgroundColor),(n=hM(u))&&(a+=".bg_"+n),a&&s.push(["c",a]),s.reduceRight(function(p,g){var y=C(g);return g=y.next().value,y=y.next().value,"<"+g+(y===void 0?"":y)+">"+p+"</"+g+">"},e.payload)}function hM(e){e=e.toLowerCase();var n=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(n?e="#"+(parseInt(n[1],10)|256).toString(16).slice(1)+(parseInt(n[2],10)|256).toString(16).slice(1)+(parseInt(n[3],10)|256).toString(16).slice(1):e.startsWith("#")&&e.length>7&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function w2(e,n){var s=[];e=C(fM(e));for(var a=e.next();!a.done;a=e.next())if(a=a.value,a.isContainer)s.push.apply(s,K(w2(a.nestedCues,a)));else{var u=a.clone();u.nestedCues=[],u.payload=dM(a,n),s.push(u)}return s}function fM(e){var n=[];e=C(e);for(var s=e.next(),a={};!s.done;a={Ug:void 0},s=e.next())a.Ug=s.value,n.some(function(u){return function(f){return Ry(u.Ug,f)}}(a))||n.push(a.Ug);return n}function jZ(e){function n(a){for(var u=5381,f=a.length;f;)u=u*33^a.charCodeAt(--f);return(u>>>0).toString()}if(e.startTime>=e.endTime)return null;var s=new VTTCue(e.startTime,e.endTime,e.payload);s.id=n(e.startTime.toString())+n(e.endTime.toString())+n(e.payload),s.lineAlign=e.lineAlign,s.positionAlign=e.positionAlign,e.size&&(s.size=e.size);try{s.align=e.textAlign}catch{}return e.textAlign=="center"&&s.align!="center"&&(s.align="middle"),e.writingMode=="vertical-lr"?s.vertical="lr":e.writingMode=="vertical-rl"&&(s.vertical="rl"),e.lineInterpretation==1&&(s.snapToLines=!1),e.line!=null&&(s.line=e.line),e.position!=null&&(s.position=e.position),s}function pM(e,n){var s=w2(n),a=[];n=e.cues?Array.from(e.cues):[],s=C(s);for(var u=s.next(),f={};!u.done;f={Ld:void 0},u=s.next())f.Ld=u.value,!n.some(function(p){return function(g){return g.startTime==p.Ld.startTime&&g.endTime==p.Ld.endTime&&g.text==p.Ld.payload}}(f))&&f.Ld.payload&&(u=jZ(f.Ld))&&a.push(u);for(n=a.slice().sort(function(p,g){return p.startTime!=g.startTime?p.startTime-g.startTime:p.endTime!=g.endTime?p.endTime-g.startTime:"line"in VTTCue.prototype?a.indexOf(g)-a.indexOf(p):a.indexOf(p)-a.indexOf(g)}),n=C(n),s=n.next();!s.done;s=n.next())e.addCue(s.value)}function E2(e,n){var s=!1;e.mode==="disabled"&&(s=!0,e.mode="hidden");for(var a=0;a<e.cues.length;){var u=e.cues[a];n(u)?e.removeCue(u):a++}s&&(e.mode="disabled")}function ir(e){var n=this;this.i=e,this.l=new Dt,this.j=null,this.h=new Map,this.g=-1,this.A=!1,this.u=null,this.D=function(){n.l.Ea(n.i,"textchanged",n.m),n.l.Ea(n.j.textTracks,"change",n.C);for(var s=C(n.h.values()),a=s.next();!a.done;a=s.next())a.value.remove();n.h.clear(),n.g=-1,n.j=null},this.m=function(){var s=new Map,a=n.i.Cc();a=C(a);for(var u=a.next();!u.done;u=a.next()){if(u=u.value,n.h.has(u.id)){var f=n.h.get(u.id);u.active||f.track.mode==="disabled"||(f.track.mode="disabled"),n.h.delete(u.id)}else{f=n.j.ownerDocument.createElement("track"),f.kind=UZ(u);var p=f,g=void 0;if(u.label)g=u.label;else if(u.language)if(u.language in Ao)g=Ao[u.language];else{var y=id(u.language);y in Ao&&(g=Ao[y]+" ("+u.language+")")}g||(g=u.originalTextId,u.language&&u.language!==u.originalTextId&&(g+=" ("+u.language+")")),p.label=g,u.language in Ao&&(f.srclang=u.language),f.src="data:,WEBVTT",f.track.mode="disabled",n.j.appendChild(f)}s.set(u.id,f),u.active&&(n.g=u.id)}for(a=C(n.h.values()),u=a.next();!u.done;u=a.next())u.value.remove();n.g>-1&&(s.has(n.g)?(a=s.get(n.g).track,a.mode==="disabled"&&(a.mode=n.A?"showing":"hidden")):n.g=-1),n.h=s},this.C=function(){if(!n.u){var s=n.j;n.u=new Ke(function(){if(n.u=null,n.j===s){var a=-1,u=!1;if(n.h.has(n.g)){var f=n.h.get(n.g);f.track.mode==="showing"?(a=n.g,u=!0):f.track.mode==="hidden"&&(a=n.g)}if(!u)for(u=C(n.h),f=u.next();!f.done;f=u.next()){var p=C(f.value);if(f=p.next().value,p=p.next().value,p.track.mode==="showing"){a=f;break}else a<0&&p.track.mode==="hidden"&&(a=f)}for(u=C(n.h),f=u.next();!f.done;f=u.next())p=C(f.value),f=p.next().value,p=p.next().value,f!==a&&p.track.mode!=="disabled"&&(p.track.mode="disabled");n.g!==a&&(n.g=a,a>-1&&n.i.kg({id:a})),n.i.ae(a>-1&&n.h.get(a).track.mode==="showing")}}).Y(0)}},this.l.o(e,"loaded",function(){return n.enableTextDisplayer()}),this.enableTextDisplayer()}d=ir.prototype,d.configure=function(){},d.remove=function(e,n){if(this.i)this.h.has(this.g)&&E2(this.h.get(this.g).track,function(s){return s.startTime<n&&s.endTime>e});else return!1;return!0},d.append=function(e){this.h.has(this.g)&&pM(this.h.get(this.g).track,e)},d.destroy=function(){return this.i&&(this.j&&this.D(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},d.isTextVisible=function(){return this.A},d.setTextVisibility=function(e){if(this.A=e,this.h.has(this.g)){var n=this.h.get(this.g).track;n.mode!=="disabled"&&(e=e?"showing":"hidden",n.mode!==e&&(n.mode=e))}else if(this.i&&this.i.Ac()===3)if(n=Array.from(this.i.zf().textTracks).filter(function(a){return["captions","subtitles","forced"].includes(a.kind)}),e){e=null,n=C(n);for(var s=n.next();!s.done;s=n.next())if(s=s.value,s.mode==="showing"){e=null;break}else e||s.mode!=="hidden"||(e=s);e&&(e.mode="showing")}else for(e=C(n),n=e.next();!n.done;n=e.next())n=n.value,n.mode==="showing"&&(n.mode="hidden")},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){!this.j&&this.i&&this.i.Ac()===2&&(this.j=this.i.zf(),this.l.qa(this.i,"unloading",this.D),this.l.o(this.i,"textchanged",this.m),this.l.o(this.j.textTracks,"change",this.C),this.m())};function UZ(e){var n=ht();return e.forced&&n.Ja()==="WEBKIT"?"forced":e.kind==="caption"||e.roles&&e.roles.some(function(s){return s.includes("transcribes-spoken-dialog")})&&e.roles.some(function(s){return s.includes("describes-music-and-sound")})?"captions":"subtitles"}xe("shaka.text.NativeTextDisplayer",ir),ir.prototype.enableTextDisplayer=ir.prototype.enableTextDisplayer,ir.prototype.setTextLanguage=ir.prototype.setTextLanguage,ir.prototype.setTextVisibility=ir.prototype.setTextVisibility,ir.prototype.isTextVisible=ir.prototype.isTextVisible,ir.prototype.destroy=ir.prototype.destroy,ir.prototype.append=ir.prototype.append,ir.prototype.remove=ir.prototype.remove,ir.prototype.configure=ir.prototype.configure;function Yr(e,n){for(Nt("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=n,this.g=null,e=C(Array.from(this.h.textTracks)),n=e.next();!n.done;n=e.next())n=n.value,n.kind!=="metadata"&&n.kind!=="chapters"&&(n.mode="disabled",n.label==this.i&&(this.g=n));this.g&&(this.g.mode="hidden")}d=Yr.prototype,d.configure=function(){},d.remove=function(e,n){return this.g?(E2(this.g,function(s){return s.startTime<n&&s.endTime>e}),!0):!1},d.append=function(e){this.g&&pM(this.g,e)},d.destroy=function(){return this.g&&(E2(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},d.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},d.setTextVisibility=function(e){e&&!this.g&&mM(this),this.g&&(this.g.mode=e?"showing":"hidden")},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){mM(this)};function mM(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}xe("shaka.text.SimpleTextDisplayer",Yr),Yr.prototype.enableTextDisplayer=Yr.prototype.enableTextDisplayer,Yr.prototype.setTextLanguage=Yr.prototype.setTextLanguage,Yr.prototype.setTextVisibility=Yr.prototype.setTextVisibility,Yr.prototype.isTextVisible=Yr.prototype.isTextVisible,Yr.prototype.destroy=Yr.prototype.destroy,Yr.prototype.append=Yr.prototype.append,Yr.prototype.remove=Yr.prototype.remove,Yr.prototype.configure=Yr.prototype.configure;function Xr(){}d=Xr.prototype,d.configure=function(){},d.remove=function(){},d.append=function(){},d.destroy=function(){},d.isTextVisible=function(){return!1},d.setTextVisibility=function(){},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){},xe("shaka.text.StubTextDisplayer",Xr),Xr.prototype.enableTextDisplayer=Xr.prototype.enableTextDisplayer,Xr.prototype.setTextLanguage=Xr.prototype.setTextLanguage,Xr.prototype.setTextVisibility=Xr.prototype.setTextVisibility,Xr.prototype.isTextVisible=Xr.prototype.isTextVisible,Xr.prototype.destroy=Xr.prototype.destroy,Xr.prototype.append=Xr.prototype.append,Xr.prototype.remove=Xr.prototype.remove,Xr.prototype.configure=Xr.prototype.configure;function Qr(e,n){var s=this;this.m=!1,this.h=[],this.j=e,this.u=n,this.D=this.A=null,this.g=Ne("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.C=new Ke(function(){s.j.paused||Ou(s)}),Sg(this),this.l=new Map,this.i=new Dt,this.i.o(document,"fullscreenchange",function(){Ou(s,!0)}),this.i.o(this.j,"seeking",function(){Ou(s,!0)}),this.i.o(this.j,"ratechange",function(){Sg(s)}),this.i.o(this.j,"resize",function(){var a=s.j,u=a.videoWidth;a=a.videoHeight,u&&a?s.A=u/a:s.A=null}),this.F=null,"ResizeObserver"in l&&(this.F=new ResizeObserver(function(){Ou(s,!0)}),this.F.observe(this.g)),this.G=new Map}d=Qr.prototype,d.configure=function(e){this.D=e,Sg(this),Ou(this,!0)},d.append=function(e){var n=[].concat(K(this.h));e=C(fM(e));for(var s=e.next(),a={};!s.done;a={Vg:void 0},s=e.next())a.Vg=s.value,n.some(function(u){return function(f){return Ry(f,u.Vg)}}(a))||this.h.push(a.Vg);this.h.length&&Sg(this),Ou(this)},d.destroy=function(){return this.g&&(this.g.parentElement&&this.u.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&(this.C.stop(),this.C=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.F&&(this.F.disconnect(),this.F=null)),Promise.resolve()},d.remove=function(e,n){if(!this.g)return!1;var s=this.h.length;return this.h=this.h.filter(function(a){return a.startTime<e||a.endTime>=n}),Ou(this,s>this.h.length),this.h.length||Sg(this),!0},d.isTextVisible=function(){return this.m},d.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.u.appendChild(this.g),Ou(this,!0)):this.g.parentElement&&this.u.removeChild(this.g)},d.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},d.enableTextDisplayer=function(){};function Sg(e){e.C&&(e.h.length?e.C.xa((e.D?e.D.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.C.stop())}function FZ(e,n){for(;n!=null;){if(n==e.g)return!0;n=n.parentElement}return!1}function gM(e,n,s,a,u){var f=!1,p=[],g=[];n=C(n);for(var y=n.next();!y.done;y=n.next()){y=y.value,u.push(y);var w=e.l.get(y),b=y.startTime<=a&&y.endTime>a,I=w?w.qk:null;w&&(p.push(w.Wg),w.rd&&p.push(w.rd),b||(f=!0,e.l.delete(y),w=null)),b&&(g.push(y),w?FZ(e,I)||(f=!0):(BZ(e,y,u),w=e.l.get(y),I=w.qk,f=!0)),y.nestedCues.length>0&&I&&gM(e,y.nestedCues,I,a,u),u.pop()}if(f){for(a=C(p),u=a.next();!u.done;u=a.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(g.sort(function(L,j){return L.startTime!=j.startTime?L.startTime-j.startTime:L.endTime-j.endTime}),g=C(g),a=g.next();!a.done;a=g.next())a=e.l.get(a.value),a.rd?(a.rd.contains(s)&&a.rd.removeChild(s),s.appendChild(a.rd),a.rd.appendChild(a.Wg)):s.appendChild(a.Wg)}}function Ou(e,n){if(e.g){var s=e.j.currentTime;if(!e.m||n!==void 0&&n){n=C(e.G.values());for(var a=n.next();!a.done;a=n.next())Ra(a.value);Ra(e.g),e.l.clear(),e.G.clear()}e.m&&gM(e,e.h,e.g,s,[])}}function BZ(e,n,s){var a=s.length>1,u=a?"span":"div";n.lineBreak&&(u="br"),n.rubyTag&&(u=n.rubyTag),a=!a&&n.nestedCues.length>0;var f=Ne(u);if(u!="br"&&VZ(e,f,n,s,a),s=null,n.region&&n.region.id){var p=n.region,g=e.A===4/3?2.5:1.9;if(s=p.id+"_"+p.width+"x"+p.height+(p.heightUnits==Zi?"%":"px")+"-"+p.viewportAnchorX+"x"+p.viewportAnchorY+(p.viewportAnchorUnits==Zi?"%":"px"),e.G.has(s))s=e.G.get(s);else{u=Ne("span");var y=p.heightUnits==Zi?"%":"px",w=p.widthUnits==Zi?"%":"px",b=p.viewportAnchorUnits==Zi?"%":"px";u.id="shaka-text-region---"+s,u.classList.add("shaka-text-region"),u.style.position="absolute";var I=p.height,L=p.width;p.heightUnits===2&&(I=p.height*5.33,y="%"),p.widthUnits===2&&(L=p.width*g,w="%"),u.style.height=I+y,u.style.width=L+w,p.viewportAnchorUnits===2?(g=p.viewportAnchorY/75*100,y=p.viewportAnchorX/(e.A===4/3?160:210)*100,g-=p.regionAnchorY*I/100,y-=p.regionAnchorX*L/100,u.style.top=g+"%",u.style.left=y+"%"):(u.style.top=p.viewportAnchorY-p.regionAnchorY*I/100+b,u.style.left=p.viewportAnchorX-p.regionAnchorX*L/100+b),p.heightUnits!==0&&p.widthUnits!==0&&p.viewportAnchorUnits!==0&&(p=Math.max(0,Math.min(100-(parseInt(u.style.width.slice(0,-1),10)||0),parseInt(u.style.left.slice(0,-1),10)||0)),u.style.top=Math.max(0,Math.min(100-(parseInt(u.style.height.slice(0,-1),10)||0),parseInt(u.style.top.slice(0,-1),10)||0))+"%",u.style.left=p+"%"),u.style.display="flex",u.style.flexDirection="column",u.style.alignItems="center",u.style.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end",e.G.set(s,u),s=u}}u=f,a&&(u=Ne("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=n.backgroundColor,u.style.lineHeight="normal",f.appendChild(u)),e.l.set(n,{Wg:f,qk:u,rd:s})}function $Z(e){var n=e.direction,s=e.positionAlign;return e=e.textAlign,s!==Py?s:e==="left"||e==="start"&&n===Gm||e==="end"&&n==="rtl"?"line-left":e==="right"||e==="start"&&n==="rtl"||e==="end"&&n===Gm?"line-right":"center"}function VZ(e,n,s,a,u){var f=n.style,p=s.nestedCues.length==0,g=a.length>1;f.whiteSpace="pre-wrap";var y=s.payload.replace(/\s+$/g,function(b){return"".repeat(b.length)});if(f.webkitTextStrokeColor=s.textStrokeColor,f.webkitTextStrokeWidth=s.textStrokeWidth,f.color=s.color,f.direction=s.direction,f.opacity=s.opacity,f.paddingLeft=b2(s.linePadding,s,e.u),f.paddingRight=b2(s.linePadding,s,e.u),f.textCombineUpright=s.textCombineUpright,f.textShadow=s.textShadow,s.backgroundImage)f.backgroundImage="url('"+s.backgroundImage+"')",f.backgroundRepeat="no-repeat",f.backgroundSize="contain",f.backgroundPosition="center",s.backgroundColor&&(f.backgroundColor=s.backgroundColor),f.width="100%",f.height="100%";else{if(s.nestedCues.length)var w=n;else w=Ne("span"),n.appendChild(w);s.border&&(w.style.border=s.border),u||((n=GZ(a,function(b){return b.backgroundColor}))?w.style.backgroundColor=n:y&&(w.style.backgroundColor="rgba(0, 0, 0, 0.8)")),y&&(w.setAttribute("translate","no"),w.textContent=y)}g&&!a[a.length-1].isContainer?f.display="inline":(f.display="flex",f.flexDirection="column",f.alignItems="center",s.textAlign=="left"||s.textAlign=="start"?(f.width="100%",f.alignItems="start"):(s.textAlign=="right"||s.textAlign=="end")&&(f.width="100%",f.alignItems="end"),f.justifyContent=s.displayAlign=="before"?"flex-start":s.displayAlign=="center"?"center":"flex-end"),p||(f.margin="0"),f.fontFamily=s.fontFamily,f.fontWeight=s.fontWeight.toString(),f.fontStyle=s.fontStyle,f.letterSpacing=s.letterSpacing,a=e.D?e.D.fontScaleFactor:1,(a!==1||s.fontSize)&&(f.fontSize=b2(s.fontSize||"1em",s,e.u,a)),a=s.line,a!=null&&(p=s.lineInterpretation,p==Hm&&(p=1,g=16,e.A&&e.A<1&&(g=32),a=a<0?100+a/g*100:a/g*100),p==1&&(f.position="absolute",s.writingMode==dd?(f.width="100%",s.lineAlign==hd?f.top=a+"%":s.lineAlign=="end"&&(f.bottom=100-a+"%")):s.writingMode=="vertical-lr"?(f.height="100%",s.lineAlign==hd?f.left=a+"%":s.lineAlign=="end"&&(f.right=100-a+"%")):(f.height="100%",s.lineAlign==hd?f.right=a+"%":s.lineAlign=="end"&&(f.left=100-a+"%")))),f.lineHeight=s.lineHeight,e=$Z(s),e=="line-left"?(f.cssFloat="left",s.position!==null&&(f.position="absolute",s.writingMode==dd?(f.left=s.position+"%",f.width="auto"):f.top=s.position+"%")):e=="line-right"?(f.cssFloat="right",s.position!==null&&(f.position="absolute",s.writingMode==dd?(f.right=100-s.position+"%",f.width="auto"):f.bottom=s.position+"%")):s.position!==null&&s.position!=50&&(f.position="absolute",s.writingMode==dd?(f.left=s.position+"%",f.width="auto"):f.top=s.position+"%",s.size&&(f.transform="translateX(-50%)")),f.textAlign=s.textAlign,f.textDecoration=s.textDecoration.join(" "),f.writingMode=s.writingMode,"writingMode"in document.documentElement.style&&f.writingMode==s.writingMode||(f.webkitWritingMode=s.writingMode),s.size&&(s.writingMode==dd?f.width=s.size+"%":f.height=s.size+"%")}function b2(e,n,s,a){a=a===void 0?1:a;var u=(u=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(u[1]),unit:u[2]}:null;if(!u)return e;switch(e=u.unit,a*=u.value,e){case"%":return a/100*s.clientHeight/n.cellResolution.rows+"px";case"c":return s.clientHeight*a/n.cellResolution.rows+"px";default:return a+e}}function GZ(e,n){for(var s=e.length-1;s>=0;s--){var a=n(e[s]);if(a||a===0)return a}return null}xe("shaka.text.UITextDisplayer",Qr),Qr.prototype.enableTextDisplayer=Qr.prototype.enableTextDisplayer,Qr.prototype.setTextLanguage=Qr.prototype.setTextLanguage,Qr.prototype.setTextVisibility=Qr.prototype.setTextVisibility,Qr.prototype.isTextVisible=Qr.prototype.isTextVisible,Qr.prototype.remove=Qr.prototype.remove,Qr.prototype.destroy=Qr.prototype.destroy,Qr.prototype.append=Qr.prototype.append,Qr.prototype.configure=Qr.prototype.configure;function HZ(e,n){function s(f){for(var p=f,g=C(n),y=g.next();!y.done;y=g.next())y=y.value,y.end&&y.start<f&&(p+=y.end-y.start);return f=Math.floor(p/3600),g=Math.floor(p/60%60),y=Math.floor(p%60),p=Math.floor(p*1e3%1e3),(f<10?"0":"")+f+":"+(g<10?"0":"")+g+":"+(y<10?"0":"")+y+"."+(p<100?p<10?"00":"0":"")+p}var a=w2(e);e=`WEBVTT

`,a=C(a);for(var u=a.next();!u.done;u=a.next())u=u.value,e+=s(u.startTime)+" --> "+s(u.endTime)+function(f){var p=[];switch(f.textAlign){case"left":p.push("align:left");break;case"right":p.push("align:right");break;case _a:p.push("align:middle");break;case"start":p.push("align:start");break;case"end":p.push("align:end")}switch(f.writingMode){case"vertical-lr":p.push("vertical:lr");break;case"vertical-rl":p.push("vertical:rl")}return p.length?" "+p.join(" "):""}(u)+`
`,e+=u.payload+`

`;return e}xe("shaka.text.WebVttGenerator",function(){});function A2(e,n){this.g=n,this.j=e,this.m=new Map,this.l=void 0,this.F=!1,this.J=!0,this.A=this.I=!1,this.D=this.C=void 0,this.H=0,this.K={request:!1,response:!1,event:!1},this.u={},this.i=new Dt,this.G=[],this.h=null}A2.prototype.setMediaElement=function(e){this.h=e,YZ(this)},A2.prototype.configure=function(e){this.g=e,XZ(this)};function qZ(e){e.m.clear(),e.F=!1,e.J=!0,e.I=!1,e.A=!1,e.C=0,e.D=0,e.H=0,e.K={request:!1,response:!1,event:!1},vM(e),e.u={},e.h=null,e.i.Ta()}function KZ(e,n){e.A=n,e.A?e.l==_1?e.l=R1:e.l==L1&&(e.l=P1):e.l==R1?e.l=_1:e.l==P1&&(e.l=L1)}function zZ(e,n){if(e.g&&e.g.enabled&&(Jr(e,"ps",{ud:"d"}),e.h&&e.h.autoplay)){var s=e.h.play();s&&s.then(function(){e.H=n}).catch(function(){e.H=0})}}function WZ(e,n,s){try{if(!e.g.enabled)return n;var a=C2(e);e:{switch(s.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=A1;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=C1;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=bM;break e}u=void 0}a.ot=u,a.su=!0;var f=wg(a);return b1(n,f)}catch(p){return Kr("CMCD_SRC_ERROR","Could not generate src CMCD data.",p),n}}function YZ(e){e.i.o(e.h,"playing",function(){e.D||(e.D=Date.now()),Jr(e,"ps",{ud:"p"})}),e.i.o(e.h,"volumechange",function(){Jr(e,e.h.muted?"m":"um")}),e.i.o(e.h,"play",function(){e.C||(e.C=Date.now(),Jr(e,"ps",{ud:"s"}))}),e.i.o(e.h,"pause",function(){Jr(e,"ps",{ud:"a"})}),e.i.o(e.j,"buffering",function(){Jr(e,"ps",{ud:"w"})}),e.i.o(e.h,"seeking",function(){return Jr(e,"ps",{ud:"k"})}),e.i.o(document,"fullscreenchange",function(){Jr(e,document.fullscreenElement?"pe":"pc")});var n=e.h;(n.webkitPresentationMode||n.webkitSupportsFullscreen)&&e.i.o(n,"webkitpresentationmodechanged",function(){n.webkitPresentationMode?Jr(e,n.webkitPresentationMode!=="inline"?"pe":"pc"):n.webkitSupportsFullscreen&&Jr(e,n.webkitDisplayingFullscreen?"pe":"pc")}),e.i.o(e.h,"enterpictureinpicture",function(){Jr(e,"pe")}),e.i.o(e.h,"leavepictureinpicture",function(){Jr(e,"pc")}),"documentPictureInPicture"in l&&e.i.o(l.documentPictureInPicture,"enter",function(s){Jr(e,"pe"),e.i.qa(s.window,"pagehide",function(){Jr(e,"pc")})}),e.i.o(document,"visibilitychange",function(){document.hidden?Jr(e,"b",{bg:!0}):Jr(e,"b")}),e.i.o(e.j,"complete",function(){Jr(e,"ps",{ud:"e"})})}function XZ(e){vM(e);var n=yM(e);n=C(n);for(var s=n.next();!s.done;s=n.next())if(s=s.value.timeInterval,s===void 0&&(s=uee),s>=1){var a=new Ke(function(){return Jr(e,cee)});a.xa(s),e.G.push(a)}}function vM(e){if(e.G)for(var n=C(e.G),s=n.next();!s.done;s=n.next())s.value.stop();e.G=[]}function yM(e){return(e=e.g.targets)?e.filter(function(n){return n.mode===_M&&n.enabled}):[]}function I2(e){return(e=e.g.targets)?e.filter(function(n){return n.mode===kM&&n.enabled===!0}):[]}function C2(e){return e.g.sessionId||(e.g.sessionId=l.crypto.randomUUID()),{v:e.g.version,sf:e.l,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.j.getBandwidthEstimate()/1e3}}function Jr(e,n,s){if(s=s===void 0?{}:s,n=Object.assign({e:n,ts:Date.now()},s),n=R2(e,n,_M),s=e.g.targets,!(e.g.version<P2)&&s){var a=yM(e);s=Array.from(new Set([].concat(K(D2),K(oee)))),a=C(a);for(var u=a.next();!u.done;u=a.next()){u=u.value;var f=k2(u.includeKeys||[],s);f.includes(IM)||f.push(IM),f=_2(n,f);var p=u.events||[],g=f.e,y=f.sta;g&&(!aee.includes(g)||!(g!=="ps"||y&&lee.includes(y))||p&&p.length>0&&!p.includes(g))||xM(e,f,u)}}}function pf(e,n,s){if(e.g.enabled){s=R2(e,s,CM);var a=TM({mode:CM,useHeaders:e.g.useHeaders,includeKeys:e.g.includeKeys||[]});e.u[a]||(e.u[a]={request:1,response:1}),s.sn=e.u[a].request++,a=e.g.includeKeys||[];var u=e.g.version==P2?Array.from(new Set([].concat(K(D2),K(iee)))):AM;a=k2(a,u),s=_2(s,a),QZ(e,s,n,e.g.useHeaders)}}function xM(e,n,s,a){var u=bo(),f=s.url;if(s.useHeaders){if(n=EM(n),!Object.keys(n).length)return;a&&Object.assign(a.headers,n),a=Kn([f],u),Object.assign(a.headers,n)}else{if(n=wg(n),!n)return;f=b1(f,n),a&&(a.uri=f),a=Kn([f],u)}e.j.Wb().request(9,a)}function QZ(e,n,s,a){if(a){if(n=EM(n),!Object.keys(n).length)return;Object.assign(s.headers,n)}else{var u=wg(n);if(!u)return;s.uris=s.uris.map(function(f){return b1(f,u)})}I2(e).length>0||!e.m.has(s)||e.m.delete(s)}function k2(e,n){if(!e||e.length===0)return n;for(var s=C(e),a=s.next();!a.done;a=s.next())n.includes(a.value);return e=e.filter(function(u){return n.includes(u)})}function _2(e,n){return Object.keys(e).reduce(function(s,a){return n.includes(a)&&(s[a]=e[a]),s},{})}function JZ(e){if(e.type===0)return tee;if(e=e.stream){var n=e.type;if(n=="video")return e.codecs&&e.codecs.includes(",")?C1:I1;if(n=="audio")return A1;if(n=="text")return e.mimeType==="application/mp4"?k1:L2}}function TM(e){var n=Object.keys(e).sort().reduce(function(s,a){return a!=="enabled"&&(s[a]=e[a]),s},{});return JSON.stringify(n)}function ZZ(e,n){if(n=e.j.Rc()[n],!n.length)return NaN;var s=e.h?e.h.currentTime:0;return(e=n.find(function(a){return a.start<=s&&a.end>=s}))?(e.end-s)*1e3:NaN}function SM(e,n){if(n=e.j.Rc()[n],!n.length)return 0;var s=e.h?e.h.currentTime:0;return(e=n.find(function(a){return a.start<=s&&a.end>=s}))?(e.end-s)*1e3:0}function eee(e,n){var s=e.j.Nb();if(!s.length)return NaN;e=s[0],s=C(s);for(var a=s.next();!a.done;a=s.next())a=a.value,a.type==="variant"&&a.bandwidth>e.bandwidth&&(e=a);switch(n){case I1:return e.videoBandwidth||NaN;case A1:return e.audioBandwidth||NaN;default:return e.bandwidth}}function wM(e,n,s){var a=n.segment,u=0;a&&(u=a.endTime-a.startTime),u={d:u*1e3,st:e.j.U()?ree:nee},u.ot=JZ(n);var f=u.ot===I1||u.ot===A1||u.ot===C1||u.ot===k1;if(n=n.stream){var p=e.j.Za();if(f&&(u.bl=ZZ(e,n.type),u.ot!==k1)){var g=SM(e,n.type);u.dl=p?g/Math.abs(p):g}if(n.bandwidth&&(u.br=n.bandwidth/1e3),n.segmentIndex&&a){if((p=n.segmentIndex.fc(a.endTime,!0,p<0))&&(p=p.next().value)&&p!=a){if(s&&!gl(a.S(),p.S())){var y=p.S()[0];g=new URL(y);var w=new URL(s);if(g.origin!==w.origin)s=y;else{s=g.pathname.split("/").slice(1),y=w.pathname.split("/").slice(1,-1),w=Math.min(s.length,y.length);for(var b=0;b<w&&s[b]===y[b];b++)s.shift(),y.shift();for(;y.length;)y.shift(),s.unshift("..");s=s.join("/")+g.search+g.hash}u.nor=s}!p.startByte&&!p.endByte||a.startByte==p.startByte&&a.endByte==p.endByte||(s=p.startByte+"-",p.endByte&&(s+=p.endByte),u.nrr=s)}p=e.j.Za()||1,s=SM(e,n.type)||500,a=(n=n.bandwidth)?n*(a.endTime-a.startTime)/1e3/(s/p/1e3)*e.g.rtpSafetyFactor:NaN,isNaN(a)||(u.rtp=a)}}return f&&u.ot!==k1&&(u.tb=eee(e,u.ot)/1e3),u}function R2(e,n,s){Object.assign(n,C2(e)),n.pr=e.j.Za();var a=n.ot===I1||n.ot===C1;return e.I&&a&&(n.bs=!0,n.su=!0,e.I=!1),n.su==null&&(n.su=e.J),e.j.U()&&(a=JM(e.j),n.ltc=a||void 0),document.hidden&&(n.bg=!0),a=e.D&&e.C?e.D-(e.H||e.C):void 0,a==null||e.K[s]||(n.msd=a,e.K[s]=!0),n}function wg(e){function n(I){return s(I/100)*100}function s(I){return Math.round(I)}function a(I){return!Number.isNaN(I)&&I!=null&&I!==""&&I!==!1}var u=[],f={br:s,d:s,bl:n,dl:n,mtp:n,nor:function(I){return encodeURIComponent(I)},rtp:n,tb:s,ttfb:s,ttlb:s},p=Object.keys(e||{}).sort();p=C(p);for(var g=p.next();!g.done;g=p.next()){g=g.value;var y=e[g];if(a(y)&&(g!=="v"||y!==1)&&(g!="pr"||y!==1)){var w=f[g];w&&(y=w(y)),w=typeof y;var b=void 0;b=w==="string"&&g!=="ot"&&g!=="sf"&&g!=="st"?g+"="+JSON.stringify(y):w==="boolean"?g:w==="symbol"?g+"="+y.description:g+"="+y,u.push(b)}}return u.join(",")}function EM(e){var n=Object.keys(e),s={},a=["Object","Request","Session","Status"],u=[{},{},{},{}],f={br:0,d:0,ot:0,tb:0,url:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,ttfb:1,ttlb:1,ts:1,rc:1,cmsdd:1,cmsds:1,sn:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3,bg:3};n=C(n);for(var p=n.next();!p.done;p=n.next())p=p.value,u[f[p]!=null?f[p]:1][p]=e[p];for(e=0;e<u.length;e++)(f=wg(u[e]))&&(s["CMCD-"+a[e]]=f);return s}function b1(e,n){return!n||e.includes("offline:")?e:(e=new Cn(e),e.g.set("CMCD",n),e.toString())}var bM="m",A1="a",I1="v",C1="av",tee="i",L2="c",k1="tt",P2=2,nee="v",ree="l",_1="d",R1="ld",L1="h",P1="lh";xe("shaka.util.CmcdManager.StreamingFormat",{DASH:_1,hn:R1,HLS:L1,jn:P1,zn:"s",OTHER:"o"});var AM="br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),D2="br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "),iee="ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "),see="d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),oee=["e","sta"],aee="ps e t c b m um pe pc".split(" "),lee="spawkrfeqd".split(""),uee=10,IM="ts",cee="t",CM="request",kM="response",_M="event";function Hs(e){this.h=e,this.g=null}d=Hs.prototype,d.configure=function(e){this.h=e},d.dj=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(PM)?this.g.get(PM)*1e3:null},d.cj=function(){return this.h.enabled&&this.g&&this.g.has(LM)?this.g.get(LM)*1e3:null},d.kl=function(){return this.h.enabled&&this.g&&this.g.has(DM)?this.g.get(DM):null},d.ll=function(){return this.h.enabled&&this.g&&this.g.has(NM)?this.g.get(NM):null},d.getBandwidthEstimate=function(e){var n=this.cj();if(!n)return e;var s=this.h.estimatedThroughputWeightRatio;return s>0&&s<=1?e*(1-s)+n*s:e};function RM(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}xe("shaka.util.CmsdManager",Hs),Hs.prototype.getBandwidthEstimate=Hs.prototype.getBandwidthEstimate,Hs.prototype.getRoundTripTime=Hs.prototype.ll,Hs.prototype.getResponseDelay=Hs.prototype.kl,Hs.prototype.getEstimatedThroughput=Hs.prototype.cj,Hs.prototype.getMaxBitrate=Hs.prototype.dj;var LM="etp",PM="mb",DM="rd",NM="rtt";function MM(){this.g=null,this.h=[]}function N2(e,n){return X(function(s){if(s.g==1)return e.g?O(s,new Promise(function(a){return e.h.push(a)}),2):s.B(2);e.g=n,re(s)})}MM.prototype.release=function(){this.h.length>0?this.h.shift()():this.g=null};function OM(e,n,s){return s=s===void 0?Number.EPSILON:s,e===n?!0:(e=Math.abs(e-n),e<=s?!0:s!==Number.EPSILON?Math.abs(e-s)<=Number.EPSILON:!1)}function ye(e,n,s){n=n===void 0?null:n,Tt.call(this);var a=this;this.m=F1,this.h=null,this.Ue=n,this.W=!1,this.ef=new Dt,this.Ve=new Dt,this.j=new Dt,this.mc=new Dt,this.Xd=new Dt,this.G=this.H=this.F=this.M=null,this.gf=0,this.Z=new MM,this.O=this.Fa=this.V=this.i=this.Kc=this.I=this.l=this.Re=this.R=this.Ji=this.oa=this.K=this.jb=this.ya=this.Te=this.P=this.La=this.L=this.Ob=null,this.Na=!1,this.Ze=this.u=null,this.Ye=1e9,this.df=[],this.Jc=new Map,this.kb=[],this.Gg=-1,this.g=Zo(this),this.Ig=nM(),this.T=null,this.hf=-1,this.lc=null,this.sa={width:1/0,height:1/0},this.Xe=new Rb(this.g,this.sa,null),this.bf=[],this.C=null,this.J=this.g.adaptationSetCriteriaFactory(),this.J.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredAudioRole,videoRole:this.g.preferredVideoRole,channelCount:0,hdrLevel:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,audioLabel:this.g.preferredAudioLabel,videoLabel:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.ce=this.g.preferredTextLanguage,this.ie=this.g.preferredTextRole,this.ge=this.g.preferForcedSubs,this.We=[],s&&s(this),this.K=new A2(this,this.g.cmcd),this.oa=new Hs(this.g.cmsd),this.M=HM(this),this.aa=this.ea=this.ua=this.D=null,this.Kg=!1,this.Hg=[],this.Jg=new Ke(function(){return X(function(u){if(u.g==1)return a.ea?O(u,a.Ub(a.aa,!0),3):u.B(0);if(u.g!=4)return O(u,a.load(a.ea),4);a.Kg?a.aa.pause():a.aa.play(),a.ea=null,a.Kg=!1,re(u)})}),B1&&(this.D=B1(),this.D.configure(this.g.ads),this.Xd.o(this.D,"ad-content-pause-requested",function(u){var f,p;return X(function(g){if(g.g==1)return a.Jg.stop(),a.ea?g.B(0):(a.aa=a.h,a.Kg=a.isEnded(),f=u.saveLivePosition||!1,p=!0,a.U()&&(p=f),O(g,a.Yi(!0,p),3));a.ea=g.h,re(g)})}),this.Xd.o(this.D,"ad-content-resume-requested",function(u){if(u=u.offset||0,a.ea){var f=a.ea;f.u&&u&&(typeof f.u=="number"?f.u+=u:f.u.setTime(f.u.getTime()+u*1e3))}a.Jg.Y(.1)}),this.Xd.o(this.D,"ad-content-attach-requested",function(){return X(function(u){if(u.g==1)return a.h||!a.aa?u.B(0):O(u,a.Ub(a.aa,!0),3);a.aa=null,re(u)})})),$1&&(this.ua=$1(this),this.ua.configure(this.g.queue)),this.ef.o(l,"online",function(){$2(a),a.bi()}),this.$e=new Ke(function(){for(var u=Date.now()/1e3,f=!1,p=!0,g=C(a.i.variants),y=g.next();!y.done;y=g.next())y=y.value,y.disabledUntilTime>0&&y.disabledUntilTime<=u&&(y.disabledUntilTime=0,f=!0),y.disabledUntilTime>0&&(p=!1);p&&a.$e.stop(),f&&Uu(a,!1,void 0,!1,!1)}),this.$a=null,e&&(Nt("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Ub(e,!0)),this.A=null}V(ye,Tt);function D1(e){e.R!=null&&(ND(e.R),e.R.release(),e.R=null)}function dee(e,n,s){s||n.lcevc.enabled?(D1(e),e.R==null&&(e.R=new Om(e.h,e.Ji,n.lcevc,s),e.H&&(e.H.D=e.R))):D1(e)}function rn(e,n){return new _e(e,n)}d=ye.prototype,d.destroy=function(){var e=this,n;return X(function(s){switch(s.g){case 1:return e.m==Io?s.return():(D1(e),n=e.detach(),e.m=Io,O(s,n,2));case 2:return O(s,e.Zg(),3);case 3:if(e.ef&&(e.ef.release(),e.ef=null),e.Ve&&(e.Ve.release(),e.Ve=null),e.j&&(e.j.release(),e.j=null),e.mc&&(e.mc.release(),e.mc=null),e.Xd&&(e.Xd.release(),e.Xd=null),e.Ze=null,e.g=null,e.C=null,e.Ue=null,e.K=null,e.oa=null,!e.M){s.B(4);break}return O(s,e.M.destroy(),5);case 5:e.M=null;case 4:e.u&&(e.u.release(),e.u=null),e.ua&&(e.ua.destroy(),e.ua=null),Tt.prototype.release.call(e),re(s)}})};function jM(e,n){f5.set(e,n)}function UM(){return l.Promise||$e("A Promise implementation or polyfill is required"),!(l.Promise&&l.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")?!1:(ht(),Pa()?!0:Td().canPlayType("application/x-mpegurl")!="")}function mf(e,n){e.dispatchEvent(rn("onstatechange",new Map().set("state",n)))}d.Ub=function(e,n){n=n===void 0?!0:n;var s=this,a,u,f;return X(function(p){switch(p.g){case 1:if(s.m==Io)throw new oe(2,7,7e3);if(a=s.h&&s.h==e,!s.h||s.h==e){p.B(2);break}return O(p,s.detach(),2);case 2:return O(p,M2(s,"attach"),4);case 4:if(p.h)return p.return();if(ce(p,5,6),a||(mf(s,"attach"),u=function(){var g=V2(s,!1);g&&gf(s,g)},s.Ve.o(e,"error",u),s.h=e,s.K&&s.K.setMediaElement(e)),ht(),!n||!Pa()||s.H){p.B(6);break}return O(p,O2(s),6);case 6:le(p),s.Z.release(),pe(p,0);break;case 5:return f=ue(p),O(p,s.detach(),10);case 10:throw f}})},d.Li=function(e){this.Ji=e},d.detach=function(e){e=e===void 0?!1:e;var n=this;return X(function(s){if(s.g==1){if(n.m==Io)throw new oe(2,7,7e3);return O(s,n.wc(!1,e),2)}if(s.g!=3)return O(s,M2(n,"detach"),3);if(s.h)return s.return();try{n.h&&(n.Ve.Ta(),n.h=null),mf(n,"detach"),n.D&&!e&&n.D.release()}finally{n.Z.release()}re(s)})};function M2(e,n){var s;return X(function(a){return a.g==1?(s=++e.gf,O(a,N2(e.Z,n),2)):s!=e.gf?(e.Z.release(),a.return(!0)):a.return(!1)})}d.wc=function(e,n){e=e===void 0?!0:e,n=n===void 0?!1:n;var s=this,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G;return X(function(z){switch(z.g){case 1:return s.m!=Io&&(s.m=F1),O(z,M2(s,"unload"),2);case 2:return z.h?z.return():(Ae(z,3),s.Na=!1,mf(s,"unload"),D1(s),a=s.We.map(function(J){return J()}),s.We=[],O(z,Promise.all(a),5));case 5:if(s.dispatchEvent(rn("unloading")),s.Te&&(s.Te.release(),s.Te=null),s.ya&&(s.ya.release(),s.ya=null),s.jb&&(s.jb.release(),s.jb=null),s.h&&(s.j.Ta(),s.mc.Ta()),s.$e.stop(),s.Ob&&(s.Ob.release(),s.Ob=null),s.La&&(s.La.stop(),s.La=null),!s.I){z.B(6);break}return O(z,s.I.stop(),7);case 7:s.I=null,s.Kc=null;case 6:if(s.u&&s.u.stop(),!s.l){z.B(8);break}return O(z,s.l.destroy(),9);case 9:s.l=null;case 8:if(s.L&&(s.L.release(),s.L=null),s.G&&(s.G.release(),s.G=null),l.shakaMediaKeysPolyfill!=="webkit"||!s.F){z.B(10);break}return O(z,s.F.destroy(),11);case 11:s.F=null;case 10:if(!s.H){z.B(12);break}return O(z,s.H.destroy(),13);case 13:s.H=null;case 12:if(s.D&&!n&&s.D.onAssetUnload(),s.ea&&!n&&(s.ea.destroy(),s.ea=null),n||s.Jg.stop(),s.K&&qZ(s.K),s.oa&&(s.oa.g=null),!s.A){z.B(14);break}return O(z,s.A.destroy(),15);case 15:s.A=null;case 14:if(s.W=!1,s.h){for(u=C(s.Hg),f=u.next();!f.done;f=u.next())p=f.value,p.src.startsWith("blob:")&&URL.revokeObjectURL(p.src),p.remove();s.Hg=[],e1(s.h)&&s.h.load()}if(!s.F){z.B(16);break}return O(z,s.F.destroy(),17);case 17:s.F=null;case 16:if(s.$a&&s.V!=s.$a.jd()&&(s.$a.l||s.$a.destroy(),s.$a=null),s.V=null,s.Fa=null,s.P=null,s.i){for(g=C(s.i.variants),y=g.next();!y.done;y=g.next())for(w=y.value,b=C([w.audio,w.video]),I=b.next();!I.done;I=b.next())(L=I.value)&&L.segmentIndex&&L.segmentIndex.release();for(j=C(s.i.textStreams),U=j.next();!U.done;U=j.next())F=U.value,F.segmentIndex&&F.segmentIndex.release()}for(s.g&&s.g.streaming.clearDecodingCache&&(By.clear(),Mh.clear()),s.i=null,s.C=new E1,s.Ii=null,s.lc=null,s.T=null,s.hf=-1,s.df=[],B=C(s.Jc.values()),q=B.next();!q.done;q=B.next())G=q.value,G.stop();s.Jc.clear(),s.kb=[],s.Gg=-1,s.M&&s.M.Ti(),Eg(s);case 3:le(z),s.Z.release(),pe(z,4);break;case 4:if(ht(),e&&Pa()&&!s.H&&s.h)return O(z,O2(s),0);z.B(0)}})},d.Gm=function(e){this.O=e},d.load=function(e,n,s){n=n===void 0?null:n;var a=this,u,f,p,g,y,w,b,I,L,j,U,F,B,q;return X(function(G){switch(G.g){case 1:if(a.m==Io)throw new oe(2,7,7e3);if(a.h||!a.aa){G.B(2);break}return O(G,a.Ub(a.aa,!0),3);case 3:a.aa=null;case 2:if(u=null,f="",e instanceof Gs){if(e.l)throw new oe(2,7,7006);u=e,f=u.jd()||""}else f=e||"";return O(G,N2(a.Z,"load"),4);case 4:if(a.Z.release(),!a.h)throw new oe(2,7,7002);if(!a.V){G.B(5);break}return a.V=f,O(G,a.wc(!1),5);case 5:if(p=++a.gf,g=function(){return X(function(z){if(z.g==1)return a.gf==p?z.B(0):u?O(z,u.destroy(),3):z.B(3);throw new oe(2,7,7e3)})},y=function(z,J){return X(function(ie){switch(ie.g){case 1:return Ae(ie,2),O(ie,N2(a.Z,J),4);case 4:return O(ie,g(),5);case 5:return O(ie,z(),6);case 6:return O(ie,g(),7);case 7:u&&a.g&&(u.g=a.g);case 2:le(ie),a.Z.release(),pe(ie,0)}})},ce(G,7,8),n==null&&u&&(n=u.getStartTime()),a.O=n,a.Na=!1,a.dispatchEvent(rn("loading")),u){s=u.T,G.B(10);break}if(s){G.B(10);break}return O(G,y(function(){return X(function(z){if(z.g==1)return O(z,VM(a,f),2);s=z.h,re(z)})},"guessMimeType_"),10);case 10:if(w=!!u,u){sM(u,a),a.C=u.getStats(),G.B(13);break}return O(G,BM(a,f,n,s,!0,a.g),14);case 14:(u=G.h)?(u.F=!1,sM(u,a),a.C=u.getStats(),u.start(),u.C.catch(function(){})):a.C=new E1;case 13:return b=!u,I=Date.now()/1e3,a.C=u?u.getStats():new E1,a.V=f,a.Fa=s||null,Eg(a),L=function(){var z=a.h?a.h.buffered:null;return{start:iN(z)||0,end:Zy(z)||0}},a.ya=new ug(L),a.ya.addEventListener("regionadd",function(z){j2(a,z.region,"metadataadded")}),b?O(G,y(function(){return X(function(z){return O(z,mee(a,s),0)})},"initializeSrcEqualsDrmInner_"),25):(a.jb=new ug(L),O(G,y(function(){return X(function(z){if(z.g==1)return O(z,Promise.race([u.aa,u.C]),2);a.Kc=u.H;var J=u;J.ea=!0,a.I=J.m,a.i=u.yh(),re(z)})},"waitForFinish"),17));case 17:if(a.H){G.B(18);break}return O(G,y(function(){return X(function(z){return O(z,O2(a),0)})},"initializeMediaSourceEngineInner_"),18);case 18:return a.i&&a.i.textStreams.length&&(a.A.enableTextDisplayer?a.A.enableTextDisplayer():Nt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),O(G,y(function(){return X(function(z){return O(z,u.C,0)})},"waitForFinish"),20);case 20:if(a.g=u.getConfiguration(),a.Xe=u.G,a.I&&a.I.setMediaElement&&a.h&&a.I.setMediaElement(a.h),a.Te=_Z(u),a.Re=u.Fa,(j=u.D)&&(a.J=j),w&&a.h&&a.h.nodeName==="AUDIO"&&(hee(a),a.configure("manifest.disableVideo",!0)),u.j){G.B(21);break}return O(G,y(function(){return X(function(z){return O(z,oM(u,a.h),0)})},"drmEngine_.init"),21);case 21:return a.F=RZ(u),O(G,y(function(){return X(function(z){return O(z,a.F.Ub(a.h),0)})},"drmEngine_.attach"),23);case 23:return U=a.g.abrFactory,a.u&&a.Ze==U||(a.Ze=U,a.u&&a.u.release(),a.u=U(),typeof a.u.setMediaElement!="function"&&(Nt("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),a.u.setMediaElement=function(){}),typeof a.u.setCmsdManager!="function"&&(Nt("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),a.u.setCmsdManager=function(){}),typeof a.u.trySuggestStreams!="function"&&(Nt("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),a.u.trySuggestStreams=function(){}),a.u.configure(a.g.abr)),F=LZ(u),B=u.i,O(G,y(function(){return X(function(z){return O(z,pee(a,I,B,F),0)})},"loadInner_"),24);case 24:kZ(u),a.Fa&&ht().pg()&&Ny(a.Fa)&&xJ(a.H,a.V,a.Fa),G.B(16);break;case 25:return O(G,y(function(){return X(function(z){return O(z,gee(a,I,s),0)})},"srcEqualsInner_"),16);case 16:a.dispatchEvent(rn("loaded"));case 8:if(le(G),!u){G.B(27);break}return O(G,u.destroy(),27);case 27:a.$a=null,pe(G,0);break;case 7:if(q=ue(G),!q||q.code==7e3){G.B(29);break}return O(G,a.wc(!1),29);case 29:throw q}})};function hee(e){for(var n=C(e.i.variants),s=n.next();!s.done;s=n.next())s=s.value,s.video&&(s.video.closeSegmentIndex(),s.video=null),s.bandwidth=s.audio&&s.audio.bandwidth?s.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(a){return a.audio})}d.ik=function(e,n,s){e=e===void 0?!0:e,n=n===void 0?!1:n,s=s===void 0?!1:s;var a=this,u;return X(function(f){return f.g==1?O(f,FM(a,s),2):f.g!=3?(u=f.h,O(f,a.wc(e,n),3)):f.return(u)})},d.Yi=function(e,n){e=e===void 0?!1:e,n=n===void 0?!1:n;var s=this,a;return X(function(u){return u.g==1?O(u,FM(s,n),2):u.g!=3?(a=u.h,O(u,s.detach(e),3)):u.return(a)})};function FM(e,n){n=n===void 0?!1:n;var s,a,u;return X(function(f){if(f.g==1)return s=null,e.i&&e.I&&e.Kc&&e.V&&e.g?(a=e.h.currentTime,n||(a=null),O(f,$M(e,e.V,a,e.Fa,e.g,!0,!1),3)):f.B(2);if(f.g!=2){s=f.h,e.bf.push(s),e.I&&e.I.setMediaElement&&e.I.setMediaElement(null),(u=e.l?e.l.u:null)&&(s.i=u);var p=s,g=e.I,y=e.Kc;p.h=e.i,p.m=g,p.H=y,s.D=e.J,s.start(),e.i=null,e.I=null,e.Kc=null,e.u=null,e.Ze=null}return f.return(s)})}d.preload=function(e,n,s,a){n=n===void 0?null:n;var u=this,f,p;return X(function(g){return g.g==1?(f=Zo(u),Rl(f,a||u.g,Zo(u)),O(g,BM(u,e,n,s,!1,f),2)):((p=g.h)?p.start():gf(u,new oe(2,7,7005)),g.return(p))})},d.Zg=function(){var e=this,n,s,a,u;return X(function(f){for(n=[],s=C(e.bf),a=s.next();!a.done;a=s.next())u=a.value,u.l||n.push(u.destroy());return e.bf=[],O(f,Promise.all(n),0)})};function BM(e,n,s,a,u,f){u=u===void 0?!1:u;var p,g,y;return X(function(w){return w.g==1?a?w.B(2):O(w,VM(e,n),3):(w.g!=2&&(a=w.h),fee(e,a)?w.return(null):(p=f||e.g,g=!1,u&&e.h&&e.h.nodeName==="AUDIO"&&(g=!0),y=$M(e,n,s,a||null,p,!u,g),y=u?y.then(function(b){return b.F=!1,b}):y.then(function(b){return e.bf.push(b),b}),w.return(y)))})}function $M(e,n,s,a,u,f,p){f=f===void 0?!0:f,p=p===void 0?!1:p;var g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie;return X(function(Y){return Y.g==1?(g=null,y=Eo(u),p&&(y.manifest.disableVideo=!0),w=function(){return g.P&&g.l?null:g},b=function(){return w()?w().getConfiguration():e.g},e.sa.width!=1/0||e.sa.height!=1/0||e.g.ignoreHardwareResolution?Y.B(2):(I=ht(),O(Y,I.yc(),3))):(Y.g!=2&&(L=Y.h,e.sa.width=L.width,e.sa.height=L.height),j=new Rb(y,e.sa,null),U={networkingEngine:e.M,filter:function(ne){var Z,de;return X(function(te){if(te.g==1)return O(te,V3(j,ne),2);if(te.g!=4)return Z=te.h,Z?(de=rn("trackschanged"),O(te,Promise.resolve(),4)):te.B(0);g.dispatchEvent(de),re(te)})},makeTextStreamsForClosedCaptions:function(ne){return _ee(e,ne)},onTimelineRegionAdded:function(ne){e2(g.I,ne)},onEvent:function(ne){return g.dispatchEvent(ne)},onError:function(ne){return g.onError(ne)},isLowLatencyMode:function(){return b().streaming.lowLatencyMode},updateDuration:function(){e.l&&g.P&&e.l.updateDuration()},newDrmInfo:function(ne){var Z=g.j,de=Z?Z.g:null;de&&Z.C&&q3(j,de.keySystem,ne)},onManifestUpdated:function(){var ne=new Map().set("isLive",e.U());g.dispatchEvent(rn("manifestupdated",ne)),yg(g,!1,function(){e.D&&e.D.onManifestUpdated(e.U())})},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},onMetadata:function(ne,Z,de,te){var ae=ne;(ne=="com.apple.hls.interstitial"||ne=="com.apple.hls.overlay")&&(ae="com.apple.quicktime.HLS",ne={startTime:Z,endTime:de,values:te},e.D&&e.D.onHLSInterstitialMetadata(e,e.h,ne)),te=C(te),ne=te.next();for(var he={};!ne.done;he={Vh:void 0},ne=te.next())he.Vh=ne.value,he.Vh.name!="ID"&&yg(g,!1,function(Ee){return function(){U2(e,Z,de,ae,Ee.Vh)}}(he))},disableStream:function(ne){return e.disableStream(ne,e.g.streaming.maxDisabledTime)},addFont:function(ne,Z){return e.addFont(ne,Z)}},F=new ug(function(){return e.wa()}),F.addEventListener("regionadd",function(ne){var Z=ne.region;Ig(e,"timelineregionadded",Z,g),yg(g,!1,function(){e.D&&(e.D.onDashTimedMetadata(Z),e.D.onDASHInterstitialMetadata(e,e.h,Z))})}),B=null,y.streaming.observeQualityChanges&&(B=new a1(function(){return e.Rc()}),B.addEventListener("qualitychange",function(ne){u5(e,ne.quality,ne.position)}),B.addEventListener("audiotrackchange",function(ne){u5(e,ne.quality,ne.position,!0)})),q=!0,G={Gc:e.M,onError:function(ne){return g.onError(ne)},Xf:function(ne){yg(g,!0,function(){e.F&&Lee(e,ne)})},onExpirationUpdated:function(ne,Z){var de=rn("expirationupdated");g.dispatchEvent(de),(de=g.m)&&de.onExpirationUpdated&&de.onExpirationUpdated(ne,Z)},onEvent:function(ne){g.dispatchEvent(ne),ne.type=="drmsessionupdate"&&q&&(q=!1,ne=Date.now()/1e3-g.ua,(e.C||g.getStats()).m=ne,e.R&&ND(e.R))}},z=HM(e,w),w3(e.M,z),J=function(){return e.Ed(G)},ie={config:y,Rl:U,bm:F,am:B,Ed:J,Ql:j,networkingEngine:z,vk:f},g=new Gs(n,a,s,ie),Y.return(g))})}function VM(e,n){var s,a,u,f;return X(function(p){return p.g==1?(s=e.g.manifest.retryParameters,O(p,af(n,e.M,s),2)):(a=p.h,a=="application/x-mpegurl"&&(u=ht(),u.Ja()==="WEBKIT"&&(a="application/vnd.apple.mpegurl")),a=="video/quicktime"&&(f=ht(),f.Ja()==="CHROMIUM"&&(a="video/mp4")),p.return(a))})}function fee(e,n){if(!Pa(ht()))return!0;if(n){if((e.h||Td()).canPlayType(n)=="")return!1;if(!Pa(ht())||!Fh.has(n.toLowerCase()))return!0;if(Ny(n))return ht().Ja()==="WEBKIT"&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(n==="application/dash+xml"||n==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function N1(e,n){var s=e.g.textDisplayFactory;e.Ii!==s||n!==void 0&&n?(n=e.A,e.A=s(),e.A.configure?e.A.configure(e.g.textDisplayer):Nt("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.A.setTextLanguage||Nt("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),n?(e.A.setTextVisibility(n.isTextVisible()),n.destroy().catch(function(){})):e.A.setTextVisibility(e.W),e.H&&kJ(e.H,e.A),e.Ii=s,e.l&&eZ(e.l)):e.A&&e.A.configure&&e.A.configure(e.g.textDisplayer)}function O2(e){var n,s,a;return X(function(u){if(u.g==1)return ht(),mf(e,"media-source"),e.g.mediaSource.useSourceElements&&e1(e.h),N1(e),n=bee(e.h,e.A,{Wk:function(){return e.keySystem()},onMetadata:function(f,p,g){f=C(f);for(var y=f.next();!y.done;y=f.next())if(y=y.value,y.data&&typeof y.cueTime=="number"&&y.frames){var w=y.cueTime+p,b=g;b&&w>b&&(b=w);for(var I=C(y.frames),L=I.next();!L.done;L=I.next())U2(e,w,b,"org.id3",L.value);e.D&&e.D.onHlsTimedMetadata(y,w)}},Wl:function(f){e.jb&&e2(e.jb,{schemeIdUri:f.schemeIdUri,startTime:f.startTime,endTime:f.endTime,id:String(f.id),emsg:f})},onEvent:function(f){return e.dispatchEvent(f)},Yl:function(){e.I&&e.I.update&&e.I.update()}},e.R,e.g.mediaSource),s=e.g.manifest,a=s.segmentRelativeVttTiming,n.Fa=a,O(u,n.L,2);e.H=n,re(u)})}function GM(e,n,s){function a(){return F2(e)}if(e.j.o(n,"playing",a),e.j.o(n,"pause",a),e.j.o(n,"ended",a),e.j.o(n,"ratechange",function(){var f=e.h.playbackRate;f!=0&&(e.L&&(e.L.set(f),e.m==Tr&&e.u.playbackRateChanged(f),e5(e,f)),f=rn("ratechange"),e.dispatchEvent(f))}),n.remote&&(e.j.o(n.remote,"connect",function(){e.l&&n.remote.state=="connected"&&Pl(e),Ti(e)}),e.j.o(n.remote,"connecting",function(){return Ti(e)}),e.j.o(n.remote,"disconnect",function(){return X(function(f){if(f.g==1)return e.l&&n.remote.state=="disconnected"?O(f,m1(e.l),3):f.B(2);f.g!=2&&Pl(e),Ti(e),re(f)})})),n.audioTracks&&(e.j.o(n.audioTracks,"addtrack",function(){return Ti(e)}),e.j.o(n.audioTracks,"removetrack",function(){return Ti(e)}),e.j.o(n.audioTracks,"change",function(){return Ti(e)})),n.videoTracks&&(e.j.o(n.videoTracks,"addtrack",function(){return Ti(e)}),e.j.o(n.videoTracks,"removetrack",function(){return Ti(e)}),e.j.o(n.videoTracks,"change",function(){return Ti(e)})),(n.webkitPresentationMode||n.webkitSupportsFullscreen)&&e.j.o(n,"webkitpresentationmodechanged",function(){e.Ue&&N1(e,!0)}),n.textTracks){var u=function(){e.m===Si&&e.A instanceof ir&&Pl(e),Ti(e)};e.j.o(n.textTracks,"addtrack",function(f){if(f.track)switch(f=f.track,f.kind){case"metadata":xee(e,f);break;case"chapters":Tee(e,f);break;default:u()}}),e.j.o(n.textTracks,"removetrack",u),e.j.o(n.textTracks,"change",u)}n.preload!="none"&&e.j.qa(n,"loadedmetadata",function(){e.C.G=Date.now()/1e3-s})}function pee(e,n,s,a){var u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge;return X(function(ve){switch(ve.g){case 1:for(mf(e,"load"),u=e.h,e.L=new lg({Bf:function(){return u.playbackRate},kd:function(){return u.defaultPlaybackRate},li:function(Ie){u.playbackRate=Ie},wj:function(Ie){u.currentTime+=Ie}}),GM(e,u,n),("onchange"in l.screen)&&e.j.o(l.screen,"change",function(){if(e.J.getConfiguration){var Ie=e.J.getConfiguration();Ie.hdrLevel=="AUTO"?ju(e):e.g.preferredVideoHdrLevel=="AUTO"&&e.g.abr.enabled&&(Ie.hdrLevel="AUTO",e.J.configure(Ie),ju(e))}}),f=!1,p=C(e.i.variants),g=p.next();!g.done;g=p.next())y=g.value,(w=y.video&&y.video.dependencyStream)&&(f=MD(w));dee(e,e.g,f),e.ce=e.g.preferredTextLanguage,e.ie=e.g.preferredTextRole,e.ge=e.g.preferForcedSubs,G2(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.u.init(function(Ie,Le,at){e.i&&e.l&&Ie!=e.l.u&&bg(e,Ie,!0,Le===void 0?!1:Le,at===void 0?0:at)}),e.u.setMediaElement(u),e.u.setCmsdManager(e.oa),e.l=Aee(e),e.l.configure(e.g.streaming),e.m=Tr,e.dispatchEvent(rn("streaming")),b=s;case 2:for((L=e.l.u)||b||(b=n5(e,!0)),j=[],I=L||b,U=C([I.video,I.audio]),F=U.next();!F.done;F=U.next())(B=F.value)&&!B.segmentIndex&&(j.push(B.createSegmentIndex()),B.dependencyStream&&j.push(B.dependencyStream.createSegmentIndex()));if(!(j.length>0)){ve.B(4);break}return O(ve,Promise.all(j),4);case 4:if(!I||I.disabledUntilTime!=0){ve.B(2);break}if(ju(e),e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(I),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.Ig):$e("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.K&&(KZ(e.K,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),zZ(e.K,n*1e3)),G2(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),QJ(e.l,e.g.playRangeStart,e.g.playRangeEnd),e.Na=!0,e.dispatchEvent(rn("canupdatestarttime")),q=function(Ie){e.G=See(e,Ie),e.Ob=wee(e,Ie),qM(e,u,!1)},e.g.streaming.startAtSegmentBoundary||(G=e.O,G==null&&e.i.startTime&&(G=e.i.startTime),q(G)),L){ve.B(7);break}if(!e.g.streaming.startAtSegmentBoundary){ve.B(8);break}return z=e.i.presentationTimeline,e.O instanceof Date&&(ie=z.m||z.i,Y=e.O.getTime()/1e3-ie,Y!=null&&(J=Y)),J==null&&(J=typeof e.O=="number"?e.O:e.h.currentTime),e.O==null&&e.i.startTime&&(J=e.i.startTime),ne=z.hc(),Z=z.Lb(),J<ne?J=ne:J>Z&&(J=Z),O(ve,Ree(b,J),9);case 9:de=ve.h,q(de);case 8:bg(e,b,!0,!1,0);case 7:return e.G.ready(),te=e.Cc().find(function(Ie){return Ie.active}),te||((ae=Kh(e.i.textStreams,e.ce,e.ie,e.ge)[0]||null)&&v2(e.C.h,ae,!0),b&&(ae?(m3(b.audio,ae,e.g)&&(e.W=!0),e.W&&e.A.setTextVisibility(!0)):(e.W=!1,e.A.setTextVisibility(!1)),a5(e)),ae&&(e.g.streaming.alwaysStreamText||e.Yc())&&(c1(e.l,ae),Ag(e))),O(ve,e.l.start(a),10);case 10:e.g.abr.enabled&&(e.u.enable(),l5(e)),Ti(e),e.i.variants.some(function(Ie){return Ie.primary}),((he=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(Ee=function(){return t5(e)},e.j.o(u,"timeupdate",Ee)),he||(Te=function(){return U1(e)},e.j.o(u,"timeupdate",Te),U1(e),e.i.nextUrl&&(e.g.streaming.preloadNextUrlWindow>0&&(ge=function(){var Ie;return X(function(Le){if(Le.g==1)return Ie=e.wa().end-e.h.currentTime,isNaN(Ie)||!(Ie<=e.g.streaming.preloadNextUrlWindow)?Le.B(0):(e.j.Ea(u,"timeupdate",ge),O(Le,e.preload(e.i.nextUrl),4));e.$a=Le.h,re(Le)})},e.j.o(u,"timeupdate",ge)),e.j.o(u,"ended",function(){e.load(e.$a||e.i.nextUrl)}))),e.D&&e.D.onManifestUpdated(he),re(ve)}})}function mee(e,n){var s,a,u;return X(function(f){return f.g==1?(s=Date.now()/1e3,a=!0,e.F=e.Ed({Gc:e.M,onError:function(p){gf(e,p)},Xf:function(){},onExpirationUpdated:function(){var p=rn("expirationupdated");e.dispatchEvent(p)},onEvent:function(p){e.dispatchEvent(p),p.type=="drmsessionupdate"&&a&&(a=!1,e.C.m=Date.now()/1e3-s)}}),e.F.configure(e.g.drm),u=g3([n]),e.F.O=!0,O(f,R3(e.F,[u],[]),2)):O(f,e.F.Ub(e.h),0)})}function gee(e,n,s){var a,u,f,p,g,y,w,b,I,L,j,U;return X(function(F){switch(F.g){case 1:if(mf(e,"src-equals"),a=e.h,e.G=new PN(a),u=!1,e.We.push(function(){u=!0}),e.dispatchEvent(rn("canupdatestarttime")),e.O!=null&&e.G.Fg(e.O),e.Ob=Eee(e,e.O||0),e.L=new lg({Bf:function(){return a.playbackRate},kd:function(){return a.defaultPlaybackRate},li:function(B){a.playbackRate=B},wj:function(B){a.currentTime+=B}}),qM(e,a,!0),a.textTracks&&(N1(e),f=function(B){if(!(e.A instanceof ir)){var q=M1(e).find(function(G){return G.mode!=="disabled"});q&&(q.mode=B?"showing":"hidden"),e.A instanceof Yr&&(q=Iee(e))&&(q.mode=!B&&e.A.isTextVisible()?"showing":"hidden")}},e.j.o(a,"enterpictureinpicture",function(){return f(!0)}),e.j.o(a,"leavepictureinpicture",function(){return f(!1)}),a.remote?(e.j.o(a.remote,"connect",function(){return f(!1)}),e.j.o(a.remote,"connecting",function(){return f(!1)}),e.j.o(a.remote,"disconnect",function(){return f(!1)})):"webkitCurrentPlaybackTargetIsWireless"in a&&e.j.o(a,"webkitcurrentplaybacktargetiswirelesschanged",function(){return f(!1)}),p=a,(p.webkitPresentationMode||p.webkitSupportsFullscreen)&&e.j.o(p,"webkitpresentationmodechanged",function(){p.webkitPresentationMode?f(p.webkitPresentationMode!=="inline"):p.webkitSupportsFullscreen&&f(p.webkitDisplayingFullscreen)})),GM(e,a,n),g=WZ(e.K,e.V,s),!g.includes("#t=")&&(e.g.playRangeStart>0||isFinite(e.g.playRangeEnd))&&(g+="#t=",e.g.playRangeStart>0&&(g+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(g+=","+e.g.playRangeEnd)),!e.H){F.B(2);break}return O(F,e.H.destroy(),3);case 3:e.H=null;case 2:return e1(a),a.src=g,y=ht(),y.Oa()=="TV"&&a.load(),a.preload!="none"&&!a.autoplay&&Ny(s)&&y.Ja()==="WEBKIT"&&a.load(),e.m=Si,e.dispatchEvent(rn("streaming")),w=function(){return new Promise(function(B){var q=new Ke(B);e.j.o(a.textTracks,"change",function(){return q.Y(.5)}),q.Y(.5)})},b=new en,bd(a,HTMLMediaElement.HAVE_METADATA,e.j,function(){return X(function(B){if(B.g==1)return e.G.ready(),e.Fa&&Ny(e.Fa)?O(B,w(),3):(b.resolve(),B.B(0));b.resolve(),re(B)})}),bd(a,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var B,q,G,z,J;return X(function(ie){if(ie.g==1)return O(ie,w(),2);if(u)return ie.return();if(vee(e),B=M1(e),B.some(function(Y){return Y.mode==="showing"})&&(e.W=!0,e.A.setTextVisibility(!0)),!(e.A instanceof ir))for(B.length&&(e.A.enableTextDisplayer?e.A.enableTextDisplayer():Nt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),q=!1,G=C(B),z=G.next();!z.done;z=G.next())J=z.value,J.mode!=="disabled"&&(q?(J.mode="disabled",$e("Found more than one enabled text track, disabling it",J)):(QM(e,J),q=!0));yee(e),re(ie)})}),a.error?b.reject(V2(e)):a.preload=="none"&&($e('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),b.resolve()),e.j.qa(a,"error",function(){b.reject(V2(e))}),O(F,My(e.g.streaming.loadTimeout,b),4);case 4:((I=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(L=function(){return t5(e)},e.j.o(a,"timeupdate",L)),I||(j=function(){return U1(e)},e.j.o(a,"timeupdate",j),U1(e)),e.D&&(e.D.onManifestUpdated(I),I&&(U=e.wa().end,e.j.o(a,"progress",function(){var B=e.wa().end;U!=B&&(e.D.onManifestUpdated(e.U()),U=B)}))),e.Na=!0,re(F)}})}function vee(e){var n=e.g.preferredAudioLanguage;n!=""&&e.Mj(n,e.g.preferredAudioRole)}function yee(e){var n=e.g.preferredTextLanguage;n!=""&&e.ei(n,e.g.preferredTextRole,e.g.preferForcedSubs)}function xee(e,n){if(n.kind=="metadata"){n.mode="hidden",e.j.o(n,"cuechange",function(){if(n.activeCues)for(var a=C(n.activeCues),u=a.next();!u.done;u=a.next())u=u.value,U2(e,u.startTime,u.endTime,u.type,u.value),e.D&&e.D.onCueMetadataChange(u.value);if(n.cues){a=[],u=C(n.cues);for(var f=u.next(),p={};!f.done;p={Pc:void 0},f=u.next())p.Pc=f.value,p.Pc.type=="com.apple.quicktime.HLS"&&p.Pc.startTime!=null&&(f=a.find(function(g){return function(y){return y.startTime==g.Pc.startTime&&y.endTime==g.Pc.endTime}}(p)),f||(f={startTime:p.Pc.startTime,endTime:p.Pc.endTime,values:[]},a.push(f)),f.values.push(p.Pc.value));for(a=C(a),u=a.next();!u.done;u=a.next())u=u.value,u.values.some(function(g){return g.key=="X-ASSET-URI"||g.key=="X-ASSET-LIST"})&&e.D&&(u.values.push({key:"CUE",description:"",data:u.startTime!=0||e.U()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.D.onHLSInterstitialMetadata(e,e.h,u))}});var s=new Ke(function(){var a=Cee(e);a=C(a);for(var u=a.next();!u.done;u=a.next())u.value.mode="hidden"}).Ka().Y(.5);e.We.push(function(){s.stop()})}}function j2(e,n,s){n=new Map().set("startTime",n.startTime).set("endTime",n.endTime).set("metadataType",n.schemeIdUri).set("payload",n.payload),e.dispatchEvent(rn(s,n))}function U2(e,n,s,a,u){e.ya&&(n={schemeIdUri:a,startTime:n,endTime:s||1/0,id:"",payload:u},n.id=JSON.stringify(n),e2(e.ya,n))}function Tee(e,n){if(n&&n.kind=="chapters"){n.mode="hidden";var s=new Ke(function(){n.mode="hidden"}).Ka().Y(.5);e.We.push(function(){s.stop()})}}d.hm=function(){for(var e=this.Z;e.g;)e.release()},d.Ed=function(e){return new zy(e)};function HM(e,n){function s(f){n()?n().dispatchEvent(f):e.dispatchEvent(f)}function a(f){n()?yg(n(),!0,f):f()}n||(n=function(){return null});var u=new pn(function(f,p,g,y,w){a(function(){e.u&&e.u.segmentDownloaded(f,p,g,y,w)})},function(f,p,g){p=new Map().set("headers",f).set("request",p).set("requestType",g),s(rn("downloadheadersreceived",p)),a(function(){if(e.oa){var y=e.oa;if(y.h.enabled){var w=f["cmsd-static"];if(w)try{var b=new Map,I=w.split(",");for(w=0;w<I.length;w++){var L=I[w].split("=");b.set(L[0],RM(L[1]))}}catch{}if(b=f["cmsd-dynamic"]){e:{try{var j=new Map,U=b.split(";");for(b=1;b<U.length;b++){var F=U[b].split("=");j.set(F[0],RM(F[1]))}var B=j;break e}catch{B=null;break e}B=void 0}B&&(y.g=B)}}}})},function(f,p){f=new Map().set("request",f).set("response",p),s(rn("downloadcompleted",f))},function(f,p,g,y){f=new Map().set("request",f).set("error",p).set("httpResponseCode",g).set("aborted",y),s(rn("downloadfailed",f))},function(f,p,g){a(function(){if(e.K){var y=e.K,w=g;if(w=w===void 0?{}:w,y.g.enabled)if(p.method==="HEAD")pf(y,p,{});else switch(f){case 0:try{if(y.g.enabled){if(w.type){e:{switch(w.type){case 4:var b=y.A?R1:_1;break e;case 3:case 2:b=y.A?P1:L1;break e;case 5:b="s";break e}b=void 0}y.l=b}pf(y,p,{ot:bM,su:!y.F})}}catch(L){Kr("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",L)}break;case ys:try{if(y.g.enabled){var I=wM(y,w,p.uris[0]);I.ts=Date.now(),y.m.has(p)&&y.m.delete(p),y.m.set(p,I.ts),pf(y,p,I)}}catch(L){Kr("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",L)}break;case 2:case 5:case 6:pf(y,p,{ot:"k"});break;case 4:pf(y,p,{ot:"o"})}}})},function(f,p,g,y){(f=n()?n().m:e.I)&&f.banLocation&&f.banLocation(y)},function(f,p,g){if(p.data){var y=p.data.byteLength,w=n()?n().getStats():e.C;if(w&&(iM(w,y),f===0&&(w.qj=y)),y=e.K,g=g===void 0?{}:g,I2(y).length!==0)switch(f){case ys:try{var b=wM(y,g,p.uri);p.originalRequest&&p.originalRequest.timeToFirstByte!=null&&(b.ttfb=p.originalRequest.timeToFirstByte),p.timeMs!=null&&(b.ttlb=p.timeMs);var I=p.originalUri||p.uri;if(I.includes("CMCD="))try{var L=new URL(I);L.searchParams.delete("CMCD");var j=L.toString()}catch{j=I}else j=I;b.url=j,y.m.has(p.originalRequest)?(b.ts=y.m.get(p.originalRequest),y.m.delete(p.originalRequest)):b.ts||(b.ts=Date.now());var U=I2(y);if(U.length!==0){var F=y.g.version==P2?Array.from(new Set([].concat(K(D2),K(see)))):AM;b.rc=p.status||0;var B=R2(y,b,kM);p.headers&&p.headers["CMSD-Static"]&&(B.cmsds=btoa(p.headers["CMSD-Static"])),p.headers&&p.headers["CMSD-Dynamic"]&&(B.cmsdd=btoa(p.headers["CMSD-Dynamic"]));for(var q=C(U),G=q.next();!G.done;G=q.next()){var z=G.value,J=k2(z.includeKeys||[],F),ie=TM(z);y.u[ie]||(y.u[ie]={request:1,response:1}),B.sn=y.u[ie].response++;var Y=_2(B,J);xM(y,Y,z,p)}}}catch(ne){Kr("CMCD_SEGMENT_ERROR","Could not generate response segment CMCD data.",ne)}}}});return u.configure(e.g.networking),u}function See(e,n){return new MN(e.h,e.i,e.g.streaming,n,function(){e.Ob&&BN(e.Ob,!e.G.Gi()),e.l&&e.l.sd(),e.P&&La(e,"seeking")},function(s){return e.dispatchEvent(s)})}function wee(e,n){var s=e.U()||typeof n=="number"&&n>0;n=new Ad(e.Te,s),n.addEventListener("enter",function(f){Ig(e,"timelineregionenter",f.region)}),n.addEventListener("exit",function(f){Ig(e,"timelineregionexit",f.region)}),n.addEventListener("skip",function(f){var p=f.region;f.seeking||(Ig(e,"timelineregionenter",p),Ig(e,"timelineregionexit",p))});var a=new Ad(e.ya,s);a.addEventListener("enter",function(f){j2(e,f.region,"metadata")}),s=new Ad(e.jb,s),s.addEventListener("enter",function(f){f=new Map().set("detail",f.region.emsg),e.dispatchEvent(rn("emsg",f))});var u=new Zb(e.h);return u.g.add(n),u.g.add(a),u.g.add(s),e.Re&&u.g.add(e.Re),u}function Eee(e,n){n=new Ad(e.ya,n instanceof Date||n>0),n.addEventListener("enter",function(a){j2(e,a.region,"metadata")});var s=new Zb(e.h);return s.g.add(n),s}function qM(e,n,s){e.P=new KQ,_b(e.P,vd),KM(e),Eg(e),e.La=new Ke(function(){La(e)}),e.g.streaming.rebufferingGoal&&e.La.xa(.25),e.j.o(n,"waiting",function(){return La(e,"waiting")}),e.j.o(n,"canplaythrough",function(){return La(e,"canplaythrough")}),e.j.o(n,"playing",function(){return La(e,"playing")}),e.j.o(n,"seeked",function(){return La(e,"seeked")}),e.j.o(n,"timeupdate",function(){return La(e,"timeupdate")}),s&&(e.j.o(n,"progress",function(){return La(e,"progress")}),e.j.o(n,"stalled",function(){return La(e,"stalled")}))}function KM(e){var n=e.g.streaming.rebufferingGoal;e.P.j.set(yd,Math.min(.5,n/2)).set(vd,n)}function La(e,n){if(e.g.streaming.rebufferingGoal){n=e.H?wd(e.H):!1,n=e.isEnded()||n||e.G.mj();var s=sN(e.h.buffered,e.h.currentTime),a=e.P,u=a.j.get(a.g);_b(a,n||s>=u&&s>0?yd:vd)&&Eg(e)}else if(n){s=e.P,a=e.h.currentTime,u=s.h,s.h=a;var f=void 0;switch(n){case"seeking":case"waiting":s.h=-1,f=vd;break;case"canplaythrough":case"playing":case"seeked":f=yd;break;case"timeupdate":u>=0&&a-u>.01&&(f=yd)}f!==void 0&&_b(s,f)&&Eg(e)}}function bee(e,n,s,a,u){return new fN(e,n,s,u,a)}function Aee(e){return new KN(e.i,{Bc:function(){return e.G?e.G.ke():0},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},Za:function(){return e.Za()},video:e.h,ha:e.H,Gc:e.M,onError:function(n){return gf(e,n)},onEvent:function(n){return e.dispatchEvent(n)},Rd:function(n,s,a,u){var f=n.startTime,p=n.endTime,g=s.type;if(g!=mt){if(e.G){e.G.yj();var y=Hb(e.H,g);!e.U()&&e.h.paused&&!e.h.seeking&&y!=null&&y>0&&e.G.ke()<y&&!OM(e.G.ke(),y,.001)&&e.G.Fg(y)}La(e)}a=new Map().set("start",f).set("end",p).set("contentType",g).set("isMuxed",a).set("isDependency",u),e.dispatchEvent(rn("segmentappended",a)),e.u&&s.fastSwitching&&n.od&&n.Ce&&e.u.trySuggestStreams()},Xl:function(n,s){(s=s.Pd)&&e.Re&&$J(e.Re,s,n)},Pi:function(n,s){var a=e.F;if(a.h.parseInbandPsshEnabled&&!a.H&&["audio","video"].includes(n)){n=new Ab(nt(s)),s=0;for(var u=C(n.data),f=u.next();!f.done;f=u.next())s+=f.value.length;if(s==0)a=Promise.resolve();else{for(s=new Uint8Array(s),u=0,n=C(n.data),f=n.next();!f.done;f=n.next())f=f.value,s.set(f,u),u+=f.length;Jm(a,"cenc",s),a=a.m}}else a=Promise.resolve();return a},disableStream:function(n,s){return e.disableStream(n,s)},Am:function(n,s){return!(e.g.abr.enabled&&s.fastSwitching&&n.od&&n.Ce)}})}d.configure=function(e,n){var s=this.getConfiguration();if(arguments.length==2&&typeof e=="string"&&(e=mg(e,n)),"preferredVariantRole"in e&&(Nt("preferredVariantRole configuration","Please Use preferredAudioRole instead."),e.preferredAudioRole=e.preferredVariantRole,delete e.preferredVariantRole),e.streaming&&"forceTransmuxTS"in e.streaming&&(Nt("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Nt("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){Nt("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var a=ht();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&a.Ja()==="WEBKIT",delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&typeof e.streaming.liveSync=="boolean"&&(Nt("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),a=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=a),e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){a=e.streaming.liveSyncMinLatency||0;var u=Math.abs((e.streaming.liveSyncMaxLatency||1)-a)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=a+u,e.streaming.liveSync.targetLatencyTolerance=u}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Nt("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Nt("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Nt("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Nt("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Nt("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Nt("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Nt("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Nt("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Nt("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var f=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return f},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(Nt("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(Nt("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(Nt("manifest.dash.enableAudioGroups configuration","Please Use manifest.enableAudioGroups instead."),e.manifest.enableAudioGroups=e.manifest.dash.enableAudioGroups,delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(Nt("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(Nt("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(Nt("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(Nt("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(Nt("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(Nt("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(Nt("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){a=!1;for(var p in e.drm.advanced){var g=e.drm.advanced[p];u=g.videoRobustness,g=g.audioRobustness,"videoRobustness"in e.drm.advanced[p]&&!Array.isArray(e.drm.advanced[p].videoRobustness)&&(e.drm.advanced[p].videoRobustness=[u],a=!0),"audioRobustness"in e.drm.advanced[p]&&!Array.isArray(e.drm.advanced[p].audioRobustness)&&(e.drm.advanced[p].audioRobustness=[g],a=!0)}a&&Nt("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(Nt("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(Nt("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(Nt("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),p=Rl(this.g,e,Zo(this)),zM(this,s),p},d.Bk=function(e){this.Ig=e};function zM(e,n){if(e.Xe=new Rb(e.g,e.sa,e.F),e.I){var s=Eo(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(s.disableVideo=!0),e.I.configure(s)}if(e.F&&e.F.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=Io&&H3(e.Xe,e.i)&&Ti(e)}catch(u){gf(e,u)}e.u&&ju(e),s=e.l.u,!s||s.allowedByApplication&&s.allowedByKeySystem||Uu(e)}if(e.M&&e.M.configure(e.g.networking),e.H&&(e.H.configure(e.g.mediaSource),e.H.Fa=e.g.manifest.segmentRelativeVttTiming),e.A&&N1(e),e.u&&(e.u.configure(e.g.abr),e.g.abr.enabled?e.u.enable():e.u.disable(),l5(e)),e.P&&KM(e),e.La&&(e.g.streaming.rebufferingGoal?e.La.xa(.25):e.La.stop()),e.i&&G2(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.D&&e.D.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.oa&&e.oa.configure(e.g.cmsd),e.ua&&e.ua.configure(e.g.queue),e.m==Tr&&e.J.getConfiguration){s=e.J.getConfiguration();var a=!1;n.preferredVideoHdrLevel!=e.g.preferredVideoHdrLevel&&s.hdrLevel!=e.g.preferredVideoHdrLevel&&(s.hdrLevel=e.g.preferredVideoHdrLevel,a=!0),n.preferredVideoLayout!=e.g.preferredVideoLayout&&s.videoLayout!=e.g.preferredVideoLayout&&(s.videoLayout=e.g.preferredVideoLayout,a=!0),n.preferSpatialAudio!=e.g.preferSpatialAudio&&s.spatialAudio!=e.g.preferSpatialAudio&&(s.spatialAudio=e.g.preferSpatialAudio,a=!0),n.preferredVideoRole!=e.g.preferredVideoRole&&s.videoRole!=e.g.preferredVideoRole&&(s.videoRole=e.g.preferredVideoRole,a=!0),a&&(e.J.configure(s),Uu(e))}}d.getConfiguration=function(){var e=Zo(this);return Rl(e,this.g,Zo(this)),e},d.Nk=function(){return this.Ig},d.ej=function(){var e=Zo(this);return Rl(e,this.g,Zo(this)),p2(this.g,Zo(this))},d.bj=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var n=this.getConfiguration().streaming.bufferingGoal;if(n=Math.min(this.h.currentTime+n,this.wa().end),e>=n)return 1;if(!(e<=this.h.currentTime)&&e<n)return(e-this.h.currentTime)/(n-this.h.currentTime)}return 0},d.Hj=function(){var e=this.getConfiguration(),n;for(n in this.g)delete this.g[n];Rl(this.g,Zo(this),Zo(this)),zM(this,e)},d.Ac=function(){return this.m},d.Ah=function(){return this.i?this.i.type:null},d.zf=function(){return this.h},d.Wb=function(){return this.M},d.jd=function(){return this.V},d.xf=function(){return this.D?this.D:null},d.Af=function(){return this.ua?this.ua:null},d.U=function(){return this.i&&!this.Da()?this.i.presentationTimeline.U():this.h&&(this.h.src||this.Da())?this.h.duration==1/0:!1},d.md=function(){return this.i?this.i.presentationTimeline.md():!1},d.Md=function(){if(this.i&&!this.Da()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&(this.h.src||this.Da())?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},d.Kf=function(){if(this.i&&!this.Da()){var e=this.i.variants;return e.length?(e=e[0],e.audio||!e.video?!1:!e.video.codecs.includes(",")):!1}return this.h&&(this.h.src||this.Da())&&this.h.audioTracks?this.h.audioTracks.length==0:!1},d.wa=function(){if(this.i&&!this.Da()){if(!this.Na&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.hc(),end:e.Lb()}}if(this.h&&(this.h.src||this.Da())&&(e=this.h.seekable)&&e.length){var n=this.g?this.g.playRangeStart:0;n=Math.max(e.start(0),n);var s=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),s),{start:n,end:e}}return{start:0,end:0}},d.Dl=function(){this.U()&&(this.h.currentTime=this.wa().end)},d.Jh=function(){return this.Na},d.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},d.drmInfo=function(){return this.F?this.F.g:null},d.ue=function(){return this.F?this.F.ue():1/0},d.sh=function(){return this.F?this.F.sh():[]},d.yf=function(){return this.F?this.F.yf():{}},d.Hf=function(){return this.P?this.P.g==vd:!!this.V},d.Za=function(){return this.h?this.L?this.L.i:1:0},d.Ei=function(e){this.m==Tr&&this.l&&zN(this.l,e)},d.vc=function(e,n){n=n===void 0?!0:n,e==0?$e("A trick play rate of 0 is unsupported!"):(this.L.set(e),this.m==Tr&&(this.u.playbackRateChanged(e),this.Ei(n&&e!=1)),e5(this,e))},d.Cd=function(){var e=this.L.kd();this.m==Si&&this.L.set(e),this.m==Tr&&(this.L.set(e),this.u.playbackRateChanged(e),this.Ei(!1)),this.mc.Ta()},d.Nb=function(){if(this.i&&!this.Da()){for(var e=this.l?this.l.u:null,n=[],s=0,a=C(this.i.variants),u=a.next();!u.done;u=a.next())if(u=u.value,Qm(u)){var f=fd(u);f.active=u==e,f.active||s==1||e==null||u.video!=e.video||u.audio!=e.audio||(f.active=!0),f.active&&s++,n.push(f)}return n}if(this.h&&this.h.audioTracks){var p=r5(this);return e=Array.from(this.h.audioTracks),e.length?e.map(function(g){return Uy(g,p)}):p?[Uy(null,p)]:[]}return[]},d.Cc=function(){if(this.i){if(this.Da())return[];for(var e=this.l?this.l.C:null,n=[],s=C(this.i.textStreams),a=s.next();!a.done;a=s.next()){a=a.value;var u=pd(a);u.active=a==e,n.push(u)}return n}return this.h&&this.h.src&&this.h.textTracks?M1(this).map(function(f){return d3(f)}):[]},d.xh=function(){var e=this.df;return this.i&&(e=this.i.imageStreams),e.map(function(n){return Sb(n)})},d.Ek=function(e){var n=this,s,a;return X(function(u){return u.g==1?O(u,YM(n,e),2):(s=u.h,s?(a=[],s.segmentIndex.Kb(function(f){var p=WM(f.tilesLayout||s.tilesLayout);if(p)for(var g=p.rows*p.columns,y=f.j-f.startTime,w=0;w<g;w++){var b=XM(f,s,f.startTime+y*w/g,p);a.push(b)}}),s.closeSegmentIndex&&s.closeSegmentIndex(),u.return(a)):u.return(null))})};function WM(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}d.gj=function(e,n){var s=this,a,u,f,p,g,y;return X(function(w){return w.g==1?O(w,YM(s,e),2):(a=w.h,!a||(a.closeSegmentIndex&&(s.Jc.has(a)||(u=new Ke(function(){a.closeSegmentIndex(),s.Jc.delete(a)}),s.Jc.set(a,u)),f=s.Jc.get(a),f.Y(5)),p=a.segmentIndex.find(n),p==null)?w.return(null):(g=a.segmentIndex.get(p),(y=WM(g.tilesLayout||a.tilesLayout))?w.return(XM(g,a,n,y)):w.return(null)))})};function YM(e,n){var s,a;return X(function(u){return u.g==1?e.m!=Tr&&e.m!=Si||(s=e.df,e.i&&(s=e.i.imageStreams),a=s[0],!a)?u.return(null):(n!=null&&(a=s.find(function(f){return f.id==n})),a?a.segmentIndex?u.B(2):O(u,a.createSegmentIndex(),2):u.return(null)):u.return(a)})}function XM(e,n,s,a){var u=n.width||0,f=n.height||0,p=u/a.columns,g=f/a.rows,y=a.columns*a.rows,w=e.j-e.startTime;w=e.C||w/y;var b=e.startTime,I=0,L=0;return y>1&&(L=Math.floor((s-e.startTime)/w),b=e.startTime+L*w,I=L%a.columns*p,L=Math.floor(L/a.columns)*g),a=!1,(s=e.thumbnailSprite)&&(a=!0,g=s.height,I=s.positionX,L=s.positionY,p=s.width),{segment:e,imageHeight:f,imageWidth:u,height:g,positionX:I,positionY:L,startTime:b,duration:w,uris:e.S(),startByte:e.Uc(),endByte:e.Sc(),width:p,sprite:a,mimeType:e.mimeType||n.mimeType,codecs:e.codecs||n.codecs}}d.kg=function(e){function n(){var a=s.i.textStreams.find(function(u){return u.id==e.id});a&&a!=s.l.C&&(v2(s.C.h,a,!1),c1(s.l,a),Pl(s),Ag(s),s.ce=a.language)}var s=this;this.i&&this.G&&(n(),!this.Da())||function(){if(s.h&&s.h.textTracks){var a=M1(s),u=a.find(function(g){return jy(g)===e.id});if(u){if(s.A instanceof ir){a=C(a);for(var f=a.next();!f.done;f=a.next()){f=f.value;var p=f===u?s.W?"showing":"hidden":"disabled";f.mode!==p&&(f.mode=p)}}else a=a.find(function(g){return g.mode!=="disabled"}),a!==u&&(a&&(a.mode="disabled",s.j.Ea(a,"cuechange"),s.A.remove(0,1/0)),u&&QM(s,u));Pl(s),Ag(s)}}}()};function QM(e,n){e.j.o(n,"cuechange",function(){e.A.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var s={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},a=[],u=Array.from(n.activeCues||[]);u=C(u);for(var f=u.next();!f.done;f=u.next()){if(f=f.value,f.endTime===1/0||f.endTime<f.startTime)f=null;else{var p=new cn(f.startTime,f.endTime,f.text);p.line=typeof f.line=="number"?f.line:null,f.lineAlign&&(p.lineAlign=f.lineAlign),p.lineInterpretation=f.snapToLines?Hm:1,p.position=typeof f.position=="number"?f.position:null,f.positionAlign&&(p.positionAlign=f.positionAlign),p.size=f.size,p.textAlign=f.align,f.vertical==="lr"?p.writingMode="vertical-lr":f.vertical==="rl"&&(p.writingMode="vertical-rl"),f.region&&(p.region.id=f.region.id,p.region.height=f.region.lines,p.region.heightUnits=2,p.region.regionAnchorX=f.region.regionAnchorX,p.region.regionAnchorY=f.region.regionAnchorY,p.region.scroll=f.region.scroll,p.region.viewportAnchorX=f.region.viewportAnchorX,p.region.viewportAnchorY=f.region.viewportAnchorY,p.region.viewportAnchorUnits=Zi,p.region.width=f.region.width,p.region.widthUnits=Zi),Ly(p),f=p}f&&((p=e.g.mediaSource.modifyCueCallback)&&p(f,null,s),a.push(f))}e.A.append(a)}),n.mode=document.pictureInPictureElement?"showing":"hidden"}d.Me=function(e,n,s){function a(){var f=u.i.variants.find(function(g){return g.id==e.id});if(f&&Qm(f)){var p=u.l.u;u.g.abr.enabled&&(p.video!=f.video||p.audio&&f.audio&&p.audio.language==f.audio.language&&p.audio.channelsCount==f.audio.channelsCount&&p.audio.label==f.audio.label)&&$e("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),u.Da()?bg(u,f,!1,!1,0):bg(u,f,!1,n||!1,s||0),u.J.configure({language:f.language,role:f.audio&&f.audio.roles&&f.audio.roles[0]||"",videoRole:f.video&&f.video.roles&&f.video.roles[0]||"",channelCount:f.audio&&f.audio.channelsCount?f.audio.channelsCount:0,hdrLevel:f.video&&f.video.hdr?f.video.hdr:"",spatialAudio:f.audio&&f.audio.spatialAudio?f.audio.spatialAudio:!1,videoLayout:f.video&&f.video.videoLayout?f.video.videoLayout:"",audioLabel:f.audio&&f.audio.label?f.audio.label:"",videoLabel:f.video&&f.video.label?f.video.label:"",codecSwitchingStrategy:u.g.mediaSource.codecSwitchingStrategy,audioCodec:f.audio&&f.audio.codecs?f.audio.codecs:"",activeAudioCodec:p.audio&&p.audio.codecs?p.audio.codecs:"",activeAudioChannelCount:p.audio&&p.audio.channelsCount?p.audio.channelsCount:0,preferredAudioCodecs:u.g.preferredAudioCodecs,preferredAudioChannelCount:u.g.preferredAudioChannelCount}),ju(u)}}var u=this;n=n===void 0?!1:n,s=s===void 0?0:s,!(this.i&&this.G&&(a(),!this.Da()))&&function(){if(e.originalAudioId&&u.h&&u.h.audioTracks){var f=Array.from(u.h.audioTracks);f=C(f);for(var p=f.next();!p.done;p=f.next())if(p=p.value,jy(p)==e.id){B2(u,p);break}}}()},d.Nj=function(e,n){function s(){var u=a.J.getConfiguration();u.audioCodec=e.codecs||"",u.audioLabel=e.label||"",u.channelCount=e.channelsCount||0,u.language=e.language,u.role=e.roles[0]||"",u.spatialAudio=e.spatialAudio;var f=a.l.u;(f=f&&f.audio)&&(u.activeAudioCodec=f.codecs||"",u.activeAudioChannelCount=f.channelsCount||0),a.J.configure(u),Uu(a,!0,n,!1,!1)}var a=this;n=n===void 0?0:n,!(this.i&&this.G&&(s(),!this.Da()))&&function(){if(a.h&&a.h.audioTracks){var u=Ht(e.language),f=Array.from(a.h.audioTracks),p=null;f=C(f);for(var g=f.next();!g.done;g=f.next()){g=g.value;var y=g.language||"und";if(g.label==e.label&&Ht(y)==u&&g.kind==e.roles[0]){p=g;break}}p&&B2(a,p)}}()},d.getAudioTracks=function(){if(this.i&&!this.Da()){var e=this.Nb();if(!e.length)return[];var n=e.find(function(f){return f.active});if(!n)return[];var s=e;if(this.m!=Tr||this.Da()||(s=e.filter(function(f){return f.originalVideoId===n.originalVideoId&&(f.audioCodec||Sl.includes(f.audioMimeType||""))})),!s.length)return[];e=new Map,s=C(s);for(var a=s.next();!a.done;a=s.next()){a=a.value;var u=a.originalAudioId;u||a.audioId==null||(u=String(a.audioId)),!u&&a.codecs.includes(",")&&a.audioCodec&&(u="muxed-in-video"),u&&(u+=[a.language,a.label,a.channelsCount,a.spatialAudio,a.audioCodec||""].join("_"),e.set(u,{active:a.active,language:a.language,label:a.label,mimeType:a.audioMimeType,codecs:a.audioCodec,primary:a.primary,roles:a.audioRoles||[],accessibilityPurpose:a.accessibilityPurpose,channelsCount:a.channelsCount,audioSamplingRate:a.audioSamplingRate,spatialAudio:a.spatialAudio,originalLanguage:a.originalLanguage}))}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(f){var p=f.language;return p={active:f.enabled,language:Ht(p||"und"),label:f.label,mimeType:null,codecs:null,primary:f.kind=="main",roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:p},f.kind&&(f.kind=="description"&&(p.accessibilityPurpose="visually impaired"),p.roles.push(f.kind)),f.configuration&&(f.configuration.codec&&(p.codecs=f.configuration.codec),f.configuration.sampleRate&&(p.audioSamplingRate=f.configuration.sampleRate),f.configuration.numberOfChannels&&(p.channelsCount=f.configuration.numberOfChannels)),p}):[]},d.Oj=function(e,n,s){n=n===void 0?!1:n,s=s===void 0?0:s;var a=this.Nb();if(a.length){var u=a.find(function(p){return p.active});if(u){a=a.filter(function(p){return(p.videoBandwidth||p.bandwidth)==e.bandwidth&&p.width==e.width&&p.height==e.height&&p.frameRate==e.frameRate&&p.pixelAspectRatio==e.pixelAspectRatio&&p.hdr==e.hdr&&p.colorGamut==e.colorGamut&&p.videoLayout==e.videoLayout&&p.videoMimeType==e.mimeType&&p.videoCodec==e.codecs&&gl(p.videoRoles,e.roles)&&p.videoLabel==e.label});var f;a.length==1?f=a[0]:f=a.find(function(p){return p.audioId===u.audioId}),f||(f=a.find(function(p){return p.language==u.language&&p.label===u.label&&p.channelsCount===u.channelsCount&&p.spatialAudio===u.spatialAudio&&p.audioMimeType===u.audioMimeType&&Dn(p.audioCodec||"")===Dn(u.audioCodec||"")&&gl(p.audioRoles,u.audioRoles)})),f&&!f.active&&this.Me(f,n,s)}}},d.getVideoTracks=function(){if(this.m==Si||this.Da())return[];var e=this.Nb();if(!e.length)return[];var n=e.find(function(f){return f.active});if(!n)return[];var s=e;if(this.Kf()||(s=e.filter(function(f){return f.videoCodec&&f.audioGroupId===n.audioGroupId&&f.originalAudioId===n.originalAudioId?f.audioId===n.audioId?!0:f.language===n.language&&f.label===n.label&&f.channelsCount===n.channelsCount&&f.spatialAudio===n.spatialAudio&&f.audioMimeType===n.audioMimeType&&Dn(f.audioCodec||"")===Dn(n.audioCodec||"")&&gl(f.audioRoles,n.audioRoles):!1})),!s.length)return[];e=new Map,s=C(s);for(var a=s.next();!a.done;a=s.next()){a=a.value;var u=a.originalVideoId;u||a.videoId==null||(u=String(a.videoId)),u&&e.set(u,{active:a.active,bandwidth:a.videoBandwidth||a.bandwidth,width:a.width,height:a.height,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,hdr:a.hdr,colorGamut:a.colorGamut,videoLayout:a.videoLayout,mimeType:a.videoMimeType,codecs:a.videoCodec,roles:a.videoRoles||[],label:a.videoLabel})}return Array.from(e.values())},d.Gk=function(){return d5(this.Nb())},d.ul=function(){return d5(this.Cc())},d.Fk=function(){return Array.from(c5(this.Nb()))},d.rl=function(){return Array.from(c5(this.Cc()))},d.Mj=function(e,n,s,a,u,f,p){function g(){function w(U,F){return U.video||F.video?U.video&&F.video?Math.abs((U.video.height||0)-(F.video.height||0))+Math.abs((U.video.width||0)-(F.video.width||0)):1/0:0}var b=y.l.u;y.J=y.g.adaptationSetCriteriaFactory(),y.J.configure({language:e,role:n||"",videoRole:b.video&&b.video.roles&&b.video.roles[0]||"",channelCount:s||0,hdrLevel:"",spatialAudio:f||!1,videoLayout:"",audioLabel:p||"",videoLabel:"",codecSwitchingStrategy:y.g.mediaSource.codecSwitchingStrategy,audioCodec:u||"",activeAudioCodec:b.audio&&b.audio.codecs?b.audio.codecs:"",activeAudioChannelCount:b.audio&&b.audio.channelsCount?b.audio.channelsCount:0,preferredAudioCodecs:y.g.preferredAudioCodecs,preferredAudioChannelCount:y.g.preferredAudioChannelCount});var I=y.J.create(y.i.variants),L=null;I=C(I.values());for(var j=I.next();!j.done;j=I.next())j=j.value,Qm(j)&&(!L||w(L,b)>w(j,b))&&(L=j);L!=b&&(L?(b=fd(L),y.Me(b,!0,a||0)):Uu(y))}var y=this;s=s===void 0?0:s,a=a===void 0?0:a,u=u===void 0?"":u,f=f===void 0?!1:f,p=p===void 0?"":p,!(this.i&&this.G&&(g(),!this.Da()))&&function(){if(y.h&&y.h.audioTracks){var w=Kh(y.Nb(),e,n||"",!1)[0];w&&y.Me(w)}}()},d.ei=function(e,n,s){function a(){u.ce=e,u.ie=n||"",u.ge=s||!1;var f=Kh(u.i.textStreams,u.ce,u.ie,u.ge)[0]||null;f&&f!=u.l.C&&(v2(u.C.h,f,!1),u.g.streaming.alwaysStreamText||u.Yc())&&(c1(u.l,f),Pl(u),Ag(u))}var u=this;s=s===void 0?!1:s,!(this.i&&this.G&&(a(),!this.Da()))&&function(){var f=Kh(u.Cc(),e,n||"",s||!1)[0];f&&u.kg(f)}()},d.sm=function(e,n,s){function a(){for(var f=null,p=C(u.i.variants),g=p.next();!g.done;g=p.next())if(g=g.value,g.audio.label==e){f=g;break}f!=null&&(u.J=u.g.adaptationSetCriteriaFactory(),u.J.configure({language:f.language,role:"",videoRole:"",channelCount:0,hdrLevel:"",spatialAudio:!1,videoLayout:"",videoLabel:"",audioLabel:e,codecSwitchingStrategy:u.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:u.g.preferredAudioCodecs,preferredAudioChannelCount:u.g.preferredAudioChannelCount}),Uu(u,n,s))}var u=this;n=n===void 0?!0:n,s=s===void 0?0:s,!(this.i&&this.G&&(a(),!this.Da()))&&function(){if(u.h&&u.h.audioTracks){var f=Array.from(u.h.audioTracks),p=null;f=C(f);for(var g=f.next();!g.done;g=f.next())g=g.value,g.label==e&&(p=g);p&&B2(u,p)}}()},d.Yc=function(){var e=this.W;return this.A?this.A.isTextVisible():e},d.Kk=function(){return this.kb.map(function(e){return pd(e)})},d.Jk=function(e){if(Nt("getChapters","Please use an getChaptersAsync."),!this.kb.length)return[];var n=Ht(e);if(e=this.kb.filter(function(f){return Ht(f.language)==n}),!e.length)return[];var s=[],a=new Set;e=C(e);for(var u=e.next();!u.done;u=e.next())u=u.value,u.segmentIndex&&u.segmentIndex.Kb(function(f){var p=f.S()[0],g=f.startTime+"-"+f.endTime+"-"+p;f={id:g,title:p,startTime:f.startTime,endTime:f.endTime},a.has(g)||(s.push(f),a.add(g))});return s},d.uh=function(e){var n=this,s,a,u,f,p,g,y;return X(function(w){switch(w.g){case 1:if(!n.kb.length)return w.return([]);if(s=Ht(e),a=n.kb.filter(function(b){return Ht(b.language)==s}),!a.length)return w.return([]);u=[],f=new Set,p=C(a),g=p.next();case 2:if(g.done){w.B(4);break}if(y=g.value,y.segmentIndex){w.B(5);break}return O(w,y.createSegmentIndex(),5);case 5:y.segmentIndex.Kb(function(b){var I=b.S()[0],L=b.startTime+"-"+b.endTime+"-"+I;b={id:L,title:I,startTime:b.startTime,endTime:b.endTime},f.has(L)||(u.push(b),f.add(L))}),g=p.next(),w.B(2);break;case 4:return w.return(u)}})};function M1(e){return Array.from(e.h.textTracks).filter(function(n){return n.kind!="metadata"&&n.kind!="chapters"&&n.label!="Shaka Player TextTrack"})}function Iee(e){return Array.from(e.h.textTracks).find(function(n){return n.label=="Shaka Player TextTrack"})}function Cee(e){return Array.from(e.h.textTracks).filter(function(n){return n.kind=="metadata"})}d.ae=function(e){e=!!e,this.W!=e&&(this.W=e,this.m==Tr?(this.A.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.C||(e=Kh(this.i.textStreams,this.ce,this.ie,this.ge),e.length>0&&(c1(this.l,e[0]),Pl(this),Ag(this))):ZJ(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.A.setTextVisibility(e),a5(this))},d.fl=function(){if(this.G)var e=this.G.ke();else{if(this.O==null)return new Date;if(this.O instanceof Date)return this.O;e=this.O}if(this.i&&!this.Da()){var n=this.i.presentationTimeline;return new Date(((n.m||n.i)+e)*1e3)}return this.h&&this.h.getStartDate?(n=this.h.getStartDate(),isNaN(n.getTime())?null:new Date(n.getTime()+e*1e3)):null},d.fj=function(){if(this.i&&!this.Da()){var e=this.i.presentationTimeline;return e=e.m||e.i,e===null?null:new Date(e*1e3)}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},d.Cf=function(){return this.U()&&this.i?this.i.presentationTimeline.Cf():null},d.Rc=function(){if(this.m==Tr)return this.H.Rc();var e={total:[],audio:[],video:[],text:[]};return this.m==Si&&(e.total=Cl(this.h.buffered)),e};function JM(e){if(!e.h||!e.h.currentTime)return null;var n=e.fj();return n?Math.floor(Date.now()-(n.getTime()+e.h.currentTime*1e3)):null}d.getBandwidthEstimate=function(){return this.u?this.u.getBandwidthEstimate():NaN},d.getStats=function(){if(this.m!=Tr&&this.m!=Si)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};F2(this);var e=this.h,n=e.currentTime/e.duration;if(isNaN(n)||this.U()||IZ(this.C,Math.round(100*n)),this.G&&(this.C.R=this.G.Fi(),this.C.T=this.G.Hi()),e.getVideoPlaybackQuality&&(n=e.getVideoPlaybackQuality(),AZ(this.C,Number(n.droppedVideoFrames),Number(n.totalVideoFrames)),this.C.M=Number(n.corruptedVideoFrames)),this.C.u=this.F?PQ(this.F):NaN,rM(this.C,e.videoWidth||NaN,e.videoHeight||NaN),this.C.l="",this.U()&&(e=JM(this),e!=null&&(this.C.F=e/1e3)),n=this.Nb().find(function(u){return u.active}),e=this.Cc().find(function(u){return u.active}),n){if(n.bandwidth){var s=this.L?this.L.i:1,a=s*n.bandwidth;e&&e.bandwidth&&(a+=s*e.bandwidth),this.C.C=a}n.width&&n.height&&rM(this.C,n.width||NaN,n.height||NaN),n=n.codecs,e&&(n+=","+(e.codecs||e.mimeType)),n&&(this.C.l=n)}return this.m!=Tr||this.Da()||(this.i&&(this.C.I=this.i.periodCount,this.C.H=this.i.gapCount,this.i.presentationTimeline&&(this.C.K=this.i.presentationTimeline.h)),e=this.u.getBandwidthEstimate(),this.C.A=e),this.m==Si&&iM(this.C,NaN),CZ(this.C)},d.le=function(e,n,s,a,u,f,p){p=p===void 0?!1:p;var g=this,y,w,b,I,L,j,U,F,B,q,G,z;return X(function(J){switch(J.g){case 1:if(g.m!=Tr&&g.m!=Si)throw new oe(1,7,7004);if(s!="subtitles"&&s!="captions"&&$e("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),a){J.B(2);break}return O(J,O1(g,e),3);case 3:a=J.h;case 2:if(y=[],g.D&&(y=g.D.getCuePoints()),g.m!=Si){J.B(4);break}return w=ht(),p&&w.Ja()==="WEBKIT"&&(s="forced"),O(J,kee(g,e,n,s,a,f||"",y),5);case 5:if(b=J.h,b.track)return Ti(g),Pl(g),J.return(d3(b.track));throw new oe(1,2,2012);case 4:if(I=qn,L=g.wa(),j=L.end-L.start,g.i&&(j=g.i.presentationTimeline.getDuration()),j==1/0)throw new oe(1,4,4033);if(!y.length){J.B(6);break}return O(J,j1(g,e),7);case 7:U=J.h,F=ZM(g,U,a,y),B=new Blob([F],{type:"text/vtt"}),e=zb(B),a="text/vtt";case 6:if(q={id:g.Ye++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:o1(0,j,[e]),mimeType:a||"",codecs:u||"",kind:s,encrypted:!1,drmInfos:[],keyIds:new Set,language:n,originalLanguage:n,label:f||null,type:I.Va,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!p,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Pn(a||"",u||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},G=Pn(q.mimeType,q.codecs),z=zm(G),!z)throw new oe(2,2,2014,a);return g.i.textStreams.push(q),Ti(g),Pl(g),J.return(pd(q))}})},d.kf=function(e,n){var s=this,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J;return X(function(ie){switch(ie.g){case 1:if(s.m!=Tr&&s.m!=Si)throw new oe(1,7,7004);if(n){ie.B(2);break}return O(ie,O1(s,e),3);case 3:n=ie.h;case 2:if(n!="text/vtt")throw new oe(1,2,2017,e);if(a=qn,u=s.wa(),f=u.end-u.start,s.i&&(f=s.i.presentationTimeline.getDuration()),f==1/0)throw new oe(1,4,4045);return O(ie,j1(s,e),4);case 4:if(p=ie.h,g=Km(n),!g)throw new oe(2,2,2014,n);for(y=g(),w={periodStart:0,segmentStart:0,segmentEnd:f,vttOffset:0},b=nt(p),I=y.parseMedia(b,w,e,[]),L=[],j=C(I),U=j.next(),F={};!U.done;F={Bg:void 0,Fd:void 0},U=j.next())F.Fd=U.value,F.Bg=null,B=function(Y){return function(){return Y.Bg==null&&(Y.Bg=yr([e],[Y.Fd.payload])),Y.Bg||[]}}(F),q=new Xe(F.Fd.startTime,F.Fd.endTime,B,0,null,null,0,0,1/0),F.Fd.payload.includes("#xywh")&&(G=F.Fd.payload.split("#xywh=")[1].split(","),G.length===4&&q.og({height:parseInt(G[3],10),positionX:parseInt(G[0],10),positionY:parseInt(G[1],10),width:parseInt(G[2],10)})),L.push(q);if(z=n,!L.length){ie.B(5);break}return O(ie,O1(s,L[0].S()[0]),6);case 6:z=ie.h;case 5:return J={id:s.Ye++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new jt(L),mimeType:z||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:a.Dg,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Pn(z||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},s.m==Si?s.df.push(J):s.i.imageStreams.push(J),Ti(s),ie.return(Sb(J))}})},d.jf=function(e,n,s){var a=this,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G;return X(function(z){switch(z.g){case 1:if(a.m!=Tr&&a.m!=Si)throw new oe(1,7,7004);if(s){z.B(2);break}return O(z,O1(a,e),3);case 3:s=z.h;case 2:if(u=qn,f=a.wa(),p=f.end-f.start,a.i&&(p=a.i.presentationTimeline.getDuration()),p==1/0)throw new oe(1,4,4055);if(g=Km(s),!g)throw new oe(2,2,2014,s);return O(z,j1(a,e),4);case 4:for(y=z.h,w=g(),b={periodStart:0,segmentStart:0,segmentEnd:p,vttOffset:0},I=nt(y),L=w.parseMedia(I,b,e,[]),j=[],U=C(L),F=U.next(),B={};!F.done;B={uf:void 0},F=U.next())B.uf=F.value,q=new Xe(B.uf.startTime,B.uf.endTime,function(J){return function(){return[J.uf.payload]}}(B),0,null,null,0,0,1/0),j.push(q);return G={id:a.Ye++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new jt(j),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:n,originalLanguage:n,label:null,type:u.Va,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Pn("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},a.kb.push(G),Ti(a),z.return(pd(G))}})};function O1(e,n){var s;return X(function(a){switch(a.g){case 1:return ce(a,2),O(a,af(n,e.M,e.g.streaming.retryParameters),4);case 4:s=a.h,se(a,3);break;case 2:ue(a);case 3:if(s)return a.return(s);throw new oe(1,2,2011,n)}})}function kee(e,n,s,a,u,f,p){var g,y,w,b;return X(function(I){if(I.g==1)return u!="text/vtt"||p.length?O(I,j1(e,n),3):I.B(2);I.g!=2&&(g=I.h,y=ZM(e,g,u,p),w=new Blob([y],{type:"text/vtt"}),n=zb(w),u="text/vtt"),b=document.createElement("track");e:{var L=e.K,j=n;try{if(!L.g.enabled){var U=j;break e}var F=C2(L);F.ot=L2,F.su=!0;var B=wg(F);U=b1(j,B);break e}catch(q){Kr("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",q),U=j;break e}U=void 0}return b.src=U,b.label=f,b.kind=a,b.srclang=s,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(b),e.Hg.push(b),I.return(b)})}function j1(e,n){var s,a,u,f;return X(function(p){if(p.g==1){s=ys,a=e.g.streaming.retryParameters,u=Kn([n],a),u.method="GET";var g=e.K;try{g.g.enabled&&pf(g,u,{ot:L2,su:!0})}catch(y){Kr("CMCD_TEXT_ERROR","Could not generate text CMCD data.",y)}return O(p,e.M.request(s,u).promise,2)}return f=p.h,p.return(f.data)})}function ZM(e,n,s,a){var u=Km(s);if(u)return s=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},n=nt(n),n=s.parseMedia(n,e,null,[]),HZ(n,a);throw new oe(2,2,2014,s)}d.ym=function(e,n){this.sa.width=e,this.sa.height=n},d.bi=function(e){if(this.m==Tr){var n=this.l;if(e=e===void 0?.1:e,n.l.g)n=!1;else if(n.F)n=!1;else{for(var s=C(n.h.values()),a=s.next();!a.done;a=s.next())a=a.value,!a.xe||a.Sa||a.yb||(a.xe=!1,ci(n,a,e));n=!0}}else n=!1;return n},d.yh=function(){return $e("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},d.$k=function(){return this.Kc},d.Tk=function(){var e={video:null,audio:null,text:null};if(this.m!=Tr)return e;var n=this.l.u,s=this.h.currentTime;n=C([n.video,n.audio,this.l.C]);for(var a=n.next();!a.done;a=n.next())if((a=a.value)&&a.segmentIndex){var u=a.segmentIndex.find(s);u=a.segmentIndex.get(u),u={codecs:u.codecs||a.codecs,mimeType:u.mimeType||a.mimeType,bandwidth:u.bandwidth||a.bandwidth},a.type=="video"?(u.width=a.width,u.height=a.height,e.video=u):a.type=="audio"?e.audio=u:a.type==mt&&(e.text=u)}return e};function Zo(e){var n=hf();return n.streaming.failureCallback=function(s){if(e.U()){var a=null;s.code==1001||s.code==1002?(a=1,e.g.streaming.lowLatencyMode&&(a=.1)):s.code==1003&&(a=.1),a!=null&&(s.severity=1,e.bi(a))}},n.textDisplayFactory=function(){if(e.Ue){var s=e.h;s=!(s.webkitDisplayingFullscreen||s.webkitPresentationMode&&s.webkitPresentationMode!="inline")}else s=!1;return s?new Qr(e.h,e.Ue):"track"in document.createElement("track")?new ir(e):new Xr},n}d.ni=function(e){this.Ue=e};function _ee(e,n){for(var s=new Set,a=C(n.textStreams),u=a.next();!u.done;u=a.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||s.add(u.originalId);for(a=C(n.variants),u=a.next();!u.done;u=a.next())if((u=u.value.video)&&u.closedCaptions){for(var f=C(u.closedCaptions.keys()),p=f.next();!p.done;p=f.next())if(p=p.value,!s.has(p)){var g=p.startsWith("CC")?"application/cea-608":"application/cea-708",y=new wn,w=u.closedCaptions.get(p);g={id:e.Ye++,originalId:p,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:y,mimeType:g,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:w,originalLanguage:w,label:null,type:mt,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Pn(g,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.textStreams.push(g),s.add(p)}}}function Ree(e,n){var s,a,u,f,p;return X(function(g){return g.g==1?(s=e.audio,a=e.video,u=function(y,w){var b,I,L;return X(function(j){return j.g==1?y?y.segmentIndex?j.B(2):O(j,y.createSegmentIndex(),2):j.return(null):(I=(b=y.segmentIndex.fc(w))?b.next().value:null,I?(L=I.startTime,j.return(L)):j.return(null))})},O(g,u(s,n),2)):g.g!=3?(f=g.h,O(g,u(a,n),3)):(p=g.h,p!=null&&f!=null?g.return(Math.max(p,f)):p!=null?g.return(p):f!=null?g.return(f):g.return(n))})}function Eg(e){var n=e.Hf();if(e.C&&e.P&&e.G){if(e.g.streaming.rebufferingGoal==0){var s=e.L;s.j=!1,Jb(s)}else s=e.L,s.j=n,Jb(s);if(e.K&&(s=e.K,n||s.F||(s.F=!0),s.F&&n&&(s.I=!0,Jr(s,"ps",{ud:"r"})),s.J=n),F2(e),s=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&n&&e.hf<s){s=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var a=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.T&&(e.T=Math.min(e.T+ ++e.hf*u,s-a))}}n=new Map().set("buffering",n),e.dispatchEvent(rn("buffering",n))}function e5(e,n){e.mc.Ta(),e.mc.o(e.h,"timeupdate",function(){var s=e.h.currentTime,a=e.wa(),u=e.U(),f=u?e.g.streaming.safeSeekOffset:0;n>0?u&&n>1&&Math.floor(s)>=Math.floor(a.end)&&e.Cd():Math.floor(s)<=Math.floor(a.start+f)&&e.Cd()})}function F2(e){if(e.C&&e.P){var n=e.C.g,s="playing";e.P.g==vd?s="buffering":e.isEnded()?s="ended":e.h.paused&&(s="paused");var a=s;if(n.g==null)n.g={timestamp:Date.now()/1e3,state:a,duration:0},n=!0;else{var u=Date.now()/1e3;n.g.duration=u-n.g.timestamp,n.g.state==a?n=!1:(n.h.push(n.g),n.g={timestamp:u,state:a,duration:0},n=!0)}n&&(s=new Map().set("newstate",s),e.dispatchEvent(rn("statechanged",s)))}}function t5(e){var n=e.h.playbackRate,s=e.U();if(e.g.streaming.vodDynamicPlaybackRate&&!s){var a=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.bj();u<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?n!=a&&e.vc(a,!1):u==1&&n!==e.L.kd()&&e.Cd()}if(s&&(s=e.wa(),Number.isFinite(s.end)&&!(e.h.currentTime<s.start||e.h.paused))){a=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var f=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var p=e.g.streaming.liveSync.targetLatency,g=p+a,y=Math.max(0,p-a),w=e.g.streaming.liveSync.maxPlaybackRate,b=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(p=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?g=e.i.serviceDescription.targetLatency+a:e.i.serviceDescription.maxLatency!=null&&(g=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?y=Math.max(0,e.i.serviceDescription.targetLatency-a):e.i.serviceDescription.minLatency!=null&&(y=e.i.serviceDescription.minLatency),w=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,b=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.T||typeof p!="number"||(e.T=p);var I=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;u&&e.lc&&e.T!==null&&typeof p=="number"&&e.hf<I&&Date.now()-e.lc>f*1e3&&(f=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.T=Math.max(e.T-(p-f)/2,f+a),e.lc=Date.now()),u&&e.T!==null&&(g=e.T+a,y=e.T-a),p=s.end-e.h.currentTime,a=0,e.m==Si&&(u=e.h.buffered,u.length>0&&(a=u.end(u.length-1),a=Math.max(w,a-s.end))),s=e.g.streaming.liveSync.panicMode,u=e.g.streaming.liveSync.panicThreshold*1e3,f=Date.now()-e.P.i,s&&!b&&(b=e.g.streaming.liveSync.minPlaybackRate),s&&b&&f<=u?n!=b&&e.vc(b,!1):g!=null&&w&&p-a>g?(n!=w&&e.vc(w,!1),e.lc=null):y!=null&&b&&p-a<y?(n!=b&&e.vc(b,!1),e.lc=null):n!==e.L.kd()&&(e.Cd(),e.lc=Date.now())}}function U1(e){if(e.h){var n=function(u,f){return(OM(u,f,.01)||f>u)&&e.Gg<u?(e.Gg=u,!0):!1},s=e.wa();if(s=s.end-s.start,s=s>0?e.h.currentTime/s:0,!isNaN(s)){if(s*=100,n(0,s))var a=rn("started");else n(25,s)?a=rn("firstquartile"):n(50,s)?a=rn("midpoint"):n(75,s)?a=rn("thirdquartile"):((n(100,s)||s>100)&&(a=rn("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.isEnded()&&e.h.pause());a&&e.dispatchEvent(a)}}}function ju(e){try{K3(e.Xe,e.i)}catch(s){return gf(e,s),!1}var n=Fy(e.i.variants);return n=e.J.create(n),e=e.u.setVariants(Array.from(n.values())),typeof e=="boolean"?e:!0}function n5(e,n){if(n=n===void 0?!1:n,ju(e)){if(!e.g.abr.enabled){var s=e.J;if(typeof s.getLastAdaptationSet!="function"&&(Nt("AdaptationSetCriteria w/o getLastAdaptationSet","Please use an AdaptationSetCriteria with getLastAdaptationSet."),s.getLastAdaptationSet=function(){return null}),(s=s.getLastAdaptationSet())&&(s=Array.from(s.values()),s.length)){var a=e.l.u;if(a&&a.video&&(s=s.find(function(u){return u.video==a.video})))return s}}return e.u.chooseVariant(n)}return null}function Uu(e,n,s,a,u){n=n===void 0?!0:n,s=s===void 0?0:s,a=a===void 0?!1:a,u=u===void 0?!0:u;var f=n5(e);f&&bg(e,f,u,n,s,a)}function bg(e,n,s,a,u,f){f=f===void 0?!1:f;var p=e.l.u;if(n==p)a&&WN(e.l,n,a,u,!0);else{var g=e.C.h;if(g.h!=n&&(g.h=n,g.g.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:s,bandwidth:n.bandwidth})),WN(e.l,n,a,u,f,s),a=null,p&&(a=fd(p)),p=fd(n),p.active=!0,e.R&&(u=e.R,n=n.video)){switch(n.dependencyStream&&(n=n.dependencyStream),f=0,g=-1,n.mimeType){case"video/webm":f=1;break;case"video/mp4":f=2}switch(e.Ah()){case"DASH":g=1;break;case"HLS":g=0}u.g&&(u.g.setLevelSwitching(n.id,!0),u.g.setContainerFormat(f),u.j||u.g.setStreamingFormat(g))}s?(s=new Map().set("oldTrack",a).set("newTrack",p),s=rn("adaptation",s),Id(e,s)):i5(e,a,p),s5(e,a,p)}}function B2(e,n){var s=Array.from(e.h.audioTracks).find(function(u){return u.enabled});if(n.enabled=!0,s){n.id!==s.id&&(s.enabled=!1);var a=r5(e);s=Uy(s,a),n=Uy(n,a),i5(e,s,n),s5(e,s,n)}}function r5(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(n){return n.selected}):null}function Ti(e){var n=rn("trackschanged");Id(e,n),o5(e)}function i5(e,n,s){n=new Map().set("oldTrack",n).set("newTrack",s),n=rn("variantchanged",n),Id(e,n)}function s5(e,n,s){var a=!1;n&&n.audioId==s.audioId&&n.audioGroupId==s.audioGroupId||(a=!0),a&&o5(e)}function o5(e){var n=rn("audiotrackschanged");Id(e,n)}function Pl(e){var n=rn("textchanged");Id(e,n)}function a5(e){var n=rn("texttrackvisibility");Id(e,n)}function l5(e){e.g.abr.enabled||$2(e);var n=new Map().set("newStatus",e.g.abr.enabled);Id(e,rn("abrstatuschanged",n))}function Ag(e){var n=e.Cc().find(function(s){return s.active});n&&e.A&&e.A.setTextLanguage&&e.A.setTextLanguage(n.language)}function $2(e,n){if(n=n===void 0?!0:n,e.m==Tr){e.$e.stop();for(var s=C(e.i.variants),a=s.next();!a.done;a=s.next())a.value.disabledUntilTime=0;n&&ju(e)}}d.disableStream=function(e,n){if(!this.g.abr.enabled||this.m===Io||!navigator.onLine||n==0||!this.i)return!1;if(this.i.variants.some(function(g){var y=g[e.type];return y&&y.id!==e.id&&!g.disabledUntilTime?e.type=="audio"?e.language===y.language:!0:!1})){for(var s=!1,a=!1,u=C(this.i.variants),f=u.next();!f.done;f=u.next()){f=f.value;var p=f[e.type];p&&(p.id===e.id?(f.disabledUntilTime=Date.now()/1e3+n,s=!0):p.trickModeVideo&&p.trickModeVideo.id==e.id&&(a=!0))}return!s&&a?!1:(this.$e.xa(1),n=this.Rc().video.reduce(function(g,y){return g+y.end-y.start},0),Uu(this,!1,n,!0,!1),!0)}return!1};function gf(e,n){var s,a,u,f,p;return X(function(g){switch(g.g){case 1:if(e.m==Io)return g.return();if(n.severity===1&&e.C.L++,s=!0,!(e.Na&&e.i&&e.l)||n.code!=3016&&n.code!=3014&&n.code!=3015&&n.code!=3024&&n.code!=3018){g.B(2);break}return a=ht(),a.Ja()==="WEBKIT"&&n.code==3016?g.return():(ce(g,3),O(g,m1(e.l),5));case 5:u=g.h,s=!u,u&&(f=rn("mediasourcerecovered"),e.dispatchEvent(f)),se(g,2);break;case 3:ue(g),s=!0;case 2:if(!s)return g.return();n.severity===2&&$2(e,!1),p=rn("error",new Map().set("detail",n)),e.dispatchEvent(p),p.defaultPrevented&&(n.handled=!0),re(g)}})}d.addFont=function(e,n){return fJ(e,n)};function Ig(e,n,s,a){a=a===void 0?e:a,e=new Map().set("detail",{schemeIdUri:s.schemeIdUri,value:s.value,startTime:s.startTime,endTime:s.endTime,id:s.id,timescale:s.timescale,eventElement:s.eventElement,eventNode:s.eventNode}),a.dispatchEvent(rn(n,e))}function u5(e,n,s,a){a=a===void 0?!1:a,n=new Map().set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width,label:n.label,roles:n.roles,language:n.language}).set("position",s),e.dispatchEvent(rn(a?"audiotrackchanged":"mediaqualitychanged",n))}function V2(e,n){if(n=n===void 0?!0:n,!e.h.error)return n?new oe(2,3,3016):null;var s=e.h.error.code;return!n&&s==1?null:((n=e.h.error.msExtendedCode)&&(n<0&&(n+=4294967296),n=n.toString(16)),new oe(2,3,3016,s,n,e.h.error.message))}function Lee(e,n){var s=rn("keystatuschanged");e.dispatchEvent(s);var a=Object.keys(n);a.length==1&&a[0]==""&&(a=["00"],n={"00":n[""]});var u=a.length==1&&a[0]=="00";if(s=!1,a.length){a=e.keySystem();for(var f=Xh(e.g.drm.clearKeys),p=function(U,F){U.allowedByKeySystem=!0,F=C(F);for(var B=F.next();!B.done;B=F.next())B=B.value,((B=n[u?"00":B])||e.F.H)&&(U.allowedByKeySystem=U.allowedByKeySystem&&!!B&&!z3.includes(B))},g=C(e.i.variants),y=g.next();!y.done;y=g.next()){y=y.value;var w=vQ(y);w=C(w);for(var b=w.next();!b.done;b=w.next()){b=b.value;var I=y.allowedByKeySystem;if(b.keyIds.size)if(b.drmInfos.length&&!f.size&&e.i.type=="HLS")for(var L=C(b.drmInfos),j=L.next();!j.done;j=L.next())j=j.value,j.keySystem==a&&(j.keyIds.size?p(y,j.keyIds):p(y,b.keyIds));else p(y,b.keyIds);I!=y.allowedByKeySystem&&(s=!0)}}}s&&(Ti(e),(s=e.l.u)&&!s.allowedByKeySystem?Uu(e):ju(e))}function G2(e,n,s){n>0&&(e.U()||e.Vj(n)),n=e.getDuration(),s<n&&(e.U()||e.Fb(s))}function Id(e,n){X(function(s){if(s.g==1)return O(s,Promise.resolve(),2);e.m!=Io&&e.dispatchEvent(n),re(s)})}function c5(e){var n=new Set;e=C(e);for(var s=e.next();!s.done;s=e.next())s=s.value,s.language?n.add(Ht(s.language)):n.add("und");return n}function d5(e){for(var n=new Map,s=new Map,a=0;a<e.length;a++){var u=e[a],f="und",p=[];u.language&&(f=Ht(u.language)),u.type=="variant"?p=u.audioRoles:p=u.roles,p&&p.length||(p=[""]),n.has(f)||n.set(f,new Set),p=C(p);for(var g=p.next();!g.done;g=p.next())g=g.value,n.get(f).add(g),u.label&&(s.has(f)||s.set(f,new Map),s.get(f).set(g,u.label))}var y=[];return n.forEach(function(w,b){w=C(w);for(var I=w.next();!I.done;I=w.next()){I=I.value;var L=null;s.has(b)&&s.get(b).has(I)&&(L=s.get(b).get(I)),y.push({language:b,role:I,label:L})}}),y}d.Da=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},d.isEnded=function(){return!this.h||this.h.ended?!0:this.Na&&!this.U()&&this.h.currentTime>=this.wa().end},xe("shaka.Player",ye),ye.prototype.isEnded=ye.prototype.isEnded,ye.prototype.isRemotePlayback=ye.prototype.Da,ye.prototype.addFont=ye.prototype.addFont,ye.prototype.setVideoContainer=ye.prototype.ni,ye.prototype.getFetchedPlaybackInfo=ye.prototype.Tk,ye.prototype.getManifestParserFactory=ye.prototype.$k,ye.prototype.getManifest=ye.prototype.yh,ye.prototype.retryStreaming=ye.prototype.bi,ye.prototype.setMaxHardwareResolution=ye.prototype.ym,ye.prototype.addChaptersTrack=ye.prototype.jf,ye.prototype.addThumbnailsTrack=ye.prototype.kf,ye.prototype.addTextTrackAsync=ye.prototype.le,ye.prototype.getStats=ye.prototype.getStats,ye.prototype.getBufferedInfo=ye.prototype.Rc,ye.prototype.getSegmentAvailabilityDuration=ye.prototype.Cf,ye.prototype.getPresentationStartTimeAsDate=ye.prototype.fj,ye.prototype.getPlayheadTimeAsDate=ye.prototype.fl,ye.prototype.setTextTrackVisibility=ye.prototype.ae,ye.prototype.getChaptersAsync=ye.prototype.uh,ye.prototype.getChapters=ye.prototype.Jk,ye.prototype.getChaptersTracks=ye.prototype.Kk,ye.prototype.isTextTrackVisible=ye.prototype.Yc,ye.prototype.selectVariantsByLabel=ye.prototype.sm,ye.prototype.selectTextLanguage=ye.prototype.ei,ye.prototype.selectAudioLanguage=ye.prototype.Mj,ye.prototype.getTextLanguages=ye.prototype.rl,ye.prototype.getAudioLanguages=ye.prototype.Fk,ye.prototype.getTextLanguagesAndRoles=ye.prototype.ul,ye.prototype.getAudioLanguagesAndRoles=ye.prototype.Gk,ye.prototype.getVideoTracks=ye.prototype.getVideoTracks,ye.prototype.selectVideoTrack=ye.prototype.Oj,ye.prototype.getAudioTracks=ye.prototype.getAudioTracks,ye.prototype.selectAudioTrack=ye.prototype.Nj,ye.prototype.selectVariantTrack=ye.prototype.Me,ye.prototype.selectTextTrack=ye.prototype.kg,ye.prototype.getThumbnails=ye.prototype.gj,ye.prototype.getAllThumbnails=ye.prototype.Ek,ye.prototype.getImageTracks=ye.prototype.xh,ye.prototype.getTextTracks=ye.prototype.Cc,ye.prototype.getVariantTracks=ye.prototype.Nb,ye.prototype.cancelTrickPlay=ye.prototype.Cd,ye.prototype.trickPlay=ye.prototype.vc,ye.prototype.useTrickPlayTrackIfAvailable=ye.prototype.Ei,ye.prototype.getPlaybackRate=ye.prototype.Za,ye.prototype.isBuffering=ye.prototype.Hf,ye.prototype.getKeyStatuses=ye.prototype.yf,ye.prototype.getActiveSessionsMetadata=ye.prototype.sh,ye.prototype.getExpiration=ye.prototype.ue,ye.prototype.drmInfo=ye.prototype.drmInfo,ye.prototype.keySystem=ye.prototype.keySystem,ye.prototype.isFullyLoaded=ye.prototype.Jh,ye.prototype.goToLive=ye.prototype.Dl,ye.prototype.seekRange=ye.prototype.wa,ye.prototype.isVideoOnly=ye.prototype.Kf,ye.prototype.isAudioOnly=ye.prototype.Md,ye.prototype.isInProgress=ye.prototype.md,ye.prototype.isLive=ye.prototype.U,ye.prototype.getQueueManager=ye.prototype.Af,ye.prototype.getAdManager=ye.prototype.xf,ye.prototype.getAssetUri=ye.prototype.jd,ye.prototype.getNetworkingEngine=ye.prototype.Wb,ye.prototype.getMediaElement=ye.prototype.zf,ye.prototype.getManifestType=ye.prototype.Ah,ye.prototype.getLoadMode=ye.prototype.Ac,ye.prototype.resetConfiguration=ye.prototype.Hj,ye.prototype.getBufferFullness=ye.prototype.bj,ye.prototype.getNonDefaultConfiguration=ye.prototype.ej,ye.prototype.getConfigurationForLowLatency=ye.prototype.Nk,ye.prototype.getConfiguration=ye.prototype.getConfiguration,ye.prototype.configurationForLowLatency=ye.prototype.Bk,ye.prototype.configure=ye.prototype.configure,ye.prototype.releaseAllMutexes=ye.prototype.hm,ye.prototype.destroyAllPreloads=ye.prototype.Zg,ye.prototype.preload=ye.prototype.preload,ye.prototype.detachAndSavePreload=ye.prototype.Yi,ye.prototype.unloadAndSavePreload=ye.prototype.ik,ye.prototype.load=ye.prototype.load,ye.prototype.updateStartTime=ye.prototype.Gm,ye.prototype.unload=ye.prototype.wc,ye.prototype.detach=ye.prototype.detach,ye.prototype.attachCanvas=ye.prototype.Li,ye.prototype.attach=ye.prototype.Ub,ye.probeSupport=function(e){e=e===void 0?!0:e;var n,s,a,u,f,p,g;return X(function(y){switch(y.g){case 1:if(n={},!e){y.B(2);break}return O(y,jQ(),3);case 3:n=y.h;case 2:return s=XX(),a=TJ(),u=ht(),O(y,u.yc(),4);case 4:return f=y.h,p={manifest:s,media:a,drm:n,hardwareResolution:f},g=f5,g.forEach(function(w,b){p[b]=w()}),y.return(p)}})},ye.isBrowserSupported=UM,ye.setQueueManagerFactory=function(e){$1=e},ye.setAdManagerFactory=function(e){B1=e},ye.registerSupportPlugin=jM,ye.prototype.destroy=ye.prototype.destroy;var Io=0,F1=1,Tr=2,Si=3;ye.LoadMode={DESTROYED:Io,NOT_LOADED:F1,MEDIA_SOURCE:Tr,SRC_EQUALS:Si},ye.version="v4.16.12";var h5=["4","16"];DD=new function(e){this.g=e,this.i=WX,this.h=YX}(new ib(Number(h5[0]),Number(h5[1])));var f5=new Map,B1=null,$1=null;function p5(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function Pee(e){return e.g.length?e.g.reduce(function(n,s){return n+s},0)/e.g.length:0}function Qe(e,n,s){var a=this;this.g=e,this.h=n,this.m=s,this.i=!1,this.j=this.h.getVolume(),this.l=new Dt,this.l.o(this.h,google.ima.AdEvent.Type.PAUSED,function(){a.i=!0}),this.l.o(this.h,google.ima.AdEvent.Type.RESUMED,function(){a.i=!1})}d=Qe.prototype,d.needsSkipUI=function(){return!1},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return!0},d.isUsingAnotherMediaElement=function(){return!0},d.getDuration=function(){return this.g.getDuration()},d.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},d.getRemainingTime=function(){return this.h.getRemainingTime()},d.isPaused=function(){return this.i},d.isSkippable=function(){return this.g.getSkipTimeOffset()>=0},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.h.getAdSkippableState()},d.skip=function(){return this.h.skip()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.resume()},d.getVolume=function(){return this.h.getVolume()},d.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},d.isMuted=function(){return this.h.getVolume()==0},d.isLinear=function(){return this.g.isLinear()},d.resize=function(e,n){this.h.resize(e,n)},d.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return this.g.getMediaUrl()},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},d.release=function(){this.h=this.g=null},xe("shaka.ads.ClientSideAd",Qe),Qe.prototype.release=Qe.prototype.release,Qe.prototype.getPodIndex=Qe.prototype.getPodIndex,Qe.prototype.getTimeOffset=Qe.prototype.getTimeOffset,Qe.prototype.getMediaUrl=Qe.prototype.getMediaUrl,Qe.prototype.getAdvertiserName=Qe.prototype.getAdvertiserName,Qe.prototype.getCreativeAdId=Qe.prototype.getCreativeAdId,Qe.prototype.getAdId=Qe.prototype.getAdId,Qe.prototype.getVastAdId=Qe.prototype.getVastAdId,Qe.prototype.getVastMediaWidth=Qe.prototype.getVastMediaWidth,Qe.prototype.getVastMediaHeight=Qe.prototype.getVastMediaHeight,Qe.prototype.getVastMediaBitrate=Qe.prototype.getVastMediaBitrate,Qe.prototype.getDescription=Qe.prototype.getDescription,Qe.prototype.getTitle=Qe.prototype.getTitle,Qe.prototype.getPositionInSequence=Qe.prototype.getPositionInSequence,Qe.prototype.getSequenceLength=Qe.prototype.getSequenceLength,Qe.prototype.setMuted=Qe.prototype.setMuted,Qe.prototype.resize=Qe.prototype.resize,Qe.prototype.isLinear=Qe.prototype.isLinear,Qe.prototype.isMuted=Qe.prototype.isMuted,Qe.prototype.setVolume=Qe.prototype.setVolume,Qe.prototype.getVolume=Qe.prototype.getVolume,Qe.prototype.play=Qe.prototype.play,Qe.prototype.pause=Qe.prototype.pause,Qe.prototype.skip=Qe.prototype.skip,Qe.prototype.canSkipNow=Qe.prototype.canSkipNow,Qe.prototype.getTimeUntilSkippable=Qe.prototype.getTimeUntilSkippable,Qe.prototype.isSkippable=Qe.prototype.isSkippable,Qe.prototype.isPaused=Qe.prototype.isPaused,Qe.prototype.getRemainingTime=Qe.prototype.getRemainingTime,Qe.prototype.getMinSuggestedDuration=Qe.prototype.getMinSuggestedDuration,Qe.prototype.getDuration=Qe.prototype.getDuration,Qe.prototype.isUsingAnotherMediaElement=Qe.prototype.isUsingAnotherMediaElement,Qe.prototype.hasCustomClick=Qe.prototype.hasCustomClick,Qe.prototype.isClientRendering=Qe.prototype.isClientRendering,Qe.prototype.needsSkipUI=Qe.prototype.needsSkipUI;function mn(){}function m5(e,n){var s=[];e=C(Yt(e,"Ad"));for(var a=e.next();!a.done;a=e.next())if((a=fn(a.value,"InLine"))&&(a=fn(a,"Creatives"))){a=C(Yt(a,"Creative"));for(var u=a.next();!u.done;u=a.next()){u=u.value;var f=fn(u,"Linear");if(f&&Dee(s,n,f),u=fn(u,"NonLinearAds")){u=Yt(u,"NonLinear"),u=C(u);for(var p=u.next();!p.done;p=u.next())e:{f=s;var g=n,y=p.value,w=fn(y,"StaticResource");if(w)p=w.attributes.creativeType;else{if(w=fn(y,"HTMLResource"),!w)break e;p="text/html"}if(w=xi(w)){p==="text/html"&&(w="data:text/html;charset=UTF-8,"+encodeURIComponent(w));var b=rt(y,"width",Or)||rt(y,"expandedWidth",Or),I=rt(y,"height",Or)||rt(y,"expandedHeight",Or);if(b||I){var L=null,j=fn(y,"NonLinearClickThrough");j&&(j=xi(j))&&(L=j),j=null,(y=y.attributes.minSuggestedDuration)&&(j=Vh(y)),y=0,g!=null&&(y=g),f.push({id:null,groupId:null,startTime:y,endTime:null,uri:w,mimeType:p,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:j,once:!0,pre:g==null,post:g==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:b||0,y:I||0}},displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:L})}}}}}}return s}function Dee(e,n,s){var a=0;n!=null&&(a=n);var u=null;s.attributes.skipoffset&&(u=Vh(s.attributes.skipoffset),isNaN(u)&&(u=null));var f=fn(s,"MediaFiles");if(f){var p=null;for((s=fn(s,"VideoClicks"))&&(s=fn(s,"ClickThrough"))&&(s=xi(s))&&(p=s),f=s=Yt(f,"MediaFile"),s=s.filter(function(y){return y.attributes.delivery=="streaming"}),s.length&&(f=s),f=f.sort(function(y,w){return(parseInt(w.attributes.height,10)||0)-(parseInt(y.attributes.height,10)||0)}),f=C(f),s=f.next();!s.done;s=f.next())if(s=s.value,!s.attributes.apiFramework){var g=xi(s);if(g){e.push({id:null,groupId:null,startTime:a,endTime:null,uri:g,mimeType:s.attributes.type||null,isSkippable:u!=null,skipOffset:u,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:n==null,post:n==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:p});break}}}}function Nee(e){var n=[];e=C(Yt(e,"vmap:AdBreak"));for(var s=e.next();!s.done;s=e.next()){var a=s.value,u=a.attributes.timeOffset;u&&(s=null,u=="start"?s=null:u=="end"?s=1/0:s=Vh(u),(a=fn(a,"vmap:AdSource"))&&(a=fn(a,"vmap:AdTagURI"))&&(a=Bn(a))&&n.push({time:s,uri:a}))}return n}xe("shaka.ads.Utils",mn),mn.ADS_LOADED="ads-loaded",mn.AD_STARTED="ad-started",mn.AD_FIRST_QUARTILE="ad-first-quartile",mn.AD_MIDPOINT="ad-midpoint",mn.AD_THIRD_QUARTILE="ad-third-quartile",mn.AD_COMPLETE="ad-complete",mn.AD_STOPPED="ad-stopped",mn.AD_SKIPPED="ad-skipped",mn.AD_VOLUME_CHANGED="ad-volume-changed",mn.AD_MUTED="ad-muted",mn.AD_PAUSED="ad-paused",mn.AD_RESUMED="ad-resumed",mn.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",mn.CUEPOINTS_CHANGED="ad-cue-points-changed",mn.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",mn.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",mn.AD_CLICKED="ad-clicked",mn.AD_PROGRESS="ad-progress",mn.AD_BUFFERING="ad-buffering",mn.AD_IMPRESSION="ad-impression",mn.AD_DURATION_CHANGED="ad-duration-changed",mn.AD_CLOSED="ad-closed",mn.AD_LOADED="ad-loaded",mn.ALL_ADS_COMPLETED="all-ads-completed",mn.AD_LINEAR_CHANGED="ad-linear-changed",mn.AD_METADATA="ad-metadata",mn.AD_RECOVERABLE_ERROR="ad-recoverable-error",mn.AD_ERROR="ad-error",mn.AD_BREAK_READY="ad-break-ready",mn.AD_INTERACTION="ad-interaction",mn.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",mn.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",mn.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function V1(e,n,s,a,u){var f=this;this.A=e,this.i=n,this.G=!1,this.C=this.u=null,this.H=NaN,this.l=u,this.j=null,this.h=new Dt,google.ima.settings.setLocale(s),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.F=new google.ima.AdDisplayContainer(this.A,this.i),this.F.initialize(),this.m=new google.ima.AdsLoader(this.F),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.16.12"),this.g=null,this.D=a||new google.ima.AdsRenderingSettings,this.h.o(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(p){Mee(f,p)}),this.h.o(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(p){g5(f,p)}),this.h.o(this.i,"ended",function(){f.m.contentComplete()}),this.h.qa(this.i,"play",function(){f.G=!0})}V1.prototype.configure=function(e){this.u=e},V1.prototype.stop=function(){this.g&&this.g.stop(),this.A&&Ra(this.A)},V1.prototype.release=function(){this.stop(),this.C&&this.C.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.F.destroy()};function g5(e,n){n.getError(),n=new Map().set("originalEvent",n),e.l(new _e("ad-error",n)),G1(e,null),e.l(new _e("ad-cue-points-changed",new Map().set("cuepoints",[])))}function Mee(e,n){if(e.l(new _e("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.H))),e.u.customPlayheadTracker){var s={currentTime:e.i.currentTime};e.g=n.getAdsManager(s,e.D),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.o(e.i,"timeupdate",function(){e.i.duration&&(s.currentTime=e.i.currentTime)}),e.h.o(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=n.getAdsManager(e.i,e.D);e.l(new _e("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var a=e.g.getCuePoints();if(a.length){n=[],a=C(a);for(var u=a.next();!u.done;u=a.next())n.push({start:u.value,end:null});e.l(new _e("ad-cue-points-changed",new Map().set("cuepoints",n)))}Oee(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight),e.h.o(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),"ResizeObserver"in l?(e.C=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.C.observe(e.i)):e.h.o(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.G||e.u.skipPlayDetection?e.g.start():e.h.qa(e.i,"play",function(){e.G=!0,e.g.start()})}catch{G1(e,null)}}function Oee(e){function n(s,a){s=new Map().set("originalEvent",s),e.l(new _e(a,s))}e.h.o(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(s){g5(e,s)}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(s){v5(e,s)}),e.h.o(e.g,google.ima.AdEvent.Type.STARTED,function(s){v5(e,s)}),e.h.o(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(s){n(s,"ad-first-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.MIDPOINT,function(s){n(s,"ad-midpoint")}),e.h.o(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(s){n(s,"ad-third-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.COMPLETE,function(s){n(s,"ad-complete")}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(s){G1(e,s)}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(s){n(s,"all-ads-completed"),G1(e,s)}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPED,function(s){n(s,"ad-skipped")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(s){n(s,"ad-volume-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(s){n(s,"ad-muted")}),e.h.o(e.g,google.ima.AdEvent.Type.PAUSED,function(s){e.j&&(e.j.i=!0,n(s,"ad-paused"))}),e.h.o(e.g,google.ima.AdEvent.Type.RESUMED,function(s){e.j&&(e.j.i=!1,n(s,"ad-resumed"))}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(s){e.j&&n(s,"ad-skip-state-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.CLICK,function(s){n(s,"ad-clicked")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(s){n(s,"ad-progress")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(s){n(s,"ad-buffering")}),e.h.o(e.g,google.ima.AdEvent.Type.IMPRESSION,function(s){n(s,"ad-impression")}),e.h.o(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(s){n(s,"ad-duration-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(s){n(s,"ad-closed")}),e.h.o(e.g,google.ima.AdEvent.Type.LOADED,function(s){n(s,"ad-loaded")}),e.h.o(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(s){n(s,"ad-linear-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_METADATA,function(s){n(s,"ad-metadata")}),e.h.o(e.g,google.ima.AdEvent.Type.LOG,function(s){n(s,"ad-recoverable-error")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(s){n(s,"ad-break-ready")}),e.h.o(e.g,google.ima.AdEvent.Type.INTERACTION,function(s){n(s,"ad-interaction")})}function v5(e,n){var s=n.getAd();s?(e.j=new Qe(s,e.g,e.i),n.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.u.supportsMultipleMediaElements||e.l(new _e("ad-content-pause-requested")),n=new Map().set("ad",e.j).set("sdkAdObject",s).set("originalEvent",n),e.l(new _e("ad-started",n)),e.j.isLinear()&&(e.A.setAttribute("ad-active","true"),e.u.customPlayheadTracker||e.i.pause(),e.i.muted?(n=e.j,n.j=e.i.volume,n.h.setVolume(0)):e.j.setVolume(e.i.volume))):$e("The IMA SDK fired a "+n.type+" event with no associated ad. Unable to play ad!")}function G1(e,n){n&&n.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.u.supportsMultipleMediaElements&&e.l(new _e("ad-content-resume-requested")),e.l(new _e("ad-stopped",new Map().set("originalEvent",n))),e.j&&e.j.isLinear()&&(e.A.removeAttribute("ad-active"),e.u.customPlayheadTracker||e.i.ended||e.i.play())}function Je(e,n,s,a,u,f){this.g=e,this.h=n,this.j=(this.i=n.isSkippable)?n.skipOffset||0:n.skipOffset,this.l=n.skipFor,this.C=s,this.u=a,this.m=u,this.A=f,this.D=n.overlay}d=Je.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return this.h.clickThroughUrl!=null},d.isUsingAnotherMediaElement=function(){return this.A},d.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return this.i&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.i},d.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},d.canSkipNow=function(){return this.i&&this.getTimeUntilSkippable()==0},d.skip=function(){this.canSkipNow()&&this.C()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.D==null},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.u},d.getPositionInSequence=function(){return this.m},d.getTitle=function(){return""},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return""},d.getAdId=function(){return this.h.id||""},d.getCreativeAdId=function(){return""},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return this.h.uri},d.getTimeOffset=function(){return this.h.pre?0:this.h.post?-1:this.h.startTime},d.getPodIndex=function(){return 0},d.release=function(){this.g=null},xe("shaka.ads.InterstitialAd",Je),Je.prototype.release=Je.prototype.release,Je.prototype.getPodIndex=Je.prototype.getPodIndex,Je.prototype.getTimeOffset=Je.prototype.getTimeOffset,Je.prototype.getMediaUrl=Je.prototype.getMediaUrl,Je.prototype.getAdvertiserName=Je.prototype.getAdvertiserName,Je.prototype.getCreativeAdId=Je.prototype.getCreativeAdId,Je.prototype.getAdId=Je.prototype.getAdId,Je.prototype.getVastAdId=Je.prototype.getVastAdId,Je.prototype.getVastMediaWidth=Je.prototype.getVastMediaWidth,Je.prototype.getVastMediaHeight=Je.prototype.getVastMediaHeight,Je.prototype.getVastMediaBitrate=Je.prototype.getVastMediaBitrate,Je.prototype.getDescription=Je.prototype.getDescription,Je.prototype.getTitle=Je.prototype.getTitle,Je.prototype.getPositionInSequence=Je.prototype.getPositionInSequence,Je.prototype.getSequenceLength=Je.prototype.getSequenceLength,Je.prototype.setMuted=Je.prototype.setMuted,Je.prototype.resize=Je.prototype.resize,Je.prototype.isLinear=Je.prototype.isLinear,Je.prototype.isMuted=Je.prototype.isMuted,Je.prototype.setVolume=Je.prototype.setVolume,Je.prototype.getVolume=Je.prototype.getVolume,Je.prototype.play=Je.prototype.play,Je.prototype.pause=Je.prototype.pause,Je.prototype.skip=Je.prototype.skip,Je.prototype.canSkipNow=Je.prototype.canSkipNow,Je.prototype.getTimeUntilSkippable=Je.prototype.getTimeUntilSkippable,Je.prototype.isSkippable=Je.prototype.isSkippable,Je.prototype.isPaused=Je.prototype.isPaused,Je.prototype.getRemainingTime=Je.prototype.getRemainingTime,Je.prototype.getMinSuggestedDuration=Je.prototype.getMinSuggestedDuration,Je.prototype.getDuration=Je.prototype.getDuration,Je.prototype.isUsingAnotherMediaElement=Je.prototype.isUsingAnotherMediaElement,Je.prototype.hasCustomClick=Je.prototype.hasCustomClick,Je.prototype.isClientRendering=Je.prototype.isClientRendering,Je.prototype.needsSkipUI=Je.prototype.needsSkipUI;function Ze(e,n,s){this.g=e,this.j=n,this.h=s,this.i=e.overlay==null}d=Ze.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return this.g.clickThroughUrl!=null},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return-1},d.isPaused=function(){return!1},d.isSkippable=function(){return!1},d.getTimeUntilSkippable=function(){return 0},d.canSkipNow=function(){return!1},d.skip=function(){},d.pause=function(){},d.play=function(){},d.getVolume=function(){return 1},d.setVolume=function(){},d.isMuted=function(){return!1},d.isLinear=function(){return this.i},d.resize=function(){},d.setMuted=function(){},d.getSequenceLength=function(){return this.j},d.getPositionInSequence=function(){return this.h},d.getTitle=function(){return""},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.id||""},d.getCreativeAdId=function(){return""},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return this.g.uri},d.getTimeOffset=function(){return this.g.pre?0:this.g.post?-1:this.g.startTime},d.getPodIndex=function(){return 0},d.release=function(){},xe("shaka.ads.InterstitialStaticAd",Ze),Ze.prototype.release=Ze.prototype.release,Ze.prototype.getPodIndex=Ze.prototype.getPodIndex,Ze.prototype.getTimeOffset=Ze.prototype.getTimeOffset,Ze.prototype.getMediaUrl=Ze.prototype.getMediaUrl,Ze.prototype.getAdvertiserName=Ze.prototype.getAdvertiserName,Ze.prototype.getCreativeAdId=Ze.prototype.getCreativeAdId,Ze.prototype.getAdId=Ze.prototype.getAdId,Ze.prototype.getVastAdId=Ze.prototype.getVastAdId,Ze.prototype.getVastMediaWidth=Ze.prototype.getVastMediaWidth,Ze.prototype.getVastMediaHeight=Ze.prototype.getVastMediaHeight,Ze.prototype.getVastMediaBitrate=Ze.prototype.getVastMediaBitrate,Ze.prototype.getDescription=Ze.prototype.getDescription,Ze.prototype.getTitle=Ze.prototype.getTitle,Ze.prototype.getPositionInSequence=Ze.prototype.getPositionInSequence,Ze.prototype.getSequenceLength=Ze.prototype.getSequenceLength,Ze.prototype.setMuted=Ze.prototype.setMuted,Ze.prototype.resize=Ze.prototype.resize,Ze.prototype.isLinear=Ze.prototype.isLinear,Ze.prototype.isMuted=Ze.prototype.isMuted,Ze.prototype.setVolume=Ze.prototype.setVolume,Ze.prototype.getVolume=Ze.prototype.getVolume,Ze.prototype.play=Ze.prototype.play,Ze.prototype.pause=Ze.prototype.pause,Ze.prototype.skip=Ze.prototype.skip,Ze.prototype.canSkipNow=Ze.prototype.canSkipNow,Ze.prototype.getTimeUntilSkippable=Ze.prototype.getTimeUntilSkippable,Ze.prototype.isSkippable=Ze.prototype.isSkippable,Ze.prototype.isPaused=Ze.prototype.isPaused,Ze.prototype.getRemainingTime=Ze.prototype.getRemainingTime,Ze.prototype.getMinSuggestedDuration=Ze.prototype.getMinSuggestedDuration,Ze.prototype.getDuration=Ze.prototype.getDuration,Ze.prototype.isUsingAnotherMediaElement=Ze.prototype.isUsingAnotherMediaElement,Ze.prototype.hasCustomClick=Ze.prototype.hasCustomClick,Ze.prototype.isClientRendering=Ze.prototype.isClientRendering,Ze.prototype.needsSkipUI=Ze.prototype.needsSkipUI;function y5(e,n,s,a){function u(p){return p?p.overlay?!0:f.g.ended?p.post:!f.g.paused:!1}var f=this;this.L=null,this.m=e,this.D=n,this.g=s,this.G=null,this.A=!0,this.h=this.g,this.oa=a,this.aa=new Set,this.R=new Set,this.H=new Set,this.F=new Map,this.K=new Map,this.i=new ye,z2(this),this.I=new Dt,this.j=new Dt,this.J=!1,this.W=this.u=this.C=this.l=null,this.Z=!1,this.O=-1,this.V=function(){if(!f.J&&f.l&&!f.D.Da()){f.l=f.g.currentTime;var p=vf(f);p&&u(p)&&H1(f,p,1,1,Date.now())}},this.T=function(){if(!(f.J||f.l||f.D.Da())){f.g.paused||(f.l=f.g.currentTime);var p=vf(f,!0);p||(p=vf(f)),p&&u(p)&&H1(f,p,1,1,Date.now())}},this.ea=function(){if(!f.J&&f.l&&!f.D.Da()){var p=f.g.currentTime;f.C&&!f.C.pre&&!f.C.post&&p<(f.C.endTime||f.C.startTime)&&(f.C=null)}},this.P=new Ke(this.V),this.M=new Ke(function(){var p,g,y,w,b,I,L,j,U,F,B;return X(function(q){switch(q.g){case 1:if(!f.H.size||f.l==null){q.B(0);break}if(p=f.D.Ac(),p==Io||p==F1)return q.return();g=!1,y=Array.from(f.H),w=f.D.wa(),b=C(y),I=b.next();case 3:if(I.done){q.B(5);break}if(L=I.value,L==f.C){q.B(4);break}if(j=L.endTime||L.startTime,!(w.start-j>=1)){U=L.startTime-f.l,U>0&&U<=10&&(!f.F.has(L)&&T5(L)&&f.F.set(L,f.i.preload(L.uri,null,L.mimeType||void 0)),w5(f,L)),q.B(4);break}if(!f.F.has(L)){q.B(7);break}return O(q,f.F.get(L),8);case 8:(F=q.h)&&F.destroy(),f.F.delete(L);case 7:E5(f,L),B=L.id||JSON.stringify(L),f.R.has(B)&&f.R.delete(B),f.H.delete(L),H2(f),L.overlay||(g=!0);case 4:I=b.next(),q.B(3);break;case 5:g&&q1(f),re(q)}})}),this.configure(this.D.getConfiguration().ads)}d=y5.prototype,d.configure=function(e){this.L=e,this.J||q2(this)};function jee(e){if(!e.Z&&e.H.size){if(e.I.o(e.g,"playing",e.T),e.I.o(e.g,"timeupdate",e.T),e.I.o(e.g,"seeked",e.ea),e.I.o(e.g,"ended",e.V),"requestVideoFrameCallback"in e.g&&!S5()){var n=e.g,s=function(){e.O!=-1&&(e.V(),e.O!=-1&&(e.O=n.requestVideoFrameCallback(s)))};e.O=n.requestVideoFrameCallback(s)}else e.P.xa(.025);e.M&&e.M.xa(1),e.Z=!0}}function H2(e){e.Z&&!e.H.size&&(e.I.Ea(e.g,"playing",e.T),e.I.Ea(e.g,"timeupdate",e.T),e.I.Ea(e.g,"seeked",e.ea),e.I.Ea(e.g,"ended",e.V),e.O!=-1&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.P&&e.P.stop(),e.M&&e.M.stop(),e.Z=!1)}function q2(e){if(e.m&&e.L){var n=e.L.supportsMultipleMediaElements,s=e.g;(s.controls||s.webkitPresentationMode&&s.webkitPresentationMode!=="inline"||s.webkitDisplayingFullscreen)&&(n=!1),e.A==n&&(e.A=!n,e.A?(e.h=e.g,e.G&&(e.G.parentElement&&e.m.removeChild(e.G),e.G=null)):(e.G||(n=document.createElement(e.g.tagName),n.autoplay=!0,n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.display="none",n.setAttribute("playsinline",""),e.G=n),e.h=e.G))}else e.A=!0}d.stop=function(){if(this.j&&this.j.Ta(),this.aa.clear(),this.R.clear(),this.H.clear(),this.i.Zg(),this.F.size){var e=Array.from(this.F.values());e=C(e);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&n.then(function(s){s&&s.destroy()})}if(this.F.clear(),this.K.size)for(e=Array.from(this.K.keys()),e=C(e),n=e.next();!n.done;n=e.next())E5(this,n.value);this.K.clear(),this.i.detach(),this.J=!1,this.C=this.l=null,this.A=!0,this.h=this.g,this.G=null,K2(this),H2(this),this.m&&Ra(this.m),this.u&&(this.u.stop(),this.u=null)},d.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.P&&(this.P.stop(),this.P=null),this.M&&(this.M.stop(),this.M=null),this.i.destroy()},d.Xb=function(){return this.i};function Uee(e,n){var s,a,u;X(function(f){if(f.g==1){if(s=null,(a=n.values.find(function(p){return p.key=="ID"}))&&(s=a.data),s){if(e.aa.has(s))return f.return();e.aa.add(s)}return z2(e),u=[],n&&n.values.find(function(p){return p.key=="X-OVERLAY-ID"})?(u=Gee(n),f.B(2)):O(f,Vee(e,n),3)}f.g!=2&&(u=f.h),u.length?Cg(e,u):$e("Unsupported HLS interstitial",n),re(f)})}function Fee(e,n){var s=fn(n.eventNode,"OverlayEvent"),a=s.attributes.uri,u=s.attributes.mimeType,f=s.attributes.loop=="true",p=rt(s,"z",Or);if(a&&p!=0){var g=null,y=fn(s,"Background");if(y){var w=y.attributes.uri;w?g="center / contain no-repeat url('"+w+"')":g=xi(y)}y=1920,w=1080;var b=fn(s,"Viewport");if(b&&(y=rt(b,"x",Or),y==null||(w=rt(b,"y",Or),w==null)))return;var I={viewport:{x:y,y:w},topLeft:{x:0,y:0},size:{x:y,y:w}},L=fn(s,"Overlay");if(b&&L){var j=fn(L,"TopLeft"),U=fn(L,"Size");if(j&&U){if(L=rt(j,"x",Or),L==null||(j=rt(j,"y",Or),j==null))return;var F=rt(U,"x",Or);if(F==null||(U=rt(U,"y",Or),U==null))return;I.topLeft.x=L,I.topLeft.y=j,I.size.x=F,I.size.y=U}}if(L=null,s=fn(s,"Squeeze"),b&&s&&(U=fn(s,"TopLeft"),s=fn(s,"Size"),U&&s)){if(b=rt(U,"x",Or),b==null||(L=rt(U,"y",Or),L==null)||(U=rt(s,"x",Or),U==null)||(s=rt(s,"y",Or),s==null))return;L={viewport:{x:y,y:w},topLeft:{x:b,y:L},size:{x:U,y:s}}}Cg(e,[{id:n.id,groupId:null,startTime:n.startTime,endTime:n.endTime,uri:a,mimeType:u,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:f,overlay:I,displayOnBackground:p==-1,currentVideo:L,background:g,clickThroughUrl:null}])}}d.addAdUrlInterstitial=function(e){var n=this,s,a,u,f,p,g,y,w,b;return X(function(I){if(I.g==1)return s={type:12},O(I,W2(n,e,s),2);if(I.g!=3){if(a=I.h,u=Bm(a,"VAST,vmap:VMAP"),!u)throw new oe(2,10,10007);if(f=[],u.tagName=="VAST")return f=m5(u,n.l),I.B(3);if(u.tagName!="vmap:VMAP")return I.B(3);for(p=function(L){var j,U;return X(function(F){if(F.g==1)return O(F,W2(n,L.uri,s),2);if(j=F.h,U=Bm(j,"VAST"),!U)throw new oe(2,10,10007);f.push.apply(f,K(m5(U,L.time))),re(F)})},g=[],y=C(Nee(u)),w=y.next();!w.done;w=y.next())b=w.value,g.push(p(b));return g.length?O(I,Promise.all(g),3):I.B(3)}Cg(n,f),re(I)})};function Cg(e,n){var s,a,u,f,p,g,y,w;X(function(b){switch(b.g){case 1:s=!1,a=C(n),u=a.next();case 2:if(u.done){b.B(4);break}if(f=u.value,!f.uri){$e("Missing URL in interstitial",f),b.B(3);break}if(f.mimeType){b.B(5);break}return ce(b,6),p=e.i.Wb(),O(b,af(f.uri,p,e.D.getConfiguration().streaming.retryParameters),8);case 8:f.mimeType=b.h,se(b,5);break;case 6:ue(b);case 5:if(g=f.id||JSON.stringify(f),e.R.has(g)){b.B(3);break}f.loop&&!f.overlay&&$e("Loop is only supported in overlay interstitials",f),f.overlay||(s=!0),e.R.add(g),e.H.add(f),y=!1,f.pre&&e.l==null?y=!0:f.startTime!=0||f.canJump?e.l!=null&&(w=f.startTime-e.l,w>0&&w<=10&&(y=!0)):y=!0,y&&(!e.F.has(f)&&T5(f)&&e.F.set(f,e.i.preload(f.uri,null,f.mimeType||void 0)),w5(e,f));case 3:u=a.next(),b.B(2);break;case 4:s&&q1(e),jee(e),re(b)}})}function vf(e,n,s){n=n===void 0?!1:n,s=s===void 0?null:s;var a=0,u=null;if(e.H.size&&e.l!=null){var f=e.g.ended,p=Array.from(e.H).sort(function(I,L){return L.startTime-I.startTime}),g=p;for(g=n?p.filter(function(I){return I.pre}):f?p.filter(function(I){return I.post}):p.filter(function(I){return!I.pre&&!I.post}),p=C(g),g=p.next();!g.done;g=p.next()){g=g.value;var y=!1;if(n)y=g.pre;else if(f)y=g.post;else if(!g.pre&&!g.post){var w=e.l-Math.round(g.startTime*1e3)/1e3,b=1;e.L.allowStartInMiddleOfInterstitial&&g.endTime&&g.endTime!=1/0&&(b=g.endTime-g.startTime),(w>0||w==0&&e.l==0)&&(w<=b||!g.canJump)&&(y=!(s==null&&e.C&&!e.C.pre&&!e.C.post&&e.C.startTime>=g.startTime))}y&&(!e.C||g.startTime>=e.C.startTime)&&(a==(s||0)?u=g:u&&!g.canJump&&Math.round(g.startTime*1e3)/1e3-Math.round(u.startTime*1e3)/1e3>.001&&(u=g,a=0),a++)}}return u}function H1(e,n,s,a,u,f){f=f===void 0?0:f,e.C=n,q2(e),e.A||!e.m||e.h.parentElement||e.m.appendChild(e.h),a==1&&s==1&&(s=Array.from(e.H).filter(function(p){return n.pre?p.pre==n.pre:n.post?p.post==n.post:Math.abs(p.startTime-n.startTime)<.001}).length),n.once&&(f++,e.H.delete(n),H2(e),n.overlay||q1(e)),n.mimeType&&(n.mimeType.startsWith("image/")||n.mimeType==="text/html")?n.overlay?Bee(e,n,s,a,f):$e("Unsupported interstitial",n):e.A&&n.overlay?$e("Unsupported interstitial",n):$ee(e,n,s,a,u,f)}function Bee(e,n,s,a,u){function f(){e.u&&(e.u.stop(),e.u=null),e.m.removeChild(y),K2(e,n),On(e,"ad-stopped"),e.j.Ta();var L=vf(e,n.pre,a-u);L?H1(e,L,s,++a,Date.now(),u):e.J=!1}e.J=!0;var p=n.overlay,g=n.mimeType=="text/html"?"iframe":"img",y=document.createElement(g);y.style.objectFit="contain",y.style.position="absolute",y.style.border="none",x5(e,n);var w=new Ze(n,s,a);On(e,"ad-impression"),On(e,"ad-started",new Map().set("ad",w)),g=="iframe"?y.src=n.uri:(y.src=n.uri,y.onerror=function(L){On(e,"ad-error",new Map().set("originalEvent",L)),f()}),w=p.viewport;var b=p.topLeft;p=p.size,w.x==0&&w.y==0?(y.width=n.overlay.size.x,y.height=n.overlay.size.y,y.style.bottom="10%",y.style.left="0",y.style.right="0",y.style.width="100%",n.overlay.size.y||g!="iframe"||(y.style.height="auto")):(y.style.height=p.y/w.y*100+"%",y.style.left=b.x/w.x*100+"%",y.style.top=b.y/w.y*100+"%",y.style.width=p.x/w.x*100+"%"),e.m.appendChild(y);var I=Date.now();e.u&&e.u.stop(),e.u=new Ke(function(){n.playoutLimit&&(Date.now()-I)/1e3>n.playoutLimit||n.endTime&&e.g.currentTime>n.endTime?(On(e,"ad-complete"),f()):e.g.currentTime<n.startTime&&(On(e,"ad-skipped"),f())}),n.playoutLimit&&!n.endTime?e.u.Y(n.playoutLimit):n.endTime&&e.u.xa(.025),e.j.o(e.g,"seeked",function(){var L=e.g.currentTime;(L<n.startTime||n.endTime&&L>n.endTime)&&(e.u&&e.u.stop(),On(e,"ad-skipped"),f())}),n.clickThroughUrl&&e.j.o(y,"click",function(){n.clickThroughUrl&&l.open(n.clickThroughUrl,"_blank")})}function $ee(e,n,s,a,u,f){var p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te;X(function(ae){switch(ae.g){case 1:if(p=Date.now(),e.J=!0,g=!1,y=function(){if(!e.A&&!n.overlay&&n.resumeOffset==null)if(n.timelineRange&&n.endTime&&n.endTime!=1/0)e.g.currentTime!=n.endTime&&(e.g.currentTime=n.endTime);else{var he=Date.now();e.g.currentTime+=(he-u)/1e3,u=he}},w=function(he){var Ee,Te;return X(function(ge){if(ge.g==1){if(y(),Ee=vf(e,n.pre,a-f),he&&n.groupId)for(;Ee&&Ee.groupId==n.groupId;)a++,Ee=vf(e,n.pre,a-f);return e.u&&(!n.groupId||Ee&&Ee.groupId!=n.groupId)&&(e.u.stop(),e.u=null),K2(e,n),Ee&&!Ee.overlay?ge.B(2):(n.post&&(e.l=null,e.C=null),e.A?O(ge,e.i.detach(),4):O(ge,e.i.wc(),4))}ge.g!=2&&(e.A&&(Te=n.resumeOffset,Te==null&&(Te=n.timelineRange&&n.endTime&&n.endTime!=1/0?n.endTime-(e.l||0):(Date.now()-u)/1e3),On(e,"ad-content-resume-requested",new Map().set("offset",Te))),On(e,"ad-stopped"),e.j.Ta(),e.J=!1,e.A?q1(e):(e.h.style.display="none",y(),e.g.ended||e.g.play())),q2(e),Ee&&(On(e,"ad-stopped"),e.j.Ta(),H1(e,Ee,s,++a,u,f)),re(ge)})},b=function(he){return X(function(Ee){return g?Ee.return():(g=!0,On(e,"ad-error",new Map().set("originalEvent",he)),O(Ee,w(!1),0))})},I=function(){return X(function(he){if(he.g==1)return g?he.return():(g=!0,O(he,w(!1),2));On(e,"ad-complete"),re(he)})},e.W=function(){return X(function(he){return g?he.return():(g=!0,On(e,"ad-skipped"),O(he,w(!0),0))})},L=new Je(e.h,n,e.W,s,a,!e.A),e.A||(L.setMuted(e.g.muted),L.setVolume(e.g.volume)),On(e,"ad-started",new Map().set("ad",L)),(j=L.canSkipNow())&&On(e,"ad-skip-state-changed"),e.j.qa(e.i,"error",b),e.j.o(e.h,"timeupdate",function(){if(e.h.duration){var he=L.canSkipNow();j!=he&&L.getRemainingTime()>0&&L.getDuration()>0&&On(e,"ad-skip-state-changed"),j=he,!e.A&&!n.overlay&&n.resumeOffset==null&&n.timelineRange&&n.endTime&&n.endTime!=1/0&&e.g.currentTime!=n.endTime&&e.D.wa().end>=n.endTime&&(e.g.currentTime=n.endTime)}}),e.j.qa(e.i,"firstquartile",function(){y(),On(e,"ad-first-quartile")}),e.j.qa(e.i,"midpoint",function(){y(),On(e,"ad-midpoint")}),e.j.qa(e.i,"thirdquartile",function(){y(),On(e,"ad-third-quartile")}),e.j.qa(e.i,"complete",I),e.j.o(e.h,"play",function(){On(e,"ad-resumed")}),e.j.o(e.h,"pause",function(){var he=e.i.getConfiguration();e.h.currentTime>=he.playRangeEnd?I():On(e,"ad-paused")}),e.j.o(e.h,"volumechange",function(){e.h.muted?On(e,"ad-muted"):On(e,"ad-volume-changed")}),n.clickThroughUrl&&(U=e.m||e.h,e.j.o(U,"click",function(){n.clickThroughUrl&&(L.isPaused()||L.pause(),l.open(n.clickThroughUrl,"_blank"))})),!e.A||a!=1){ae.B(2);break}return On(e,"ad-content-pause-requested",new Map().set("saveLivePosition",!0)),F=new en,B=function(he){return X(function(Ee){if(Ee.g==1)return he.state!="detach"?Ee.B(0):S5()?O(Ee,new Promise(function(Te){return new Ke(Te).Y(.1)}),3):Ee.B(3);F.resolve(),e.j.Ea(e.D,"onstatechange",B),re(Ee)})},e.j.o(e.D,"onstatechange",B),O(ae,F,2);case 2:return x5(e,n),e.A||(e.h.style.display="",n.overlay?(e.h.loop=n.loop,q=n.overlay.viewport,G=n.overlay.topLeft,z=n.overlay.size,e.h.style.height=z.y/q.y*100+"%",e.h.style.left=G.x/q.x*100+"%",e.h.style.top=G.y/q.y*100+"%",e.h.style.width=z.x/q.x*100+"%"):(e.g.pause(),n.resumeOffset!=null&&n.resumeOffset!=0&&(e.g.currentTime+=n.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),ce(ae,4),z2(e),n.startTime&&n.endTime&&n.endTime!=1/0&&n.startTime!=n.endTime&&(J=n.endTime-n.startTime,J>0&&e.i.configure("playRangeEnd",J)),n.playoutLimit&&!e.u&&(e.u=new Ke(function(){e.W()}).Y(n.playoutLimit),e.i.configure("playRangeEnd",n.playoutLimit)),O(ae,e.i.Ub(e.h),6);case 6:return ie=null,n.pre||n.post||!e.L.allowStartInMiddleOfInterstitial||e.l==null||(Y=e.l-n.startTime,Math.abs(Y)>.25&&(ie=Y)),e.F.has(n)?O(ae,e.F.get(n),10):O(ae,e.i.load(n.uri,ie,n.mimeType||void 0),8);case 10:return ne=ae.h,e.F.delete(n),ne?O(ae,e.i.load(ne),8):O(ae,e.i.load(n.uri,ie,n.mimeType||void 0),8);case 8:n.overlay&&e.g.paused?e.h.pause():e.h.play(),Z=(Date.now()-p)/1e3,On(e,"ads-loaded",new Map().set("loadTime",Z)),e.A&&e.g.play(),n.overlay&&(n.pre||n.post||e.D.U()&&!(n.startTime>0)||(de=function(){var he=e.g.currentTime-n.startTime;Math.abs(he-e.h.currentTime)>.1&&(e.h.currentTime=he)},e.j.qa(e.h,"playing",de),e.j.o(e.g,"seeking",de)),e.j.o(e.g,"seeked",function(){var he=e.g.currentTime;(he<n.startTime||n.endTime&&he>n.endTime)&&e.W()})),se(ae,0);break;case 4:if(te=ue(ae),!e.J)return ae.return();b(te),re(ae)}})}function x5(e,n){if(n.displayOnBackground&&(e.g.style.zIndex="1"),n.currentVideo!=null){var s=n.currentVideo;e.g.style.transformOrigin="top left";var a=!0,u=[],f=s.topLeft.x/s.viewport.x*100;f>0&&f<=100&&(u.push("translateX("+f+"%)"),a=!1),f=s.topLeft.y/s.viewport.y*100,f>0&&f<=100&&(u.push("translateY("+f+"%)"),a=!1),f=s.size.x/s.viewport.x,f<1&&u.push("scaleX("+f+")"),s=s.size.y/s.viewport.y,f<1&&u.push("scaleY("+s+")"),u.length&&(e.g.style.transform=u.join(" ")),a&&(e.g.style.transition="transform 250ms")}e.m&&(n.clickThroughUrl?(e.m.setAttribute("ad-active","true"),e.m.style.pointerEvents=""):e.m.style.pointerEvents="none",n.background&&(e.m.style.background=n.background)),e.G&&(e.G.style.background=n.overlay?"":"rgb(0, 0, 0)")}function K2(e,n){(!n||n.displayOnBackground)&&(e.g.style.zIndex=""),n&&n.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.m&&(e.m.removeAttribute("ad-active"),e.m.style.pointerEvents="",!n||n.background)&&(e.m.style.background=""),e.G&&(e.G.style.background="")}function Vee(e,n){var s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge,ve,Ie,Le,at,je,Vt,ct,Xt,At,St,kt,Ut;return X(function(_t){switch(_t.g){case 1:if(s=[],!n||(a=n.values.find(function(wt){return wt.key=="X-ASSET-URI"}),u=n.values.find(function(wt){return wt.key=="X-ASSET-LIST"}),!a&&!u))return _t.return(s);if(f=null,(p=n.values.find(function(wt){return wt.key=="ID"}))&&(f=p.data),g=f==null?Math.floor(n.startTime*10)/10:n.startTime,(y=n.endTime)&&n.endTime!=1/0&&typeof n.endTime=="number"&&(y=f==null?Math.floor(n.endTime*10)/10:n.endTime),w=n.values.find(function(wt){return wt.key=="X-RESTRICT"}),I=b=!0,w&&w.data&&(L=w.data,b=!L.includes("SKIP"),I=!L.includes("JUMP")),j=b?0:null,(U=n.values.find(function(wt){return wt.key=="X-ENABLE-SKIP-AFTER"}))&&(F=U.data,j=parseFloat(F),isNaN(j)&&(j=b?0:null)),B=null,(q=n.values.find(function(wt){return wt.key=="X-ENABLE-SKIP-FOR"}))&&(G=q.data,B=parseFloat(G),isNaN(j)&&(B=null)),z=null,(J=n.values.find(function(wt){return wt.key=="X-RESUME-OFFSET"}))&&(ie=J.data,z=parseFloat(ie),isNaN(z)&&(z=null)),Y=null,(ne=n.values.find(function(wt){return wt.key=="X-PLAYOUT-LIMIT"}))&&(Z=ne.data,Y=parseFloat(Z),isNaN(Y)&&(Y=null)),ae=te=de=!1,(he=n.values.find(function(wt){return wt.key=="CUE"}))&&(Ee=he.data,de=Ee.includes("ONCE"),te=Ee.includes("PRE"),ae=Ee.includes("POST")),Te=!1,(ge=n.values.find(function(wt){return wt.key=="X-TIMELINE-OCCUPIES"}))?(ve=ge.data,Te=ve.includes("RANGE")):!J&&e.D.U()&&(Te=!te&&!ae),a){if(Ie=a.data,!Ie)return _t.return(s);s.push({id:f,groupId:null,startTime:g,endTime:y,uri:Ie,mimeType:null,isSkippable:b,skipOffset:j,skipFor:B,canJump:I,resumeOffset:z,playoutLimit:Y,once:de,pre:te,post:ae,timelineRange:Te,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}),_t.B(2);break}if(!u){_t.B(2);break}return Le=u.data,Le?(ce(_t,4),at={type:11},O(_t,W2(e,Le,at),6)):_t.return(s);case 6:for(je=_t.h,Vt=yn(je),ct=JSON.parse(Vt),(Xt=ct["SKIP-CONTROL"])&&(At=Xt["ENABLE-SKIP-AFTER"],typeof At=="number"&&(j=parseFloat(At),isNaN(At)&&(j=b?0:null)),St=Xt["ENABLE-SKIP-FOR"],typeof St=="number"&&(B=parseFloat(St),isNaN(St)&&(B=null))),kt=0;kt<ct.ASSETS.length;kt++)Ut=ct.ASSETS[kt],Ut.URI&&s.push({id:f+"_shaka_asset_"+kt,groupId:f,startTime:g,endTime:y,uri:Ut.URI,mimeType:null,isSkippable:b,skipOffset:j,skipFor:B,canJump:I,resumeOffset:z,playoutLimit:Y,once:de,pre:te,post:ae,timelineRange:Te,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null});se(_t,2);break;case 4:ue(_t);case 2:return _t.return(s)}})}function Gee(e){var n=[];if(!e)return n;var s=e.values.find(function(B){return B.key=="X-ASSET-URI"});if(!s||(s=s.data,!s))return n;var a=null,u=e.values.find(function(B){return B.key=="X-OVERLAY-ID"});u&&(a=u.data),u=a==null?Math.floor(e.startTime*10)/10:e.startTime;var f=e.endTime;e.endTime&&e.endTime!=1/0&&typeof e.endTime=="number"&&(f=a==null?Math.floor(e.endTime*10)/10:e.endTime);var p=!1,g=!1,y=!1,w=e.values.find(function(B){return B.key=="CUE"});w&&(y=w.data,p=y.includes("ONCE"),g=y.includes("PRE"),y=y.includes("POST")),w=null;var b=e.values.find(function(B){return B.key=="X-ASSET-MIMETYPE"});b&&(w=b.data),b=!1;var I=e.values.find(function(B){return B.key=="X-LOOP"});I&&(b=I.data=="YES"),I=1;var L=e.values.find(function(B){return B.key=="X-DEPTH"});L&&(I=parseFloat(L.data),isNaN(I)&&(I=1)),L=null;var j=e.values.find(function(B){return B.key=="X-BACKGROUND"});j&&(L=j.data),j=1920;var U=1080,F=e.values.find(function(B){return B.key=="X-VIEWPORT"});if(F){if(U=F.data.split("x"),U.length!=2)return n;j=parseFloat(U[0]),U=parseFloat(U[1])}if(j={viewport:{x:j,y:U},topLeft:{x:0,y:0},size:{x:j,y:U}},U=e.values.find(function(B){return B.key=="X-OVERLAY-POSITION"})){if(U=U.data.split("x"),U.length!=2)return n;j.topLeft.x=parseFloat(U[0]),j.topLeft.y=parseFloat(U[1])}if(U=e.values.find(function(B){return B.key=="X-OVERLAY-SIZE"})){if(U=U.data.split("x"),U.length!=2)return n;j.size.x=parseFloat(U[0]),j.size.y=parseFloat(U[1])}if(U=null,(F=e.values.find(function(B){return B.key=="X-SQUEEZECURRENT"}))&&(U=parseFloat(F.data),isNaN(U)&&(U=1),U={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*U,y:1080*U}},e=e.values.find(function(B){return B.key=="X-SQUEEZECURRENT-POSITION"}))){if(e=e.data.split("x"),e.length!=2)return n;U.topLeft.x=parseFloat(e[0]),U.topLeft.y=parseFloat(e[1])}return n.push({id:a,groupId:null,startTime:u,endTime:f,uri:s,mimeType:w,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:p,pre:g,post:y,timelineRange:!0,loop:b,overlay:j,displayOnBackground:I==-1,currentVideo:U,background:L,clickThroughUrl:null}),n}function q1(e){for(var n=[],s=C(e.H),a=s.next(),u={};!a.done;u={Mc:void 0},a=s.next())a=a.value,a.overlay||(u.Mc={start:a.startTime,end:null},a.pre?(u.Mc.start=0,u.Mc.end=null):a.post?(u.Mc.start=-1,u.Mc.end=null):a.timelineRange&&(u.Mc.end=a.endTime),n.find(function(f){return function(p){return f.Mc.start==p.start&&f.Mc.end==p.end}}(u))||n.push(u.Mc));On(e,"ad-cue-points-changed",new Map().set("cuepoints",n))}function z2(e){e.i.configure(e.D.ej()),e.i.configure("ads.disableHLSInterstitial",!0),e.i.configure("ads.disableDASHInterstitial",!0),e.i.configure("playRangeEnd",1/0),w3(e.D.Wb(),e.i.Wb())}function W2(e,n,s){var a,u,f;return X(function(p){return p.g==1?(a=Kn([n],bo()),u=e.D.Wb().request(7,a,s),O(p,u.promise,2)):(f=p.h,p.return(f.data))})}function T5(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function S5(){var e=ht().Oa();return e=="TV"||e=="CONSOLE"||e=="CAST"}function w5(e,n){if(!(e.K.has(n)||e.L&&!e.L.allowPreloadOnDomElements)){var s=function(f){var p=document.createElement("link");return p.rel="preload",p.href=f,p.as="image",document.head.appendChild(p),p},a=[];if(n.background){var u=n.background.match(/url\(('|")?([^'"()]+)('|")\)?/);u&&a.push(s(u[2]))}n.mimeType&&n.mimeType.startsWith("image/")&&a.push(s(n.uri)),e.K.set(n,a)}}function E5(e,n){if(e.K.has(n)){var s=e.K.get(n);s=C(s);for(var a=s.next();!a.done;a=s.next())a=a.value,a.parentNode.removeChild(a);e.K.delete(n)}}function On(e,n,s){e.oa(new _e(n,s))}function We(e,n,s,a,u){this.h=e,this.j=Vh(this.h.skipOffset),this.g=u,this.i=n,this.l=s,this.u=a,this.m=!1}d=We.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!1},d.hasCustomClick=function(){return!1},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return this.h.durationInSeconds},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return typeof this.j=="number"},d.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},d.canSkipNow=function(){return this.getTimeUntilSkippable()==0},d.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.u},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.l?this.l:1},d.getPositionInSequence=function(){return this.i?this.i:1},d.getTitle=function(){return this.h.adTitle},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return this.h.vastAdId||""},d.getAdId=function(){return this.h.adId},d.getCreativeAdId=function(){return this.h.creativeId},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){return 0},d.getPodIndex=function(){return 0},d.release=function(){this.l=this.i=this.g=this.h=null},xe("shaka.ads.MediaTailorAd",We),We.prototype.release=We.prototype.release,We.prototype.getPodIndex=We.prototype.getPodIndex,We.prototype.getTimeOffset=We.prototype.getTimeOffset,We.prototype.getMediaUrl=We.prototype.getMediaUrl,We.prototype.getAdvertiserName=We.prototype.getAdvertiserName,We.prototype.getCreativeAdId=We.prototype.getCreativeAdId,We.prototype.getAdId=We.prototype.getAdId,We.prototype.getVastAdId=We.prototype.getVastAdId,We.prototype.getVastMediaWidth=We.prototype.getVastMediaWidth,We.prototype.getVastMediaHeight=We.prototype.getVastMediaHeight,We.prototype.getVastMediaBitrate=We.prototype.getVastMediaBitrate,We.prototype.getDescription=We.prototype.getDescription,We.prototype.getTitle=We.prototype.getTitle,We.prototype.getPositionInSequence=We.prototype.getPositionInSequence,We.prototype.getSequenceLength=We.prototype.getSequenceLength,We.prototype.setMuted=We.prototype.setMuted,We.prototype.resize=We.prototype.resize,We.prototype.isLinear=We.prototype.isLinear,We.prototype.isMuted=We.prototype.isMuted,We.prototype.setVolume=We.prototype.setVolume,We.prototype.getVolume=We.prototype.getVolume,We.prototype.play=We.prototype.play,We.prototype.pause=We.prototype.pause,We.prototype.skip=We.prototype.skip,We.prototype.canSkipNow=We.prototype.canSkipNow,We.prototype.getTimeUntilSkippable=We.prototype.getTimeUntilSkippable,We.prototype.isSkippable=We.prototype.isSkippable,We.prototype.isPaused=We.prototype.isPaused,We.prototype.getRemainingTime=We.prototype.getRemainingTime,We.prototype.getMinSuggestedDuration=We.prototype.getMinSuggestedDuration,We.prototype.getDuration=We.prototype.getDuration,We.prototype.isUsingAnotherMediaElement=We.prototype.isUsingAnotherMediaElement,We.prototype.hasCustomClick=We.prototype.hasCustomClick,We.prototype.isClientRendering=We.prototype.isClientRendering,We.prototype.needsSkipUI=We.prototype.needsSkipUI;function kg(e,n,s,a){this.D=e,this.K=n,this.h=s,this.l=null,this.P=NaN,this.i=a,this.J=!1,this.C=null,this.j=[],this.M=[],this.L=this.F=this.g=null,this.G=new Map,this.m=[],this.A=[],this.H="",this.O=!0,this.I="",this.u=new Dt}kg.prototype.stop=function(){for(var e=C(this.m),n=e.next();!n.done;n=e.next())n=n.value,this.u.Ea(n.target,n.type,n.listener);yf(this),this.m=[],this.A=[],this.H="",this.O=!0,this.I="",this.C=null,this.j=[],this.M=[],this.G.clear()},kg.prototype.release=function(){this.stop(),this.u&&this.u.release()},kg.prototype.onManifestUpdated=function(e){this.J=e,this.H!=""&&(qee(this,this.H,this.O),this.O=!1)},kg.prototype.getCuePoints=function(){for(var e=[],n=C(this.j),s=n.next();!s.done;s=n.next()){s=C(s.value.ads);for(var a=s.next();!a.done;a=s.next())a=a.value,e.push({start:a.startTimeInSeconds,end:a.startTimeInSeconds+a.durationInSeconds})}return e};function Hee(e,n,s){var a,u,f,p,g,y,w,b,I,L,j,U;X(function(F){if(F.g==1)return a={type:7},u=Kn([n],bo()),u.method="POST",s&&(f=JSON.stringify(s),u.body=To(f)),p=e.K.request(7,u,a),ce(F,2),O(F,p.promise,4);if(F.g!=2){if(g=F.h,y=yn(g.data),w=JSON.parse(y),w.manifestUrl&&w.trackingUrl)b=new Cn(n),I=new Cn(w.trackingUrl),e.H=b.resolve(I).toString(),L=Date.now()/1e3,j=L-e.P,e.i(new _e("ads-loaded",new Map().set("loadTime",j))),U=new Cn(w.manifestUrl),e.l.resolve(b.resolve(U).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return se(F,0)}if(ue(F),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,F.return();e.l.resolve(e.I),e.l=null,re(F)})}function qee(e,n,s){var a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G;X(function(z){if(z.g==1)return a={type:8},u=Kn([n],bo()),f=e.K.request(7,u,a),ce(z,2),O(z,f.promise,4);if(z.g!=2){if(p=z.h,g=[],y=yn(p.data),w=JSON.parse(y),w.avails.length>0){if(JSON.stringify(e.j)!=JSON.stringify(w.avails)){for(e.j=w.avails,b=C(e.j),I=b.next();!I.done;I=b.next())for(L=I.value,j=C(L.nonLinearAdsList),U=j.next();!U.done;U=j.next())for(F=U.value,B=C(F.nonLinearAdList),q=B.next();!q.done;q=B.next())G=q.value,Kee(e,G);g=e.getCuePoints(),e.i(new _e("ad-cue-points-changed",new Map().set("cuepoints",g)))}}else e.j.length&&e.i(new _e("ad-cue-points-changed",new Map().set("cuepoints",g))),yf(e),e.j=[];return s&&(e.J||g.length>0)&&zee(e),se(z,0)}ue(z),re(z)})}function Kee(e,n){var s,a,u,f,p,g,y,w;X(function(b){if(b.g==1)return!n.staticResource||(s=b5(n),e.G.get(s))?b.return():(a={type:9},u=Kn([n.staticResource],bo()),f=e.K.request(7,u,a),ce(b,2),e.G.set(s,[]),O(b,f.promise,4));if(b.g!=2)return p=b.h,g=yn(p.data),y=JSON.parse(g),w=y.apps,e.G.set(s,w),se(b,0);ue(b),e.G.delete(s),re(b)})}function b5(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function zee(e){I5(e),e.J||(A5(e),e.u.o(e.h,"seeked",function(){A5(e)}),e.u.o(e.h,"ended",function(){yf(e)})),e.u.o(e.h,"timeupdate",function(){I5(e)})}function A5(e){var n=e.h.currentTime;if(n!=0&&e.C==null){for(var s,a,u=C(e.j),f=u.next();!f.done;f=u.next()){f=f.value;for(var p=C(f.ads),g=p.next();!g.done;g=p.next())if(g=g.value,!a)g.startTimeInSeconds<n&&(a=g,s=f);else if(g.startTimeInSeconds<n&&g.startTimeInSeconds>a.startTimeInSeconds+a.durationInSeconds){a=g,s=f;break}}s&&a&&!e.M.includes(a.adId)&&(e.C=n,e.h.currentTime=s.startTimeInSeconds)}}function I5(e){if(e.h.duration&&(e.g||e.j.length)){var n=e.h.currentTime,s=!1;if(e.g){s=!0;var a=e.F,u=a.startTimeInSeconds+.5*a.durationInSeconds,f=a.startTimeInSeconds+.75*a.durationInSeconds;n>=a.startTimeInSeconds+.25*a.durationInSeconds&&!e.A.includes("firstQuartile")?(e.A.push("firstQuartile"),wi(e,"firstQuartile")):n>=u&&!e.A.includes("midpoint")?(e.A.push("midpoint"),wi(e,"midpoint")):n>=f&&!e.A.includes("thirdQuartile")&&(e.A.push("thirdQuartile"),wi(e,"thirdQuartile")),a=e.g.getRemainingTime(),u=e.g.getDuration(),e.g.canSkipNow()&&a>0&&u>0&&wi(e,"skipStateChanged"),u>0&&(a<=0||a>u)&&yf(e)}if(!e.g||!e.g.isLinear()){e:for(a=C(e.j),u=a.next();!u.done&&(u=u.value,!(e.g&&e.g.isLinear()));u=a.next())for(f=0;f<u.ads.length;f++){var p=u.ads[f],g=p.startTimeInSeconds+p.durationInSeconds;if(p.startTimeInSeconds<=n&&g>n){if(e.M.includes(p.adId)){if(e.h.ended)continue;e.h.currentTime=g;break e}yf(e),e.L=u,e.g=new We(p,f+1,u.ads.length,!0,e.h),e.F=p,f===0&&wi(e,"breakStart"),C5(e);break}}if(!e.g){for(a=C(e.j),u=a.next();!u.done&&(u=u.value,!e.g);u=a.next())for(f=0;f<u.nonLinearAdsList.length;f++)if(p=u.nonLinearAdsList[f],p.nonLinearAdList.length){g=u.startTimeInSeconds;var y=e.G.get(b5(p.nonLinearAdList[0]));if(g<=n&&y&&y.length){yf(e),g=e,y=C(y);for(var w=y.next();!w.done;w=y.next())if(w=w.value,w.data.source.length){var b=document.createElement("img");b.src=w.data.source[0].url,b.style.top=(w.placeholder.top||0)+"%",b.style.height=100-(w.placeholder.top||0)+"%",b.style.left=(w.placeholder.left||0)+"%",b.style.maxWidth=100-(w.placeholder.left||0)+"%",b.style.objectFit="contain",b.style.position="absolute",g.D.appendChild(b)}e.L=u,e.g=new We(p,f+1,u.ads.length,!1,e.h),e.F=p,f===0&&wi(e,"breakStart"),C5(e);break}}}s&&!e.g&&(n=e.h.currentTime,e.C&&e.C>n&&(e.h.currentTime=e.C),e.C=null)}}}function yf(e){if(e.g){for(;e.D.lastChild;)e.D.removeChild(e.D.firstChild);e.J||e.M.push(e.F.adId);var n=e.g.m;n!==void 0&&n?wi(e,"skip"):wi(e,"complete"),n=C(e.m);for(var s=n.next();!s.done;s=n.next())s=s.value,e.u.Ea(s.target,s.type,s.listener);e.m=[],e.A=[],n=e.g.getPositionInSequence(),s=e.g.getSequenceLength(),n===s&&wi(e,"breakEnd"),e.g=null,e.F=null,e.L=null}}function C5(e){var n=!1;e.h.paused?n=!0:(wi(e,"impression"),wi(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&wi(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||wi(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){n?(wi(e,"impression"),wi(e,"start"),n=!1):wi(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){wi(e,"pause")}});for(var s=C(e.m),a=s.next();!a.done;a=s.next())a=a.value,e.u.o(a.target,a.type,a.listener)}function wi(e,n){var s=e.F.trackingEvents.find(function(f){return f.eventType==n});if(s||(s=e.L.adBreakTrackingEvents.find(function(f){return f.eventType==n})),s){var a={type:10};s=C(s.beaconUrls);for(var u=s.next();!u.done;u=s.next())(u=u.value)&&u!=""&&(u=Kn([u],bo()),u.method="POST",e.K.request(7,u,a))}switch(n){case"impression":e.i(new _e("ad-impression"));break;case"start":e.i(new _e("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new _e("ad-muted"));break;case"unmute":e.i(new _e("ad-volume-changed"));break;case"resume":e.i(new _e("ad-resumed"));break;case"pause":e.i(new _e("ad-paused"));break;case"firstQuartile":e.i(new _e("ad-first-quartile"));break;case"midpoint":e.i(new _e("ad-midpoint"));break;case"thirdQuartile":e.i(new _e("ad-third-quartile"));break;case"complete":e.i(new _e("ad-complete")),e.i(new _e("ad-stopped"));break;case"skip":e.i(new _e("ad-skipped")),e.i(new _e("ad-stopped"));break;case"breakStart":e.D.setAttribute("ad-active","true");break;case"breakEnd":e.D.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new _e("ad-skip-state-changed"))}}function et(e,n){this.g=e,this.i=null,this.h=n}d=et.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!1},d.hasCustomClick=function(){return!0},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return this.i?this.i.duration:-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},d.isPaused=function(){return this.h.paused},d.isSkippable=function(){return this.g.isSkippable()},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.getTimeUntilSkippable()==0},d.skip=function(){this.h.currentTime+=this.getRemainingTime()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.play()},d.getVolume=function(){return this.h.volume},d.setVolume=function(e){this.h.volume=e},d.isMuted=function(){return this.h.muted},d.isLinear=function(){return!0},d.resize=function(){},d.setMuted=function(e){this.h.muted=e},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},d.release=function(){this.h=this.i=this.g=null},xe("shaka.ads.ServerSideAd",et),et.prototype.release=et.prototype.release,et.prototype.getPodIndex=et.prototype.getPodIndex,et.prototype.getTimeOffset=et.prototype.getTimeOffset,et.prototype.getMediaUrl=et.prototype.getMediaUrl,et.prototype.getAdvertiserName=et.prototype.getAdvertiserName,et.prototype.getCreativeAdId=et.prototype.getCreativeAdId,et.prototype.getAdId=et.prototype.getAdId,et.prototype.getVastAdId=et.prototype.getVastAdId,et.prototype.getVastMediaWidth=et.prototype.getVastMediaWidth,et.prototype.getVastMediaHeight=et.prototype.getVastMediaHeight,et.prototype.getVastMediaBitrate=et.prototype.getVastMediaBitrate,et.prototype.getDescription=et.prototype.getDescription,et.prototype.getTitle=et.prototype.getTitle,et.prototype.getPositionInSequence=et.prototype.getPositionInSequence,et.prototype.getSequenceLength=et.prototype.getSequenceLength,et.prototype.setMuted=et.prototype.setMuted,et.prototype.resize=et.prototype.resize,et.prototype.isLinear=et.prototype.isLinear,et.prototype.isMuted=et.prototype.isMuted,et.prototype.setVolume=et.prototype.setVolume,et.prototype.getVolume=et.prototype.getVolume,et.prototype.play=et.prototype.play,et.prototype.pause=et.prototype.pause,et.prototype.skip=et.prototype.skip,et.prototype.canSkipNow=et.prototype.canSkipNow,et.prototype.getTimeUntilSkippable=et.prototype.getTimeUntilSkippable,et.prototype.isSkippable=et.prototype.isSkippable,et.prototype.isPaused=et.prototype.isPaused,et.prototype.getRemainingTime=et.prototype.getRemainingTime,et.prototype.getMinSuggestedDuration=et.prototype.getMinSuggestedDuration,et.prototype.getDuration=et.prototype.getDuration,et.prototype.isUsingAnotherMediaElement=et.prototype.isUsingAnotherMediaElement,et.prototype.hasCustomClick=et.prototype.hasCustomClick,et.prototype.isClientRendering=et.prototype.isClientRendering,et.prototype.needsSkipUI=et.prototype.needsSkipUI;function k5(e,n,s,a){var u=this;this.A=e,this.l=n,this.j=null,this.G=NaN,this.i=a,this.H=!1,this.C=this.m=this.u=null,this.D="",this.F=[],this.h=new Dt,e=new google.ima.dai.api.UiSettings,e.setLocale(s),this.g=new google.ima.dai.api.StreamManager(this.l,this.A,e),this.i(new _e("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(f){Wee(u,f)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.D.length?u.j.resolve(u.D):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(f){f=f.getAd(),u.m=new et(f,u.l),u.C&&(u.m.i=u.C),u.i(new _e("ad-started",new Map().set("ad",u.m))),u.A.setAttribute("ad-active","true")}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.A.removeAttribute("ad-active");var f=u.l.currentTime;u.u&&u.u>f&&(u.l.currentTime=u.u,u.u=null)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(f){u.C=f.getStreamData().adProgressData,u.m&&(u.m.i=u.C)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new _e("ad-first-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new _e("ad-midpoint"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new _e("ad-third-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new _e("ad-complete")),u.i(new _e("ad-stopped")),u.A.removeAttribute("ad-active"),u.m=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new _e("ad-skipped")),u.i(new _e("ad-stopped"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(f){var p=f.getStreamData();f=[],p=C(p.cuepoints);for(var g=p.next();!g.done;g=p.next())g=g.value,f.push({start:g.start,end:g.end});u.F=f,u.i(new _e("ad-cue-points-changed",new Map().set("cuepoints",f)))})}d=k5.prototype,d.configure=function(){},d.stop=function(){this.D="",this.u=null,this.F=[]},d.release=function(){this.stop(),this.h&&this.h.release()},d.onCueMetadataChange=function(e){if(e.key&&e.data){var n={};n[e.key]=e.data,this.g.onTimedMetadata(n)}},d.getCuePoints=function(){return this.F};function Wee(e,n){e.i(new _e("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),n=n.getStreamData().url,e.j.resolve(n),e.j=null,e.H||e.h.o(e.l,"seeked",function(){var s=e.l.currentTime;if(s!=0){e.g.streamTimeForContentTime(s);var a=e.g.previousCuePointForStreamTime(s);a&&!a.played&&(e.u=s,e.l.currentTime=a.start)}})}function Oe(){Tt.call(this),this.h=this.i=this.j=this.g=null,this.m=new p5,this.u=navigator.language,this.l=null}V(Oe,Tt),d=Oe.prototype,d.setLocale=function(e){this.u=e},d.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},d.initInterstitial=function(e,n,s){var a=this;this.g&&this.g.release(),this.g=new y5(e,n,s,function(u){return K1(a,u)}),this.g.configure(this.l)},d.initClientSide=function(e,n,s){var a=this;if(!l.google||!google.ima||!google.ima.AdsLoader)throw new oe(2,10,1e4);this.j&&this.j.release(),this.j=new V1(e,n,this.u,s,function(u){return K1(a,u)}),this.j.configure(this.l)},d.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),Tt.prototype.release.call(this)},d.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new _e("ad-stopped")),this.dispatchEvent(new _e("ad-content-attach-requested")),this.m=new p5},d.requestClientSideAds=function(e){if(!this.j)throw new oe(1,10,10001);var n=this.j;n.g&&n.g.destroy(),n.m&&n.m.contentComplete(),n.H=Date.now()/1e3,n.m.requestAds(e)},d.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new oe(1,10,10001);var n=this.j;n.D=e,n.g&&n.g.updateAdsRenderingSettings(n.D)},d.initMediaTailor=function(e,n,s){var a=this;this.i&&this.i.release(),this.i=new kg(e,n,s,function(u){return K1(a,u)})},d.requestMediaTailorStream=function(e,n,s){if(!this.i)throw new oe(1,10,10005);var a=this.i;return s=s===void 0?"":s,a.l?e=Promise.reject(new oe(1,10,10004)):(a.l=new en,Hee(a,e,n),a.I=s||"",a.P=Date.now()/1e3,e=a.l),e},d.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new oe(1,10,10005);var n=this.i;n.H=e,n.i(new _e("ads-loaded",new Map().set("loadTime",0)))},d.initServerSide=function(e,n){var s=this;if(!l.google||!google.ima||!google.ima.dai)throw new oe(2,10,10002);this.h&&this.h.release(),this.h=new k5(e,n,this.u,function(a){return K1(s,a)}),this.h.configure(this.l)},d.requestServerSideStream=function(e,n){if(n=n===void 0?"":n,!this.h)throw new oe(1,10,10003);e.adTagParameters||(e.adTagParameters={});var s=e.adTagParameters;return(s.mpt||s.mpv)&&$e('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.16.12",s=this.h,s.j?e=Promise.reject(new oe(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(s.H=!0),s.j=new en,s.g.requestStream(e),s.D=n||"",s.G=Date.now()/1e3,e=s.j),e},d.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new oe(1,10,10003);(e.mpt||e.mpv)&&$e('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.16.12",this.h.g.replaceAdTagParameters(e)},d.getServerSideCuePoints=function(){return Nt("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},d.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},d.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:Pee(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},d.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},d.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},d.onHlsTimedMetadata=function(e,n){this.h&&this.h.g.processMetadata("ID3",e.data,n)},d.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},d.onHLSInterstitialMetadata=function(e,n,s){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,n),this.g&&Uee(this.g,s))},d.onDASHInterstitialMetadata=function(e,n,s){if(!this.l||!this.l.disableDASHInterstitial){var a=s.schemeIdUri;if(a=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||a=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,n),this.g&&(e=this.g,n=s.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",a=s.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",n||a)){for(var u=s.startTime,f=s.endTime,p=null,g=0,y,w=C(s.eventNode.children),b=w.next();!b.done;b=w.next())if(b=b.value,b.tagName=="AlternativeMPD"){if(b=b.attributes.uri){y=b;break}}else if(b.tagName=="InsertPresentation"||b.tagName=="ReplacePresentation"){var I=b.attributes.url;if(I){y=yi(I),(w=rt(b,"maxDuration",Or))&&(p=w/s.timescale),(w=rt(b,"returnOffset",Or))&&(g=w/s.timescale),n&&g&&(f=u+g);break}}y&&Cg(e,[{id:s.id,groupId:null,startTime:u,endTime:f,uri:y,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:a?g:null,playoutLimit:p,once:!1,pre:!1,post:!1,timelineRange:n&&!a,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}])}}else(a=="urn:mpeg:dash:event:2012"||a=="urn:scte:dash:scte214-events")&&s.eventNode&&fn(s.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,n),this.g&&Fee(this.g,s))}},d.addCustomInterstitial=function(e){if(!this.g)throw new oe(1,10,10006);Cg(this.g,[e])},d.addAdUrlInterstitial=function(e){if(!this.g)throw new oe(1,10,10006);return this.g.addAdUrlInterstitial(e)},d.getInterstitialPlayer=function(){if(!this.g)throw new oe(1,10,10006);return this.g.Xb()};function K1(e,n){if(n&&n.type)switch(n.type){case"ads-loaded":e.m.g.push(n.loadTime);break;case"ad-started":e.m.h++;var s=n.ad;s&&!s.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(n)}xe("shaka.ads.AdManager",Oe),Oe.prototype.getInterstitialPlayer=Oe.prototype.getInterstitialPlayer,Oe.prototype.addAdUrlInterstitial=Oe.prototype.addAdUrlInterstitial,Oe.prototype.addCustomInterstitial=Oe.prototype.addCustomInterstitial,Oe.prototype.onDASHInterstitialMetadata=Oe.prototype.onDASHInterstitialMetadata,Oe.prototype.onHLSInterstitialMetadata=Oe.prototype.onHLSInterstitialMetadata,Oe.prototype.onCueMetadataChange=Oe.prototype.onCueMetadataChange,Oe.prototype.onHlsTimedMetadata=Oe.prototype.onHlsTimedMetadata,Oe.prototype.onDashTimedMetadata=Oe.prototype.onDashTimedMetadata,Oe.prototype.onManifestUpdated=Oe.prototype.onManifestUpdated,Oe.prototype.getStats=Oe.prototype.getStats,Oe.prototype.getCuePoints=Oe.prototype.getCuePoints,Oe.prototype.getServerSideCuePoints=Oe.prototype.getServerSideCuePoints,Oe.prototype.replaceServerSideAdTagParameters=Oe.prototype.replaceServerSideAdTagParameters,Oe.prototype.requestServerSideStream=Oe.prototype.requestServerSideStream,Oe.prototype.initServerSide=Oe.prototype.initServerSide,Oe.prototype.addMediaTailorTrackingUrl=Oe.prototype.addMediaTailorTrackingUrl,Oe.prototype.requestMediaTailorStream=Oe.prototype.requestMediaTailorStream,Oe.prototype.initMediaTailor=Oe.prototype.initMediaTailor,Oe.prototype.updateClientSideAdsRenderingSettings=Oe.prototype.updateClientSideAdsRenderingSettings,Oe.prototype.requestClientSideAds=Oe.prototype.requestClientSideAds,Oe.prototype.onAssetUnload=Oe.prototype.onAssetUnload,Oe.prototype.release=Oe.prototype.release,Oe.prototype.initClientSide=Oe.prototype.initClientSide,Oe.prototype.initInterstitial=Oe.prototype.initInterstitial,Oe.prototype.configure=Oe.prototype.configure,Oe.prototype.setLocale=Oe.prototype.setLocale,Oe.ADS_LOADED="ads-loaded",Oe.AD_STARTED="ad-started",Oe.AD_FIRST_QUARTILE="ad-first-quartile",Oe.AD_MIDPOINT="ad-midpoint",Oe.AD_THIRD_QUARTILE="ad-third-quartile",Oe.AD_COMPLETE="ad-complete",Oe.AD_STOPPED="ad-stopped",Oe.AD_SKIPPED="ad-skipped",Oe.AD_VOLUME_CHANGED="ad-volume-changed",Oe.AD_MUTED="ad-muted",Oe.AD_PAUSED="ad-paused",Oe.AD_RESUMED="ad-resumed",Oe.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Oe.CUEPOINTS_CHANGED="ad-cue-points-changed",Oe.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Oe.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Oe.AD_CLICKED="ad-clicked",Oe.AD_PROGRESS="ad-progress",Oe.AD_BUFFERING="ad-buffering",Oe.AD_IMPRESSION="ad-impression",Oe.AD_DURATION_CHANGED="ad-duration-changed",Oe.AD_CLOSED="ad-closed",Oe.AD_LOADED="ad-loaded",Oe.ALL_ADS_COMPLETED="all-ads-completed",Oe.AD_LINEAR_CHANGED="ad-linear-changed",Oe.AD_METADATA="ad-metadata",Oe.AD_RECOVERABLE_ERROR="ad-recoverable-error",Oe.AD_ERROR="ad-error",Oe.AD_BREAK_READY="ad-break-ready",Oe.AD_INTERACTION="ad-interaction",Oe.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Oe.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Oe.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",B1=function(){return new Oe};function Y2(e){return JSON.stringify(e,function(n,s){if(typeof s!="function"){if(n=s instanceof _e,s instanceof Event||n){var a={};for(f in s){var u=s[f];u&&typeof u=="object"?f=="detail"?a[f]=u:u instanceof Event||u instanceof _e?a[f]={__type__:"Event",event:Y2(u)}:n&&Array.isArray(u)&&(a[f]=u):f in Event||(a[f]=u)}return a}if(s instanceof Error){var f=new Set(["name","message","stack"]);for(a in s)f.add(a);for(n=C(Object.getOwnPropertyNames(s)),a=n.next();!a.done;a=n.next())f.add(a.value);for(n={},f=C(f),a=f.next();!a.done;a=f.next())a=a.value,n[a]=s[a];s={__type__:"Error",contents:n}}else if(s instanceof TimeRanges){for(f={__type__:"TimeRanges",length:s.length,start:[],end:[]},s=C(Cl(s)),n=s.next();!n.done;n=s.next())n=n.value,a=n.end,f.start.push(n.start),f.end.push(a);s=f}else s=ArrayBuffer.isView(s)&&s.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(s)}:typeof s=="number"?isNaN(s)?"NaN":isFinite(s)?s:s<0?"-Infinity":"Infinity":s;return s}})}function z1(e){return JSON.parse(e,function(n,s){if(s=="NaN")var a=NaN;else if(s=="-Infinity")a=-1/0;else if(s=="Infinity")a=1/0;else if(s&&typeof s=="object"&&s.__type__=="TimeRanges")a=Yee(s);else if(s&&typeof s=="object"&&s.__type__=="Uint8Array")a=new Uint8Array(s.entries);else if(s&&typeof s=="object"&&s.__type__=="Error"){n=s.contents,s=Error(n.message);for(a in n)s[a]=n[a];a=s}else a=s&&typeof s=="object"&&s.__type__=="Event"?z1(s.event):s;return a})}function Yee(e){return{length:e.length,start:function(n){return e.start[n]},end:function(n){return e.end[n]}}}var _5="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Xee="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),X2=["loop","playbackRate"],Qee=["pause","play"],Q2=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1).set("getBandwidthEstimate",1).set("isRemotePlayback",1),J2=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),R5=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),L5=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],P5=[["isTextTrackVisible","setTextTrackVisibility"]],Jee="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),Zee="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function Z2(e,n,s,a,u,f,p){var g=this;this.H=e,this.K=p,this.l=new Ke(n),this.L=s,this.A=!1,this.C=a,this.G=u,this.M=f,this.i=this.m=!1,this.J="",this.u=null,this.D=function(){return eA(g)},this.F=function(y,w){switch(y=z1(w),y.type){case"event":var b=y.targetName,I=_r(y.event);g.C(b,I);break;case"update":b=y.update;for(I in b){y=g.g[I]||{};for(var L in b[I])y[L]=b[I][L]}g.A&&(g.L(),g.A=!1);break;case"asyncComplete":if(L=y.id,I=y.error,w=y.res,y=g.h.get(L),g.h.delete(L),y)if(I){L=new oe(I.severity,I.category,I.code);for(b in I)L[b]=I[b];y.reject(L)}else y.resolve(w)}},this.g={video:{},player:{}},this.I=0,this.h=new Map,this.j=null,Rg.add(this)}d=Z2.prototype,d.destroy=function(){return Rg.delete(this),tA(this),Co&&N5(this),this.l&&(this.l.stop(),this.l=null),this.G=this.C=null,this.i=this.m=!1,this.F=this.D=this.j=this.h=this.g=this.u=null,Promise.resolve()},d.Pa=function(){return this.i},d.cg=function(){return this.J},d.init=function(){if(this.H.length)if(l.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Ka();var e=new chrome.cast.SessionRequest(this.H,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(n){for(var s=C(Rg),a=s.next();!a.done;a=s.next()){a=a.value;var u=n;a.j=new en,a.A=!0,W1(a,u)}},function(n){for(var s=C(Rg),a=s.next();!a.done;a=s.next())a=a.value,Y1=n=="available",a.l.Ka()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Y1&&this.l.Y(tte),(e=Co)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new en,this.A=!0,W1(this,e)):Co=null}else l.__onGCastApiAvailable!==M5&&(X1=l.__onGCastApiAvailable||null,l.__onGCastApiAvailable=M5)},d.gi=function(e){this.u=e,this.i&&_g(this,{type:"appData",appData:this.u})},d.cast=function(){var e=this;return X(function(n){if(!e.m)throw new oe(1,8,8e3);if(!Y1)throw new oe(1,8,8001);if(e.i)throw new oe(1,8,8002);return e.j=new en,chrome.cast.requestSession(function(s){return W1(e,s)},function(s){return D5(e,s)}),O(n,e.j,0)})};function ete(e){e.i&&chrome.cast.requestSession(function(n){return W1(e,n)},function(n){return D5(e,n)})}d.Id=function(){if(this.i){if(tA(this),Co){N5(this);try{Co.stop(function(){},function(){})}catch{}Co=null}eA(this)}},d.get=function(e,n){var s=this;if(e=="video"){if(Qee.includes(n))return function(){return s.Fj.apply(s,[e,n].concat(K(Pe.apply(0,arguments))))}}else if(e=="player"){if(R5.has(n)&&!this.get("player","isLive")())return function(){};if(Jee.includes(n))return function(){return s.Fj.apply(s,[e,n].concat(K(Pe.apply(0,arguments))))};if(Zee.includes(n))return function(){return s.im.apply(s,[e,n].concat(K(Pe.apply(0,arguments))))};if(Q2.has(n)||J2.has(n))return function(){return s.g[e][n]}}return this.g[e][n]},d.set=function(e,n,s){this.g[e][n]=s,_g(this,{type:"set",targetName:e,property:n,value:s})};function W1(e,n){var s=e.M();Co=n,n.addUpdateListener(e.D),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.F),eA(e),_g(e,{type:"init",initState:s,appData:e.u}),e.j.resolve()}function D5(e,n){var s=8003;switch(n.code){case"cancel":s=8004;break;case"timeout":s=8005;break;case"receiver_unavailable":s=8006}e.j.reject(new oe(2,8,s,n))}d.Fj=function(e,n){_g(this,{type:"call",targetName:e,methodName:n,args:Pe.apply(2,arguments)})},d.im=function(e,n){var s=Pe.apply(2,arguments),a=new en,u=this.I.toString();this.I++,this.h.set(u,a);try{_g(this,{type:"asyncCall",targetName:e,methodName:n,args:s,id:u})}catch(f){a.reject(f)}return a};function N5(e){var n=Co;n.removeUpdateListener(e.D),n.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.F)}function eA(e){var n=Co?Co.status=="connected":!1;if(e.i&&!n){e.G();for(var s in e.g)e.g[s]={};tA(e)}e.i=n,e.J=n?Co.receiver.friendlyName:"",e.l.Ka()}function tA(e){if(e.h)for(var n=C(e.h.keys()),s=n.next();!s.done;s=n.next()){s=s.value;var a=e.h.get(s);e.h.delete(s),a.reject(new oe(1,7,7e3))}}function _g(e,n){n=Y2(n);var s=Co;try{s.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},Tu)}catch(a){throw n=new oe(2,8,8005,a),s=new _e("error",new Map().set("detail",n)),e.C("player",s),e.Id(),n}}var tte=.02,Y1=!1,Co=null,X1=null,Rg=new Set;function M5(e){if(X1?l.__onGCastApiAvailable=X1:delete l.__onGCastApiAvailable,X1=null,e)for(var n=C(Rg),s=n.next();!s.done;s=n.next())s.value.init();typeof l.__onGCastApiAvailable=="function"&&l.__onGCastApiAvailable(e)}function $n(e,n,s,a){a=a===void 0?!1:a,Tt.call(this);var u=this;this.i=e,this.h=n,this.l=this.u=this.m=this.A=this.j=null,this.I=s,this.H=a,this.F=[],this.D=[],this.C=[],this.G=new Map,this.g=null,l.chrome&&ht().Oa()!="CAST"?(this.g=new Z2(s,function(){return U5(u)},function(){return F5(u)},function(f,p){return $5(u,f,p)},function(){return B5(u)},function(){return j5(u)},a),nte(this)):(this.j=this.i,this.A=this.h)}V($n,Tt),d=$n.prototype,d.destroy=function(e){return this.g&&(e!==void 0&&e)&&this.g.Id(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.A=this.j=this.i=null,Tt.prototype.release.call(this),Promise.all(e)},d.Wc=function(){return this.j},d.Xb=function(){return this.A},d.Pg=function(){return this.g?this.g.m&&Y1:!1},d.Pa=function(){return this.g?this.g.Pa():!1},d.cg=function(){return this.g?this.g.cg():""},d.cast=function(){var e=this;return X(function(n){return n.g==1?e.g?O(n,e.g.cast(),2):n.return():e.h?O(n,e.h.wc(),0):n.return()})},d.gi=function(e){this.g&&this.g.gi(e)},d.bk=function(){this.g&&ete(this.g)},d.Id=function(){this.g&&this.g.Id()},d.Si=function(e,n){n=n===void 0?!1:n;var s=this;return X(function(a){if(a.g==1)return e==s.I&&n==s.H||(s.I=e,s.H=n,!s.g)?a.return():(s.g.Id(),O(a,s.g.destroy(),2));s.g=null,s.g=new Z2(e,function(){return U5(s)},function(){return F5(s)},function(u,f){return $5(s,u,f)},function(){return B5(s)},function(){return j5(s)},n),s.g.init(),re(a)})};function nte(e){e.g.init(),e.l=new Dt;for(var n=C(_5),s=n.next();!s.done;s=n.next())e.l.o(e.i,s.value,function(f){e.g.Pa()||(f=_r(f),e.m.dispatchEvent(f))});for(var a in qr)e.l.o(e.h,qr[a],function(f){e.g.Pa()||e.u.dispatchEvent(f)});e.j={},n={};for(var u in e.i)n={Be:n.Be},n.Be=u,Object.defineProperty(e.j,n.Be,{configurable:!1,enumerable:!0,get:function(f){return function(){return ite(e,f.Be)}}(n),set:function(f){return function(p){var g=f.Be;e.g.Pa()?e.g.set("video",g,p):e.i[g]=p}}(n)});e.A={},O5(e,function(f){Object.defineProperty(e.A,f,{configurable:!1,enumerable:!0,get:function(){return Q1(e,f)}})}),rte(e),e.m=new Tt,e.m.cf=e.j,e.u=new Tt,e.u.cf=e.A,e.l.o(e.h,"unloading",function(){e.g&&e.g.Pa()||nA(e)})}function rte(e){var n=new Map;O5(e,function(s,a){n.has(a)?(a=n.get(a),s.length<a.length?e.G.set(s,a):e.G.set(a,s)):n.set(a,s)})}function O5(e,n){function s(y){return y=="constructor"||typeof a[y]!="function"?!1:!u.has(y)}var a=e.h,u=new Set,f;for(f in a)s(f)&&(u.add(f),n(f,a[f]));for(e=Object.getPrototypeOf(a),f=Object.getPrototypeOf({});e&&e!=f;){for(var p=C(Object.getOwnPropertyNames(e)),g=p.next();!g.done;g=p.next())g=g.value,s(g)&&(u.add(g),n(g,a[g]));e=Object.getPrototypeOf(e)}}function j5(e){var n={video:{},player:{},playerAfterLoad:{},manifest:e.h.jd(),startTime:null,addThumbnailsTrackCalls:e.F,addTextTrackAsyncCalls:e.D,addChaptersTrackCalls:e.C};e.i.pause();for(var s=C(X2),a=s.next();!a.done;a=s.next())a=a.value,n.video[a]=e.i[a];for(e.i.ended||(n.startTime=e.i.currentTime),s=C(L5),a=s.next();!a.done;a=s.next()){var u=a.value;a=u[1],u=e.h[u[0]](),n.player[a]=u}for(s=C(P5),a=s.next();!a.done;a=s.next())u=a.value,a=u[1],u=e.h[u[0]](),n.playerAfterLoad[a]=u;return n}function U5(e){var n=new _e("caststatuschanged");e.dispatchEvent(n)}function F5(e){var n=new _e(e.j.paused?"pause":"play");e.m.dispatchEvent(n)}function B5(e){for(var n=C(L5),s=n.next();!s.done;s=n.next()){var a=s.value;s=a[1],a=e.g.get("player",a[0])(),e.h[s](a)}var u=e.F,f=e.D,p=e.C;nA(e);var g=e.g.get("player","getAssetUri")();a=e.g.get("video","ended"),n=Promise.resolve();var y=e.i.autoplay;s=null,a||(s=e.g.get("video","currentTime"));var w;(a=e.g.get("player","getTextTracks")())&&a.length&&(w=a.find(function(L){return L.active}));var b=e.g.get("player","isTextTrackVisible")();g&&(e.i.autoplay=!1,n=e.h.load(g,s));var I={};for(s=C(X2),a=s.next();!a.done;a=s.next())a=a.value,I[a]=e.g.get("video",a);n.then(function(){if(e.i){for(var L=C(u),j=L.next();!j.done;j=L.next()){j=j.value;var U;(U=e.Xb()).kf.apply(U,K(j))}for(L=C(f),U=L.next();!U.done;U=L.next()){U=U.value;var F;(F=e.Xb()).le.apply(F,K(U))}for(F=C(p),L=F.next();!L.done;L=F.next()){L=L.value;var B;(B=e.Xb()).jf.apply(B,K(L))}for(B=C(X2),F=B.next();!F.done;F=B.next())F=F.value,e.i[F]=I[F];for(B=C(P5),F=B.next();!F.done;F=B.next())L=F.value,F=L[1],L=e.g.get("player",L[0])(),e.h[F](L);e.h.ae(b),w&&e.h.ei(w.language,w.roles,w.forced),e.i.autoplay=y,g&&e.i.play()}},function(L){L=new Map().set("detail",L),L=new _e("error",L),e.h.dispatchEvent(L)})}function ite(e,n){if(n=="addEventListener")return function(a,u,f){return e.m.addEventListener(a,u,f)};if(n=="removeEventListener")return function(a,u,f){return e.m.removeEventListener(a,u,f)};if(e.g.Pa()&&Object.keys(e.g.g.video).length==0){var s=e.i[n];if(typeof s!="function")return s}return e.g.Pa()?e.g.get("video",n):(n=e.i[n],typeof n=="function"&&(n=n.bind(e.i)),n)}function Q1(e,n,s){if(s=s===void 0?!1:s,e.G.has(n)&&(n=e.G.get(n)),n=="addEventListener")return function(a,u,f){return e.u.addEventListener(a,u,f)};if(n=="removeEventListener")return function(a,u,f){return e.u.removeEventListener(a,u,f)};if(n=="getMediaElement")return function(){return e.j};if(n=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(n=="getNetworkingEngine")return function(){return e.h.Wb()};if(n=="getDrmEngine")return function(){return e.h.F};if(n=="getAdManager")return function(){return e.h.xf()};if(n=="getQueueManager")return function(){return e.h.Af()};if(n=="setVideoContainer")return function(a){return e.h.ni(a)};if(!s){if(n=="addThumbnailsTrack")return function(){var a=Pe.apply(0,arguments);return e.F.push(a),Q1(e,n,!0).apply(null,K(a))};if(n=="addTextTrackAsync")return function(){var a=Pe.apply(0,arguments);return e.D.push(a),Q1(e,n,!0).apply(null,K(a))};if(n=="addChaptersTrack")return function(){var a=Pe.apply(0,arguments);return e.C.push(a),Q1(e,n,!0).apply(null,K(a))}}if(e.g.Pa()){if(n=="getManifest"||n=="drmInfo")return function(){return $e(n+"() does not work while casting!"),null};if(n=="attach"||n=="detach")return function(){return $e(n+"() does not work while casting!"),Promise.resolve()};if(n=="getChapters")return function(){return $e(n+"() does not work while casting!"),[]}}return e.g.Pa()&&Object.keys(e.g.g.video).length==0&&(Q2.has(n)||J2.has(n))||!e.g.Pa()?e.h[n].bind(e.h):e.g.get("player",n)}function $5(e,n,s){e.g.Pa()&&(n=="video"?e.m.dispatchEvent(s):n=="player"&&(s.type=="unloading"&&nA(e),e.u.dispatchEvent(s)))}function nA(e){e.F=[],e.D=[],e.C=[]}xe("shaka.cast.CastProxy",$n),$n.prototype.changeReceiverId=$n.prototype.Si,$n.prototype.forceDisconnect=$n.prototype.Id,$n.prototype.suggestDisconnect=$n.prototype.bk,$n.prototype.setAppData=$n.prototype.gi,$n.prototype.cast=$n.prototype.cast,$n.prototype.receiverName=$n.prototype.cg,$n.prototype.isCasting=$n.prototype.Pa,$n.prototype.canCast=$n.prototype.Pg,$n.prototype.getPlayer=$n.prototype.Xb,$n.prototype.getVideo=$n.prototype.Wc,$n.prototype.destroy=$n.prototype.destroy;function Zr(e,n,s,a){Tt.call(this);var u=this;this.h=e,this.g=n,this.j=new Dt,this.I={video:e,player:n},this.G=s||function(){},this.J=a||function(f){return f},this.i=null,this.H=!1,this.u=!0,this.m=0,this.D=!1,this.C=!0,this.A=this.l=null,this.F=new Ke(function(){rA(u)}),ste(this)}V(Zr,Tt),d=Zr.prototype,d.isConnected=function(){return this.H},d.Hl=function(){return this.u},d.vm=function(e){this.i=e},d.Ak=function(){this.i=null},d.wm=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},d.um=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},d.tm=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},d.destroy=function(){var e=this,n,s;return X(function(a){if(a.g==1)return e.j&&(e.j.release(),e.j=null),n=[],e.g&&(n.push(e.g.destroy()),e.g=null),e.F&&(e.F.stop(),e.F=null),e.h=null,e.I=null,e.G=null,e.H=!1,e.u=!0,e.l=null,e.A=null,Tt.prototype.release.call(e),O(a,Promise.all(n),2);s=cast.receiver.CastReceiverManager.getInstance(),s.stop(),re(a)})};function ste(e){var n=cast.receiver.CastReceiverManager.getInstance();n.onSenderConnected=function(){return V5(e)},n.onSenderDisconnected=function(){return V5(e)},n.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&Dl(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),Dl(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.A=n.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.A.onMessage=function(u){return lte(e,u)},e.l=n.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return ate(e,u)},n.start(),n=C(_5);for(var s=n.next();!s.done;s=n.next())e.j.o(e.h,s.value,function(u){return G5(e,"video",u)});for(var a in qr)e.j.o(e.g,qr[a],function(u){return G5(e,"player",u)});e.j.o(e.h,"loadeddata",function(){e.D=!0}),e.j.o(e.g,"loading",function(){e.u=!1,xf(e)}),e.j.o(e.h,"playing",function(){e.u=!1,xf(e)}),e.j.o(e.h,"pause",function(){xf(e)}),e.j.o(e.g,"unloading",function(){e.u=!0,xf(e)}),e.j.o(e.h,"ended",function(){new Ke(function(){e.h&&e.h.ended&&(e.u=!0,xf(e))}).Y(cte)})}function V5(e){e.m=0,e.C=!0,e.H=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,xf(e)}function xf(e){var n;X(function(s){if(s.g==1)return O(s,Promise.resolve(),2);if(!e.g)return s.return();n=new _e("caststatuschanged"),e.dispatchEvent(n),H5(e)||Nl(e),re(s)})}function ote(e,n,s){var a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie;X(function(Y){switch(Y.g){case 1:for(a in n.player)u=n.player[a],e.g[a](u);return e.G(s),f=e.h.autoplay,n.manifest?(e.h.autoplay=!1,ce(Y,5),O(Y,e.g.load(n.manifest,n.startTime),7)):O(Y,Promise.resolve(),3);case 7:if(n.addThumbnailsTrackCalls)for(p=C(n.addThumbnailsTrackCalls),g=p.next();!g.done;g=p.next())y=g.value,e.g.kf.apply(e.g,K(y));if(n.addTextTrackAsyncCalls)for(w=C(n.addTextTrackAsyncCalls),b=w.next();!b.done;b=w.next())I=b.value,e.g.le.apply(e.g,K(I));if(n.addChaptersTrackCalls)for(L=C(n.addChaptersTrackCalls),j=L.next();!j.done;j=L.next())U=j.value,e.g.jf.apply(e.g,K(U));se(Y,3);break;case 5:return F=ue(Y),B=new Map().set("detail",F),q=new _e("error",B),e.g&&e.g.dispatchEvent(q),Y.return();case 3:if(!e.g)return Y.return();for(G in n.video)z=n.video[G],e.h[G]=z;for(J in n.playerAfterLoad)ie=n.playerAfterLoad[J],e.g[J](ie);e.h.autoplay=f,n.manifest&&(e.h.play(),Nl(e)),re(Y)}})}function G5(e,n,s){e.g&&(rA(e),Dl(e,{type:"event",targetName:n,event:s},e.l))}function rA(e){e.F.Y(ute);for(var n={video:{},player:{}},s=C(Xee),a=s.next();!a.done;a=s.next())a=a.value,n.video[a]=e.h[a];e.g.U()&&R5.forEach(function(u,f){e.m%u==0&&(n.player[f]=e.g[f]())}),Q2.forEach(function(u,f){e.m%u==0&&(n.player[f]=e.g[f]())}),(s=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(n.video.volume=s.level,n.video.muted=s.muted),Dl(e,{type:"update",update:n},e.l),J2.forEach(function(u,f){e.m%u==0&&(u={player:{}},u.player[f]=e.g[f](),Dl(e,{type:"update",update:u},e.l))}),e.D&&(e.m+=1),H5(e)}function H5(e){return e.C&&(e.h.duration||e.g.U())?(iA(e),e.C=!1,!0):!1}function iA(e,n){var s={contentId:e.g.jd(),streamType:e.g.U()?"LIVE":"BUFFERED",contentType:""};e.g.U()||(s.duration=e.h.duration),e.i&&(s.metadata=e.i),Nl(e,n===void 0?0:n,s)}function ate(e,n){var s=z1(n.data);switch(s.type){case"init":e.m=0,e.D=!1,e.C=!0,ote(e,s.initState,s.appData),rA(e);break;case"appData":e.G(s.appData);break;case"set":var a=s.targetName,u=s.property;if(s=s.value,a=="video"){if(n=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){n.setSystemVolumeLevel(s);break}else if(u=="muted"){n.setSystemVolumeMuted(s);break}}e.I[a][u]=s;break;case"call":a=e.I[s.targetName],a[s.methodName].apply(a,s.args);break;case"asyncCall":a=s.targetName,u=s.methodName,a=="player"&&u=="load"&&(e.m=0,e.D=!1);var f=s.id,p=n.senderId;n=e.I[a],s=n[u].apply(n,s.args),a=="player"&&u=="load"&&(s=s.then(function(){e.C=!0})),s.then(function(g){return q5(e,p,f,null,g)},function(g){return q5(e,p,f,g,null)})}}function lte(e,n){var s=z1(n.data);switch(s.type){case"PLAY":e.h.play(),Nl(e);break;case"PAUSE":e.h.pause(),Nl(e);break;case"SEEK":n=s.currentTime;var a=s.resumeState;n!=null&&(e.h.currentTime=Number(n)),a&&a=="PLAYBACK_START"?(e.h.play(),Nl(e)):a&&a=="PLAYBACK_PAUSE"&&(e.h.pause(),Nl(e));break;case"STOP":e.g.wc().then(function(){e.g&&Nl(e)});break;case"GET_STATUS":iA(e,Number(s.requestId));break;case"VOLUME":a=s.volume,n=a.level,a=a.muted;var u=e.h.volume,f=e.h.muted;n!=null&&(e.h.volume=Number(n)),a!=null&&(e.h.muted=a),u==e.h.volume&&f==e.h.muted||Nl(e);break;case"LOAD":e.m=0,e.D=!1,e.C=!1,n=s.media,a=s.currentTime,u=e.J(n.contentId),f=s.autoplay||!0,e.G(n.customData),f&&(e.h.autoplay=!0),e.g.load(u,a).then(function(){e.g&&iA(e)}).catch(function(p){var g="LOAD_FAILED";p.category==7&&p.code==7e3&&(g="LOAD_CANCELLED"),Dl(e,{requestId:Number(s.requestId),type:g},e.A)});break;default:Dl(e,{requestId:Number(s.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.A)}}function q5(e,n,s,a,u){e.g&&Dl(e,{type:"asyncComplete",id:s,error:a,res:u},e.l,n)}function Dl(e,n,s,a){e.H&&(e=Y2(n),a?s.getCastChannel(a).send(e):s.broadcast(e))}function Nl(e,n,s){s=s===void 0?null:s;var a={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.u?dte:e.g.Hf()?fte:e.h.paused?pte:hte,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};s&&(a.media=s),Dl(e,{requestId:n===void 0?0:n,type:"MEDIA_STATUS",status:[a]},e.A)}xe("shaka.cast.CastReceiver",Zr),Zr.prototype.destroy=Zr.prototype.destroy,Zr.prototype.setContentArtist=Zr.prototype.tm,Zr.prototype.setContentImage=Zr.prototype.um,Zr.prototype.setContentTitle=Zr.prototype.wm,Zr.prototype.clearContentMetadata=Zr.prototype.Ak,Zr.prototype.setContentMetadata=Zr.prototype.vm,Zr.prototype.isIdle=Zr.prototype.Hl,Zr.prototype.isConnected=Zr.prototype.isConnected;var ute=.5,cte=5,dte="IDLE",hte="PLAYING",fte="BUFFERING",pte="PAUSED";function K5(e,n,s,a,u){if(a>=u)return null;for(var f=-1,p=-1,g=0;g<s.length;g++)if(s[g].some(function(J){return J!=null&&J.g.trim()!=""})){f=g;break}for(g=s.length-1;g>=0;g--)if(s[g].some(function(J){return J!=null&&J.g.trim()!=""})){p=g;break}if(f===-1||p===-1)return null;for(var y=g=!1,w="white",b="black",I=sA(a,u,g,y,w,b);f<=p;f++){for(var L=s[f],j=-1,U=-1,F=0;F<L.length;F++)if(L[F]!=null&&L[F].g.trim()!==""){j=F;break}for(F=L.length-1;F>=0;F--)if(L[F]!=null&&L[F].g.trim()!==""){U=F;break}if(j===-1||U===-1)L=z5(a,u),e.nestedCues.push(L);else{for(;j<=U;j++)if(F=L[j]){var B=F.l,q=F.i,G=F.j,z=F.h;(B!=g||q!=y||G!=w||z!=b)&&(I.payload&&e.nestedCues.push(I),I=sA(a,u,B,q,G,z),g=B,y=q,w=G,b=z),I.payload+=F.g}else I.payload+=" ";I.payload&&e.nestedCues.push(I),f!==p&&(I=z5(a,u),e.nestedCues.push(I)),I=sA(a,u,g,y,w,b)}}return e.nestedCues.length?{cue:e,stream:n}:null}function sA(e,n,s,a,u,f){return e=new cn(e,n,""),s&&e.textDecoration.push(xl),a&&(e.fontStyle=Hh),e.color=u,e.backgroundColor=f,e}function z5(e,n){return e=new cn(e,n,""),e.lineBreak=!0,e}function W5(e,n,s,a,u){this.g=e,this.l=n,this.i=s,this.h=a,this.j=u}function oA(e,n){this.i=[],this.g=1,this.h=0,this.F=e,this.D=n,this.j=this.m=!1,this.l="white",this.u="black",this.A=this.C=null,Lg(this)}function J1(e,n,s){var a="CC"+((e.F<<1|e.D)+1),u=new cn(n,s,"");u.lineInterpretation=1;var f=Q5.get(e.g);return f&&(u.line=f),e.A!=null&&e.C!=null&&(u.position=10+Math.min(70,e.A*10)+e.C*2.5),(n=K5(u,a,e.i,n,s))&&e.g+n.cue.nestedCues.length-3>15&&(f=Q5.get(e.g+3-n.cue.nestedCues.length))&&(u.line=f),n}function Lg(e){Ml(e,0,15),e.g=1}function Tf(e,n,s){if(!(s<32||s>127)){var a="";switch(n){case 0:a=X5.has(s)?X5.get(s):String.fromCharCode(s);break;case 1:a=mte.get(s);break;case 2:e.i[e.g].pop(),a=gte.get(s);break;case 3:e.i[e.g].pop(),a=vte.get(s)}a&&e.i[e.g].push(new W5(a,e.m,e.j,e.u,e.l))}}function Y5(e,n,s,a){if(!(s<0||n<0))if(n>=s)for(--a;a>=0;a--)e.i[n+a]=e.i[s+a].map(function(f){return f});else for(var u=0;u<a;u++)e.i[n+u]=e.i[s+u].map(function(f){return f})}function Ml(e,n,s){for(var a=0;a<=s;a++)e.i[n+a]=[]}var X5=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),mte=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),gte=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),vte=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Q5=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Z1(e,n){this.h=0,this.u=new oA(e,n),this.i=new oA(e,n),this.g=this.j=new oA(e,n),this.l=0,this.m=null}function aA(e,n,s){e.g=e.i;var a=e.g,u=null;return e.h!==3&&e.h!==4&&(u=J1(a,e.l,s),s=e.i,s.g=s.h>0?s.h:0,Ml(s,0,15),s=e.j,s.g=s.h>0?s.h:0,Ml(s,0,15),a.g=15),e.h=3,a.h=n,u}function J5(e){e.h=1,e.g=e.j,e.g.h=0}function Z5(e){Kr("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.u,e.h=4}var yte="black green blue cyan red yellow magenta black".split(" "),eO="white green blue cyan red yellow magenta white_italics".split(" ");function lA(e,n){this.J=n,this.M=e,this.K=this.l=!1,this.m=this.u=this.H=this.L=this.I=0,this.G=2,this.i=[],this.g=this.h=this.j=0,this.F=this.C=!1,this.D="white",this.A="black",uA(this)}function uA(e){e.i=[];for(var n=0;n<16;n++)e.i.push(cA())}function cA(){for(var e=[],n=0;n<42;n++)e.push(null);return e}function Fu(e,n){tO(e)&&(e.i[e.h][e.g]=new W5(n,e.F,e.C,e.A,e.D),e.g++)}function tO(e){var n=e.g<e.m&&e.g>=0;return e.h<e.u&&e.h>=0&&n}lA.prototype.isVisible=function(){return this.l};function xte(e){for(var n=0,s=1;s<16;s++,n++)e.i[n]=e.i[s];for(s=0;s<1;s++,n++)e.i[n]=cA()}function Cd(e,n,s){var a=new cn(e.j,n,"");a.textAlign=e.G===0?"left":e.G===1?"right":_a;var u=a.region;switch(e.J&&(u.id+="svc"+e.J),u.id+="win"+e.M,u.height=e.u,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.I,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?Zi:2,e.H){case 0:u.regionAnchorX=0,u.regionAnchorY=0;break;case 1:u.regionAnchorX=50,u.regionAnchorY=0;break;case 2:u.regionAnchorX=100,u.regionAnchorY=0;break;case 3:u.regionAnchorX=0,u.regionAnchorY=50;break;case 4:u.regionAnchorX=50,u.regionAnchorY=50;break;case 5:u.regionAnchorX=100,u.regionAnchorY=50;break;case 6:u.regionAnchorX=0,u.regionAnchorY=100;break;case 7:u.regionAnchorX=50,u.regionAnchorY=100;break;case 8:u.regionAnchorX=100,u.regionAnchorY=100}return(s=K5(a,"svc"+s,e.i,e.j,n))&&(e.j=n),s}lA.prototype.display=function(){this.l=!0};function Tte(){this.i=[],this.h=null,this.g=0}function Ste(e,n){n.type===3?(e.g=(n.value&63)*2-1,e.h=[]):e.h&&(e.g>0&&(e.h.push(n),e.g--),e.g===0&&(e.i.push(new Pg(e.h)),e.h=null,e.g=0))}function Pg(e){this.g=0,this.h=e}Pg.prototype.Qa=function(){return this.g<this.h.length},Pg.prototype.Wa=function(){return this.g};function sr(e){if(!e.Qa())throw new oe(2,2,3e3);return e.h[e.g++]}Pg.prototype.skip=function(e){if(this.g+e>this.h.length)throw new oe(2,2,3e3);this.g+=e},Pg.prototype.Jj=function(e){if(this.g-e<0)throw new oe(2,2,3e3);this.g-=e};function wte(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Ete(e,n,s,a){if(!e.g)return[];if(s==24)return s=sr(n).value,a=sr(n).value,s=function(f){return f.map(function(p){return("0"+(p&255).toString(16)).slice(-2)}).join("")}([s,a]),Fu(e.g,String.fromCharCode(parseInt(s,16))),[];n=e.g;var u=null;switch(s){case 8:!tO(n)||n.g<=0&&n.h<=0||(n.g<=0?(n.g=n.m-1,n.h--):n.g--,n.i[n.h][n.g]=null);break;case 13:n.isVisible()&&(u=Cd(n,a,e.i)),n.h+1>=n.u?xte(n):n.h++,n.g=0;break;case 14:n.isVisible()&&(u=Cd(n,a,e.i)),n.i[n.h]=cA(),n.g=0;break;case 12:n.isVisible()&&(u=Cd(n,a,e.i)),uA(n),n.h=0,n.g=0}return u?[u]:[]}function bte(e,n,s,a){if(s>=128&&s<=135)a=s&7,e.h[a]&&(e.g=e.h[a]);else{if(s===136){s=sr(n).value,n=[],s=C(Dg(e,s));for(var u=s.next();!u.done;u=s.next()){if(u=e.h[u.value],u.isVisible()){var f=Cd(u,a,e.i);f&&n.push(f)}uA(u)}return n}if(s===137)for(n=sr(n).value,n=C(Dg(e,n)),s=n.next();!s.done;s=n.next())s=e.h[s.value],s.isVisible()||(s.j=a),s.display();else{if(s===138){for(s=sr(n).value,n=null,s=C(Dg(e,s)),u=s.next();!u.done;u=s.next())u=e.h[u.value],u.isVisible()&&(n=Cd(u,a,e.i)),u.l=!1;return n?[n]:[]}if(s===139){for(s=sr(n).value,n=null,s=C(Dg(e,s)),u=s.next();!u.done;u=s.next())u=e.h[u.value],u.isVisible()?n=Cd(u,a,e.i):u.j=a,u.l=!u.l;return n?[n]:[]}if(s===140)return n=sr(n).value,nO(e,n,a);if(s===143)return a=nO(e,255,a),rO(e),a;if(s===144)n.skip(1),a=sr(n).value,e.g&&(e.g.C=(a&128)>0,e.g.F=(a&64)>0);else if(s===145)a=sr(n).value,s=sr(n).value,n.skip(1),e.g&&(n=iO((s&48)>>4,(s&12)>>2,s&3),e.g.D=iO((a&48)>>4,(a&12)>>2,a&3),e.g.A=n);else if(s===146)a=sr(n).value,n=sr(n).value,e.g&&(e=e.g,e.h=a&15,e.g=n&63);else if(s===151)n.skip(1),n.skip(1),a=sr(n).value,n.skip(1),e.g&&(e.g.G=a&3);else if(s>=152&&s<=159){s=(s&15)-8,u=e.h[s]!==null,u||(f=new lA(s,e.i),f.j=a,e.h[s]=f),a=sr(n).value,f=sr(n).value;var p=sr(n).value,g=sr(n).value,y=sr(n).value;n=sr(n).value,u&&!(n&7)||(n=e.h[s],n.h=0,n.g=0,n.F=!1,n.C=!1,n.D="white",n.A="black"),n=e.h[s],n.l=(a&32)>0,n.L=f&127,n.I=p,n.H=(g&240)>>4,n.K=(f&128)>0,n.u=(g&15)+1,n.m=(y&63)+1,e.g=e.h[s]}}}return[]}function Dg(e,n){for(var s=[],a=0;a<8;a++)(n&1)===1&&e.h[a]&&s.push(a),n>>=1;return s}function nO(e,n,s){var a=[];n=C(Dg(e,n));for(var u=n.next();!u.done;u=n.next()){u=u.value;var f=e.h[u];f.isVisible()&&(f=Cd(f,s,e.i))&&a.push(f),e.h[u]=null}return a}function rO(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function iO(e,n,s){var a={0:0,1:0,2:1,3:1};return e=a[e],n=a[n],s=a[s],Ate[e<<2|n<<1|s]}var sO=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Ate="black blue green cyan red magenta yellow white".split(" ");function Sf(){this.h=[],this.g=[],this.i=new Tte,this.l=0,this.m=new Map([["CC1",new Z1(0,0)],["CC2",new Z1(0,1)],["CC3",new Z1(1,0)],["CC4",new Z1(1,1)]]),this.A=this.u=0,this.j=new Map,this.D=!0,this.C=new Set,dA(this)}Sf.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,dA(this),e=C(this.j.values());for(var n=e.next();!n.done;n=e.next())rO(n.value)};function dA(e){e.u=0,e.A=0;for(var n=C(e.m.values()),s=n.next();!s.done;s=n.next())s=s.value,s.h=0,s.g=s.j,s.m=null,Lg(s.i),Lg(s.j),Lg(s.u);e.D=!0}Sf.prototype.extract=function(e,n){if(this.D){for(var s=C(this.m.values()),a=s.next();!a.done;a=s.next())a.value.l=n;this.D=!1}if(e=new dn(e,0),!(e.getLength()<8)&&e.ba()===181&&e.Ia()===49&&e.$()===1195456820&&e.ba()===3&&(s=e.ba(),(s&64)!==0))for(s&=31,e.skip(1),a=0;a<s;a++){var u=e.ba(),f=(u&4)>>2,p=e.ba(),g=e.ba();f&&(u&=3,u===0||u===1?this.h.push({pts:n,type:u,Hb:p,xc:g,order:this.h.length}):(this.g.push({pts:n,type:u,value:p,order:this.g.length}),this.g.push({pts:n,type:2,value:g,order:this.g.length})))}},Sf.prototype.decode=function(){function e(u,f){return u.pts-f.pts||u.order-f.order}var n=[];this.h.sort(e),this.g.sort(e);for(var s=C(this.h),a=s.next();!a.done;a=s.next())(a=Ite(this,a.value))&&n.push(a);for(s=C(this.g),a=s.next();!a.done;a=s.next())Ste(this.i,a.value);for(s=C(this.i.i),a=s.next();!a.done;a=s.next())a=Cte(this,a.value),n.push.apply(n,K(a));return this.i.i=[],this.h=[],this.g=[],n};function Ite(e,n){var s=n.type;if((n.Hb&112)===16){var a=n.Hb>>3&1;s===0?e.u=a:e.A=a}if(a="CC"+((s<<1|(s?e.A:e.u))+1),s=e.m.get(a),n.Hb===255&&n.xc===255||!n.Hb&&!n.xc||!oO(n.Hb)||!oO(n.xc))return++e.l>=45&&dA(e),null;e.l=0,n.Hb&=127,n.xc&=127;var u=n.Hb;if(u>=1&&u<=15||!n.Hb&&!n.xc)return null;if(u=null,(n.Hb&112)===16)e:{if(e.C.add(a),a=n.Hb,e=n.xc,s.m===(a<<8|e))s.m=null;else if(s.m=a<<8|e,(a&240)===16&&(e&192)===64){n=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(a&7)<<1|e>>5&1],a="white",u=!1;var f=null,p=e>95?e-96:e-64;p<=13?a=eO[Math.floor(p/2)]:p<=15?u=!0:f=Math.floor((p-16)/2),e=(e&1)===1,s.h!==4&&(p=s.g,s.h===3&&n!==p.g&&(s=1+n-p.h,Y5(p,s,1+p.g-p.h,p.h),Ml(p,0,s-1),Ml(p,n+1,15-n)),p.g=n,p.m=e,p.j=u,p.l=a,p.A=f,p.u="black")}else if((a&247)===17&&(e&240)===32)s.g.m=!1,s.g.j=!1,s.g.l="white",Tf(s.g,0,32),a=!1,n=eO[(e&14)>>1],n==="white_italics"&&(n="white",a=!0),s.g.m=(e&1)===1,s.g.j=a,s.g.l=n;else if((a&247)===16&&(e&240)===32||(a&247)===23&&(e&255)===45)n="black",!(a&7)&&(n=yte[(e&14)>>1]),s.g.u=n;else if((a&247)===17&&(e&240)===48)Tf(s.g,1,e);else if((a&246)===18&&(e&224)===32)Tf(s.g,a&1?3:2,e);else{if((a&246)===20&&(e&240)===32){switch(e=n.pts,a=null,n.xc){case 32:J5(s);break;case 33:s=s.g,s.i[s.g].pop();break;case 37:a=aA(s,2,e);break;case 38:a=aA(s,3,e);break;case 39:a=aA(s,4,e);break;case 40:Tf(s.g,0,32);break;case 41:s.h=2,s.g=s.i,s.g.h=0,s.l=e;break;case 42:Lg(s.u),Z5(s);break;case 43:Z5(s);break;case 44:n=s.i,a=null,s.h!==4&&(a=J1(n,s.l,e)),Ml(n,0,15);break;case 45:n=s.g,s.h!==3?a=null:(a=J1(n,s.l,e),u=n.g-n.h+1,Y5(n,u-1,u,n.h),Ml(n,0,u-1),Ml(n,n.g,15-n.g),s.l=e);break;case 46:Ml(s.j,0,15);break;case 47:n=null,s.h!==4&&(n=J1(s.i,s.l,e)),a=s.j,s.j=s.i,s.i=a,J5(s),s.l=e,a=n}u=a;break e}(a==23||a==31)&&e>=33&&e<=35&&(s.g.C=e-32)}u=null}else e=n.xc,Tf(s.g,0,n.Hb),Tf(s.g,0,e);return u}function Cte(e,n){var s=[];try{for(;n.Qa();){var a=sr(n).value,u=(a&224)>>5,f=a&31;if(u===7&&f!=0&&(u=sr(n).value&63),u!=0){e.C.add("svc"+u),e.j.has(u)||e.j.set(u,new wte(u));for(var p=e.j.get(u),g=n.Wa();n.Wa()-g<f;){u=p;var y=n,w=sr(y),b=w.value,I=w.pts;if(b===16){var L=sr(y);b=b<<16|L.value}if(b>=0&&b<=31)var j=Ete(u,y,b,I);else if(b>=128&&b<=159)j=bte(u,y,b,I);else{if(b>=4096&&b<=4127)u=y,y=b&255,y>=8&&y<=15?u.skip(1):y>=16&&y<=23?u.skip(2):y>=24&&y<=31&&u.skip(3);else if(b>=4224&&b<=4255)u=y,y=b&255,y>=128&&y<=135?u.skip(4):y>=136&&y<=143&&u.skip(5);else if(b>=32&&b<=127)y=b,u.g&&(y===127?Fu(u.g,""):Fu(u.g,String.fromCharCode(y)));else if(b>=160&&b<=255)u.g&&Fu(u.g,String.fromCharCode(b));else if(b>=4128&&b<=4223){if(y=b&255,u.g)if(sO.has(y)){var U=sO.get(y);Fu(u.g,U)}else Fu(u.g,"_")}else b>=4256&&b<=4351&&u.g&&((b&255)!=160?Fu(u.g,"_"):Fu(u.g,"[CC]"));j=[]}s.push.apply(s,K(j))}}}}catch(F){if(F instanceof oe&&F.code===3e3)Kr("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw F}return s}function oO(e){for(var n=0;e;)n^=e&1,e>>=1;return n===1}Sf.prototype.getStreams=function(){return Array.from(this.C)},xe("shaka.cea.CeaDecoder",Sf),ad=function(){return new Sf};function aO(e){for(var n=[],s=e,a=e=0;a<s.length;)e==2&&s[a]==3?(e=0,s=[].concat(K(s)),s.splice(a,1),s=new Uint8Array(s)):s[a]==0?e++:e=0,a++;for(e=s,a=0;a<e.length;){for(s=0;e[a]==255;)s+=255,a++;s+=e[a++];for(var u=0;e[a]==255;)u+=255,a++;u+=e[a++],s==4&&n.push(e.subarray(a,a+u)),a+=u}return n}function ex(){this.j=new Map,this.i=this.h=0,this.g=hA}ex.prototype.init=function(e){function n(f){f=f.name,tx.has(f)&&(s.g=tx.get(f))}var s=this,a=[],u=[];if(new Jt().box("moov",ft).box("mvex",ft).X("trex",function(f){var p=f.reader;p.skip(4),p.skip(4),f=p.$(),p=p.$(),s.h=f,s.i=p}).box("trak",ft).X("tkhd",function(f){var p=f.reader;f=f.version,f==1?(p.skip(8),p.skip(8)):(p.skip(4),p.skip(4));var g=p.$();f==1?p.skip(8):p.skip(4),p.skip(4),p.skip(8),p.skip(2),p.skip(2),p.skip(2),p.skip(2),p.skip(36),p.Ia(),p.Ia(),p.Ia(),p.Ia(),a.push(g)}).box("mdia",ft).X("mdhd",function(f){f=Xy(f.reader,f.version),u.push(f.timescale)}).box("minf",ft).box("stbl",ft).X("stsd",Al).box("avc1",n).box("avc3",n).box("dvav",n).box("dva1",n).box("hev1",n).box("hvc1",n).box("dvh1",n).box("dvhe",n).box("vvc1",n).box("vvi1",n).box("dvc1",n).box("dvi1",n).box("encv",ts).box("sinf",ft).box("frma",function(f){f=Pb(f.reader).codec,tx.has(f)&&(s.g=tx.get(f))}).parse(e,!0,!0),!a.length||!u.length||a.length!=u.length)throw new oe(2,2,2010);this.g==hA&&$e("Unable to determine bitstream format for CEA parsing!"),a.forEach(function(f,p){s.j.set(f,u[p])})},ex.prototype.parse=function(e){var n=this;if(this.g==hA)return[];var s=[],a=0,u=[];return new Jt().box("moof",function(f){a=f.start,u=[],ft(f)}).box("traf",function(f){u.push({baseMediaDecodeTime:null,qe:n.h,re:n.i,Bj:[],timescale:9e4}),ft(f)}).X("trun",function(f){var p=u[u.length-1];f=Qy(f.reader,f.version,f.flags),p.Bj.push(f)}).X("tfhd",function(f){var p=u[u.length-1];f=Wy(f.reader,f.flags),p.qe=f.qe||n.h,p.re=f.re||n.i,f=f.trackId,n.j.has(f)&&(p.timescale=n.j.get(f))}).X("tfdt",function(f){var p=u[u.length-1];f=Yy(f.reader,f.version),p.baseMediaDecodeTime=f.baseMediaDecodeTime}).box("mdat",function(f){for(var p=a-f.start-8,g=f.reader.Wa(),y=C(u),w=y.next();!w.done;w=y.next())w=w.value,w.baseMediaDecodeTime===null?$e("Unable to find base media decode time for CEA captions!"):(f.reader.seek(g),kte(n,f.reader,w.baseMediaDecodeTime,w.timescale,w.qe,w.re,p,w.Bj,s))}).parse(e,!1,!0),s};function kte(e,n,s,a,u,f,p,g,y){var w=0,b=f,I=g.map(function(U){return U.ci});for(I=[].concat.apply([],K(I)),I.length&&(b=I[0].sampleSize||f),n.skip(p+g[0].Yg);n.Qa();){p=n.$();var L=n.ba(),j=null;switch(j=!1,g=1,e.g){case Ng:j=L&31,j=j==6;break;case Mg:g=2,n.skip(1),j=L>>1&63,j=j==39||j==40;break;case Og:g=2,n.skip(1),j=L>>1&63,j=j==23||j==24;break;default:return}if(j)for(L=0,w<I.length&&(L=I[w].hg||0),L=(s+L)/a,g=n.bc(p-g,!1),g=C(aO(g)),j=g.next();!j.done;j=g.next())y.push({packet:j.value,pts:L});else try{n.skip(p-g)}catch{break}b-=p+4,b==0&&(s=w<I.length?s+(I[w].di||u):s+u,w++,w<I.length?b=I[w].sampleSize||f:b=f)}}xe("shaka.cea.Mp4CeaParser",ex);var hA=0,Ng=1,Mg=2,Og=3,tx=new Map().set("avc1",Ng).set("avc3",Ng).set("dvav",Ng).set("dva1",Ng).set("hev1",Mg).set("hvc1",Mg).set("dvh1",Mg).set("dvhe",Mg).set("vvc1",Og).set("vvi1",Og).set("dvc1",Og).set("dvi1",Og);ob("video/mp4",function(){return new ex});function nx(){this.g=null}nx.prototype.init=function(){},nx.prototype.parse=function(e){this.g?this.g.clearData():this.g=new un;var n=[];if(e=nt(e),!nf(e))return n;e=this.g.parse(e);var s=e.se(),a=e.Df();switch(e=[],s.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return n;for(s=C(a),a=s.next();!a.done;a=s.next())if(a=a.value,e.includes(a.type)&&a.time!=null)for(var u=C(aO(a.data)),f=u.next();!f.done;f=u.next())n.push({packet:f.value,pts:a.time});return n},xe("shaka.cea.TsCeaParser",nx),ob("video/mp2t",function(){return new nx});function _te(e){var n=0,s=Ui(e),a=s.getUint32(n,!0);if(a!=e.byteLength)return[];e:{for(e=n+4+2,n=[];e<s.byteLength-1;){a=s.getUint16(e,!0),e+=2;var u=s.getUint16(e,!0);if(e+=2,u&1||u+e>s.byteLength){s=[];break e}var f=nt(s,e,u);n.push({type:a,value:f}),e+=u}s=n}return s}function lO(e){return e=Bs(Bn(e)),e=_te(e).filter(function(n){return n.type===Rte})[0],e?(e=Eu(e.value,!0),(e=cd(e,"WRMHEADER"))?e:null):null}function rx(e){try{var n=lO(e);if(n)e:{for(var s=C(Xo(n,"DATA")),a=s.next();!a.done;a=s.next()){var u=a.value;if(u.children)for(var f=C(u.children),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.tagName=="LA_URL"){var y=Bn(g);break e}}}y=""}else y="";return y}catch{return""}}var Rte=1;function uO(){this.g=new Map}uO.prototype.release=function(){this.g.clear()};function cO(e,n,s,a){var u=Dte(e,n),f=null;e=[];var p=[];n=null;var g=new Set(u.map(function(w){return w.keyId}));g.delete(null);var y="cenc";if(g.size>1)throw new oe(2,4,4010);if(!s){if(p=u.filter(function(w){return w.Yd=="urn:mpeg:dash:sea:2012"}),p.length>1)throw new oe(2,4,4050);p.length&&(n=Mte(p[0])),(p=u.find(function(w){return w.Yd=="urn:mpeg:dash:mp4protection:2011"}))&&p.encryptionScheme&&(y=p.encryptionScheme),p=u.filter(function(w){return w.Yd=="urn:mpeg:dash:mp4protection:2011"?(f=w.init||f,!1):w.Yd!="urn:mpeg:dash:sea:2012"}),p.length&&(e=Pte(f,y,p,a,g),e.length==0&&(e=[ml("",y,f)]))}if(u.length&&!n&&(s||!p.length))for(e=[],s=C(Object.values(a)),a=s.next();!a.done;a=s.next())a=a.value,a!="org.w3.clearkey"&&(a=ml(a,y,f),e.push(a));if(g=Array.from(g)[0]||null)for(y=C(e),s=y.next();!s.done;s=y.next())for(s=C(s.value.initData),a=s.next();!a.done;a=s.next())a.value.keyId=g;return{Wi:g,Tn:f,drmInfos:e,Mg:n,aj:!0}}function Lte(e,n,s,a,u){var f=cO(e,n,a,u);if(s.aj)e=s.drmInfos.length==1&&!s.drmInfos[0].keySystem,n=f.drmInfos.length==0,(s.drmInfos.length==0||e&&!n)&&(s.drmInfos=f.drmInfos),s.aj=!1;else if(f.drmInfos.length>0&&(s.drmInfos=s.drmInfos.filter(function(p){return f.drmInfos.some(function(g){return g.keySystem==p.keySystem})}),s.drmInfos.length==0))throw new oe(2,4,4008);return f.Wi||s.Wi}function ix(e){var n=$s(e.node,"https://dashif.org/CPS","Laurl");if(n&&(n=Bn(n)))return n;if((n=$s(e.node,"urn:microsoft:playready","pro"))&&Bn(n))return rx(n);if((e=$s(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=Bn(e))){n=Bs(e),e=8,n=Ui(n);var s=n.getUint8(e);return e+=20,s>0&&(e+=4+16*n.getUint32(e)),e=nt(n,e+4),e=xy(e),e=cd("<pro>"+e+"</pro>"),rx(e)}return""}function Pte(e,n,s,a,u){var f=[];s=C(s);for(var p=s.next();!p.done;p=s.next()){p=p.value;var g=a[p.Yd];if(g){var y;if((y=$s(p.node,"urn:microsoft:playready","pro"))&&Bn(y)){y=Bn(y),y=Bs(y);var w=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);y=[{initData:Ky(y,w,new Set,0),initDataType:"cenc",keyId:p.keyId}]}else y=null;if(w=null,p.Yd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){w=p;var b=u;if(b.size==0)w=null;else{var I=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),L=new Uint8Array([]);w=[{initData:Ky(L,I,b,1),initDataType:"cenc",keyId:w.keyId}]}}y=ml(g,n,p.init||e||y||w),(g=Ote.get(g))&&(y.licenseServerUri=g(p));e:{if((p=$s(p.node,"https://dashif.org/CPS","Certurl"))&&(p=Bn(p)))break e;p=""}y.serverCertificateUri=p,f.push(y)}}return f}function Dte(e,n){var s=[];n=C(n);for(var a=n.next();!a.done;a=n.next())(a=Nte(e,a.value))&&s.push(a);return s}function Nte(e,n){var s=n.attributes.schemeIdUri,a=vl(n,"urn:mpeg:cenc:2013","default_KID"),u=$D(n,"urn:mpeg:cenc:2013","pssh").map(xi),f=n.attributes.value;if(!s)return null;if(s=s.toLowerCase(),a&&(a=a.replace(/-/g,"").toLowerCase(),a.includes(" ")))throw new oe(2,4,4009);var p=[];try{p=u.map(function(g){if(!e.g.has(g)){var y=Bs(g);e.g.set(g,y)}return{initDataType:"cenc",initData:e.g.get(g),keyId:null}})}catch{throw new oe(2,4,4007)}return{node:n,Yd:s,keyId:a,init:p.length>0?p:null,encryptionScheme:f}}function Mte(e){if(!l.crypto||!l.crypto.subtle)throw $e("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new oe(2,4,4042);var n=$s(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new oe(2,4,4051);if(n.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new oe(2,4,4051);if(n=$s(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!n)throw new oe(2,4,4051);if(e=n.attributes.IV,n=yi(n.attributes.keyUriTemplate),!e||!n)throw new oe(2,4,4051);if(e=nd(e.substr(2)),e.byteLength!=16)throw new oe(2,4,4048);return{Nl:n,iv:e}}var Ote=new Map().set("com.apple.fps",function(e){if(l.shakaMediaKeysPolyfill==="apple")throw new oe(2,4,4054);return(e=$s(e.node,"https://dashif.org/CPS","Laurl"))&&(e=Bn(e))?e:""}).set("com.widevine.alpha",function(e){var n=$s(e.node,"https://dashif.org/CPS","Laurl");return n&&(n=Bn(n))?n:(e=$s(e.node,"urn:microsoft","laurl"))&&yi(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",ix).set("com.microsoft.playready.recommendation",ix).set("com.microsoft.playready.software",ix).set("com.microsoft.playready.hardware",ix).set("org.w3.clearkey",function(e){var n=$s(e.node,"https://dashif.org/CPS","Laurl");return n&&(n=Bn(n))?n:(e=$s(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Bn(e))?e:""});function jg(e,n,s,a,u,f){var p=new Map().set("RepresentationID",n).set("Number",s).set("SubNumber",a).set("Bandwidth",u).set("Time",f);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(g,y,w,b){if(g=="$$")return"$";var I=p.get(y);if(I==null)return g;switch(y=="RepresentationID"&&w&&(w=void 0),y=="Time"&&typeof I!="bigint"&&(Math.abs(I-Math.round(I))>=.2&&$e("Calculated $Time$ values must be close to integers"),I=Math.round(I)),b){case void 0:case"d":case"i":case"u":g=I.toString();break;case"o":g=I.toString(8);break;case"x":g=I.toString(16);break;case"X":g=I.toString(16).toUpperCase();break;default:g=I.toString()}return w=l.parseInt(w,10)||1,Array(Math.max(0,w-g.length)+1).join("0")+g})}function dO(e,n){var s=ko(e,n,"timescale"),a=1;s&&(a=ka(s)||1),s=ko(e,n,"duration");var u=(s=ka(s||""))?s/a:null,f=ko(e,n,"startNumber"),p=Number(ko(e,n,"presentationTimeOffset"))||0,g=jr(f||"");if((f==null||g==null)&&(g=1),f=null,n=wf(e,n,"SegmentTimeline")){n=Yt(n,"S"),f=a,e=e.ra.duration||1/0;for(var y=g,w=[],b=-p,I=0;I<n.length;++I){var L=n[I],j=n[I+1],U=rt(L,"t",jr),F=rt(L,"d",jr),B=rt(L,"r",Or);if(L=rt(L,"k",Or)||0,U!=null&&(U-=p),F){if(U=U??b,B=B||0,B<0)if(j){if(j=rt(j,"t",jr),j==null)break;if(U>=j)break;B=Math.ceil((j-U)/F)-1}else{if(e==1/0)break;if(U/f>=e)break;B=Math.ceil((e*f-U)/F)-1}for(w.length>0&&U!=b&&(w[w.length-1].end=U/f),j=0;j<=B;++j)b=U+F,w.push({start:U/f,ee:U,end:b/f,Di:b,Hc:L,rm:w.length+y}),U=b}}f=w}return{timescale:a,vg:s,pb:u,Oe:g,nc:p/a||0,xd:p,timeline:f}}function hO(e,n){return[n(e.N),n(e.va),n(e.Aa)].filter(_u)}function ko(e,n,s){n=hO(e,n),e=null,n=C(n);for(var a=n.next();!a.done&&!(e=a.value.attributes[s]);a=n.next());return e}function wf(e,n,s){n=hO(e,n),e=null,n=C(n);for(var a=n.next();!a.done&&!(e=fn(a.value,s));a=n.next());return e}function jte(e,n,s,a,u,f){for(var p=vl(e,"http://www.w3.org/1999/xlink","href"),g=vl(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",y=C(Object.keys(e.attributes)),w=y.next();!w.done;w=y.next()){w=w.value;var b=w.split(":"),I=lb("http://www.w3.org/1999/xlink");b[0]==I&&delete e.attributes[w]}if(f>=5)return Ru(new oe(2,4,4028));if(g!="onLoad")return Ru(new oe(2,4,4027));var L=yr([a],[p]);return u.request(0,Kn(L,n)).cb(function(j){if(j=Bm(j.data,e.tagName),!j)return Ru(new oe(2,4,4001,p));for(e.children=[];j.children.length;){var U=j.children.shift();e.children.push(U)}U=C(Object.keys(j.attributes));for(var F=U.next();!F.done;F=U.next())F=F.value,e.attributes[F]=j.attributes[F];return sx(e,n,s,L[0],u,f+1)})}function sx(e,n,s,a,u,f){if(f=f===void 0?0:f,vl(e,"http://www.w3.org/1999/xlink","href")){var p=jte(e,n,s,a,u,f);return s&&(p=p.cb(void 0,function(){return sx(e,n,s,a,u,f)})),p}p=[];for(var g=C(BD(e)),y=g.next(),w={};!y.done;w={me:void 0},y=g.next())w.me=y.value,vl(w.me,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(b){return function(I){return I!==b.me}}(w)):w.me.tagName!="SegmentTimeline"&&p.push(sx(w.me,n,s,a,u,f));return S3(p).cb(function(){return e})}function Ute(e,n,s,a,u,f,p,g){var y,w=new Jt().X("sidx",function(b){y=Fte(n,a,u,f,p,s,b,g)});if(e&&w.parse(e),y)return y;throw new oe(2,3,3004)}function Fte(e,n,s,a,u,f,p,g){g=g===void 0?!1:g;var y=[];p.reader.skip(4);var w=p.reader.$();if(w==0)throw new oe(2,3,3005);if(p.version==0)var b=p.reader.$(),I=p.reader.$();else b=p.reader.Vd(),I=p.reader.Vd();p.reader.skip(2);var L=p.reader.Ia();for(e=(g?-p.size:e)+p.size+I,g=0;g<L;g++){var j=p.reader.$();I=(j&2147483648)>>>31,j&=2147483647;var U=p.reader.$();if(p.reader.skip(4),I==1)throw new oe(2,3,3006);y.push(new Xe(b/w+s,(b+U)/w+s,function(){return f},e,e+j-1,n,s,a,u)),b+=U,e+=j}return p.parser.stop(),y}function Bu(e){this.h=Ui(e),this.g=new dn(this.h,0)}Bu.prototype.Qa=function(){return this.g.Qa()};function Ol(e){var n=fO(e);if(n.length>7)throw new oe(2,3,3002);var s=0;n=C(n);for(var a=n.next();!a.done;a=n.next())s=256*s+a.value;n=fO(e);e:{a=C(Bte);for(var u=a.next();!u.done;u=a.next())if(Rr(n,new Uint8Array(u.value))){a=!0;break e}a=!1}if(a)n=e.h.byteLength-e.g.Wa();else{if(n.length==8&&n[1]&224)throw new oe(2,3,3001);for(u=a=0;u<n.length;u++){var f=n[u];a=u==0?f&(1<<8-n.length)-1:256*a+f}n=a}return n=e.g.Wa()+n<=e.h.byteLength?n:e.h.byteLength-e.g.Wa(),a=Ui(e.h,e.g.Wa(),n),e.g.skip(n),new $te(s,a)}function fO(e){var n=e.g.Wa(),s=e.g.ba();if(s==0)throw new oe(2,3,3002);return s=8-Math.floor(Math.log2(s)),e.g.skip(s-1),nt(e.h,n,s)}var Bte=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function $te(e,n){this.id=e,this.g=n}function fA(e){if(e.g.byteLength>8)throw new oe(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new oe(2,3,3001);for(var n=0,s=0;s<e.g.byteLength;s++){var a=e.g.getUint8(s);n=256*n+a}return n}function Vte(e,n,s,a,u,f,p){if(n=new Bu(n),Ol(n).id!=440786851)throw new oe(2,3,3008);var g=Ol(n);if(g.id!=408125543)throw new oe(2,3,3009);n=g.g.byteOffset,g=new Bu(g.g);for(var y=null;g.Qa();){var w=Ol(g);if(w.id==357149030){y=w;break}}if(!y)throw new oe(2,3,3010);for(y=new Bu(y.g),w=1e6,g=null;y.Qa();){var b=Ol(y);if(b.id==2807729)w=fA(b);else if(b.id==17545)if(b.g.byteLength==4)g=b.g.getFloat32(0);else if(b.g.byteLength==8)g=b.g.getFloat64(0);else throw new oe(2,3,3003)}if(g==null)throw new oe(2,3,3011);if(y=w/1e9,g*=y,e=Ol(new Bu(e)),e.id!=475249515)throw new oe(2,3,3007);return Gte(e,n,y,g,s,a,u,f,p)}function Gte(e,n,s,a,u,f,p,g,y){function w(){return u}var b=[];e=new Bu(e.g);for(var I=null,L=null;e.Qa();){var j=Ol(e);if(j.id==187){var U=Hte(j);U&&(j=s*U.Fm,U=n+U.gm,I!=null&&b.push(new Xe(I+p,j+p,w,L,U-1,f,p,g,y)),I=j,L=U)}}return I!=null&&b.push(new Xe(I+p,a+p,w,L,null,f,p,g,y)),b}function Hte(e){var n=new Bu(e.g);if(e=Ol(n),e.id!=179)throw new oe(2,3,3013);if(e=fA(e),n=Ol(n),n.id!=183)throw new oe(2,3,3012);n=new Bu(n.g);for(var s=0;n.Qa();){var a=Ol(n);if(a.id==241){s=fA(a);break}}return{Fm:e,gm:s}}function pO(e,n,s){if(n=wf(e,n,"Initialization"),!n)return null;var a=e.N.ib(),u=n.attributes.sourceURL;u&&(a=yr(a,[yi(u)],e.Rb())),u=0;var f=null;return(n=rt(n,"range",Iy))&&(u=n.start,f=n.end),s=new $i(function(){return a},u,f,yO(e),null,null,s,e.va.encrypted),s.codecs=e.N.codecs,s.mimeType=e.N.mimeType,e.ra&&!e.ra.If&&(s.g=e.ra.start+e.ra.duration),s}function qte(e,n,s){var a=Number(ko(e,Ef,"presentationTimeOffset"))||0,u=ko(e,Ef,"timescale"),f=1;u&&(f=ka(u)||1);var p=a/f||0,g=pO(e,Ef,s);Kte(e,g);var y=Au(e);return{endTime:-1,timeline:-1,hd:function(){var w=wf(y,Ef,"RepresentationIndex"),b=y.N.ib();return w&&(w=yi(w.attributes.sourceURL))&&(b=yr(b,[w],y.Rb())),w=gO(y),mO(y,n,g,b,w.start,w.end,p)},timescale:f}}function mO(e,n,s,a,u,f,p){var g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te;return X(function(ae){if(ae.g==1)return g=e.presentationTimeline,y=!e.Jb||!e.ra.If,w=e.ra.start,b=e.ra.duration,I=e.N.mimeType.split("/")[1],L=n,j=null,U=[L(a,u,f,!1),I=="webm"?L(s.S(),s.startByte,s.endByte,!0):null],L=null,O(ae,Promise.all(U),2);for(F=ae.h,B=F[0],q=F[1]||null,G=null,z=w-p,J=w,ie=b?w+b:1/0,Y=e.N.ib(),ne=Y.length!=a.length||Y.some(function(he,Ee){return he!=a[Ee]}),G=I=="mp4"?Ute(B,u,Y,s,z,J,ie,ne):Vte(B,q,Y,s,z,J,ie),Z=C(G),de=Z.next();!de.done;de=Z.next())te=de.value,te.codecs=e.N.codecs,te.mimeType=e.N.mimeType,te.bandwidth=e.bandwidth;return g.Ge(G),j=new jt(G),y&&j.Hd(J,ie,!0),ae.return(j)})}function Ef(e){return e.Zd}function gO(e){var n=wf(e,Ef,"RepresentationIndex");return e=ko(e,Ef,"indexRange"),e=Iy(e||""),n&&(e=rt(n,"range",Iy,e)),e}function Kte(e,n){if(vO(e,n),!gO(e))throw new oe(2,4,4002)}function vO(e,n){var s=e.N.mimeType.split("/")[1];if(e.N.contentType!=mt&&s!="mp4"&&s!="webm")throw new oe(2,4,4006);if(s=="webm"&&!n)throw new oe(2,4,4005)}function yO(e){var n=e.N;return{bandwidth:e.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate||null,height:n.height||null,mimeType:n.mimeType,channelsCount:n.Wf,pixelAspectRatio:n.pixelAspectRatio||null,width:n.width||null,label:e.va.label||null,roles:e.roles||null,language:e.va.language||null}}function zte(e,n,s){var a=pO(e,xO,s),u=Wte(e);if(!u.pb&&!u.timeline&&u.Qd.length>1)throw new oe(2,4,4002);if(!u.pb&&!e.ra.duration&&!u.timeline&&u.Qd.length==1)throw new oe(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new oe(2,4,4002);var f=null,p=null;e.Aa.id&&e.N.id&&(p=n.get(e.Aa.id+","+e.N.id))&&(f=p.segmentIndex);var g=Yte(e.ra.start,e.ra.duration,e.N.ib,u,a,s,e.N.mimeType,e.N.codecs,e.bandwidth,e.Rb);return n=!f,f?f.Ee(g,e.presentationTimeline.Mb()):f=new jt(g),e.presentationTimeline.Ge(g),e.Jb&&e.ra.If||f.Hd(e.ra.start,e.ra.duration?e.ra.start+e.ra.duration:1/0,n),p&&(p.segmentIndex=f),{endTime:-1,timeline:-1,hd:function(){return f&&f.getNumReferences()!=0||f.Rf(g),Promise.resolve(f)},timescale:u.timescale}}function xO(e){return e.Lc}function Wte(e){var n=Xte(e);e=dO(e,xO);var s=e.Oe;s==0&&(s=1);var a=0;return e.pb?a=e.pb*(s-1):e.timeline&&e.timeline.length>0&&(a=e.timeline[0].start),{pb:e.pb,startTime:a,Oe:s,nc:e.nc,timescale:e.timescale,timeline:e.timeline,Qd:n}}function Yte(e,n,s,a,u,f,p,g,y,w){var b=a.Qd.length;a.timeline&&a.timeline.length!=a.Qd.length&&(b=Math.min(a.timeline.length,a.Qd.length));for(var I=e-a.nc,L=n?e+n:1/0,j=[],U=a.startTime,F={},B=0;B<b;F={xg:void 0,ig:void 0},B++){F.ig=a.Qd[B];var q=U;U=void 0,U=a.pb!=null?q+a.pb:a.timeline?a.timeline[B].end:q+n,F.xg=null,F=new Xe(e+q,e+U,function(G){return function(){return G.xg==null&&(G.xg=yr(s(),[G.ig.Ul],w())),G.xg}}(F),F.ig.start,F.ig.end,u,I,e,L,[],"",null,null,Il,f),F.codecs=g,F.mimeType=p,F.bandwidth=y,j.push(F)}return j}function Xte(e){return[e.N.Lc,e.va.Lc,e.Aa.Lc].filter(_u).map(function(n){return Yt(n,"SegmentURL")}).reduce(function(n,s){return n.length>0?n:s}).map(function(n){n.attributes.indexRange&&!e.Gh&&(e.Gh=!0);var s=yi(n.attributes.media);return n=rt(n,"mediaRange",Iy,{start:0,end:null}),{Ul:s,start:n.start,end:n.end}})}function TO(e,n,s,a,u,f,p,g,y,w){y||e.N.Ff||(e.N.Ff=ko(e,$u,"initialization"));var b=e.N.Ff?ene(e,p):null,I=Qte(e);Jte(I);var L=Au(e);if(I.ze)return vO(e,b),{endTime:-1,timeline:-1,hd:function(){var q=jg(I.ze,L.N.originalId,null,null,L.bandwidth||null,null);return q=yr(L.N.ib(),[q]),mO(L,n,b,q,0,null,I.nc)},timescale:I.timescale};if(I.pb)return a||e.va.contentType==="image"||e.va.contentType==="text"||(a=e.ra.start,w=e.Aa.id,s=e.ra.duration,w=(w=w!=null&&f.get(w)||s)?a+w:1/0,e.presentationTimeline.Ph(I.pb),e.presentationTimeline.zj(a,w)),{endTime:-1,timeline:-1,hd:function(){return Zte(L,I,u,b,f,p,g,e.N.jg)},timescale:I.timescale};var j=null;a=a=null,e.Aa.id&&e.N.id&&(a=e.Aa.id+","+e.N.id,a=s.get(a))&&(j=a.segmentIndex);var U=e.ra.start,F=e.ra.duration?U+e.ra.duration:1/0;if(j)w=j,SO(w,I,U,F,b,e.Jb),w.eb(e.presentationTimeline.Mb());else{if(s=0,y=-1,e.Aa.id!=null&&e.N.id!=null){var B=w.get(e.Aa.id);if(B)y=B.timeline;else for(w=C(w.values()),B=w.next();!B.done;B=w.next())if(B=B.value,Math.abs(I.nc-B.endTime)<=AD&&B.Yh.includes(e.N.id)){y=B.timeline;break}else B.timeline>=s&&(s=B.timeline+1)}y==-1&&(y=s),j=new Ug(e.Jb,I,e.N.originalId,e.bandwidth,e.N.ib,e.Rb,U,F,b,p,e.N.jg,y)}return I.timeline&&e.va.contentType!=="image"&&e.va.contentType!=="text"&&e.presentationTimeline.Aj(j.h?j.h.timeline:[],U),a&&e.Jb&&(a.segmentIndex=j),a=(a=(a=I.timeline)&&a[a.length-1])?a.end+I.nc:-1,w=-1,j instanceof Ug&&(w=j.tf()),{endTime:a,timeline:w,hd:function(){return j instanceof Ug&&j.getNumReferences()==0&&SO(j,I,U,F,b,e.Jb),Promise.resolve(j)},timescale:I.timescale}}function $u(e){return e.bd}function Qte(e){var n=dO(e,$u),s=ko(e,$u,"media"),a=ko(e,$u,"index"),u=ko(e,$u,"k"),f=0;return u&&(f=parseInt(u,10)),{vg:n.vg,pb:n.pb,timescale:n.timescale,Oe:n.Oe,nc:n.nc,xd:n.xd,timeline:n.timeline,kc:s&&yi(s),ze:a,mimeType:e.N.mimeType,codecs:e.N.codecs,bandwidth:e.bandwidth,Vl:f}}function Jte(e){var n=e.ze?1:0;if(n+=e.timeline?1:0,n+=e.pb?1:0,n==0)throw new oe(2,4,4002);if(n!=1&&(e.ze&&(e.timeline=null),e.vg=null,e.pb=null),!e.ze&&!e.kc)throw new oe(2,4,4002)}function Zte(e,n,s,a,u,f,p,g){function y(he){var Ee=he-B,Te=Ee*F,ge=n.vg,ve=Ee*ge;"BigInt"in l&&ve>Number.MAX_SAFE_INTEGER&&(ve=BigInt(Ee)*BigInt(ge)),Te+=L,Ee=Te+F,ge=Math.min(Ee,b());var Ie=[],Le=n.Vl;if(Le)for(var at=(ge-Te)/Le,je={},Vt=0;Vt<Le;je={Zj:void 0},Vt++){var ct=Te+at*Vt,Xt=ct+at;je.Zj=Vt,je=new Xe(ct,Xt,function(At){return function(){var St=jg(q,z,he,At.Zj,G,ve);return yr(J(),[St],ie())}}(je),0,null,a,Y,L,b(),[],"",null,null,Il,f),je.codecs=e.N.codecs,je.mimeType=e.N.mimeType,g==0?Vt>0&&je.Od():Vt%g!=0&&je.Od(),Ie.push(je)}return Te=new Xe(Te,ge,function(){if(Le)return[];var At=jg(q,z,he,null,G,ve);return yr(J(),[At],ie())},0,null,a,Y,L,b(),Ie,"",null,null,Il,f,Ie.length>0),Te.codecs=e.N.codecs,Te.mimeType=e.N.mimeType,Te.bandwidth=e.bandwidth,Te.j=Ee,Te}function w(){var he=[Math.max(I.Mb(),L),Math.min(I.Tc(),b())].map(function(Ee){return Ee-L});return he=[Math.ceil(he[0]/F),Math.ceil(he[1]/F)-1],e.N.zb&&he[1]++,he.map(function(Ee){return Ee+B})}function b(){var he=j!=null&&u.get(j)||U;return he?L+he:1/0}var I=e.presentationTimeline,L=e.ra.start,j=e.Aa.id,U=e.ra.duration,F=n.pb,B=n.Oe,q=n.kc,G=e.bandwidth||null,z=e.N.originalId,J=e.N.ib,ie=e.Rb,Y=L-n.nc,ne=w();s=e.Jb?Math.max(ne[0],ne[1]-s+1):ne[0],p=p||ne[1],ne=[];for(var Z=s;Z<=p;++Z){var de=y(Z);ne.push(de)}var te=new jt(ne);if(ne=I.Tc()<b(),Z=I.U(),ne||Z){var ae=Math.max(s,p+1);s=F,e.N.zb&&(s=.1),te.wg(s,function(){var he=I.Mb();te.eb(he);var Ee=C(w());Ee.next(),Ee=Ee.next().value;for(var Te=[];ae<=Ee;){var ge=y(ae);Te.push(ge),ae++}return he>b()&&!Te.length?null:Te})}return Promise.resolve(te)}function ene(e,n){var s=e.N.Ff;if(s||(s=ko(e,$u,"initialization")),!s)return null;s=yi(s);var a=e.N.originalId,u=e.bandwidth||null,f=e.N.ib,p=e.Rb;return n=new $i(function(){var g=jg(s,a,null,null,u,null);return yr(f(),[g],p())},0,null,yO(e),null,null,n,e.va.encrypted),n.codecs=e.N.codecs,n.mimeType=e.N.mimeType,e.ra&&!e.ra.If&&(n.g=e.ra.start+e.ra.duration),n}function Ug(e,n,s,a,u,f,p,g,y,w,b,I){jt.call(this,[]),this.F=e,this.h=n,this.H=s,this.D=a,this.G=u,this.J=f,this.j=p,this.l=g,this.A=y,this.C=w,this.I=b,this.K=I,pA(this)}V(Ug,jt),d=Ug.prototype,d.getNumReferences=function(){return this.h?this.h.timeline.length:0},d.release=function(){jt.prototype.release.call(this),this.h=null},d.eb=function(e){if(this.h){for(var n=0,s=this.h.timeline,a=0;a<s.length&&s[a].end+this.j<=e;a+=1)n+=1;n>0&&(this.h.timeline=s.slice(n),this.g.length>=n&&(this.g=this.g.slice(n)),this.i+=n,this.getNumReferences()===0&&this.release())}};function SO(e,n,s,a,u,f){if(tne(e,u),e.F=f,e.h){if(e.h.xd!==n.xd)for(s=n.xd-e.h.xd,u=0;u<n.timeline.length;u++)f=n.timeline[u],f.ee+=s,f.Di+=s,f.start=(f.ee+s)/n.timescale,f.end=(f.Di+s)/n.timescale;if(e.h.kc!==n.kc&&(e.h.kc=n.kc),s=e.h.timeline,s.length){var p=s[s.length-1];n=n.timeline.filter(function(g){return g.end>p.end})}else n=n.timeline.slice();n.length>0&&e.h.timeline.push.apply(e.h.timeline,K(n)),e.l!==a&&(e.l=a)}else e.h=n,e.j=s,e.l=a;pA(e)}function tne(e,n){if(e.A!==n){e.A=n,e=C(e.g);for(var s=e.next();!s.done;s=e.next())(s=s.value)&&nN(s,n)}}function pA(e){if(e.h&&!e.u){for(var n=[],s=C(e.h.timeline),a=s.next();!a.done;a=s.next())a=a.value,a.start>=e.l||a.end<=0||n.push(a);e.h.timeline=n,e.eb(e.j)}}d.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var n=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var s=n.length-1,a=0;a<n.length;a++){var u=n[a],f=u.start+this.j;if(u=a<s?n[a+1].start+this.j:this.l===1/0?u.end+this.j:this.l,e>=f&&e<u)return a+this.i}return null},d.get=function(e){var n=this;if(e-=this.i,e<0||e>=this.getNumReferences()||!this.h)return null;var s=this.g[e];if(!s){s=this.h.timeline[e];var a=s.rm,u=s.ee+this.h.xd,f=this.j-this.h.nc,p=this.j+s.end,g=p;e===this.getNumReferences()-1&&this.l!==1/0&&(g=this.F&&Math.abs(g-this.l)>.1?Math.min(g,this.l):this.l);var y=this.h.codecs,w=this.h.mimeType,b=this.h.bandwidth,I=[],L=!1;if(s.Hc&&this.h&&this.h.kc&&(L=this.h.kc.includes("$SubNumber$")),L){L=(s.end-s.start)/s.Hc;for(var j={},U=0;U<s.Hc;j={yg:void 0,$j:void 0},U++){var F=s.start+L*U,B=F+L;j.$j=U,j.yg=null,j=new Xe(this.j+F,this.j+B,function(q){return function(){return n.h?(q.yg==null&&(q.yg=wO(n.h.kc,n.H,a,n.D,u,q.$j,n.G,n.J)),q.yg):[]}}(j),0,null,this.A,f,this.j,this.l,[],"",null,null,Il,this.C),j.codecs=y,j.mimeType=w,j.bandwidth=b,this.I==0?U>0&&j.Od():U%this.I!=0&&j.Od(),I.push(j)}}s=new Xe(this.j+s.start,g,function(){return I.length>0||!n.h?[]:wO(n.h.kc,n.H,a,n.D,u,null,n.G,n.J)},0,null,this.A,f,this.j,this.l,I,"",null,null,Il,this.C,I.length>0),s.codecs=y,s.mimeType=w,s.j=p,s.bandwidth=b,this.g[e]=s}return s},d.Kb=function(e){pA(this);for(var n=0;n<this.getNumReferences();n++){var s=this.get(n+this.i);s&&e(s)}};function wO(e,n,s,a,u,f,p,g){return e=jg(e,n,s,f,a||null,u),yr(p(),[e],g()).map(function(y){return y.toString()})}d.tf=function(){return this.K};function bf(e){this.u=null,this.C=e,this.H=new Wh,this.i=[],this.h=null,this.m=[],this.D=null,this.G=[],this.F=300,this.l=new Map,this.j=new Map,this.g=null,this.A="UNKNOWN"}bf.prototype.configure=function(e){this.u=e},bf.prototype.destroy=function(){return this.C=this.u=null,this.i=[],this.h=null,this.m=[],this.G=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.H.destroy()},bf.prototype.setManifestType=function(e){this.A=e};function Fg(e,n){var s,a,u,f,p,g,y;return X(function(w){if(w.g==1)return s=yr(e.i,[nne(e,n)]),a=Kn(s,e.u.retryParameters),u=e.C.networkingEngine.request(8,a),md(e.H,u),ce(w,2),O(w,u.promise,4);if(w.g!=2)return f=w.h,p=yn(f.data),g=JSON.parse(p),g.VERSION==1&&rne(e,g,f.uri),se(w,0);if((y=ue(w))&&y.code==7001)return w.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new Ke(function(){Fg(e,n)}),e.g.Y(e.F),re(w)})}function nne(e,n){if(!e.m.length)return n;n=new Cn(n);var s=e.D||e.m[0],a=Math.round(e.C.getBandwidthEstimate()),u=n.g;return e.A=="DASH"?(u.add("_DASH_pathway",s),u.add("_DASH_throughput",String(a))):e.A=="HLS"&&(u.add("_HLS_pathway",s),u.add("_HLS_throughput",String(a))),zo(u)&&ba(n,u),n.toString()}function rne(e,n,s){e.g!=null&&(e.g.stop(),e.g=null);var a=n["RELOAD-URI"]||s;e.g=new Ke(function(){Fg(e,a)}),(s=n.TTL)&&(e.F=s),e.g.Y(e.F),e.m=n["PATHWAY-PRIORITY"]||[],e.G=n["PATHWAY-CLONES"]||[]}function Af(e,n,s,a){var u=e.l.get(n);u||(u=new Map),u.set(s,a),e.l.set(n,u)}bf.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Bg(e,n,s){s=s===void 0?!1:s,n=e.l.get(n)||new Map;for(var a=[],u=C(e.m),f=u.next(),p={};!f.done;p={Td:void 0},f=u.next())if(p.Td=f.value,f=n.get(p.Td))a.push({Uh:p.Td,location:f});else if(f=e.G.find(function(y){return function(w){return w.cn==y.Td}}(p))){var g=n.get(f["BASE-ID"]);g&&(f["URI-REPLACEMENT"].rk?(g=new Cn(g),Nh(g,f["URI-REPLACEMENT"].rk),a.push({Uh:p.Td,location:g.toString()})):a.push({Uh:p.Td,location:g}))}for(u=Date.now(),p=C(e.j.keys()),f=p.next();!f.done;f=p.next())f=f.value,g=e.j.get(f),u>g&&e.j.delete(f);if(a=a.filter(function(y){for(var w=C(e.j.keys()),b=w.next();!b.done;b=w.next())if(b.value.includes(new Cn(y.location).Ib))return!1;return!0}),a.length&&(e.D=a[0].Uh),a=a.map(function(y){return y.location}),!a.length&&e.h)for(u=C(e.h.split(",")),p=u.next();!p.done;p=u.next())(p=n.get(p.value))&&(e.D=e.h,a.push(p));if(!a.length)for(n=C(n.values()),u=n.next();!u.done;u=n.next())a.push(u.value);return s?a:yr(e.i,a)}function Gi(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.u=!1,this.m=new Set}d=Gi.prototype,d.release=function(){for(var e=C(this.h.concat(this.g,this.j,this.i)),n=e.next();!n.done;n=e.next())n=n.value,n.segmentIndex&&n.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.u=!1,this.m.clear()},d.Al=function(){return this.l},d.Bh=function(){return this.j.slice()},d.Uk=function(){return this.i},d.Xi=function(e,n){if(e){if(e.type=="audio")for(var s=C(this.h),a=s.next();!a.done;a=s.next())a=a.value,a.matchedStreams=a.matchedStreams.filter(function(u){return u!==e});else if(e.type=="video")for(s=C(this.g),a=s.next();!a.done;a=s.next())a=a.value,a.matchedStreams=a.matchedStreams.filter(function(u){return u!==e}),a.trickModeVideo&&(a.trickModeVideo.matchedStreams=a.trickModeVideo.matchedStreams.filter(function(u){return u!==e})),a.dependencyStream&&(a.dependencyStream.matchedStreams=a.dependencyStream.matchedStreams.filter(function(u){return u!==e}));else if(e.type==mt)for(s=C(this.j),a=s.next();!a.done;a=s.next())a=a.value,a.matchedStreams=a.matchedStreams.filter(function(u){return u!==e});else if(e.type=="image")for(s=C(this.i),a=s.next();!a.done;a=s.next())a=a.value,a.matchedStreams=a.matchedStreams.filter(function(u){return u!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(n)}};function EO(e,n){var s=[],a=[],u=[],f=[];e=C(e);for(var p=e.next();!p.done;p=e.next()){var g=p.value;p=new Map(g.audioStreams.map(function(I){return[yA(I),I]}));var y=new Map(g.videoStreams.map(function(I){return[vA(I),I]})),w=new Map(g.textStreams.map(function(I){return[Vg(I),I]}));if(g=new Map(g.imageStreams.map(function(I){return[Gg(I),I]})),n){var b=RO(mt);w.set(Vg(b),b),b=RO("image"),g.set(Gg(b),b)}s.push(p),a.push(y),u.push(w),f.push(g)}return{Ni:s,nk:a,fk:u,lj:f}}d.Tg=function(e,n,s){s=s===void 0?!1:s;var a=this,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge,ve,Ie,Le,at;return X(function(je){if(je.g==1){if(u=qn,!n&&e.length==1)return f=EO(e,!1),p=f.Ni,g=f.nk,y=f.fk,w=f.lj,a.h=Array.from(p[0].values()),a.g=Array.from(g[0].values()),a.j=Array.from(y[0].values()),a.i=Array.from(w[0].values()),je.B(2);for(b=s?a.m.size:0,I=-1,L=0;L<e.length;L++)j=e[L],a.m.has(j.id)||(a.m.add(j.id),I==-1&&(I=L));return I==-1?je.return():(U=EO(e,!0),F=U.Ni,B=U.nk,q=U.fk,G=U.lj,O(je,Promise.all([Vu(a,a.h,F,I,If,Gu,b),Vu(a,a.g,B,I,If,Gu,b),Vu(a,a.j,q,I,If,Gu,b),Vu(a,a.i,G,I,If,Gu,b)]),2))}if(z=0,J=[],a.g.length&&a.h.length)for(ae=C(a.h),he=ae.next();!he.done;he=ae.next())for(Ee=he.value,Te=C(a.g),ge=Te.next();!ge.done;ge=Te.next())ve=ge.value,Ie=ED(Ee.drmInfos,ve.drmInfos),Ee.drmInfos.length&&ve.drmInfos.length&&!Ie.length||(Le=(Ee.bandwidth||0)+(ve.bandwidth||0),Ee.dependencyStream&&(Le+=Ee.dependencyStream.bandwidth||0),ve.dependencyStream&&(Le+=ve.dependencyStream.bandwidth||0),at=z++,J.push({id:at,language:Ee.language,disabledUntilTime:0,primary:Ee.primary,audio:Ee,video:ve,bandwidth:Le,drmInfos:Ie,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(ie=a.g.length?a.g:a.h,Y=C(ie),ne=Y.next();!ne.done;ne=Y.next())Z=ne.value,de=z++,te=Z.bandwidth||0,Z.dependencyStream&&(te+=Z.dependencyStream.bandwidth||0),J.push({id:de,language:Z.language,disabledUntilTime:0,primary:Z.primary,audio:Z.type==u.ia?Z:null,video:Z.type==u.Ga?Z:null,bandwidth:te,drmInfos:Z.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});a.l=J,re(je)})};function bO(e){var n,s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te;return X(function(ge){switch(ge.g){case 1:if(n=qn,e.length==1)return ge.return(e[0]);for(s=e.map(function(ve){return new Map(ve.filter(function(Ie){return Ie.type===n.ia}).map(function(Ie){return[yA(Ie),Ie]}))}),a=e.map(function(ve){return new Map(ve.filter(function(Ie){return Ie.type===n.Ga}).map(function(Ie){return[vA(Ie),Ie]}))}),u=e.map(function(ve){return new Map(ve.filter(function(Ie){return Ie.type===n.Va}).map(function(Ie){return[Vg(Ie),Ie]}))}),f=e.map(function(ve){return new Map(ve.filter(function(Ie){return Ie.type===n.Dg}).map(function(Ie){return[Gg(Ie),Ie]}))}),p=C(u),g=p.next();!g.done;g=p.next())y=g.value,w=_O(n.Va),y.set(Vg(w),w);for(b=C(f),I=b.next();!I.done;I=b.next())L=I.value,j=_O(n.Dg),L.set(Gg(j),j);return U=new Gi,O(ge,Vu(U,[],s,0,ox,ax,0),2);case 2:return F=ge.h,O(ge,Vu(U,[],a,0,ox,ax,0),3);case 3:return B=ge.h,O(ge,Vu(U,[],u,0,ox,ax,0),4);case 4:return q=ge.h,O(ge,Vu(U,[],f,0,ox,ax,0),5);case 5:if(G=ge.h,z=0,B.length&&F.length)for(Z=C(F),de=Z.next();!de.done;de=Z.next())for(te=de.value,ae=C(B),he=ae.next();!he.done;he=ae.next())Ee=he.value,Te=z++,Ee.variantIds.push(Te),te.variantIds.push(Te);else for(J=B.concat(F),ie=C(J),Y=ie.next();!Y.done;Y=ie.next())ne=Y.value,ne.variantIds=[z++];return ge.return(B.concat(F).concat(q).concat(G))}})}function Vu(e,n,s,a,u,f,p){var g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de;return X(function(te){switch(te.g){case 1:for(g=[],y=0;y<s.length;y++)y>=a?g.push(new Set(s[y].values())):g.push(new Set);w=C(n),b=w.next();case 2:if(b.done){te.B(4);break}return I=b.value,O(te,ine(e,I,s,a,f,g,p),5);case 5:if(L=te.h,!L)throw new oe(2,4,4037);b=w.next(),te.B(2);break;case 4:for(j=C(g),U=j.next();!U.done;U=j.next())for(F=U.value,B=C(F),q=B.next();!q.done;q=B.next())G=q.value,(z=sne(e,n,G,s,u,f,g))&&n.push(z);for(J=C(g),ie=J.next();!ie.done;ie=J.next())for(Y=ie.value,ne=C(Y),Z=ne.next(),de={};!Z.done;de={pi:void 0},Z=ne.next())if(de.pi=Z.value,!gA(de.pi)&&n.some(function(ae){return function(he){return mA(ae.pi,he)}}(de)))throw new oe(2,4,4037);return te.return(n)}})}function ine(e,n,s,a,u,f,p){return X(function(g){return g.g==1?(CO(e,s,n,p>0),n.matchedStreams?n.segmentIndex?O(g,AO(n,a+p),2):g.B(2):g.return(!1)):(IO(n,a,u,f,p),g.return(!0))})}function AO(e,n){var s,a,u,f,p,g;return X(function(y){if(y.g==1){for(s=[],a=e.matchedStreams,u=n;u<a.length;u++)f=a[u],s.push(f.createSegmentIndex()),f.trickModeVideo&&!f.trickModeVideo.segmentIndex&&s.push(f.trickModeVideo.createSegmentIndex()),f.dependencyStream&&!f.dependencyStream.segmentIndex&&s.push(f.dependencyStream.createSegmentIndex());return O(y,Promise.all(s),2)}if(e.segmentIndex instanceof wn)for(p=n;p<a.length;p++)g=a[p],g.segmentIndex&&e.segmentIndex.h.push(g.segmentIndex);re(y)})}function sne(e,n,s,a,u,f,p){if(gA(s))return null;var g=u(s);return CO(e,a,g),g.createSegmentIndex&&(g.createSegmentIndex=function(){return X(function(y){return g.segmentIndex?y.B(0):(g.segmentIndex=new wn,O(y,AO(g,0),0))})},g.closeSegmentIndex=function(){if(g.segmentIndex&&(g.segmentIndex.release(),g.segmentIndex=null),g.matchedStreams)for(var y=C(g.matchedStreams),w=y.next();!w.done;w=y.next()){w=w.value;var b;if(b=w.segmentIndex){e:{b=C(n);for(var I=b.next();!I.done;I=b.next())if(I=I.value,I!==g&&I.segmentIndex&&I.matchedStreams&&I.matchedStreams.includes(w)){b=!0;break e}b=!1}b=!b}b&&(w.segmentIndex.release(),w.segmentIndex=null)}}),!g.matchedStreams||!g.matchedStreams.length?null:(IO(g,0,f,p,0),g)}function IO(e,n,s,a,u){var f=e.matchedStreams;for(n+=u;n<f.length;n++){var p=f[n];s(e,p);var g=!0;if(e.type=="audio"&&rd(e.language,p.language)==0&&(g=!1),g&&((g=a[n-u])&&g.delete(p),p.fullMimeTypes))for(p=C(p.fullMimeTypes.values()),g=p.next();!g.done;g=p.next())e.fullMimeTypes.add(g.value)}}function If(e){var n=Object.assign({},e);return n.originalId=null,n.createSegmentIndex=function(){return Promise.resolve()},n.closeSegmentIndex=function(){},n.roles=n.roles.slice(),n.segmentIndex=null,n.emsgSchemeIdUris=[],n.keyIds=new Set(e.keyIds),n.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,n.trickModeVideo=null,n.dependencyStream=null,n}function ox(e){var n=Object.assign({},e);return n.roles=n.roles.slice(),n.keyIds=new Set(e.keyIds),n.segments=[],n.variantIds=[],n.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,n}function Gu(e,n){function s(p,g){p||(p=[]),g=C(g);for(var y=g.next();!y.done;y=g.next())y=y.value,p.includes(y)||p.push(y);return p}e.roles=s(e.roles,n.roles),n.emsgSchemeIdUris&&(e.emsgSchemeIdUris=s(e.emsgSchemeIdUris,n.emsgSchemeIdUris));for(var a=C(n.keyIds),u=a.next();!u.done;u=a.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=n.originalId:(a=n.originalId||"")&&!e.originalId.endsWith(a)&&(e.originalId+=","+a),a=ED(e.drmInfos,n.drmInfos),n.drmInfos.length&&e.drmInfos.length&&!a.length)throw new oe(2,4,4038);if(e.drmInfos=a,e.encrypted=e.encrypted||n.encrypted,n.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),a=C(n.closedCaptions),u=a.next();!u.done;u=a.next()){var f=C(u.value);u=f.next().value,f=f.next().value,e.closedCaptions.set(u,f)}e.bandwidth&&n.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,n.bandwidth)),n.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=If(n.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var p=new wn,g=C(e.trickModeVideo.matchedStreams),y=g.next();!y.done;y=g.next())p.h.push(y.value.segmentIndex);return e.trickModeVideo.segmentIndex=p,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(n.trickModeVideo),Gu(e.trickModeVideo,n.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(n),Gu(e.trickModeVideo,n)),n.dependencyStream?(e.dependencyStream||(e.dependencyStream=If(n.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var p=new wn,g=C(e.dependencyStream.matchedStreams),y=g.next();!y.done;y=g.next())p.h.push(y.value.segmentIndex);return e.dependencyStream.segmentIndex=p,Promise.resolve()}),e.dependencyStream.matchedStreams.push(n.dependencyStream),Gu(e.dependencyStream,n.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(n),Gu(e.dependencyStream,n))}function ax(e,n){var s=e.roles;s||(s=[]);for(var a=C(n.roles),u=a.next();!u.done;u=a.next())u=u.value,s.includes(u)||s.push(u);for(e.roles=s,s=C(n.keyIds),a=s.next();!a.done;a=s.next())e.keyIds.add(a.value);if(e.encrypted=e.encrypted&&n.encrypted,e.segments.push.apply(e.segments,K(n.segments)),n.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=C(n.closedCaptions),s=n.next();!s.done;s=n.next())a=C(s.value),s=a.next().value,a=a.next().value,e.closedCaptions.set(s,a)}function CO(e,n,s,a){a=a!==void 0&&a?s.matchedStreams:[],n=C(n);for(var u=n.next();!u.done;u=n.next()){if(u=one(e,u.value,s),!u)return;a.push(u)}s.matchedStreams=a}function one(e,n,s){var a={audio:yA,video:vA,text:Vg,image:Gg}[s.type],u=null,f=a(s);if(n.has(f))u=n.get(f);else{f={audio:function(w,b){return mA(w,b)},video:function(w,b){return mA(w,b)},text:ane,image:lne}[s.type];for(var p={audio:une,video:cne,text:dne,image:hne}[s.type],g=C(n.values()),y=g.next();!y.done;y=g.next())y=y.value,!f(s,y)||s.fastSwitching!=y.fastSwitching||u&&!p(s,u,y)||(u=y)}return e.u&&!gA(u)&&n.delete(a(u)),u}function kO(e,n){return e.mimeType!=n.mimeType?!1:DO(e.codecs)===DO(n.codecs)}d.Uj=function(e){this.u=e};function mA(e,n){return!(e.drmInfos&&!wD(e.drmInfos,n.drmInfos))}function ane(e,n){return n.language?!(e.forced!==n.forced||rd(e.language,n.language)==0||n.kind!=e.kind):!0}function lne(){return!0}function une(e,n,s){var a=LO(e,n,s);if(a===is)return!0;if(a===qs)return!1;a=rd(e.language,n.language);var u=rd(e.language,s.language);if(u>a)return!0;if(u<a)return!1;if(n.label!==s.label){if(e.label===n.label)return!1;if(e.label===s.label)return!0}if(e.roles.length){if(a=n.roles.filter(function(f){return e.roles.includes(f)}),u=s.roles.filter(function(f){return e.roles.includes(f)}),u.length>a.length)return!0;if(u.length<a.length)return!1;if(s.roles.length!==n.roles.length)return s.roles.length<n.roles.length}else{if(!s.roles.length&&n.roles.length)return!0;if(s.roles.length&&!n.roles.length)return!1}return!n.primary&&s.primary?!0:n.primary&&!s.primary?!1:(a=$g(e.channelsCount,n.channelsCount,s.channelsCount),a==is?!0:a==qs?!1:(a=$g(e.audioSamplingRate,n.audioSamplingRate,s.audioSamplingRate),a==is?!0:a==qs?!1:!!(e.bandwidth&&PO(e.bandwidth,n.bandwidth,s.bandwidth)==is)))}function cne(e,n,s){var a=LO(e,n,s);if(a===is)return!0;if(a===qs)return!1;if(a=$g(e.width*e.height,n.width*n.height,s.width*s.height),a==is)return!0;if(a==qs)return!1;if(e.frameRate){if(a=$g(e.frameRate,n.frameRate,s.frameRate),a==is)return!0;if(a==qs)return!1}return!!(e.bandwidth&&PO(e.bandwidth,n.bandwidth,s.bandwidth)==is)}function dne(e,n,s){var a=rd(e.language,n.language),u=rd(e.language,s.language);if(u>a)return!0;if(u<a)return!1;if(!n.primary&&s.primary)return!0;if(n.primary&&!s.primary)return!1;if(n.label!==s.label){if(e.label===n.label)return!1;if(e.label===s.label)return!0}if(e.roles.length){if(a=n.roles.filter(function(f){return e.roles.includes(f)}),u=s.roles.filter(function(f){return e.roles.includes(f)}),u.length>a.length)return!0;if(u.length<a.length)return!1}else{if(!s.roles.length&&n.roles.length)return!0;if(s.roles.length&&!n.roles.length)return!1}return!(s.mimeType!=e.mimeType||s.codecs!=e.codecs||n.mimeType==e.mimeType&&n.codecs==e.codecs)}function hne(e,n,s){return $g(e.width*e.height,n.width*n.height,s.width*s.height)==is}function _O(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function RO(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new jt([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function $g(e,n,s){if(n==e&&e!=s)return qs;if(s==e&&e!=n)return is;if(n>e){if(s<=e||s-e<n-e)return is;if(s-e>n-e)return qs}else{if(s>e)return qs;if(e-s<e-n)return is;if(e-s>e-n)return qs}return xA}function LO(e,n,s){var a=e.mimeType===n.mimeType&&e.codecs===n.codecs,u=e.mimeType===s.mimeType&&e.codecs===s.codecs;return a&&!u?qs:!a&&u?is:(n=kO(e,n),e=kO(e,s),n&&!e?qs:!n&&e?is:xA)}function PO(e,n,s){return n=Math.abs(e-n),e=Math.abs(e-s),e<n?is:n<e?qs:xA}function gA(e){switch(e.type){case mt:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function vA(e){return lx([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function yA(e){return lx([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Vg(e){return lx([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Gg(e){return lx([e.width,e.codecs,e.mimeType])}function lx(e){return JSON.stringify(e)}function DO(e){if(!TA.has(e)){var n=Dn(e);TA.set(e,n)}return TA.get(e)}xe("shaka.util.PeriodCombiner",Gi),Gi.prototype.setUseStreamOnce=Gi.prototype.Uj,Gi.prototype.combinePeriods=Gi.prototype.Tg,Gi.prototype.deleteStream=Gi.prototype.Xi,Gi.prototype.getImageStreams=Gi.prototype.Uk,Gi.prototype.getTextStreams=Gi.prototype.Bh,Gi.prototype.getVariants=Gi.prototype.Al;var is=1,xA=0,qs=-1,TA=new Map;function fne(e,n){var s=new DOMParser,a=pne.value()(e);e=null;try{e=s.parseFromString(a,"text/xml")}catch{return null}if(s=e.documentElement,!s||s.getElementsByTagName("parsererror").length||s.tagName!=n)return null;if(!("createNodeIterator"in document))return s;for(n=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=n.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return s}function NO(e,n){try{var s=Aa(e);return fne(s,n)}catch{return null}}var pne=new gn(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(n){return n}});return function(n){return e.createHTML(n)}}return function(n){return n}});function Hg(){var e=this;this.j=this.g=null,this.C=[],this.h=null,this.Fa=1,this.H=[],this.l={Tf:"",type:"",profiles:[],Fc:null,zb:0,ib:null,Je:0},this.A=new Map,this.D=new Map,this.u=new Map,this.F=new Map,this.ua=new Map,this.m=new Gi,this.K=0,this.ya=new Uh(5),this.L=new Ke(function(){if(e.J&&!e.g.continueLoadingWhenPaused&&(e.I.Ea(e.J,"timeupdate"),e.J.paused)){e.I.qa(e.J,"timeupdate",function(){return $O(e)});return}$O(e)}),this.P=new Wh,this.O=null,this.G=[],this.Z=1/0,this.oa=!1,this.i=null,this.M=0,this.R=!1,this.I=new Dt,this.J=null,this.T=!1,this.W="",this.ea=function(){return!1},this.V=[],this.aa=new Set,this.sa=new uO}d=Hg.prototype,d.configure=function(e,n){var s=this.j&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,n&&(this.ea=n),s&&this.h&&this.h.presentationTimeline.U()&&this.L.Ka(),this.i&&this.i.configure(this.g),this.m&&this.m.Uj(this.g.dash.useStreamOnceInPeriodFlattening)},d.start=function(e,n){var s=this,a;return X(function(u){if(u.g==1)return s.oa=n.isLowLatencyMode(),s.C=[e],s.j=n,O(u,SA(s),2);if(a=u.h,s.j&&wA(s,a),!s.j)throw new oe(2,7,7001);return u.return(s.h)})},d.stop=function(){for(var e=C(this.u.values()),n=e.next();!n.done;n=e.next())n=n.value,n.segmentIndex&&n.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.C=[],this.h=null,this.u.clear(),this.F.clear(),this.A.clear(),this.D.clear(),this.l={Tf:"",type:"",profiles:[],Fc:null,zb:0,ib:null,Je:0},this.m=null,this.L!=null&&(this.L.stop(),this.L=null),this.i&&this.i.destroy(),this.I&&(this.I.release(),this.I=null),this.aa.clear(),this.sa.release(),this.P.destroy()},d.update=function(){var e=this,n;return X(function(s){if(s.g==1)return ce(s,2),O(s,SA(e),4);if(s.g!=2)return se(s,0);if(n=ue(s),!e.j||!n)return s.return();e.j.onError(n),re(s)})},d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.U()){var n=e.video||e.audio;if(n&&n.segmentIndex){e=this.h.presentationTimeline.Tc();var s=n.segmentIndex.find(e);s!=null&&(n=n.segmentIndex.get(s))&&(this.K=n.endTime-e,wA(this,0))}}},d.banLocation=function(e){this.i&&this.i.banLocation(e)},d.setMediaElement=function(e){this.J=e};function SA(e){var n,s,a,u,f,p,g,y,w,b,I;return X(function(L){return L.g==1?(n=4,s="MPD",a=_ne(e),u=e.C,a.length?(u=a,s="Patch",n=6):e.C.length>1&&e.i&&(f=Bg(e.i,"Location",!0),f.length&&(u=f)),p=Kn(u,e.g.retryParameters),g=Date.now(),O(L,bA(e,p,0,{type:n}),2)):L.g!=3?(y=L.h,e.j?(y.uri&&y.uri!=y.originalUri&&!e.C.includes(y.uri)&&e.C.unshift(y.uri),w=new Cn(y.uri),e.W=w.g.toString(),O(L,mne(e,y.data,y.uri,s),3)):L.return(0)):(b=Date.now(),I=(b-g)/1e3,e.ya.sample(1,I),e.aa.clear(),L.return(I))})}function mne(e,n,s,a){var u,f,p,g,y,w,b,I,L,j;return X(function(U){if(U.g==1){if(u=n,f=e.g.dash.manifestPreprocessor,p=S1,f!=p){if(Nt("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),g=NO(u,a),!g)throw new oe(2,4,4001,s);f(g),u=To(g.outerHTML)}if(y=Bm(u,a),!y)throw new oe(2,4,4001,s);return w=e.g.dash.manifestPreprocessorTXml,b=w1,w!=b&&w(y),a==="Patch"?U.return(gne(e,y)):e.g.dash.disableXlinkProcessing?U.return(MO(e,y,s)):(I=e.g.dash.xlinkFailGracefully,L=sx(y,e.g.retryParameters,I,s,e.j.networkingEngine),md(e.P,L),O(U,L.promise,2))}return j=U.h,U.return(MO(e,j,s))})}function MO(e,n,s){var a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge,ve,Ie,Le,at,je,Vt,ct,Xt,At,St,kt,Ut,_t,wt,It,lr,Jn,Cs,qi,Ai,jd,Gl,_o,Uf,Ff,ST;return X(function(Ro){switch(Ro.g){case 1:for(e.i&&e.i.l.clear(),a=[s],u=[],f=new Map,p=Yt(n,"Location"),g=C(p),y=g.next();!y.done;y=g.next())w=y.value,b=w.attributes.serviceLocation,(I=xi(w))&&(L=yr(a,[I])[0],b&&(e.i?Af(e.i,"Location",b,L):f.set(b,L)),u.push(L));if(e.i?(j=Bg(e.i,"Location",!0),j.length>0&&(a=e.C=j)):u.length&&(a=e.C=u),e.l.Tf=n.attributes.id||"",e.l.Je=rt(n,"publishTime",yl)||0,e.H=Yt(n,"PatchLocation"),U=Promise.resolve(),(F=fn(n,"ContentSteering"))&&e.j)for(B=F.attributes.defaultServiceLocation,e.i?(e.i.i=a,e.i.h=B):(e.i=new bf(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=a,e.i.h=B,(q=xi(F))&&(rt(F,"queryBeforeStart",ky,!1)?U=Fg(e.i,q):Fg(e.i,q))),G=C(f.keys()),z=G.next();!z.done;z=G.next())J=z.value,ie=f.get(J),Af(e.i,"Location",J,ie);if(Y=Yt(n,"BaseURL"),ne=!1,e.i)for(Z=C(Y),de=Z.next();!de.done;de=Z.next())te=de.value,ae=te.attributes.serviceLocation,he=xi(te),ae&&he&&(Af(e.i,"BaseURL",ae,he),ne=!0);if(e.V.splice(0),ne&&e.i||(Ee=Y.map(xi),e.V.push.apply(e.V,K(yr(a,Ee)))),Te=e.i,ge=e.V,ve=Rne,Ie=ve.call(Hg,Te,ne,ge),e.l.ib=Ie,Le=0,Y&&Y.length&&(Le=rt(Y[0],"availabilityTimeOffset",Cy)||0),e.l.zb=Le,e.K=rt(n,"minimumUpdatePeriod",Ca,-1),at=rt(n,"availabilityStartTime",yl),je=rt(n,"timeShiftBufferDepth",Ca),Vt=e.g.dash.ignoreSuggestedPresentationDelay,ct=null,Vt||(ct=rt(n,"suggestedPresentationDelay",Ca)),Xt=e.g.dash.ignoreMaxSegmentDuration,At=null,Xt||(At=rt(n,"maxSegmentDuration",Ca)),St=n.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.T=e.h.presentationTimeline.U()&&St=="static"),e.l.type=St,e.h)for(kt=e.h.presentationTimeline,Ut=kt.Mb(),_t=C(e.u.values()),wt=_t.next();!wt.done;wt=_t.next())It=wt.value,It.segmentIndex&&It.segmentIndex.eb(Ut);else lr=e.g.dash.ignoreMinBufferTime,Jn=0,lr||(Jn=rt(n,"minBufferTime",Ca)||0),Cs=0,Cs=ct!=null?Math.min(ct,je||1/0):e.g.defaultPresentationDelay>0?e.g.defaultPresentationDelay:Math.min(Jn*1.5,je||1/0),kt=new tt(at,Cs,e.g.dash.autoCorrectDrift);return kt.td(St=="static"),kt.U()&&!isNaN(e.g.availabilityWindowOverride)&&(je=e.g.availabilityWindowOverride),je==null&&(je=1/0),kt.mg(je),qi=n.attributes.profiles||"",e.l.profiles=qi.split(","),Ai={Jb:St!="static",presentationTimeline:kt,Aa:null,ra:null,va:null,N:null,bandwidth:0,Gh:!1,zb:Le,Fc:null,profiles:qi.split(","),roles:null,Rb:qO},O(Ro,U,2);case 2:return e.M=0,jd=FO(e,Ai,Ie,n,!1),Gl=jd.duration,_o=jd.periods,(St!="static"||e.T)&&jd.Zi||kt.Fb(Gl||1/0),e.R&&e.oa&&kt.Pj(e.Z),kt.Ph(At||1),e.R&&e.oa&&(Uf=ct??e.g.defaultPresentationDelay,kt.ii(Uf)),e.h?(e.h.periodCount=_o.length,e.h.gapCount=e.M,O(Ro,OO(e,_o,!1),4)):O(Ro,e.m.Tg(_o,Ai.Jb),6);case 6:var wT=kt,ZC=e.m.l,ET=e.m.Bh(),Bf=e.m.i,m0=e.g.dash.sequenceMode,Zn=fn(n,"ServiceDescription");if(Zn){var os=fn(Zn,"Latency");if(Zn=fn(Zn,"PlaybackRate"),os||Zn){var Ii={};os&&("target"in os.attributes&&(Ii.targetLatency=parseInt(os.attributes.target,10)/1e3),"max"in os.attributes&&(Ii.maxLatency=parseInt(os.attributes.max,10)/1e3),"min"in os.attributes&&(Ii.minLatency=parseInt(os.attributes.min,10)/1e3)),Zn&&("max"in Zn.attributes&&(Ii.maxPlaybackRate=parseFloat(Zn.attributes.max)),"min"in Zn.attributes&&(Ii.minPlaybackRate=parseFloat(Zn.attributes.min))),os=Ii}else os=null}else os=null;e:{if(Zn=Yt(n,"SupplementalProperty"),Zn.length){for(Zn=C(Zn),Ii=Zn.next();!Ii.done;Ii=Zn.next())if(Ii=Ii.value,Ii.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016"){Zn=Ii.attributes.value;break e}}Zn=null}if(e.h={presentationTimeline:wT,variants:ZC,textStreams:ET,imageStreams:Bf,offlineSessionIds:[],sequenceMode:m0,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:os,nextUrl:Zn,periodCount:_o.length,gapCount:e.M,isLowLatency:e.R,startTime:null},!kt.jk()){Ro.B(7);break}return Ff=Yt(n,"UTCTiming"),O(Ro,Cne(e,Ie,Ff),8);case 8:if(ST=Ro.h,!e.j)return Ro.return();kt.Qj(ST);case 7:kt.Pf(),e.m&&!e.h.presentationTimeline.U()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),yne(e),xne(e,_o),re(Ro)}})}function OO(e,n,s){var a;return X(function(u){if(u.g==1)return O(u,e.m.Tg(n,!0,s),2);e.h.variants=e.m.l,a=e.m.Bh(),a.length>0&&(e.h.textStreams=a),e.h.imageStreams=e.m.i,e.j.filter(e.h),re(u)})}function gne(e,n){var s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he;return X(function(Ee){if(Ee.g==1){if(s=n.attributes.mpdId,a=rt(n,"originalPublishTime",yl),!s||s!==e.l.Tf||a!==e.l.Je)throw e.H=[],new oe(1,4,4052);for(u=[],f=[],p=new Set,g=C(BD(n)),y=g.next();!y.done;y=g.next())if(w=y.value,b=_y(w.attributes.sel||""),I=b[b.length-1],L=xi(w)||"",I.name==="MPD")if(I.Oc==="mediaPresentationDuration"){j=xi(w)||"";var Te=Ca(j);if(Te!=null){e.l.Fc=Te;for(var ge=C(e.A.values()),ve=ge.next();!ve.done;ve=ge.next())ve.value.Fc=Te}}else if(I.Oc==="type"){for(e.h.presentationTimeline.td(L=="static"),e.l.type=L,Te=C(e.A.values()),ge=Te.next();!ge.done;ge=Te.next())ge.value.Jb=L=="dynamic";L=="static"&&(e.K=-1)}else I.Oc==="publishTime"?e.l.Je=yl(L)||0:I.Oc===null&&w.tagName==="add"&&f.push(w);else if(I.name==="PatchLocation")VD(e.H,w);else if(I.name==="Period")w.tagName==="add"?f.push(w):w.tagName==="remove"&&I.id&&vne(e,I.id);else if(I.name==="SegmentTemplate"){if(ge=_y(w.attributes.sel||""),Te=ge[ge.length-1],Te.Oc){ge=jO(e,ge),ve=xi(w)||"";for(var Ie=C(ge),Le=Ie.next();!Le.done;Le=Ie.next())Le=e.A.get(Le.value),HD(Le.N.bd,w.tagName,Te.Oc,ve);Te=ge}else Te=[];for(U=Te,F=C(U),B=F.next();!B.done;B=F.next())q=B.value,p.add(q)}else if(I.name==="SegmentTimeline"||I.name==="S"){for(Te=_y(w.attributes.sel||""),Te=jO(e,Te),ge=C(Te),ve=ge.next();!ve.done;ve=ge.next())ve=e.A.get(ve.value),ve=wf(ve,$u,"SegmentTimeline"),Ie=Yt(ve,"S"),VD(Ie,w),ve.children=Ie;for(G=Te,z=C(G),J=z.next();!J.done;J=z.next())ie=J.value,p.add(ie)}for(Y=C(p),ne=Y.next();!ne.done;ne=Y.next())Z=ne.value,UO(e,Z);for(de=C(f),te=de.next();!te.done;te=de.next())ae=te.value,u.push.apply(u,K(FO(e,{Jb:e.l.type=="dynamic",presentationTimeline:e.h.presentationTimeline,Aa:null,ra:null,va:null,N:null,bandwidth:0,Gh:!1,zb:e.l.zb,profiles:e.l.profiles,Fc:e.l.Fc,roles:null,Rb:qO},e.l.ib,ae,!0).periods));return u.length?(e.h.periodCount+=u.length,e.h.gapCount=e.M,O(Ee,OO(e,u,!0),2)):Ee.B(2)}e.l.type=="static"&&(he=e.l.Fc,e.h.presentationTimeline.Fb(he||1/0)),re(Ee)})}function vne(e,n){e.h.periodCount--;for(var s=C(e.A.keys()),a=s.next();!a.done;a=s.next())if(a=a.value,a.startsWith(n)){var u=e.A.get(a);wf(u,$u,"SegmentTimeline").children=[],UO(e,a),e.A.delete(a)}e.G=e.G.filter(function(f){return f!==n})}function jO(e,n){var s="",a="",u=-1,f="";n=C(n);for(var p=n.next();!p.done;p=n.next())p=p.value,p.name==="Period"?s=p.id:p.name==="AdaptationSet"?(a=p.id,p.position!==null&&(u=p.position)):p.name==="Representation"&&(f=p.id);if(n=[],f)n.push(s+","+f);else if(a)for(u=C(e.A.values()),e=u.next();!e.done;e=u.next())e=e.value,e.Aa.id===s&&e.va.id===a&&e.N.id&&n.push(s+","+e.N.id);else if(u>-1)for(a=C(e.A.values()),e=a.next();!e.done;e=a.next())e=e.value,e.Aa.id===s&&e.va.position===u&&e.N.id&&n.push(s+","+e.N.id);return n}function UO(e,n){var s=e.A.get(n),a=e.u.get(n);a.segmentIndex&&a.segmentIndex.eb(e.h.presentationTimeline.Mb());try{var u=TO(s,function(f,p,g,y){return GO(e,f,p,g,y)},e.u,!0,e.g.dash.initialSegmentLimit,e.ua,s.N.aesKey,null,!0,e.D);a.createSegmentIndex=function(){return X(function(f){if(f.g==1)return a.segmentIndex?f.B(0):O(f,u.hd(),3);a.segmentIndex=f.h,re(f)})}}catch(f){if(n=s.N.contentType,n!=mt&&n!="application"&&n!="image"||f.code!=4002)throw f}}function FO(e,n,s,a,u){var f=n.Fc;f||(f=rt(a,"mediaPresentationDuration",Ca),e.l.Fc=f);var p=0;e.h&&e.h.presentationTimeline&&e.T&&(p=e.h.presentationTimeline.hc());var g=[],y=p;a=Yt(a,"Period");for(var w=0;w<a.length;w++){var b=a[w],I=a[w+1],L=rt(b,"start",Ca,y),j=b.attributes.id,U=rt(b,"duration",Ca);L=w==0&&L==0&&e.T?p:L;var F=null;if(I){var B=rt(I,"start",Ca);B!=null&&(F=B-L+p)}else f!=null&&(F=f-L+p);if(B=AD,F&&U&&Math.abs(F-U)>B&&F>U&&e.M++,F==null&&(F=U),!(e.O!==null&&j!==null&&L!==null&&L<e.O)||e.G.includes(j)||w+1==a.length){if(L!==null&&(e.O===null||L>e.O)&&(e.O=L),y=Tne(e,n,s,{start:L,duration:F,node:b,If:F==null||!I}),g.push(y),n.Aa.id&&F&&e.ua.set(n.Aa.id,F),F==null){y=null;break}y=L+F}}if(u)for(n=C(g),s=n.next();!s.done;s=n.next())s=s.value.id,e.G.includes(s)||e.G.push(s);else e.G=g.map(function(q){return q.id});return f!=null?{periods:g,duration:f+p,Zi:!1}:{periods:g,duration:y,Zi:!0}}function yne(e){var n=Array.from(e.F.keys()).filter(function(g){return!e.G.includes(g)});n=C(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;for(var a=!0,u=C(e.F.get(s)),f=u.next();!f.done;f=u.next()){f=f.value;var p=e.u.get(f);p&&(p.segmentIndex&&p.segmentIndex.getNumReferences()!=0?a=!1:(e.m&&e.m.Xi(p,s),e.u.delete(f)))}a&&e.F.delete(s)}}function xne(e,n){n=new Set(n.map(function(u){return u.id}));for(var s=C(e.D.keys()),a=s.next();!a.done;a=s.next())a=a.value,n.has(a)||e.D.delete(a)}function Tne(e,n,s,a){n.Aa=EA(e,a.node,null,s),n.ra=a,n.Aa.zb=n.zb,n.Aa.id||(n.Aa.id="__shaka_period_"+a.start);var u=Yt(a.node,"EventStream");s=n.presentationTimeline.Mb(),u=C(u);for(var f=u.next();!f.done;f=u.next())kne(e,a.start,a.duration,f.value,s);for(s=Yt(a.node,"SupplementalProperty"),s=C(s),u=s.next();!u.done;u=s.next())u=u.value,u.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(u=qg(e,u))&&(n.Rb=u);if(s=Yt(a.node,"AdaptationSet").map(function(j,U){return BO(e,n,U,j)}).filter(_u),n.Jb){u=[],f=C(s);for(var p=f.next();!p.done;p=f.next()){p=C(p.value.lm);for(var g=p.next();!g.done;g=p.next())u.push(g.value)}if(u.length!=new Set(u).size)throw new oe(2,4,4018)}for(u=new Map,f=C(s),p=f.next();!p.done;p=f.next())for(p=C(p.value.Dk),g=p.next();!g.done;g=p.next()){var y=C(g.value);g=y.next().value,y=y.next().value,u.set(g,y)}if(u.size)for(f=null,p=C(s),g=p.next();!g.done;g=p.next()){g=g.value,y=[];for(var w=C(g.streams),b=w.next(),I={};!b.done;I={ri:void 0},b=w.next())if(I.ri=b.value,u.has(I.ri.originalId)){f||(f=Yt(a.node,"AdaptationSet").map(function(j,U){return BO(e,n,U,j)}).filter(_u)),b=C(f);for(var L=b.next();!L.done;L=b.next())(L=L.value.streams.find(function(j){return function(U){return U.originalId==j.ri.originalId}}(I)))&&(L.dependencyStream=u.get(L.originalId),L.originalId+=L.dependencyStream.originalId,y.push(L))}y.length&&g.streams.push.apply(g.streams,K(y))}if(a=s.filter(function(j){return!j.Bi}),s=s.filter(function(j){return j.Bi}),!e.g.disableIFrames){for(s=C(s),u=s.next();!u.done;u=s.next())for(u=u.value,f=u.Bi.split(" "),p=C(a),g=p.next();!g.done;g=p.next())if(g=g.value,f.includes(g.id))for(g=C(g.streams),y=g.next();!y.done;y=g.next())f3(y.value,u.streams)}if(s=ux(e.g.disableAudio,a,"audio"),u=ux(e.g.disableVideo,a,"video"),f=ux(e.g.disableText,a,mt),a=ux(e.g.disableThumbnails,a,"image"),u.length===0&&s.length===0)throw new oe(2,4,4004);return{id:n.Aa.id,audioStreams:s,videoStreams:u,textStreams:f,imageStreams:a}}function ux(e,n,s){return e||!n.length?[]:n.reduce(function(a,u){return u.contentType!=s||a.push.apply(a,K(u.streams)),a},[])}function BO(e,n,s,a){function u(he){var Ee=he.attributes["dvb:fontFamily"];he=he.attributes["dvb:url"],Ee&&he&&(he=yr(n.va.ib(),[he],n.Rb()),e.j.addFont(Ee,he[0]))}function f(he){switch(he){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function p(he){switch(he){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}n.va=EA(e,a,n.Aa,null),n.va.position=s;var g=!1;s=Yt(a,"Role");var y=s.map(function(he){return he.attributes.value}).filter(_u),w=void 0,b=n.va.contentType==mt;b&&(w="subtitle"),s=C(s);for(var I=s.next();!I.done;I=s.next()){I=I.value;var L=I.attributes.schemeIdUri;if(L==null||L=="urn:mpeg:dash:role:2011")switch(I=I.attributes.value,I){case"main":g=!0;break;case"caption":case"subtitle":w=I}}var j=Yt(a,"EssentialProperty");s=null;var U=!1;I=null,L=!1,j=C(j);for(var F=j.next();!F.done;F=j.next()){F=F.value;var B=F.attributes.schemeIdUri;if(B=="http://dashif.org/guidelines/trickmode")s=F.attributes.value;else if(B=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var q=p(parseInt(F.attributes.value,10));else if(B=="urn:mpeg:mpegB:cicp:ColourPrimaries")var G=f(parseInt(F.attributes.value,10));else B!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(B=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?U=!0:B=="urn:dvb:dash:fontdownload:2014"?u(F):B=="urn:mpeg:dash:urlparam:2014"&&(I=qg(e,F))||(L=!0))}if(L)return null;var z=null;for(L=Yt(a,"SupplementalProperty"),L=C(L),j=L.next();!j.done;j=L.next())j=j.value,F=j.attributes.schemeIdUri,F=="http://dashif.org/guidelines/last-segment-number"?z=parseInt(j.attributes.value,10)-1:F=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?q=p(parseInt(j.attributes.value,10)):F=="urn:mpeg:mpegB:cicp:ColourPrimaries"?G=f(parseInt(j.attributes.value,10)):F=="urn:dvb:dash:fontdownload:2014"?u(j):F=="urn:mpeg:dash:urlparam:2014"&&(I=qg(e,j));I&&(n.Rb=I),I=Yt(a,"Accessibility");var J=new Map,ie;for(I=C(I),L=I.next();!L.done;L=I.next())if(j=L.value,L=j.attributes.schemeIdUri,j=j.attributes.value,L!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(L!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)L=="urn:mpeg:dash:role:2011"?j!=null&&(y.push(j),j=="captions"&&(w="caption")):L=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(j=="1"?ie="visually impaired":j=="2"?ie="hard of hearing":j=="9"&&(ie="spoken subtitles"));else if(L=1,j!=null)for(j=C(j.split(";")),F=j.next();!F.done;F=j.next()){B=F.value;var Y=F=void 0;B.includes("=")?(B=B.split("="),F="svc"+B[0],Y=B[1].split(",")[0].split(":").pop()):(F="svc"+L,L++,Y=B),J.set(F,Ht(Y))}else J.set("svc1","und");else if(L=1,j!=null)for(j=j.split(";"),F=C(j),B=F.next();!B.done;B=F.next()){Y=B.value;var ne=B=void 0;Y.includes("=")?(Y=Y.split("="),B=Y[0].startsWith("CC")?Y[0]:"CC"+Y[0],ne=Y[1]||"und"):(B="CC"+L,j.length==2?L+=2:L++,ne=Y),J.set(B,Ht(ne))}else J.set("CC1","und");I=Yt(a,"ContentProtection");var Z=cO(e.sa,I,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);n.va.encrypted=I.length>0;var de=Ht(n.va.language||"und"),te=n.va.label,ae=new Map;if(a=Yt(a,"Representation"),!e.g.ignoreSupplementalCodecs){for(I=[],L=C(a),j=L.next();!j.done;j=L.next())F=j.value,(j=vl(F,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(F=Eo(F),F.attributes.codecs=j.split(" ").join(","),F.attributes.id&&(F.attributes.supplementalId=F.attributes.id+"_supplementalCodecs"),I.push(F));a.push.apply(a,K(I))}if(I=a.map(function(he){var Ee=Sne(e,n,Z,w,de,te,g,y,J,he,ie,z);return Ee&&(Ee.hdr=Ee.hdr||q,Ee.colorGamut=Ee.colorGamut||G,Ee.fastSwitching=U,he=he.attributes.dependencyId)?(Ee.baseOriginalId=he,ae.set(he,Ee),null):Ee}).filter(function(he){return!!he}),I.length==0&&ae.size==0){if(s=n.va.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||b||s)return null;throw new oe(2,4,4003)}if(!n.va.contentType||n.va.contentType=="application")for(n.va.contentType=HO(I[0].mimeType,I[0].codecs),b=C(I),L=b.next();!L.done;L=b.next())L.value.type=n.va.contentType;for(b=n.va.id||"__fake__"+e.Fa++,L=C(I),j=L.next();!j.done;j=L.next()){for(j=j.value,F=C(Z.drmInfos),B=F.next();!B.done;B=F.next())B=B.value,B.keyIds=B.keyIds&&j.keyIds?new Set([].concat(K(B.keyIds),K(j.keyIds))):B.keyIds||j.keyIds;e.g.enableAudioGroups&&(j.groupId=b)}return a=a.map(function(he){return he.attributes.supplementalId||he.attributes.id}).filter(_u),{id:b,contentType:n.va.contentType,language:de,Un:g,streams:I,drmInfos:Z.drmInfos,Bi:s,lm:a,Dk:ae}}function qg(e,n){if((n=$s(n,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&rt(n,"useMPDUrlQuery",ky,!1)){var s=n.attributes.queryTemplate;if(s)return function(){return s=="$querypart$"?e.W:s.split("&").map(function(a){if(a=="$querypart$")return e.W;var u=/\$query:(.*?)\$/g.exec(a);if(u&&u.length==2){u=u[1];var f=new li(e.W).get(u);if(f.length)return u+"="+f[0]}return a}).join("&")}}return null}function Sne(e,n,s,a,u,f,p,g,y,w,b,I){n.N=EA(e,w,n.va,null);var L=n.N.id;if(e.Z=Math.min(e.Z,n.N.zb),e.R=e.Z>0,!Ine(n.N))return null;var j=n.ra.start;n.bandwidth=rt(w,"bandwidth",ka)||0,n.roles=g;var U=Yt(w,"SupplementalProperty"),F=Yt(w,"EssentialProperty"),B=Yt(w,"ContentProtection");w=null;var q=F.find(function(ge){return ge.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(q||(q=U.find(function(ge){return ge.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(w=qg(e,q)),w&&(n.Rb=w),q=n.N.contentType,w=q==mt||q=="application",q=q=="image",B.length&&(n.va.encrypted=!0);try{var G=void 0;if(s.Mg){var z=n.N.ib,J=n.Rb,ie=yr(z(),[s.Mg.Nl],J()),Y=Kn(ie,e.g.retryParameters);G={bitsKey:128,blockCipherMode:"CBC",iv:s.Mg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var ge,ve,Ie;return X(function(Le){if(Le.g==1)return O(Le,bA(e,Y,6),2);if(Le.g!=3){if(ge=Le.h,!ge.data||ge.data.byteLength!=16)throw new oe(2,4,4049);return ve={name:"AES-CBC"},Ie=G,O(Le,l.crypto.subtle.importKey("raw",ge.data,ve,!0,["decrypt"]),3)}Ie.cryptoKey=Le.h,G.fetchKey=void 0,re(Le)})}}}if(n.N.aesKey=G,z=function(ge,ve,Ie,Le){return GO(e,ge,ve,Ie,Le)},n.N.Zd)var ne=qte(n,z,G);else if(n.N.Lc)ne=zte(n,e.u,G);else if(n.N.bd)ne=TO(n,z,e.u,!!e.h,e.g.dash.initialSegmentLimit,e.ua,G,I,!1,e.D);else{var Z=n.ra.duration||0,de=n.N.ib,te=n.N.mimeType,ae=n.N.codecs;ne={endTime:-1,timeline:-1,hd:function(){var ge=o1(j,Z,de());return ge.Kb(function(ve){ve.mimeType=te,ve.codecs=ae}),Promise.resolve(ge)},timescale:1}}}catch(ge){if((w||q)&&ge.code==4002)return null;throw ge}I=Lte(e.sa,B,s,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),I=new Set(I?[I]:[]),B=!1,U.some(function(ge){return ge.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&ge.attributes.value=="JOC"})&&(B=!0),U=!1,w&&(U=g.includes("forced_subtitle")||g.includes("forced-subtitle"));var he;if(q&&((F=F.find(function(ge){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(ge.attributes.schemeIdUri)}))&&(he=F.attributes.value),!he))return null;var Ee;w=n.N.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(w.includes("hvc1.2.4.L153.B0")||w.includes("hev1.2.4.L153.B0"))&&(Ee="PQ"),F=n.N.id?n.Aa.id+","+n.N.id:"",e.H.length&&L&&e.A.set(n.Aa.id+","+L,Ene(n)),n.N.$f&&wne(e,n.N.$f,ne,n.presentationTimeline),ne.endTime!=-1&&n.Aa.id!=null&&n.N.id!=null&&((L=e.D.get(n.Aa.id))?(L.endTime=ne.endTime,L.Yh.includes(n.N.id)||L.Yh.push(n.N.id),e.D.set(n.Aa.id,L)):e.D.set(n.Aa.id,{endTime:ne.endTime,timeline:ne.timeline,Yh:[n.N.id]}));var Te=F&&e.u.has(F)?e.u.get(F):{id:e.Fa++,originalId:n.N.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Te.segmentIndex&&(Te.segmentIndex.release(),Te.segmentIndex=null)},segmentIndex:null,mimeType:n.N.mimeType,codecs:w,frameRate:n.N.frameRate,pixelAspectRatio:n.N.pixelAspectRatio,bandwidth:n.bandwidth,width:n.N.width,height:n.N.height,kind:a,encrypted:s.drmInfos.length>0,drmInfos:s.drmInfos,keyIds:I,language:u,originalLanguage:n.va.language,label:f,type:n.va.contentType,primary:p,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:n.N.emsgSchemeIdUris,roles:g,forced:U,channelsCount:n.N.Wf,audioSamplingRate:n.N.audioSamplingRate,spatialAudio:B,closedCaptions:y,hdr:Ee,colorGamut:void 0,videoLayout:void 0,tilesLayout:he,accessibilityPurpose:b,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Pn(n.N.mimeType,n.N.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return Te.createSegmentIndex=function(){var ge;return X(function(ve){if(ve.g==1)return Te.segmentIndex?ve.B(0):(ge=Te,O(ve,ne.hd(),3));ge.segmentIndex=ve.h,re(ve)})},F&&n.Jb&&!e.u.has(F)&&(n=n.Aa.id||"",e.F.has(n)||e.F.set(n,[]),e.u.set(F,Te),e.F.get(n).push(F)),Te}function wne(e,n,s,a){if(!e.aa.has(n)){e.aa.add(n);var u=rt(n,"presentationTime",jr)||0,f=fn(n,"UTCTiming"),p;(p=f&&f.attributes.schemeIdUri)&&(f=f.attributes.schemeIdUri,p=!(f==="urn:mpeg:dash:utc:http-ntp:2014"||f==="urn:mpeg:dash:utc:ntp:2014"||f==="urn:mpeg:dash:utc:sntp:2014")),p?n=(rt(n,"wallClockTime",yl)||0)*1e3:(n=rt(n,"wallClockTime",jr)||0,n=cN(n)),s=new Date(n-u/s.timescale*1e3),u=s.getTime()/1e3,isNaN(u)||(a.u||a.ki(u),a=new Map().set("detail",{wallClockTime:n,programStartDate:s}),a=new _e("prft",a),e.j.onEvent(a))}}function Ene(e){function n(s){return s?(s=Au(s),s.Zd=null,s.Lc=null,s.bd=ub(s.bd),s.$f=null,s):null}return e=Au(e),e.Aa=n(e.Aa),e.va=n(e.va),e.N=n(e.N),e.ra&&(e.ra=Au(e.ra),e.ra.node=null),e}function $O(e){var n,s;return X(function(a){switch(a.g){case 1:return n=0,ce(a,2),O(a,SA(e),4);case 4:n=a.h,se(a,3);break;case 2:if(s=ue(a),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(s),a.return();s.severity=1,e.j.onError(s)}case 3:if(!e.j)return a.return();e.j.onManifestUpdated(),wA(e,n),re(a)}})}function wA(e,n){if(!(e.K<0)){var s=e.K;e.g.updatePeriod>=0&&(s=e.g.updatePeriod),e.L.Y(Math.max(s-n,Sy(e.ya)))}}function EA(e,n,s,a){s=s||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Wf:null,audioSamplingRate:null,zb:0,jg:1,encrypted:!1},a=a||s.ib;var u=n.attributes.id,f=n.attributes.supplementalId,p=Yt(n,"BaseURL"),g,y=!1;if(e.i)for(var w=C(p),b=w.next();!b.done;b=w.next()){var I=b.value;b=I.attributes.serviceLocation,I=xi(I),b&&I&&(Af(e.i,u,b,I),y=!0)}y&&e.i||(g=p.map(xi));var L=e.i;e=n.attributes.contentType||s.contentType,w=n.attributes.mimeType||s.mimeType,b=i2([n.attributes.codecs||s.codecs]).join(","),I=rt(n,"frameRate",ZX)||s.frameRate;var j=n.attributes.sar||s.pixelAspectRatio,U=bne(Yt(n,"InbandEventStream"),s.emsgSchemeIdUris),F=Yt(n,"AudioChannelConfiguration");F=Ane(F)||s.Wf;var B=rt(n,"audioSamplingRate",jr)||s.audioSamplingRate;e||(e=HO(w,b));var q=fn(n,"SegmentBase"),G=fn(n,"SegmentTemplate"),z=q&&rt(q,"availabilityTimeOffset",Cy)||0,J=G&&rt(G,"availabilityTimeOffset",Cy)||0,ie=p&&p.length&&rt(p[0],"availabilityTimeOffset",Cy)||0;z=s.zb+ie+z+J,J=null,(ie=fn(n,"SegmentSequenceProperties"))&&(ie=rt(ie,"cadence",ka))&&(J=ie),ie=n.attributes.label;var Y=Yt(n,"Label");return Y&&Y.length&&(Y=Y[0],Bn(Y)&&(ie=Bn(Y))),{ib:function(){return yr(a(),p.length?L&&y?Bg(L,u):g||[]:[])},Zd:q||s.Zd,Lc:fn(n,"SegmentList")||s.Lc,bd:G||s.bd,$f:fn(n,"ProducerReferenceTime")||s.$f,width:rt(n,"width",jr)||s.width,height:rt(n,"height",jr)||s.height,contentType:e,mimeType:w,codecs:b,frameRate:I,pixelAspectRatio:j,emsgSchemeIdUris:U,id:f||u,originalId:u,language:n.attributes.lang,Wf:F,audioSamplingRate:B,zb:z,Ff:null,jg:J||s.jg,label:ie||null,encrypted:!1}}function bne(e,n){n=n.slice(),e=C(e);for(var s=e.next();!s.done;s=e.next())s=s.value.attributes.schemeIdUri,n.includes(s)||n.push(s);return n}function Ane(e){e=C(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var s=n.attributes.schemeIdUri;if(s&&(n=n.attributes.value))switch(s){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(n=parseInt(n,10),!n)continue;return n;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(s=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],n=parseInt(n,16),!n)continue;for(var a=0,u=0;u<s.length;u++)n&1<<u&&(a+=s[u]);if(a)return a;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(s=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),n=parseInt(n,16),!n)continue;for(u=a=0;u<s.length;u++)n&1<<u&&(a+=s[u]);if(a)return a;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(s=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&n>0&&n<s.length)return s[n]}}return null}function Ine(e){var n=e.Zd?1:0;return n+=e.Lc?1:0,n+=e.bd?1:0,n==0?e.contentType==mt||e.contentType=="application":(n!=1&&(e.Zd&&(e.Lc=null),e.bd=null),!0)}function VO(e,n,s,a){var u,f,p,g,y,w,b;return X(function(I){if(I.g==1)return u=[yi(s)],f=yr(n(),u),p=Kn(f,e.g.retryParameters),p.method=a,g=e.j.networkingEngine.request(4,p,{isPreload:e.ea()}),md(e.P,g),O(I,g.promise,2);if(y=I.h,a=="HEAD"){if(!y.headers||!y.headers.date)return I.return(0);w=y.headers.date}else w=yn(y.data);return b=Date.parse(w),isNaN(b)?I.return(0):I.return(b-Date.now())})}function Cne(e,n,s){var a,u,f,p,g,y,w,b;return X(function(I){switch(I.g){case 1:a=s.map(function(L){return{scheme:L.attributes.schemeIdUri,value:L.attributes.value}}),u=e.g.dash.clockSyncUri,!a.length&&u&&a.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),f=C(a),p=f.next();case 2:if(p.done){I.B(4);break}switch(g=p.value,ce(I,5),y=g.scheme,w=g.value,y){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return I.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return I.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return b=Date.parse(w),I.return(isNaN(b)?0:b-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":$e("NTP UTCTiming scheme is not supported");break;default:$e("Unrecognized scheme in UTCTiming element",y)}I.B(9);break;case 7:return O(I,VO(e,n,w,"HEAD"),10);case 10:return I.return(I.h);case 8:return O(I,VO(e,n,w,"GET"),11);case 11:return I.return(I.h);case 9:se(I,3);break;case 5:ue(I);case 3:p=f.next(),I.B(2);break;case 4:return $e("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),I.return(0)}})}function kne(e,n,s,a,u){var f=a.attributes.schemeIdUri||"",p=a.attributes.value||"",g=rt(a,"timescale",jr)||1,y=rt(a,"presentationTimeOffset",jr)||0;a=C(Yt(a,"Event"));for(var w=a.next();!w.done;w=a.next()){w=w.value;var b=rt(w,"presentationTime",jr)||0,I=rt(w,"duration",jr)||0;b=Math.max((b-y)/g+n,n),I=b+I/g,s!=null&&(b=Math.min(b,n+s),I=Math.min(I,n+s)),I<u||(w={schemeIdUri:f,value:p,startTime:b,endTime:I,id:w.attributes.id||"",timescale:g,eventElement:qD(w),eventNode:ub(w)},e.j.onTimelineRegionAdded(w))}}function GO(e,n,s,a,u){var f,p,g,y;return X(function(w){return w.g==1?(f=ys,p=u?0:1,g=uf(n,s,a,e.g.retryParameters),O(w,bA(e,g,f,{type:p}),2)):(y=w.h,w.return(y.data))})}function HO(e,n){return n=Pn(e,n),zm(n)?mt:e.split("/")[0]}function bA(e,n,s,a){return a||(a={}),a.isPreload=e.ea(),n=e.j.networkingEngine.request(s,n,a),md(e.P,n),n.promise}function _ne(e){var n=e.l.Je;if(!e.l.Tf||!n||!e.H.length)return[];var s=Date.now()/1e3,a=e.H.filter(function(u){return u=jr(u.attributes.ttl),!u||n+u>s}).map(xi).filter(_u);return a.length?yr(e.C,a):[]}function qO(){return""}function Rne(e,n,s){return function(){return e&&n?Bg(e,"BaseURL"):s.slice()}}xe("shaka.dash.DashParser",Hg),od("application/dash+xml",function(){return new Hg}),od("video/vnd.mpeg.dash.mpd",function(){return new Hg});function cx(){}xe("shaka.dependencies",cx),cx.has=function(e){return AA.has(e)},cx.add=function(e,n){if(!zO[e])throw Error(e+" is not supported");e==KO?Nt("mux.js","mux.js is no longer used in Shaka Player."):AA.set(e,function(){return n})};var KO="muxjs",zO={Vn:KO,ISOBoxer:"ISOBoxer"};cx.Allowed=zO;var AA=new Map([["ISOBoxer",function(){return l.ISOBoxer}]]);function Wt(){this.j=new gn(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android"?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new gn(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function Pa(){var e=l.ManagedMediaSource||l.MediaSource;return!!(e&&e.isTypeSupported)}d=Wt.prototype,d.sc=function(){return!!navigator.mediaCapabilities},d.Oa=function(){return this.j.value()},d.Ja=function(){return this.l.value()},d.Wd=function(){return!1},d.$h=function(){return!1},d.Gf=function(){return!1},d.Gj=function(){return!1},d.Le=function(){return!1},d.wd=function(){return!0},d.Pb=function(){var e=l.ManagedSourceBuffer||l.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType},d.Pe=function(){return!0},d.Lj=function(){return 0},d.yc=function(){return Promise.resolve({width:1/0,height:1/0})},d.Wj=function(){return!1},d.oi=function(){return!1},d.bb=function(e){var n=this.Oa();return(n==="TV"||n==="CONSOLE"||n==="CAST")&&(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},d.ti=function(){return!!l.indexedDB},d.Ej=function(){return[]},d.Jd=function(e){return l.matchMedia!==void 0&&l.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"},d.pg=function(){return!1},d.uj=function(){return!1},d.gg=function(){return!1},d.rg=function(){return!0},d.vj=function(){return!1},d.ek=function(){return!0},d.vd=function(){return!1},d.Oh=function(e){return e==="com.apple.fps"},d.qg=function(){return!0},d.toString=function(){return"Device: "+this.Vb()+" v"+this.Ha()+"; Type: "+this.Oa()};function IA(){Wt.call(this),this.g=new gn(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new gn(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}V(IA,Wt),d=IA.prototype,d.Ha=function(){return this.g.value()},d.Vb=function(){return"Apple Browser"},d.Oa=function(){return this.h.value()},d.Ja=function(){return"WEBKIT"},d.sc=function(){return!1},d.Wd=function(e,n){return n==="audio"},d.Gf=function(){return!0},d.Gj=function(e){return e==="audio"},d.bb=function(e){return Wt.prototype.bb.call(this,e),e.abr.minTimeToSwitch=.5,e},d.pg=function(){return!0},d.qg=function(){return!1},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(Wo=function(){return new IA});function CA(){if(!WO())throw Error("Not a Chromecast device!");Wt.call(this),this.h=new gn(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new gn(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return e=e.toLowerCase(),e.includes("android")?YO:e.includes("fuchsia")?XO:kA})}V(CA,Wt),d=CA.prototype,d.Ha=function(){return this.h.value()},d.Vb=function(){return"Chromecast with "+this.g.value()},d.Oa=function(){return"CAST"},d.Ja=function(){return"CHROMIUM"},d.sc=function(){return Wt.prototype.sc.call(this)&&this.g.value()!==kA},d.Pb=function(){return Wt.prototype.Pb.call(this)&&this.g.value()!==kA},d.Lj=function(){switch(this.g.value()){case YO:return 0;case XO:return 3;default:return 1}},d.yc=function(){var e,n,s,a,u;return X(function(f){switch(f.g){case 1:if(e=l.cast&&cast.__platform__&&cast.__platform__.canDisplayType,n={width:1280,height:720},ce(f,2),!(s=e)){f.B(4);break}return O(f,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:s=f.h;case 4:if(s){n.width=3840,n.height=2160,f.B(6);break}if(!(a=e)){f.B(7);break}return O(f,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:a=f.h;case 7:a&&(n.width=1920,n.height=1080);case 6:se(f,3);break;case 2:u=ue(f),nr("Failed to check canDisplayType:",u);case 3:return f.return(n)}})},d.bb=function(e){return Wt.prototype.bb.call(this,e),e.streaming.stallSkip=0,e},d.ti=function(){return!1},d.vd=function(){return!0};function WO(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}var YO="Android",XO="Fuchsia",kA="Linux";WO()&&(Wo=function(){return new CA});function _A(){Wt.call(this);var e=this;this.i=new gn(function(){var n=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return n?parseInt(n[2],10):null}),this.g=new gn(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new gn(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}),this.A=new gn(function(){return Wt.prototype.Pb.call(e)?navigator.userAgent.match(/Edge?\//)?!e.h.value():!0:!1}),this.u=new gn(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new gn(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":!!navigator.userAgent.includes("Android")})}V(_A,Wt),d=_A.prototype,d.Ha=function(){return this.i.value()},d.Vb=function(){return this.g.value()},d.Wd=function(e){return XE(e)?this.g.value()==="Edge"&&this.h.value():!1},d.$h=function(){return this.g.value()==="Edge"&&this.h.value()},d.Gf=function(){return this.g.value()==="Edge"&&this.h.value()},d.Pb=function(){return this.A.value()},d.bb=function(e){if(Wt.prototype.bb.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},d.gg=function(){return this.g.value()==="Edge"||this.u.value()},d.vd=function(){if(this.Ja()==="GECKO"){var e=this.Ha();return e!==null?e>=100:Wt.prototype.vd.call(this)}return Wt.prototype.vd.call(this)},d.Oh=function(e){return this.Ja()==="GECKO"?e.startsWith("com.microsoft.playready.recommendation"):Wt.prototype.Oh.call(this,e)},JE=function(){return new _A};function RA(){Wt.apply(this,arguments)}V(RA,Wt),d=RA.prototype,d.Ha=function(){return null},d.Vb=function(){return"Hisense"},d.Oa=function(){return"TV"},d.sc=function(){return!1},d.yc=function(){var e={width:1920,height:1080},n=null;if(l.Hisense_Get4KSupportState)try{n=l.Hisense_Get4KSupportState()}catch{}return n==null&&(n=navigator.userAgent.includes("UHD")),n&&(e.width=3840,e.height=2160),Promise.resolve(e)},d.bb=function(e){return Wt.prototype.bb.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(Wo=function(){return new RA});function LA(){Wt.call(this),this.g=new gn(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}V(LA,Wt),d=LA.prototype,d.Vb=function(){return"PlayStation"},d.Oa=function(){return"CONSOLE"},d.Ja=function(){return"WEBKIT"},d.Ha=function(){return this.g.value()},d.sc=function(){return!1},d.wd=function(){return!1},d.Pb=function(){return!1},d.oi=function(){return this.Ha()===4},d.yc=function(){var e,n,s,a,u;return X(function(f){switch(f.g){case 1:return e={width:1920,height:1080},n=!1,ce(f,2),O(f,l.msdk.device.getDisplayInfo(),4);case 4:s=f.h,n=s.resolution==="4K",se(f,3);break;case 2:return ue(f),ce(f,5),O(f,l.msdk.device.getDisplayInfoImmediate(),7);case 7:a=f.h,n=a.resolution==="4K",se(f,3);break;case 5:u=ue(f),$e("PlayStation: Failed to get the display info:",u);case 3:return n&&(e.width=3840,e.height=2160),f.return(e)}})},d.bb=function(e){return Wt.prototype.bb.call(this,e),this.Ha()===4&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},d.gg=function(){return this.Ha()===4},d.rg=function(){return this.Ha()!==4},navigator.userAgent.includes("PlayStation")&&(Wo=function(){return new LA});function PA(){Wt.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}V(PA,Wt),d=PA.prototype,d.Ha=function(){return this.g},d.Vb=function(){return"Tizen"},d.Ja=function(){return"CHROMIUM"},d.Oa=function(){return"TV"},d.Wd=function(){return!0},d.Le=function(){return this.Ha()===3},d.sc=function(){return!1},d.wd=function(){var e=this.Ha();return e!==null?e>=4:Wt.prototype.wd.call(this)},d.Pb=function(){return!1},d.Pe=function(){return this.g&&this.h?this.g===5?this.h>=5:this.g>5:Wt.prototype.Pe.call(this)},d.yc=function(){var e=l.devicePixelRatio;e={width:l.screen.width*e>1920?3840:1920,height:l.screen.height*e>1080?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var n=webapis.systeminfo.getMaxVideoResolution();e.width=n.width,e.height=n.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{$e("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.bb=function(e){return Wt.prototype.bb.call(this,e),e.drm.ignoreDuplicateInitData=this.Ha()!==2,this.Ha()===3&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},d.Ej=function(){var e=[];return this.g!==null&&this.g<5&&e.push("opus"),e},d.Jd=function(e){try{if(webapis.avinfo.isHdrTvSupport())return e?"HLG":"PQ"}catch{return Wt.prototype.Jd.call(this,e)}return"SDR"},d.uj=function(){return!0},d.vj=function(){return this.Ha()===3},navigator.userAgent.includes("Tizen")&&(Wo=function(){return new PA});function Cf(){Wt.apply(this,arguments)}V(Cf,Wt),Cf.prototype.Ha=function(){return null},Cf.prototype.Vb=function(){return"Vizio"},Cf.prototype.Oa=function(){return"TV"},Cf.prototype.sc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(Wo=function(){return new Cf});function DA(){Wt.call(this),this.i=new gn(function(){return navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")}),this.h=new gn(function(){return navigator.userAgent.includes("SOPOpenBrowser")}),this.g=new gn(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}V(DA,Wt),d=DA.prototype,d.Ha=function(){return this.g.value()},d.Vb=function(){return"WebKit STB"},d.Oa=function(){return"TV"},d.Ja=function(){return"WEBKIT"},d.sc=function(){return!1},d.wd=function(){var e=this.g.value();return e!==null?e>=15:!0},d.Wd=function(){return this.h.value()},d.yc=function(){return Promise.resolve({width:l.screen.width*l.devicePixelRatio,height:l.screen.height*l.devicePixelRatio})},d.rg=function(){return!this.i.value()},d.qg=function(){return!1},(navigator.userAgent.includes("SOPOpenBrowser")||navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(Wo=function(){return new DA});function NA(){Wt.call(this);var e=this;this.h=Lne(),this.g=null;try{var n=new PalmServiceBridge;n.onservicecallback=function(s){s=JSON.parse(s),e.g=s.configs["tv.model.supportHDR"]||s.configs["tv.config.supportDolbyHDRContents"]||!1},n.call("luna://com.webos.service.config/getConfigs",JSON.stringify({configNames:["tv.model.supportHDR","tv.config.supportDolbyHDRContents"]}))}catch(s){$e("WebOS: getConfigs call failed",s)}}V(NA,Wt),d=NA.prototype,d.Ha=function(){return this.h},d.Vb=function(){return"WebOS"},d.Oa=function(){return"TV"},d.Ja=function(){return"CHROMIUM"},d.sc=function(){return!1},d.wd=function(){var e=this.Ha();return e!==null?e>3:Wt.prototype.wd.call(this)},d.Pb=function(){return!1},d.Pe=function(){var e=this.Ha();return e!==null?e>3:Wt.prototype.Pe.call(this)},d.yc=function(){var e={width:1920,height:1080};try{var n=JSON.parse(l.PalmSystem.deviceInfo);e.width=Math.max(1920,n.screenWidth),e.height=Math.max(1080,n.screenHeight)}catch{$e("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.bb=function(e){return Wt.prototype.bb.call(this,e),this.Ha()===3&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},d.Jd=function(e){return this.g==null?($e("WebOS: getConfigs call haven't finished"),Wt.prototype.Jd.call(this,e)):this.g?e?"HLG":"PQ":"SDR"};function Lne(){var e=null,n=navigator.userAgent.match(/Chrome\/(\d+)/);switch(n&&(e=parseInt(n[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}if(d.ek=function(){return!1},d.vd=function(){var e=this.Ha();return e!==null?e>=6:Wt.prototype.vd.call(this)},navigator.userAgent.includes("Web0S")){var Pne=new NA;Wo=function(){return Pne}}function MA(){Wt.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}V(MA,Wt),d=MA.prototype,d.Ha=function(){return this.h},d.Vb=function(){return"Xbox"},d.Oa=function(){return"CONSOLE"},d.Ja=function(){return this.g?"EDGE":"CHROMIUM"},d.Wd=function(){return!0},d.$h=function(){return!0},d.Gf=function(){return!0},d.Wj=function(){return this.g},d.yc=function(){var e={width:1920,height:1080},n=QO();if(n)try{var s=new n.Media.Protection.ProtectionCapabilities,a=n.Media.Protection.ProtectionCapabilityResult;n=null;do n=s.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(n===a.maybe);n===a.probably&&(e.width=3840,e.height=2160)}catch{$e("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.bb=function(e){return Wt.prototype.bb.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},d.gg=function(){return!0},d.ti=function(){return!1};function QO(){var e=null;try{e=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}return e}(navigator.userAgent.includes("Xbox One")||QO()!==null)&&(Wo=function(){return new MA});function JO(e,n,s){this.type=e,this.ma=n,this.segments=s||null}function dx(e,n,s,a){this.id=e,this.name=n,this.attributes=s,this.value=a===void 0?null:a}dx.prototype.toString=function(e){function n(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var s="#"+this.name,a=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(n):[];return this.value&&a.unshift(this.value),a.length>0&&(s+=":"+a.join(",")),s};function OA(e,n){return n?e.toString():(n=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(n))}function kf(e,n){return e.attributes.find(function(s){return s.name===n})||null}function Ve(e,n,s){return(e=kf(e,n))?e.value:s||null}function tn(e,n){if(e=kf(e,n),!e)throw new oe(2,4,4023,n);return e.value}function ZO(e,n,s){s=s===void 0?[]:s,this.ma=n,this.g=e,this.Hc=s}function hx(e,n){this.name=e,this.value=n}function Ks(e,n){return e.filter(function(s){return s.name==n})}function e8(e,n){return e.filter(function(s){return tn(s,"TYPE")==n})}function Sr(e,n){e=C(e);for(var s=e.next();!s.done;s=e.next())if(s=s.value,s.name===n)return s;return null}function _f(e,n,s){return s=s===void 0?0:s,(e=Sr(e,n))?Number(e.value):s}function Hu(e,n,s){return n?t8(e,[n],s):[]}function t8(e,n,s){if(!n.length)return[];var a=n;return s&&s.size&&(a=n.map(function(u){return n8(u,s)})),yr(e,a)}function n8(e,n){if(!n||!n.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var s=e.match(/{\$\w*}/g);if(s){s=C(s);for(var a=s.next();!a.done;a=s.next()){a=a.value;var u=a.slice(2,a.length-1),f=n.get(u);if(f)e=e.replace(a,f);else throw new oe(2,4,4039,u)}}return e}function Dne(){this.g=0}function jA(e,n){n=yn(n),n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var s=n.split(/\n+/m);if(!Mne.test(s[0]))throw new oe(2,4,4015);n=0;for(var a=!1,u=[],f=!0,p=0;p<s.length;p++){var g=s[p],y=s[p+1];if(g.startsWith("#")&&!g.startsWith("#EXT")||f)f=!1;else{if(g=r8(e,g),a||(s8.has(g.name)?(n=1,a=!0):g.name=="EXT-X-STREAM-INF"||g.name=="EXT-X-MEDIA"?a=!0:o8.has(g.name)&&(n=1,a=!0)),o8.has(g.name)){if(n!=1)throw new oe(2,4,4017);f=e,e=Array(Math.max(100,Math.floor((s.length-p)/2))),a=0,g=[];var w=[];for(y=null;p<s.length;p++){var b=s[p];b.startsWith("#EXT")?(b=r8(f,b),s8.has(b.name)?u.push(b):b.name=="EXT-X-MAP"?y=b:b.name=="EXT-X-PART"?w.push(b):b.name=="EXT-X-PRELOAD-HINT"?Ve(b,"TYPE")=="PART"?w.push(b):Ve(b,"TYPE")=="MAP"&&(b.name="EXT-X-MAP",y=b):g.push(b)):(!b.startsWith("#")||b.startsWith("#EXT"))&&(b=b.trim(),y&&g.push(y),g=new ZO(b,g,w),a<e.length?e[a++]=g:(e.push(g),a++),g=[],w=[])}return w.length&&(y&&g.push(y),s=new ZO("",g,w),a<e.length?e[a++]=s:(e.push(s),a++)),new JO(n,u,a<e.length?e.slice(0,a):e)}u.push(g),g.name=="EXT-X-STREAM-INF"&&(g.attributes.push(new hx("URI",y)),f=!0)}}return new JO(n,u)}function r8(e,n){e=e.g++;var s=n.match(Nne);if(!s)throw new oe(2,4,4016,n);n=s[1];var a=s[2];s=[];var u;if(a){a=new Bh(a);var f;for(i8.lastIndex=0,(f=bu(a,i8))&&(u=f[1]),UA.lastIndex=0,f=bu(a,UA);f;)s.push(new hx(f[1],f[2]||f[3])),$h(a),f=bu(a,UA)}return new dx(e,n,s,u)}var Nne=/^#(EXT[^:]*)(?::(.*))?$/,Mne=/^#EXTM3U($|[ \t\n])/m,i8=/^([^,=]+)(?:,|$)/g,UA=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,s8=new Set("EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" ")),o8=new Set("EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" "));function a8(){}function l8(e,n){try{var s=fx(e);return zh({uri:e,originalUri:e,data:s.data,headers:{"content-type":s.contentType},originalRequest:n})}catch(a){return Ru(a)}}function fx(e){var n=e.split(":");if(n.length<2||n[0]!="data")throw new oe(2,1,1004,e);if(n=n.slice(1).join(":").split(","),n.length<2)throw new oe(2,1,1004,e);var s=n[0];e=l.decodeURIComponent(n.slice(1).join(",")),n=s.split(";"),s=n[0];var a=!1;n.length>1&&n[n.length-1]=="base64"&&(a=!0,n.pop());var u;return a?u=Bs(e):u=To(e),{data:u,contentType:s,Ci:n}}xe("shaka.net.DataUriPlugin",a8),a8.parse=l8,El("data",l8);function px(){var e=this;this.g=this.h=null,this.G=1,this.C=new Map,this.L=new Map,this.D=new Map,this.D.set("video",new Map),this.D.set("audio",new Map),this.D.set(mt,new Map),this.D.set("image",new Map),this.mc=new Map().set("com.apple.streamingkeydelivery",function(n,s,a){return ure(e,n,s,a)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(n){var s=tn(n,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(s)){var a="cenc";s=="SAMPLE-AES"&&(a="cbcs");var u=tn(n,"URI");if(s=fx(u.split("?")[0]),u=u.split("?")[0],!e.I.has(u)){var f=nt(s.data);e.I.set(u,f)}a=ml("com.widevine.alpha",a,[{initDataType:"cenc",initData:e.I.get(u)}],void 0,s.Ci),(n=Ve(n,"KEYID"))&&a.keyIds.add(n.toLowerCase().substr(2)),n=Promise.resolve(a)}else n=Promise.resolve(null);return n}).set("com.microsoft.playready",function(n){var s=tn(n,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(s)){var a="cenc";s=="SAMPLE-AES"&&(a="cbcs"),n=tn(n,"URI"),s=fx(n.split("?")[0]),n=nt(s.data);var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=Ky(n,u,new Set,0),a=ml("com.microsoft.playready",a,[{initDataType:"cenc",initData:u}],void 0,s.Ci),(n=cd(["<PLAYREADY>",fl(n),"</PLAYREADY>"].join(`
`)))&&(a.licenseServerUri=rx(n)),a=Promise.resolve(a)}else a=Promise.resolve(null);return a}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(n){var s=tn(n,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(s)){var a="cenc";s=="SAMPLE-AES"&&(a="cbcs");var u=tn(n,"URI");if(s=fx(u.split("?")[0]),u=u.split("?")[0],!e.I.has(u)){var f=nt(s.data);e.I.set(u,f)}a=ml("com.huawei.wiseplay",a,[{initDataType:"cenc",initData:e.I.get(u)}],void 0,s.Ci),(n=Ve(n,"KEYID"))&&a.keyIds.add(n.toLowerCase().substr(2)),n=Promise.resolve(a)}else n=Promise.resolve(null);return n}),this.kb=new Set,this.i=new Map,this.l=null,this.H="",this.hb=new Dne,this.M=-1,this.aa=1/0,this.Z=this.Kc=this.jb=!1,this.F=new Ke(function(){if(e.V&&!e.g.continueLoadingWhenPaused&&(e.T.Ea(e.V,"timeupdate"),e.V.paused)){e.T.qa(e.V,"timeupdate",function(){return _8(e)});return}_8(e)}),this.Fa=Sx,this.m=null,this.$a=0,this.u=1/0,this.Na=this.La=this.R=0,this.W=new Wh,this.J=new Map,this.K=new Map,this.ya=new Map,this.oa=new Map,this.O=new Map,this.sa=new Map,this.ua=new Map,this.Jc=this.ea=!1,this.Ob=new Uh(5),this.j=null,this.P=!0,this.T=new Dt,this.A=this.V=null,this.lc=function(){return!1},this.I=new Map}d=px.prototype,d.configure=function(e,n){var s=this.h&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,n&&(this.lc=n),this.j&&this.j.configure(this.g),s&&this.m&&this.m.presentationTimeline.U()&&this.F.Ka()},d.start=function(e,n){var s=this,a;return X(function(u){return u.g==1?(s.h=n,s.ea=n.isLowLatencyMode(),O(u,qA(s,[e]).promise,2)):u.g!=3?(a=u.h,s.H=a.uri,O(u,Une(s,a.data),3)):u.return(s.m)})},d.stop=function(){this.F&&(this.F.stop(),this.F=null);var e=[];return this.W&&(e.push(this.W.destroy()),this.W=null),this.g=this.h=null,this.kb.clear(),this.m=null,this.i.clear(),this.L.clear(),this.K.clear(),this.C.clear(),this.ya.clear(),this.oa.clear(),this.O.clear(),this.sa.clear(),this.ua.clear(),this.I.clear(),this.j&&this.j.destroy(),this.T&&(this.T.release(),this.T=null),Promise.all(e)},d.update=function(){var e=this,n,s,a,u,f,p,g,y,w,b;return X(function(I){if(I.g==1){if(!di(e))return I.return();for(n=[],s=Array.from(e.i.values()),e.u=1/0,e.m.gapCount=0,a=s.filter(function(L){return!L.stream.isAudioMuxedInVideo&&L.stream.segmentIndex}),u=C(a),f=u.next();!f.done;f=u.next())p=f.value,n.push(One(e,p));return O(I,Promise.all(n),2)}for(g8(e,a.map(function(L){return L.stream})),g=a.some(function(L){return L.we==0}),a.length&&!g&&(yx(e,Sx),mx(e)),g&&mx(e),y=C(a),w=y.next();!w.done;w=y.next())b=w.value,b.stream.isAudioMuxedInVideo||!b.stream.segmentIndex||Qo(b.stream.segmentIndex)||e.h.disableStream(b.stream);re(I)})};function FA(e,n){return di(e)?e.D.get(n.type):n.Qf}function One(e,n){var s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge,ve,Ie,Le,at,je,Vt;return X(function(ct){switch(ct.g){case 1:if(n.stream.isAudioMuxedInVideo)return ct.return();for(s=[],a=C(n.S()),u=a.next();!u.done;u=a.next())f=u.value,p=new Cn(f),g=p.g,n.qf&&(n.$b>=0&&g.add("_HLS_msn",String(n.$b)),n.ac>=0&&g.add("_HLS_part",String(n.ac))),n.rf&&g.add("_HLS_skip","YES"),zo(g)&&ba(p,hl(g.toString())),s.push(p.toString());return ce(ct,2),O(ct,qA(e,s,!0).promise,4);case 4:y=ct.h,se(ct,3);break;case 2:throw w=ue(ct),e.h&&e.h.disableStream(n.stream),w;case 3:if(!n.stream.segmentIndex)return ct.return();if(b=jA(e.hb,y.data),b.type!=1)throw new oe(2,4,4017);return I=y.uri,I==y.originalUri||n.S().includes(I)||n.dg.push(I),L=Ks(b.ma,"EXT-X-DEFINE"),j=BA(e,L,I),U=n.stream,F=FA(e,n),O(ct,T8(e,b,U.mimeType,n.S,j),5);case 5:for(B=ct.h,q=B.keyIds,G=B.drmInfos,z=B.encrypted,J=B.Ki,U.encrypted||!z||J||(U.encrypted=!0),ie=function(Xt,At){return Xt.size===At.size&&[].concat(K(Xt)).every(function(St){return At.has(St)})},ie(U.keyIds,q)||(U.keyIds=q,U.drmInfos=G,e.h.newDrmInfo(U)),Y=I8(e,b,F,j,n.S,n.type),ne=Y.segments,(Z=Y.bandwidth)&&(U.bandwidth=Z),de=l1(U),te=C(ne),ae=te.next();!ae.done;ae=te.next())he=ae.value,he.ka&&(he.ka.Pd=de);U.segmentIndex.Ee(ne,e.l.Mb()),ne.length&&(Ee=_f(b.ma,"EXT-X-MEDIA-SEQUENCE",0),ge=(Te=Sr(b.ma,"EXT-X-SKIP"))?Number(Ve(Te,"SKIPPED-SEGMENTS")):0,ve=y8(Ee,ne),Ie=ve.$b,Le=ve.ac,n.$b=Ie+ge,n.ac=Le,at=F.get(Ee),U.segmentIndex.eb(at)),(je=Qo(U.segmentIndex))&&(n.nd=je.startTime,Vt=ne[ne.length-1],n.Zc=Vt.endTime),Sr(b.ma,"EXT-X-ENDLIST")&&(n.we=!0),VA(e,b),GA(e,b.ma,U.type,j,n.S),re(ct)}})}d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(){},d.banLocation=function(e){this.j&&this.j.banLocation(e)},d.setMediaElement=function(e){this.V=e};function u8(e,n,s){s=s===void 0?!1:s;for(var a=e.M==-1,u=C(n),f=u.next();!f.done;f=u.next()){f=f.value;var p=f.stream.segmentIndex,g=FA(e,f);if(p=Qo(p)){g=C(g);for(var y=g.next();!y.done;y=g.next()){y=C(y.value);var w=y.next().value;if(y.next().value==p.startTime){a&&(e.M=Math.max(e.M,w)),f.$g=w;break}}}}if(!(e.M<0))for(n=C(n),a=n.next();!a.done;a=n.next())a=a.value,(Kg(e,a.type)||s)&&(u=a.stream.segmentIndex)&&(f=e.M-a.$g,f>0&&(u.g.splice(0,f),u=Qo(u))&&(u=-u.startTime,a.stream.segmentIndex.offset(u),c8(e,a,u)))}function jne(e,n){if(e.aa==1/0){n=C(n);for(var s=n.next();!s.done;s=n.next())s=Qo(s.value.stream.segmentIndex),s!=null&&s.h!=null&&(e.aa=Math.min(e.aa,s.h))}if(n=e.aa,n!=1/0){s=C(e.i.values());for(var a=s.next();!a.done;a=s.next())if(a=a.value,!Kg(e,a.type)){var u=a.stream.segmentIndex;if(u!=null){var f=Qo(u);if(f)if(f.h==null)nr("Missing EXT-X-PROGRAM-DATE-TIME for stream",a.S(),"Expect AV sync issues!");else for(c8(e,a,f.h-n-f.startTime),a=C(u),u=a.next();!u.done;u=a.next())u.value.wi(n)}}}}function c8(e,n,s){if(!(Math.abs(s)<.001)){n.nd+=s,n.Zc+=s,e=FA(e,n);for(var a=C(e),u=a.next();!u.done;u=a.next()){var f=C(u.value);u=f.next().value,f=f.next().value,e.set(u,f+s)}n.S()}}function Une(e,n){var s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge,ve,Ie,Le,at,je,Vt,ct,Xt,At,St,kt,Ut,_t;return X(function(wt){switch(wt.g){case 1:return s=qn,a=jA(e.hb,n),u=Ks(a.ma,"EXT-X-DEFINE"),f=[],p=[],g=[],e.l=new tt(null,0),e.l.td(!0),y=function(){return[e.H]},w=null,b=new Map,a.type==1?(e.P=!1,Ie=Ks(a.ma,"EXT-X-DEFINE"),b=BA(e,Ie,e.H),w=s.Ga,Le="",at=new Map,O(wt,v8(e,e.G++,b,a,y,"",w,Le,!0,"Media Playlist",null,at,null,!1,null,!1),7)):(Bne(e,u),I=Ks(a.ma,"EXT-X-MEDIA"),L=Ks(a.ma,"EXT-X-STREAM-INF"),j=Ks(a.ma,"EXT-X-IMAGE-STREAM-INF"),U=Ks(a.ma,"EXT-X-I-FRAME-STREAM-INF"),F=Ks(a.ma,"EXT-X-SESSION-KEY"),B=Ks(a.ma,"EXT-X-SESSION-DATA"),q=Ks(a.ma,"EXT-X-CONTENT-STEERING"),Vne(e,B),O(wt,Gne(e,q),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(G=[],z=C(L),J=z.next(),ie={};!J.done;ie={ck:void 0},J=z.next())Y=J.value,(ne=Ve(Y,"SUPPLEMENTAL-CODECS"))&&(ie.ck=ne.split(/\s*,\s*/).map(function(It){return It.split("/")[0]}),Z=Y.attributes.map(function(It){return function(lr){var Jn=lr.name,Cs=lr.value;return Jn=="CODECS"&&(Cs=It.ck.join(","),lr=lr.value.split(","),lr.length>1&&(lr=Fi("audio",lr))&&(Cs+=","+lr)),new hx(Jn,Cs)}}(ie)),G.push(new dx(Y.id,Y.name,Z,null)));for(L.push.apply(L,K(G)),de=[],te=C(U),ae=te.next(),he={};!ae.done;he={dk:void 0},ae=te.next())Ee=ae.value,(Te=Ve(Ee,"SUPPLEMENTAL-CODECS"))&&(he.dk=Te.split(/\s*,\s*/).map(function(It){return It.split("/")[0]}),ge=Ee.attributes.map(function(It){return function(lr){var Jn=lr.name;return lr=lr.value,Jn=="CODECS"&&(lr=It.dk.join(",")),new hx(Jn,lr)}}(he)),de.push(new dx(Ee.id,Ee.name,ge,null)));U.push.apply(U,K(de))}return $ne(e,L),tre(e,I),ve=zne(e,U),O(wt,Wne(e,L,F,I,y,e.C,ve),5);case 5:return f=wt.h,p=Hne(e,I),O(wt,qne(e,j,U),6);case 6:g=wt.h,wt.B(3);break;case 7:je=wt.h,e.i.set(e.H,je),je.stream&&(Vt=l1(je.stream),je.stream.segmentIndex.Kb(function(It){It.ka&&(It.ka.Pd=Vt)})),w=je.stream.type,ct=!0,(e.g.disableAudio&&je.type=="audio"||e.g.disableVideo&&je.type=="video"&&!je.stream.codecs.includes(","))&&(ct=!1),ct&&f.push({id:0,language:Ht(Le||"und"),disabledUntilTime:0,primary:!0,audio:je.type=="audio"?je.stream:null,video:je.type=="video"?je.stream:null,bandwidth:je.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new oe(2,7,7001);if(w8(e,a),a.type==1&&(di(e)&&(E8(e,a),Xt=e.u,e.F.Y(Xt)),At=Array.from(e.i.values()),$A(e,At),mx(e),GA(e,a.ma,w,b,y)),e.m={presentationTimeline:e.l,variants:f,textStreams:p,imageStreams:g,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.A},e.Z||!e.g.hls.disableCodecGuessing){wt.B(8);break}for(St=[],kt=C(e.m.variants),Ut=kt.next();!Ut.done;Ut=kt.next())_t=Ut.value,_t.audio&&_t.audio.codecs===""&&St.push(_t.audio.createSegmentIndex()),_t.video&&_t.video.codecs===""&&St.push(_t.video.createSegmentIndex());return O(wt,Promise.all(St),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),re(wt)}})}function Fne(e,n){var s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q;return X(function(G){if(G.g==1)return s=r2(e.g.hls.mediaPlaylistFullMimeType),n.length?(a=C8(e,n),u=a.segment,f=a.segmentIndex,p=u.S(),(g=lf(p[0]))&&(y=KA.get(g))?G.return(r2(y)):O(G,Promise.all([d8(e,u.ka,0),d8(e,u,f)]),2)):G.return(s);if(w=G.h,b=w[1].mimeType,I=w[0].data,L=w[1].data,j="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),U=["audio/mp4","video/mp4","video/iso.segment"],F=u.ka||U.includes(b),!F&&nf(nt(L))){var z=L,J=e.g.disableAudio,ie=e.g.disableVideo,Y=e.g.disableText,ne=nt(z),Z=new un().parse(ne),de=Z.se();ne=Z.Ch();var te=[],ae=!1,he=!1;if(!J)switch(de.audio){case"aac":case"aac-loas":Z.Bb().length&&(te.push("mp4a.40.2"),ae=!0);break;case"mp3":Z.Bb().length&&(te.push("mp4a.40.34"),ae=!0);break;case"ac3":Z.Bb().length&&(te.push("ac-3"),ae=!0);break;case"ec3":Z.Bb().length&&(te.push("ec-3"),ae=!0);break;case"opus":Z.Bb().length&&(te.push("opus"),ae=!0)}if(!ie)switch(de.video){case"avc":ne.codec?te.push(ne.codec):te.push("avc1.42E01E"),he=!0;break;case"hvc":ne.codec?te.push(ne.codec):te.push("hvc1.1.6.L93.90"),he=!0;break;case"av1":te.push("av01.0.01M.08"),he=!0}if(te.length){if(J=ae&&!he,ie=new Map,he&&!Y){for(Y=new Yo("video/mp2t"),Y.Yf(z),z=C(Y.Eg()),he=z.next();!he.done;he=z.next())he=he.value,ie.set(he,he);Y.je()}ne={type:J?"audio":"video",mimeType:"video/mp2t",codecs:te.join(", "),language:null,height:ne.height,width:ne.width,channelCount:null,sampleRate:null,closedCaptions:ie,Se:null,colorGamut:null,frameRate:ne.frameRate,timescale:null}}else ne=null;if(B=ne)return G.return(B)}else if((F||j.includes(g))&&(q=KJ(I,L,e.g.disableText)))return G.return(q);return b?G.return(r2(b)):G.return(s)})}function d8(e,n,s){var a,u,f,p,g,y;return X(function(w){switch(w.g){case 1:return n?(a=ys,u=uf(n.S(),n.Uc(),n.Sc(),e.g.retryParameters),f=n instanceof Xe?1:0,O(w,jl(e,u,a,{type:f}).promise,2)):w.return({mimeType:null,data:null});case 2:if(p=w.h,g=p.data,!n.aesKey){w.B(3);break}return O(w,s2(g,n.aesKey,s),4);case 4:g=w.h;case 3:return n instanceof Xe?n.Ne(g,!0):n.Ne(g),(y=p.headers["content-type"])&&(y=y.split(";")[0].toLowerCase()),w.return({mimeType:y,data:g})}})}function mx(e){if(di(e)){if(e.Fa==zA){for(var n=1/0,s=1/0,a=C(e.i.values()),u=a.next();!u.done;u=a.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&!u.stream.isAudioMuxedInVideo&&(n=Math.min(n,u.Zc),s=Math.min(s,u.nd));n=n-s||0,isNaN(e.g.availabilityWindowOverride)||(n=e.g.availabilityWindowOverride),e.l.mg(n)}}else e.l.Fb(m8(e));if(!e.l.u)for(n=C(e.i.values()),s=n.next();!s.done;s=n.next())s=s.value,!s.stream.segmentIndex||s.type!="audio"&&s.type!="video"||(s=Qo(s.stream.segmentIndex))&&s.h&&e.l.ki(s.h);e.l.Pf()}function Bne(e,n){var s=new Cn(e.H).g;n=C(n);for(var a=n.next();!a.done;a=n.next()){var u=a.value;a=Ve(u,"NAME");var f=Ve(u,"VALUE");u=Ve(u,"QUERYPARAM"),a&&f&&(e.C.has(a)||e.C.set(a,f)),u&&(a=s.get(u)[0])&&!e.C.has(a)&&e.C.set(u,a)}}function BA(e,n,s){s=new Cn(s).g;var a=new Map;n=C(n);for(var u=n.next();!u.done;u=n.next()){var f=u.value,p=Ve(f,"NAME"),g=Ve(f,"VALUE");u=Ve(f,"QUERYPARAM"),f=Ve(f,"IMPORT"),p&&g&&(a.has(p)||a.set(p,g)),u&&(p=s.get(u)[0])&&!a.has(p)&&a.set(u,p),f&&(u=e.C.get(f))&&a.set(f,u)}return a}function $ne(e,n){n=C(n);for(var s=n.next();!s.done;s=n.next()){var a=s.value,u=Ve(a,"AUDIO");s=Ve(a,"VIDEO");var f=Ve(a,"SUBTITLES");if(a=h8(e,a),f){var p=Fi(mt,a);e.K.set(f,p),wo(a,p)}u&&(f=Fi("audio",a),f||(f=e.g.hls.defaultAudioCodec),e.K.set(u,f)),s&&(u=Fi("video",a),u||(u=e.g.hls.defaultVideoCodec),e.K.set(s,u))}}function Vne(e,n){n=C(n);for(var s=n.next();!s.done;s=n.next()){var a=s.value,u=Ve(a,"DATA-ID");s=Ve(a,"URI");var f=Ve(a,"LANGUAGE");a=Ve(a,"VALUE"),u=new Map().set("id",u),s&&u.set("uri",Hu([e.H],s,e.C)[0]),f&&u.set("language",f),a&&u.set("value",a),s=new _e("sessiondata",u),e.h&&e.h.onEvent(s)}}function Gne(e,n){var s,a,u,f,p,g;return X(function(y){if(!e.h||!e.g)return y.return();for(a=C(n),u=a.next();!u.done;u=a.next())if(f=u.value,p=Ve(f,"PATHWAY-ID"),g=Ve(f,"SERVER-URI"),p&&g){e.j=new bf(e.h),e.j.configure(e.g),e.j.i=[e.H],e.j.setManifestType("HLS"),e.j.h=p,s=Fg(e.j,g);break}return O(y,s,0)})}function Hne(e,n){var s=e8(n,"SUBTITLES"),a={};n=C(s);for(var u=n.next();!u.done;u=n.next()){u=u.value;var f=OA(u,!e.j);a[f]?a[f].push(u):a[f]=[u]}if(n=[],!e.g.disableText)for(var p in a)try{n.push(f8(e,a[p],new Map).stream)}catch(g){if(!e.g.hls.ignoreTextStreamFailures)throw g}for(p=C(s),s=p.next();!s.done;s=p.next())if(a=tn(s.value,"GROUP-ID"),(s=e.K.get(a))&&(a=e.L.get(a)))for(a=C(a),u=a.next();!u.done;u=a.next())u=u.value,u.stream.codecs=s,u.stream.mimeType=HA(mt,s)||vx(mt),Rf(u.stream);return n.filter(function(g){return g})}function Rf(e){var n=new Set([Pn(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Kb(function(s){s.mimeType&&n.add(Pn(s.mimeType,e.codecs))}),e.fullMimeTypes=n}function qne(e,n,s){var a,u;return X(function(f){return f.g==1?(a=n.map(function(p){var g,y;return X(function(w){if(w.g==1)return e.g.disableThumbnails?w.return(null):(ce(w,2),O(w,nre(e,p),4));if(w.g!=2)return g=w.h,w.return(g.stream);if(y=ue(w),e.g.hls.ignoreImageStreamFailures)return w.return(null);throw y})}).concat(s.map(function(p){if(e.g.disableThumbnails)return null;try{var g=p8(e,p);return g.stream.type!=="image"?null:g.stream}catch(y){if(e.g.hls.ignoreImageStreamFailures)return null;throw y}})),O(f,Promise.all(a),2)):(u=f.h,f.return(u.filter(function(p){return p})))})}function Kne(e,n,s){n=n.filter(function(g){var y=Ve(g,"URI")||"";return g=Ve(g,"TYPE"),g!="SUBTITLES"&&(y!=""||g=="AUDIO")});var a={};n=C(n);for(var u=n.next();!u.done;u=n.next()){u=u.value;var f=OA(u,!e.j);a[f]?a[f].push(u):a[f]=[u]}for(var p in a)f8(e,a[p],s,!1)}function zne(e,n){return n.map(function(s){return s=p8(e,s),s.stream.type!=="video"?null:s.stream}).filter(function(s){return s})}function Wne(e,n,s,a,u,f,p){var g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge,ve,Ie,Le,at,je,Vt,ct,Xt,At,St,kt;return X(function(Ut){switch(Ut.g){case 1:if(g=[],y=new Set,e.g.ignoreDrmInfo||!(s.length>0)){Ut.B(2);break}w=C(s),b=w.next();case 3:if(b.done){Ut.B(2);break}if(I=b.value,L=tn(I,"METHOD"),j=Ve(I,"KEYFORMAT")||"identity",U=null,L=="NONE"){Ut.B(4);break}if(xx(L)){F=Hu(u(),tn(I,"URI"),f),B=F.sort().join(""),e.O.has(B)||(q=Kn(F,e.g.retryParameters),G=jl(e,q,6).promise,e.O.set(B,G)),Ut.B(4);break}if(j=="identity")return O(Ut,R8(e,I,"",u,null,f),12);if(z=e.mc.get(j),!z){J=null,Ut.B(10);break}return O(Ut,z(I,"",null),11);case 11:J=Ut.h;case 10:U=J,Ut.B(6);break;case 12:U=Ut.h;case 6:if(U){if(U.keyIds)for(ie=C(U.keyIds),Y=ie.next();!Y.done;Y=ie.next())ne=Y.value,y.add(ne);g.push(U)}case 4:b=w.next(),Ut.B(3);break;case 2:for(Z={},de=C(n),te=de.next();!te.done;te=de.next())ae=te.value,he=OA(ae,!e.j),Z[he]?Z[he].push(ae):Z[he]=[ae];Ee=[];for(Te in Z)ge=Z[Te],ve=ge[0],Ie=Ve(ve,"FRAME-RATE"),Le=Number(tn(ve,"BANDWIDTH"))||Number(Ve(ve,"AVERAGE-BANDWIDTH")),at=Ve(ve,"RESOLUTION"),je=C(at?at.split("x"):[null,null]),Vt=je.next().value,ct=je.next().value,Xt=Ve(ve,"VIDEO-RANGE"),(At=Ve(ve,"REQ-VIDEO-LAYOUT"))&&At.includes(",")&&(St=At.split(",").filter(function(_t){return _t=="CH-STEREO"||_t=="CH-MONO"}),At=St[0]),At=At||"CH-MONO",kt=Yne(e,ge,a),Ee.push.apply(Ee,K(ere(e,kt.audio,kt.video,Le,Vt,ct,Ie,Xt,At,g,y,p)));return Ut.return(Ee.filter(function(_t){return _t!=null}))}})}function Yne(e,n,s){for(var a={audio:[],video:[]},u=new Map,f=[],p=!1,g=!1,y=C(n),w=y.next();!w.done;w=y.next()){var b=w.value;w=Ve(b,"AUDIO");var I=Ve(b,"VIDEO"),L=w||I;L&&(f.includes(L)||f.push(L),(b=Ve(b,"PATHWAY-ID"))&&u.set(L,b),w?p=!0:I&&(g=!0))}f.length&&s.length&&(s=s.filter(function(U){return f.includes(tn(U,"GROUP-ID"))}),Kne(e,s,u)),s=(u=f.sort().join(","))&&e.L.has(u)?e.L.get(u):[],p?a.audio.push.apply(a.audio,K(s)):g&&a.video.push.apply(a.video,K(s)),g=!1;var j=n.map(function(U){return tn(U,"URI")});return p=a.audio.find(function(U){return U&&U.S().find(function(F){return j.includes(F)})}),s=h8(e,n[0]),y=Fi("video",s),(w=Fi("audio",s))&&!y?(p="audio",g=a.audio.length>0&&!a.audio.some(function(U){return U.stream.isAudioMuxedInVideo})):!a.audio.length&&!a.video.length&&w&&y?(p="video",s=[[y,w].join()]):a.audio.length&&p?(p="audio",g=!0):p=a.video.length&&!a.audio.length?"audio":"video",g||(n=rre(e,n,s,p),u&&e.g.enableAudioGroups&&(n.stream.groupId=u),n.stream.type=="audio"&&p==="audio"&&a.audio.some(function(U){return U.stream.isAudioMuxedInVideo})&&(e=a.audio[0].stream,n.stream.language=e.language,n.stream.channelsCount=e.channelsCount,n.stream.label=e.label,n.stream.audioSamplingRate=e.audioSamplingRate,n.stream.originalId=e.originalId,n.stream.originalLanguage=e.originalLanguage),a[n.stream.type]=[n]),a}function h8(e,n){return n=Ve(n,"CODECS")||"",e.Z=n.length>0,e.Z||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),i2(n.split(/\s*,\s*/))}function Xne(e){return(e=Ve(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function Qne(e){return(e=Ve(e,"SAMPLE-RATE"))?parseInt(e,10):null}function Jne(e){return e=Ve(e,"CHANNELS"),e?(e=e.split("/"),e.length!=2?!1:e[1]==="JOC"||e[1].includes("ATMOS")):!1}function Zne(e){return e=tn(e,"TYPE").toLowerCase(),e=="subtitles"&&(e=mt),e}function ere(e,n,s,a,u,f,p,g,y,w,b,I){for(var L=C(s),j=L.next();!j.done;j=L.next())k8(j.value.stream,u,f,p,g,y,null);for(u=e.g.disableVideo,(!s.length||u)&&(s=[null]),u&&(n=n.filter(function(q){return!q.stream.isAudioMuxedInVideo})),u=e.g.disableAudio,(!n.length||u)&&(n=[null]),u=[],n=C(n),f=n.next();!f.done;f=n.next())for(f=f.value,p=C(s),g=p.next();!g.done;g=p.next()){var U=g.value;(g=f?f.stream:null)&&(g.drmInfos=w,g.keyIds=b),(y=U?U.stream:null)&&(y.drmInfos=w,y.keyIds=b,e.g.disableIFrames||f3(y,I)),y&&!g&&(y.bandwidth=a),!y&&g&&(g.bandwidth=a),L=f?f.stream.drmInfos:null,j=U?U.stream.drmInfos:null,U=U?U.S().sort().join(","):"";var F=f?f.S().sort().join(","):"",B=[];g&&g.codecs&&B.push(g.codecs),y&&y.codecs&&B.push(y.codecs),U=[U,F,B.sort()].join("-"),g&&y&&!wD(L,j)||e.kb.has(U)||(g={id:e.G++,language:g?g.language:"und",disabledUntilTime:0,primary:!!g&&g.primary||!!y&&y.primary,audio:g,video:y,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(g),e.kb.add(U))}return u}function tre(e,n){n=e8(n,"CLOSED-CAPTIONS"),e.P=n.length==0,n=C(n);for(var s=n.next();!s.done;s=n.next()){var a=s.value,u=Ve(a,"LANGUAGE");s=Ht(u||"und"),u||(u=Ve(a,"NAME"))&&(s=u),u=tn(a,"GROUP-ID"),a=tn(a,"INSTREAM-ID").replace("SERVICE","svc"),e.J.get(u)||e.J.set(u,new Map),e.J.get(u).set(a,s)}}function f8(e,n,s,a){a=a===void 0?!0:a;for(var u=[],f=[],p=new Map,g=C(n),y=g.next(),w={};!y.done;w={kj:void 0},y=g.next()){y=y.value,w.kj=++e.G,w=function(F){return function(){return"shaka://hls-muxed"+F.kj}}(w);var b=a?tn(y,"URI"):Ve(y,"URI")||w();w=tn(y,"GROUP-ID"),u.push(b),f.push(w),p.set(w,b),(y=Ve(y,"PATHWAY-ID"))&&s.set(w,y)}if(a=f.sort().join(","),y=n[0],n="",g=Zne(y),g==mt)n=Ve(y,"CODECS")||"";else for(f=C(f),w=f.next();!w.done;w=f.next())if(w=w.value,e.K.has(w)){n=e.K.get(w);break}if(f=u.sort().join(","),g=="audio"&&a&&(f+=a),e.i.has(f))return e.i.get(f);if(w=e.G++,e.j)for(p=C(p),b=p.next();!b.done;b=p.next()){var I=C(b.value);b=I.next().value,I=I.next().value,(b=s.get(b))&&Af(e.j,w,b,I)}s=Ve(y,"LANGUAGE"),p=Ve(y,"NAME"),b=Ve(y,"DEFAULT")=="YES",I=g=="audio"?Xne(y):null;var L=g=="audio"?Jne(y):!1,j=Ve(y,"CHARACTERISTICS"),U=Ve(y,"FORCED")=="YES";return y=g=="audio"?Qne(y):null,u=gx(e,w,u,n,g,s,b,p,I,null,j,U,y,L),u.stream&&e.g.enableAudioGroups&&(u.stream.groupId=a),e.L.has(a)?e.L.get(a).push(u):e.L.set(a,[u]),e.i.set(f,u),u}function nre(e,n){var s,a,u,f,p,g,y,w,b,I;return X(function(L){return L.g==1?(s=tn(n,"URI"),a=Ve(n,"CODECS","jpeg")||"",e.i.has(s)?L.return(e.i.get(s)):(u=Ve(n,"LANGUAGE"),f=Ve(n,"NAME"),p=Ve(n,"CHARACTERISTICS"),g=gx(e,e.G++,[s],a,"image",u,!1,f,null,null,p,!1,null,!1),(y=Ve(n,"RESOLUTION"))?O(L,g.stream.createSegmentIndex(),3):L.B(2))):(L.g!=2&&(w=Qo(g.stream.segmentIndex),(b=w.tilesLayout)&&(g.stream.width=Number(y.split("x")[0])*Number(b.split("x")[0]),g.stream.height=Number(y.split("x")[1])*Number(b.split("x")[1])),g.stream.closeSegmentIndex()),(I=Ve(n,"BANDWIDTH"))&&(g.stream.bandwidth=Number(I)),e.i.set(s,g),L.return(g))})}function p8(e,n){var s="video",a=tn(n,"URI"),u=Ve(n,"CODECS")||"";if(u=="mjpg"&&(s="image"),e.i.has(a))return e.i.get(a);var f=Ve(n,"LANGUAGE"),p=Ve(n,"NAME"),g=Ve(n,"CHARACTERISTICS");return s=gx(e,e.G++,[a],u,s,f,!1,p,null,null,g,!1,null,!1),u=Ve(n,"RESOLUTION"),f=C(u?u.split("x"):[null,null]),u=f.next().value,f=f.next().value,s.stream.width=Number(u)||void 0,s.stream.height=Number(f)||void 0,(n=Ve(n,"BANDWIDTH"))&&(s.stream.bandwidth=Number(n)),e.i.set(a,s),s}function rre(e,n,s,a){for(var u=e.G++,f=[],p=C(n),g=p.next();!g.done;g=p.next()){var y=g.value;g=tn(y,"URI"),y=Ve(y,"PATHWAY-ID"),e.j&&y&&Af(e.j,u,y,g),f.push(g)}if(p=f.sort().join(",")+s.sort().join(","),e.i.has(p))return e.i.get(p);g=f.join(",");e:{if(n=Ve(n[0],"CLOSED-CAPTIONS"),a=="video"){if(e.g.disableText){e.P=!1,n=null;break e}if(n){if(n!="NONE"){n=e.J.get(n);break e}e.P=!1}else if(!n&&e.J.size)for(n=C(e.J.keys()),n=n.next();!n.done;n=n.next()){n=e.J.get(n.value);break e}}n=null}return s=Oh(a,s),a=gx(e,u,f,s,a,null,!1,g,null,n,null,!1,null,!1),e.i.set(p,a),a}function gx(e,n,s,a,u,f,p,g,y,w,b,I,L,j){function U(J){var ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge,ve,Ie,Le,at,je,Vt,ct,Xt,At;return X(function(St){switch(St.g){case 1:return ie=qn,ce(St,2),O(St,J.promise,4);case 4:if(Y=St.h,J.aborted)return St.return();if(ne=Y.uri,ne!=Y.originalUri&&(Z=q.S(),Z.includes(ne)||q.dg.push(ne)),de=jA(e.hb,Y.data),de.type!=1)throw new oe(2,4,4017);return te=Ks(de.ma,"EXT-X-DEFINE"),ae=BA(e,te,ne),he=!1,(!e.Z&&e.g.hls.disableCodecGuessing||e.P&&u==ie.Ga&&!e.g.hls.disableClosedCaptionsDetection)&&de.segments.length>0&&(e.P=!1,he=!0),Ee=!e.Z&&e.g.hls.disableCodecGuessing,Te=di(e),O(St,v8(e,0,ae,de,F,a,u,f,p,g,y,w,b,I,L,j,void 0,he,Ee),5);case 5:if(ge=St.h,J.aborted)return St.return();ve=ge.stream,w8(e,de),di(e)&&!Te&&E8(e,de),q.nd=ge.nd,q.Zc=ge.Zc,q.rf=ge.rf,q.qf=ge.qf,q.we=ge.we,q.Qf=ge.Qf,q.$b=ge.$b,q.ac=ge.ac,B.segmentIndex=ve.segmentIndex,B.encrypted=ve.encrypted,B.drmInfos=ve.drmInfos,B.keyIds=ve.keyIds,B.mimeType=ve.mimeType,B.bandwidth=B.bandwidth||ve.bandwidth,B.codecs=B.codecs||ve.codecs,B.closedCaptions=B.closedCaptions||ve.closedCaptions,B.width=B.width||ve.width,B.height=B.height||ve.height,B.hdr=B.hdr||ve.hdr,B.colorGamut=B.colorGamut||ve.colorGamut,B.frameRate=B.frameRate||ve.frameRate,B.language=="und"&&ve.language!="und"&&(B.language=ve.language),B.language=B.language||ve.language,B.channelsCount=B.channelsCount||ve.channelsCount,B.audioSamplingRate=B.audioSamplingRate||ve.audioSamplingRate,Rf(B),B.drmInfos.length&&e.h.newDrmInfo(B),Ie=!1,(!w&&B.closedCaptions||w&&B.closedCaptions&&w.size!=B.closedCaptions.size)&&(Ie=!0),e.m&&Ie&&e.h.makeTextStreamsForClosedCaptions(e.m),u==ie.Va&&(Le=Qo(ve.segmentIndex))&&Le.ka&&(B.mimeType="application/mp4",Rf(B)),at=l1(B),B.segmentIndex.Kb(function(kt){kt.ka&&(kt.ka.Pd=at)}),ire(e)&&(e.Kc?$A(e,[q]):(e.Kc=!0,je=Array.from(e.i.values()),Vt=je.filter(function(kt){return kt.stream.segmentIndex}),$A(e,Vt),mx(e),ct=e.u,ct>0&&e.F.Y(ct))),GA(e,de.ma,B.type,ae,F),e.m&&(e.m.startTime=e.A),se(St,0);break;case 2:if(Xt=ue(St),B.closeSegmentIndex(),Xt.code===7001)return St.return();if(At=e.h.disableStream(B),!At)throw Xt;re(St)}})}function F(){return e.j&&s.length>1?Bg(e.j,n):q.dg.concat(t8([e.H],s,e.C))}var B=x8(e,a,u,f,p,g,y,w,b,I,L,j);s.some(function(J){return J.startsWith("shaka://hls-muxed")})&&(B.isAudioMuxedInVideo=!0,B.mimeType="video/mp2t",Rf(B));var q={stream:B,type:u,dg:[],nd:0,Zc:0,Qf:new Map,rf:!1,qf:!1,we:!1,$g:-1,$b:-1,ac:-1,S:F},G=null,z;return B.createSegmentIndex=function(){return G||(B.isAudioMuxedInVideo?(B.segmentIndex=new jt([]),Promise.resolve()):(z=qA(e,q.S(),!0),G=new Promise(function(J){J(U(z))})))},B.closeSegmentIndex=function(){G&&!B.segmentIndex&&z.abort(),B.segmentIndex&&(B.segmentIndex.release(),B.segmentIndex=null),G=null},q}function m8(e){var n=1/0;e=C(e.i.values());for(var s=e.next();!s.done;s=e.next())s=s.value,s.stream.segmentIndex&&s.stream.type!="text"&&!s.stream.isAudioMuxedInVideo&&(n=Math.min(n,s.Zc));return n}function g8(e,n){var s=[];n=C(n);for(var a=n.next();!a.done;a=n.next())a=a.value,a.segmentIndex&&a.segmentIndex.Kb(function(u){s.push(u)});e.l.Ge(s)}function $A(e,n){if(!di(e))for(var s=m8(e),a=C(n),u=a.next();!u.done;u=a.next())u.value.stream.segmentIndex.Hd(0,s);g8(e,n.map(function(f){return f.stream})),a=Array.from(e.i.values()).filter(function(f){return f.stream.segmentIndex}),s=a.some(function(f){return f.stream.type=="audio"}),u=a.some(function(f){return f.stream.type=="video"}),a=di(e)&&!e.jb,s=!di(e)&&e.jb&&!(s&&u),e.g.hls.ignoreManifestProgramDateTime||a||s?u8(e,n,a):(jne(e,n),e.g.hls.ignoreManifestProgramDateTimeForTypes.length>0&&u8(e,n))}function Kg(e,n){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(n)}function ire(e){if(!e.m)return!1;var n=[],s=[];e=C(e.m.variants);for(var a=e.next();!a.done;a=e.next())a=a.value,a.video&&n.push(a.video),a.audio&&s.push(a.audio);return!(n.length>0&&!n.some(function(u){return u.segmentIndex})||s.length>0&&!s.some(function(u){return u.segmentIndex}))}function v8(e,n,s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G){q=q===void 0?!0:q,G=G===void 0?!0:G;var z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge,ve,Ie,Le,at,je,Vt,ct,Xt,At,St,kt,Ut,_t,wt,It,lr;return X(function(Jn){switch(Jn.g){case 1:if(z=a.segments||[],J=z.every(function(Cs){return!!Sr(Cs.ma,"EXT-X-GAP")}),!z.length||J)throw new oe(2,4,4053);if(sre(e,a),di(e)&&VA(e,a),ie=di(e)?e.D.get(p):new Map,Y=I8(e,a,ie,s,u,p),ne=Y.segments,Z=Y.bandwidth,Ee=he=ae=te=de=null,!(ne.length>0&&q)){Jn.B(2);break}return O(Jn,Fne(e,ne),3);case 3:Te=Jn.h,p!=Te.type&&di(e)&&(e.D.set(Te.type,e.D.get(p)),e.D.set(p,new Map)),p=Te.type,g=Te.language,b=Te.channelCount,U=Te.sampleRate,e.g.disableText||(I=Te.closedCaptions),te=Te.height,de=Te.width,ae=Te.Se,he=Te.colorGamut,Ee=Te.frameRate,G&&(B=Te.mimeType,f=Te.codecs);case 2:if(B){Jn.B(4);break}return O(Jn,lre(e,p,f,ne),5);case 5:B=Jn.h,p!=mt||f||B!="application/mp4"||!ne[0]||ne[0].ka||(B="text/vtt");case 4:return O(Jn,T8(e,a,B,u,s),6);case 6:if(ge=Jn.h,ve=ge.drmInfos,Ie=ge.keyIds,Le=ge.encrypted,at=ge.Ki,Le&&!ve.length&&!at)throw new oe(2,4,4026);return je=x8(e,f,p,g,y,w,b,I,L,j,U,F),je.encrypted=Le&&!at,je.drmInfos=ve,je.keyIds=Ie,je.mimeType=B,Z&&(je.bandwidth=Z),Rf(je),p=="video"&&(de||te||ae||he)&&k8(je,de,te,Ee,ae,null,he),di(e)&&VA(e,a),Vt=ne[0].startTime,ct=ne[ne.length-1],Xt=ct.endTime,At=new jt(ne),je.segmentIndex=At,kt=(St=Sr(a.ma,"EXT-X-SERVER-CONTROL"))?kf(St,"CAN-SKIP-UNTIL")!=null:!1,Ut=St?kf(St,"CAN-BLOCK-RELOAD")!=null:!1,_t=_f(a.ma,"EXT-X-MEDIA-SEQUENCE",0),wt=y8(_t,ne),It=wt.$b,lr=wt.ac,Jn.return({stream:je,type:p,dg:[],S:u,nd:Vt,Zc:Xt,rf:kt,qf:Ut,we:!1,$g:-1,$b:It,ac:lr,Qf:ie})}})}function y8(e,n){e=e+n.length-1;var s=-1;if(!n.length)return e++,{$b:e,ac:s};n=n[n.length-1];var a=n.g;return n.g.length?(s=a.length-1,a[a.length-1].isPreload()||(e++,s=0),{$b:e,ac:s}):(e++,n.u&&(s=0),{$b:e,ac:s})}function x8(e,n,s,a,u,f,p,g,y,w,b,I){var L=HA(s,n)||vx(s),j=[];if(y){y=C(y.split(","));for(var U=y.next();!U.done;U=y.next())j.push(U.value)}return U=void 0,y=null,s==mt?U=j.includes("public.accessibility.transcribes-spoken-dialog")&&j.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":j.includes("public.accessibility.describes-video")&&(y="visually impaired"),j.length||U!=="subtitle"||j.push("subtitle"),U=null,s!="video"&&(U=f),e={id:e.G++,originalId:f,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:L,codecs:n,kind:s==mt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Ht(a||"und"),originalLanguage:a,label:U,type:s,primary:u,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:j,forced:w,channelsCount:p,audioSamplingRate:b,spatialAudio:I,closedCaptions:g,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:y,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},Rf(e),e}function T8(e,n,s,a,u){var f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge,ve,Ie;return X(function(Le){switch(Le.g){case 1:if(f=new Map,!e.g.ignoreDrmInfo&&n.segments){for(p=C(n.segments),g=p.next();!g.done;g=p.next())if(y=g.value,w=Ks(y.ma,"EXT-X-KEY"),b=null,w.length)for(b=b8(e,n,y.ma,a,u),I=C(w),L=I.next();!L.done;L=I.next())j=L.value,f.set(j,b)}F=U=!1,B=[],q=new Set,G=C(f),z=G.next();case 2:if(z.done){Le.B(4);break}if(J=z.value,ie=C(J),Y=ie.next().value,ne=ie.next().value,Z=Y,de=ne,te=tn(Z,"METHOD"),te=="NONE"){Le.B(3);break}if(U=!0,ae=Ve(Z,"KEYFORMAT")||"identity",he=null,xx(te)){F=!0,Le.B(3);break}if(ae=="identity")return O(Le,R8(e,Z,s,a,de,u),11);if(Ee=e.mc.get(ae),!Ee){Te=null,Le.B(9);break}return O(Le,Ee(Z,s,de),10);case 10:Te=Le.h;case 9:he=Te,Le.B(6);break;case 11:he=Le.h;case 6:if(he){if(he.keyIds)for(ge=C(he.keyIds),ve=ge.next();!ve.done;ve=ge.next())Ie=ve.value,q.add(Ie);B.push(he)}case 3:z=G.next(),Le.B(2);break;case 4:return Le.return({drmInfos:B,keyIds:q,encrypted:U,Ki:F})}})}function S8(e,n,s,a,u){if(!l.crypto||!l.crypto.subtle)throw $e("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new oe(2,4,4042);var f=0,p=Ve(n,"IV","");if(p){var g=nd(p.substr(2));if(g.byteLength!=16)throw new oe(2,4,4048)}else f=_f(s.ma,"EXT-X-MEDIA-SEQUENCE",0);var y=Hu(a(),tn(n,"URI"),u),w=y.sort().join("");if(s=n.toString()+"-"+f+"-"+w,!e.oa.has(s)){var b={bitsKey:128,blockCipherMode:"CBC",iv:g,firstMediaSequenceNumber:f};switch(tn(n,"METHOD")){case"AES-256":b.bitsKey=256;break;case"AES-256-CTR":b.bitsKey=256,b.blockCipherMode="CTR"}b.fetchKey=function(){var I,L,j,U;return X(function(F){if(F.g==1)return e.O.has(w)||(I=Kn(y,e.g.retryParameters),L=jl(e,I,6).promise,e.O.set(w,L)),O(F,e.O.get(w),2);if(F.g!=3){if(j=F.h,!j.data||j.data.byteLength!=b.bitsKey/8)throw new oe(2,4,4049);return U={name:b.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:b.bitsKey},O(F,l.crypto.subtle.importKey("raw",j.data,U,!0,["decrypt"]),3)}b.cryptoKey=F.h,b.fetchKey=void 0,re(F)})},e.oa.set(s,b)}return e.oa.get(s)}function w8(e,n){e.A==null&&(n=Sr(n.ma,"EXT-X-START"))&&(e.A=Number(tn(n,"TIME-OFFSET")))}function sre(e,n){var s=Sr(n.ma,"EXT-X-PLAYLIST-TYPE");n=Sr(n.ma,"EXT-X-ENDLIST"),n=s&&s.value=="VOD"||n,s=s&&s.value=="EVENT"&&!n,s=!n&&!s,n?yx(e,Sx):s?yx(e,zA):yx(e,pre)}function VA(e,n){var s=1/0,a=n.segments;if(a.length)for(var u=a.length-1;u>=0;){var f=Sr(a[u].ma,"EXTINF");if(f){s=Number(f.value.split(",")[0]);break}u--}if(a=Sr(n.ma,"EXT-X-TARGETDURATION"),!a)throw new oe(2,4,4024,"EXT-X-TARGETDURATION");a=Number(a.value),(u=Sr(n.ma,"EXT-X-PART-INF"))&&(e.R=Number(tn(u,"PART-TARGET"))),n=Sr(n.ma,"EXT-X-SERVER-CONTROL"),e.ea&&e.R?(e.u=e.Jc?e.R*5<=s?Math.min(e.R,e.u):Math.min(s,e.u):Math.min(e.R,e.u),e.Na=n?Number(tn(n,"PART-HOLD-BACK")):0):(e.u=Math.min(s,e.u),s=n?kf(n,"HOLD-BACK"):null,e.La=s?Number(s.value):0),e.$a=Math.max(a,e.$a)}function E8(e,n){var s=0;if(e.g.defaultPresentationDelay)s=e.g.defaultPresentationDelay;else if(e.Na)s=e.Na;else if(e.La)s=e.La;else for(var a=n.segments.length,u=a-Math.min(a,e.g.hls.liveSegmentsDelay);u<a;u++){var f=Sr(n.segments[u].ma,"EXTINF");s=f?s+Number(f.value.split(",")[0]):s+e.$a}e.A&&e.A<0&&(s=Math.min(-e.A,s),e.A+=s),e.l.Tj(0),e.l.ii(s),e.l.td(!1)}function b8(e,n,s,a,u){var f=Sr(s,"EXT-X-MAP");if(!f)return null;var p=tn(f,"URI"),g=Hu(a(),p,u);if(p=[g.toString(),Ve(f,"BYTERANGE","")].join("-"),!e.ya.has(p)){var y=void 0,w=null,b=!1;s=C(s);for(var I=s.next();!I.done;I=s.next())I=I.value,I.name=="EXT-X-KEY"?(b=tn(I,"METHOD"),xx(b)&&I.id<f.id?(b=!1,y=S8(e,I,n,a,u)):b=b!="NONE"):I.name=="EXT-X-BYTERANGE"&&I.id<f.id&&(w=I);n=ore(g,f,w,y,b),e.ya.set(p,n)}return e.ya.get(p)}function ore(e,n,s,a,u){var f=0,p=null;return n=Ve(n,"BYTERANGE"),!n&&s&&(n=s.value),n&&(f=n.split("@"),p=Number(f[0]),f=Number(f[1]),p=f+p-1,a&&(s=p+1-f,s%16&&(p+=16-s%16))),new $i(function(){return e},f,p,null,null,null,a,u)}function are(e,n,s,a,u,f,p,g,y,w){var b=a.ma,I=Sr(b,"EXTINF"),L=0,j=0,U=null;a.Hc.length&&(e.m.isLowLatency=!0);var F=null;if(!e.g.hls.ignoreManifestProgramDateTime){var B=Sr(b,"EXT-X-PROGRAM-DATE-TIME");B&&B.value&&(F=yl(B.value),e.jb=!0)}var q=Il;if(Sr(b,"EXT-X-GAP")&&(e.m.gapCount++,q=2),!I){if(a.Hc.length==0)throw new oe(2,4,4024,"EXTINF");if(!e.ea)return null}var G=[];B=!1;var z=null,J=!1,ie=!1;if(e.ea&&a.Hc.length){L=n&&l.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var Y=F,ne={},Z=0;Z<a.Hc.length;ne={zg:void 0,Ie:void 0},Z++){var de=a.Hc[Z],te=Z==0?s:G[G.length-1],ae=Z==0?u:te.endTime,he=Number(Ve(de,"DURATION"))||e.R;if(he){var Ee=ae+he,Te=0,ge=null;if(de.name=="EXT-X-PRELOAD-HINT"?(Te=(Te=Ve(de,"BYTERANGE-START"))?Number(Te):0,(te=Ve(de,"BYTERANGE-LENGTH"))?ge=Te+Number(te)-1:Te&&(ge=Number.MAX_SAFE_INTEGER)):(Te=Ve(de,"BYTERANGE"),ge=C(A8(te,Te)),Te=ge.next().value,ge=ge.next().value),ne.Ie=Ve(de,"URI"),ne.Ie){te=Il,Ve(de,"GAP")=="YES"&&(e.m.gapCount++,te=2,J=!0),ne.zg=null;var ve=function(Le){return function(){return Le.zg==null&&(Le.zg=Hu(g(),Le.Ie,f)),Le.zg}}(ne);L&&Te>=0&&ge!=null&&(z=ve,B=!0),ae=new Xe(ae,Ee,ve,Te,ge,n,0,0,1/0,[],"",null,Y,te,w),de.name=="EXT-X-PRELOAD-HINT"&&(ae.Nh(),ie=!0),Ve(de,"INDEPENDENT")!="YES"&&Z>0&&ae.Od(),de=y,de||(G.length&&G[0].mimeType?de=G[0].mimeType:ne.Ie&&(ne=lf(ne.Ie),de=Tx.get(p).get(ne)||null)),de&&(ae.mimeType=de,P8.has(de)&&(ae.ka=null)),G.push(ae),Y&&(Y+=he)}}}}if(I){if(I=Number(I.value.split(",")[0]),I==0)return null;L=u+I}else if(G.length)L=G[G.length-1].endTime;else return null;B&&(J||G[0].startByte!=0?(B=!1,z=null):G=[]),(I=Sr(b,"EXT-X-BYTERANGE"))?(U=C(A8(s,I.value)),j=U.next().value,U=U.next().value):G.length&&(j=G[0].startByte,U=G[G.length-1].endByte),s="",I=null,p=="image"&&(s="1x1",p=Sr(b,"EXT-X-TILES"))&&(s=tn(p,"LAYOUT"),(p=Ve(p,"DURATION"))&&(I=Number(p)));var Ie=null;return n=new Xe(u,L,function(){return z?z():(Ie==null&&(Ie=Hu(g(),a.g,f)),Ie||[])},j,U,n,0,0,1/0,G,s,I,F,q,w,G.length>0&&!!a.g),y&&(n.mimeType=y,P8.has(y)&&(n.ka=null)),B&&(e.Jc=!0,n.rj(),ie&&n.Nh()),n}function A8(e,n){var s=0,a=null;return n&&(s=n.split("@"),n=Number(s[0]),s=s[1]?Number(s[1]):e.endByte+1,a=s+n-1),[s,a]}function GA(e,n,s,a,u){if(s=="video"||s=="audio"){var f=e.l.m;if(f&&!Kg(e,s))for(n=Ks(n,"EXT-X-DATERANGE"),n=n.filter(function(te){return kf(te,"START-DATE")!=null}).sort(function(te,ae){return te=tn(te,"START-DATE"),ae=tn(ae,"START-DATE"),te<ae?-1:te>ae?1:0}),s=0;s<n.length;s++){var p=n[s];try{var g=tn(p,"START-DATE"),y=yl(g);if(!isNaN(y)){var w=Math.max(0,y-f),b=null,I=Ve(p,"END-DATE");if(I){var L=yl(I);if(!isNaN(L)&&(b=L-f,b<0))continue}if(b==null){var j=Ve(p,"DURATION")||Ve(p,"PLANNED-DURATION");if(j){var U=parseFloat(j);if(isNaN(U)||(b=w+U),y-f+U<0)continue}}var F=Ve(p,"CLASS")||"com.apple.quicktime.HLS",B=Ve(p,"END-ON-NEXT")=="YES";if(b==null&&B){for(var q=s+1;q<n.length;q++){var G=Ve(n[q],"CLASS")||"com.apple.quicktime.HLS";if(F==G){var z=tn(n[q],"START-DATE"),J=yl(z);if(!isNaN(J)&&J&&J>y){b=Math.max(0,J-f);break}}}if(b==null)continue}q=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var ie=[],Y=C(p.attributes),ne=Y.next();!ne.done;ne=Y.next()){var Z=ne.value;if(!q.includes(Z.name)){var de=n8(Z.value,a);(Z.name=="X-ASSET-URI"||Z.name=="X-ASSET-LIST")&&(de=Hu(u(),Z.value,a)[0]),ie.push({key:Z.name,description:"",data:de,mimeType:null,pictureType:null})}}ie.length>1&&e.h.onMetadata(F,w,b,ie)}}catch{}}}}function I8(e,n,s,a,u,f){function p(te){if(te=lf(te),!te)return null;var ae=Tx.get(f).get(te);return ae||(ae=KA.get(te)),ae}var g=n.segments,y=null,w=null,b=null,I=null,L=void 0,j=_f(n.ma,"EXT-X-DISCONTINUITY-SEQUENCE",-1),U=_f(n.ma,"EXT-X-MEDIA-SEQUENCE",0),F=Sr(n.ma,"EXT-X-SKIP"),B=F?Number(Ve(F,"SKIPPED-SEGMENTS")):0,q=U+B,G=0;di(e)&&s.has(q)&&(G=s.get(q)),G===0&&e.Fa==zA&&s.size>0&&!s.has(q)&&e.l.i!=null&&(G=e.l.Mb());var z=[],J=null;F=[];for(var ie=0;ie<g.length;ie++){var Y=g[ie];(q=Sr(Y.ma,"EXT-X-MAP"))&&q.id!==w&&(y=b8(e,n,Y.ma,u,a),w=q.id),q=Y.g;var ne="";q&&(ne=lf(q)),ne!==I&&(b=p(q),I=ne),ne=ie==0?G:J.endTime,q=U+B+ie,Sr(Y.ma,"EXT-X-DISCONTINUITY")&&(j++,J&&J.ka&&(J.ka.g=ne));for(var Z=C(Y.ma),de=Z.next();!de.done;de=Z.next())de=de.value,de.name=="EXT-X-KEY"&&(xx(tn(de,"METHOD"))?L=S8(e,de,n,u,a):L=void 0);if(s.set(q,ne),ne=are(e,y,J,Y,ne,a,f,u,b,L)){if((J=_f(Y.ma,"EXT-X-BITRATE"))?(F.push({bitrate:J,duration:ne.endTime-ne.startTime}),ne.bandwidth=J):ne.endByte?(Y=Db(ne))&&(J=ne.endTime-ne.startTime,Y=Y*8/J/1e3,F.push({bitrate:Y,duration:J}),ne.bandwidth=Y):F.length&&(J=F.pop(),J.duration+=ne.endTime-ne.startTime,F.push(J),ne.bandwidth=J.bitrate),ne.bandwidth)for(J=C(ne.g),Y=J.next();!Y.done;Y=J.next())Y.value.bandwidth=ne.bandwidth;J=ne,ne.i=j,Kg(e,f)&&e.M!=null&&q<e.M||z.push(ne)}}if(n=void 0,F.length&&(n=F.reduce(function(te,ae){return te+ae.duration},0),n=Math.round(F.reduce(function(te,ae){return te+ae.bitrate*ae.duration},0)/n*1e3)),F=z.some(function(te){return te.h!=null})){for(s={},a=0;a<z.length;s={wf:void 0,vf:void 0,mf:void 0,qd:void 0,lf:void 0},a++)if(s.qd=z[a],s.qd.h==null)for(s.vf=0,s.wf=a,u=function(te){return function(){var ae=z[te.wf];if(ae){if(ae.h!=null)return ae.h+te.vf;te.vf-=ae.endTime-ae.startTime,te.wf+=1}return null}}(s),s.lf=0,s.mf=a,g=function(te){return function(){var ae=z[te.mf];if(ae){if(ae!=te.qd&&(te.lf+=ae.endTime-ae.startTime),ae.h!=null)return ae.h+te.lf;--te.mf}return null}}(s);s.qd.h==null;)s.qd.h=g(),s.qd.h==null&&(s.qd.h=u())}if(F)for(s=C(z),a=s.next();!a.done;a=s.next())for(u=a.value,a=u.h,u=C(u.g),g=u.next();!g.done;g=u.next())g=g.value,g.h=a,a+=g.endTime-g.startTime;if(s=e.aa,F&&s!=1/0&&!Kg(e,f))for(e=C(z),F=e.next();!F.done;F=e.next())F.value.wi(s);return{segments:z,bandwidth:n}}function HA(e,n){if(e==mt){if(n=="vtt"||n=="wvtt")return"text/vtt";if(n&&n!=="")return"application/mp4"}return e!="image"||n&&n!="jpeg"?e=="audio"&&n=="mp4a.40.34"?"audio/mpeg":n=="mjpg"?"application/mp4":null:"image/jpeg"}function vx(e){return e==mt?"text/vtt":Tx.get(e).get("mp4")}function C8(e,n){e=di(e)?Math.trunc((n.length-1)/2):0;for(var s=n[e];s.Vc()==2&&e+1<n.length;)e++,s=n[e];return{segment:s,segmentIndex:e}}function lre(e,n,s,a){var u,f,p,g,y,w,b,I,L,j,U,F,B;return X(function(q){switch(q.g){case 1:return u=ys,f=C8(e,a),p=f.segment,p.status==2?q.return(vx(n)):(y=p.S(),(w=lf(y[0]))&&(b=Tx.get(n),(I=b.get(w))||(I=KA.get(w)))?q.return(I):(g=HA(n,s))?q.return(g):(j=1,U=Kn(y,e.g.retryParameters),ce(q,2),U.method="HEAD",O(q,jl(e,U,u,{type:j}).promise,4)));case 4:F=q.h,L=F.headers["content-type"],se(q,3);break;case 2:if(B=ue(q),!B||B.code!=1002&&B.code!=1001){q.B(3);break}return U.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(U.headers.Range="bytes=0-0"),O(q,jl(e,U,u,{type:j}).promise,6);case 6:F=q.h,L=F.headers["content-type"];case 3:if(!L){q.B(7);break}if(g=L.toLowerCase().split(";")[0],g!="application/octet-stream"){q.B(8);break}if(F.data.byteLength){q.B(9);break}return U.method="GET",O(q,jl(e,U,u,{type:j}).promise,10);case 10:F=q.h;case 9:nf(nt(F.data))&&(g="video/mp2t");case 8:if(g!="application/octet-stream")return q.return(g);case 7:return q.return(vx(n))}})}function k8(e,n,s,a,u,f,p){e&&(e.width=Number(n)||void 0,e.height=Number(s)||void 0,e.frameRate=Number(a)||void 0,e.hdr=u||void 0,e.videoLayout=f||void 0,e.colorGamut=p||void 0)}function qA(e,n,s){return jl(e,Kn(n,e.g.retryParameters),0,{type:s?2:3})}function _8(e){var n,s,a,u,f,p;return X(function(g){switch(g.g){case 1:return e.h?(ce(g,2),n=Date.now(),O(g,e.update(),4)):g.return();case 4:s=Date.now(),di(e)&&(a=(s-n)/1e3,e.Ob.sample(1,a),u=e.g.updatePeriod>0?e.g.updatePeriod:e.u,f=Math.max(0,u-Sy(e.Ob)),e.F.Y(f)),se(g,3);break;case 2:if(p=ue(g),!e.h)return g.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(p),g.return();p.severity=1,e.h.onError(p),e.F.Y(.1);case 3:if(!e.h)return g.return();e.h.onManifestUpdated(),re(g)}})}function di(e){return e.Fa!=Sx}function yx(e,n){e.Fa=n,e.l&&e.l.td(!di(e)),di(e)||e.F.stop()}function jl(e,n,s,a){if(!e.W)throw new oe(2,7,7001);return a||(a={}),a.isPreload=e.lc(),n=e.h.networkingEngine.request(s,n,a),md(e.W,n),n}function xx(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function ure(e,n,s,a){var u,f,p,g,y,w;return X(function(b){if(b.g==1){if(s=="video/mp2t")throw new oe(2,4,4040);if(l.shakaMediaKeysPolyfill==="apple")throw new oe(2,4,4041);if(u=tn(n,"METHOD"),f=["SAMPLE-AES","SAMPLE-AES-CTR"],!f.includes(u))return b.return(null);p="cenc",u=="SAMPLE-AES"&&(p="cbcs"),g=tn(n,"URI"),y=ml("com.apple.fps",p,null,g);var I=new Cn(g).Ib.replace(/-/g,"").toLowerCase();return(w=I.length===32&&/^[0-9a-f]+$/.test(I)?I:null)||!a?b.B(2):O(b,L8(e,a),3)}return b.g!=2&&(w=b.h),w&&y.keyIds.add(w),b.return(y)})}function R8(e,n,s,a,u,f){var p,g,y,w,b,I,L,j,U,F,B,q;return X(function(G){switch(G.g){case 1:if(s=="video/mp2t")throw new oe(2,4,4040);if(l.shakaMediaKeysPolyfill==="apple")throw new oe(2,4,4041);if(p=tn(n,"METHOD"),g=["SAMPLE-AES","SAMPLE-AES-CTR"],!g.includes(p))return G.return(null);if(y=Hu(a(),tn(n,"URI"),f),y[0].startsWith("data:text/plain;base64,")){w=pl(Bs(y[0].split("data:text/plain;base64,").pop())),G.B(2);break}return b=y.sort().join(""),e.sa.has(b)||(I=Kn(y,e.g.retryParameters),L=jl(e,I,6).promise,e.sa.set(b,L)),O(G,e.sa.get(b),3);case 3:j=G.h,w=pl(j.data);case 2:if(U="00000000000000000000000000000000",!u){G.B(4);break}return O(G,L8(e,u),5);case 5:(F=G.h)&&(U=F);case 4:return B=new Map,B.set(U,w),q="cenc",p=="SAMPLE-AES"&&(q="cbcs"),G.return(bD(B,q))}})}function L8(e,n){var s,a,u,f;return X(function(p){return p.g==1?(s=null,e.ua.has(n)?(s=e.ua.get(n),p.B(2)):(a=uf(n.S(),n.Uc(),n.Sc(),e.g.retryParameters),u=ys,O(p,jl(e,a,u,{type:0}).promise,3))):(p.g!=2&&(f=p.h,n.Ne(f.data),s=WJ(f.data),e.ua.set(n,s)),p.return(s))})}xe("shaka.hls.HlsParser",px);var KA=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),cre=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),dre=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),hre=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),fre=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),Tx=new Map().set("audio",cre).set("video",dre).set("text",hre).set("image",fre),P8=new Set(["video/mp2t"].concat(K(Sl))),Sx="VOD",pre="EVENT",zA="LIVE";od("application/x-mpegurl",function(){return new px}),od("application/vnd.apple.mpegurl",function(){return new px});function wx(e){return rx(e)}var mre=new Map().set("com.microsoft.playready",wx).set("com.microsoft.playready.recommendation",wx).set("com.microsoft.playready.software",wx).set("com.microsoft.playready.hardware",wx);function WA(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.A=1,this.i=null,this.F=new Uh(5),this.u=new Ke(function(){gre(e)}),this.D=new Wh,this.m=new Map,this.C=function(){return!1}}d=WA.prototype,d.configure=function(e,n){this.g=e,n&&(this.C=n)},d.start=function(e,n){var s=this;return X(function(a){if(a.g==1)return s.l=[e],s.h=n,O(a,YA(s),2);if(!s.h)throw new oe(2,7,7001);return a.return(s.j)})};function gre(e){var n;X(function(s){switch(s.g){case 1:return ce(s,2),O(s,YA(e),4);case 4:se(s,3);break;case 2:n=ue(s),e.h&&(n.severity=1,e.h.onError(n));case 3:if(!e.h)return s.return();re(s)}})}d.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.u!=null&&(this.u.stop(),this.u=null),this.m.clear(),this.D.destroy()},d.update=function(){var e=this,n;return X(function(s){if(s.g==1)return ce(s,2),O(s,YA(e),4);if(s.g!=2)return se(s,0);if(n=ue(s),!e.h||!n)return s.return();e.h.onError(n),re(s)})},d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(){},d.banLocation=function(){},d.setMediaElement=function(){};function YA(e){var n,s,a,u,f,p,g;return X(function(y){if(y.g==1)return n=Kn(e.l,e.g.retryParameters),s=e.h.networkingEngine,a=Date.now(),u=s.request(0,n,{type:5,isPreload:e.C()}),md(e.D,u),O(y,u.promise,2);if(f=y.h,!e.h)return y.return();f.uri&&!e.l.includes(f.uri)&&e.l.unshift(f.uri);var w=f.uri,b=f.data,I=e.g.mss.manifestPreprocessor;if(I!=S1){if(Nt("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),b=NO(b,"SmoothStreamingMedia"),!b)throw new oe(2,4,4046,w);I(b),b=To(b.outerHTML)}var L=Bm(b,"SmoothStreamingMedia");if(!L)throw new oe(2,4,4046,w);if(w=e.g.mss.manifestPreprocessorTXml,w!=w1&&w(L),e.i||(e.i=new tt(null,0)),w=rt(L,"IsLive",ky,!1))throw new oe(2,4,4047);e.i.td(!w),I=rt(L,"TimeScale",jr,1e7),b=rt(L,"DVRWindowLength",jr),w&&(b===0||isNaN(b))&&(b=1/0);var j=rt(L,"CanSeek",ky,!1);b===0&&j&&(b=1/0),j=null,b&&b>0&&(j=b/I),w&&!isNaN(e.g.availabilityWindowOverride)&&(j=e.g.availabilityWindowOverride),j==null&&(j=1/0),e.i.mg(j),b=rt(L,"Duration",jr,1/0),w||e.i.Fb(b/I),w={variants:[],textStreams:[],timescale:I,duration:b/I};var U;for(j=Yt(L,"Protection"),I=e.g.mss.keySystemsBySystemId,b=[],j=C(j),U=j.next();!U.done;U=j.next())b=b.concat(Yt(U.value,"ProtectionHeader"));if(b.length){for(j=[],U=0;U<b.length;U++){var F=b[U],B=F.attributes.SystemID.toLowerCase(),q=I[B];if(q){var G;e:{if(G=lO(F)){G=C(Xo(G,"DATA"));for(var z=G.next();!z.done;z=G.next())if(z=fn(z.value,"KID")){G=Bs(Bn(z)),G=new Uint8Array([G[3],G[2],G[1],G[0],G[5],G[4],G[7],G[6]].concat(K(G.slice(8)))),G=pl(G);break e}}G=null}z=Bs(Bn(F)),B=nd(B.replace(/-/g,"")),B=[{initData:Ky(z,B,new Set,0),initDataType:"cenc",keyId:G}],B=ml(q,"cenc",B),G&&B.keyIds.add(G),(q=mre.get(q))&&(B.licenseServerUri=q(F)),j.push(B)}}I=j}else I=[];for(U=I,j=[],I=[],b=[],L=Yt(L,"StreamIndex"),L=C(L),F=L.next();!F.done;F=L.next()){F=F.value,q=Yt(F,"QualityLevel"),B=w.timescale,G=w.duration,z=Yt(F,"c");for(var J=[],ie=0,Y=0;Y<z.length;++Y){var ne=z[Y],Z=z[Y+1],de=rt(ne,"t",jr),te=rt(ne,"d",jr);if(ne=rt(ne,"r",Or),!te)break;if(de=de??ie,(ne=ne||0)&&ne--,ne<0)if(Z){if(Z=rt(Z,"t",jr),Z==null)break;if(de>=Z)break;ne=Math.ceil((Z-de)/te)-1}else{if(G==1/0)break;if(de/B>=G)break;ne=Math.ceil((G*B-de)/te)-1}for(Z=0;Z<=ne;++Z)ie=de+te,J.push({start:de/B,end:ie/B,ee:de}),de=ie}for(B=J,q=C(q),G=q.next();!G.done;G=q.next())(G=vre(e,F,G.value,B,U,w))&&(G.type!="audio"||e.g.disableAudio?G.type!="video"||e.g.disableVideo?G.type!=mt||e.g.disableText||b.push(G):I.push(G):j.push(G))}for(L=[],j=C(j.length>0?j:[null]),U=j.next();!U.done;U=j.next())for(U=U.value,F=C(I.length>0?I:[null]),J=F.next();!J.done;J=F.next())q=L,B=q.push,G=e,z=U,J=J.value,Y=0,z&&z.bandwidth&&z.bandwidth>0&&(Y+=z.bandwidth),J&&J.bandwidth&&J.bandwidth>0&&(Y+=J.bandwidth),G={id:G.A++,language:z?z.language:"und",disabledUntilTime:0,primary:!!z&&z.primary||!!J&&J.primary,audio:z,video:J,bandwidth:Y,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},B.call(q,G);w.variants=L,w.textStreams=b,e.j?(e.j.variants=w.variants,e.j.textStreams=w.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:w.variants,textStreams:w.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.Pf()),Promise.resolve(),p=Date.now(),g=(p-a)/1e3,e.F.sample(1,g),re(y)})}function vre(e,n,s,a,u,f){var p=n.attributes.Type;if(p!=="audio"&&p!=="video"&&p!=="text")return $e("Ignoring unrecognized type:",p),null;var g=n.attributes.Language,y=e.A++,w=rt(s,"Bitrate",ka),b=rt(s,"MaxWidth",ka),I=rt(s,"MaxHeight",ka),L=rt(s,"Channels",ka),j=rt(s,"SamplingRate",ka),U=f.duration;a.length&&(U=a[a.length-1].end-a[0].start);var F=e.i.getDuration();e.i.Fb(Math.min(U,F)),(F=n.attributes.Name)&&(F+=s.attributes.Index),F||(F=String(y));var B={id:y,originalId:F,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:w||0,width:b||void 0,height:I||void 0,kind:"",encrypted:u.length>0,drmInfos:u,keyIds:new Set,language:Ht(g||"und"),originalLanguage:g,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:L,audioSamplingRate:j,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:U,timescale:f.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((u=n.attributes.Subtype)&&((u=Ere.get(u))&&B.roles.push(u),u==="main"&&(B.primary=!0)),u=s.attributes.FourCC,(u===null||u==="")&&(u=n.attributes.FourCC),!u){if(p==="audio")u="AAC";else if(p==="video")return $e('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!wre.includes(u.toUpperCase()))return $e("Codec not supported:",u),null;switch(s=yre(s,p,u,B),B.mssPrivateData.codecPrivateData=s,p){case"audio":if(!s)return $e("Quality unsupported without CodecPrivateData",p),null;B.type="audio",B.mimeType="mss/audio/mp4",B.codecs=xre(u,s);break;case"video":if(!s)return $e("Quality unsupported without CodecPrivateData",p),null;B.type="video",B.mimeType="mss/video/mp4",B.codecs=Tre(s);break;case"text":B.type=mt,B.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(B.codecs="stpp")}return B.fullMimeTypes.add(Pn(B.mimeType,B.codecs)),B.createSegmentIndex=function(){if(B.segmentIndex)return Promise.resolve();if(e.m.has(B.id))var q=e.m.get(B.id);else q=[],B.type=="video"&&(q=B.mssPrivateData.codecPrivateData.split("00000001").slice(1)),q={id:B.id,type:B.type,codecs:B.codecs,encrypted:B.encrypted,timescale:B.mssPrivateData.timescale,duration:B.mssPrivateData.duration,Gb:q,Ma:new Uint8Array([]),Ya:new Uint8Array([]),fb:0,gb:0,data:null,stream:B},q=Jh(new Qh([q])),e.m.set(B.id,q);return q=Sre(e,new $i(function(){return[]},0,null,l1(B),B.mssPrivateData.timescale,q,null,B.encrypted),B,n,a),B.segmentIndex=new jt(q),Promise.resolve()},B.closeSegmentIndex=function(){B.segmentIndex&&(B.segmentIndex.release(),B.segmentIndex=null)},B}function yre(e,n,s,a){if(e=e.attributes.CodecPrivateData)return e;if(n!=="audio")return null;n=a.channelsCount||2,e=a.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return a=u[e],s==="AACH"?(s=new Uint8Array(4),e=u[e*2],s[0]=40|a>>1,s[1]=a<<7|n<<3|e>>1,s[2]=e<<7|8,s[3]=0,n=new Uint16Array(2),n[0]=(s[0]<<8)+s[1],n[1]=(s[2]<<8)+s[3],n[0].toString(16)+n[1].toString(16)):(s=new Uint8Array(2),s[0]=16|a>>1,s[1]=a<<7|n<<3,n=new Uint16Array(1),n[0]=(s[0]<<8)+s[1],n[0].toString(16))}function xre(e,n){var s=0;return e==="AACH"&&(s=5),n?s===0&&(s=(parseInt(n.substr(0,2),16)&248)>>3):(s=2,e==="AACH"&&(s=5)),"mp4a.40."+s}function Tre(e){var n=/00000001[0-9]7/.exec(e);return n.length&&e?"avc1."+e.substr(e.indexOf(n[0])+10,6):""}function Sre(e,n,s,a,u){var f=a.attributes.Url.replace("{bitrate}",String(s.bandwidth));a=[],u=C(u);for(var p=u.next(),g={};!p.done;g={sg:void 0},p=u.next())g.sg=p.value,a.push(new Xe(g.sg.start,g.sg.end,function(y){return function(){return yr(e.l,[f.replace("{start time}",String(y.sg.ee))])}}(g),0,null,n,0,0,s.mssPrivateData.duration));return a}xe("shaka.mss.MssParser",WA);var wre="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Ere=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");od("application/vnd.ms-sstr+xml",function(){return new WA});function D8(e,n,s,a,u,f,p){if(s>=200&&s<=299&&s!=202||s==304)return{uri:u||a,originalUri:a,data:n,status:s,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:f};f=null;try{f=Aa(n)}catch{}throw new oe(s==401||s==403?2:1,1,1001,a,s,f,e,p,u||a)}function XA(){}function Ex(e,n,s,a,u,f){var p=new _re;try{Xh(n.headers).forEach(function(b,I){p.append(I,b)})}catch(b){return Ru(new oe(1,1,1002,e,b,s))}var g=new Cre,y={Qi:!1,hk:!1};if(e=bre(e,n,s,{body:n.body||void 0,headers:p,method:n.method,signal:g.signal,credentials:n.allowCrossSiteCredentials?"include":void 0},y,a,u,n.streamDataCallback,f.minBytesForProgressEvents||0),e=new Mn(e,function(){return y.Qi=!0,g.abort(),Promise.resolve()}),n=n.retryParameters.timeout){var w=new Ke(function(){y.hk=!0,g.abort()});w.Y(n/1e3),e.finally(function(){w.stop()})}return e}function bre(e,n,s,a,u,f,p,g,y){var w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne;return X(function(Z){switch(Z.g){case 1:return w=Ire,b=kre,L=new ArrayBuffer(0),U=j=0,F={},B=Date.now(),ce(Z,2),O(Z,w(e,a),4);case 4:if(I=Z.h,F=Are(I.headers),p(F),a.method=="HEAD"){Z.B(5);break}return G=(q=I.headers.get("Content-Length"))?parseInt(q,10):0,I.body?(z=I.clone().body.getReader(),J=function(de){function te(){var ae,he,Ee,Te;return X(function(ge){switch(ge.g){case 1:return ce(ge,2),O(ge,z.read(),4);case 4:ae=ge.h,se(ge,3);break;case 2:return ue(ge),ge.return();case 3:if(ae.done){ge.B(5);break}if(j+=ae.value.byteLength,!g){ge.B(5);break}return O(ge,g(ae.value),5);case 5:he=Date.now(),Ee=j-U,(he-B>100&&Ee>=y||ae.done)&&(Te=ae.done?0:G-j,f(he-B,Ee,Te),U=j,B=he),ae.done?de.close():(de.enqueue(ae.value),te()),re(ge)}})}te()},new b({start:J}),O(Z,I.arrayBuffer(),8)):O(Z,I.arrayBuffer(),9);case 8:L=Z.h,Z.B(5);break;case 9:L=Z.h,ie=Date.now(),f(ie-B,L.byteLength,0);case 5:n.headers.Range&&(Y=n.headers.Range.replace("bytes=","").split("-").filter(function(de){return de}).map(function(de){return parseInt(de,10)}),Y.length==2&&L.byteLength!=Y[1]-Y[0]+1&&$e("Payload length does not match range requested bytes",n,I)),se(Z,3);break;case 2:throw ne=ue(Z),u.Qi?new oe(1,1,7001,e,s):u.hk?new oe(1,1,1003,e,s):new oe(1,1,1002,e,ne,s);case 3:return Z.return(D8(F,L,I.status,e,I.url,n,s))}})}function Are(e){var n={};return e.forEach(function(s,a){n[a.trim()]=s}),n}function N8(){if(l.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(l.Response){if(!new Response("").body)return!1}else return!1;return!(!l.fetch||"polyfill"in l.fetch||!l.AbortController)}xe("shaka.net.HttpFetchPlugin",XA),XA.isSupported=N8,XA.parse=Ex;var Ire=l.fetch,Cre=l.AbortController,kre=l.ReadableStream,_re=l.Headers;N8()&&(El("http",Ex,2,!0),El("https",Ex,2,!0),El("blob",Ex,2,!0));function M8(){}function bx(e,n,s,a,u,f){var p=new Rre,g=Date.now(),y=0,w=new Promise(function(b,I){p.open(n.method,e,!0),p.responseType="arraybuffer",p.timeout=n.retryParameters.timeout,p.withCredentials=n.allowCrossSiteCredentials;var L={};p.onabort=function(){I(new oe(1,1,7001,e,s))},p.onreadystatechange=function(){if(p.readyState===XMLHttpRequest.HEADERS_RECEIVED){var U=p.getAllResponseHeaders().trim().split(`\r
`),F={};U=C(U);for(var B=U.next();!B.done;B=U.next())B=B.value.split(": "),F[B[0].toLowerCase()]=B.slice(1).join(": ");L=F,u(L)}},p.onload=function(U){var F=p.response;try{a(Date.now()-g,U.loaded-y,0);var B=D8(L,F,p.status,e,p.responseURL,n,s);b(B)}catch(q){I(q)}},p.onerror=function(U){I(new oe(1,1,1002,e,U,s))},p.ontimeout=function(){I(new oe(1,1,1003,e,s))},p.onprogress=function(U){var F=Date.now(),B=f.minBytesForProgressEvents||0,q=U.loaded-y;(F-g>100&&q>=B||U.lengthComputable&&U.loaded==U.total)&&(a(F-g,q,p.readyState==4?0:U.total-U.loaded),y=U.loaded,g=F)};for(var j in n.headers)try{p.setRequestHeader(j.toLowerCase(),n.headers[j])}catch(U){throw new oe(1,1,1002,e,U,s)}p.send(n.body)});return new Mn(w,function(){return p.abort(),Promise.resolve()})}xe("shaka.net.HttpXHRPlugin",M8),M8.parse=bx;var Rre=l.XMLHttpRequest;El("http",bx,1,!0),El("https",bx,1,!0),El("blob",bx,1,!0);function O8(e,n,s,a,u){this.g=e,this.i=n,this.groupId=s,this.h=a,this.j=u}function QA(e){var n=e.jc(!1);return n?fl(n):e.S().map(function(s){return"{"+encodeURI(s.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function Lre(e,n){return uf(e.g.S(),e.g.startByte,e.g.endByte,n.streaming.retryParameters)}function j8(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function U8(e,n){e.i+=n;var s=e.l;return e.l++,e.h.set(s,n),s}j8.prototype.close=function(e,n){if(this.h.has(e)){var s=this.h.get(e);this.h.delete(e),this.j+=s,this.g+=n}};function F8(e){return e.i==0?0:e.j/e.i}function JA(e){var n=this;this.A=e,this.i=new Map,this.h=new Yh(function(){return ZA(n).catch(function(){})}),this.j=[],this.u=function(){},this.m=function(){},this.g=new j8,this.l=!1}JA.prototype.destroy=function(){return this.h.destroy()};function Pre(e,n,s){e.u=n,e.m=s}function ZA(e){e.l=!0;var n=e.j.map(function(s){return s()});return e.j=[],Promise.all(n)}JA.prototype.queue=function(e,n,s,a,u){var f=this;ln(this.h);var p=(this.i.get(e)||Promise.resolve()).then(function(){var g,y,w,b,I,L,j;return X(function(U){if(U.g==1)return O(U,Mre(f,n),2);if(g=U.h,f.h.g)throw new oe(2,9,7001);if(a)for(b in y=nt(g),w=new Ab(y),w.data)I=Number(b),L=w.data[I],j=w.g[I],f.m(L,j);return f.g.close(s,g.byteLength),f.u(F8(f.g),f.g.g),U.return(u(g))})});return this.i.set(e,p),p};function Dre(e,n,s,a,u,f){ln(e.h);var p=(e.i.get(n)||Promise.resolve()).then(function(){if(e.h.g)throw new oe(2,9,7001);if(u){var g=nt(s);g=new Ab(g);for(var y in g.data){var w=Number(y);e.m(g.data[w],g.g[w])}}return e.g.close(a,s.byteLength),e.u(F8(e.g),e.g.g),f(s)});e.i.set(n,p)}function Nre(e){return X(function(n){return n.g==1?O(n,Promise.all(e.i.values()),2):n.return(e.g.g)})}function Mre(e,n){var s,a,u,f;return X(function(p){return p.g==1?(s=ys,a=e.A.request(s,n),u=function(){return a.abort()},e.j.push(u),O(p,a.promise,2)):(f=p.h,wo(e.j,u),p.return(f.data))})}function Ax(e,n){var s=this;this.i=e,this.h=e.objectStore(n),this.g=new en,e.onabort=function(a){a.preventDefault(),s.g.reject()},e.onerror=function(a){a.preventDefault(),s.g.reject()},e.oncomplete=function(){s.g.resolve()}}Ax.prototype.abort=function(){var e=this;return X(function(n){if(n.g==1){try{e.i.abort()}catch{}return ce(n,2),O(n,e.g,4)}if(n.g!=2)return se(n,0);ue(n),re(n)})};function eI(e,n){return new Promise(function(s,a){var u=e.h.openCursor();u.onerror=a,u.onsuccess=function(){var f;return X(function(p){if(p.g==1)return u.result==null?(s(),p.return()):(f=u.result,O(p,n(f.key,f.value,f),2));f.continue(),re(p)})}})}Ax.prototype.store=function(){return this.h},Ax.prototype.promise=function(){return this.g};function tI(e){this.h=e,this.g=[]}tI.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function kd(e,n){return Ix(e,n,"readwrite")}function Ix(e,n,s){s=e.h.transaction([n],s);var a=new Ax(s,n);return e.g.push(a),a.promise().then(function(){wo(e.g,a)},function(){wo(e.g,a)}),a}function _d(e,n,s){this.h=new tI(e),this.i=n,this.g=s}d=_d.prototype,d.destroy=function(){return this.h.destroy()},d.hasFixedKeySpace=function(){return!0},d.addSegments=function(){return B8(this.i)},d.removeSegments=function(e,n){return $8(this,this.i,e,n)},d.getSegments=function(e){var n=this,s;return X(function(a){return a.g==1?O(a,V8(n,n.i,e),2):(s=a.h,a.return(s.map(function(u){return n.Vi(u)})))})},d.addManifests=function(){return B8(this.g)},d.updateManifest=function(){return Promise.reject(new oe(2,9,9016,"Cannot modify values in "+this.g))};function Ore(e,n,s){e=kd(e.h,e.g);var a=e.store();return a.get(n).onsuccess=function(){a.put(s,n)},e.promise()}d.updateManifestExpiration=function(e,n){var s=kd(this.h,this.g),a=s.store();return a.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=n,a.put(u,e))},s.promise()},d.removeManifests=function(e,n){return $8(this,this.g,e,n)},d.getManifests=function(e){var n=this,s;return X(function(a){return a.g==1?O(a,V8(n,n.g,e),2):(s=a.h,a.return(Promise.all(s.map(function(u){return n.oe(u)}))))})},d.getAllManifests=function(){var e=this,n,s;return X(function(a){return a.g==1?(n=Ix(e.h,e.g,"readonly"),s=new Map,O(a,eI(n,function(u,f){var p;return X(function(g){if(g.g==1)return O(g,e.oe(f),2);p=g.h,s.set(u,p),re(g)})}),2)):a.g!=3?O(a,n.promise(),3):a.return(s)})},d.Vi=function(e){return e},d.oe=function(e){return Promise.resolve(e)};function B8(e){return Promise.reject(new oe(2,9,9011,"Cannot add new value to "+e))}d.add=function(e,n){var s=this,a,u,f,p,g,y,w;return X(function(b){if(b.g==1){for(a=kd(s.h,e),u=a.store(),f=[],p=C(n),g=p.next(),y={};!g.done;y={Zh:void 0},g=p.next())w=g.value,y.Zh=u.add(w),y.Zh.onsuccess=function(I){return function(){f.push(I.Zh.result)}}(y);return O(b,a.promise(),2)}return b.return(f)})};function $8(e,n,s,a){e=kd(e.h,n),n=e.store(),s=C(s);for(var u=s.next(),f={};!u.done;f={Mh:void 0},u=s.next())f.Mh=u.value,n.delete(f.Mh).onsuccess=function(p){return function(){return a(p.Mh)}}(f);return e.promise()}function V8(e,n,s){var a,u,f,p,g,y,w;return X(function(b){if(b.g==1){for(a=Ix(e.h,n,"readonly"),u=a.store(),f={},p=[],g=C(s),y=g.next(),w={};!y.done;w={fg:void 0,Lf:void 0},y=g.next())w.Lf=y.value,w.fg=u.get(w.Lf),w.fg.onsuccess=function(I){return function(){I.fg.result==null&&p.push(I.Lf),f[I.Lf]=I.fg.result}}(w);return O(b,a.promise(),2)}if(p.length)throw new oe(2,9,9012,"Could not find values for "+p);return b.return(s.map(function(I){return f[I]}))})}function zg(e){this.g=new tI(e)}zg.prototype.destroy=function(){return this.g.destroy()},zg.prototype.getAll=function(){var e=this,n,s;return X(function(a){return a.g==1?(n=Ix(e.g,"session-ids","readonly"),s=[],O(a,eI(n,function(u,f){s.push(f)}),2)):a.g!=3?O(a,n.promise(),3):a.return(s)})},zg.prototype.add=function(e){var n=kd(this.g,"session-ids"),s=n.store();e=C(e);for(var a=e.next();!a.done;a=e.next())s.add(a.value);return n.promise()},zg.prototype.remove=function(e){var n=this,s;return X(function(a){return a.g==1?(s=kd(n.g,"session-ids"),O(a,eI(s,function(u,f,p){e.includes(f.sessionId)&&p.delete()}),2)):O(a,s.promise(),0)})};function Hi(){this.g=new Map}Hi.prototype.destroy=function(){for(var e=[],n=C(this.g.values()),s=n.next();!s.done;s=n.next())e.push(s.value.destroy());return this.g.clear(),Promise.all(e)},Hi.prototype.init=function(){var e=this;Wg.forEach(function(u,f){(u=u())&&e.g.set(f,u)});for(var n=[],s=C(this.g.values()),a=s.next();!a.done;a=s.next())n.push(a.value.init());return Promise.all(n)};function G8(e){var n=null;if(e.g.forEach(function(s,a){s.getCells().forEach(function(u,f){u.hasFixedKeySpace()||n||(n={path:{Zb:a,mb:f},mb:u})})}),n)return n;throw new oe(2,9,9013,"Could not find a cell that supports add-operations")}function jre(e,n){e.g.forEach(function(s,a){s.getCells().forEach(function(u,f){n({Zb:a,mb:f},u)})})}function Cx(e,n,s){if(e=e.g.get(n),!e)throw new oe(2,9,9013,"Could not find mechanism with name "+n);if(n=e.getCells().get(s),!n)throw new oe(2,9,9013,"Could not find cell with name "+s);return n}function Ure(e,n){e.g.forEach(function(s){n(s.getEmeSessionCell())})}function Fre(e){var n=Array.from(e.g.keys());if(!n.length)throw new oe(2,9,9e3,"No supported storage mechanisms found");return e.g.get(n[0]).getEmeSessionCell()}function Bre(e){var n,s,a;return X(function(u){return u.g==1?(n=Array.from(e.g.values()),s=n.length>0,s||(a=Wg,a.forEach(function(f){(f=f())&&n.push(f)})),O(u,Promise.all(n.map(function(f){return f.erase()})),2)):s?u.B(0):O(u,Promise.all(n.map(function(f){return f.destroy()})),0)})}function H8(e,n){Wg.set(e,n)}xe("shaka.offline.StorageMuxer",Hi),Hi.unregister=function(e){Wg.delete(e)},Hi.register=H8,Hi.prototype.destroy=Hi.prototype.destroy;var Wg=new Map;function Yg(){_d.apply(this,arguments)}V(Yg,_d),Yg.prototype.updateManifestExpiration=function(e,n){var s=this,a,u,f;return X(function(p){return a=kd(s.h,s.g),u=a.store(),f=new en,u.get(e).onsuccess=function(g){(g=g.target.result)?(g.expiration=n,u.put(g),f.resolve()):f.reject(new oe(2,9,9012,"Could not find values for "+e))},O(p,Promise.all([a.promise(),f]),0)})},Yg.prototype.oe=function(e){var n,s,a,u,f,p;return X(function(g){if(g.g==1){for(n=[],s=0;s<e.periods.length;++s)a=s==e.periods.length-1?e.duration:e.periods[s+1].startTime,u=a-e.periods[s].startTime,f=$re(e.periods[s],u),n.push(f);return O(g,bO(n),2)}return p=g.h,g.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:p,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function $re(e,n){Gre(e);for(var s=C(e.streams),a=s.next();!a.done;a=s.next());return e.streams.map(function(u){return Vre(u,e.startTime,n)})}function Vre(e,n,s){var a=e.initSegmentUri?q8(e.initSegmentUri):null,u=n+e.presentationTimeOffset,f=n+s;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:a,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(p){var g=q8(p.uri);return{startTime:n+p.startTime,endTime:n+p.endTime,dataKey:g,initSegmentKey:a,appendWindowStart:n,appendWindowEnd:f,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}Yg.prototype.Vi=function(e){return{data:e.data}};function q8(e){var n;if((n=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(n=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(n[1]);throw new oe(2,9,9004,"Could not parse uri "+e)}function Gre(e){var n=e.streams.filter(function(g){return g.contentType=="audio"});if(e=e.streams.filter(function(g){return g.contentType=="video"}),!n.every(function(g){return g.variantIds})||!e.every(function(g){return g.variantIds})){for(var s=C(n),a=s.next();!a.done;a=s.next())a.value.variantIds=[];for(s=C(e),a=s.next();!a.done;a=s.next())a.value.variantIds=[];if(s=0,e.length&&!n.length){a=s++;for(var u=C(e),f=u.next();!f.done;f=u.next())f.value.variantIds.push(a)}if(!e.length&&n.length)for(a=s++,u=C(n),f=u.next();!f.done;f=u.next())f.value.variantIds.push(a);if(e.length&&n.length)for(n=C(n),a=n.next();!a.done;a=n.next())for(a=a.value,u=C(e),f=u.next();!f.done;f=u.next()){f=f.value;var p=s++;a.variantIds.push(p),f.variantIds.push(p)}}}function kx(){_d.apply(this,arguments)}V(kx,_d),kx.prototype.oe=function(e){var n,s,a,u,f,p;return X(function(g){if(g.g==1){for(n=[],s=0;s<e.periods.length;++s){a=s==e.periods.length-1?e.duration:e.periods[s+1].startTime,u=a-e.periods[s].startTime;for(var y=e.periods[s],w=[],b=C(y.streams),I=b.next();!I.done;I=b.next())I=I.value,I.variantIds.length!=0&&w.push(Hre(I,y.startTime,y.startTime+u));f=w,n.push(f)}return O(g,bO(n),2)}return p=g.h,g.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:p,sequenceMode:!1})})};function Hre(e,n,s){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(a){return{startTime:n+a.startTime,endTime:n+a.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:n,appendWindowEnd:s,timestampOffset:n-e.presentationTimeOffset,dataKey:a.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function nI(){_d.apply(this,arguments)}V(nI,_d),d=nI.prototype,d.hasFixedKeySpace=function(){return!1},d.addSegments=function(e){return this.add(this.i,e)},d.addManifests=function(e){return this.add(this.g,e)},d.updateManifest=function(e,n){return Ore(this,e,n)},d.oe=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function K8(){this.m=this.j=this.i=this.h=this.g=this.l=null}d=K8.prototype,d.init=function(){var e=this,n=new en,s=!1,a=new Ke(function(){s=!0,n.reject(new oe(2,9,9017))});typeof _x=="number"&&_x>0&&a.Y(_x);var u=l.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!s){a.stop();var f=u.result;e.l=f;var p=f.objectStoreNames;p=p.contains("manifest")&&p.contains("segment")?new Yg(f,"segment","manifest"):null,e.g=p,p=f.objectStoreNames,p=p.contains("manifest-v2")&&p.contains("segment-v2")?new kx(f,"segment-v2","manifest-v2"):null,e.h=p,p=f.objectStoreNames,p=p.contains("manifest-v3")&&p.contains("segment-v3")?new kx(f,"segment-v3","manifest-v3"):null,e.i=p,p=f.objectStoreNames,p=p.contains("manifest-v5")&&p.contains("segment-v5")?new nI(f,"segment-v5","manifest-v5"):null,e.j=p,f=f.objectStoreNames.contains("session-ids")?new zg(f):null,e.m=f,n.resolve()}},u.onupgradeneeded=function(){for(var f=u.result,p=C(["segment-v5","manifest-v5","session-ids"]),g=p.next();!g.done;g=p.next())g=g.value,f.objectStoreNames.contains(g)||f.createObjectStore(g,{autoIncrement:!0})},u.onerror=function(f){s||(a.stop(),n.reject(new oe(2,9,9001,u.error)),f.preventDefault())},n},d.destroy=function(){var e=this;return X(function(n){switch(n.g){case 1:if(!e.g){n.B(2);break}return O(n,e.g.destroy(),2);case 2:if(!e.h){n.B(4);break}return O(n,e.h.destroy(),4);case 4:if(!e.i){n.B(6);break}return O(n,e.i.destroy(),6);case 6:if(!e.j){n.B(8);break}return O(n,e.j.destroy(),8);case 8:if(!e.m){n.B(10);break}return O(n,e.m.destroy(),10);case 10:e.l&&e.l.close(),re(n)}})},d.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},d.getEmeSessionCell=function(){return this.m},d.erase=function(){var e=this;return X(function(n){switch(n.g){case 1:if(!e.g){n.B(2);break}return O(n,e.g.destroy(),2);case 2:if(!e.h){n.B(4);break}return O(n,e.h.destroy(),4);case 4:if(!e.i){n.B(6);break}return O(n,e.i.destroy(),6);case 6:if(!e.j){n.B(8);break}return O(n,e.j.destroy(),8);case 8:return e.l&&e.l.close(),O(n,qre(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,O(n,e.init(),0)}})};function qre(){var e=new en,n=l.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){e.resolve()},n.onerror=function(s){e.reject(new oe(2,9,9001,n.error)),s.preventDefault()},e}var _x=5;xe("shaka.offline.indexeddb.StorageMechanismOpenTimeout",_x),H8("idb",function(){return ht().ti()?new K8:null});function Da(e,n,s,a){this.g=e,this.i=n,this.h=s,this.l=a,this.j=["offline:",e,"/",n,"/",s,"/",a].join("")}Da.prototype.Zb=function(){return this.i},Da.prototype.mb=function(){return this.h},Da.prototype.key=function(){return this.l},Da.prototype.toString=function(){return this.j};function rI(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var n=e[1];if(n!="manifest"&&n!="segment")return null;var s=e[2];if(!s)return null;var a=e[3];return a&&n!=null?new Da(n,s,a,Number(e[4])):null}function z8(e,n){this.h=e,this.g=n}function W8(e,n){var s=new tt(null,0);s.Fb(n.duration);var a=n.streams.filter(function(w){return w.type=="audio"}),u=n.streams.filter(function(w){return w.type=="video"});a=Kre(e,a,u,s),u=n.streams.filter(function(w){return w.type==mt}).map(function(w){return Rx(e,w,s)});var f=n.streams.filter(function(w){return w.type=="image"}).map(function(w){return Rx(e,w,s)}),p=n.drmInfo?[n.drmInfo]:[];if(n.drmInfo)for(var g=C(a.values()),y=g.next();!y.done;y=g.next())y=y.value,y.audio&&y.audio.encrypted&&(y.audio.drmInfos=p),y.video&&y.video.encrypted&&(y.video.drmInfos=p);return{presentationTimeline:s,offlineSessionIds:n.sessionIds,variants:Array.from(a.values()),textStreams:u,imageStreams:f,sequenceMode:n.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:n.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function Kre(e,n,s,a){for(var u=new Set,f=C(n),p=f.next();!p.done;p=f.next()){p=C(p.value.variantIds);for(var g=p.next();!g.done;g=p.next())u.add(g.value)}for(f=C(s),p=f.next();!p.done;p=f.next())for(p=C(p.value.variantIds),g=p.next();!g.done;g=p.next())u.add(g.value);for(f=new Map,u=C(u),p=u.next();!p.done;p=u.next())p=p.value,f.set(p,{id:p,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(n=C(n),u=n.next();!u.done;u=n.next())for(p=u.value,u=Rx(e,p,a),p=C(p.variantIds),g=p.next();!g.done;g=p.next())g=f.get(g.value),g.language=u.language,g.primary=g.primary||u.primary,g.audio=u;for(s=C(s),n=s.next();!n.done;n=s.next())for(u=n.value,n=Rx(e,u,a),u=C(u.variantIds),p=u.next();!p.done;p=u.next())p=f.get(p.value),p.primary=p.primary||n.primary,p.video=n;return f}function Rx(e,n,s){var a=n.segments.map(function(u){return zre(e,u,n)});return s.Ge(a),{id:n.id,originalId:n.originalId,groupId:n.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new jt(a),mimeType:n.mimeType,codecs:n.codecs,width:n.width||void 0,height:n.height||void 0,frameRate:n.frameRate,pixelAspectRatio:n.pixelAspectRatio,hdr:n.hdr,colorGamut:n.colorGamut,videoLayout:n.videoLayout,kind:n.kind,encrypted:n.encrypted,drmInfos:[],keyIds:n.keyIds,language:n.language,originalLanguage:n.originalLanguage||null,label:n.label,type:n.type,primary:n.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:n.roles,forced:n.forced,channelsCount:n.channelsCount,audioSamplingRate:n.audioSamplingRate,spatialAudio:n.spatialAudio,closedCaptions:n.closedCaptions,tilesLayout:n.tilesLayout,mssPrivateData:n.mssPrivateData,accessibilityPurpose:null,external:n.external,fastSwitching:n.fastSwitching,fullMimeTypes:new Set([Pn(n.mimeType,n.codecs)]),isAudioMuxedInVideo:n.isAudioMuxedInVideo||!1,baseOriginalId:null}}function zre(e,n,s){var a=new Da("segment",e.h,e.g,n.dataKey);return e=new Xe(n.startTime,n.endTime,function(){return[a.toString()]},0,null,n.initSegmentKey!=null?Wre(e,n.initSegmentKey):null,n.timestampOffset,n.appendWindowStart,n.appendWindowEnd,[],n.tilesLayout||""),e.mimeType=n.mimeType||s.mimeType||"",e.codecs=n.codecs||s.codecs||"",n.thumbnailSprite&&e.og(n.thumbnailSprite),e}function Wre(e,n){var s=new Da("segment",e.h,e.g,n);return new $i(function(){return[s.toString()]},0,null)}function Y8(){this.g=null}d=Y8.prototype,d.configure=function(){},d.start=function(e,n){var s=this,a,u,f,p,g,y,w;return X(function(b){switch(b.g){case 1:if(a=rI(e),s.g=a,a==null||a.g!="manifest")throw new oe(2,1,9004,e);return u=new Hi,Ae(b,2),O(b,u.init(),4);case 4:return O(b,Cx(u,a.Zb(),a.mb()),5);case 5:return f=b.h,O(b,f.getManifests([a.key()]),6);case 6:return p=b.h,g=p[0],y=new z8(a.Zb(),a.mb()),w=W8(y,g),n.makeTextStreamsForClosedCaptions(w),b.return(w);case 2:return le(b),O(b,u.destroy(),7);case 7:pe(b,0)}})},d.stop=function(){return Promise.resolve()},d.update=function(){},d.onExpirationUpdated=function(e,n){var s=this,a,u,f,p,g,y,w;return X(function(b){switch(b.g){case 1:return a=s.g,u=new Hi,ce(b,2,3),O(b,u.init(),5);case 5:return O(b,Cx(u,a.Zb(),a.mb()),6);case 6:return f=b.h,O(b,f.getManifests([a.key()]),7);case 7:if(p=b.h,g=p[0],y=g.sessionIds.includes(e),w=g.expiration==null||g.expiration>n,!y||!w){b.B(3);break}return O(b,f.updateManifestExpiration(a.key(),n),3);case 3:return le(b),O(b,u.destroy(),10);case 10:pe(b,0);break;case 2:ue(b),b.B(3)}})},d.onInitialVariantChosen=function(){},d.banLocation=function(){},d.setMediaElement=function(){},od("application/x-offline-manifest",function(){return new Y8});function X8(){}function Q8(e,n){var s=rI(e);return s&&s.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:n},e=zh(e)):e=s&&s.g=="segment"?Yre(s.key(),s,n):Ru(new oe(2,1,9004,e)),e}function Yre(e,n,s){var a=new Hi;return zh(void 0).cb(function(){return a.init()}).cb(function(){return Cx(a,n.Zb(),n.mb())}).cb(function(u){return u.getSegments([n.key()])}).cb(function(u){return{uri:n,data:u[0].data,headers:{},originalRequest:s}}).finally(function(){return a.destroy()})}xe("shaka.offline.OfflineScheme",X8),X8.plugin=Q8,El("offline",Q8);function J8(e,n,s){var a,u,f,p,g,y;return X(function(w){switch(w.g){case 1:a=[];for(var b=[],I=C(s),L=I.next();!L.done;L=I.next()){L=L.value;for(var j=!1,U=C(b),F=U.next();!F.done;F=U.next())if(F=F.value,Qre(F.info,L)){F.sessionIds.push(L.sessionId),j=!0;break}j||b.push({info:L,sessionIds:[L.sessionId]})}u=C(b),f=u.next();case 2:if(f.done){w.B(4);break}return p=f.value,g=Xre(e,n,p),O(w,g,5);case 5:y=w.h,a=a.concat(y),f=u.next(),w.B(2);break;case 4:return w.return(a)}})}function Xre(e,n,s){var a,u;return X(function(f){switch(f.g){case 1:return a=new zy({Gc:n,onError:function(){},Xf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ce(f,2),a.configure(e),O(f,kQ(a,s.info.keySystem,s.info.licenseUri,s.info.serverCertificate,s.info.audioCapabilities,s.info.videoCapabilities),4);case 4:se(f,3);break;case 2:return ue(f),O(f,a.destroy(),5);case 5:return f.return([]);case 3:return u=[],O(f,Promise.all(s.sessionIds.map(function(p){return X(function(g){if(g.g==1)return ce(g,2),O(g,LQ(a,p),4);if(g.g!=2)return u.push(p),se(g,0);ue(g),re(g)})})),6);case 6:return O(f,a.destroy(),7);case 7:return f.return(u)}})}function Qre(e,n){function s(a,u){return a.robustness==u.robustness&&a.contentType==u.contentType}return e.keySystem==n.keySystem&&e.licenseUri==n.licenseUri&&sd(e.audioCapabilities,n.audioCapabilities,s)&&sd(e.videoCapabilities,n.videoCapabilities,s)}function Jre(e,n,s){var a=n.presentationTimeline.getDuration();return n=Z8(n),{offlineUri:null,originalManifestUri:e,duration:a,size:0,expiration:1/0,tracks:n,appMetadata:s,isIncomplete:!1}}function iI(e,n){var s=W8(new z8(e.Zb(),e.mb()),n),a=n.appMetadata||{};return s=Z8(s),{offlineUri:e.toString(),originalManifestUri:n.originalManifestUri,duration:n.duration,size:n.size,expiration:n.expiration,tracks:s,appMetadata:a,isIncomplete:n.isIncomplete||!1}}function Z8(e){var n=[],s=Fy(e.variants);s=C(s);for(var a=s.next();!a.done;a=s.next())n.push(fd(a.value));for(e=C(e.textStreams),s=e.next();!s.done;s=e.next())n.push(pd(s.value));return n}function Zre(){this.g=new Map}function eie(e,n){var s=n.audio,a=n.video;if(s&&!a&&e.g.set(s.id,s.bandwidth||n.bandwidth),!s&&a&&e.g.set(a.id,a.bandwidth||n.bandwidth),s&&a){var u=s.bandwidth||393216,f=a.bandwidth||n.bandwidth-u;f<=0&&(f=n.bandwidth),e.g.set(s.id,u),e.g.set(a.id,f)}}function tie(e,n){e.g.set(n.id,n.bandwidth||2048)}function e6(e,n){return e=e.g.get(n),e==null&&(e=0),e}function Lr(e){var n=this;if(e&&e.constructor!=ye)throw new oe(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Wb()):(this.h=hf(),this.g=new pn,this.g.configure(this.h.networking)),this.i=[],this.l=[];var s=!e;this.j=new Yh(function(){var a,u,f,p,g;return X(function(y){switch(y.g){case 1:return O(y,Promise.all(n.l.map(function(w){return ZA(w)})),2);case 2:for(a=function(){},u=[],f=C(n.i),p=f.next();!p.done;p=f.next())g=p.value,u.push(g.then(a,a));return O(y,Promise.all(u),3);case 3:if(!s){y.B(4);break}return O(y,n.g.destroy(),4);case 4:n.h=null,n.g=null,re(y)}})}),this.m=1e9}function sI(){if(Pa(ht()))e:{for(var e=C(Wg.values()),n=e.next();!n.done;n=e.next())if(n=n.value,n=n()){n.destroy(),e=!0;break e}e=!1}else e=!1;return e}d=Lr.prototype,d.destroy=function(){return this.j.destroy()},d.configure=function(e,n){return arguments.length==2&&typeof e=="string"&&(e=mg(e,n)),Rl(this.h,e)},d.getConfiguration=function(){var e=hf();return Rl(e,this.h,hf()),e},d.Wb=function(){return this.g},d.store=function(e,n,s,a,u){var f=this,p=this.getConfiguration(),g=new JA(this.g);return this.l.push(g),n=nie(this,e,n||{},a||[],u||[],function(){var y;return X(function(w){return w.g==1?s?w.B(2):O(w,af(e,f.g,p.manifest.retryParameters),3):(w.g!=2&&(s=w.h),y=OD(e,s||null),w.return(y()))})},p,g),n=new Mn(n,function(){return ZA(g)}),n.finally(function(){wo(f.l,g)}),yie(this,n)};function nie(e,n,s,a,u,f,p,g){var y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge;return X(function(ve){switch(ve.g){case 1:return Lx(),w=y=null,b=new Hi,j=L=I=null,ce(ve,2,3),O(ve,f(),5);case 5:return y=ve.h,O(ve,die(e,n,y,p),6);case 6:if(U=ve.h,xs(e),F=!U.presentationTimeline.U()&&!U.presentationTimeline.md(),!F)throw new oe(2,9,9005,n);B=C(a),q=B.next();case 7:if(q.done){ve.B(9);break}return G=q.value,O(ve,hie(e,G,U),10);case 10:z=ve.h,U.imageStreams.push(z),xs(e),q=B.next(),ve.B(7);break;case 9:J=C(u),ie=J.next();case 11:return ie.done?($3(p.drm.clearKeys,U.variants),Z=U.variants.some(function(Ie){if(Ie.audio){for(var Le=C(Ie.audio.drmInfos),at=Le.next();!at.done;at=Le.next())if(at.value.licenseServerUri.startsWith("data:"))return!0}if(Ie.video){for(Ie=C(Ie.video.drmInfos),Le=Ie.next();!Le.done;Le=Ie.next())if(Le.value.licenseServerUri.startsWith("data:"))return!0}return!1}),de=p.offline.usePersistentLicense,Z&&(de=!1),O(ve,e.Ed(U,function(Ie){j=j||Ie},p,de),15)):(Y=ie.value,O(ve,fie(e,U,Y.uri,Y.language,Y.kind,Y.mime,Y.codecs),14));case 14:ne=ve.h,U.textStreams.push(ne),xs(e),ie=J.next(),ve.B(11);break;case 15:if(w=ve.h,xs(e),j)throw j;return O(ve,iie(U,w,p,de),16);case 16:return O(ve,b.init(),17);case 17:return xs(e),O(ve,G8(b),18);case 18:return I=ve.h,xs(e),te=sie(w,U,n,s,p,g,de),ae=te.Pl,he=te.Ai,O(ve,I.mb.addManifests([ae]),19);case 19:if(Ee=ve.h,xs(e),L=Ee[0],xs(e),j)throw j;return O(ve,rie(e,he,L,ae,g,p,I.mb,U,w,de),20);case 20:return xs(e),i6(U,ae,w,de),O(ve,I.mb.updateManifest(L,ae),21);case 21:return xs(e),Te=new Da("manifest",I.path.Zb,I.path.mb,L),ve.return(iI(Te,ae));case 3:return le(ve),O(ve,b.destroy(),22);case 22:if(!y){ve.B(23);break}return O(ve,y.stop(),23);case 23:if(!w){ve.B(25);break}return O(ve,w.destroy(),25);case 25:pe(ve,0);break;case 2:if(ge=ue(ve),L==null){ve.B(27);break}return O(ve,t6(L),27);case 27:throw j||ge}})}function rie(e,n,s,a,u,f,p,g,y,w){var b,I,L,j,U,F,B,q,G,z,J;return X(function(ie){switch(ie.g){case 1:if(b={},I=0,L=function(){if(e.j.g||u.l)throw new oe(2,9,7001)},j=function(Y,ne){var Z,de,te,ae,he,Ee,Te,ge,ve;return X(function(Ie){if(Ie.g==1){for(Z=C(Y),de=Z.next(),te={};!de.done;te={zc:void 0},de=Z.next())te.zc=de.value,L(),ae=Lre(te.zc,f),he=te.zc.i,Ee=te.zc.h,Te=function(Le){return function(at){var je,Vt,ct,Xt;return X(function(At){switch(At.g){case 1:if(je=Le.zc.g,Vt=je.jc(!1),!je.aesKey||Vt){At.B(2);break}return O(At,s2(at,je.aesKey,Le.zc.j),3);case 3:at=At.h;case 2:return ct=QA(je),O(At,p.addSegments([{data:at}]),4);case 4:Xt=At.h,L(),b[ct]=Xt[0],I+=at.byteLength,re(At)}})}}(te),ge=te.zc.g,(ve=ge.jc(!1))?Dre(u,te.zc.groupId,ve,he,Ee,Te):u.queue(te.zc.groupId,ae,he,Ee,Te);return O(Ie,Nre(u),2)}return L(),!ne||u.l?Ie.B(0):(i6(g,a,y,w),O(Ie,p.updateManifest(s,a),0))})},U=!1,ce(ie,2),!oI(g)||!U||r6(g)){ie.B(4);break}return O(ie,j(n.filter(function(Y){return Y.h}),!0),5);case 5:return L(),n=n.filter(function(Y){return!Y.h}),F=b,B=I,b={},I=0,O(ie,n6(p,s,a,F,B,function(){return xs(e)}),6);case 6:L();case 4:if(U){ie.B(7);break}return O(ie,j(n,!1),8);case 8:return L(),q=b,G=I,b={},I=0,O(ie,n6(p,s,a,q,G,function(){return L()}),9);case 9:L();case 7:se(ie,0);break;case 2:return z=ue(ie),J=Object.values(b),O(ie,p.removeSegments(J,function(){}),10);case 10:throw z}})}function t6(e){var n,s,a,u;return X(function(f){switch(f.g){case 1:return n=new Hi,O(f,n.init(),2);case 2:return O(f,G8(n),3);case 3:return s=f.h,a=new Da("manifest",s.path.Zb,s.path.mb,e),O(f,n.destroy(),4);case 4:return u=new Lr,O(f,u.remove(a.toString()),0)}})}function n6(e,n,s,a,u,f){var p,g,y,w,b,I,L,j,U,F,B;return X(function(q){switch(q.g){case 1:for(p=!1,ce(q,2),g=!0,y=C(s.streams),w=y.next();!w.done;w=y.next())for(b=w.value,I=C(b.segments),L=I.next();!L.done;L=I.next())j=L.value,U=j.pendingSegmentRefId?a[j.pendingSegmentRefId]:null,U!=null&&(j.dataKey=U,j.pendingSegmentRefId=void 0),U=j.pendingInitSegmentRefId?a[j.pendingInitSegmentRefId]:null,U!=null&&(j.initSegmentKey=U,j.pendingInitSegmentRefId=void 0),j.pendingSegmentRefId&&(g=!1),j.pendingInitSegmentRefId&&(g=!1);return s.size+=u,g&&(s.isIncomplete=!1),O(q,e.updateManifest(n,s),4);case 4:p=!0,f(),se(q,0);break;case 2:return F=ue(q),O(q,t6(n),5);case 5:if(p){q.B(6);break}return B=Object.values(a),O(q,e.removeSegments(B,function(){}),6);case 6:throw F}})}function iie(e,n,s,a){var u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie,Y,ne,Z,de,te,ae,he,Ee,Te,ge,ve,Ie;return X(function(Le){switch(Le.g){case 1:return u={width:1/0,height:1/0},uQ(e,s.restrictions,u),O(Le,a3(n,e,a,s.drm.preferredKeySystems,s.drm.keySystemsMapping),2);case 2:for(f=[],p=s.preferredDecodingAttributes,g=s.preferredVideoCodecs,y=s.preferredAudioCodecs,w=s.preferredTextFormats,o3(e,g,y,p,w),b=C(e.variants),I=b.next();!I.done;I=b.next())L=I.value,f.push(fd(L));for(j=C(e.textStreams),U=j.next();!U.done;U=j.next())F=U.value,f.push(pd(F));for(B=C(e.imageStreams),q=B.next();!q.done;q=B.next())G=q.value,f.push(Sb(G));return O(Le,s.offline.trackSelectionCallback(f),3);case 3:for(z=Le.h,J=e.presentationTimeline.getDuration(),ie=0,Y=C(z),ne=Y.next();!ne.done;ne=Y.next())Z=ne.value,de=Z.bandwidth*J/8,ie+=de;return ce(Le,4),O(Le,s.offline.downloadSizeCallback(ie),6);case 6:if(te=Le.h,!te)throw new oe(2,9,9014);se(Le,5);break;case 4:throw ae=ue(Le),ae instanceof oe?ae:new oe(2,9,9015);case 5:for(he=new Set,Ee=new Set,Te=new Set,ge=C(z),ve=ge.next();!ve.done;ve=ge.next())Ie=ve.value,Ie.type=="variant"&&he.add(Ie.id),Ie.type=="text"&&Ee.add(Ie.id),Ie.type=="image"&&Te.add(Ie.id);e.variants=e.variants.filter(function(at){return he.has(at.id)}),e.textStreams=e.textStreams.filter(function(at){return Ee.has(at.id)}),e.imageStreams=e.imageStreams.filter(function(at){return Te.has(at.id)}),Sie(e),re(Le)}})}function sie(e,n,s,a,u,f,p){var g=Jre(s,n,a),y=u.offline.progressCallback;Pre(f,function(U,F){g.size=F,y(g,U)},function(U,F){w&&p&&b==F&&Jm(e,"cenc",U)});var w=oI(n)&&!r6(n),b=null;w&&(b=wie.get(e.g.keySystem));for(var I=new Zre,L=C(n.textStreams),j=L.next();!j.done;j=L.next())I.g.set(j.value.id,52);for(L=C(n.imageStreams),j=L.next();!j.done;j=L.next())tie(I,j.value);for(L=C(n.variants),j=L.next();!j.done;j=L.next())eie(I,j.value);return f=mie(f,I,n,u),u=f.streams,f=f.Ai,(I=e.g)&&p&&(I.initData=[]),{Pl:{creationTime:Date.now(),originalManifestUri:s,duration:n.presentationTimeline.getDuration(),size:0,expiration:e.ue(),streams:u,sessionIds:p?N3(e):[],drmInfo:I,appMetadata:a,isIncomplete:!0,sequenceMode:n.sequenceMode,type:n.type},Ai:f}}function oI(e){return e.variants.some(function(n){var s=n.audio&&n.audio.encrypted;return n.video&&n.video.encrypted||s})}function r6(e){return e.variants.some(function(n){return(n.video?n.video.drmInfos:[]).concat(n.audio?n.audio.drmInfos:[]).some(function(s){return s.initData&&s.initData.length})})}function i6(e,n,s,a){if(n.expiration=s.ue(),s=N3(s),n.sessionIds=a?s:[],oI(e)&&a&&!s.length)throw new oe(2,9,9007)}d.remove=function(e){return aI(this,oie(this,e))};function oie(e,n){var s,a,u,f,p,g;return X(function(y){switch(y.g){case 1:if(Lx(),s=rI(n),s==null||s.g!="manifest")throw new oe(2,9,9004,n);return a=s,u=new Hi,Ae(y,2),O(y,u.init(),4);case 4:return O(y,Cx(u,a.Zb(),a.mb()),5);case 5:return f=y.h,O(y,f.getManifests([a.key()]),6);case 6:return p=y.h,g=p[0],O(y,Promise.all([aie(e,g,u),lie(f,a,g)]),2);case 2:return le(y),O(y,u.destroy(),8);case 8:pe(y,0)}})}function s6(e,n){for(var s=[],a=C(e.streams),u=a.next();!u.done;u=a.next())u=u.value,n&&u.type=="video"?s.push({contentType:Pn(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):n||u.type!="audio"||s.push({contentType:Pn(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return s}function aie(e,n,s){return X(function(a){return O(a,Tie(e.g,e.h.drm,s,n),0)})}function lie(e,n,s){function a(){}var u=xie(s);return iI(n,s),Promise.all([e.removeSegments(u,a),e.removeManifests([n.key()],a)])}d.jm=function(){return aI(this,uie(this))};function uie(e){var n,s,a,u,f,p,g,y,w,b;return X(function(I){switch(I.g){case 1:return Lx(),n=e.g,s=e.h.drm,a=new Hi,u=!1,Ae(I,2),O(I,a.init(),4);case 4:f=[],Ure(a,function(L){return f.push(L)}),p=C(f),g=p.next();case 5:if(g.done){I.B(2);break}return y=g.value,O(I,y.getAll(),8);case 8:return w=I.h,O(I,J8(s,n,w),9);case 9:return b=I.h,O(I,y.remove(b),10);case 10:b.length!=w.length&&(u=!0),g=p.next(),I.B(5);break;case 2:return le(I),O(I,a.destroy(),11);case 11:pe(I,3);break;case 3:return I.return(!u)}})}d.list=function(){return aI(this,cie())};function cie(){var e,n,s;return X(function(a){switch(a.g){case 1:return Lx(),e=[],n=new Hi,Ae(a,2),O(a,n.init(),4);case 4:return s=Promise.resolve(),jre(n,function(u,f){s=s.then(function(){var p;return X(function(g){if(g.g==1)return O(g,f.getAllManifests(),2);p=g.h,p.forEach(function(y,w){y=iI(new Da("manifest",u.Zb,u.mb,w),y),e.push(y)}),re(g)})})}),O(a,s,2);case 2:return le(a),O(a,n.destroy(),6);case 6:pe(a,3);break;case 3:return a.return(e)}})}function die(e,n,s,a){var u,f,p,g,y;return X(function(w){if(w.g==1)return u=null,f=e.g,p={networkingEngine:f,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(b){u=b},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return a.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},s.configure(a.manifest),xs(e),O(w,s.start(n,p),2);if(w.g!=3)return g=w.h,xs(e),y=a6(g),O(w,Promise.all(Ho(y,function(b){return b.createSegmentIndex()})),3);if(xs(e),u)throw u;return w.return(g)})}function hie(e,n,s){var a,u,f,p,g,y,w,b,I,L,j,U,F,B,q;return X(function(G){switch(G.g){case 1:return O(G,o6(e,n),2);case 2:if(a=G.h,a!="text/vtt")throw new oe(1,2,2017,n);return O(G,pie(n,e.g,e.h.streaming.retryParameters),3);case 3:if(u=G.h,f=Km(a),!f)throw new oe(2,2,2014,a);for(p=f(),g={periodStart:0,segmentStart:0,segmentEnd:s.presentationTimeline.getDuration(),vttOffset:0},y=nt(u),w=p.parseMedia(y,g,n,[]),b=[],I=C(w),L=I.next(),j={};!L.done;j={Ag:void 0,Gd:void 0},L=I.next())j.Gd=L.value,j.Ag=null,U=function(z){return function(){return z.Ag==null&&(z.Ag=yr([n],[z.Gd.payload])),z.Ag||[]}}(j),F=new Xe(j.Gd.startTime,j.Gd.endTime,U,0,null,null,0,0,1/0),j.Gd.payload.includes("#xywh")&&(B=j.Gd.payload.split("#xywh=")[1].split(","),B.length===4&&F.og({height:parseInt(B[3],10),positionX:parseInt(B[0],10),positionY:parseInt(B[1],10),width:parseInt(B[2],10)})),b.push(F);if(q=a,!b.length){G.B(4);break}return O(G,af(b[0].S()[0],e.g,e.h.manifest.retryParameters),5);case 5:q=G.h;case 4:return G.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new jt(b),mimeType:q||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Pn(q||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function fie(e,n,s,a,u,f,p){var g,y,w;return X(function(b){if(b.g==1)return f?b.B(2):O(b,o6(e,s),3);if(b.g!=2&&(f=b.h),g={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:o1(0,n.presentationTimeline.getDuration(),[s]),mimeType:f||"",codecs:p||"",kind:u,encrypted:!1,drmInfos:[],keyIds:new Set,language:a,originalLanguage:a,label:null,type:mt,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Pn(f||"",p||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},y=Pn(g.mimeType,g.codecs),w=zm(y),!w)throw new oe(2,2,2014,f);return b.return(g)})}function o6(e,n){var s;return X(function(a){switch(a.g){case 1:return ce(a,2),O(a,af(n,e.g,e.h.streaming.retryParameters),4);case 4:s=a.h,se(a,3);break;case 2:ue(a);case 3:if(s)return a.return(s);throw new oe(1,2,2011,n)}})}function pie(e,n,s){var a,u,f;return X(function(p){return p.g==1?(a=ys,u=Kn([e],s),u.method="GET",O(p,n.request(a,u).promise,2)):(f=p.h,p.return(f.data))})}d.Ed=function(e,n,s,a){var u=this,f;return X(function(p){return p.g==1?(f=new zy({Gc:u.g,onError:n,Xf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),f.configure(s.drm),O(p,CQ(f,e.variants,a),2)):p.g!=3?O(p,D3(f),3):p.return(f)})};function mie(e,n,s,a){var u=new Map,f=a6(s),p=new Map;f=C(f);for(var g=f.next();!g.done;g=f.next()){g=g.value;var y=gie(e,n,s,g,a,u);p.set(g.id,y)}for(e=C(s.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&p.get(n.audio.id).variantIds.push(n.id),n.video&&p.get(n.video.id).variantIds.push(n.id);return{streams:Array.from(p.values()),Ai:Array.from(u.values())}}function gie(e,n,s,a,u,f){var p={id:a.id,originalId:a.originalId,groupId:a.groupId,primary:a.primary,type:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,hdr:a.hdr,colorGamut:a.colorGamut,videoLayout:a.videoLayout,kind:a.kind,language:a.language,originalLanguage:a.originalLanguage,label:a.label,width:a.width||null,height:a.height||null,encrypted:a.encrypted,keyIds:a.keyIds,segments:[],variantIds:[],roles:a.roles,forced:a.forced,channelsCount:a.channelsCount,audioSamplingRate:a.audioSamplingRate,spatialAudio:a.spatialAudio,closedCaptions:a.closedCaptions,tilesLayout:a.tilesLayout,mssPrivateData:a.mssPrivateData,external:a.external,fastSwitching:a.fastSwitching,isAudioMuxedInVideo:a.isAudioMuxedInVideo},g=u.offline.numberOfParallelDownloads,y=g===0?a.id:0;return vie(a,s.presentationTimeline.Mb(),function(w,b){var I=QA(w),L=void 0;if(!f.has(I)){var j=w.endTime-w.startTime;j=e6(n,a.id)*j,j=U8(e.g,j),f.set(I,new O8(w,j,y,!1,b))}w.ka&&(L=QA(w.ka),f.has(L)||(j=e6(n,a.id)*.5,j=U8(e.g,j),f.set(L,new O8(w.ka,j,y,!0,b)))),p.segments.push({pendingInitSegmentRefId:L,initSegmentKey:L?0:null,startTime:w.startTime,endTime:w.endTime,appendWindowStart:w.appendWindowStart,appendWindowEnd:w.appendWindowEnd,timestampOffset:w.timestampOffset,tilesLayout:w.tilesLayout,pendingSegmentRefId:I,dataKey:0,mimeType:w.mimeType,codecs:w.codecs,thumbnailSprite:w.thumbnailSprite}),g!==0&&(y=(y+1)%g)}),p}function vie(e,n,s){if(n=e.segmentIndex.find(n),n!=null)for(var a=e.segmentIndex.get(n);a;)s(a,n),a=e.segmentIndex.get(++n)}function xs(e){if(e.j.g)throw new oe(2,9,7001)}function Lx(){if(!sI())throw new oe(2,9,9e3)}function aI(e,n){return X(function(s){return s.g==1?(e.i.push(n),Ae(s,2),O(s,n,4)):s.g!=2?s.return(s.h):(le(s),wo(e.i,n),pe(s,0))})}function yie(e,n){var s=n.promise;return e.i.push(s),n.finally(function(){wo(e.i,s)})}function xie(e){var n=new Set;e=C(e.streams);for(var s=e.next();!s.done;s=e.next()){s=C(s.value.segments);for(var a=s.next();!a.done;a=s.next())a=a.value,a.initSegmentKey!=null&&n.add(a.initSegmentKey),n.add(a.dataKey)}return Array.from(n)}function Tie(e,n,s,a){var u,f,p;return X(function(g){return g.g==1?a.drmInfo?(u=Fre(s),f=a.sessionIds.map(function(y){return{sessionId:y,keySystem:a.drmInfo.keySystem,licenseUri:a.drmInfo.licenseServerUri,serverCertificate:a.drmInfo.serverCertificate,audioCapabilities:s6(a,!1),videoCapabilities:s6(a,!0)}}),O(g,J8(n,e,f),2)):g.return():g.g!=3?(p=g.h,O(g,u.remove(p),3)):O(g,u.add(f.filter(function(y){return!p.includes(y.sessionId)})),0)})}function a6(e){for(var n=new Set,s=C(e.variants),a=s.next();!a.done;a=s.next())a=a.value,a.audio&&n.add(a.audio),a.video&&n.add(a.video);for(s=C(e.textStreams),a=s.next();!a.done;a=s.next())n.add(a.value);for(e=C(e.imageStreams),s=e.next();!s.done;s=e.next())n.add(s.value);return n}function Sie(e){e.variants.map(function(f){return f.video});var n=new Set(e.variants.map(function(f){return f.audio}));e=e.textStreams;for(var s=C(n),a=s.next();!a.done;a=s.next()){a=C(n);for(var u=a.next();!u.done;u=a.next());}for(n=C(e),s=n.next();!s.done;s=n.next())for(s=C(e),a=s.next();!a.done;a=s.next());}xe("shaka.offline.Storage",Lr),Lr.deleteAll=function(){var e;return X(function(n){return n.g==1?(e=new Hi,Ae(n,2),O(n,Bre(e),2)):n.g!=5?(le(n),O(n,e.destroy(),5)):pe(n,0)})},Lr.prototype.list=Lr.prototype.list,Lr.prototype.removeEmeSessions=Lr.prototype.jm,Lr.prototype.remove=Lr.prototype.remove,Lr.prototype.store=Lr.prototype.store,Lr.prototype.getNetworkingEngine=Lr.prototype.Wb,Lr.prototype.getConfiguration=Lr.prototype.getConfiguration,Lr.prototype.configure=Lr.prototype.configure,Lr.prototype.destroy=Lr.prototype.destroy,Lr.support=sI;var wie=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");jM("offline",sI);function Br(){}function l6(){for(var e=C(Xg),n=e.next();!n.done;n=e.next()){n=n.value;try{n.callback()}catch(s){$e("Error installing polyfill!",s)}}}function hi(e,n){for(e={priority:n||0,callback:e},n=0;n<Xg.length;n++)if(Xg[n].priority<e.priority){Xg.splice(n,0,e);return}Xg.push(e)}xe("shaka.polyfill",Br),Br.register=hi,Br.installAll=l6;var Xg=[];function u6(){}function c6(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=C(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),n=e.next();!n.done;n=e.next())Eie(n.value)}function Eie(e){var n="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(n)},set:function(s){s==null||s==null?this.removeAttribute(n):this.setAttribute(n,s)}})}Br.Aria=u6,u6.install=c6,hi(c6);function Px(e,n,s){this.g=e,this.i=n||null,this.h=s||null,this.keySystem=e.keySystem}Px.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var n=C(e.videoCapabilities),s=n.next();!s.done;s=n.next())s.value.encryptionScheme=this.i;if(e.audioCapabilities)for(n=C(e.audioCapabilities),s=n.next();!s.done;s=n.next())s.value.encryptionScheme=this.h;return e},Px.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function d6(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":($e("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function h6(e){if(!e)return!1;e=e.getConfiguration();var n=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||n)&&e.encryptionScheme!==void 0)}function lI(e,n){return!!(!e||e==n||(e=="cbcs"||e=="cbcs-1-9")&&ht().vd())}function f6(){}var Qg;function p6(){ht().rg()&&!Qg&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(Qg=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=bie,navigator.emeEncryptionSchemePolyfilled=!0)}function bie(e,n){var s=this,a;return X(function(u){return u.g==1?O(u,Qg.call(s,e,n),2):(a=u.h,h6(a)?(navigator.requestMediaKeySystemAccess=Qg,u.return(a)):(navigator.requestMediaKeySystemAccess=m6,u.return(m6.call(s,e,n))))})}function m6(e,n){var s=this,a,u,f,p,g,y,w,b,I,L,j,U;return X(function(F){if(F.g==1){for(a=d6(e),u=[],f=C(n),p=f.next();!p.done;p=f.next())g=p.value,y=g6(g.videoCapabilities,a),w=g6(g.audioCapabilities,a),g.videoCapabilities&&g.videoCapabilities.length&&!y.length||g.audioCapabilities&&g.audioCapabilities.length&&!w.length||(b=Object.assign({},g),b.videoCapabilities=y,b.audioCapabilities=w,u.push(b));if(!u.length)throw I=Error("Unsupported keySystem or supportedConfigurations."),I.name="NotSupportedError",I.code=DOMException.NOT_SUPPORTED_ERR,I;return O(F,Qg.call(s,e,u),2)}return L=F.h,U=j=null,u[0]&&(u[0].videoCapabilities&&(j=u[0].videoCapabilities[0].encryptionScheme),u[0].audioCapabilities&&(U=u[0].audioCapabilities[0].encryptionScheme)),F.return(new Px(L,j,U))})}function g6(e,n){return e&&e.filter(function(s){return lI(s.encryptionScheme,n)})}Br.EmeEncryptionScheme=f6,f6.install=p6,hi(p6);function v6(){}function y6(){if(l.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Dx),document.addEventListener("webkitfullscreenerror",Dx),document.addEventListener("mozfullscreenchange",Dx),document.addEventListener("mozfullscreenerror",Dx)}}function Dx(e){var n=e.type.replace(/^(webkit|moz)/,"").toLowerCase(),s=document.createEvent("Event");s.initEvent(n,e.bubbles,e.cancelable),e.target.dispatchEvent(s)}Br.Fullscreen=v6,v6.install=y6,hi(y6);function x6(){}var Jg;function T6(){ht().rg()&&!Jg&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(Jg=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=Aie,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function Aie(e){var n=this,s,a;return X(function(u){switch(u.g){case 1:return O(u,Jg.call(n,e),2);case 2:if(s=u.h,!s.supported||!e.keySystemConfiguration)return u.return(s);if(a=s.keySystemAccess,h6(a))return navigator.mediaCapabilities.decodingInfo=Jg,u.return(s);if(navigator.mediaCapabilities.decodingInfo=S6,a){u.B(3);break}return O(u,w6(e),4);case 4:return s.keySystemAccess=u.h,u.return(s);case 3:return u.return(S6.call(n,e))}})}function S6(e){var n=this,s,a,u,f,p,g,y;return X(function(w){switch(w.g){case 1:return a=s=null,!e.keySystemConfiguration||(u=e.keySystemConfiguration,f=u.keySystem,a=u.audio&&u.audio.encryptionScheme,s=u.video&&u.video.encryptionScheme,p=d6(f),g={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},lI(a,p)&&lI(s,p))?O(w,Jg.call(n,e),2):w.return(g);case 2:if(y=w.h,y.keySystemAccess){y.keySystemAccess=new Px(y.keySystemAccess,s,a),w.B(3);break}if(!e.keySystemConfiguration){w.B(3);break}return O(w,w6(e),5);case 5:y.keySystemAccess=w.h;case 3:return w.return(y)}})}function w6(e){var n,s;return X(function(a){if(a.g==1){var u=e.keySystemConfiguration,f=[],p=[];return u.audio&&f.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:u.audio.encryptionScheme}),u.video&&p.push({robustness:u.video.robustness||"",contentType:e.video.contentType,encryptionScheme:u.video.encryptionScheme}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},f.length&&(u.audioCapabilities=f),p.length&&(u.videoCapabilities=p),n=u,O(a,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[n]),2)}return s=a.h,a.return(s)})}Br.MCapEncryptionScheme=x6,x6.install=T6,hi(T6,-2);function Nx(){}function E6(){ht().sc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Nx.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Iie)}function Iie(e){var n,s,a,u,f,p,g,y,w,b,I;return X(function(L){switch(L.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},ht(),s=e.video,a=e.audio,e.type!="media-source"){if(e.type=="file"){if(s&&(u=s.contentType,f=Td().canPlayType(u)!="",!f)||a&&(p=a.contentType,g=Td().canPlayType(p)!="",!g))return L.return(n)}else return L.return(n);L.B(2);break}if(!Pa())return L.return(n);if(!s){L.B(3);break}return O(L,Cie(s),4);case 4:if(y=L.h,!y)return L.return(n);case 3:if(a){var j=ht().Oa(),U=a.contentType;if(j==="CAST"&&a.spatialRendering&&(U+="; spatialRendering=true"),w=ui(U),!w)return L.return(n)}case 2:return e.keySystemConfiguration?(b=e.keySystemConfiguration,O(L,kie(s,a,b),6)):(n.supported=!0,L.return(n));case 6:(I=L.h)&&(n.supported=!0,n.keySystemAccess=I);case 5:return L.return(n)}})}function Cie(e){var n,s,a;return X(function(u){return u.g==1?(n=ht(),s=n.Oa(),s!=="CAST"?u.B(2):O(u,_ie(e),3)):u.g!=2?(a=u.h,u.return(a)):u.return(ui(e.contentType))})}function kie(e,n,s){var a,u,f,p,g,y,w,b,I,L,j,U;return X(function(F){switch(F.g){case 1:a=[],u=[],f=[],s.audio&&(p={robustness:s.audio.robustness||"",contentType:n.contentType},ht().uj()&&n.contentType.includes('codecs="ac-3"')&&(p.contentType='audio/mp4; codecs="ec-3"'),s.audio.encryptionScheme&&(p.encryptionScheme=s.audio.encryptionScheme,f.push(s.audio.encryptionScheme)),a.push(p)),s.video&&(g={robustness:s.video.robustness||"",contentType:e.contentType},s.video.encryptionScheme&&(g.encryptionScheme=s.video.encryptionScheme,f.push(s.video.encryptionScheme)),u.push(g)),y={initDataTypes:[s.initDataType],distinctiveIdentifier:s.distinctiveIdentifier,persistentState:s.persistentState,sessionTypes:s.sessionTypes},a.length&&(y.audioCapabilities=a),u.length&&(y.videoCapabilities=u),w=e?e.contentType:"",b=n?n.contentType:"",I=es(w)+";"+ku(w),L=es(b)+";"+ku(b),j=s.keySystem,U=null,ce(F,2);var B=QE(I,L,j,f);if(Mh.has(B)){B=QE(I,L,j,f),U=Mh.get(B)||null,F.B(4);break}return O(F,navigator.requestMediaKeySystemAccess(s.keySystem,[y]),5);case 5:B=U=F.h;var q=QE(I,L,j,f);Mh.set(q,B);case 4:se(F,3);break;case 2:ue(F);case 3:return F.return(U)}})}function _ie(e){var n,s,a,u,f;return X(function(p){if(p.g==1){if(!(l.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return p.return(ui(e.contentType));switch(n=e.contentType,e.width&&e.height&&e.width>1280&&e.height>720&&(n+="; width="+e.width+"; height="+e.height),e.framerate&&(s=Math.round(e.framerate),s<24||s>30)&&(n+="; framerate="+e.framerate),a=e.transferFunction||"",a){case"":case"srgb":break;case"pq":n+="; eotf=smpte2084";break;case"hlg":n+="; eotf=arib-std-b67";break;default:return p.return(!1)}return u=!1,f=Rie,f.has(n)?(u=f.get(n),p.B(2)):O(p,cast.__platform__.canDisplayType(n),3)}return p.g!=2&&(u=p.h,f.set(n,u)),p.return(u)})}Br.MediaCapabilities=Nx,Nx.install=E6,Nx.originalMcap=null;var Rie=new Map;hi(E6,-1);function b6(){}function A6(){var e=ht(),n=e.Ja()==="WEBKIT"?e.Ha():null;for((l.MediaSource||l.ManagedMediaSource)&&n&&l.MediaSource&&(n<=12?(I6(),Lie()):n<=15&&I6()),e=C(e.Ej()),n=e.next();!n.done;n=e.next())Die(n.value);(l.MediaSource||l.ManagedMediaSource)&&Pie(),l.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&Nie()}function I6(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var n=e.apply(this,Pe.apply(0,arguments));return n.abort=function(){},n}}function Lie(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(n,s){return e.call(this,n,s-.001)}}function Pie(){if(l.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(s){return qm(s)!="mp2t"&&e(s)}}if(l.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);l.ManagedMediaSource.isTypeSupported=function(s){return qm(s)!="mp2t"&&n(s)}}}function Die(e){var n=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(a){return ku(a)!=e&&n(a)},l.ManagedMediaSource){var s=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);l.ManagedMediaSource.isTypeSupported=function(a){return ku(a)!=e&&s(a)}}}function Nie(){var e=MediaSource.isTypeSupported;ht().ek()&&(MediaSource.isTypeSupported=function(n){var s=n.split(/ *; */),a=s.findIndex(function(p){return p.startsWith("codecs=")});if(a<0)return e(n);var u=s[a].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),f=u.findIndex(function(p){return p.startsWith("vp09")});return f>=0&&(u[f]="vp9",s[a]='codecs="'+u.join(",")+'"',n=s.join("; ")),e(n)})}Br.MediaSource=b6,b6.install=A6,hi(A6);function C6(){}function k6(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?Mie():l.orientation!=null&&Oie())}function Mie(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function Oie(){function e(){switch(l.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Mx;screen.orientation=n,e(),l.addEventListener("orientationchange",function(){e();var s=new _e("change");n.dispatchEvent(s)})}Br.Orientation=C6,C6.install=k6;function Mx(){Tt.call(this),this.type="",this.angle=0}V(Mx,Tt),Mx.prototype.lock=function(e){function n(a){return screen.lockOrientation?screen.lockOrientation(a):screen.mozLockOrientation?screen.mozLockOrientation(a):!1}var s=!1;switch(e){case"natural":s=n("default");break;case"any":s=!0,this.unlock();break;default:s=n(e)}return s?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Mx.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation&&screen.mozUnlockOrientation()},hi(k6);function uI(){}var cI,dI,hI,fI,pI,mI;function _6(e){l.HTMLVideoElement&&l.WebKitMediaKeys&&l.shakaMediaKeysPolyfill!=vI&&(e!==void 0&&e&&(cI=!0,dI=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),hI=HTMLMediaElement.prototype.setMediaKeys,fI=l.MediaKeys,pI=l.MediaKeySystemAccess,mI=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Uie,l.MediaKeys=Zg,l.MediaKeySystemAccess=Ox,navigator.requestMediaKeySystemAccess=jie,l.shakaMediaKeysPolyfill=vI,By.clear(),Mh.clear())}function jie(e,n){try{var s=new Ox(e,n);return Promise.resolve(s)}catch(a){return Promise.reject(a)}}function Uie(e){var n=this.mediaKeys;return n&&n!=e&&R6(n,null),delete this.mediaKeys,(this.mediaKeys=e)?R6(e,this):Promise.resolve()}function Fie(e){if(e=nt(e.initData),Ui(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Eu(e.subarray(4),!0),e=To(e);var n=new Event("encrypted");n.initDataType="skd",n.initData=vr(e),this.dispatchEvent(n)}Br.PatchedMediaKeysApple=uI,uI.uninstall=function(){l.shakaMediaKeysPolyfill==vI&&cI&&(cI=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",dI),HTMLMediaElement.prototype.setMediaKeys=hI,l.MediaKeys=fI,l.MediaKeySystemAccess=pI,navigator.requestMediaKeySystemAccess=mI,dI=mI=hI=pI=fI=null,l.shakaMediaKeysPolyfill="",By.clear(),Mh.clear())},uI.install=_6;function Ox(e,n){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=C(n),n=e.next();!n.done;n=e.next()){var s=n.value;if(s.persistentState=="required")n=null;else{n={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label};var a=!1,u=!1;if(s.audioCapabilities)for(var f=C(s.audioCapabilities),p=f.next();!p.done;p=f.next())p=p.value,p.contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,p.contentType.split(";")[0])&&(n.audioCapabilities.push(p),u=!0));if(s.videoCapabilities)for(s=C(s.videoCapabilities),f=s.next();!f.done;f=s.next())f=f.value,f.contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(n.videoCapabilities.push(f),u=!0));a||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),n=u?n:null}if(n){this.g=n;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ox.prototype.createMediaKeys=function(){var e=new Zg(this.keySystem);return Promise.resolve(e)},Ox.prototype.getConfiguration=function(){return this.g};function Zg(e){this.h=new WebKitMediaKeys(e),this.g=new Dt}Zg.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new gI(this.h)},Zg.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function R6(e,n){if(e.g.Ta(),!n)return Promise.resolve();e.g.o(n,"webkitneedkey",Fie);try{return bd(n,HTMLMediaElement.HAVE_METADATA,e.g,function(){n.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(s){return Promise.reject(s)}}Zg.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function gI(e){Tt.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Dt,this.sessionId="",this.expiration=NaN,this.closed=new en,this.keyStatuses=new L6,this.onkeystatuseschange=null}V(gI,Tt),d=gI.prototype,d.generateRequest=function(e,n){var s=this;this.h=new en;try{var a=this.l.createSession("video/mp4",nt(n));this.i=a,this.sessionId=a.sessionId||"",this.j.o(this.i,"webkitkeymessage",function(u){s.h&&(s.h.resolve(),s.h=null),u=new Map().set("messageType",s.keyStatuses.Vc()==null?"license-request":"license-renewal").set("message",vr(u.message)),u=new _e("message",u),s.dispatchEvent(u)}),this.j.o(a,"webkitkeyadded",function(){s.g&&(jx(s,"usable"),s.g.resolve(),s.g=null)}),this.j.o(a,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=s.i.error,s.h!=null)s.h.reject(u),s.h=null;else if(s.g!=null)s.g.reject(u),s.g=null;else switch(s.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:jx(s,"output-not-allowed");break;default:jx(s,"internal-error")}}),jx(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},d.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},d.update=function(e){this.g=new en;try{this.i.update(nt(e))}catch(n){this.g.reject(n)}return this.g},d.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ta()}catch(e){this.closed.reject(e)}return this.closed},d.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function jx(e,n){var s=e.keyStatuses;s.size=n==null?0:1,s.g=n,n=new _e("keystatuseschange"),e.dispatchEvent(n),e.onkeystatuseschange&&e.onkeystatuseschange(n)}function L6(){this.size=0,this.g=void 0}d=L6.prototype,d.Vc=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,vy.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var n=vy.value();return!!(this.g&&Rr(e,n))},d.entries=function(){},d.keys=function(){},d.values=function(){};var vI="apple";hi(function(){l.HTMLVideoElement&&l.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||_6())});function P6(){}function D6(){if(l.MediaKeys){var e=ht();MediaKeys.prototype.setServerCertificate&&e.Pe()||(MediaKeys.prototype.setServerCertificate=Bie)}}function Bie(){return Promise.resolve(!1)}Br.PatchedMediaKeysCert=P6,P6.install=D6,hi(D6);function N6(){}function M6(){if(!(!l.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)wI="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=$ie,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Vie,l.MediaKeys=e0,l.MediaKeySystemAccess=Ux,l.shakaMediaKeysPolyfill=Gie}}function yI(e){var n=wI;return n?n+e.charAt(0).toUpperCase()+e.slice(1):e}function $ie(e,n){try{var s=new Ux(e,n);return Promise.resolve(s)}catch(a){return Promise.reject(a)}}function Vie(e){var n=this.mediaKeys;return n&&n!=e&&O6(n,null),delete this.mediaKeys,(this.mediaKeys=e)&&O6(e,this),Promise.resolve()}Br.PatchedMediaKeysWebkit=N6,N6.install=M6;function Ux(e,n){this.g=this.keySystem=e;var s=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",s=!1);var a=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),n=C(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var p={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:f.initDataTypes,sessionTypes:["temporary"],label:f.label},g=!1;if(f.audioCapabilities)for(var y=C(f.audioCapabilities),w=y.next();!w.done;w=y.next())w=w.value,w.contentType&&(g=!0,u.canPlayType(w.contentType.split(";")[0],this.g)&&(p.audioCapabilities.push(w),a=!0));if(f.videoCapabilities)for(y=C(f.videoCapabilities),w=y.next();!w.done;w=y.next())w=w.value,w.contentType&&(g=!0,u.canPlayType(w.contentType,this.g)&&(p.videoCapabilities.push(w),a=!0));if(g||(a=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),f.persistentState=="required"&&(s?(p.persistentState="required",p.sessionTypes=["persistent-license"]):a=!1),a){this.h=p;return}}throw s="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(s="None of the requested configurations were supported."),e=Error(s),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ux.prototype.createMediaKeys=function(){var e=new e0(this.g);return Promise.resolve(e)},Ux.prototype.getConfiguration=function(){return this.h};function e0(e){this.l=e,this.h=null,this.g=new Dt,this.i=[],this.j=new Map}function O6(e,n){e.h=n,e.g.Ta();var s=wI;n&&(e.g.o(n,s+"needkey",function(a){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=vr(a.initData),e.h.dispatchEvent(u)}),e.g.o(n,s+"keymessage",function(a){var u=xI(e,a.sessionId);u&&(a=new Map().set("messageType",u.keyStatuses.Vc()==null?"licenserequest":"licenserenewal").set("message",a.message),a=new _e("message",a),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(a))}),e.g.o(n,s+"keyadded",function(a){(a=xI(e,a.sessionId))&&a.ready()}),e.g.o(n,s+"keyerror",function(a){var u=xI(e,a.sessionId);if(u){var f=Error("EME v0.1b key error"),p=a.errorCode;p.systemCode=a.systemCode,f.errorCode=p,!a.sessionId&&u.h?(a.systemCode==45&&(f.message="Unsupported session type."),u.h.reject(f),u.h=null):a.sessionId&&u.g?(u.g.reject(f),u.g=null):(f=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Fx(u,"output-restricted"):f==1?Fx(u,"expired"):Fx(u,"internal-error"))}}))}e0.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var n=this.h||document.createElement("video");return n.src||(n.src="about:blank"),e=new TI(n,this.l,e),this.i.push(e),e},e0.prototype.setServerCertificate=function(){return Promise.resolve(!1)},e0.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function xI(e,n){var s=e.j.get(n);return s||((s=e.i.shift())?(s.sessionId=n,e.j.set(n,s),s):null)}function TI(e,n,s){Tt.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=n,this.l=s,this.sessionId="",this.expiration=NaN,this.closed=new en,this.keyStatuses=new U6,this.onkeystatuseschange=null}V(TI,Tt),d=TI.prototype,d.ready=function(){Fx(this,"usable"),this.g&&this.g.resolve(),this.g=null};function j6(e,n,s){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(s)var a=nt(To("LOAD_SESSION|"+s));else{var u=To("PERSISTENT|");a=Hn(u,n)}else a=nt(n)}catch(p){return Promise.reject(p)}e.h=new en;var f=yI("generateKeyRequest");try{e.j[f](e.i,a)}catch(p){if(p.name!="InvalidStateError")return e.h=null,Promise.reject(p);new Ke(function(){try{e.j[f](e.i,a)}catch(g){e.h.reject(g),e.h=null}}).Y(.01)}return e.h}function SI(e,n,s){if(e.g)e.g.then(function(){return SI(e,n,s)}).catch(function(){return SI(e,n,s)});else{if(e.g=n,e.i=="webkit-org.w3.clearkey"){var a=yn(s),u=JSON.parse(a);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),a=Bs(u.keys[0].k),u=Bs(u.keys[0].kid)}else a=nt(s),u=null;var f=yI("addKey");try{e.j[f](e.i,a,u,e.sessionId)}catch(p){e.g.reject(p),e.g=null}}}function Fx(e,n){var s=e.keyStatuses;s.size=n==null?0:1,s.g=n,n=new _e("keystatuseschange"),e.dispatchEvent(n),e.onkeystatuseschange&&e.onkeystatuseschange(n)}d.generateRequest=function(e,n){return j6(this,n,null)},d.load=function(e){return this.l=="persistent-license"?j6(this,null,e):Promise.reject(Error("Not a persistent session."))},d.update=function(e){var n=new en;return SI(this,n,e),n},d.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=yI("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},d.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function U6(){this.size=0,this.g=void 0}d=U6.prototype,d.Vc=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,vy.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var n=vy.value();return!!(this.g&&Rr(e,n))},d.entries=function(){},d.keys=function(){},d.values=function(){};var wI="",Gie="webkit";hi(M6);function F6(){}function B6(){if(l.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=qie,Object.defineProperty(e,"disablePictureInPicture",{get:zie,set:Wie,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Kie,document.addEventListener("webkitpresentationmodechanged",Hie,!0))}}function Hie(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var n=new Event("enterpictureinpicture");e.dispatchEvent(n)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),n=new Event("leavepictureinpicture"),e.dispatchEvent(n)}function qie(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Kie(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function zie(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function Wie(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Br.PiPWebkit=F6,F6.install=B6,hi(B6);function $6(){}function V6(){l.crypto&&("randomUUID"in l.crypto||(l.crypto.randomUUID=Yie))}function Yie(){var e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.substr(n.lastIndexOf("/")+1)}Br.RandomUUID=$6,$6.install=V6,hi(V6);function G6(){}function H6(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:Xie})}function Xie(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Br.Symbol=G6,G6.install=H6,hi(H6);function q6(){}function K6(){for(var e=C([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),n=e.next();!n.done;n=e.next())n=n.value,n.prototype.indexOf||(n.prototype.indexOf=Qie),n.prototype.lastIndexOf||(n.prototype.lastIndexOf=Jie),n.prototype.includes||(n.prototype.includes=Zie)}function Qie(e,n){return Array.prototype.indexOf.call(this,e,n)}function Jie(e,n){return Array.prototype.lastIndexOf.call(this,e,n)}function Zie(e,n){return this.indexOf(e,n)!==-1}Br.TypedArray=q6,q6.install=K6,hi(K6);function z6(){}function W6(){if(l.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var n=e.apply(this);return n&&n.catch(function(){}),n}}}Br.VideoPlayPromise=z6,z6.install=W6,hi(W6);function Y6(){}function X6(){if(l.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||typeof Td().webkitDroppedFrameCount=="number")&&(e.getVideoPlaybackQuality=ese)}}function ese(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Br.VideoPlaybackQuality=Y6,Y6.install=X6,hi(X6);function Q6(){}function J6(){if(!l.VTTCue&&l.TextTrackCue){var e=null,n=TextTrackCue.length;if(n==3)e=EI;else if(n==6)e=tse;else{try{var s=!!EI(1,2,"")}catch{s=!1}s&&(e=EI)}e&&(l.VTTCue=function(a,u,f){return e(a,u,f)})}}function EI(e,n,s){return new l.TextTrackCue(e,n,s)}function tse(e,n,s){return new l.TextTrackCue(e+"-"+n+"-"+s,e,n,s)}Br.VTTCue=Q6,Q6.install=J6,hi(J6);function wr(e){Tt.call(this),this.g=e,this.m=null,this.h=[],this.j=-1,this.i=this.l=null,this.u=new Dt}V(wr,Tt),d=wr.prototype,d.destroy=function(){var e=this;return X(function(n){if(n.g==1)return O(n,e.removeAllItems(),2);e.g=null,e.u&&(e.u.release(),e.u=null),Tt.prototype.release.call(e),re(n)})},d.configure=function(e){this.m=e},d.getConfiguration=function(){return this.m},d.getCurrentItem=function(){return this.h.length&&this.j>=0&&this.j<this.h.length?this.h[this.j]:null},d.getCurrentItemIndex=function(){return this.j},d.getItems=function(){return this.h.slice()},d.insertItems=function(e){this.h.push.apply(this.h,K(e)),this.dispatchEvent(new _e("itemsinserted"))},d.removeAllItems=function(){var e=this,n,s,a,u;return X(function(f){if(f.g==1)return e.u.Ta(),e.h.length&&e.j>=0?O(f,e.g.wc(),2):f.B(2);if(f.g!=4){for(n=[],e.i&&(e.i.preloadManager.l||n.push(e.i.preloadManager.destroy()),e.i=null),e.l&&(e.l.preloadManager.l||n.push(e.l.preloadManager.destroy()),e.l=null),s=C(e.h),a=s.next();!a.done;a=s.next())u=a.value,u.preloadManager&&!u.preloadManager.l&&n.push(u.preloadManager.destroy());return n.length?O(f,Promise.all(n),4):f.B(4)}e.h=[],e.j=-1,e.dispatchEvent(new _e("itemsremoved")),re(f)})},d.playItem=function(e){var n=this,s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G;return X(function(z){switch(z.g){case 1:if(n.u.Ta(),!n.h.length||e>=n.h.length)throw new oe(2,7,7007);if(s=n.getCurrentItem(),a=n.h[e],n.j!=e&&(n.j=e,n.dispatchEvent(new _e("currentitemchanged"))),u=n.g.zf(),f=n.m?n.m.preloadNextUrlWindow:0,f>0&&(p=!1,n.u.o(u,"timeupdate",function(){var J,ie,Y,ne;return X(function(Z){switch(Z.g){case 1:if(n.l||n.h.length<=1||p||n.g.U()||!u.duration)return Z.return();if(J=n.g.wa().end-u.currentTime,isNaN(J)){Z.B(0);break}if(!(J<=f)){Z.B(0);break}if(ie=n.m&&n.m.repeatMode,Y=null,n.j+1<n.h.length?Y=n.h[n.j+1]:ie==1&&(Y=n.h[0]),!Y||Y.preloadManager&&!Y.preloadManager.l){Z.B(0);break}return p=!0,ne=null,ce(Z,5),O(Z,n.g.preload(Y.manifestUri,Y.startTime,Y.mimeType,Y.config),7);case 7:ne=Z.h,se(Z,6);break;case 5:ue(Z),ne=null;case 6:n.l={item:Y,preloadManager:ne},p=!1,re(Z)}})})),n.u.o(n.g,"complete",function(){var J=n.m&&n.m.repeatMode,ie=!1;if(J==2)ie=!0;else{var Y=n.j+1;Y<n.h.length?n.playItem(Y):J==1&&(n.h.length==1?ie=!0:n.playItem(0))}ie&&(u.paused?(u.currentTime=n.g.wa().start,u.play()):n.u.o(u,"paused",function(){u.currentTime=n.g.wa().start,u.play()}))}),g=a.manifestUri,a.preloadManager&&!a.preloadManager.l&&(g=a.preloadManager),y=!1,n.l&&n.l.item==a&&n.l.preloadManager?g=n.l.preloadManager:n.i&&n.i.item==a&&n.i.preloadManager&&(g=n.i.preloadManager,y=!0),!n.i){z.B(2);break}if(y||n.i.preloadManager.l){z.B(3);break}return O(z,n.i.preloadManager.destroy(),3);case 3:n.i=null;case 2:if(!(n.m&&n.m.preloadPrevItem&&s&&n.g.Ac()===Tr)){z.B(5);break}return w=null,ce(z,6),O(z,n.g.ik(),8);case 8:w=z.h,se(z,7);break;case 6:ue(z),w=null;case 7:n.i={item:s,preloadManager:w};case 5:return a.config&&(n.g.Hj(),n.g.configure(a.config)),O(z,n.g.load(g,a.startTime,a.mimeType),9);case 9:if(n.l=null,a.extraText)for(b=C(a.extraText),I=b.next();!I.done;I=b.next())L=I.value,L.mime?n.g.le(L.uri,L.language,L.kind,L.mime,L.codecs):n.g.le(L.uri,L.language,L.kind);if(a.extraThumbnail)for(j=C(a.extraThumbnail),U=j.next();!U.done;U=j.next())F=U.value,n.g.kf(F);if(a.extraChapter)for(B=C(a.extraChapter),q=B.next();!q.done;q=B.next())G=q.value,n.g.jf(G.uri,G.language,G.mime);re(z)}})},xe("shaka.queue.QueueManager",wr),wr.prototype.playItem=wr.prototype.playItem,wr.prototype.removeAllItems=wr.prototype.removeAllItems,wr.prototype.insertItems=wr.prototype.insertItems,wr.prototype.getItems=wr.prototype.getItems,wr.prototype.getCurrentItemIndex=wr.prototype.getCurrentItemIndex,wr.prototype.getCurrentItem=wr.prototype.getCurrentItem,wr.prototype.getConfiguration=wr.prototype.getConfiguration,wr.prototype.configure=wr.prototype.configure,wr.prototype.destroy=wr.prototype.destroy,$1=function(e){return new wr(e)};function Ts(){}Ts.prototype.parseInit=function(){},Ts.prototype.setSequenceMode=function(){},Ts.prototype.setManifestType=function(){},Ts.prototype.parseMedia=function(e,n){var s=null,a=[];e=yn(e).split(/\r?\n/),e=C(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=nse.exec(u))){var f=rse.exec(u[1]);f=parseInt(f[1],10)*60+parseFloat(f[2].replace(",",".")),u=new cn(f,n.segmentEnd?n.segmentEnd:f+2,u[2]),s&&(s.endTime=f,a.push(s)),s=u}return s&&a.push(s),a},xe("shaka.text.LrcTextParser",Ts),Ts.prototype.parseMedia=Ts.prototype.parseMedia,Ts.prototype.setManifestType=Ts.prototype.setManifestType,Ts.prototype.setSequenceMode=Ts.prototype.setSequenceMode,Ts.prototype.parseInit=Ts.prototype.parseInit;var nse=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,rse=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Ur("application/x-subtitle-lrc",function(){return new Ts});function ss(){this.g="UNKNOWN"}ss.prototype.parseInit=function(){},ss.prototype.setSequenceMode=function(){},ss.prototype.setManifestType=function(e){this.g=e},ss.prototype.parseMedia=function(e,n,s,a){var u=yn(e);if(e=[],u=="")return e;var f=cd(u,"tt",!0);if(!f)throw new oe(2,2,2005,"Failed to parse TTML.");if(u=Xo(f,"body")[0],!u)return[];var p=Ia(f,t0,"frameRate"),g=Ia(f,t0,"subFrameRate"),y=Ia(f,t0,"frameRateMultiplier"),w=Ia(f,t0,"tickRate"),b=Ia(f,t0,"cellResolution"),I=f.attributes["xml:space"]||"default",L=Ia(f,Vx,"extent");if(I!="default"&&I!="preserve")throw new oe(2,2,2005,"Invalid xml:space value: "+I);I=I=="default",p=new lse(p,g,y,w),b=ase(b),g=Xo(f,"metadata")[0],g=(g?g.children:[]).filter(function(F){return F!=`
`}),y=Xo(f,"style"),f=Xo(f,"region"),w=[];for(var j=C(f),U=j.next();!U.done;U=j.next())(U=ise(this,U.value,y,L))&&w.push(U);if(Yt(u,"p").length)throw new oe(2,2,2001,"<p> can only be inside <div> in TTML");for(L=C(Yt(u,"div")),j=L.next();!j.done;j=L.next())if(Yt(j.value,"span").length)throw new oe(2,2,2001,"<span> can only be inside <p> in TTML");return(n=Z6(this,u,n,p,g,y,f,w,I,b,null,!1,s,a))&&(n.backgroundColor||(n.backgroundColor="transparent"),e.push(n)),e};function Z6(e,n,s,a,u,f,p,g,y,w,b,I,L,j){var U=b;if(Ay(n)){if(!I)return null;var F={tagName:"span",children:[Bn(n)],attributes:{},parent:null}}else F=n;for(var B=null,q=C(uj),G=q.next();!G.done&&!(B=$x(F,"backgroundImage",u,"#",G.value)[0]);G=q.next());q=null,G=Ia(F,uj,"backgroundImage");var z=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(G&&z.test(G)){if(q=parseInt(G.split(":").pop(),10)-1,q>=j.length)return null;q=j[q]}else L&&G&&!G.startsWith("#")&&(z=new Cn(L),G=new Cn(G),(G=z.resolve(G).toString())&&(q=G));if((n.tagName=="p"||B||q)&&(I=!0),n=I,G=(F.attributes["xml:space"]||(y?"default":"preserve"))=="default",z=F.children.every(Ay),y=[],!z)for(var J=C(F.children),ie=J.next();!ie.done;ie=J.next())(ie=Z6(e,ie.value,s,a,u,f,p,g,G,w,F,I,L,j))&&y.push(ie);if(u=b!=null,L=Bn(F),L=F.children.length&&L&&/\S/.test(L),J=F.attributes.begin||F.attributes.end||F.attributes.dur,!(J||L||F.tagName=="br"||y.length!=0||u&&!G))return null;for(j=nj(F,a),L=j.start,j=j.end;U&&U.tagName&&U.tagName!="tt";)j=ose(U,a,L,j),L=j.start,j=j.end,U=U.parent;if(L==null&&(L=0),L+=s.periodStart,j=j==null?1/0:j+s.periodStart,e.g!=="HLS"&&(L=Math.max(L,s.segmentStart),j=Math.min(j,s.segmentEnd)),!J&&y.length>0)for(L=1/0,j=0,s=C(y),a=s.next();!a.done;a=s.next())a=a.value,L=Math.min(L,a.startTime),j=Math.max(j,a.endTime);if(F.tagName=="br")return e=new cn(L,j,""),e.lineBreak=!0,e;if(s="",z&&(s=yi(Bn(F)||""),G&&(s=s.replace(/\s+/g," "))),s=new cn(L,j,s),s.nestedCues=y,I||(s.isContainer=!0),w&&(s.cellResolution=w),w=$x(F,"region",p,"")[0],F.attributes.region&&w&&w.attributes["xml:id"]){var Y=w.attributes["xml:id"];s.region=g.filter(function(ne){return ne.id==Y})[0]}return g=w,b&&u&&!F.attributes.region&&!F.attributes.style&&(g=$x(b,"region",p,"")[0]),sse(e,s,F,g,B,q,f,n,y.length==0),s}function ise(e,n,s,a){var u=new ld,f=n.attributes["xml:id"];if(!f)return null;u.id=f,f=null,a&&(f=kI.exec(a)||_I.exec(a)),a=f?Number(f[1]):null,f=f?Number(f[2]):null;var p,g=Bx(e,n,s,"extent");if(g){var y=(p=kI.exec(g))||_I.exec(g);y!=null&&(u.width=Number(y[1]),u.height=Number(y[2]),p||(a!=null&&(u.width=u.width*100/a),f!=null&&(u.height=u.height*100/f)),u.widthUnits=p||a!=null?Zi:0,u.heightUnits=p||f!=null?Zi:0)}return(e=Bx(e,n,s,"origin"))&&(y=(p=kI.exec(e))||_I.exec(e),y!=null&&(u.viewportAnchorX=Number(y[1]),u.viewportAnchorY=Number(y[2]),p?g||(u.width=100-u.viewportAnchorX,u.widthUnits=Zi,u.height=100-u.viewportAnchorY,u.heightUnits=Zi):(f!=null&&(u.viewportAnchorY=u.viewportAnchorY*100/f),a!=null&&(u.viewportAnchorX=u.viewportAnchorX*100/a)),u.viewportAnchorUnits=p||a!=null?Zi:0)),u}function bI(e){var n=e.match(/rgba\(([^)]+)\)/);return n&&(n=n[1].split(","),n.length==4)?(n[3]=String(Number(n[3])/255),"rgba("+n.join(",")+")"):e}function sse(e,n,s,a,u,f,p,g,y){if(g=g||y,ei(e,s,a,p,"direction",g)=="rtl"&&(n.direction="rtl"),y=ei(e,s,a,p,"writingMode",g),y=="tb"||y=="tblr"?n.writingMode="vertical-lr":y=="tbrl"?n.writingMode="vertical-rl":y=="rltb"||y=="rl"?n.direction="rtl":y&&(n.direction=Gm),(y=ei(e,s,a,p,"textAlign",!0))?(n.positionAlign=dse.get(y),n.lineAlign=cse.get(y),n.textAlign=hb[y.toUpperCase()]):n.textAlign=_a,(y=ei(e,s,a,p,"displayAlign",!0))&&(n.displayAlign=YD[y.toUpperCase()]),(y=ei(e,s,a,p,"color",g))&&(n.color=bI(y)),(y=ei(e,s,a,p,"backgroundColor",g))&&(n.backgroundColor=bI(y)),(y=ei(e,s,a,p,"border",g))&&(n.border=y),y=ei(e,s,a,p,"fontFamily",g))switch(y){case"monospaceSerif":n.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":n.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":n.fontFamily="sans-serif";break;case"monospaceSansSerif":n.fontFamily="Consolas,monospace";break;case"proportionalSerif":n.fontFamily="serif";break;default:n.fontFamily=y.split(",").filter(function(w){return w!="default"}).join(",")}switch((y=ei(e,s,a,p,"fontWeight",g))&&y=="bold"&&(n.fontWeight=Gh),y=ei(e,s,a,p,"wrapOption",g),n.wrapLine=!(y&&y=="noWrap"),(y=ei(e,s,a,p,"lineHeight",g))&&y.match(Lf)&&(n.lineHeight=y),(y=ei(e,s,a,p,"fontSize",g))&&(y.match(Lf)||y.match(use))&&(n.fontSize=y),(y=ei(e,s,a,p,"fontStyle",g))&&(n.fontStyle=ZD[y.toUpperCase()]),u?(f=u.attributes.imageType||u.attributes.imagetype,y=u.attributes.encoding,u=Bn(u).trim(),f=="PNG"&&y=="Base64"&&u&&(n.backgroundImage="data:image/png;base64,"+u)):f&&(n.backgroundImage=f),(u=ei(e,s,a,p,"textOutline",g))&&(u=u.split(" "),u[0].match(Lf)?n.textStrokeColor=n.color:(n.textStrokeColor=bI(u[0]),u.shift()),u[0]&&u[0].match(Lf)?n.textStrokeWidth=u[0]:n.textStrokeColor=""),(u=ei(e,s,a,p,"letterSpacing",g))&&u.match(Lf)&&(n.letterSpacing=u),(u=ei(e,s,a,p,"linePadding",g))&&u.match(Lf)&&(n.linePadding=u),(u=ei(e,s,a,p,"opacity",g))&&(n.opacity=parseFloat(u)),(u=Bx(e,a,p,"textDecoration"))&&ej(n,u),(u=AI(e,s,p,"textDecoration"))&&ej(n,u),(u=ei(e,s,a,p,"textCombine",g))&&(n.textCombineUpright=u),ei(e,s,a,p,"ruby",g)){case"container":n.rubyTag="ruby";break;case"text":n.rubyTag="rt"}}function ej(e,n){n=C(n.split(" "));for(var s=n.next();!s.done;s=n.next())switch(s.value){case"underline":e.textDecoration.includes(xl)||e.textDecoration.push(xl);break;case"noUnderline":e.textDecoration.includes(xl)&&wo(e.textDecoration,xl);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&wo(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&wo(e.textDecoration,"overline")}}function ei(e,n,s,a,u,f){return f=f===void 0?!0:f,(n=AI(e,n,a,u))?n:f?Bx(e,s,a,u):null}function Bx(e,n,s,a){if(!n)return null;var u=Ia(n,Vx,a);return u||tj(e,n,s,a)}function AI(e,n,s,a){var u=Ia(n,Vx,a);return u||tj(e,n,s,a)}function tj(e,n,s,a){n=$x(n,"style",s,"");for(var u=null,f=0;f<n.length;f++){var p=vl(n[f],"urn:ebu:tt:style",a);p||(p=Ia(n[f],Vx,a)),p||(p=AI(e,n[f],s,a)),p&&(u=p)}return u}function $x(e,n,s,a,u){var f=[];if(!e||s.length<1)return f;var p=e;for(e=null;!e&&!(e=u?vl(p,u,n):p.attributes[n])&&(p=p.parent,p););if(n=e){for(n=C(n.split(" ")),u=n.next();!u.done;u=n.next())for(u=u.value,e=C(s),p=e.next();!p.done;p=e.next())if(p=p.value,a+p.attributes["xml:id"]==u){f.push(p);break}}return f}function ose(e,n,s,a){return e=nj(e,n),s==null?s=e.start:e.start!=null&&(s+=e.start),a==null?a=e.end:e.start!=null&&(a+=e.start),{start:s,end:a}}function nj(e,n){var s=II(e.attributes.begin,n),a=II(e.attributes.end,n);return e=II(e.attributes.dur,n),a==null&&e!=null&&(a=s+e),{start:s,end:a}}function II(e,n){var s=null;if(rj.test(e)){e=rj.exec(e),s=Number(e[1]);var a=Number(e[2]),u=Number(e[3]),f=Number(e[4]);f+=(Number(e[5])||0)/n.h,u+=f/n.frameRate,s=u+a*60+s*3600}else if(ij.test(e))s=CI(ij,e);else if(sj.test(e))s=CI(sj,e);else if(oj.test(e))e=oj.exec(e),s=Number(e[1])/n.frameRate;else if(aj.test(e))e=aj.exec(e),s=Number(e[1])/n.g;else if(lj.test(e))s=CI(lj,e);else if(e)throw new oe(2,2,2001,"Could not parse cue time range in TTML");return s}function CI(e,n){return e=e.exec(n),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+(Number(e[2])||0)*60+(Number(e[1])||0)*3600}function ase(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}xe("shaka.text.TtmlTextParser",ss),ss.prototype.parseMedia=ss.prototype.parseMedia,ss.prototype.setManifestType=ss.prototype.setManifestType,ss.prototype.setSequenceMode=ss.prototype.setSequenceMode,ss.prototype.parseInit=ss.prototype.parseInit;function lse(e,n,s,a){this.frameRate=Number(e)||30,this.h=Number(n)||1,this.g=Number(a),this.g==0&&(this.g=e?this.frameRate*this.h:1),s&&(e=/^(\d+) (\d+)$/g.exec(s))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var kI=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,use=/^(\d{1,4}(?:\.\d+)?|100)%$/,Lf=/^(\d+px|\d+em|\d*\.?\d+c)$/,_I=/^(\d+)px (\d+)px$/,rj=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ij=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,sj=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,oj=/^(\d*(?:\.\d*)?)f$/,aj=/^(\d*(?:\.\d*)?)t$/,lj=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),cse=new Map().set("left",hd).set("center","center").set("right","end").set("start",hd).set("end","end"),dse=new Map().set("left","line-left").set("center","center").set("right","line-right"),t0=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Vx=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],uj=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Ur("application/ttml+xml",function(){return new ss});function or(){this.g=new ss}or.prototype.parseInit=function(e){var n=!1;if(new Jt().box("moov",ft).box("trak",ft).box("mdia",ft).box("minf",ft).box("stbl",ft).X("stsd",Al).box("stpp",function(s){n=!0,s.parser.stop()}).parse(e),!n)throw new oe(2,2,2007)},or.prototype.setSequenceMode=function(e){this.g.setSequenceMode(e)},or.prototype.setManifestType=function(e){this.g.setManifestType(e)},or.prototype.parseMedia=function(e,n,s){var a=[],u=null,f=[],p=new Map,g=[];if(new Jt().box("moof",ft).box("traf",ft).X("tfhd",function(q){u=Wy(q.reader,q.flags).re}).X("trun",function(q){q=Qy(q.reader,q.version,q.flags),q=C(q.ci);for(var G=q.next();!G.done;G=q.next())g.push(G.value.sampleSize||u||0)}).X("subs",function(q){for(var G=q.reader,z=G.$(),J=-1,ie=0;ie<z;ie++){var Y=G.$();J+=Y,Y=G.Ia();for(var ne=[],Z=0;Z<Y;Z++)q.version==1?ne.push(G.$()):ne.push(G.Ia()),G.ba(),G.ba(),G.$();p.set(J,ne)}}).box("mdat",gd(function(q){f.push(q)},!1)).parse(e,!1),f.length==0)throw new oe(2,2,2007);for(var y=Hn.apply(Wr,K(f)),w=0,b=0;b<g.length;b++){var I=nt(y,w,g[b]);w+=g[b];var L=p.get(b);if(L&&L.length){I=nt(I,0,L[0]);for(var j=[],U=L[0],F=1;F<L.length;F++){var B=nt(e,U,L[F]);B=xy(B),j.push("data:image/png;base64,"+B),U+=L[F]}a=a.concat(this.g.parseMedia(I,n,s,j))}else a=a.concat(this.g.parseMedia(I,n,s,[]))}return a},xe("shaka.text.Mp4TtmlParser",or),or.prototype.parseMedia=or.prototype.parseMedia,or.prototype.setManifestType=or.prototype.setManifestType,or.prototype.setSequenceMode=or.prototype.setSequenceMode,or.prototype.parseInit=or.prototype.parseInit,Ur('application/mp4; codecs="stpp"',function(){return new or}),Ur('application/mp4; codecs="stpp.ttml"',function(){return new or}),Ur('application/mp4; codecs="stpp.ttml.im1i"',function(){return new or}),Ur('application/mp4; codecs="stpp.ttml.im1t"',function(){return new or}),Ur('application/mp4; codecs="stpp.ttml.im2i"',function(){return new or}),Ur('application/mp4; codecs="stpp.ttml.im2t"',function(){return new or}),Ur('application/mp4; codecs="stpp.ttml.etd1"',function(){return new or}),Ur('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new or}),Ur('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new or}),Ur('application/mp4; codecs="stpp.TTML.im1t"',function(){return new or});function Ei(){this.g="UNKNOWN"}Ei.prototype.parseInit=function(){},Ei.prototype.setSequenceMode=function(){},Ei.prototype.setManifestType=function(e){this.g=e},Ei.prototype.parseMedia=function(e,n){e=yn(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var s=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(s[0]))throw new oe(2,2,2e3);if(e=n.vttOffset,this.g=="HLS"&&s[0].includes("X-TIMESTAMP-MAP")){var a=s[0];if(e=a.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=a.match(/MPEGTS:(\d+)/m),!e||!a)throw new oe(2,2,2e3);if(e=Vh(e[1]),e==null)throw new oe(2,2,2e3);a=Number(a[1]);for(var u=n.segmentStart-n.periodStart;u>=95443.7176888889;)u-=95443.7176888889,a+=8589934592;e=n.periodStart+a/9e4-e}for(n=[],a=C(s[0].split(`
`)),u=a.next();!u.done;u=a.next())if(u=u.value,/^Region:/.test(u)){u=new Bh(u);var f=new ld;ud(u),$h(u);for(var p=ud(u);p;){var g=f,y=p;(p=/^id=(.*)$/.exec(y))?g.id=p[1]:(p=/^width=(\d{1,2}|100)%$/.exec(y))?g.width=Number(p[1]):(p=/^lines=(\d+)$/.exec(y))?(g.height=Number(p[1]),g.heightUnits=2):(p=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(y))?(g.regionAnchorX=Number(p[1]),g.regionAnchorY=Number(p[2])):(p=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(y))?(g.viewportAnchorX=Number(p[1]),g.viewportAnchorY=Number(p[2])):/^scroll=up$/.exec(y)&&(g.scroll="up"),$h(u),p=ud(u)}n.push(f)}for(a=new Map,zD(a),u=[],s=C(s.slice(1)),f=s.next();!f.done;f=s.next()){if(f=f.value.split(`
`),(f.length!=1||f[0])&&!/^NOTE($|[ \t])/.test(f[0])&&f[0]=="STYLE"){for(g=[],p=-1,y=1;y<f.length;y++)f[y].includes("::cue")&&(g.push([]),p=g.length-1),p!=-1&&(g[p].push(f[y]),f[y].includes("}")&&(p=-1));for(g=C(g),p=g.next();!p.done;p=g.next()){var w=p.value;p="global",(y=w[0].match(/\((.*)\)/))&&(p=y.pop()),y=w.slice(1,-1),w[0].includes("}")&&(w=/\{(.*?)\}/.exec(w[0]))&&(y=w[1].split(";")),(w=a.get(p))||(w=new cn(0,0,""));for(var b=!1,I=0;I<y.length;I++){var L=/^\s*([^:]+):\s*(.*)/.exec(y[I]);if(L){var j=L[2].trim().replace(";","");switch(L[1].trim()){case"background-color":case"background":b=!0,w.backgroundColor=j;break;case"color":b=!0,w.color=j;break;case"font-family":b=!0,w.fontFamily=j;break;case"font-size":b=!0,w.fontSize=j;break;case"font-weight":(parseInt(j,10)>=700||j=="bold")&&(b=!0,w.fontWeight=Gh);break;case"font-style":switch(j){case"normal":b=!0,w.fontStyle=pb;break;case"italic":b=!0,w.fontStyle=Hh;break;case"oblique":b=!0,w.fontStyle="oblique"}break;case"opacity":b=!0,w.opacity=parseFloat(j);break;case"text-combine-upright":b=!0,w.textCombineUpright=j;break;case"text-shadow":b=!0,w.textShadow=j;break;case"white-space":b=!0,w.wrapLine=j!="noWrap"}}}b&&a.set(p,w)}}if(w=f,b=e,w.length==1&&!w[0]||/^NOTE($|[ \t])/.test(w[0])||w[0]=="STYLE"||w[0]=="REGION")f=null;else if(f=null,w[0].includes("-->")||(f=w[0],w.splice(0,1)),g=new Bh(w[0]),p=Fm(g),I=bu(g,/[ \t]+--\x3e[ \t]+/g),y=Fm(g),p==null||I==null||y==null)$e("Failed to parse VTT time code. Cue skipped:",f,w),f=null;else{for(p+=b,y+=b,p<0&&(p=0),b=w.slice(1).join(`
`).trim(),a.has("global")?(w=a.get("global").clone(),w.startTime=p,w.endTime=y,w.payload=b):w=new cn(p,y,b),$h(g),p=ud(g);p;)cj(w,p,n),$h(g),p=ud(g);Ly(w,a),f!=null&&(w.id=f),f=w}f&&u.push(f)}return u};function cj(e,n,s){var a;(a=/^align:(start|middle|center|end|left|right)$/.exec(n))?(n=a[1],n=="middle"?e.textAlign=_a:e.textAlign=hb[n.toUpperCase()]):(a=/^vertical:(lr|rl)$/.exec(n))?e.writingMode=a[1]=="lr"?"vertical-lr":"vertical-rl":(a=/^size:([\d.]+)%$/.exec(n))?e.size=Number(a[1]):(a=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(n))?(e.position=Number(a[1]),a[2]&&(n=a[2],e.positionAlign=n=="line-left"||n=="start"?"line-left":n=="line-right"||n=="end"?"line-right":n=="center"||n=="middle"?"center":Py)):(a=/^region:(.*)$/.exec(n))?(n=hse(s,a[1]))&&(e.region=n):(s=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(n))?(e.lineInterpretation=1,e.line=Number(s[1]),s[2]&&(e.lineAlign=fb[s[2].toUpperCase()])):(s=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(n))&&(e.lineInterpretation=Hm,e.line=Number(s[1]),s[2]&&(e.lineAlign=fb[s[2].toUpperCase()]))}function hse(e,n){return e=e.filter(function(s){return s.id==n}),e.length?e[0]:null}xe("shaka.text.VttTextParser",Ei),Ei.prototype.parseMedia=Ei.prototype.parseMedia,Ei.prototype.setManifestType=Ei.prototype.setManifestType,Ei.prototype.setSequenceMode=Ei.prototype.setSequenceMode,Ei.prototype.parseInit=Ei.prototype.parseInit,Ur("text/vtt",function(){return new Ei}),Ur('text/vtt; codecs="vtt"',function(){return new Ei}),Ur('text/vtt; codecs="wvtt"',function(){return new Ei});function Ss(){this.g=null}Ss.prototype.parseInit=function(e){var n=this,s=!1;if(new Jt().box("moov",ft).box("trak",ft).box("mdia",ft).X("mdhd",function(a){a=Xy(a.reader,a.version),n.g=a.timescale}).box("minf",ft).box("stbl",ft).X("stsd",Al).box("wvtt",function(){s=!0}).parse(e),!this.g)throw new oe(2,2,2008);if(!s)throw new oe(2,2,2008)},Ss.prototype.setSequenceMode=function(){},Ss.prototype.setManifestType=function(){},Ss.prototype.parseMedia=function(e,n){if(!e.length)return[];if(!this.g)throw new oe(2,2,2008);var s=0,a=[],u,f=[],p=!1,g=!1,y=!1,w=null;if(new Jt().box("moof",ft).box("traf",ft).X("tfdt",function(z){p=!0,s=Yy(z.reader,z.version).baseMediaDecodeTime}).X("tfhd",function(z){w=Wy(z.reader,z.flags).qe}).X("trun",function(z){g=!0,a=Qy(z.reader,z.version,z.flags).ci}).box("mdat",gd(function(z){y=!0,u=z},!1)).parse(e,!1),!y&&!p&&!g)throw new oe(2,2,2008);e=s;for(var b=new dn(u,0),I=C(a),L=I.next();!L.done;L=I.next()){L=L.value;var j=L.di||w,U=L.hg?s+L.hg:e;e=U+(j||0);var F=0;do{var B=b.$();F+=B;var q=b.$(),G=null;qy(q)=="vttc"?B>8&&(G=b.bc(B-8,!1)):b.skip(B-8),j&&G&&(B=fse(G,n.periodStart+U/this.g,n.periodStart+e/this.g),f.push(B))}while(L.sampleSize&&F<L.sampleSize)}return f.filter(_u)};function fse(e,n,s){var a,u,f;return new Jt().box("payl",gd(function(p){a=yn(p)},!1)).box("iden",gd(function(p){u=yn(p)},!1)).box("sttg",gd(function(p){f=yn(p)},!1)).parse(e),a?pse(a,u,f,n,s):null}function pse(e,n,s,a,u){if(e=new cn(a,u,e),Ly(e),n&&(e.id=n),s)for(n=new Bh(s),s=ud(n);s;)cj(e,s,[]),$h(n),s=ud(n);return e}xe("shaka.text.Mp4VttParser",Ss),Ss.prototype.parseMedia=Ss.prototype.parseMedia,Ss.prototype.setManifestType=Ss.prototype.setManifestType,Ss.prototype.setSequenceMode=Ss.prototype.setSequenceMode,Ss.prototype.parseInit=Ss.prototype.parseInit,Ur('application/mp4; codecs="wvtt"',function(){return new Ss});function ws(){}ws.prototype.parseInit=function(){},ws.prototype.setSequenceMode=function(){},ws.prototype.setManifestType=function(){},ws.prototype.parseMedia=function(e){var n=yn(e).replace(/\r+/g,"");if(n=n.trim(),e=[],n=="")return e;n=C(n.split(`

`));for(var s=n.next();!s.done;s=n.next()){s=s.value.split(`
`);var a=new Bh(s[0]),u=Fm(a),f=bu(a,/,/g);if(a=Fm(a),u==null||f==null||a==null)throw new oe(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new cn(u,a,s.slice(1).join(`
`).trim()))}return e},xe("shaka.text.SbvTextParser",ws),ws.prototype.parseMedia=ws.prototype.parseMedia,ws.prototype.setManifestType=ws.prototype.setManifestType,ws.prototype.setSequenceMode=ws.prototype.setSequenceMode,ws.prototype.parseInit=ws.prototype.parseInit,Ur("text/x-subviewer",function(){return new ws});function Es(){this.g=new Ei}Es.prototype.parseInit=function(){},Es.prototype.setSequenceMode=function(){},Es.prototype.setManifestType=function(){},Es.prototype.parseMedia=function(e,n,s){var a=yn(e);if(e=`WEBVTT

`,a!=""){a=a.replace(/\r+/g,""),a=a.trim(),a=C(a.split(`

`));for(var u=a.next();!u.done;u=a.next())u=u.value.split(/\n/),u[0].match(/\d+/)&&u.shift(),u[0]=u[0].replace(/,/g,"."),e+=u.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`}return e=nt(To(e)),this.g.parseMedia(e,n,s,[])},xe("shaka.text.SrtTextParser",Es),Es.prototype.parseMedia=Es.prototype.parseMedia,Es.prototype.setManifestType=Es.prototype.setManifestType,Es.prototype.setSequenceMode=Es.prototype.setSequenceMode,Es.prototype.parseInit=Es.prototype.parseInit,Ur("text/srt",function(){return new Es});function bs(){}bs.prototype.parseInit=function(){},bs.prototype.setSequenceMode=function(){},bs.prototype.setManifestType=function(){},bs.prototype.parseMedia=function(e){var n="",s="",a=null,u=null;for(u=yn(e).split(/\r?\n\s*\r?\n/),e=C(u),u=e.next();!u.done;u=e.next()){var f=u.value;u=f,(f=gse.exec(f))&&(a=f[1],u=f[2]),a=="V4 Styles"||a=="V4+ Styles"?(n=u,n=s?n+(`
`+u):u):a=="Events"&&(s=s?s+(`
`+u):u)}for(a=[],u=null,n=C(n.split(/\r?\n/)),e=n.next();!e.done;e=n.next())if(e=e.value,!/^\s*;/.test(e)&&(f=fj.exec(e))){if(e=f[1].trim(),f=f[2].trim(),e=="Format")u=f.split(Gx);else if(e=="Style"){e=f.split(Gx),f={};for(var p=0;p<u.length&&p<e.length;p++)f[u[p]]=e[p];a.push(f)}}for(u=[],n=null,s=C(s.split(/\r?\n/)),f=s.next(),e={};!f.done;e={Yj:void 0},f=s.next())if(f=f.value,!/^\s*;/.test(f)&&(p=fj.exec(f))){if(f=p[1].trim(),p=p[2].trim(),f=="Format")n=p.split(Gx);else if(f=="Dialogue"){p=p.split(Gx),f={};for(var g=0;g<n.length&&g<p.length;g++)f[n[g]]=p[g];g=hj(f.Start);var y=hj(f.End);p=new cn(g,y,p.slice(n.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.Yj=f.Style,(e=a.find(function(w){return function(b){return b.Name==w.Yj}}(e)))&&mse(p,e),u.push(p)}}return u};function mse(e,n){var s=n.Fontname;if(s&&(e.fontFamily=s),(s=n.Fontsize)&&(e.fontSize=s+"px"),(s=n.PrimaryColour)&&(s=dj(s))&&(e.color=s),(s=n.BackColour)&&(s=dj(s))&&(e.backgroundColor=s),n.Bold&&(e.fontWeight=Gh),n.Italic&&(e.fontStyle=Hh),n.Underline&&e.textDecoration.push(xl),(s=n.Spacing)&&(e.letterSpacing=s+"px"),s=n.Alignment)switch(parseInt(s,10)){case 1:e.displayAlign=Vm,e.textAlign="start";break;case 2:e.displayAlign=Vm,e.textAlign=_a;break;case 3:e.displayAlign=Vm,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=_a;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=_a;break;case 11:e.displayAlign="center",e.textAlign="end"}(n=n.AlphaLevel)&&(e.opacity=parseFloat(n))}function dj(e){return e=parseInt(e.replace("&H",""),16),e>=0?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function hj(e){return e=vse.exec(e),(e[1]?parseInt(e[1].replace(":",""),10):0)*3600+parseInt(e[2],10)*60+parseFloat(e[3])}xe("shaka.text.SsaTextParser",bs),bs.prototype.parseMedia=bs.prototype.parseMedia,bs.prototype.setManifestType=bs.prototype.setManifestType,bs.prototype.setSequenceMode=bs.prototype.setSequenceMode,bs.prototype.parseInit=bs.prototype.parseInit;var gse=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,fj=/^\s*([^:]+):\s*(.*)/,Gx=/\s*,\s*/,vse=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Ur("text/x-ssa",function(){return new bs});function pj(e,n){var s=e[n+1]&1?7:9;return n+s<=e.length&&(e=((e[n+3]&3)<<11|e[n+4]<<3|(e[n+5]&224)>>>5)-s,e>0)?{ye:s,za:e}:null}function mj(e,n){var s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=(e[n+2]&60)>>>2;if(a>s.length-1)return null;var u=((e[n+2]&192)>>>6)+1,f=(e[n+2]&1)<<2;return f|=(e[n+3]&192)>>>6,{sampleRate:s[a],channelCount:f,codec:"mp4a.40."+u}}function gj(e,n){if(n+1<e.length&&e[n]===255&&(e[n+1]&246)===240){var s=e[n+1]&1?7:9;if(n+s>=e.length)return!1;var a=(e[n+3]&3)<<11|e[n+4]<<3|(e[n+5]&224)>>>5;return a<=s?!1:(n+=a,n===e.length||n+1<e.length&&e[n]===255&&(e[n+1]&246)===240)}return!1}function yse(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2||n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function As(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=As.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?ui(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,n){return n.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Bi(n)||"mp4a.40.2")+'"':n},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,n,s,a){for(var u=nt(e),f=ef(u),p=f.length;p<u.length&&!gj(u,p);p++);if(e=s.endTime*1e3,f=Sd(f),f.length&&s&&(f=f.find(function(b){return b.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=f.data),f=mj(u,p),!f)return Promise.reject(new oe(2,3,3018,s?s.S()[0]:null));n.audioSamplingRate=f.sampleRate,n.channelsCount=f.channelCount;for(var g=[];p<u.length;){var y=pj(u,p);if(!y)return Promise.reject(new oe(2,3,3018,s?s.S()[0]:null));var w=y.ye+y.za;p+w<=u.length&&g.push({data:u.subarray(p+y.ye,p+w),size:y.za,duration:1024,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),p+=w}return u=f.sampleRate,e=Math.floor(e*u/1e3),a={id:n.id,type:"audio",codecs:f.codec,encrypted:n.encrypted&&n.drmInfos.length>0,timescale:u,duration:a,Gb:[],Ma:new Uint8Array([]),Ya:new Uint8Array([]),fb:0,gb:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Eb:g},stream:n},a=new Qh([a]),s=n.id+"_"+s.i,this.g.has(s)?n=this.g.get(s):(n=Jh(a),this.g.set(s,n)),s=this.i!==n,a=rg(a),this.i=n,this.h++,Promise.resolve({data:a,init:s?n:null})},xe("shaka.transmuxer.AacTransmuxer",As),As.prototype.transmux=As.prototype.transmux,As.prototype.getOriginalMimeType=As.prototype.getOriginalMimeType,As.prototype.convertCodecs=As.prototype.convertCodecs,As.prototype.isSupported=As.prototype.isSupported,As.prototype.destroy=As.prototype.destroy,Tl("audio/aac",function(){return new As("audio/aac")},Cu);function vj(e,n){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return null;var s=e[n+4]>>6;if(s>=3)return null;var a=e[n+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][a*3+s]*2;if(n+u>e.length)return null;var f=e[n+6]>>5,p=0;f===2?p+=2:(f&1&&f!==1&&(p+=2),f&4&&(p+=2)),p=(e[n+6]<<8|e[n+7])>>12-p&1;var g=e[n+5]&7;return e=new Uint8Array([s<<6|e[n+5]>>3<<1|g>>2,(g&3)<<6|f<<3|p<<2|a>>4,a<<4&224]),{sampleRate:[48e3,44100,32e3][s],channelCount:[2,1,2,3,3,4,4,5][f]+p,Ma:e,za:u}}function xse(e,n){if(e[n]===11&&e[n+1]===119){var s=0,a=5;n+=a;for(var u,f;a>0;){f=e[n];var p=Math.min(a,8),g=8-p;u=4278190080>>>24+g<<g,u=(f&u)>>g,s=s?s<<p|u:u,n+=1,a-=p}if(s<16)return!0}return!1}function zs(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=zs.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?ui(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,n){return n.toLowerCase().split(";")[0]=="audio/ac3"?ht().Le()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':n},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,n,s,a){e=nt(e);for(var u=ef(e),f=u.length;f<e.length&&!xse(e,f);f++);var p=s.endTime*1e3;u=Sd(u),u.length&&s&&(u=u.find(function(b){return b.description==="com.apple.streaming.transportStreamTimestamp"}))&&(p=u.data),u=0;for(var g=new Uint8Array([]),y=[];f<e.length;){var w=vj(e,f);if(!w)return Promise.reject(new oe(2,3,3018,s?s.S()[0]:null));n.audioSamplingRate=w.sampleRate,n.channelsCount=w.channelCount,u=w.sampleRate,g=w.Ma,y.push({data:e.subarray(f,f+w.za),size:w.za,duration:1536,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),f+=w.za}return e=Math.floor(p*u/1e3),a={id:n.id,type:"audio",codecs:"ac-3",encrypted:n.encrypted&&n.drmInfos.length>0,timescale:u,duration:a,Gb:[],Ma:g,Ya:new Uint8Array([]),fb:0,gb:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Eb:y},stream:n},a=new Qh([a]),s=n.id+"_"+s.i,this.g.has(s)?n=this.g.get(s):(n=Jh(a),this.g.set(s,n)),s=this.i!==n,a=rg(a),this.i=n,this.h++,Promise.resolve({data:a,init:s?n:null})},xe("shaka.transmuxer.Ac3Transmuxer",zs),zs.prototype.transmux=zs.prototype.transmux,zs.prototype.getOriginalMimeType=zs.prototype.getOriginalMimeType,zs.prototype.convertCodecs=zs.prototype.convertCodecs,zs.prototype.isSupported=zs.prototype.isSupported,zs.prototype.destroy=zs.prototype.destroy,Tl("audio/ac3",function(){return new zs("audio/ac3")},Cu);function yj(e,n){if(n+8>e.length||(e[n]<<8|e[n+1]<<0)!==2935)return null;var s=new kl(e.subarray(n+2));rs(s,2),rs(s,3);var a=bt(s,11)+1<<1,u=bt(s,2);if(u==3){u=bt(s,2),u=[24e3,22060,16e3][u];var f=3}else u=[48e3,44100,32e3][u],f=bt(s,2);var p=bt(s,3),g=bt(s,1);return s=bt(s,5),n+a>e.byteLength?null:(e=Math.floor(a*u/([1,2,3,6][f]*16)),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|s<<1|0,0|p<<1|g<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][p]+g,Ma:e,za:a})}function Ws(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=Ws.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?ui(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,n){return n.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':n},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,n,s,a){e=nt(e);for(var u=ef(e),f=u.length;f<e.length&&(e[f]<<8|e[f+1]<<0)!==2935;f++);var p=s.endTime*1e3;u=Sd(u),u.length&&s&&(u=u.find(function(b){return b.description==="com.apple.streaming.transportStreamTimestamp"}))&&(p=u.data),u=0;for(var g=new Uint8Array([]),y=[];f<e.length;){var w=yj(e,f);if(!w)return Promise.reject(new oe(2,3,3018,s?s.S()[0]:null));n.audioSamplingRate=w.sampleRate,n.channelsCount=w.channelCount,u=w.sampleRate,g=w.Ma,y.push({data:e.subarray(f,f+w.za),size:w.za,duration:1536,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),f+=w.za}return e=Math.floor(p*u/1e3),a={id:n.id,type:"audio",codecs:"ec-3",encrypted:n.encrypted&&n.drmInfos.length>0,timescale:u,duration:a,Gb:[],Ma:g,Ya:new Uint8Array([]),fb:0,gb:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Eb:y},stream:n},a=new Qh([a]),s=n.id+"_"+s.i,this.g.has(s)?n=this.g.get(s):(n=Jh(a),this.g.set(s,n)),s=this.i!==n,a=rg(a),this.i=n,this.h++,Promise.resolve({data:a,init:s?n:null})},xe("shaka.transmuxer.Ec3Transmuxer",Ws),Ws.prototype.transmux=Ws.prototype.transmux,Ws.prototype.getOriginalMimeType=Ws.prototype.getOriginalMimeType,Ws.prototype.convertCodecs=Ws.prototype.convertCodecs,Ws.prototype.isSupported=Ws.prototype.isSupported,Ws.prototype.destroy=Ws.prototype.destroy,Tl("audio/ec3",function(){return new Ws("audio/ec3")},Cu);function Tse(e){if(!e.length)return null;var n=e.find(function(F){return F.type==7});if(e=e.find(function(F){return F.type==8}),!n||!e)return null;var s=new kl(n.data),a=zt(s);if(zt(s),zt(s),Fr(s),wse.includes(a)&&(a=Fe(s),a===3&&rs(s,1),Fr(s),Fr(s),rs(s,1),ze(s))){a=a!==3?8:12;for(var u=0;u<a;u++)ze(s)&&(u<6?t1(s,16):t1(s,64))}if(Fr(s),a=Fe(s),a===0)Fe(s);else if(a===1)for(rs(s,1),Fr(s),Fr(s),a=Fe(s),u=0;u<a;u++)Fr(s);Fr(s),rs(s,1);var f=Fe(s),p=Fe(s),g=bt(s,1);g===0&&rs(s,1),rs(s,1);var y=0,w=0,b=0,I=0;if(ze(s)&&(y=Fe(s),w=Fe(s),b=Fe(s),I=Fe(s)),u=a=1,ze(s)&&ze(s)){var L=zt(s),j=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],U=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];L>0&&L<=16?(a=j[L-1],u=U[L-1]):L===255&&(a=bt(s,16),u=bt(s,16))}return s=(2-g)*(p+1)*16-b*2-I*2,f=(f+1)*16-y*2-w*2,y=[],n=n.fullData,y.push(n.byteLength>>>8&255),y.push(n.byteLength&255),y=y.concat.apply(y,K(n)),n=[],e=e.fullData,n.push(e.byteLength>>>8&255),n.push(e.byteLength&255),n=n.concat.apply(n,K(e)),e=new Uint8Array([1,y[3],y[4],y[5],255,225].concat(y,[1],n)),{height:s,width:f,Ya:e,fb:a,gb:u}}function Sse(e){function n(U){u={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:U.pts,dts:U.dts,nalus:[]}}function s(){if(u&&u.nalus.length&&u.frame){for(var U=[],F=C(u.nalus),B=F.next();!B.done;B=F.next()){B=B.value;var q=B.fullData.byteLength,G=new Uint8Array(4);G[0]=q>>24&255,G[1]=q>>16&255,G[2]=q>>8&255,G[3]=q&255,U.push(G),U.push(B.fullData)}u.data=Hn.apply(Wr,K(U)),a.push(u)}}for(var a=[],u=null,f=!1,p=0;p<e.length;p++){var g=e[p],y=g.nalus,w=!1;u&&y.length&&!f&&(s(),n(g)),y=C(g.nalus);for(var b=y.next();!b.done;b=y.next()){b=b.value;var I=!1;switch(b.type){case 1:var L=!1;I=!0;var j=b.data;w&&j.length>4&&(j=mJ(new kl(j)),j===2||j===4||j===7||j===9)&&(L=!0),L&&u&&u.frame&&!u.isKeyframe&&(s(),u=null),u||n(g),u.frame=!0,u.isKeyframe=L;break;case 5:I=!0,u&&u.frame&&!u.isKeyframe&&(s(),u=null),u||n(g),u.frame=!0,u.isKeyframe=!0;break;case 6:I=!0;break;case 7:w=I=!0;break;case 8:I=!0;break;case 9:f=I=!0,u&&u.frame&&(s(),u=null),u||n(g);break;case 12:I=!0;break;default:I=!1}u&&I&&u.nalus.push(b)}}return s(),a}var wse=[100,110,122,244,44,83,86,118,128,138,139,134];function Ese(e){if(!e.length)return null;var n=e.find(function(p){return p.type==32}),s=e.find(function(p){return p.type==33}),a=e.find(function(p){return p.type==34});if(!n||!s||!a)return null;var u=bse(n.fullData);e=Ase(s.fullData);var f=Ise(a.fullData);return n=Cse(n.fullData,s.fullData,a.fullData,{Qh:u.Qh,xi:u.xi,qh:e.qh,rh:e.rh,jh:e.jh,ph:e.ph,kh:e.kh,mh:e.mh,nh:e.nh,oh:e.oh,dh:e.dh,eh:e.eh,fh:e.fh,gh:e.gh,hh:e.hh,ih:e.ih,Sf:e.Sf,Sg:e.Sg,Og:e.Og,Ng:e.Ng,Sh:f.Sh,bh:e.bh,ah:e.ah}),{height:e.height,width:e.width,Ya:n,fb:e.qm,gb:e.pm}}function bse(e){var n=new kl(e,!0);return zt(n),zt(n),bt(n,4),bt(n,2),bt(n,6),e=bt(n,3),n=ze(n),{Qh:e+1,xi:n}}function Ase(e){e=new kl(e,!0),zt(e),zt(e);var n=0,s=0,a=0,u=0;bt(e,4);var f=bt(e,3);ze(e);for(var p=bt(e,2),g=bt(e,1),y=bt(e,5),w=zt(e),b=zt(e),I=zt(e),L=zt(e),j=zt(e),U=zt(e),F=zt(e),B=zt(e),q=zt(e),G=zt(e),z=zt(e),J=[],ie=[],Y=0;Y<f;Y++)J.push(ze(e)),ie.push(ze(e));if(f>0)for(Y=f;Y<8;Y++)bt(e,2);for(Y=0;Y<f;Y++)J[Y]&&bt(e,88),ie[Y]&&zt(e);Fe(e),J=Fe(e),J==3&&bt(e,1),ie=Fe(e),Y=Fe(e),ze(e)&&(n+=Fe(e),s+=Fe(e),a+=Fe(e),u+=Fe(e));var ne=Fe(e),Z=Fe(e),de=Fe(e);if(ze(e))for(var te=0;te<=f;te++)Fe(e),Fe(e),Fe(e);else Fe(e),Fe(e),Fe(e);if(Fe(e),Fe(e),Fe(e),Fe(e),Fe(e),Fe(e),ze(e)&&ze(e))for(te=0;te<4;te++)for(var ae=0;ae<(te===3?2:6);ae++)if(ze(e)){var he=Math.min(64,1<<4+(te<<1));te>1&&tf(e);for(var Ee=0;Ee<he;Ee++)tf(e)}else Fe(e);for(ze(e),ze(e),ze(e)&&(zt(e),Fe(e),Fe(e),ze(e)),te=Fe(e),he=ae=0;he<te;he++)if(Ee=!1,he!==0&&(Ee=ze(e)),Ee){he===te&&Fe(e),ze(e),Fe(e);for(var Te=Ee=0;Te<=ae;Te++){var ge=ze(e),ve=!1;ge||(ve=ze(e)),(ge||ve)&&Ee++}ae=Ee}else{for(Te=Fe(e),Ee=Fe(e),ae=Te+Ee,ge=0;ge<Te;ge++)Fe(e),ze(e);for(Te=0;Te<Ee;Te++)Fe(e),ze(e)}if(ze(e))for(te=Fe(e),ae=0;ae<te;ae++){for(he=0;he<de+4;he++)bt(e,1);bt(e,1)}if(te=de=1,ae=!0,he=1,Te=Ee=0,ze(e),ze(e),ze(e)){if(ze(e)){ge=zt(e),ve=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2];var Ie=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];ge>0&&ge<=16?(de=ve[ge-1],te=Ie[ge-1]):ge===255&&(de=bt(e,16),te=bt(e,16))}if(ze(e)&&ze(e),ze(e)&&(bt(e,3),ze(e),ze(e)&&(zt(e),zt(e),zt(e))),ze(e)&&(Fe(e),Fe(e)),ze(e),ze(e),ze(e),(ge=ze(e))&&(Fr(e),Fr(e),Fr(e),Fr(e)),ze(e)&&(he=bt(e,32),Ee=bt(e,32),ze(e)&&Fe(e),ze(e))){Ie=!1,ge=ze(e),ve=ze(e),(ge||ve)&&((Ie=ze(e))&&(zt(e),bt(e,5),ze(e),bt(e,5)),bt(e,4),bt(e,4),Ie&&bt(e,4),bt(e,5),bt(e,5),bt(e,5));for(var Le=0;Le<=f;Le++){ae=ze(e);var at=!0,je=1;ae||(at=ze(e));var Vt=!1;if(at?Fe(e):Vt=ze(e),Vt||(je=Fe(e)+1),ge){for(at=0;at<je;at++)Fe(e),Fe(e),Ie&&(Fe(e),Fe(e));ze(e)}if(ve){for(at=0;at<je;at++)Fe(e),Fe(e),Ie&&(Fe(e),Fe(e));ze(e)}}}ze(e)&&(ze(e),ze(e),ze(e),Te=Fe(e),Fe(e),Fe(e),Fe(e),Fe(e))}return{jh:z,qh:p,rh:g,ph:y,kh:w,mh:b,nh:I,oh:L,dh:j,eh:U,fh:F,gh:B,hh:q,ih:G,Sf:Te,Sg:J,Og:ne,Ng:Z,width:ie-(n+s)*(J===1||J===2?2:1),height:Y-(a+u)*(J===1?2:1),qm:de,pm:te,bh:Ee/he,ah:ae}}function Ise(e){var n=new kl(e,!0);zt(n),zt(n),Fe(n),Fe(n),ze(n),ze(n),bt(n,3),ze(n),ze(n),Fe(n),Fe(n),tf(n),ze(n),ze(n),ze(n)&&Fe(n),tf(n),tf(n),ze(n),ze(n),ze(n),ze(n),e=ze(n),n=ze(n);var s=1;return n&&e?s=0:n?s=3:e&&(s=2),{Sh:s}}function Cse(e,n,s,a){var u=new Uint8Array(23+(5+e.byteLength)+(5+n.byteLength)+(5+s.byteLength));for(u[0]=1,u[1]=(a.qh&3)<<6|(a.rh?1:0)<<5|a.ph&31,u[2]=a.kh,u[3]=a.mh,u[4]=a.nh,u[5]=a.oh,u[6]=a.dh,u[7]=a.eh,u[8]=a.fh,u[9]=a.gh,u[10]=a.hh,u[11]=a.ih,u[12]=a.jh,u[13]=240|(a.Sf&3840)>>8,u[14]=a.Sf&255,u[15]=252|a.Sh&3,u[16]=252|a.Sg&3,u[17]=248|a.Og&7,u[18]=248|a.Ng&7,u[19]=0,u[20]=parseInt(a.bh,10),u[21]=((a.ah?1:0)&3)<<6|(a.Qh&7)<<3|(a.xi?1:0)<<2|3,u[22]=3,e=[e,n,s],n=23,s=e.length-1,a=0;a<e.length;a+=1)u.set(new Uint8Array([32+a|(a===s?128:0),0,1]),n),n+=3,u.set(new Uint8Array([e[a].byteLength>>8,e[a].byteLength&255]),n),n+=2,u.set(e[a],n),n+=e[a].byteLength;return u}function Hx(e,n){var s=e[n+1]>>3&3,a=e[n+1]>>1&3,u=e[n+2]>>4&15,f=e[n+2]>>2&3;if(s!==1&&u!==0&&u!==15&&f!==3){var p=e[n+3]>>6;u=kse[(s===3?3-a:a===3?3:4)*14+u-1]*1e3,f=_se[(s===3?0:s===2?1:2)*3+f],s=Rse[s][a];var g=Lse[a],y=Math.floor(s*u/f+(e[n+2]>>1&1))*g,w=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(w=w?parseInt(w[1],10):0)&&w<=87&&a===2&&u>=224e3&&p===0&&(e[n+3]|=128),{sampleRate:f,channelCount:p===3?1:2,za:y,om:s*8*g}}return null}function xj(e,n){return e[n]===255&&(e[n+1]&224)===224&&(e[n+1]&6)!==0}function Tj(e,n){if(n+1<e.length&&xj(e,n)){var s=Hx(e,n),a=4;return s&&s.za&&(a=s.za),n+=a,n===e.length||n+1<e.length&&xj(e,n)}return!1}var kse=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],_se=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Rse=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Lse=[0,1,1,4];function Ys(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=Ys.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?ui(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,n){return n.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':n},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,n,s,a){for(var u=nt(e),f=ef(u).length;f<u.length&&!Tj(u,f);f++);var p;for(e=[];f<u.length;){var g=Hx(u,f);if(!g)return Promise.reject(new oe(2,3,3018,s?s.S()[0]:null));p||(p=g),f+g.za<=u.length&&e.push({data:u.subarray(f,f+g.za),size:g.za,duration:1152,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),f+=g.za}return p?(u=p.om*9e4/p.sampleRate*this.h,a={id:n.id,type:"audio",codecs:"mp3",encrypted:n.encrypted&&n.drmInfos.length>0,timescale:p.sampleRate,duration:a,Gb:[],Ma:new Uint8Array([]),Ya:new Uint8Array([]),fb:0,gb:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:u,Eb:e},stream:n},a=new Qh([a]),s=n.id+"_"+s.i,this.g.has(s)?n=this.g.get(s):(n=Jh(a),this.g.set(s,n)),s=this.i!==n,a=rg(a),this.i=n,this.h++,Promise.resolve({data:a,init:s?n:null})):Promise.reject(new oe(2,3,3018,s?s.S()[0]:null))},xe("shaka.transmuxer.Mp3Transmuxer",Ys),Ys.prototype.transmux=Ys.prototype.transmux,Ys.prototype.getOriginalMimeType=Ys.prototype.getOriginalMimeType,Ys.prototype.convertCodecs=Ys.prototype.convertCodecs,Ys.prototype.isSupported=Ys.prototype.isSupported,Ys.prototype.destroy=Ys.prototype.destroy,Tl("audio/mpeg",function(){return new Ys("audio/mpeg")},Cu);function Xs(e){this.h=e,this.g=null}d=Xs.prototype,d.destroy=function(){},d.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=Bi(e).split(","),s=Fi("audio",n);return n=Fi("video",n),!s||n||Dn(s)!="mp3"?!1:ui(this.convertCodecs("audio",e))},d.convertCodecs=function(e,n){return n.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":n},d.getOriginalMimeType=function(){return this.h},d.transmux=function(e,n,s,a,u){if(this.g?this.g.clearData():this.g=new un,this.g.lg(s.i),e=nt(e),e=this.g.parse(e),e.se().audio!="mp3"||u!="audio")return Promise.reject(new oe(2,3,3018,s?s.S()[0]:null));for(s=new Uint8Array([]),u=C(e.Bb()),e=u.next();!e.done;e=u.next())if(e=e.value.data)for(n=0;n<e.length;)(a=Hx(e,n))?(n+a.za<=e.length&&(s=Hn(s,e.subarray(n,n+a.za))),n+=a.za):n++;return Promise.resolve(s)},xe("shaka.transmuxer.MpegTsTransmuxer",Xs),Xs.prototype.transmux=Xs.prototype.transmux,Xs.prototype.getOriginalMimeType=Xs.prototype.getOriginalMimeType,Xs.prototype.convertCodecs=Xs.prototype.convertCodecs,Xs.prototype.isSupported=Xs.prototype.isSupported,Xs.prototype.destroy=Xs.prototype.destroy,Tl("video/mp2t",function(){return new Xs("video/mp2t")},gb);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Is(e){this.h=e,(this.g=AA.get("ISOBoxer")())&&Pse(this)}function Pse(e){function n(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(s){this._procEntryField(s,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(s,"NumberOfEntries","uint",16),this._procSubEntries(s,"clearAndCryptedData",s.NumberOfEntries,function(a){this._procEntryField(a,"BytesOfClearData","uint",16),this._procEntryField(a,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",n),e.g.addBoxProcessor("uuid",function(){for(var s=!0,a=0;a<16;a++)this.usertype[a]!==Dse[a]&&(s=!1);s&&(this._parsing&&(this.type="sepiff"),n.call(this))})}d=Is.prototype,d.destroy=function(){},d.isSupported=function(e,n){var s=e.startsWith("mss/");return!this.g||!s?!1:n?ui(this.convertCodecs(n,e)):(n=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ui(n)||ui(e))},d.convertCodecs=function(e,n){return n.replace("mss/","")},d.getOriginalMimeType=function(){return this.h},d.transmux=function(e,n,s){if(!s)return Promise.resolve(nt(e));if(!n.mssPrivateData)return Promise.reject(new oe(2,3,3020,s?s.S()[0]:null));try{var a,u=this.g.parseBuffer(e),f=u.fetch("tfhd");f.track_ID=n.id+1;var p=u.fetch("tfdt"),g=u.fetch("traf");p===null&&(p=this.g.createFullBox("tfdt",g,f),p.version=1,p.flags=0,p.baseMediaDecodeTime=Math.floor(s.startTime*n.mssPrivateData.timescale));var y=u.fetch("trun"),w=u.fetch("tfxd");w&&w._parent.boxes.splice(w._parent.boxes.indexOf(w),1);var b=u.fetch("tfrf");b&&b._parent.boxes.splice(b._parent.boxes.indexOf(b),1);var I=u.fetch("sepiff");if(I!==null){I.type="senc",I.usertype=void 0;var L=u.fetch("saio");if(L===null){L=this.g.createFullBox("saio",g),L.version=0,L.flags=0,L.entry_count=1,L.offset=[0];var j=this.g.createFullBox("saiz",g);if(j.version=0,j.flags=0,j.sample_count=I.sample_count,j.default_sample_info_size=0,j.sample_info_size=[],I.flags&2)for(a=0;a<I.sample_count;a+=1)j.sample_info_size[a]=10+6*I.entry[a].NumberOfEntries;else j.default_sample_info_size=8}}f.flags&=16777214,f.flags|=131072,y.flags|=1;var U=u.fetch("moof");y.data_offset=U.getLength()+8;var F=u.fetch("saio");F!==null&&(F.offset[0]=Sj(U,"traf")+Sj(g,"senc")+16);var B=nt(u.write());return Promise.resolve(B)}catch(q){return q instanceof oe?Promise.reject(q):Promise.reject(new oe(2,3,3022,s?s.S()[0]:null))}};function Sj(e,n){for(var s=8,a=0;a<e.boxes.length&&e.boxes[a].type!==n;a++)s+=e.boxes[a].size;return s}xe("shaka.transmuxer.MssTransmuxer",Is),Is.prototype.transmux=Is.prototype.transmux,Is.prototype.getOriginalMimeType=Is.prototype.getOriginalMimeType,Is.prototype.convertCodecs=Is.prototype.convertCodecs,Is.prototype.isSupported=Is.prototype.isSupported,Is.prototype.destroy=Is.prototype.destroy;var Dse=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Tl("mss/audio/mp4",function(){return new Is("mss/audio/mp4")},Cu),Tl("mss/video/mp4",function(){return new Is("mss/video/mp4")},Cu);function Qs(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}d=Qs.prototype,d.destroy=function(){this.j.clear(),this.i&&this.i.destroy()},d.isSupported=function(e,n){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var s=e;n&&(s=this.convertCodecs(n,e));var a=Bi(s).split(",");return s=Fi("audio",a),a=Fi("video",a),s&&(s=Dn(s),!Nse.includes(s))||a&&(s=Dn(a),!Mse.includes(s))?!1:n?ui(this.convertCodecs(n,e)):(n=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ui(n)||ui(e))},d.convertCodecs=function(e,n){return n.toLowerCase().split(";")[0]=="video/mp2t"?(n=Bi(n).replace("mp4a.40.34","mp3").split(",").map(function(s){return Xm(s,"audio/mp4")}).map(c3).join(","),e=="audio"?'audio/mp4; codecs="'+n+'"':'video/mp4; codecs="'+n+'"'):n},d.getOriginalMimeType=function(){return this.m},d.transmux=function(e,n,s,a,u){var f=nt(e);if(u=="audio"&&!nf(f)){for(var p=ef(f),g=p.length;g<f.length;g++)if(Tj(f,g))return Promise.reject(new oe(2,3,3018,s?s.S()[0]:null));for(g=p.length;g<f.length;g++)if(gj(f,g))return this.i||(this.i=new As("audio/aac")),this.i.transmux(e,n,s,a,u);return Promise.reject(new oe(2,3,3018,s?s.S()[0]:null))}this.h?this.h.clearData():this.h=new un,this.h.lg(s.i);var y=this.h.parse(f),w=[],b=y.se();try{var I=null;if(u=="video"){switch(b.video){case"avc":var L=[],j=null,U=y.Kd(),F=Sse(U);if(!F.length)throw new oe(2,3,3023,s?s.S()[0]:null);for(var B=0;B<F.length;B++){var q=F[B];j==null&&(j=q.dts);var G=void 0;G=B+1<F.length?(F[B+1].dts||0)-(q.dts||0):F.length>1?(q.dts||0)-(F[B-1].dts||0):(s.endTime-s.startTime)*9e4,L.push({data:q.data,size:q.data.byteLength,duration:G,Ab:Math.round((q.pts||0)-(q.dts||0)),flags:{Cb:0,ub:0,sb:0,qb:0,rb:q.isKeyframe?2:1,Db:q.isKeyframe?0:1}})}for(var z=[],J=C(U),ie=J.next();!ie.done;ie=J.next())z.push.apply(z,K(ie.value.nalus));var Y=Tse(z);if(!Y||j==null)throw new oe(2,3,3018,s?s.S()[0]:null);n.height=Y.height,n.width=Y.width,I={id:n.id,type:"video",codecs:"avc1",encrypted:n.encrypted&&n.drmInfos.length>0,timescale:9e4,duration:a,Gb:[],Ma:new Uint8Array([]),Ya:Y.Ya,fb:Y.fb,gb:Y.gb,data:{sequenceNumber:this.g,baseMediaDecodeTime:j,Eb:L},stream:n};break;case"hvc":var ne=[],Z=null,de=[],te=y.Kd();if(!te.length)throw new oe(2,3,3023,s?s.S()[0]:null);for(var ae=0;ae<te.length;ae++){var he=te[ae],Ee=he.nalus;de.push.apply(de,K(Ee));for(var Te=!1,ge=[],ve=!1,Ie=C(Ee),Le=Ie.next();!Le.done;Le=Ie.next()){var at=Le.value;switch(at.type){case 1:case 0:var je=ve=!0;break;case 19:case 20:case 21:Te=je=ve=!0;break;case 32:je=!0;break;case 33:je=!0;break;case 34:je=!0;break;case 35:ve=je=!0;break;case 39:case 40:je=!0;break;default:je=!1}if(ve&&je){var Vt=at.fullData.byteLength,ct=new Uint8Array(4);ct[0]=Vt>>24&255,ct[1]=Vt>>16&255,ct[2]=Vt>>8&255,ct[3]=Vt&255,ge.push(ct),ge.push(at.fullData)}}var Xt=ge.length?{data:Hn.apply(Wr,K(ge)),isKeyframe:Te}:null;if(Xt){Z==null&&he.dts!=null&&(Z=he.dts);var At=void 0;At=ae+1<te.length?(te[ae+1].dts||0)-(he.dts||0):te.length>1?(he.dts||0)-(te[ae-1].dts||0):(s.endTime-s.startTime)*9e4,ne.push({data:Xt.data,size:Xt.data.byteLength,duration:At,Ab:Math.round((he.pts||0)-(he.dts||0)),flags:{Cb:0,ub:0,sb:0,qb:0,rb:Xt.isKeyframe?2:1,Db:Xt.isKeyframe?0:1}})}}var St=Ese(de);if(!St||Z==null)throw new oe(2,3,3018,s?s.S()[0]:null);n.height=St.height,n.width=St.width,I={id:n.id,type:"video",codecs:"hvc1",encrypted:n.encrypted&&n.drmInfos.length>0,timescale:9e4,duration:a,Gb:[],Ma:new Uint8Array([]),Ya:St.Ya,fb:St.fb,gb:St.gb,data:{sequenceNumber:this.g,baseMediaDecodeTime:Z,Eb:ne},stream:n}}I&&(w.push(I),I=null)}if(u=="audio"){switch(b.audio){case"aac":for(var kt=[],Ut,_t=null,wt=null,It=null,lr=C(y.Bb()),Jn=lr.next();!Jn.done;Jn=lr.next()){var Cs=Jn.value,qi=Cs.data;if(qi){var Ai=0;if(wt==-1&&It)qi=Hn(It,Cs.data),wt=null;else if(wt!=null&&It){Ai=Math.max(0,wt);var jd=Hn(It,qi.subarray(0,Ai));kt.push({data:jd,size:jd.byteLength,duration:1024,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),wt=It=null}if(Ut=mj(qi,Ai),!Ut)throw new oe(2,3,3018,s?s.S()[0]:null);for(n.audioSamplingRate=Ut.sampleRate,n.channelsCount=Ut.channelCount,_t==null&&Cs.pts!==null&&(_t=Cs.pts);Ai<qi.length;){var Gl=pj(qi,Ai);if(!Gl){It=qi.subarray(Ai,qi.length),wt=-1;break}var _o=Gl.ye+Gl.za;wt=Math.max(0,Ai+_o-qi.length),wt!=0?It=qi.subarray(Ai+Gl.ye,Ai+_o):Ai+_o<=qi.length&&kt.push({data:qi.subarray(Ai+Gl.ye,Ai+_o),size:Gl.za,duration:1024,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),Ai+=_o}}}if(!Ut||_t==null){_t=s.startTime*9e4;var Uf=Fi("audio",n.codecs.split(","));if(!Uf||!n.channelsCount||!n.audioSamplingRate)throw new oe(2,3,3018,s?s.S()[0]:null);Ut={sampleRate:n.audioSamplingRate,channelCount:n.channelsCount,codec:Uf};var Ff=yse(Uf,n.channelsCount);if(!Ff)throw new oe(2,3,3018,s?s.S()[0]:null);for(var ST=_t+(s.endTime-s.startTime)*9e4,Ro=_t;Ro<ST;)kt.push({data:Ff,size:Ff.byteLength,duration:1024,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),Ro+=1024/Ut.sampleRate*9e4}var wT=Ut.sampleRate,ZC=_t/9e4*wT;I={id:n.id,type:"audio",codecs:Ut.codec,encrypted:n.encrypted&&n.drmInfos.length>0,timescale:wT,duration:a,Gb:[],Ma:new Uint8Array([]),Ya:new Uint8Array([]),fb:0,gb:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:ZC,Eb:kt},stream:n};break;case"ac3":for(var ET=[],Bf=0,m0=new Uint8Array([]),Zn=null,os=C(y.Bb()),Ii=os.next();!Ii.done;Ii=os.next()){var ek=Ii.value,tk=ek.data;Zn==null&&ek.pts!==null&&(Zn=ek.pts);for(var $f=0;$f<tk.length;){var zu=vj(tk,$f);zu?(n.audioSamplingRate=zu.sampleRate,n.channelsCount=zu.channelCount,Bf=zu.sampleRate,m0=zu.Ma,ET.push({data:tk.subarray($f,$f+zu.za),size:zu.za,duration:1536,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),$f+=zu.za):$f++}}if(Bf==0||m0.byteLength==0||Zn==null)throw new oe(2,3,3018,s?s.S()[0]:null);var Loe=Zn/9e4*Bf;I={id:n.id,type:"audio",codecs:"ac-3",encrypted:n.encrypted&&n.drmInfos.length>0,timescale:Bf,duration:a,Gb:[],Ma:m0,Ya:new Uint8Array([]),fb:0,gb:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Loe,Eb:ET},stream:n};break;case"ec3":for(var mU=[],bT=0,nk=new Uint8Array([]),AT=null,gU=C(y.Bb()),rk=gU.next();!rk.done;rk=gU.next()){var ik=rk.value,sk=ik.data;AT==null&&ik.pts!==null&&(AT=ik.pts);for(var Vf=0;Vf<sk.length;){var Wu=yj(sk,Vf);Wu?(n.audioSamplingRate=Wu.sampleRate,n.channelsCount=Wu.channelCount,bT=Wu.sampleRate,nk=Wu.Ma,mU.push({data:sk.subarray(Vf,Vf+Wu.za),size:Wu.za,duration:1536,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),Vf+=Wu.za):Vf++}}if(bT==0||nk.byteLength==0||AT==null)throw new oe(2,3,3018,s?s.S()[0]:null);var Poe=AT/9e4*bT;I={id:n.id,type:"audio",codecs:"ec-3",encrypted:n.encrypted&&n.drmInfos.length>0,timescale:bT,duration:a,Gb:[],Ma:nk,Ya:new Uint8Array([]),fb:0,gb:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Poe,Eb:mU},stream:n};break;case"mp3":for(var vU=[],IT,CT=null,yU=C(y.Bb()),ok=yU.next();!ok.done;ok=yU.next()){var ak=ok.value,g0=ak.data;if(g0){CT==null&&ak.pts!==null&&(CT=ak.pts);for(var Ud=0;Ud<g0.length;){var Gf=Hx(g0,Ud);Gf?(IT||(IT=Gf),Ud+Gf.za<=g0.length&&vU.push({data:g0.subarray(Ud,Ud+Gf.za),size:Gf.za,duration:1152,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),Ud+=Gf.za):Ud++}}}if(!IT||CT==null)throw new oe(2,3,3018,s?s.S()[0]:null);var xU=IT.sampleRate,Doe=CT/9e4*xU;I={id:n.id,type:"audio",codecs:"mp3",encrypted:n.encrypted&&n.drmInfos.length>0,timescale:xU,duration:a,Gb:[],Ma:new Uint8Array([]),Ya:new Uint8Array([]),fb:0,gb:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Doe,Eb:vU},stream:n};break;case"opus":var TU=[],kT=null,Ua=y.H;if(!Ua)throw new oe(2,3,3018,s?s.S()[0]:null);var Ci=[];switch(Ua.xk){case 1:case 2:Ci=[0];break;case 0:Ci=[255,1,1,0,1];break;case 128:Ci=[255,2,0,0,1];break;case 3:Ci=[1,2,1,0,2,1];break;case 4:Ci=[1,2,2,0,1,2,3];break;case 5:Ci=[1,3,2,0,4,1,2,3];break;case 6:Ci=[1,4,2,0,4,1,2,3,5];break;case 7:Ci=[1,4,2,0,4,1,2,3,5,6];break;case 8:Ci=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Ci=[1,1,2,0,1];break;case 131:Ci=[1,1,3,0,1,2];break;case 132:Ci=[1,1,4,0,1,2,3];break;case 133:Ci=[1,1,5,0,1,2,3,4];break;case 134:Ci=[1,1,6,0,1,2,3,4,5];break;case 135:Ci=[1,1,7,0,1,2,3,4,5,6];break;case 136:Ci=[1,1,8,0,1,2,3,4,5,6,7]}for(var SU=new Uint8Array([0,Ua.channelCount,0,0,Ua.sampleRate>>>24&255,Ua.sampleRate>>>17&255,Ua.sampleRate>>>8&255,Ua.sampleRate>>>0&255,0,0].concat(K(Ci))),wU=Ua.sampleRate,EU=C(y.Bb()),lk=EU.next();!lk.done;lk=EU.next()){var uk=lk.value,Hf=uk.data;kT==null&&uk.pts!==null&&(kT=uk.pts);for(var v0=0;v0<Hf.length;){for(var Noe=(Hf[v0+1]&16)!==0,Moe=(Hf[v0+1]&8)!==0,Hl=v0+2,_T=0;Hf[Hl]===255;)_T+=255,Hl+=1;_T+=Hf[Hl],Hl+=1,Hl+=Noe?2:0,Hl+=Moe?2:0;var bU=Hf.slice(Hl,Hl+_T);TU.push({data:bU,size:bU.byteLength,duration:960,Ab:0,flags:{Cb:0,ub:0,sb:0,qb:0,rb:2,Db:0}}),v0=Hl+_T}}if(SU.byteLength==0||kT==null)throw new oe(2,3,3018,s?s.S()[0]:null);n.audioSamplingRate=Ua.sampleRate,n.channelsCount=Ua.channelCount;var Ooe=kT/9e4*wU;I={id:n.id,type:"audio",codecs:"opus",encrypted:n.encrypted&&n.drmInfos.length>0,timescale:wU,duration:a,Gb:[],Ma:SU,Ya:new Uint8Array([]),fb:0,gb:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Ooe,Eb:TU},stream:n}}I&&(w.push(I),I=null)}}catch(dk){return dk&&dk.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(dk)}if(!w.length)return Promise.reject(new oe(2,3,3018,s?s.S()[0]:null));var AU=new Qh(w),ck=n.id+"_"+s.i;if(this.j.has(ck))var y0=this.j.get(ck);else y0=Jh(AU),this.j.set(ck,y0);var joe=this.l!==y0,Uoe=rg(AU);return this.l=y0,this.g++,Promise.resolve({data:Uoe,init:joe?y0:null})},xe("shaka.transmuxer.TsTransmuxer",Qs),Qs.prototype.transmux=Qs.prototype.transmux,Qs.prototype.getOriginalMimeType=Qs.prototype.getOriginalMimeType,Qs.prototype.convertCodecs=Qs.prototype.convertCodecs,Qs.prototype.isSupported=Qs.prototype.isSupported,Qs.prototype.destroy=Qs.prototype.destroy;var Nse=["aac","ac-3","ec-3","mp3","opus"],Mse=["avc","hevc"];Tl("video/mp2t",function(){return new Qs("video/mp2t")},vb);function wj(){}V(wj,Vi),xe("shaka.util.FairPlayUtils",wj);function ot(e,n){var s=this;this.parent=e,this.controls=n,this.eventManager=new Dt,this.localization=this.controls.ya,this.player=this.controls.Xb(),this.video=this.controls.Wc(),this.adManager=this.player.xf(),this.ad=n.getAd(),this.eventManager.o(this.adManager,"ad-started",function(a){s.ad=a.ad}),this.eventManager.o(this.adManager,"ad-stopped",function(){s.ad=null})}ot.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},xe("shaka.ui.Element",ot),ot.prototype.release=ot.prototype.release;function En(e,n){this.parent=e,this.g=oN("svg"),this.h=oN("path"),this.g.classList.add("material-svg-icon"),this.g.setAttribute("viewBox","0 -960 960 960"),n&&this.use(n),this.g.appendChild(this.h),this.parent&&e.appendChild(this.g)}En.prototype.use=function(e){e&&typeof e=="string"&&this.h.setAttribute("d",e)},En.prototype.ql=function(){return this.g},xe("shaka.ui.MaterialSVGIcon",En),En.prototype.getSvgElement=En.prototype.ql,En.prototype.use=En.prototype.use;function qx(e){return RI(e,"shaka-back-to-overflow-button")}function RI(e,n){return e=e.getElementsByClassName(n),e.length?e[0]:null}function Pf(e){e&&(e=RI(e,"shaka-chosen-item"))&&e.parentElement.focus()}function qu(){var e=new En(null,"m382-354 339-339q12-12 28-12t28 12q12 12 12 28.5T777-636L410-268q-12 12-28 12t-28-12L182-440q-12-12-11.5-28.5T183-497q12-12 28.5-12t28.5 12l142 143Z").g;return e.classList.add("shaka-chosen-item"),e.ariaHidden="true",e}function He(e,n){e&&(n?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function Na(e,n){var s=Math.floor(e/86400),a=Math.floor(e%86400/3600),u=Math.floor(e/60%60);return e=Math.floor(e%60),e<10&&(e="0"+e),e=u+":"+e,n&&(u<10&&(e="0"+e),e=a+":"+e,s>0&&(a<10&&(e="0"+e),e=s+":"+e)),e}function Kx(e,n){ot.call(this,e,n);var s=this;this.g=Tn(),this.g.classList.add("shaka-ad-info"),this.g.disabled=!0,this.parent.appendChild(this.g),this.h=new Ke(function(){if(s.ad.isLinear()){var a="",u=s.ad.getSequenceLength();u>1&&(a=s.ad.getPositionInSequence(),a=s.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(a)).replace("[NUM_ADS]",String(u)));var f=Math.round(s.ad.getRemainingTime()),p=s.ad.getDuration();f!=-1&&p!=-1&&isFinite(f)&&isFinite(p)?f>0?(f=Na(p-f,!1)+" / "+Na(p,!1),a=u>1?a+(""+f):s.localization.resolve("AD_TIME").replace("[AD_TIME]",f),s.g.textContent=a,He(s.g,a!="")):(s.h.stop(),s.g.textContent=""):(s.g.textContent=a,He(s.g,a!=""))}}),this.eventManager.o(this.localization,"locale-updated",function(){}),this.eventManager.o(this.localization,"locale-changed",function(){}),this.eventManager.o(this.adManager,"ad-started",function(){s.h.Ka(),s.h.xa(.5)}),this.eventManager.o(this.adManager,"ad-stopped",function(){s.h.stop(),s.g.textContent=""}),this.ad&&(this.h.Ka(),this.h.xa(.5))}V(Kx,ot),Kx.prototype.release=function(){this.h.stop(),this.h=null,ot.prototype.release.call(this)},xe("shaka.ui.AdInfo",Kx);function Ku(e,n){ot.call(this,e,n);var s=this;this.j=this.controls.g,this.h=this.controls.i,this.i=[],this.g=Ne("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-context-menu"),this.g.classList.add("shaka-hidden"),this.h.appendChild(this.g),this.eventManager.o(this.h,"contextmenu",function(a){if(s.g.classList.contains("shaka-hidden")){a.preventDefault();var u=s.h.getBoundingClientRect();s.g.style.left=a.clientX-u.left+"px",s.g.style.top=a.clientY-u.top+"px",He(s.g,!0)}else He(s.g,!1)}),this.eventManager.o(l,"click",function(){He(s.g,!1)}),this.eventManager.o(this.g,"click",function(){He(s.g,!1)}),Ose(this)}V(Ku,ot),Ku.prototype.release=function(){this.h=null;for(var e=C(this.i),n=e.next();!n.done;n=e.next())n.value.release();this.i=[],ot.prototype.release.call(this)},Ku.prototype.Ui=function(){He(this.g,!1)};function Rd(e,n){Ej.set(e,n)}function Ose(e){for(var n=C(e.j.contextMenuElements),s=n.next();!s.done;s=n.next()){s=s.value;var a=Ej.get(s);a?e.i.push(a.create(e.g,e.controls)):$e("Unrecognized context menu element:",s)}}xe("shaka.ui.ContextMenu",Ku),Ku.registerElement=Rd,Ku.prototype.closeMenu=Ku.prototype.Ui;var Ej=new Map;function Ul(e,n){ot.call(this,e,n);var s=this;this.button=Tn(),this.parent.appendChild(this.button),this.h=new En(this.button),this.eventManager.o(this.localization,"locale-updated",function(){ea(s)}),this.eventManager.o(this.localization,"locale-changed",function(){ea(s)}),this.eventManager.o(this.video,"play",function(){ea(s),s.g()}),this.eventManager.o(this.video,"pause",function(){ea(s),s.g()}),this.eventManager.o(this.video,"seeking",function(){ea(s),s.g()}),this.eventManager.o(this.player,"loaded",function(){ea(s),s.g()}),this.eventManager.o(this.adManager,"ad-paused",function(){ea(s),s.g()}),this.eventManager.o(this.adManager,"ad-resumed",function(){ea(s),s.g()}),this.eventManager.o(this.adManager,"ad-started",function(){ea(s),s.g()}),this.eventManager.o(this.adManager,"ad-stopped",function(){ea(s),s.g()}),this.eventManager.o(this.button,"click",function(){s.controls.Ca()&&i0(s.controls)}),ea(this),this.g()}V(Ul,ot),Ul.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var e=this.ad.isPaused();else e=this.controls,e=e.C.paused&&!e.V;return e},Ul.prototype.isEnded=function(){return this.ad&&this.ad.isLinear()?!1:this.player?this.player.isEnded():!0};function ea(e){if(e.isEnded()&&e.video.duration)e.button.ariaLabel=e.localization.resolve("REPLAY");else{var n=e.isPaused()?"PLAY":"PAUSE";e.button.ariaLabel=e.localization.resolve(n)}}Ul.prototype.g=function(){this.isEnded()&&this.video.duration?this.h.use("M480-80q-75 0-140.5-28.5t-114-77q-48.5-48.5-77-114T120-440q0-17 11.5-28.5T160-480q17 0 28.5 11.5T200-440q0 117 81.5 198.5T480-160q117 0 198.5-81.5T760-440q0-117-81.5-198.5T480-720h-6l34 34q12 12 11.5 28T508-630q-12 12-28.5 12.5T451-629L348-732q-12-12-12-28t12-28l103-103q12-12 28.5-11.5T508-890q11 12 11.5 28T508-834l-34 34h6q75 0 140.5 28.5t114 77q48.5 48.5 77 114T840-440q0 75-28.5 140.5t-77 114q-48.5 48.5-114 77T480-80Z"):this.h.use(this.isPaused()?"M320-273v-414q0-17 12-28.5t28-11.5q5 0 10.5 1.5T381-721l326 207q9 6 13.5 15t4.5 19q0 10-4.5 19T707-446L381-239q-5 3-10.5 4.5T360-233q-16 0-28-11.5T320-273Z":"M640-200q-33 0-56.5-23.5T560-280v-400q0-33 23.5-56.5T640-760q33 0 56.5 23.5T720-680v400q0 33-23.5 56.5T640-200Zm-320 0q-33 0-56.5-23.5T240-280v-400q0-33 23.5-56.5T320-760q33 0 56.5 23.5T400-680v400q0 33-23.5 56.5T320-200Z")},xe("shaka.ui.PlayButton",Ul);function zx(e,n){Ul.call(this,e,n),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation")}V(zx,Ul),zx.prototype.g=function(){this.isEnded()&&this.video.duration?this.button.setAttribute("icon","replay"):this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},xe("shaka.ui.BigPlayButton",zx);function Df(e,n){ot.call(this,e,n);var s=this;this.m=null,this.i=this.D=!1,this.C=this.A=null,this.j=new Ke(function(){parseInt(s.h.textContent,10)===0&&s0(s.controls,!0);var a=parseInt(s.h.textContent,10);a!==0&&(s.video.currentTime=s.controls.wh()+a),s.g.style.opacity="0",s.D=!1,s.h.textContent="0s"}),this.g=Ne("div"),this.g.classList.add("shaka-no-propagation"),this.parent.appendChild(this.g),this.h=Ne("span"),this.h.textContent="0s",this.g.appendChild(this.h),this.u=new En(this.g),this.u.g.classList.add("shaka-forward-rewind-container-icon"),this.l=!1,this.eventManager.o(this.g,"touchstart",function(a){a.touches.length>0&&(s.A=a.touches[0].clientX,s.C=a.touches[0].clientY),s.i=!1}),this.eventManager.o(this.g,"touchmove",function(a){if(a.touches.length>0&&s.A!=null&&s.C!=null){var u=a.touches[0].clientX-s.A;a=a.touches[0].clientY-s.C,Math.sqrt(u*u+a*a)>10&&(s.i=!0)}}),this.eventManager.o(this.g,"touchend",function(a){if(!s.i){if(s.controls.Nc())a.preventDefault(),s.controls.Xc();else if(s.controls.g.tapSeekDistance>0&&(!s.ad||!s.ad.isLinear())){if(a.preventDefault(),a=s.controls.g.tapSeekDistance,!s.D)s.D=!0,s.m=Date.now(),s.j.Y(.5);else if(s.m+500>Date.now()){s.j.stop(),s.m=Date.now();var u=parseInt(s.h.textContent,10);u=s.l?u-a:u+a,s.h.textContent=u.toString()+"s",s.g.style.opacity="1",s.j.Y(.5)}}}})}V(Df,ot),xe("shaka.ui.HiddenSeekButton",Df);function LI(e,n){Df.call(this,e,n),this.g.classList.add("shaka-fast-forward-container"),this.u.use("M100-315v-330q0-18 12-29t28-11q5 0 11 1t11 5l248 166q9 6 13.5 14.5T428-480q0 10-4.5 18.5T410-447L162-281q-5 4-11 5t-11 1q-16 0-28-11t-12-29Zm400 0v-330q0-18 12-29t28-11q5 0 11 1t11 5l248 166q9 6 13.5 14.5T828-480q0 10-4.5 18.5T810-447L562-281q-5 4-11 5t-11 1q-16 0-28-11t-12-29Z"),this.l=!1}V(LI,Df),xe("shaka.ui.HiddenFastForwardButton",LI);function PI(e,n){Df.call(this,e,n),this.g.classList.add("shaka-rewind-container"),this.u.use("M798-281 550-447q-9-6-13.5-14.5T532-480q0-10 4.5-18.5T550-513l248-166q5-4 11-5t11-1q16 0 28 11t12 29v330q0 18-12 29t-28 11q-5 0-11-1t-11-5Zm-400 0L150-447q-9-6-13.5-14.5T132-480q0-10 4.5-18.5T150-513l248-166q5-4 11-5t11-1q16 0 28 11t12 29v330q0 18-12 29t-28 11q-5 0-11-1t-11-5Z"),this.l=!0}V(PI,Df),xe("shaka.ui.HiddenRewindButton",PI);function Er(e,n,s,a){ot.call(this,e,n);var u=this;this.container=Ne("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,K(s)),this.i=!1,this.bar=document.createElement("input"),this.G=new Ke(function(){u.onChangeEnd(),u.i=!1}),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,K(a)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.bar.disabled=!this.controls.Ca(),this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.L=new Ke(function(){u.bar.disabled=!1}),this.eventManager.o(this.controls,"showingui",function(){u.L.Y(0)}),this.eventManager.o(this.controls,"hidingui",function(){u.L.stop(),u.bar.disabled=!0}),this.eventManager.o(this.bar,"mousedown",function(f){u.bar.disabled||(u.i=!0,u.onChangeStart(),f.stopPropagation())}),this.eventManager.o(this.bar,"touchstart",function(f){u.bar.disabled||(u.i=!0,Wx(u,f),u.onChangeStart(),f.stopPropagation())}),this.eventManager.o(this.bar,"input",function(){u.onChange()}),this.eventManager.o(this.bar,"touchmove",function(f){u.i&&(Wx(u,f),u.onChange(),f.stopPropagation())}),this.eventManager.o(this.bar,"touchend",function(f){u.i&&(u.i=!1,Wx(u,f),u.onChangeEnd(),f.stopPropagation())}),this.eventManager.o(this.bar,"touchcancel",function(f){u.i&&(u.i=!1,Wx(u,f),u.onChangeEnd(),f.stopPropagation())}),this.eventManager.o(this.bar,"mouseup",function(f){u.i&&(u.i=!1,u.onChangeEnd(),f.stopPropagation())}),this.eventManager.o(this.bar,"blur",function(){u.i&&(u.i=!1,u.onChangeEnd())}),this.eventManager.o(this.bar,"contextmenu",function(f){f.preventDefault(),f.stopPropagation()})}V(Er,ot),d=Er.prototype,d.release=function(){this.G&&(this.G.stop(),this.G=null),ot.prototype.release.call(this)},d.setRange=function(e,n){this.bar.min=e,this.bar.max=n},d.onChangeStart=function(){},d.onChange=function(){},d.onChangeEnd=function(){},d.changeTo=function(e){this.i||(this.i=!0,this.onChangeStart());var n=parseFloat(this.bar.min),s=parseFloat(this.bar.max);this.bar.value=e>s?s:e<n?n:e,this.onChange(),this.G.Y(.5)},d.getValue=function(){return parseFloat(this.bar.value)},d.setValue=function(e){this.i||(this.bar.value=e)};function bj(e,n){var s=e.bar.getBoundingClientRect(),a=parseFloat(e.bar.min),u=parseFloat(e.bar.max);e=parseFloat(e.bar.step)||1;var f=s.left+6;return s=s.right-6,n=a+(Math.max(f,Math.min(s,n))-f)/(s-f)*(u-a),n=Math.round((n-a)/e)*e+a,n=Math.min(u,Math.max(a,n))}function Wx(e,n){n.preventDefault(),e.bar.value=bj(e,n.changedTouches[0].clientX)}xe("shaka.ui.RangeElement",Er),Er.prototype.setValue=Er.prototype.setValue,Er.prototype.getValue=Er.prototype.getValue,Er.prototype.changeTo=Er.prototype.changeTo,Er.prototype.onChangeEnd=Er.prototype.onChangeEnd,Er.prototype.onChange=Er.prototype.onChange,Er.prototype.onChangeStart=Er.prototype.onChangeStart,Er.prototype.setRange=Er.prototype.setRange;function n0(e,n){Er.call(this,e,n,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var s=this;this.F=Ne("div"),this.F.classList.add("shaka-ad-markers"),this.container.insertBefore(this.F,this.container.childNodes[0]),this.I=this.controls.g,this.C=new Ke(function(){var a=s.getValue();s.player.U()||a==s.video.duration&&(a-=.001),s.video.currentTime=a}),this.D=new Ke(function(){Aj(s)}),this.M=!1,this.h=Ne("div"),this.h.id="shaka-player-ui-thumbnail-container",this.g=Ne("img"),this.g.id="shaka-player-ui-thumbnail-image",this.g.draggable=!1,this.K=Ne("div"),this.K.id="shaka-player-ui-thumbnail-time-container",this.H=Ne("div"),this.H.id="shaka-player-ui-thumbnail-time",this.K.appendChild(this.H),this.h.appendChild(this.g),this.h.appendChild(this.K),this.container.appendChild(this.h),this.j=Ne("div"),this.j.id="shaka-player-ui-time-container",this.container.appendChild(this.j),this.l=this.u=null,this.J=!1,this.A=new Ke(function(){Ld(s)}),this.m=[],this.eventManager.o(this.bar,"input",function(){s.controls.Xc()}),this.eventManager.o(this.localization,"locale-updated",function(){return NI(s)}),this.eventManager.o(this.localization,"locale-changed",function(){return NI(s)}),this.eventManager.o(this.adManager,"ad-started",function(){DI(s)||He(s.container,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){DI(s)&&He(s.container,!0)}),this.eventManager.o(this.adManager,"ad-cue-points-changed",function(a){s.m=a.cuepoints,Ij(s)}),this.eventManager.o(this.player,"unloading",function(){s.m=[],Ij(s),s.l&&(s.l.abort(),s.l=null),s.u=null,Ld(s),Yx(s)}),this.eventManager.o(this.bar,"mousemove",function(a){if(s.controls.Nc())Yx(s),Ld(s);else{var u=bj(s,a.clientX),f=s.bar.getBoundingClientRect();a=Math.max(0,a.clientX-f.left),s.player.xh().length?(Yx(s),Cj(s,a,u)):(Ld(s),MI(s,a,u))}}),this.eventManager.o(this.container,"mouseleave",function(){Yx(s),s.A.stop(),s.A.Y(.25)}),this.setValue(this.video.currentTime),this.update(),NI(this),this.ad&&He(this.container,!1)}V(n0,Er),d=n0.prototype,d.release=function(){this.C&&(this.C.stop(),this.C=null,this.D.stop(),this.D=null),Er.prototype.release.call(this)},d.onChangeStart=function(){this.M=!this.video.paused,this.controls.mi(!0),this.video.pause(),this.A.stop(),this.J=!0},d.onChange=function(){if(this.video.duration)if(this.update(),this.C.Y(.125),this.player.xh().length&&!this.controls.Nc()){var e=parseFloat(this.bar.min),n=parseFloat(this.bar.max),s=this.bar.getBoundingClientRect(),a=Math.round(this.getValue());Cj(this,(a-e)/((n-e)/s.width),a)}else Ld(this)},d.onChangeEnd=function(){this.C.Ka(),this.controls.mi(!1),this.M&&this.video.play(),this.J&&(this.J=!1,this.A.stop(),this.A.Y(.25))},d.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},d.update=function(){var e=this.I.seekBarColors,n=this.getValue(),s=this.video.buffered.length,a=s?this.video.buffered.start(0):0,u=s?this.video.buffered.end(s-1):0;s=this.player.wa();var f=s.end-s.start;this.setRange(s.start,s.end),DI(this)?(He(this.container,!0),a=(Math.max(a,s.start)-s.start)/f||0,u=(Math.min(u,s.end)-s.start)/f||0,n=(Math.min(Math.max(n,s.start),s.end)-s.start)/f||0,this.container.style.background="linear-gradient("+["to right",(this.I.showUnbufferedStart?e.base:e.played)+" "+a*100+"%",e.played+" "+a*100+"%",e.played+" "+n*100+"%",e.buffered+" "+n*100+"%",e.buffered+" "+u*100+"%",e.base+" "+u*100+"%"].join()+")"):He(this.container,!1)};function Aj(e){if(e.m.length){for(var n=e.player.wa(),s=n.end-n.start,a=["to right"],u=[],f=e.I.seekBarColors.adBreaks,p=!1,g=C(e.m),y=g.next();!y.done;y=g.next())if(y=y.value,y.start==-1&&!y.end)p=!0;else if(!y.end&&y.start>=n.start||typeof y.end=="number"&&y.end>n.start){var w=(Math.max(y.start,n.start)-n.start)/s||0,b=w+.01;y.end&&(b=(y.end-n.start)/s||0),u.push({start:w,end:b})}for(u=u.sort(function(I,L){return I.start-L.start}),n=C(u),s=n.next();!s.done;s=n.next())s=s.value,a.push("transparent "+s.start*100+"%"),a.push(f+" "+s.start*100+"%"),a.push(f+" "+s.end*100+"%"),a.push("transparent "+s.end*100+"%");p&&(a.push("transparent 99%"),a.push(f+" 99%")),e.F.style.background="linear-gradient("+a.join(",")+")"}else e.F.style.background="transparent",e.D.stop()}function Ij(e){function n(){Aj(e);var s=e.player.wa();s=s.end-s.start,e.player.U()&&s>5&&e.D.xa(.25)}n(),e.player.Jh()||e.eventManager.qa(e.player,"loaded",n)}function DI(e){var n=e.player.wa();return n=n.end-n.start,e.player.U()&&(n<5||!isFinite(n))?!1:e.ad==null||!e.ad.isLinear()}function NI(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}function MI(e,n,s){var a=e.j.clientWidth;e.j.style.width="auto",e.j.style.height="20px",e.j.style.top="-30px",e.j.style.left=Math.min(e.bar.offsetWidth-a,Math.max(0,n-a/2))+"px",e.j.style.right="",e.j.style.visibility="visible",n=e.player.wa(),e.player.U()?(s=n.end-s,s<1?(e.j.textContent=e.localization.resolve("LIVE"),e.j.style.left="",e.j.style.right="0px"):e.j.textContent="-"+Na(s,s>=3600)):(s-=n.start,e.j.textContent=Na(s,s>=3600))}function Cj(e,n,s){var a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J;X(function(ie){switch(ie.g){case 1:return s<0&&(s=0),a=!1,e.m.length&&(a=e.m.some(function(Y){return Y.end?s>=Y.start&&s<=Y.end:!1})),a?(Ld(e),MI(e,n,s),ie.return()):(u=e.player.wa(),f=Math.max(Math.ceil(u.start),Math.min(Math.floor(u.end),s)),e.player.U()?(p=u.end-s,e.H.textContent=p<1?e.localization.resolve("LIVE"):"-"+Na(p,p>=3600)):e.H.textContent=Na(s,s>=3600),g=-10,y=e.h.clientWidth,w=Math.floor(y*9/16),e.h.style.height=w+"px",e.h.style.top=-(w-g)+"px",b=Math.min(e.bar.offsetWidth-y,Math.max(0,n-y/2)),e.h.style.left=b+"px",O(ie,e.player.gj(null,f),2));case 2:if(I=ie.h,!I||!I.uris||!I.uris.length)return Ld(e),MI(e,n,s),ie.return();if(I.width<I.height?e.h.classList.add("portrait-thumbnail"):e.h.classList.remove("portrait-thumbnail"),e.h.style.visibility="visible",L=I.uris[0].split("#xywh=")[0],e.u&&L===e.u.uris[0].split("#xywh=")[0]&&I.startByte==e.u.startByte&&I.endByte==e.u.endByte){ie.B(3);break}if(e.u=I,e.l&&(e.l.abort(),e.l=null),I.codecs!="mjpg"&&!L.startsWith("offline:")){ie.B(4);break}return e.g.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',ce(ie,5),j=ys,U=uf(I.uris,I.startByte,I.endByte,e.player.getConfiguration().streaming.retryParameters),e.l=e.player.Wb().request(j,U,{type:1}),O(ie,e.l.promise,7);case 7:F=ie.h,e.l=null,I.codecs=="mjpg"?(B=new Jt().box("mdat",gd(function(Y){L=URL.createObjectURL(new Blob([Y],{type:"image/jpeg"}))},!0)),B.parse(F.data,!1)):(q=I.mimeType||"image/jpeg",G=new Blob([F.data],{type:q}),L=URL.createObjectURL(G)),se(ie,4);break;case 5:if(z=ue(ie),z.code==7001)return ie.return();throw z;case 4:try{e.h.removeChild(e.g)}catch{}e.g=Ne("img"),e.g.id="shaka-player-ui-thumbnail-image",e.g.draggable=!1,e.g.src=L,e.g.onload=function(){L.startsWith("blob:")&&URL.revokeObjectURL(L)},e.h.insertBefore(e.g,e.h.firstChild);case 3:J=y/I.width,I.imageHeight?e.g.height=I.imageHeight:I.sprite||(e.g.style.height="100%",e.g.style.objectFit="contain"),I.imageWidth?e.g.width=I.imageWidth:I.sprite||(e.g.style.width="100%",e.g.style.objectFit="contain"),e.g.style.left="-"+J*I.positionX+"px",e.g.style.top="-"+J*I.positionY+"px",e.g.style.transform="scale("+J+")",e.g.style.transformOrigin="left top",w=Math.floor(y*I.height/I.width),e.h.style.height=w+"px",e.h.style.top=-(w-g)+"px",re(ie)}})}function Ld(e){e.h.style.visibility="hidden"}function Yx(e){e.j.style.visibility="hidden"}xe("shaka.ui.SeekBar",n0);function OI(){}OI.prototype.create=function(e,n){return new n0(e,n)},n0.Factory=OI;function Xx(e,n){ot.call(this,e,n);var s=this;this.j=Ne("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=Ne("div"),this.h.classList.add("shaka-skip-ad-counter"),He(this.h,!1),this.j.appendChild(this.h),this.g=Tn(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,He(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),jI(this),this.i=new Ke(function(){if(s.ad.isSkippable()){var a=Math.round(s.ad.getTimeUntilSkippable());a>0?s.h.textContent=a:(s.i.stop(),He(s.h,!1))}else UI(s)}),this.eventManager.o(this.localization,"locale-updated",function(){jI(s)}),this.eventManager.o(this.localization,"locale-changed",function(){jI(s)}),this.eventManager.o(this.adManager,"ad-started",function(){kj(s)}),this.eventManager.o(this.adManager,"ad-skip-state-changed",function(){s.ad.isSkippable()?s.ad.canSkipNow()&&(s.g.disabled=!1,s.i.stop(),He(s.h,!1)):UI(s)}),this.eventManager.o(this.adManager,"ad-stopped",function(){UI(s)}),this.eventManager.o(this.g,"click",function(){s.ad.skip()}),this.ad&&kj(this)}V(Xx,ot),Xx.prototype.release=function(){this.i.stop(),this.i=null,ot.prototype.release.call(this)};function jI(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function kj(e){e.ad.isSkippable()&&e.ad.needsSkipUI()&&(He(e.g,!0),He(e.h,!0),e.h.textContent="",e.i.Ka(),e.i.xa(.5))}function UI(e){e.i.stop(),e.g.disabled=!0,He(e.g,!1),He(e.h,!1)}xe("shaka.ui.SkipAdButton",Xx);/*
 @license
 glMatrix: https://github.com/toji/gl-matrix/
 Copyright 2015-2021, Brandon Jones, Colin MacKenzie IV
 SPDX-License-Identifier: MIT
*/function Fl(){var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function FI(e,n,s){n=1/Math.tan(n/2),e[0]=n/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s=1/-99.9,e[10]=100.1*s,e[14]=20*s}function Qx(e,n,s){var a=n[0],u=n[1],f=n[2],p=n[3],g=n[4],y=n[5],w=n[6],b=n[7],I=n[8],L=n[9],j=n[10],U=n[11],F=n[12],B=n[13],q=n[14];n=n[15];var G=s[0],z=s[1],J=s[2],ie=s[3];e[0]=G*a+z*g+J*I+ie*F,e[1]=G*u+z*y+J*L+ie*B,e[2]=G*f+z*w+J*j+ie*q,e[3]=G*p+z*b+J*U+ie*n,G=s[4],z=s[5],J=s[6],ie=s[7],e[4]=G*a+z*g+J*I+ie*F,e[5]=G*u+z*y+J*L+ie*B,e[6]=G*f+z*w+J*j+ie*q,e[7]=G*p+z*b+J*U+ie*n,G=s[8],z=s[9],J=s[10],ie=s[11],e[8]=G*a+z*g+J*I+ie*F,e[9]=G*u+z*y+J*L+ie*B,e[10]=G*f+z*w+J*j+ie*q,e[11]=G*p+z*b+J*U+ie*n,G=s[12],z=s[13],J=s[14],ie=s[15],e[12]=G*a+z*g+J*I+ie*F,e[13]=G*u+z*y+J*L+ie*B,e[14]=G*f+z*w+J*j+ie*q,e[15]=G*p+z*b+J*U+ie*n}function BI(e,n){var s=new Float32Array(3),a=n[0],u=n[1],f=n[2],p=n[4],g=n[5],y=n[6],w=n[8],b=n[9],I=n[10];s[0]=Math.sqrt(a*a+u*u+f*f),s[1]=Math.sqrt(p*p+g*g+y*y),s[2]=Math.sqrt(w*w+b*b+I*I),y=1/s[0],w=1/s[1],b=1/s[2],p=n[0]*y,s=n[1]*w,a=n[2]*b,u=n[4]*y,g=n[5]*w,f=n[6]*b,y*=n[8],w*=n[9],n=n[10]*b,b=p+g+n,b>0?(n=Math.sqrt(b+1)*2,e[3]=.25*n,e[0]=(f-w)/n,e[1]=(y-a)/n,e[2]=(s-u)/n):p>g&&p>n?(n=Math.sqrt(1+p-g-n)*2,e[3]=(f-w)/n,e[0]=.25*n,e[1]=(s+u)/n,e[2]=(y+a)/n):g>n?(n=Math.sqrt(1+g-p-n)*2,e[3]=(y-a)/n,e[0]=(s+u)/n,e[1]=.25*n,e[2]=(f+w)/n):(n=Math.sqrt(1+n-p-g)*2,e[3]=(s-u)/n,e[0]=(y+a)/n,e[1]=(f+w)/n,e[2]=.25*n)}function _j(e,n){var s=n[0],a=n[1],u=n[2];n=n[3];var f=s+s,p=a+a,g=u+u;s*=f;var y=a*f;a*=p;var w=u*f,b=u*p;u*=g,f*=n,p*=n,n*=g,e[0]=1-a-u,e[1]=y+n,e[2]=w-p,e[3]=0,e[4]=y-n,e[5]=1-s-u,e[6]=b+f,e[7]=0,e[8]=w+p,e[9]=b-f,e[10]=1-s-a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}function $I(){var e=new Float32Array(4);return e[3]=1,e}function jse(e,n){var s=n[0],a=n[1],u=n[2];n=n[3];var f=s*s+a*a+u*u+n*n;f>0&&(f=1/Math.sqrt(f)),e[0]=s*f,e[1]=a*f,e[2]=u*f,e[3]=n*f}function Rj(e){var n=[],s=[],a=[],u=Math.PI;e=e!==void 0&&e?u/2:u;for(var f=0;f<=100;f++){var p=f*u/100,g=Math.sin(p);p=Math.cos(p);for(var y=0;y<=100;y++){var w=y*2*e/100;n.push(Math.sin(w)*g,p,Math.cos(w)*g),s.push(y/100,f/100)}}for(u=0;u<100;u++)for(e=0;e<100;e++)f=u*101+e,g=f+100+1,a.push(f,g,f+1),a.push(g,g+1,f+1);return{kk:n,gk:s,indices:a}}function VI(e,n,s,a,u){this.i=e,this.sa=n,this.u=s,this.g=a,this.A=new Dt,this.M=$I(),this.h=$I(),this.ea=this.oa=this.aa=this.l=null,this.F=Fl(),this.J=Fl(),this.O=Fl(),this.W=Fl(),this.D=null,this.P=!1,this.K=this.C=null,this.ua=this.ya=0,this.Z=this.R=this.T=this.L=null,this.I=this.H=0,this.j=75,this.V=0,this.m=u,this.G=-1,Use(this)}VI.prototype.release=function(){this.G!=-1&&(this.i.cancelVideoFrameCallback(this.G),this.G=-1),this.A&&(this.A.release(),this.A=null),this.C&&(this.C.stop(),this.C=null),this.K&&(this.K.stop(),this.K=null)},VI.prototype.be=function(){(this.P=!this.P)||this.g.viewport(0,0,this.u.width,this.u.height),Js(this,!1)};function Use(e){Fse(e),Bse(e),$se(e),Vse(e),Gse(e),bd(e.i,HTMLMediaElement.HAVE_CURRENT_DATA,e.A,function(){if(e.i.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA&&Js(e),"requestVideoFrameCallback"in e.i){var n=function(){e.G!=-1&&(Js(e),e.G!=-1&&(e.G=e.i.requestVideoFrameCallback(n)))};e.G=e.i.requestVideoFrameCallback(n)}else{var s;e.A.o(e.i,"canplaythrough",function(){Js(e)}),e.A.o(e.i,"playing",function(){if(e.C&&e.C.stop(),!s){var a=e.sa.Nb();a=C(a);for(var u=a.next();!u.done;u=a.next())(u=u.value.frameRate)&&(!s||s<u)&&(s=u)}s||(s=60),Js(e),e.C=new Ke(function(){Js(e)}).Ka().xa(1/s)}),e.A.o(e.i,"pause",function(){e.C&&e.C.stop(),e.C=null,Js(e)}),e.A.o(e.i,"seeked",function(){Js(e)}),e.A.o(document,"visibilitychange",function(){Js(e)})}})}function Fse(e){var n=e.F,s=[0,0,0],a=[1,0,0],u=[0,1,0],f=s[0],p=s[1];s=s[2];var g=u[0],y=u[1],w=u[2],b=a[0];u=a[1];var I=a[2];if(Math.abs(f-b)<1e-6&&Math.abs(p-u)<1e-6&&Math.abs(s-I)<1e-6)for(f=0;f<16;f++)n[f]=f%5==0?1:0;else{a=f-b,u=p-u,b=s-I;var L=1/Math.sqrt(a*a+u*u+b*b);a*=L,u*=L,b*=L,I=y*b-w*u,w=w*a-g*b,g=g*u-y*a,(L=Math.sqrt(I*I+w*w+g*g))?(L=1/L,I*=L,w*=L,g*=L):g=w=I=0,y=u*g-b*w;var j=b*I-a*g,U=a*w-u*I;(L=Math.sqrt(y*y+j*j+U*U))?(L=1/L,y*=L,j*=L,U*=L):U=j=y=0,n[0]=I,n[1]=y,n[2]=a,n[3]=0,n[4]=w,n[5]=j,n[6]=u,n[7]=0,n[8]=g,n[9]=U,n[10]=b,n[11]=0,n[12]=-(I*f+w*p+g*s),n[13]=-(y*f+j*p+U*s),n[14]=-(a*f+u*p+b*s),n[15]=1}BI(e.M,e.F),e=n=e.W,s=[4,4,4],f=s[0],p=s[1],s=s[2],n[0]=e[0]*f,n[1]=e[1]*f,n[2]=e[2]*f,n[3]=e[3]*f,n[4]=e[4]*p,n[5]=e[5]*p,n[6]=e[6]*p,n[7]=e[7]*p,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]}function Bse(e){Pj(e),e.g.viewport(0,0,e.g.drawingBufferWidth,e.g.drawingBufferHeight),e.g.clearColor(0,0,0,1),e.g.enable(e.g.CULL_FACE),e.g.cullFace(e.g.FRONT),e.g.clear(e.g.COLOR_BUFFER_BIT)}function $se(e){var n=Lj(e,e.g.VERTEX_SHADER),s=Lj(e,e.g.FRAGMENT_SHADER);e.l=e.g.createProgram(),e.g.attachShader(e.l,n),e.g.attachShader(e.l,s),e.g.linkProgram(e.l),e.m=="cubemap"?(e.T=e.g.getAttribLocation(e.l,"aVertexPosition"),e.R=e.g.getAttribLocation(e.l,"aTextureCoord")):(e.T=e.g.getAttribLocation(e.l,"a_vPosition"),e.g.enableVertexAttribArray(e.T),e.R=e.g.getAttribLocation(e.l,"a_TexCoordinate"),e.g.enableVertexAttribArray(e.R))}function Lj(e,n){switch(n){case e.g.VERTEX_SHADER:var s=e.m=="cubemap"?`attribute vec4 aVertexPosition;
attribute vec2 aTextureCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
varying highp vec2 vTextureCoord;
varying highp vec3 vLighting;
void main(void) {
  gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;
  vTextureCoord = aTextureCoord;
}`:`attribute vec4 a_vPosition;
// Per-vertex texture coordinate info
attribute vec2 a_TexCoordinate;
uniform mat4 u_VPMatrix;
// Passed into the fragment shader.
varying vec2 v_TexCoordinate;
varying vec3 pass_position;
void main()
{
 gl_Position = u_VPMatrix * a_vPosition;
 // Pass through texture coord
 v_TexCoordinate = a_TexCoordinate;
 pass_position = a_vPosition.xyz;
}`;break;case e.g.FRAGMENT_SHADER:s=e.m=="cubemap"?`varying highp vec2 vTextureCoord;
uniform sampler2D uSampler;
void main(void) {
  highp vec4 texelColor = texture2D(uSampler, vTextureCoord);
  gl_FragColor = vec4(texelColor.rgb , texelColor.a);
}`:`precision highp float;
#define PI 3.141592653589793238462643383279
varying vec2 v_TexCoordinate;
varying vec3 pass_position;
uniform sampler2D uSampler;
void main(void) {
highp float xValue =
      (PI + atan(pass_position.z, pass_position.x)) / (2.0 * PI);
 vec2 tc = vec2(xValue, v_TexCoordinate.t);
 tc = vec2(tc.x , tc.y);
highp vec4 texelColor =
      texture2D(uSampler, tc);
  gl_FragColor = vec4(texelColor.rgb, texelColor.a);
}`;break;default:return null}return n=e.g.createShader(n),e.g.shaderSource(n,s),e.g.compileShader(n),n}function Vse(e){e.L=e.m=="cubemap"?{kk:[-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1],gk:[2/3,.5,1/3,.5,1/3,0,2/3,0,2/3,.5,2/3,0,1,0,1,.5,1,1,2/3,1,2/3,.5,1,.5,0,.5,0,0,1/3,0,1/3,.5,0,.5,1/3,.5,1/3,1,0,1,1/3,1,1/3,.5,2/3,.5,2/3,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}:e.m=="halfequirectangular"?Rj(!0):Rj(),e.aa=e.g.createBuffer(),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.aa),e.g.bufferData(e.g.ARRAY_BUFFER,new Float32Array(e.L.kk),e.g.STATIC_DRAW),e.oa=e.g.createBuffer(),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.oa),e.g.bufferData(e.g.ARRAY_BUFFER,new Float32Array(e.L.gk),e.g.STATIC_DRAW),e.ea=e.g.createBuffer(),e.g.bindBuffer(e.g.ELEMENT_ARRAY_BUFFER,e.ea),e.g.bufferData(e.g.ELEMENT_ARRAY_BUFFER,new Uint16Array(e.L.indices),e.g.STATIC_DRAW)}function Gse(e){e.Z=e.g.createTexture(),e.g.bindTexture(e.g.TEXTURE_2D,e.Z),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_WRAP_S,e.g.CLAMP_TO_EDGE),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_WRAP_T,e.g.CLAMP_TO_EDGE),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_MIN_FILTER,e.g.NEAREST),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_MAG_FILTER,e.g.NEAREST)}function Js(e,n){n=n===void 0?!0:n;var s=e.sa.Ac()==Tr;!e.i||e.i.readyState<2||!s&&e.i.playbackRate==0||(FI(e.J,e.j*Math.PI/180,1.5625),e.m=="cubemap"?FI(e.J,e.j*Math.PI/180,2.5):FI(e.J,e.j*Math.PI/180,1.5625),e.g.useProgram(e.l),e.g.clear(e.g.COLOR_BUFFER_BIT),Pj(e),n&&(e.g.activeTexture(e.g.TEXTURE0),e.g.bindTexture(e.g.TEXTURE_2D,e.Z),e.g.pixelStorei(e.g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),e.g.texImage2D(e.g.TEXTURE_2D,0,e.g.RGBA,e.g.RGBA,e.g.UNSIGNED_BYTE,e.i)),(e.m=="equirectangular"||e.m=="halfequirectangular")&&(Qx(e.O,e.F,e.W),Qx(e.O,e.J,e.O)),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.aa),e.g.vertexAttribPointer(e.T,3,e.g.FLOAT,!1,0,0),e.g.enableVertexAttribArray(e.T),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.oa),e.g.vertexAttribPointer(e.R,2,e.g.FLOAT,!1,0,0),e.g.enableVertexAttribArray(e.R),e.g.bindBuffer(e.g.ELEMENT_ARRAY_BUFFER,e.ea),e.m=="cubemap"?(e.g.uniformMatrix4fv(e.g.getUniformLocation(e.l,"uProjectionMatrix"),!1,e.J),e.g.uniformMatrix4fv(e.g.getUniformLocation(e.l,"uModelViewMatrix"),!1,e.O)):e.g.uniformMatrix4fv(e.g.getUniformLocation(e.l,"u_VPMatrix"),!1,e.O),e.g.uniform1i(e.g.getUniformLocation(e.l,"uSampler"),0),e.P&&e.g.viewport(0,0,e.u.width/2,e.u.height),e.g.drawElements(e.g.TRIANGLES,e.L.indices.length,e.g.UNSIGNED_SHORT,0),e.P&&(e.g.viewport(e.u.width/2,0,e.u.width/2,e.u.height),e.g.drawElements(e.g.TRIANGLES,e.L.indices.length,e.g.UNSIGNED_SHORT,0)))}function Pj(e){var n=e.i.videoWidth;n||(n=e.u.scrollWidth);var s=e.i.videoHeight;if(s||(s=e.u.scrollHeight),e.ya!==n||e.ua!==s){e.u.width=n,e.u.height=s,e.ya=n,e.ua=s;var a=n/s,u=e.J,f=-a,p=1/(a-f);u[0]=0*p,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=0,u[6]=0,u[7]=0,u[8]=(a+f)*p,u[9]=0,u[10]=-1,u[11]=-1,u[12]=0,u[13]=0,u[14]=-0,u[15]=0,e.J=u,e.g.viewport(0,0,n,s)}}function Nf(e,n,s,a){var u=1/0,f=90*Math.PI/180;e.m=="halfequirectangular"&&(u=90*Math.PI/180,f/=2);var p=e.m=="cubemap"?e.O:e.F;if(e.H+=n,e.I+=s,e.H<u&&e.H>-u){u=Math.sin(n),n=Math.cos(n);var g=p[0],y=p[1],w=p[2],b=p[3],I=p[8],L=p[9],j=p[10],U=p[11];p!==p&&(p[4]=p[4],p[5]=p[5],p[6]=p[6],p[7]=p[7],p[12]=p[12],p[13]=p[13],p[14]=p[14],p[15]=p[15]),p[0]=g*n-I*u,p[1]=y*n-L*u,p[2]=w*n-j*u,p[3]=b*n-U*u,p[8]=g*u+I*n,p[9]=y*u+L*n,p[10]=w*u+j*n,p[11]=b*u+U*n}else e.H-=n;e.I<f&&e.I>-f?(f=Fl(),u=Fl(),n=-1*s,s=Math.sin(n),n=Math.cos(n),g=u[4],y=u[5],w=u[6],b=u[7],I=u[8],L=u[9],j=u[10],U=u[11],u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=g*n+I*s,f[5]=y*n+L*s,f[6]=w*n+j*s,f[7]=b*n+U*s,f[8]=I*n-g*s,f[9]=L*n-y*s,f[10]=j*n-w*s,f[11]=U*n-b*s,Qx(p,f,p)):e.I-=s,s=Fl(),f=Fl(),u=Math.sin(a),a=Math.cos(a),n=f[0],g=f[1],y=f[2],w=f[3],b=f[4],I=f[5],L=f[6],j=f[7],f!==s&&(s[8]=f[8],s[9]=f[9],s[10]=f[10],s[11]=f[11],s[12]=f[12],s[13]=f[13],s[14]=f[14],s[15]=f[15]),s[0]=n*a+b*u,s[1]=g*a+I*u,s[2]=y*a+L*u,s[3]=w*a+j*u,s[4]=b*a-n*u,s[5]=I*a-g*u,s[6]=L*a-y*u,s[7]=j*a-w*u,Qx(p,s,p),Js(e,!1)}function GI(e,n){(n===void 0||n)&&(BI(e.h,e.F),e.V=0,e.D=$I(),e.D[0]=(e.h[0]-e.M[0])/20,e.D[1]=(e.h[1]-e.M[1])/20,e.D[2]=(e.h[2]-e.M[2])/20,e.D[3]=(e.h[3]-e.M[3])/20),e.h[0]-=e.D[0],e.h[1]-=e.D[1],e.h[2]-=e.D[2],e.h[3]-=e.D[3],n=Fl(),jse(e.h,e.h),_j(n,e.h),e.F=n,e.K&&(e.K.stop(),e.K=null),e.V<20?e.K=new Ke(function(){GI(e,!1),e.H=0,e.I=0,e.V++,Js(e,!1)}).Y(.025):(_j(n,e.M),e.F=n)}function HI(e,n,s,a,u,f){Tt.call(this);var p=this;this.i=e,this.j=n,this.G=s,this.L=a,this.F=u,this.H=f,this.u=new Dt,this.h=new Dt,this.A=qI(this.j),this.g=null,this.m=!1,this.K=this.J=this.I=this.D=this.C=0,this.l=null,this.u.o(a,"loading",function(){p.g&&GI(p.g),Pd(p)}),this.u.o(a,"spatialvideoinfo",function(g){switch(g=g.detail,g.projection){case"rect":p.l=null;break;case"equi":p.l="equirectangular";break;case"hequ":switch(g.hfov){case 360:p.l="equirectangular";break;case 180:p.l="halfequirectangular";break;default:g.hfov==null?p.l="halfequirectangular":p.l=null}break;case"fish":p.l="halfequirectangular";break;default:p.l=null}Pd(p)}),this.u.o(a,"nospatialvideoinfo",function(){p.l=null,Pd(p)}),this.u.o(a,"unloading",function(){p.l=null,Pd(p)}),this.u.o(this.H,"caststatuschanged",function(){Pd(p)}),Pd(this)}V(HI,Tt),d=HI.prototype,d.release=function(){this.u&&(this.u.release(),this.u=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Tt.prototype.release.call(this)},d.configure=function(e){this.F=e,Pd(this)},d.Qg=function(){return this.j?!!this.A:!!qI(document.createElement("canvas"))},d.Yb=function(){return!!this.g},d.be=function(){this.g?this.g.be():$e("Not playing VR content")},d.Fh=function(e){this.g?Nf(this.g,e*Dd,0,0):$e("Not playing VR content")},d.Dh=function(e){this.g?Nf(this.g,0,e*Dd,0):$e("Not playing VR content")},d.Eh=function(e){this.g?Nf(this.g,0,0,e*Dd):$e("Not playing VR content")};function Pd(e){var n=e.H.F.Pa();!e.F.displayInVrMode&&!e.l||n?e.j&&e.g&&(e.j.style.display="none",e.h.Ta(),e.g.release(),e.g=null,e.dispatchEvent(new _e("vrstatuschanged",new Map().set("newStatus",e.Yb())))):(e.j||(e.j=document.createElement("canvas"),e.j.classList.add("shaka-vr-canvas-container"),e.G.parentElement.insertBefore(e.j,e.G.nextElementSibling),e.A=qI(e.j)),n=e.l||e.F.defaultVrProjectionMode,e.g?e.g.m!=n&&(e.h.Ta(),e.g.release(),Dj(e,n)):(e.j.style.display="",Dj(e,n),e.dispatchEvent(new _e("vrstatuschanged",new Map().set("newStatus",e.Yb())))))}function Dj(e,n){e.A&&e.j&&(e.g=new VI(e.G,e.L,e.j,e.A,n),Hse(e))}function qI(e){if(!e||!l.WebGLRenderingContext)return null;for(var n=C(["webgl2","webgl"]),s=n.next();!s.done;s=n.next())if(s=e.getContext(s.value))return s;return null}function Hse(e){e.h.o(e.i,"mousedown",function(a){if(!e.m){var u=a.clientX;a=a.clientY,e.m=!0,e.C=u,e.D=a}}),navigator.maxTouchPoints>0&&e.h.o(e.i,"touchstart",function(a){if(!e.m){var u=a.touches[0].clientX;a=a.touches[0].clientY,e.m=!0,e.C=u,e.D=a}}),e.h.o(e.i,"wheel",function(a){if(!e.m){var u=e.g,f=a.deltaY;f/=50,u.j>=20&&u.j<=100&&(u.j+=f),u.j<20?u.j=20:u.j>100&&(u.j=100),Js(u,!1),a.preventDefault(),a.stopPropagation()}}),e.h.o(e.i,"mousemove",function(a){e.m&&Nj(e,a.clientX,a.clientY)}),navigator.maxTouchPoints>0&&e.h.o(e.i,"touchmove",function(a){e.m&&Nj(e,a.touches[0].clientX,a.touches[0].clientY),a.preventDefault()}),e.h.o(e.i,"mouseleave",function(){e.m=!1}),e.h.o(e.i,"mouseup",function(){e.m=!1}),navigator.maxTouchPoints>0&&e.h.o(e.i,"touchend",function(){e.m=!1});var n=!1;if(l.DeviceOrientationEvent)if(typeof DeviceMotionEvent.requestPermission=="function"){var s=function(){DeviceMotionEvent.requestPermission().then(function(a){a!=="granted"||n||(n=!0,KI(e))})};DeviceMotionEvent.requestPermission().then(function(a){e.h.Ea(e.i,"click",s),e.h.Ea(e.i,"mouseup",s),navigator.maxTouchPoints>0&&e.h.Ea(e.i,"touchend",s),a!=="granted"?(e.h.qa(e.i,"click",s),e.h.qa(e.i,"mouseup",s),navigator.maxTouchPoints>0&&e.h.qa(e.i,"touchend",s)):(n=!0,KI(e))}).catch(function(){e.h.Ea(e.i,"click",s),e.h.Ea(e.i,"mouseup",s),navigator.maxTouchPoints>0&&e.h.Ea(e.i,"touchend",s),e.h.qa(e.i,"click",s),e.h.qa(e.i,"mouseup",s),navigator.maxTouchPoints>0&&e.h.qa(e.i,"touchend",s)})}else n=!0,KI(e)}function KI(e){e.h.o(l,"deviceorientation",function(n){if(e.g){var s=(n.alpha||0)-e.I,a=(n.beta||0)-e.J,u=(n.gamma||0)-e.K;(Math.abs(s)>10||Math.abs(a)>10||Math.abs(u)>5)&&(a=u=s=0),e.I=n.alpha||0,e.J=n.beta||0,e.K=n.gamma||0,n=screen.orientation.angle,n==90||n==-90?Nf(e.g,s*Dd*-1,u*Dd*-1,0):Nf(e.g,s*Dd*-1,a*Dd,0)}})}function Nj(e,n,s){var a=-.6*Math.PI/180;Nf(e.g,(n-e.C)*a,(s-e.D)*-1*a,0),e.C=n,e.D=s}var Dd=Math.PI/180;function De(e,n,s,a,u){Tt.call(this);var f=this;this.aa=!0,this.g=u,this.F=new $n(s,e,this.g.castReceiverAppId,this.g.castAndroidReceiverCompatible),this.ua=!0,this.C=this.F.Wc(),this.u=s,this.m=this.F.Xb(),this.ea=e,this.l=n,this.Ob=a,this.sa=this.m.xf(),this.A=this.j=null,this.V=!1,this.K=[],this.$a=[],this.Na=!1,this.L=new Ke(function(){f.l.classList.add("no-cursor"),f.Na=!1,ta(f)}),this.oa=new Ke(function(){f.i.removeAttribute("shown"),eT(f),WI(f),f.Z&&f.Z.Ui(),f.P.Y(f.g.closeMenusDelay)}),this.P=new Ke(function(){for(var p=C(f.K),g=p.next();!g.done;g=p.next())He(g.value,!1);f.g.enableTooltips&&f.H.classList.add("shaka-tooltips-on")}),this.Fa=new Ke(function(){f.Ca()&&tT(f)}),this.R=null,this.J=[],this.ya=coe(),this.h=new Dt,this.D=null,this.configure(this.g),roe(this),ioe(this),this.W=new Set,YI(this),this.Fa.xa(this.g.refreshTickInSeconds),this.h.o(this.ya,"locale-changed",function(p){p=p.locales[0],f.sa.setLocale(p),f.l.setAttribute("lang",p)}),this.sa.initInterstitial(this.G,this.ea,this.u),this.h.o(this.m,"texttrackvisibility",function(){WI(f)}),this.h.o(this.m,"unloading",function(){f.j||(f.wb()&&r0(f),f.Nd()&&f.dd())})}V(De,Tt),d=De.prototype,d.destroy=function(e){e=e===void 0?!1:e;var n=this;return X(function(s){switch(s.g){case 1:if(document.pictureInPictureElement!=n.u){s.B(2);break}return O(s,document.exitPictureInPicture(),2);case 2:if(n.h&&(n.h.release(),n.h=null),n.L&&(n.L.stop(),n.L=null),n.oa&&(n.oa.stop(),n.oa=null),n.P&&(n.P.stop(),n.P=null),n.Fa&&(n.Fa.stop(),n.Fa=null),n.D&&(n.D.release(),n.D=null),Mj(n),n.i&&(n.l.removeChild(n.i),n.i=null),!n.F){s.B(4);break}return O(s,n.F.destroy(e),5);case 5:n.F=null;case 4:if(n.M&&(n.l.removeChild(n.M),n.M=null),n.G&&(n.l.removeChild(n.G),n.G=null),n.I&&(n.l.removeChild(n.I),n.I=null),!n.ea){s.B(6);break}return O(s,n.ea.destroy(),7);case 7:n.ea=null;case 6:n.m=null,n.u=null,n.C=null,n.ya=null,n.W.clear(),soe(n),Tt.prototype.release.call(n),re(s)}})};function Mj(e){for(var n=C(e.J),s=n.next();!s.done;s=n.next())s.value.release();e.J=[]}function Qn(e,n){XI.set(e,n)}d.tk=function(e){this.ua=e,YI(this)},d.Ol=function(){ta(this)},d.configure=function(e){var n=this;this.g=e,this.F.Si(e.castReceiverAppId,e.castAndroidReceiverCompatible),this.A&&(this.A=null),this.La&&(this.La=null),this.Z&&(this.Z=null),this.D&&this.D.configure(e),this.i?(Ra(this.i),Mj(this)):(zse(this),noe(this),this.D=new HI(this.i,this.Ob,this.u,this.m,this.g,this)),this.l.classList.add("shaka-video-container"),this.u.classList.add("shaka-video"),Yse(this),this.g.addBigPlayButton&&Wse(this),this.g.customContextMenu&&(this.Z=new Ku(this.H,this),this.J.push(this.Z)),this.M||Qse(this),this.g.seekOnTaps&&(Jse(this),Zse(this)),eoe(this),this.K=Array.from(this.l.getElementsByClassName("shaka-settings-menu")),this.K.push.apply(this.K,K(Array.from(this.l.getElementsByClassName("shaka-overflow-menu")))),this.$a=Array.from(this.l.getElementsByClassName("shaka-show-controls-on-mouse-over")),ta(this),e=C(this.l.getElementsByClassName("shaka-no-propagation"));for(var s=e.next();!s.done;s=e.next()){s=s.value;var a=function(u){return u.stopPropagation()};this.h.o(s,"click",a),this.h.o(s,"dblclick",a),navigator.maxTouchPoints>0&&this.h.o(s,"touchend",function(u){n.Ca()&&u.stopPropagation()})}},d.ji=function(e){(this.aa=e)?(this.l.setAttribute("shaka-controls","true"),this.u.tabIndex=-1,this.u.controls=!1):this.l.removeAttribute("shaka-controls"),ta(this)},d.Rj=function(e){this.u.controls=e,this.u.tabIndex=e?0:-1,e&&this.ji(!1)},d.getAd=function(){return this.j},d.Ik=function(){return this.F},d.Zk=function(){return this.ya},d.Bl=function(){return this.l},d.Wc=function(){return this.C},d.Yk=function(){return this.u},d.Xb=function(){return this.m},d.Xk=function(){return this.ea},d.Pk=function(){return this.i},d.ol=function(){return this.I},d.Lk=function(){return this.G},d.Mk=function(){return this.g},d.Ll=function(){return this.V},d.mi=function(e){(this.V=e)?this.L.stop():this.L.Y(3)},d.Gl=function(){return this.ua},d.wh=function(){return this.A?this.A.getValue():this.C.currentTime},d.Sj=function(e){this.R=e},d.Nc=function(){return this.K.some(function(e){return!e.classList.contains("shaka-hidden")})},d.Xc=function(){this.P.Ka()};function Jx(e){return!(!document.fullscreenEnabled||e.u.webkitSupportsFullscreen&&e.g.preferVideoFullScreenInVisionOS&&ht().Oa()=="APPLE_VR")}function zI(e){return"documentPictureInPicture"in l&&e.g.preferDocumentPictureInPicture}d.Ae=function(){return this.F.Pa()?!1:!!(Jx(this)||(!this.j||!this.j.isUsingAnotherMediaElement())&&this.u.webkitSupportsFullscreen)},d.wb=function(){if(Jx(this))return!!document.fullscreenElement;var e=this.u;return e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1};function Oj(e){var n,s,a;return X(function(u){switch(u.g){case 1:if(ce(u,2),!Jx(e)){n=e.u,n.webkitSupportsFullscreen&&n.webkitEnterFullscreen(),u.B(4);break}if(!e.Nd()){u.B(5);break}return O(u,e.dd(),6);case 6:if(!zI(e)){u.B(5);break}return O(u,new Promise(function(f){new Ke(f).Y(.05)}),5);case 5:return s=e.g.fullScreenElement,O(u,s.requestFullscreen({navigationUI:"hide"}),9);case 9:if(!e.g.forceLandscapeOnFullscreen||!screen.orientation){u.B(4);break}return ce(u,11),O(u,screen.orientation.lock("landscape"),13);case 13:se(u,4,2);break;case 11:ue(u,2);case 4:se(u,0);break;case 2:a=ue(u),e.dispatchEvent(new _e("error",new Map().set("detail",a))),re(u)}})}function r0(e){var n;return X(function(s){return Jx(e)?(screen.orientation&&screen.orientation.unlock(),O(s,document.exitFullscreen(),0)):(n=e.u,n.webkitSupportsFullscreen&&n.webkitExitFullscreen(),s.B(0))})}d.ug=function(){var e=this;return X(function(n){return e.wb()?O(n,r0(e),0):O(n,Oj(e),0)})},d.Jf=function(){return this.F.Pa()?!1:document.pictureInPictureEnabled||zI(this)?!this.u.disablePictureInPicture:!1},d.Nd=function(){return!!(l.documentPictureInPicture&&l.documentPictureInPicture.window||document.pictureInPictureElement)},d.dd=function(){var e=this,n,s;return X(function(a){switch(a.g){case 1:if(ce(a,2),zI(e)){if(!e.wb()){a.B(10);break}return O(a,r0(e),10)}return document.pictureInPictureElement?O(a,document.exitPictureInPicture(),5):(e.wb()&&r0(e),n=e.u,O(a,n.requestPictureInPicture(),5));case 10:return O(a,qse(e),5);case 5:se(a,0);break;case 2:s=ue(a),e.dispatchEvent(new _e("error",new Map().set("detail",s))),re(a)}})};function qse(e){var n,s,a,u,f,p;return X(function(g){if(g.g==1)return l.documentPictureInPicture.window?(l.documentPictureInPicture.window.close(),g.return()):(n=e.l,s=n.getBoundingClientRect(),O(g,l.documentPictureInPicture.requestWindow({width:s.width,height:s.height}),2));a=g.h,Kse(a),u=n.parentNode||document.body,f=e.l.cloneNode(!0),f.style.visibility="hidden",f.style.height=getComputedStyle(n).height,u.appendChild(f),p=document.createElement("style"),p.append(`[data-shaka-player-container] {
      width: 100% !important; max-height: 100%}`),a.document.head.append(p),a.document.body.append(n),e.h.qa(a,"pagehide",function(){f.replaceWith(n)}),re(g)})}function Kse(e){var n=[].concat(K(document.styleSheets)).map(function(a){try{return[].concat(K(a.cssRules)).map(function(f){return f.cssText}).join("")}catch{var u=document.createElement("link");u.rel="stylesheet",u.type=a.type,u.media=a.media,u.href=a.href,e.document.head.appendChild(u)}return""}).filter(Boolean).join(`
`),s=document.createElement("style");s.textContent=n,e.document.head.appendChild(s)}d.Xj=function(){He(this.T,!0),this.G&&this.G.hasChildNodes()&&He(this.G,!0),this.I&&this.I.hasChildNodes()&&He(this.I,!0),this.j.hasCustomClick()?this.i.setAttribute("ad-active","true"):this.i.removeAttribute("ad-active")},d.hj=function(){He(this.T,!1),He(this.G,!1),He(this.I,!1),this.i.removeAttribute("ad-active")};function i0(e){if(e.aa){if(e.j&&(e.j&&e.j.isPaused()?e.j.play():e.j&&e.j.pause(),e.j.isLinear()))return;e.C.duration&&(e.C.paused&&!e.V?(e.m.isEnded()&&(e.C.currentTime=e.m.wa().start),e.C.play()):e.C.pause())}}function zse(e){e.i=Ne("div"),e.i.classList.add("shaka-controls-container"),e.l.appendChild(e.i),e.l.setAttribute("shaka-controls","true"),e.h.o(e.i,"touchend",function(n){e.C.duration&&(e.Ca()?(e.R=Date.now(),s0(e,!0)):Nd(e,n),n.cancelable&&n.preventDefault())}),e.h.o(e.i,"click",function(){s0(e)}),e.h.o(e.i,"dblclick",function(){e.g.doubleClickForFullscreen&&e.Ae()&&e.ug()})}function Wse(e){var n=Ne("div");n.classList.add("shaka-play-button-container"),e.i.appendChild(n),e.La=new zx(n,e),e.J.push(e.La)}function Yse(e){var n=Ne("div");n.classList.add("shaka-scrim-container"),e.i.appendChild(n)}function Xse(e){e.T=Ne("div"),e.T.classList.add("shaka-ad-controls");var n=e.j!=null&&e.j.isLinear();He(e.T,n),e.O.appendChild(e.T),n=new Xx(e.T,e),e.J.push(n)}function Qse(e){e.M=Ne("div"),e.M.classList.add("shaka-spinner-container"),e.l.appendChild(e.M);var n=Ne("div");n.classList.add("shaka-spinner"),e.M.appendChild(n),n.insertAdjacentHTML("beforeend",`<svg focusable="false" stroke="currentColor"
         viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg"
         width="50px" height="50px" class="q-spinner text-grey-9">
      <g transform="translate(1 1)" stroke-width="6" fill="none"
        fill-rule="evenodd">
        <circle stroke-opacity=".5" cx="18" cy="18" r="16"></circle>
        <path d="M34 18c0-9.94-8.06-16-16-16">
          <animateTransform attributeName="transform" type="rotate"
            from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite">
          </animateTransform>
        </path>
      </g>
    </svg>`)}function Jse(e){var n=Ne("div");n.classList.add("shaka-hidden-fast-forward-container"),e.i.appendChild(n),e.jb=new LI(n,e),e.J.push(e.jb)}function Zse(e){var n=Ne("div");n.classList.add("shaka-hidden-rewind-container"),e.i.appendChild(n),e.kb=new PI(n,e),e.J.push(e.kb)}function eoe(e){e.O=Ne("div"),e.O.classList.add("shaka-bottom-controls"),e.O.classList.add("shaka-no-propagation"),e.i.appendChild(e.O),e.h.o(e.O,"click",function(u){u.target.closest(".shaka-overflow-button")||e.Xc()}),Xse(e),toe(e),e.H=Ne("div"),e.H.classList.add("shaka-controls-button-panel"),e.H.classList.add("shaka-show-controls-on-mouse-over"),e.g.enableTooltips&&e.H.classList.add("shaka-tooltips-on"),e.O.appendChild(e.H);for(var n=C(e.g.controlPanelElements),s=n.next();!s.done;s=n.next())if(s=s.value,XI.get(s)){var a=XI.get(s).create(e.H,e);e.J.push(a),s=="time_and_duration"&&(s=new Kx(e.H,e),e.J.push(s))}else $e("Unrecognized control panel element requested:",s)}function toe(e){if(e.g.addSeekBar)e.A=Uj.create(e.O,e),e.J.push(e.A);else{for(var n=C(e.K),s=n.next();!s.done;s=n.next())s.value.classList.add("shaka-low-position");e=e.H,e.classList.contains("shaka-tooltips-on")&&e.classList.add("shaka-tooltips-low-position")}}function noe(e){e.G=Ne("div"),e.G.classList.add("shaka-client-side-ad-container"),He(e.G,!1),e.h.o(e.G,"click",function(){s0(e)}),e.l.appendChild(e.G),e.I=Ne("div"),e.I.classList.add("shaka-server-side-ad-container"),He(e.I,!1),e.h.o(e.I,"click",function(){s0(e)}),e.l.appendChild(e.I)}function roe(e){e.h.o(e.m,"buffering",function(){Zx(e)}),Zx(e),e.h.o(l,"keydown",function(n){loe(e,n)}),e.h.o(l,"click",function(){return e.Xc()}),e.h.o(e,"submenuopen",function(){e.Xc()}),e.h.o(e.C,"play",function(){ta(e)}),e.h.o(e.C,"pause",function(){ta(e)}),e.h.o(e.l,"mousemove",function(n){Nd(e,n)}),e.h.o(e.l,"touchmove",function(n){Nd(e,n)},{passive:!0}),e.h.o(e.l,"touchend",function(n){Nd(e,n)},{passive:!0}),e.h.o(e.l,"mouseleave",function(){e.R||e.L.Ka()}),e.h.o(e.l,"wheel",function(n){Nd(e,n)},{passive:!0}),e.h.o(e.F,"caststatuschanged",function(){YI(e)}),e.h.o(e.D,"vrstatuschanged",function(){e.dispatchEvent(new _e("vrstatuschanged"))}),e.h.o(e.l,"keydown",function(n){e.g.enableKeyboardPlaybackControlsInWindow||e.wb()||jj(e,n)}),e.h.o(e.l,"keyup",function(n){e.g.enableKeyboardPlaybackControlsInWindow||e.wb()||e.W.delete(n.key)}),e.h.o(l,"keydown",function(n){(e.g.enableKeyboardPlaybackControlsInWindow||e.wb())&&jj(e,n)}),e.h.o(l,"keyup",function(n){(e.g.enableKeyboardPlaybackControlsInWindow||e.wb())&&e.W.delete(n.key)}),e.h.o(e.sa,"ad-started",function(n){e.j=n.ad,e.Xj(),Zx(e)}),e.h.o(e.sa,"ad-stopped",function(){e.j=null,e.hj(),Zx(e)}),screen.orientation&&e.h.o(screen.orientation,"change",function(){return X(function(n){return O(n,ooe(e),0)})})}function ioe(e){if(e.g.setupMediaSession&&navigator.mediaSession){var n=function(f,p){try{navigator.mediaSession.setActionHandler(f,function(g){p(g)})}catch{}},s=function(){if(e.j&&e.j.isLinear())a();else{var f=e.m.wa(),p=f.end-f.start;f=parseFloat((e.C.currentTime-f.start).toFixed(2)),e.m.U()&&Math.abs(p-f)<1&&(p=1/0);try{navigator.mediaSession.setPositionState({duration:Math.max(0,p),playbackRate:e.C.playbackRate,position:Math.max(0,f)})}catch{}}},a=function(){try{navigator.mediaSession.setPositionState()}catch{}},u=function(f){var p=e.g.keyboardSeekDistance;switch(f.action){case"pause":i0(e);break;case"play":i0(e);break;case"seekbackward":if(f.seekOffset&&!isFinite(f.seekOffset))break;e.j&&e.j.isLinear()||Bl(e,e.A.getValue()-(f.seekOffset||p));break;case"seekforward":if(f.seekOffset&&!isFinite(f.seekOffset))break;e.j&&e.j.isLinear()||Bl(e,e.A.getValue()+(f.seekOffset||p));break;case"seekto":if(f.seekTime&&!isFinite(f.seekTime))break;e.j&&e.j.isLinear()||Bl(e,e.m.wa().start+f.seekTime);break;case"stop":e.m.wc();break;case"enterpictureinpicture":e.j&&e.j.isLinear()||e.dd()}};n("pause",u),n("play",u),n("seekbackward",u),n("seekforward",u),n("seekto",u),n("stop",u),("documentPictureInPicture"in l||document.pictureInPictureEnabled)&&n("enterpictureinpicture",u),n=function(){e.m.U()||e.m.wa().start!=0?(s(),e.h.o(e.C,"timeupdate",s)):a()},e.m.Jh()&&n(),e.h.o(e.m,"loaded",n),e.h.o(e.m,"unloading",function(){e.h.Ea(e.C,"timeupdate",s)}),e.h.o(e.m,"metadata",function(f){if(f=f.payload){var p;f.key=="TIT2"&&f.data&&(p=f.data);var g;f.key=="APIC"&&f.mimeType=="-->"&&(g=f.data),p&&(f={title:p,artwork:[]},navigator.mediaSession.metadata&&(f=navigator.mediaSession.metadata,f.title=p),navigator.mediaSession.metadata=new MediaMetadata(f)),g&&(p=e.u,g!=p.poster&&(p.poster=g),p={title:"",artwork:[{src:g}]},navigator.mediaSession.metadata&&(p=navigator.mediaSession.metadata,p.artwork=[{src:g}]),navigator.mediaSession.metadata=new MediaMetadata(p))}})}}function soe(e){if(e.g.setupMediaSession&&navigator.mediaSession){try{navigator.mediaSession.setPositionState()}catch{}e=function(n){try{navigator.mediaSession.setActionHandler(n,null)}catch{}},e("pause"),e("play"),e("seekbackward"),e("seekforward"),e("seekto"),e("stop"),e("enterpictureinpicture")}}function ooe(e){return X(function(n){return e.C&&e.C.readyState!=0&&!e.F.Pa()&&e.g.enableFullscreenOnRotation&&e.Ae()?screen.orientation.type.includes("landscape")&&!e.wb()?O(n,Oj(e),0):screen.orientation.type.includes("portrait")&&e.wb()?O(n,r0(e),0):n.B(0):n.return()})}function Nd(e,n){n.type=="mousemove"&&(e.i.classList.remove("shaka-keyboard-navigation"),ta(e)),n.type=="touchstart"||n.type=="touchmove"||n.type=="touchend"||n.type=="keyup"?e.R=Date.now():e.R+1e3<Date.now()&&(e.R=null),e.R&&n.type=="mousemove"||(e.l.classList.remove("no-cursor"),e.Na=!0,e.P.stop(),e.Ca()||(tT(e),ta(e)),e.L.stop(),n.type!="touchend"&&n.type!="wheel"&&n.type!="keyup"&&e.R||e.L.Y(3))}function aoe(e){return l.matchMedia("hover: hover").matches?e.$a.some(function(n){return n.matches(":hover")}):!1}function WI(e){var n=e.l.getElementsByClassName("shaka-text-container")[0];n&&(e.Ca()?n.style.bottom=e.O.clientHeight+"px":n.style.bottom="0px")}function ta(e){var n=e.j?e.j.isPaused():!1,s=e.C.paused&&!e.V,a=e.i.classList.contains("shaka-keyboard-navigation");n||(!e.j||!e.j.isLinear())&&s||e.Na||a||aoe(e)?(tT(e),e.i.getAttribute("shown")==null&&(e.i.setAttribute("shown","true"),eT(e)),WI(e),e.oa.stop()):e.oa.Y(e.g.fadeDelay),e.Nc()&&e.H.classList.remove("shaka-tooltips-on")}function s0(e,n){n=n===void 0?!1:n,e.aa&&!e.Yb()&&(e.Nc()?e.P.Ka():e.g.singleClickForPlayAndPause?i0(e):n&&e.Ca()&&e.ij())}function YI(e){var n=e.F.Pa();e.dispatchEvent(new _e("caststatuschanged",new Map().set("newStatus",n))),n?e.i.getAttribute("casting")==null&&(e.i.setAttribute("casting","true"),eT(e)):e.i.getAttribute("casting")!=null&&(e.i.removeAttribute("casting"),eT(e))}function jj(e,n){var s=document.activeElement,a=s&&s.classList?s.classList.contains("shaka-volume-bar"):!1,u=s&&s.classList&&s.classList.contains("shaka-seek-bar"),f=e.wb();if(s=e.i.contains(s),f=f||e.g.enableKeyboardPlaybackControlsInWindow,s&&Nd(e,n),e.g.enableKeyboardPlaybackControls&&e.m.jd()){var p=e.g.keyboardSeekDistance,g=e.g.keyboardLargeSeekDistance;switch(n.key){case"ArrowLeft":e.A&&p>0&&(u||f)&&!a&&(n.preventDefault(),Bl(e,e.A.getValue()-p));break;case"ArrowRight":e.A&&p>0&&(u||f)&&!a&&(n.preventDefault(),Bl(e,e.A.getValue()+p));break;case"PageDown":e.A&&g>0&&(u||f)&&(n.preventDefault(),Bl(e,e.A.getValue()-g));break;case"PageUp":e.A&&g>0&&(u||f)&&(n.preventDefault(),Bl(e,e.A.getValue()+g));break;case"Home":e.A&&Bl(e,e.m.wa().start);break;case"End":e.A&&Bl(e,e.m.wa().end);break;case"c":e.m.ae(!e.m.Yc());break;case"f":e.Ae()&&e.ug();break;case"m":e.j&&e.j.isLinear()?e.j.setMuted(!e.j.isMuted()):e.u.muted=!e.u.muted;break;case"p":e.Jf()&&e.dd();break;case">":n=e.g.playbackRates.indexOf(e.m.Za()),n>-1&&n+1<e.g.playbackRates.length&&e.m.vc(e.g.playbackRates[n+1],!1);break;case"<":n=e.g.playbackRates.indexOf(e.m.Za()),n>-1&&n-1>=0&&e.m.vc(e.g.playbackRates[n-1],!1);break;case" ":(u||f&&!s)&&i0(e)}}}function Zx(e){e.aa&&(e.j&&e.j.isClientRendering()&&e.j.isLinear()?He(e.M,!1):He(e.M,e.m.Hf()))}d.Ca=function(){return this.aa?this.i.getAttribute("shown")!=null||this.i.getAttribute("casting")!=null:!1};function eT(e){e.Ca()?e.dispatchEvent(new _e("showingui")):e.dispatchEvent(new _e("hidingui"))}function Bl(e,n){e.C.currentTime=n,tT(e)}function tT(e){if(e.A)if(e.A.setValue(e.C.currentTime),e.A.update(),e.A.isShowing()){for(var n=C(e.K),s=n.next();!s.done;s=n.next())s.value.classList.remove("shaka-low-position");n=e.H,n.classList.contains("shaka-tooltips-on")&&n.classList.remove("shaka-tooltips-low-position")}else{for(n=C(e.K),s=n.next();!s.done;s=n.next())s.value.classList.add("shaka-low-position");n=e.H,n.classList.contains("shaka-tooltips-on")&&n.classList.add("shaka-tooltips-low-position")}e.dispatchEvent(new _e("timeandseekrangeupdated"))}function loe(e,n){e.W.add(n.key);var s=e.Nc();n.key=="Tab"&&(e.i.classList.add("shaka-keyboard-navigation"),ta(e),e.h.o(l,"mousedown",function(){e.h.Ea(l,"mousedown")})),n.key=="Escape"&&e.P.Ka(),s&&e.W.has("Tab")&&uoe(e,n)}function uoe(e,n){var s=e.K.filter(function(f){return!f.classList.contains("shaka-hidden")});if(s.length){var a=s[0];if(a.childNodes.length){for(s=a.firstElementChild;s&&s.classList.contains("shaka-hidden");)s=s.nextElementSibling;for(a=a.lastElementChild;a&&a.classList.contains("shaka-hidden");)a=a.previousElementSibling;var u=document.activeElement;e.W.has("Shift")?u==s&&(n.preventDefault(),a.focus()):u==a&&(n.preventDefault(),s.focus())}}}d.Bm=function(){var e=new Event("mousemove",{bubbles:!1,cancelable:!1});Nd(this,e)},d.ij=function(){this.L.Ka()},d.Qg=function(){return this.D.Qg()},d.Yb=function(){return this.D.Yb()},d.zl=function(){var e=this.D;if(e.g){e=e.g,BI(e.h,e.F);var n=e.h,s=0;e=0,e=n[0];var a=n[1],u=n[2];n=n[3],s=a*a;var f=u*u,p=n*n;s=e*e+s+f+p;var g=e*n-a*u;g>.499995*s?(s=Math.PI/2,e=2*Math.atan2(a,e)):g<-.499995*s?(s=-Math.PI/2,e=2*Math.atan2(a,e)):(s=Math.asin(2*(e*u-n*a)),e=Math.atan2(2*(e*n+a*u),1-2*(f+p))),e=Math.acos(Math.cos(e)*Math.cos(s))*180/Math.PI}else $e("Not playing VR content"),e=null;return e},d.yl=function(){var e=this.D;return e.g?e=e.g.j:($e("Not playing VR content"),e=null),e},d.zm=function(e){var n=this.D;n.g?(e<0?($e("Field of view should be greater than 0"),e=0):e>100&&($e("Field of view should be less than 100"),e=100),n=n.g,n.j=e,Js(n,!1)):$e("Not playing VR content")},d.be=function(){this.D.be()},d.Fh=function(e){this.D.Fh(e)},d.Dh=function(e){this.D.Dh(e)},d.Eh=function(e){this.D.Eh(e)};function coe(){var e=new xr("en");return e.Xa("ar",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_STATISTICS"," "],["AD_TIME",": [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME","  "],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["QUALITY",""],["RECENTER_VR"," "],["REPLAY"," "],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_AD"," "],["SKIP_TO_LIVE","   "],["STATISTICS",""],["SUBTITLE_FORCED"," "],["SURROUND"," "],["TOGGLE_STEREOSCOPIC","    "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]])),e.Xa("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung[AD_ON] von[NUM_ADS]"],["AD_STATISTICS","Anzeigenstatistiken"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["CHAPTERS","Kapitel"],["DOWNLOAD_VIDEO_FRAME","Videoframe speichern"],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild im Bild aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild im Bild beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["QUALITY","Qualitt"],["RECENTER_VR","Zentrieren"],["REPLAY","Noch einmal wiedergeben"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Suche"],["SKIP_AD","berspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["STATISTICS","Statistiken"],["SUBTITLE_FORCED","Erzwungen"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Einstellung stereoskopisch ein/ausschalten"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstrke"]])),e.Xa("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_STATISTICS","Ad statistics"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["CHAPTERS","Chapters"],["DOWNLOAD_VIDEO_FRAME","Save video frame"],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["RECENTER_VR","Recenter"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_NEXT","Next"],["SKIP_PREVIOUS","Previous"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Toggle stereoscopic"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.Xa("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_STATISTICS","Ad statistics"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["CHAPTERS","Chapters"],["DOWNLOAD_VIDEO_FRAME","Save video frame"],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["RECENTER_VR","Recentre"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Toggle stereoscopic"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),e.Xa("es",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estadsticas del anuncio"],["AD_TIME","Anuncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Enviar..."],["CHAPTERS","Captulos"],["DOWNLOAD_VIDEO_FRAME","Guardar fotograma"],["ENTER_LOOP_MODE","Reproducir en bucle el vdeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vdeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rpidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Ms ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["QUALITY","Calidad"],["RECENTER_VR","Volver a centrar"],["REPLAY","Volver a reproducir"],["RESOLUTION","Resolucin"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_NEXT","Siguiente"],["SKIP_PREVIOUS","Anterior"],["SKIP_TO_LIVE","Ir al vdeo en directo"],["STATISTICS","Estadsticas"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["TOGGLE_STEREOSCOPIC","Activar/Desactivar estereoscpica"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.Xa("es-419",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estadsticas de anuncios"],["AD_TIME","Anuncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir..."],["CHAPTERS","Captulos"],["DOWNLOAD_VIDEO_FRAME","Guardar fotograma"],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repeticin indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Ms opciones de configuracin"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["QUALITY","Calidad"],["RECENTER_VR","Volver a centrar"],["REPLAY","Volver a reproducir"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisin en vivo"],["STATISTICS","Estadsticas"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Sonido envolvente"],["TOGGLE_STEREOSCOPIC","Activar o desactivar el modo estereoscpico"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.Xa("fr",new Map([["AD_DURATION","Dure de l'annonce"],["AD_PROGRESS","Annonce[AD_ON] sur[NUM_ADS]"],["AD_STATISTICS","Statistiques sur les annonces"],["AD_TIME","Annonce: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["CHAPTERS","Chapitres"],["DOWNLOAD_VIDEO_FRAME","Tlcharger l'image de la vido"],["ENTER_LOOP_MODE","Lire en boucle la vido en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_LOOP_MODE","Arrter la lecture en boucle de la vido en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le modePIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Rpter"],["MORE_SETTINGS","Plus de paramtres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","Active"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["QUALITY","Qualit"],["RECENTER_VR","Recentrer"],["REPLAY","Revoir"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_NEXT","Suivante"],["SKIP_PREVIOUS","Prcdente"],["SKIP_TO_LIVE","Accder  la partie la plus rcente du direct"],["STATISTICS","Statistiques"],["SUBTITLE_FORCED","Forc"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Activer/Dsactiver le mode stroscopique"],["UNDETERMINED_LANGUAGE","Langue indtermine"],["UNMUTE","Ractiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),e.Xa("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_STATISTICS","Statistiche sugli annunci"],["AD_TIME","Annuncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["CHAPTERS","Capitoli"],["DOWNLOAD_VIDEO_FRAME","Salva fotogramma"],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocit di riproduzione"],["QUALITY","Qualit"],["RECENTER_VR","Ricentra"],["REPLAY","Riproduci di nuovo"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["STATISTICS","Statistiche"],["SUBTITLE_FORCED","Forzata"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Pulsante di attivazione/disattivazione stereoscopico"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),e.Xa("ja",new Map([["AD_DURATION",""],["AD_PROGRESS","[AD_ON]  [NUM_ADS] "],["AD_STATISTICS",""],["AD_TIME",": [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE",""],["QUALITY",""],["RECENTER_VR",""],["REPLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["STATISTICS",""],["SUBTITLE_FORCED",""],["SURROUND",""],["TOGGLE_STEREOSCOPIC",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.Xa("ko",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_STATISTICS"," "],["AD_TIME",": [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME","  "],["ENTER_LOOP_MODE","   "],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","    "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["PLAYBACK_RATE"," "],["QUALITY",""],["RECENTER_VR"," "],["REPLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD"," "],["SKIP_TO_LIVE","  "],["STATISTICS",""],["SUBTITLE_FORCED",""],["SURROUND",""],["TOGGLE_STEREOSCOPIC","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),e.Xa("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_STATISTICS","Advertentiestatistieken"],["AD_TIME","Advertentie: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["CHAPTERS","Hoofdstukken"],["DOWNLOAD_VIDEO_FRAME","Videoframe opslaan"],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Geluid uitzetten"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["QUALITY","Kwaliteit"],["RECENTER_VR","Opnieuw centreren"],["REPLAY","Opnieuw afspelen"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["STATISTICS","Statistieken"],["SUBTITLE_FORCED","Afgedwongen"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Stereoscopisch aan-/uitzetten"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Geluid aanzetten"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),e.Xa("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama[AD_ON] z[NUM_ADS]"],["AD_STATISTICS","Statystyki reklam"],["AD_TIME","Reklama: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["CHAPTERS","Rozdziay"],["DOWNLOAD_VIDEO_FRAME","Zapisz klatk filmu"],["ENTER_LOOP_MODE","Odtwarzaj biecy film wptli"],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu wobrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_LOOP_MODE","Wycz odtwarzanie biecego filmu wptli"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu wobrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["LOOP","Odtwarzaj wptli"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzykw"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz wobrazie"],["PLAY","Odtwrz"],["PLAYBACK_RATE","Szybko odtwarzania"],["QUALITY","Jako"],["RECENTER_VR","Wyrodkuj"],["REPLAY","Odtwrz ponownie"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_AD","Pomi reklam"],["SKIP_NEXT","Dalej"],["SKIP_PREVIOUS","Poprzedni"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["STATISTICS","Statystyki"],["SUBTITLE_FORCED","Wymuszone"],["SURROUND","Przestrzenny"],["TOGGLE_STEREOSCOPIC","Przecz tryb stereoskopowy"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]])),e.Xa("pt-BR",new Map([["AD_DURATION","Durao do anncio"],["AD_PROGRESS","Anncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estatsticas de anncios"],["AD_TIME","Anncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automtica"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["CHAPTERS","Captulos"],["DOWNLOAD_VIDEO_FRAME","Salvar frame do vdeo"],["ENTER_LOOP_MODE","Repetir o vdeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetio do vdeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definies"],["MULTIPLE_LANGUAGES","Vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reproduo"],["QUALITY","Qualidade"],["RECENTER_VR","Centralizar"],["REPLAY","Repetir"],["RESOLUTION","Resoluo"],["REWIND","Voltar"],["SEEK","Procurar"],["SKIP_AD","Pular anncio"],["SKIP_TO_LIVE","Pular para transmisso ao vivo"],["STATISTICS","Estatsticas"],["SUBTITLE_FORCED","Exibio forada"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Alternar imagem estereoscpica"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]])),e.Xa("ru",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_STATISTICS"," "],["AD_TIME",": [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME","  "],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["LOOP",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF","."],["ON","."],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["QUALITY",""],["RECENTER_VR"," "],["REPLAY",""],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE","     "],["STATISTICS",""],["SUBTITLE_FORCED"," "],["SURROUND"," "],["TOGGLE_STEREOSCOPIC","    "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),e.Xa("th",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]  [NUM_ADS] "],["AD_STATISTICS",""],["AD_TIME",": [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["QUALITY",""],["RECENTER_VR",""],["REPLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["STATISTICS",""],["SUBTITLE_FORCED",""],["SURROUND",""],["TOGGLE_STEREOSCOPIC","/"],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.Xa("tr",new Map([["AD_DURATION","Reklam sresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_STATISTICS","Reklam istatistikleri"],["AD_TIME","Reklam: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["CHAPTERS","Blmler"],["DOWNLOAD_VIDEO_FRAME","Video karesini kaydet"],["ENTER_LOOP_MODE","Mevcut videoyu dngye al"],["ENTER_PICTURE_IN_PICTURE","Pencere iinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_LOOP_MODE","Mevcut videonun dngsn durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere inde Pencereden k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["LOOP","Dng"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geerli deil"],["OFF","Kapal"],["ON","Ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere inde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","alma hz"],["QUALITY","Kalite"],["RECENTER_VR","Ortala"],["REPLAY","Tekrar Oynat"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklam Atla"],["SKIP_TO_LIVE","Canl yayna atla"],["STATISTICS","statistikler"],["SUBTITLE_FORCED","Zorunlu"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Stereoskopik modu a/kapat"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]])),e.Xa("zh",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_STATISTICS",""],["AD_TIME","[AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["QUALITY",""],["RECENTER_VR",""],["REPLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["STATISTICS",""],["SUBTITLE_FORCED",""],["SURROUND",""],["TOGGLE_STEREOSCOPIC",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.Xa("zh-TW",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_STATISTICS",""],["AD_TIME","[AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["QUALITY",""],["RECENTER_VR",""],["REPLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["STATISTICS",""],["SUBTITLE_FORCED",""],["SURROUND",""],["TOGGLE_STEREOSCOPIC",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.Ri(navigator.languages||[]),e}xe("shaka.ui.Controls",De),De.prototype.incrementRoll=De.prototype.Eh,De.prototype.incrementPitch=De.prototype.Dh,De.prototype.incrementYaw=De.prototype.Fh,De.prototype.toggleStereoscopicMode=De.prototype.be,De.prototype.setVRFieldOfView=De.prototype.zm,De.prototype.getVRFieldOfView=De.prototype.yl,De.prototype.getVRNorth=De.prototype.zl,De.prototype.isPlayingVR=De.prototype.Yb,De.prototype.canPlayVR=De.prototype.Qg,De.prototype.hideUI=De.prototype.ij,De.prototype.showUI=De.prototype.Bm,De.prototype.isOpaque=De.prototype.Ca,De.prototype.hideAdUI=De.prototype.hj,De.prototype.showAdUI=De.prototype.Xj,De.prototype.togglePiP=De.prototype.dd,De.prototype.isPiPEnabled=De.prototype.Nd,De.prototype.isPiPAllowed=De.prototype.Jf,De.prototype.toggleFullScreen=De.prototype.ug,De.prototype.isFullScreenEnabled=De.prototype.wb,De.prototype.isFullScreenSupported=De.prototype.Ae,De.prototype.hideSettingsMenus=De.prototype.Xc,De.prototype.anySettingsMenusAreOpen=De.prototype.Nc,De.prototype.setLastTouchEventTime=De.prototype.Sj,De.prototype.getDisplayTime=De.prototype.wh,De.prototype.isCastAllowed=De.prototype.Gl,De.prototype.setSeeking=De.prototype.mi,De.prototype.isSeeking=De.prototype.Ll,De.prototype.getConfig=De.prototype.Mk,De.prototype.getClientSideAdContainer=De.prototype.Lk,De.prototype.getServerSideAdContainer=De.prototype.ol,De.prototype.getControlsContainer=De.prototype.Pk,De.prototype.getLocalPlayer=De.prototype.Xk,De.prototype.getPlayer=De.prototype.Xb,De.prototype.getLocalVideo=De.prototype.Yk,De.prototype.getVideo=De.prototype.Wc,De.prototype.getVideoContainer=De.prototype.Bl,De.prototype.getLocalization=De.prototype.Zk,De.prototype.getCastProxy=De.prototype.Ik,De.prototype.getAd=De.prototype.getAd,De.prototype.setEnabledNativeControls=De.prototype.Rj,De.prototype.setEnabledShakaControls=De.prototype.ji,De.prototype.configure=De.prototype.configure,De.prototype.loadComplete=De.prototype.Ol,De.prototype.allowCast=De.prototype.tk,De.registerSeekBar=function(e){Uj=e},De.registerElement=Qn,De.prototype.destroy=De.prototype.destroy;var XI=new Map,Uj=new OI;function o0(e,n){function s(){return Fj(a)}ot.call(this,e,n);var a=this;this.m=this.controls.g,this.l=this.controls.i,this.u=this.controls.l,this.j=[],doe(this),this.g=Ne("div"),this.g.classList.add("shaka-overflow-menu"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-hidden"),this.l.appendChild(this.g),hoe(this),this.eventManager.o(this.localization,"locale-updated",function(){QI(a)}),this.eventManager.o(this.localization,"locale-changed",function(){QI(a)}),this.eventManager.o(this.adManager,"ad-started",function(){a.ad&&a.ad.isLinear()&&He(a.h,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){He(a.h,!0)}),this.eventManager.o(this.controls,"submenuopen",function(){He(a.g,!1)}),this.eventManager.o(this.g,"touchstart",function(u){a.controls.Sj(Date.now()),u.stopPropagation()}),this.eventManager.o(this.h,"click",function(){a.controls.Ca()&&foe(a)}),QI(this),this.ad&&this.ad.isLinear()&&He(this.h,!1),this.i=null,l.ResizeObserver?(this.i=new ResizeObserver(s),this.i.observe(this.controls.l)):this.eventManager.o(l,"resize",s)}V(o0,ot),o0.prototype.release=function(){this.l=null;for(var e=C(this.j),n=e.next();!n.done;n=e.next())n.value.release();this.j=[],this.i&&(this.i.disconnect(),this.i=null),ot.prototype.release.call(this)};function bi(e,n){JI.set(e,n)}function doe(e){e.h=Tn(),e.h.classList.add("shaka-overflow-menu-button"),e.h.classList.add("shaka-no-propagation"),e.h.classList.add("shaka-tooltip"),new En(e.h).use("M433-80q-27 0-46.5-18T363-142l-9-66q-13-5-24.5-12T307-235l-62 26q-25 11-50 2t-39-32l-47-82q-14-23-8-49t27-43l53-40q-1-7-1-13.5v-27q0-6.5 1-13.5l-53-40q-21-17-27-43t8-49l47-82q14-23 39-32t50 2l62 26q11-8 23-15t24-12l9-66q4-26 23.5-44t46.5-18h94q27 0 46.5 18t23.5 44l9 66q13 5 24.5 12t22.5 15l62-26q25-11 50-2t39 32l47 82q14 23 8 49t-27 43l-53 40q1 7 1 13.5v27q0 6.5-2 13.5l53 40q21 17 27 43t-8 49l-48 82q-14 23-39 32t-50-2l-60-26q-11 8-23 15t-24 12l-9 66q-4 26-23.5 44T527-80h-94Zm49-260q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Z");var n=Ne("span");n.classList.add("shaka-overflow-quality-mark"),n.style.display="none",e.h.appendChild(n),e.parent.appendChild(e.h)}function hoe(e){for(var n=C(e.m.overflowMenuButtons),s=n.next();!s.done;s=n.next())s=s.value,JI.get(s)?(s=JI.get(s),e.j.push(s.create(e.g,e.controls))):$e("Unrecognized overflow menu element requested:",s)}function foe(e){if(e.controls.Nc())e.controls.Xc();else{He(e.g,!0),ta(e.controls);var n=function(s){return s.classList.contains("shaka-hidden")==0};Rm(e.g.childNodes,n)&&Ea(e.g.childNodes,n)[0].focus(),Fj(e)}}function QI(e){e.h.ariaLabel=e.localization.resolve("MORE_SETTINGS")}function Fj(e){var n=e.g.getBoundingClientRect(),s=l.getComputedStyle(e.g),a=parseFloat(s.paddingTop);s=parseFloat(s.paddingBottom);var u=e.u.getBoundingClientRect();e.g.style.maxHeight=n.bottom-u.top-a-s+"px"}xe("shaka.ui.OverflowMenu",o0),o0.registerElement=bi;function Bj(){}Bj.prototype.create=function(e,n){return new o0(e,n)},Qn("overflow_menu",new Bj);var JI=new Map;function nT(e,n){function s(u){return a.i[u]}ot.call(this,e,n);var a=this;this.h=Tn(),this.h.classList.add("shaka-ad-statistics-button"),this.u=new En(this.h,"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Zm120 200q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.A=Ne("span"),e.appendChild(this.A),this.l=Ne("span"),this.l.classList.add("shaka-current-selection-span"),e.appendChild(this.l),this.h.appendChild(e),this.parent.appendChild(this.h),this.g=Ne("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-ad-statistics-container"),this.g.classList.add("shaka-hidden"),this.controls.i.appendChild(this.g),this.D=[],this.i=this.adManager.getStats(),He(this.h,this.i.started>0),this.m=new Map,this.C=new Map().set("loadTimes",function(u){var f=0;u=C(a.i[u]);for(var p=u.next();!p.done;p=u.next())f+=parseFloat(p.value);return f}).set("averageLoadTime",s).set("started",s).set("overlayAds",s).set("playedCompletely",s).set("skipped",s).set("errors",s),this.j=new Ke(function(){a.i=a.adManager.getStats();for(var u=C(a.D),f=u.next();!f.done;f=u.next())f=f.value,a.m.get(f).textContent=a.C.get(f)(f)}),rT(this),moe(this),this.eventManager.o(this.localization,"locale-updated",function(){rT(a)}),this.eventManager.o(this.localization,"locale-changed",function(){rT(a)}),this.eventManager.o(this.h,"click",function(){a.controls.Ca()&&($j(a),rT(a))}),this.eventManager.o(this.player,"loading",function(){He(a.h,!1)}),this.eventManager.o(this.adManager,"ad-started",function(){He(a.h,!0)})}V(nT,ot);function $j(e){e.g.classList.contains("shaka-hidden")?(e.u.use("M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm120-440q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z"),e.j.xa(.1),He(e.g,!0)):(e.u.use("M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Zm120 200q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z"),e.j.stop(),He(e.g,!1))}function rT(e){e.A.textContent=e.localization.resolve("AD_STATISTICS"),e.h.ariaLabel=e.localization.resolve("AD_STATISTICS"),e.l.textContent=e.localization.resolve(e.g.classList.contains("shaka-hidden")?"OFF":"ON")}function poe(e,n){var s=Ne("div"),a=Ne("label");return a.textContent=n+":",s.appendChild(a),a=Ne("span"),a.textContent=e.C.get(n)(n),s.appendChild(a),e.m.set(n,a),s}function moe(e){var n=Ne("div");n.classList.add("shaka-no-propagation"),n.classList.add("shaka-statistics-close");var s=new En(n,"M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z").g;for(s.classList.add("material-icons","notranslate"),e.g.appendChild(n),e.eventManager.o(s,"click",function(){$j(e)}),n=C(e.controls.g.adStatisticsList),s=n.next();!s.done;s=n.next())s=s.value,s in e.i?(e.g.appendChild(poe(e,s)),e.D.push(s)):$e("Unrecognized ad statistic element:",s)}nT.prototype.release=function(){this.j.stop(),this.j=null,ot.prototype.release.call(this)},xe("shaka.ui.AdStatisticsButton",nT);function ZI(){}ZI.prototype.create=function(e,n){return new nT(e,n)},bi("ad_statistics",new ZI),Rd("ad_statistics",new ZI);function eC(e,n){ot.call(this,e,n);var s=this;this.g=Tn(),this.g.classList.add("shaka-airplay-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",new En(this.g).use("M80-280v-480q0-33 23.5-56.5T160-840h640q33 0 56.5 23.5T880-760v480q0 33-23.5 56.5T800-200h-80q-17 0-28.5-11.5T680-240q0-17 11.5-28.5T720-280h80v-480H160v480h80q17 0 28.5 11.5T280-240q0 17-11.5 28.5T240-200h-80q-33 0-56.5-23.5T80-280Zm232 160q-14 0-22-9.5t-8-20.5q0-5 2-10.5t7-10.5l161-161q6-6 13-9t15-3q8 0 15 3t13 9l161 161q5 5 7 10.5t2 10.5q0 11-8 20.5t-22 9.5H312Zm168-360Z"),l.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.i=Ne("span"),e.appendChild(this.i),this.h=Ne("span"),this.h.classList.add("shaka-current-selection-span"),e.appendChild(this.h),this.g.appendChild(e),this.parent.appendChild(this.g),tC(this),Vj(this),this.eventManager.o(this.localization,"locale-updated",function(){tC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){tC(s)}),this.eventManager.o(this.g,"click",function(){s.controls.Ca()&&s.controls.Wc().webkitShowPlaybackTargetPicker()}),e=this.controls.Wc(),this.eventManager.o(e,"webkitplaybacktargetavailabilitychanged",function(a){var u=s.player.Ac()==Si;He(s.g,a.availability=="available"&&u)}),this.eventManager.o(e,"webkitcurrentplaybacktargetiswirelesschanged",function(){Vj(s)})}V(eC,ot);function Vj(e){var n=e.controls.Wc();e.g.ariaPressed=n&&n.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function tC(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY"),e.i.textContent=e.localization.resolve("AIRPLAY")}xe("shaka.ui.AirPlayButton",eC);function nC(){}nC.prototype.create=function(e,n){return new eC(e,n)},bi("airplay",new nC),Qn("airplay",new nC);function Ma(e,n){ot.call(this,e,n);var s=this;this.g=document.createElement("canvas"),this.g.style.position="absolute",this.g.style.top="0",this.g.style.left="0",this.g.style.pointerEvents="none",this.parent.appendChild(this.g),iT(this),this.i=this.h=null,l.ResizeObserver?(this.i=new ResizeObserver(function(){return iT(s)}),this.i.observe(this.parent)):l.addEventListener("resize",function(){return iT(s)})}V(Ma,ot);function Gj(e){return(e=e.g.getContext("2d"))?e:null}function iT(e){e.g.width=e.parent.offsetWidth,e.g.height=e.parent.offsetHeight}Ma.prototype.ng=function(e,n){if(e={type:"static",text:e,position:"top-right",color:"rgba(255, 255, 255, 0.7)",size:20,alpha:.7,interval:2e3,skip:500,displayDuration:2e3,transitionDuration:.5},n=Object.assign({},e,n||e),n.type==="static"){if(e=Gj(this)){e.clearRect(0,0,this.g.width,this.g.height),e.globalAlpha=n.alpha,e.fillStyle=n.color,e.font=n.size+"px Arial";var s=e.measureText(n.text);switch(n.position){case"top-left":s=20;var a=n.size+20;break;case"top-right":s=this.g.width-s.width-20,a=n.size+20;break;case"bottom-left":s=20,a=this.g.height-20;break;case"bottom-right":s=this.g.width-s.width-20,a=this.g.height-20;break;default:s=(this.g.width-s.width)/2,a=(this.g.height+n.size)/2}e.fillText(n.text,s,a)}}else n.type==="dynamic"&&goe(this,n)};function goe(e,n){function s(){if(e.h){switch(u.clearRect(0,0,e.g.width,e.g.height),g){case"fadeIn":p=Math.min(n.alpha,p+w),p>=n.alpha&&(g="display");break;case"display":--y<=0&&(g="fadeOut");break;case"fadeOut":p=Math.max(0,p-w),p<=0&&(g="transition",f=a(),y=Math.round(n.displayDuration*60),g="fadeIn")}p>0&&(u.globalAlpha=p,u.fillStyle=n.color,u.font=n.size+"px Arial",u.fillText(n.text,f.left,f.top)),e.h&&(e.h=requestAnimationFrame(s))}}function a(){u.font=n.size+"px Arial";var I=u.measureText(n.text).width,L=n.size;return I=[{left:20,top:L+20},{left:e.g.width-I-20,top:L+20},{left:20,top:e.g.height-20},{left:e.g.width-I-20,top:e.g.height-20},{left:(e.g.width-I)/2,top:(e.g.height+L)/2}],L=I[b],b=(b+1)%I.length,L}var u=e.g.getContext("2d"),f={left:0,top:0},p=0,g="fadeIn",y=Math.round(n.displayDuration*60),w=1/(Math.round(n.transitionDuration*60)/2),b=0;f=a(),e.h=requestAnimationFrame(s)}Ma.prototype.eg=function(){this.h&&(cancelAnimationFrame(this.h),this.h=null);var e=Gj(this);e&&e.clearRect(0,0,this.g.width,this.g.height)},Ma.prototype.release=function(){var e=this;this.g&&this.g.parentNode&&this.g.parentNode.removeChild(this.g),this.i?(this.i.disconnect(),this.i=null):l.removeEventListener("resize",function(){return iT(e)}),ot.prototype.release.call(this)},xe("shaka.ui.Watermark",Ma),Ma.prototype.removeWatermark=Ma.prototype.eg,Ma.prototype.setTextWatermark=Ma.prototype.ng;function ar(e,n,s,a){a=a===void 0?null:a,this.j=e,this.l=n,this.h=sT(this);var u="",f=!1;n.dataset&&n.dataset.shakaPlayerCastReceiverId?(f=n.dataset,u=f.shakaPlayerCastReceiverId,f=f.shakaPlayerCastAndroidReceiverCompatible==="true"):s.dataset&&s.dataset.shakaPlayerCastReceiverId&&(f=s.dataset,u=f.shakaPlayerCastReceiverId,f=f.shakaPlayerCastAndroidReceiverCompatible==="true"),u.length&&(this.h.castReceiverAppId=u,this.h.castAndroidReceiverCompatible=f),n.dataset.shakaPlayerContainer="",n.ui=this,this.Kh()&&n.classList.add("shaka-mobile"),this.g=new De(e,n,s,a,this.h),s.controls||e.ni(n),n.ui=this,s.ui=this,this.i=null}d=ar.prototype,d.destroy=function(e){e=e===void 0?!1:e;var n=this;return X(function(s){if(s.g==1)return n.g?O(s,n.g.destroy(e),2):s.B(2);if(s.g!=4)return n.g=null,n.j?O(s,n.j.destroy(),4):s.B(4);n.j=null,n.i=null,re(s)})},d.Kh=function(){return ht().Oa()=="MOBILE"},d.Lh=function(){return ht().Oa()=="TV"},d.getConfiguration=function(){var e=sT(this);return pg(e,this.h,sT(this),{},""),e},d.configure=function(e,n){arguments.length==2&&typeof e=="string"&&(e=mg(e,n));var s=Object.assign({},this.h);pg(s,e,sT(this),{},"");var a=p2(s,this.h);if(Object.keys(a).length&&(this.h=s,this.g.configure(this.h),this.g.dispatchEvent(new _e("uiupdated")),(s=this.h.castSenderUrl)&&this.h.castReceiverAppId&&l.chrome&&!chrome.cast&&!this.Lh())){a=!1;for(var u=C(document.getElementsByTagName("script")),f=u.next();!f.done;f=u.next())if(f.value.src===s){a=!0;break}a||(a=document.createElement("script"),a.src=s,a.defer=!0,document.head.appendChild(a))}},d.Ok=function(){return this.g},d.xm=function(e){this.g.ji(e)},d.ng=function(e,n){e&&!this.i&&this.l&&this.g&&(this.i=new Ma(this.l,this.g)),this.i&&this.i.ng(e,n)},d.eg=function(){this.i&&this.i.eg()};function sT(e){var n="play_pause skip_previous skip_next mute volume time_and_duration spacer overflow_menu".split(" ");if(l.chrome&&n.push("cast"),"remote"in HTMLMediaElement.prototype?n.push("remote"):l.WebKitPlaybackTargetAvailabilityEvent&&n.push("airplay"),n.push("fullscreen"),n={controlPanelElements:n,overflowMenuButtons:"captions quality language chapter picture_in_picture playback_rate recenter_vr toggle_stereoscopic".split(" "),statisticsList:"width height currentCodecs corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent manifestSizeBytes bytesDownloaded nonFatalErrorCount manifestPeriodCount manifestGapCount".split(" "),adStatisticsList:"loadTimes averageLoadTime started overlayAds playedCompletely skipped errors".split(" "),contextMenuElements:["loop","picture_in_picture","save_video_frame","statistics","ad_statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},qualityMarks:{720:"",1080:"HD",1440:"2K",2160:"4K",4320:"8K"},trackLabelFormat:a0,textTrackLabelFormat:a0,fadeDelay:0,closeMenusDelay:2,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!1,forceLandscapeOnFullscreen:!1,enableTooltips:!0,keyboardSeekDistance:5,keyboardLargeSeekDistance:60,fullScreenElement:e.l,preferDocumentPictureInPicture:!0,showAudioChannelCountVariants:!0,seekOnTaps:!1,tapSeekDistance:10,refreshTickInSeconds:.125,displayInVrMode:!1,defaultVrProjectionMode:"equirectangular",setupMediaSession:!0,preferVideoFullScreenInVisionOS:!0,showAudioCodec:!0,showVideoCodec:!0,castSenderUrl:"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",enableKeyboardPlaybackControlsInWindow:!1,alwaysShowVolumeBar:!1},e.Kh()){n.addBigPlayButton=!0,n.singleClickForPlayAndPause=!1,n.seekOnTaps=!0,n.enableTooltips=!1,n.doubleClickForFullscreen=!1,e=ht(),n.enableFullscreenOnRotation=e.Ja()!=="WEBKIT",n.forceLandscapeOnFullscreen=!0;var s=["play_pause","skip_previous","skip_next","volume"];n.controlPanelElements=n.controlPanelElements.filter(function(u){return!s.includes(u)}),n.overflowMenuButtons=n.overflowMenuButtons.filter(function(u){return!s.includes(u)}),n.contextMenuElements=n.contextMenuElements.filter(function(u){return!s.includes(u)})}else if(e.Lh()){n.addBigPlayButton=!0,n.singleClickForPlayAndPause=!1,n.enableTooltips=!1,n.doubleClickForFullscreen=!1;var a="play_pause cast remote airplay volume save_video_frame".split(" ");n.controlPanelElements=n.controlPanelElements.filter(function(u){return!a.includes(u)}),n.overflowMenuButtons=n.overflowMenuButtons.filter(function(u){return!a.includes(u)}),n.contextMenuElements=n.contextMenuElements.filter(function(u){return!a.includes(u)})}return n}function Hj(){var e,n,s,a,u,f,p,g,y,w,b,I,L,j,U,F,B,q,G,z,J,ie;return X(function(Y){switch(Y.g){case 1:if(l6(),!UM())return oT("shaka-ui-load-failed",zj),Y.return();if(e=document.querySelectorAll("[data-shaka-player-container]"),n=document.querySelectorAll("[data-shaka-player]"),s=document.querySelectorAll("[data-shaka-player-canvas]"),a=document.querySelectorAll("[data-shaka-player-vr-canvas]"),!n.length&&!e.length){Y.B(2);break}if(n.length&&!e.length){Y.B(3);break}u=C(e),f=u.next();case 5:if(f.done){Y.B(2);break}if(p=f.value,p.ui){Y.B(6);break}for(g=null,y=C(n),w=y.next();!w.done;w=y.next())if(b=w.value,b.parentElement==p){g=b;break}return g||(g=document.createElement("video"),g.setAttribute("playsinline",""),p.appendChild(g)),I=Kj(p,s,a),L=I.pj,j=I.pk,ce(Y,8),O(Y,qj(p,g,L,j),10);case 10:se(Y,6);break;case 8:return ue(Y),oT("shaka-ui-load-failed",rC),Y.return();case 6:f=u.next(),Y.B(5);break;case 3:U=C(n),F=U.next();case 11:if(F.done){Y.B(2);break}if(B=F.value,B.ui){Y.B(12);break}return q=document.createElement("div"),G=B.parentElement,G.replaceChild(q,B),q.appendChild(B),z=Kj(q,s,a),J=z.pj,ie=z.pk,ce(Y,14),O(Y,qj(q,B,J,ie),16);case 16:se(Y,12);break;case 14:return ue(Y),oT("shaka-ui-load-failed",rC),Y.return();case 12:F=U.next(),Y.B(11);break;case 2:oT("shaka-ui-loaded"),re(Y)}})}function oT(e,n){var s=null;n!=null&&(s={reasonCode:n}),e=new CustomEvent(e,{detail:s}),document.dispatchEvent(e)}function qj(e,n,s,a){var u,f,p,g,y,w,b,I,L,j;return X(function(U){switch(U.g){case 1:for(u=new ye,f=[],(p=n.getAttribute("src"))&&(f.push(p),n.removeAttribute("src")),g=C(n.getElementsByTagName("source")),y=g.next();!y.done;y=g.next())w=y.value,f.push(w.src),n.removeChild(w);return O(U,u.Ub(n),2);case 2:u.Li(s),b=new ar(u,e,n,a||null),n.controls&&b.g.Rj(!0),I=C(f),L=I.next();case 3:if(L.done){U.B(0);break}return j=L.value,ce(U,6),O(U,b.g.Xb().load(j),8);case 8:U.B(0);break;case 6:ue(U);case 4:L=I.next(),U.B(3)}})}function Kj(e,n,s){var a=null;n=C(n);for(var u=n.next();!u.done;u=n.next())if(u=u.value,u.parentElement==e){a=u;break}for(a||(a=document.createElement("canvas"),a.classList.add("shaka-canvas-container"),e.appendChild(a)),n=null,s=C(s),u=s.next();!u.done;u=s.next())if(u=u.value,u.parentElement==e){n=u;break}return{pj:a,pk:n}}xe("shaka.ui.Overlay",ar),ar.prototype.removeWatermark=ar.prototype.eg,ar.prototype.setTextWatermark=ar.prototype.ng,ar.prototype.setEnabled=ar.prototype.xm,ar.prototype.getControls=ar.prototype.Ok,ar.prototype.configure=ar.prototype.configure,ar.prototype.getConfiguration=ar.prototype.getConfiguration,ar.prototype.isSmartTV=ar.prototype.Lh,ar.prototype.isMobile=ar.prototype.Kh,ar.prototype.destroy=ar.prototype.destroy;var a0=0;ar.TrackLabelFormat={LANGUAGE:a0,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var zj=0,rC=1;ar.FailReasonCode={NO_BROWSER_SUPPORT:zj,PLAYER_FAILED_TO_LOAD:rC},document.readyState=="complete"?X(function(e){if(e.g==1)return O(e,Promise.resolve(),2);Hj(),re(e)}):l.addEventListener("load",Hj);function voe(e){function n(a){return{codecs:a.codecs,channelCount:a.channelCount,language:a.language,roles:a.roles,spatialAudio:a.spatialAudio}}var s=n(e[0]);return e.every(function(a){return JSON.stringify(n(a))===JSON.stringify(s)})}function yoe(e,n,s,a,u,f,p,g){function y(te){var ae="";return te=="aac"?ae="AAC":te==="ac-3"?ae="Dolby":te==="ec-3"?ae="DD+":te==="ac-4"?ae="Dolby AC-4":te==="opus"?ae="Opus":te==="flac"&&(ae="fLaC"),ae&&" "+ae}function w(te){var ae="";return te>=5&&(ae=" "+u.resolve("SURROUND")),ae}function b(te,ae,he,Ee,Te,ge){return ae=[te,ae,ge],p&&Ee!=null&&ae.push(Ee),g&&I(te)&&Te&&ae.push(Te),he&&f==3&&ae.push(he),ae.join(": ")}function I(te){return j.has(te)&&j.get(te).size>1}var L=e.find(function(te){return te.active==1});e.length>1&&e[0].label&&f!=3&&voe(e)&&(f=3);for(var j=new Map,U=C(e),F=U.next();!F.done;F=U.next())F=F.value,F.codecs&&(j.has(F.language)||j.set(F.language,new Set),j.get(F.language).add(Dn(F.codecs)));U=qx(n),Ra(n),n.appendChild(U),U=new Set,L=L?b(L.language,L.roles.join(", "),L.label,L.channelsCount,L.codecs&&Dn(L.codecs),L.spatialAudio):"",e=C(e);var B=e.next();for(F={};!B.done;F={cc:void 0},B=e.next()){F.cc=B.value,B=F.cc.language;var q=F.cc.roles.join(", "),G=F.cc.label,z=F.cc.channelsCount,J=F.cc.codecs&&Dn(F.cc.codecs),ie=F.cc.spatialAudio,Y=b(B,q,G,z,J,ie);if(!U.has(Y)){U.add(Y);var ne=Tn();ne.addEventListener("click",function(te){return function(){s(te.cc)}}(F));var Z=Ne("span");ne.appendChild(Z),Z.textContent=Wj(B,u);var de="";switch(g&&p&&ie&&(J=="ec-3"||J=="ac-4")?de+=" Dolby Atmos":(g&&I(B)&&(de+=y(J)),p&&(de+=w(z))),f){case a0:Z.textContent+=de;break;case 1:Z.textContent+=de,q?Z.textContent=q:($e("Track #"+JSON.stringify(F.cc)+" does not have a role, but the UI is configured to only show role."),Z.textContent="?");break;case 2:Z.textContent+=de,q&&(Z.textContent+=": "+q);break;case 3:G?Z.textContent=G:($e("Track #"+JSON.stringify(F.cc)+" does not have a label, but the UI is configured to only show labels."),Z.textContent="?")}Y==L&&(ne.appendChild(qu()),Z.classList.add("shaka-chosen-item"),ne.ariaSelected="true",a.textContent=Z.textContent),n.appendChild(ne)}}}function xoe(e,n,s,a,u,f,p){function g(z,J,ie,Y){return z=[z,J,Y],ie&&p==3&&z.push(ie),z.join(": ")}var y=e.find(function(z){return z.active==1}),w=qx(n);Ra(n),n.appendChild(w),w=new Set,y=y?g(y.language,y.roles.join(", "),y.label,y.forced):"",e=C(e);for(var b=e.next(),I={};!b.done;I={ed:void 0},b=e.next()){I.ed=b.value,b=I.ed.language;var L=I.ed.forced,j=f.resolve("SUBTITLE_FORCED"),U=I.ed.roles.join(", "),F=I.ed.label,B=g(b,U,F,L);if(!w.has(B)){w.add(B);var q=Tn();q.addEventListener("click",function(z){return function(){s(z.ed)}}(I));var G=Ne("span");switch(q.appendChild(G),G.textContent=Wj(b,f),p){case a0:L&&(G.textContent+=" ("+j+")");break;case 1:U?G.textContent=U:($e("Track #"+I.ed.id+" does not have a role, but the UI is configured to only show role."),G.textContent="?"),L&&(G.textContent+=" ("+j+")");break;case 2:U&&(G.textContent+=": "+U),L&&(G.textContent+=" ("+j+")");break;case 3:F?G.textContent=F:($e("Track #"+I.ed.id+" does not have a label, but the UI is configured to only show labels."),G.textContent="?")}a&&B==y&&(q.appendChild(qu()),G.classList.add("shaka-chosen-item"),q.ariaSelected="true",u.textContent=G.textContent),n.appendChild(q)}}}function Wj(e,n){if(!e&&!n)return"";switch(e){case"mul":return n.resolve("MULTIPLE_LANGUAGES");case"und":return n.resolve("UNDETERMINED_LANGUAGE");case"zxx":return n.resolve("NOT_APPLICABLE")}var s=id(e);return e in Ao?Ao[e]:s in Ao?Ao[s]+" ("+e+")":n.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function Zs(e,n,s){function a(){return iC(u)}ot.call(this,e,n);var u=this;this.m=this.controls.l,Toe(this,s),Soe(this),woe(this),this.eventManager.o(this.button,"click",function(){u.controls.Ca()&&(u.menu.classList.contains("shaka-hidden")?(u.controls.dispatchEvent(new _e("submenuopen")),He(u.menu,!0),Pf(u.menu),iC(u)):He(u.menu,!1))}),this.j=null,l.ResizeObserver?(this.j=new ResizeObserver(a),this.j.observe(this.controls.l)):this.eventManager.o(l,"resize",a)}V(Zs,ot),Zs.prototype.release=function(){this.j&&(this.j.disconnect(),this.j=null),ot.prototype.release.call(this)};function Toe(e,n){e.button=Tn(),e.button.classList.add("shaka-overflow-button"),e.icon=new En(e.button,n),n=Ne("label"),n.classList.add("shaka-overflow-button-label"),n.classList.add("shaka-overflow-menu-only"),n.classList.add("shaka-overflow-button-label-inline"),e.nameSpan=Ne("span"),n.appendChild(e.nameSpan),e.currentSelection=Ne("span"),e.currentSelection.classList.add("shaka-current-selection-span"),n.appendChild(e.currentSelection),e.button.appendChild(n),e.parent.appendChild(e.button)}function Soe(e){e.menu=Ne("div"),e.menu.classList.add("shaka-no-propagation"),e.menu.classList.add("shaka-show-controls-on-mouse-over"),e.menu.classList.add("shaka-settings-menu"),e.menu.classList.add("shaka-hidden"),e.backButton=Tn(),e.backButton.classList.add("shaka-back-to-overflow-button"),e.menu.appendChild(e.backButton),e.eventManager.o(e.backButton,"click",function(){e.controls.Xc()}),e.u=new En(e.backButton,"M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z"),e.backSpan=Ne("span"),e.backButton.appendChild(e.backSpan),e.controls.i.appendChild(e.menu)}function woe(e){e.parent.classList.contains("shaka-overflow-menu")&&(e.u.use("m432-480 156 156q11 11 11 28t-11 28q-11 11-28 11t-28-11L348-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 28-11t28 11q11 11 11 28t-11 28L432-480Z"),e.eventManager.o(e.menu,"click",function(){function n(s){return s.classList.contains("shaka-hidden")==0}He(e.menu,!1),He(e.parent,!0),Rm(e.parent.childNodes,n)&&Ea(e.parent.childNodes,n)[0].focus(),ta(e.controls),iC(e)}))}function iC(e){var n=e.menu.getBoundingClientRect(),s=l.getComputedStyle(e.menu),a=parseFloat(s.paddingTop);s=parseFloat(s.paddingBottom);var u=e.m.getBoundingClientRect();e.menu.style.maxHeight=n.bottom-u.top-a-s+"px"}xe("shaka.ui.SettingsMenu",Zs);function sC(e,n){Zs.call(this,e,n,"M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-155.5t86-127Q252-817 325-848.5T480-880q83 0 155.5 31.5t127 86q54.5 54.5 86 127T880-480q0 82-31.5 155t-86 127.5q-54.5 54.5-127 86T480-80Zm0-82q26-36 45-75t31-83H404q12 44 31 83t45 75Zm-104-16q-18-33-31.5-68.5T322-320H204q29 50 72.5 87t99.5 55Zm208 0q56-18 99.5-55t72.5-87H638q-9 38-22.5 73.5T584-178ZM170-400h136q-3-20-4.5-39.5T300-480q0-21 1.5-40.5T306-560H170q-5 20-7.5 39.5T160-480q0 21 2.5 40.5T170-400Zm216 0h188q3-20 4.5-39.5T580-480q0-21-1.5-40.5T574-560H386q-3 20-4.5 39.5T380-480q0 21 1.5 40.5T386-400Zm268 0h136q5-20 7.5-39.5T800-480q0-21-2.5-40.5T790-560H654q3 20 4.5 39.5T660-480q0 21-1.5 40.5T654-400Zm-16-240h118q-29-50-72.5-87T584-782q18 33 31.5 68.5T638-640Zm-234 0h152q-12-44-31-83t-45-75q-26 36-45 75t-31 83Zm-200 0h118q9-38 22.5-73.5T376-782q-56 18-99.5 55T204-640Z");var s=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.o(this.localization,"locale-updated",function(){oC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){oC(s)}),this.eventManager.o(this.player,"loading",function(){l0(s)}),this.eventManager.o(this.player,"loaded",function(){l0(s)}),this.eventManager.o(this.player,"unloading",function(){l0(s)}),this.eventManager.o(this.player,"audiotrackschanged",function(){l0(s)}),oC(this),l0(this)}V(sC,Zs);function l0(e){var n=e.player.getAudioTracks()||[];yoe(n,e.menu,function(s){e.player.Nj(s);var a={preferredAudioLanguage:s.language,preferSpatialAudio:s.spatialAudio};s.label&&(a.preferredAudioLabel=s.label),s.channelsCount&&(a.preferredAudioChannelCount=s.channelsCount),e.player.configure(a)},e.currentSelection,e.localization,e.controls.g.trackLabelFormat,e.controls.g.showAudioChannelCountVariants,e.controls.g.showAudioCodec),Pf(e.menu),e.controls.dispatchEvent(new _e("languageselectionupdated")),e.button.setAttribute("shaka-status",e.currentSelection.innerText),He(e.button,e.menu.getElementsByTagName("button").length>2)}function oC(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("LANGUAGE"),e.nameSpan.textContent=e.localization.resolve("LANGUAGE"),e.backSpan.textContent=e.localization.resolve("LANGUAGE")}xe("shaka.ui.AudioLanguageSelection",sC);function aC(){}aC.prototype.create=function(e,n){return new sC(e,n)},bi("language",new aC),Qn("language",new aC);function lC(e,n){ot.call(this,e,n);var s=this;this.h=this.controls.F,this.g=Tn(),this.g.classList.add("shaka-cast-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.l=new En(this.g,"M480-480Zm320 320H600q0-20-1.5-40t-4.5-40h206v-480H160v46q-20-3-40-4.5T80-680v-40q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160Zm-720 0v-120q50 0 85 35t35 85H80Zm200 0q0-83-58.5-141.5T80-360v-80q117 0 198.5 81.5T360-160h-80Zm160 0q0-75-28.5-140.5t-77-114q-48.5-48.5-114-77T80-520v-80q91 0 171 34.5T391-471q60 60 94.5 140T520-160h-80Z"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.j=Ne("span"),e.appendChild(this.j),this.i=Ne("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),uC(this),Yj(this),this.eventManager.o(this.localization,"locale-updated",function(){uC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){uC(s)}),this.eventManager.o(this.g,"click",function(){s.controls.Ca()&&Eoe(s)}),this.eventManager.o(this.controls,"caststatuschanged",function(){Yj(s)})}V(lC,ot);function Eoe(e){var n;X(function(s){if(s.g==1)return e.h.Pa()?(e.h.bk(),s.B(0)):(ce(s,3),e.g.disabled=!0,O(s,e.h.cast(),5));if(s.g!=3)return e.g.disabled=!1,se(s,0);n=ue(s),e.g.disabled=!1,n.code!=8004&&e.controls.dispatchEvent(new _e("error",new Map().set("detail",n))),re(s)})}function Yj(e){var n=e.h.Pg()&&e.controls.ua,s=e.h.Pa();He(e.g,n),e.l.use(s?"M720-600v240q0 17-11.5 28.5T680-320h-87q-8 0-14.5-4.5T569-337q-29-81-81.5-147T364-596q-16-10-11.5-27t21.5-17h306q17 0 28.5 11.5T720-600ZM320-160q-16 0-28-9.5T277-195q-11-63-56.5-107T112-357q-15-2-23.5-14.5T80-400q0-17 11-28.5t26-9.5q94 12 160.5 79T357-198q2 16-9 27t-28 11Zm160 0q-17 0-28.5-11T438-199q-14-128-104.5-217T115-518q-16-2-25.5-14T80-560q0-17 10.5-29t25.5-10q161 13 274 125.5T518-201q2 17-9.5 29T480-160Zm-340 0q-25 0-42.5-17.5T80-220q0-25 17.5-42.5T140-280q25 0 42.5 17.5T200-220q0 25-17.5 42.5T140-160Zm740-560v480q0 33-23.5 56.5T800-160H638q-17 0-28.5-11.5T598-200q0-17 11.5-28.5T638-240h162v-480H160v6q0 17-11.5 28.5T120-674q-17 0-28.5-11.5T80-714v-6q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720Z":"M480-480Zm320 320H600q0-20-1.5-40t-4.5-40h206v-480H160v46q-20-3-40-4.5T80-680v-40q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160Zm-720 0v-120q50 0 85 35t35 85H80Zm200 0q0-83-58.5-141.5T80-360v-80q117 0 198.5 81.5T360-160h-80Zm160 0q0-75-28.5-140.5t-77-114q-48.5-48.5-114-77T80-520v-80q91 0 171 34.5T391-471q60 60 94.5 140T520-160h-80Z"),n&&(e.g.ariaPressed=s?"true":"false"),Xj(e)}function Xj(e){e.i.textContent=e.h.Pa()?e.h.cg():e.localization.resolve("OFF")}function uC(e){e.g.ariaLabel=e.localization.resolve("CAST"),e.j.textContent=e.localization.resolve("CAST"),Xj(e)}xe("shaka.ui.CastButton",lC);function cC(){}cC.prototype.create=function(e,n){return new lC(e,n)},bi("cast",new cC),Qn("cast",new cC);function dC(e,n){Zs.call(this,e,n,"m400-200-182 91q-20 10-39-1.5T160-145v-495q0-33 23.5-56.5T240-720h320q33 0 56.5 23.5T640-640v495q0 23-19 34.5t-39 1.5l-182-91Zm360-40q-17 0-28.5-11.5T720-280v-520H320q-17 0-28.5-11.5T280-840q0-17 11.5-28.5T320-880h400q33 0 56.5 23.5T800-800v520q0 17-11.5 28.5T760-240Z");var s=this;this.button.classList.add("shaka-chapter-button"),this.menu.classList.add("shaka-chapters"),this.button.classList.add("shaka-tooltip-status"),this.g=[],this.h="und",this.eventManager.o(this.localization,"locale-updated",function(){hC(s),aT(s)}),this.eventManager.o(this.localization,"locale-changed",function(){hC(s),aT(s)}),this.eventManager.o(this.player,"unloading",function(){Qj(s),s.h="und",s.g=[]}),this.eventManager.o(this.player,"trackschanged",function(){aT(s)}),hC(this),aT(this)}V(dC,Zs);function hC(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("CHAPTERS"),e.nameSpan.textContent=e.localization.resolve("CHAPTERS"),e.backSpan.textContent=e.localization.resolve("CHAPTERS")}function Qj(e){var n=qx(e.menu);Ra(e.menu),e.menu.appendChild(n),He(e.button,!1)}function aT(e){var n,s,a,u,f,p,g,y,w,b,I,L,j;X(function(U){switch(U.g){case 1:n=function(F,B){return!F&&!B||F.id===B.id&&F.title===B.title&&F.startTime===B.startTime&&F.endTime===B.endTime},s="und",a=[],u=e.localization.g,f=C(Array.from(u)),p=f.next();case 2:if(p.done){U.B(4);break}if(s=p.value,!e.player){U.B(5);break}return O(U,e.player.uh(s),6);case 6:a=U.h||[];case 5:if(a.length){U.B(4);break}p=f.next(),U.B(2);break;case 4:if(a.length){U.B(7);break}if(s="und",!e.player){U.B(7);break}return O(U,e.player.uh(s),9);case 9:a=U.h||[];case 7:if(g=s!==e.h,y=e.g.length!==a.length||!e.g.some(function(F,B){return B=a.at(B),n(F,B)||a.some(function(q){return n(F,q)})}),e.h=s,e.g=a,!a.length)Qj(e);else if(g||y){for(w=C(e.g),b=w.next(),I={};!b.done;I={Rg:void 0},b=w.next())I.Rg=b.value,L=Tn(),j=Ne("span"),j.classList.add("shaka-chapter"),j.textContent=I.Rg.title,L.appendChild(j),e.eventManager.o(L,"click",function(F){return function(){e.controls.Ca()&&(e.video.currentTime=F.Rg.startTime)}}(I)),e.menu.appendChild(L);He(e.button,!0),Pf(e.menu)}re(U)}})}xe("shaka.ui.ChapterSelection",dC);function fC(){}fC.prototype.create=function(e,n){return new dC(e,n)},bi("chapter",new fC),Qn("chapter",new fC);function pC(e,n){ot.call(this,e,n);var s=this;this.g=Tn(),this.g.classList.add("shaka-fast-forward-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status","1x"),new En(this.g).use("M100-315v-330q0-18 12-29t28-11q5 0 11 1t11 5l248 166q9 6 13.5 14.5T428-480q0 10-4.5 18.5T410-447L162-281q-5 4-11 5t-11 1q-16 0-28-11t-12-29Zm400 0v-330q0-18 12-29t28-11q5 0 11 1t11 5l248 166q9 6 13.5 14.5T828-480q0 10-4.5 18.5T810-447L562-281q-5 4-11 5t-11 1q-16 0-28-11t-12-29Z"),this.parent.appendChild(this.g),mC(this),this.h=this.controls.g.fastForwardRates,this.eventManager.o(this.localization,"locale-updated",function(){mC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){mC(s)}),this.eventManager.o(this.g,"click",function(){if(s.controls.Ca()&&s.video.duration){var a=s.h.indexOf(s.player.Za())+1;a=a!=s.h.length?s.h[a]:s.h[0],s.video.paused&&s.video.play(),s.player.vc(a),s.g.setAttribute("shaka-status",a+"x")}}),this.eventManager.o(this.player,"ratechange",function(){s.g.setAttribute("shaka-status",s.player.Za()+"x")})}V(pC,ot);function mC(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}xe("shaka.ui.FastForwardButton",pC);function Jj(){}Jj.prototype.create=function(e,n){return new pC(e,n)},Qn("fast_forward",new Jj);function gC(e,n){ot.call(this,e,n);var s=this;this.h=this.controls.u,this.g=Tn(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("shaka-tooltip"),this.i=new En(this.g,"M200-200h80q17 0 28.5 11.5T320-160q0 17-11.5 28.5T280-120H160q-17 0-28.5-11.5T120-160v-120q0-17 11.5-28.5T160-320q17 0 28.5 11.5T200-280v80Zm560 0v-80q0-17 11.5-28.5T800-320q17 0 28.5 11.5T840-280v120q0 17-11.5 28.5T800-120H680q-17 0-28.5-11.5T640-160q0-17 11.5-28.5T680-200h80ZM200-760v80q0 17-11.5 28.5T160-640q-17 0-28.5-11.5T120-680v-120q0-17 11.5-28.5T160-840h120q17 0 28.5 11.5T320-800q0 17-11.5 28.5T280-760h-80Zm560 0h-80q-17 0-28.5-11.5T640-800q0-17 11.5-28.5T680-840h120q17 0 28.5 11.5T840-800v120q0 17-11.5 28.5T800-640q-17 0-28.5-11.5T760-680v-80Z"),u0(this),this.parent.appendChild(this.g),lT(this),this.eventManager.o(this.localization,"locale-updated",function(){lT(s)}),this.eventManager.o(this.localization,"locale-changed",function(){lT(s)}),this.eventManager.o(this.g,"click",function(){return X(function(a){return s.controls.Ca()?O(a,s.controls.ug(),0):a.return()})}),this.eventManager.o(document,"fullscreenchange",function(){s.i.use(s.controls.wb()?"M240-240h-80q-17 0-28.5-11.5T120-280q0-17 11.5-28.5T160-320h120q17 0 28.5 11.5T320-280v120q0 17-11.5 28.5T280-120q-17 0-28.5-11.5T240-160v-80Zm480 0v80q0 17-11.5 28.5T680-120q-17 0-28.5-11.5T640-160v-120q0-17 11.5-28.5T680-320h120q17 0 28.5 11.5T840-280q0 17-11.5 28.5T800-240h-80ZM240-720v-80q0-17 11.5-28.5T280-840q17 0 28.5 11.5T320-800v120q0 17-11.5 28.5T280-640H160q-17 0-28.5-11.5T120-680q0-17 11.5-28.5T160-720h80Zm480 0h80q17 0 28.5 11.5T840-680q0 17-11.5 28.5T800-640H680q-17 0-28.5-11.5T640-680v-120q0-17 11.5-28.5T680-840q17 0 28.5 11.5T720-800v80Z":"M200-200h80q17 0 28.5 11.5T320-160q0 17-11.5 28.5T280-120H160q-17 0-28.5-11.5T120-160v-120q0-17 11.5-28.5T160-320q17 0 28.5 11.5T200-280v80Zm560 0v-80q0-17 11.5-28.5T800-320q17 0 28.5 11.5T840-280v120q0 17-11.5 28.5T800-120H680q-17 0-28.5-11.5T640-160q0-17 11.5-28.5T680-200h80ZM200-760v80q0 17-11.5 28.5T160-640q-17 0-28.5-11.5T120-680v-120q0-17 11.5-28.5T160-840h120q17 0 28.5 11.5T320-800q0 17-11.5 28.5T280-760h-80Zm560 0h-80q-17 0-28.5-11.5T640-800q0-17 11.5-28.5T680-840h120q17 0 28.5 11.5T840-800v120q0 17-11.5 28.5T800-640q-17 0-28.5-11.5T760-680v-80Z"),lT(s)}),this.eventManager.o(this.h,"loadedmetadata",function(){u0(s)}),this.eventManager.o(this.h,"loadeddata",function(){u0(s)}),this.eventManager.o(this.adManager,"ad-started",function(){u0(s)}),this.eventManager.o(this.adManager,"ad-stopped",function(){u0(s)})}V(gC,ot);function u0(e){e.controls.Ae()?e.g.classList.remove("shaka-hidden"):e.g.classList.add("shaka-hidden")}function lT(e){var n=e.controls.wb()?"EXIT_FULL_SCREEN":"FULL_SCREEN";e.g.ariaLabel=e.localization.resolve(n)}xe("shaka.ui.FullscreenButton",gC);function Zj(){}Zj.prototype.create=function(e,n){return new gC(e,n)},Qn("fullscreen",new Zj);function uT(e,n){ot.call(this,e,n);var s=this;this.g=Tn(),this.g.classList.add("shaka-loop-button"),this.g.classList.add("shaka-tooltip"),this.m=new En(this.g,"m274-200 34 34q12 12 11.5 28T308-110q-12 12-28.5 12.5T251-109L148-212q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l103-103q12-12 28.5-11.5T308-370q11 12 11.5 28T308-314l-34 34h406v-120q0-17 11.5-28.5T720-440q17 0 28.5 11.5T760-400v120q0 33-23.5 56.5T680-200H274Zm412-480H280v120q0 17-11.5 28.5T240-520q-17 0-28.5-11.5T200-560v-120q0-33 23.5-56.5T280-760h406l-34-34q-12-12-11.5-28t11.5-28q12-12 28.5-12.5T709-851l103 103q6 6 8.5 13t2.5 15q0 8-2.5 15t-8.5 13L709-589q-12 12-28.5 11.5T652-590q-11-12-11.5-28t11.5-28l34-34Z"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.j=Ne("span"),this.j.textContent=this.localization.resolve("LOOP"),e.appendChild(this.j),this.i=Ne("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),cT(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){cT(s)}),this.eventManager.o(this.localization,"locale-changed",function(){cT(s)}),this.eventManager.o(this.g,"click",function(){s.controls.Ca()&&(s.video.loop=!s.video.loop,s.h.Ka(),s.h.xa(1))}),this.l=this.video.loop,this.h=new Ke(function(){s.l!=s.video.loop&&(cT(s),s.l=s.video.loop)}),this.h.xa(1),this.eventManager.o(this.player,"unloading",function(){dT(s)}),this.eventManager.o(this.player,"loaded",function(){dT(s)}),this.eventManager.o(this.player,"manifestupdated",function(){dT(s)}),this.eventManager.o(this.video,"durationchange",function(){dT(s)})}V(uT,ot),uT.prototype.release=function(){this.h.stop(),this.h=null,ot.prototype.release.call(this)};function cT(e){e.j.textContent=e.localization.resolve("LOOP"),e.i.textContent=e.localization.resolve(e.video.loop?"ON":"OFF"),e.m.use(e.video.loop?"M120-40q-33 0-56.5-23.5T40-120v-720q0-33 23.5-56.5T120-920h720q33 0 56.5 23.5T920-840v720q0 33-23.5 56.5T840-40H120Zm154-160h406q33 0 56.5-23.5T760-280v-120q0-17-11.5-28.5T720-440q-17 0-28.5 11.5T680-400v120H274l34-34q12-12 11.5-28T308-370q-12-12-28.5-12.5T251-371L148-268q-6 6-8.5 13t-2.5 15q0 8 2.5 15t8.5 13l103 103q12 12 28.5 11.5T308-110q11-12 11.5-28T308-166l-34-34Zm412-480-34 34q-12 12-11.5 28t11.5 28q12 12 28.5 12.5T709-589l103-103q6-6 8.5-13t2.5-15q0-8-2.5-15t-8.5-13L709-851q-12-12-28.5-11.5T652-850q-11 12-11.5 28t11.5 28l34 34H280q-33 0-56.5 23.5T200-680v120q0 17 11.5 28.5T240-520q17 0 28.5-11.5T280-560v-120h406Z":"m274-200 34 34q12 12 11.5 28T308-110q-12 12-28.5 12.5T251-109L148-212q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l103-103q12-12 28.5-11.5T308-370q11 12 11.5 28T308-314l-34 34h406v-120q0-17 11.5-28.5T720-440q17 0 28.5 11.5T760-400v120q0 33-23.5 56.5T680-200H274Zm412-480H280v120q0 17-11.5 28.5T240-520q-17 0-28.5-11.5T200-560v-120q0-33 23.5-56.5T280-760h406l-34-34q-12-12-11.5-28t11.5-28q12-12 28.5-12.5T709-851l103 103q6 6 8.5 13t2.5 15q0 8-2.5 15t-8.5 13L709-589q-12 12-28.5 11.5T652-590q-11-12-11.5-28t11.5-28l34-34Z"),e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}function dT(e){He(e.g,!e.player.U())}xe("shaka.ui.LoopButton",uT);function hT(){}hT.prototype.create=function(e,n){return new uT(e,n)},bi("loop",new hT),Qn("loop",new hT),Rd("loop",new hT);function vC(e,n){ot.call(this,e,n);var s=this;this.g=Tn(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("shaka-tooltip"),this.j=new En(this.g,"M760-481q0-83-44-151.5T598-735q-15-7-22-21.5t-2-29.5q6-16 21.5-23t31.5 0q97 43 155 131.5T840-481q0 108-58 196.5T627-153q-16 7-31.5 0T574-176q-5-15 2-29.5t22-21.5q74-34 118-102.5T760-481ZM280-360H160q-17 0-28.5-11.5T120-400v-160q0-17 11.5-28.5T160-600h120l132-132q19-19 43.5-8.5T480-703v446q0 27-24.5 37.5T412-228L280-360Zm380-120q0 42-19 79.5T591-339q-10 6-20.5.5T560-356v-250q0-12 10.5-17.5t20.5.5q31 25 50 63t19 80Z"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.h=Ne("span"),this.h.textContent=this.localization.resolve("MUTE"),e.appendChild(this.h),this.i=Ne("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),$l(this),Md(this),this.eventManager.o(this.localization,"locale-updated",function(){$l(s)}),this.eventManager.o(this.localization,"locale-changed",function(){$l(s)}),this.eventManager.o(this.g,"click",function(){s.controls.Ca()&&(s.ad&&s.ad.isLinear()?s.ad.setMuted(!s.ad.isMuted()):s.video.muted||s.video.volume!=0?s.video.muted=!s.video.muted:s.video.volume=1)}),this.eventManager.o(this.video,"volumechange",function(){$l(s),Md(s)}),this.eventManager.o(this.player,"loading",function(){$l(s),Md(s)}),this.eventManager.o(this.player,"loaded",function(){Mf(s)}),this.eventManager.o(this.player,"unloading",function(){Mf(s)}),this.eventManager.o(this.player,"trackschanged",function(){Mf(s)}),this.eventManager.o(this.controls,"caststatuschanged",function(){$l(s),Md(s)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){$l(s),Md(s)}),this.eventManager.o(this.adManager,"ad-muted",function(){$l(s),Md(s)}),this.eventManager.o(this.adManager,"ad-started",function(){Mf(s)}),this.eventManager.o(this.adManager,"ad-stopped",function(){s.ad=null,$l(s),Md(s),Mf(s)}),Mf(this)}V(vC,ot);function $l(e){var n=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted||e.video.volume==0?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(n),e.h.textContent=e.localization.resolve(n)}function Md(e){var n=e.ad?e.ad.isMuted()?"M671-177q-11 7-22 13t-23 11q-15 7-30.5 0T574-176q-6-15 1.5-29.5T598-227q4-2 7.5-4t7.5-4L480-368v111q0 27-24.5 37.5T412-228L280-360H160q-17 0-28.5-11.5T120-400v-160q0-17 11.5-28.5T160-600h88L84-764q-11-11-11-28t11-28q11-11 28-11t28 11l680 680q11 11 11 28t-11 28q-11 11-28 11t-28-11l-93-93Zm89-304q0-83-44-151.5T598-735q-15-7-22-21.5t-2-29.5q6-16 21.5-23t31.5 0q97 43 155 131t58 197q0 33-6 65.5T817-353q-8 22-24.5 27.5t-30.5.5q-14-5-22.5-18t-.5-30q11-26 16-52.5t5-55.5ZM591-623q33 21 51 63t18 80v10q0 5-1 10-2 13-14 17t-22-6l-51-51q-6-6-9-13.5t-3-15.5v-77q0-12 10.5-17.5t20.5.5Zm-201-59q-6-6-6-14t6-14l22-22q19-19 43.5-8.5T480-703v63q0 14-12 19t-22-5l-56-56Z":"M760-481q0-83-44-151.5T598-735q-15-7-22-21.5t-2-29.5q6-16 21.5-23t31.5 0q97 43 155 131.5T840-481q0 108-58 196.5T627-153q-16 7-31.5 0T574-176q-5-15 2-29.5t22-21.5q74-34 118-102.5T760-481ZM280-360H160q-17 0-28.5-11.5T120-400v-160q0-17 11.5-28.5T160-600h120l132-132q19-19 43.5-8.5T480-703v446q0 27-24.5 37.5T412-228L280-360Zm380-120q0 42-19 79.5T591-339q-10 6-20.5.5T560-356v-250q0-12 10.5-17.5t20.5.5q31 25 50 63t19 80Z":e.video.muted||e.video.volume==0?"M671-177q-11 7-22 13t-23 11q-15 7-30.5 0T574-176q-6-15 1.5-29.5T598-227q4-2 7.5-4t7.5-4L480-368v111q0 27-24.5 37.5T412-228L280-360H160q-17 0-28.5-11.5T120-400v-160q0-17 11.5-28.5T160-600h88L84-764q-11-11-11-28t11-28q11-11 28-11t28 11l680 680q11 11 11 28t-11 28q-11 11-28 11t-28-11l-93-93Zm89-304q0-83-44-151.5T598-735q-15-7-22-21.5t-2-29.5q6-16 21.5-23t31.5 0q97 43 155 131t58 197q0 33-6 65.5T817-353q-8 22-24.5 27.5t-30.5.5q-14-5-22.5-18t-.5-30q11-26 16-52.5t5-55.5ZM591-623q33 21 51 63t18 80v10q0 5-1 10-2 13-14 17t-22-6l-51-51q-6-6-9-13.5t-3-15.5v-77q0-12 10.5-17.5t20.5.5Zm-201-59q-6-6-6-14t6-14l22-22q19-19 43.5-8.5T480-703v63q0 14-12 19t-22-5l-56-56Z":"M760-481q0-83-44-151.5T598-735q-15-7-22-21.5t-2-29.5q6-16 21.5-23t31.5 0q97 43 155 131.5T840-481q0 108-58 196.5T627-153q-16 7-31.5 0T574-176q-5-15 2-29.5t22-21.5q74-34 118-102.5T760-481ZM280-360H160q-17 0-28.5-11.5T120-400v-160q0-17 11.5-28.5T160-600h120l132-132q19-19 43.5-8.5T480-703v446q0 27-24.5 37.5T412-228L280-360Zm380-120q0 42-19 79.5T591-339q-10 6-20.5.5T560-356v-250q0-12 10.5-17.5t20.5.5q31 25 50 63t19 80Z";e.j.use(n)}function Mf(e){var n=!0;e.ad&&e.ad.isLinear()?n=!0:e.player.Kf()&&(n=!1),He(e.g,n)}xe("shaka.ui.MuteButton",vC);function fT(){}fT.prototype.create=function(e,n){return new vC(e,n)},bi("mute",new fT),Qn("mute",new fT),Rd("mute",new fT);function yC(e,n){ot.call(this,e,n);var s=this;this.j=this.controls.u,this.g=Tn(),this.g.classList.add("shaka-pip-button"),this.g.classList.add("shaka-tooltip"),this.l=new En(this.g,"M120-520q-17 0-28.5-11.5T80-560q0-17 11.5-28.5T120-600h104L80-743q-12-12-12-28.5T80-800q12-12 28.5-12t28.5 12l143 144v-104q0-17 11.5-28.5T320-800q17 0 28.5 11.5T360-760v200q0 17-11.5 28.5T320-520H120Zm40 360q-33 0-56.5-23.5T80-240v-160q0-17 11.5-28.5T120-440q17 0 28.5 11.5T160-400v160h280q17 0 28.5 11.5T480-200q0 17-11.5 28.5T440-160H160Zm680-280q-17 0-28.5-11.5T800-480v-240H480q-17 0-28.5-11.5T440-760q0-17 11.5-28.5T480-800h320q33 0 56.5 23.5T880-720v240q0 17-11.5 28.5T840-440ZM600-160q-17 0-28.5-11.5T560-200v-120q0-17 11.5-28.5T600-360h240q17 0 28.5 11.5T880-320v120q0 17-11.5 28.5T840-160H600Z"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.i=Ne("span"),this.i.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),e.appendChild(this.i),this.h=Ne("span"),this.h.classList.add("shaka-current-selection-span"),e.appendChild(this.h),this.g.appendChild(e),xC(this),this.parent.appendChild(this.g),this.controls.Jf()||He(this.g,!1),this.eventManager.o(this.localization,"locale-updated",function(){xC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){xC(s)}),this.eventManager.o(this.g,"click",function(){s.controls.Ca()&&s.controls.dd()}),this.eventManager.o(this.j,"enterpictureinpicture",function(){eU(s)}),this.eventManager.o(this.j,"leavepictureinpicture",function(){tU(s)}),this.eventManager.o(this.controls,"caststatuschanged",function(){nU(s)}),this.eventManager.o(this.player,"trackschanged",function(){nU(s)}),"documentPictureInPicture"in l&&this.eventManager.o(l.documentPictureInPicture,"enter",function(a){eU(s),s.eventManager.qa(a.window,"pagehide",function(){tU(s)})})}V(yC,ot);function eU(e){e.l.use("M160-160q-33 0-56.5-23.5T80-240v-240q0-17 11.5-28.5T120-520q17 0 28.5 11.5T160-480v240h640v-480H480q-17 0-28.5-11.5T440-760q0-17 11.5-28.5T480-800h320q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm400-263 95 95q12 12 28 12t28-12q12-12 12-28.5T711-385l-95-95h64q17 0 28.5-11.5T720-520q0-17-11.5-28.5T680-560H520q-17 0-28.5 11.5T480-520v160q0 17 11.5 28.5T520-320q17 0 28.5-11.5T560-360v-63ZM120-600q-17 0-28.5-11.5T80-640v-120q0-17 11.5-28.5T120-800h200q17 0 28.5 11.5T360-760v120q0 17-11.5 28.5T320-600H120Zm360 120Z"),e.g.ariaLabel=e.localization.resolve("EXIT_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve("ON")}function tU(e){e.l.use("M120-520q-17 0-28.5-11.5T80-560q0-17 11.5-28.5T120-600h104L80-743q-12-12-12-28.5T80-800q12-12 28.5-12t28.5 12l143 144v-104q0-17 11.5-28.5T320-800q17 0 28.5 11.5T360-760v200q0 17-11.5 28.5T320-520H120Zm40 360q-33 0-56.5-23.5T80-240v-160q0-17 11.5-28.5T120-440q17 0 28.5 11.5T160-400v160h280q17 0 28.5 11.5T480-200q0 17-11.5 28.5T440-160H160Zm680-280q-17 0-28.5-11.5T800-480v-240H480q-17 0-28.5-11.5T440-760q0-17 11.5-28.5T480-800h320q33 0 56.5 23.5T880-720v240q0 17-11.5 28.5T840-440ZM600-160q-17 0-28.5-11.5T560-200v-120q0-17 11.5-28.5T600-360h240q17 0 28.5 11.5T880-320v120q0 17-11.5 28.5T840-160H600Z"),e.g.ariaLabel=e.localization.resolve("ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve("OFF")}function xC(e){e.i.textContent=e.localization.resolve("PICTURE_IN_PICTURE");var n=e.controls.Nd();e.g.ariaLabel=e.localization.resolve(n?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve(n?"ON":"OFF")}function nU(e){X(function(n){return e.controls.Jf()&&(!e.player||!e.player.Md())?(He(e.g,!0),n.B(0)):(He(e.g,!1),e.controls.Nd()?O(n,e.controls.dd(),0):n.B(0))})}xe("shaka.ui.PipButton",yC);function pT(){}pT.prototype.create=function(e,n){return new yC(e,n)},bi("picture_in_picture",new pT),Qn("picture_in_picture",new pT),Rd("picture_in_picture",new pT);function TC(e,n){Zs.call(this,e,n,"m426-330 195-125q14-9 14-25t-14-25L426-630q-15-10-30.5-1.5T380-605v250q0 18 15.5 26.5T426-330ZM121-440q17 0 30.5 11t18.5 28q6 23 14.5 43.5T204-317q9 15 7.5 32T198-256q-11 11-27 10t-25-14q-22-31-37-66.5T86-400q-3-16 7.5-28t27.5-12Zm77-264q12 12 13 29t-7 31q-11 20-19.5 41T170-559q-5 17-18.5 28T121-520q-17 0-27.5-12.5T87-561q8-38 23-73.5t36-66.5q9-13 25-13.5t27 10.5Zm56 505q12-13 29.5-14t32.5 8q20 11 40.5 20t42.5 15q17 5 28 18t11 30q0 17-12.5 27T397-88q-38-8-71.5-23T260-146q-14-9-15.5-25t9.5-28Zm186-639q0 17-10.5 30T402-790q-23 6-44 14.5T317-755q-15 9-32.5 7.5T255-761q-12-12-10.5-28.5T260-815q32-20 66.5-34.5T399-872q16-3 28.5 7t12.5 27Zm360 358q0-113-69.5-199.5T553-792q-15-4-24-17t-9-29q0-16 11-26.5t25-7.5q140 28 232 137t92 255q0 146-92 255T556-88q-14 3-25-7.5T520-122q0-16 9-29t24-17q108-26 177.5-112.5T800-480Z");var s=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),Array.from(e.classList).includes("shaka-overflow-menu")||(this.g=Ne("span"),this.g.classList.add("shaka-overflow-playback-rate-mark"),this.button.appendChild(this.g)),this.eventManager.o(this.localization,"locale-updated",function(){SC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){SC(s)}),this.eventManager.o(this.player,"loaded",function(){wC(s)}),this.eventManager.o(this.player,"ratechange",function(){wC(s)}),SC(this),boe(this),wC(this)}V(TC,Zs);function SC(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE"),e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE"),e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function wC(e){var n=e.player.Za(),s=RI(e.menu,"material-svg-icon shaka-chosen-item");if(s){var a=s.parentElement;a.removeAttribute("aria-selected");var u=a.getElementsByTagName("span")[0];u&&u.classList.remove("shaka-chosen-item"),a.removeChild(s)}(s=Array.from(e.menu.querySelectorAll("span")).find(function(f){return f.textContent==n+"x"}))&&(a=s.parentElement,a.appendChild(qu()),a.ariaSelected="true",s.classList.add("shaka-chosen-item")),e.currentSelection.textContent=n+"x",e.button.setAttribute("shaka-status",n+"x"),e.g&&(e.g.textContent=n+"x")}function boe(e){for(var n=C(e.controls.g.playbackRates),s=n.next(),a={};!s.done;a={ag:void 0},s=n.next()){a.ag=s.value,s=Tn();var u=Ne("span");u.textContent=a.ag+"x",s.appendChild(u),e.eventManager.o(s,"click",function(f){return function(){f.ag==e.video.defaultPlaybackRate?e.player.Cd():e.player.vc(f.ag,!1)}}(a)),e.menu.appendChild(s)}Pf(e.menu)}xe("shaka.ui.PlaybackRateSelection",TC);function EC(){}EC.prototype.create=function(e,n){return new TC(e,n)},bi("playback_rate",new EC),Qn("playback_rate",new EC);function bC(e,n){ot.call(this,e,n);var s=this;this.g=Tn(),this.g.classList.add("shaka-current-time"),c0(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"click",function(){s.controls.Ca()&&s.player.U()&&(s.video.currentTime=s.player.wa().end)}),this.eventManager.o(this.player,"loading",function(){He(s.g,!0)}),this.eventManager.o(this.controls,"timeandseekrangeupdated",function(){var a=s.controls.V,u=s.controls.wh(),f=s.player.wa(),p=f.end-f.start;isFinite(p)?s.player.U()?(u=Math.max(0,Math.floor(f.end-u)),p=p>=3600,u>=1||a?(c0(s,"- "+Na(u,p)),s.g.disabled=!1):(c0(s,s.localization.resolve("LIVE")),s.g.disabled=!0)):(a=p>=3600,u=Na(Math.max(0,u-f.start),a),p&&(u+=" / "+Na(p,a)),c0(s,u),s.g.disabled=!0):(c0(s,s.localization.resolve("LIVE")),s.g.disabled=!0)}),this.eventManager.o(this.player,"trackschanged",function(){s.player.U()&&(s.g.ariaLabel=s.localization.resolve("SKIP_TO_LIVE"))}),this.eventManager.o(this.adManager,"ad-started",function(){He(s.g,!s.ad.isLinear())}),this.eventManager.o(this.adManager,"ad-stopped",function(){He(s.g,!0)})}V(bC,ot);function c0(e,n){n!=e.g.textContent&&(e.g.textContent=n)}xe("shaka.ui.PresentationTimeTracker",bC);function rU(){}rU.prototype.create=function(e,n){return new bC(e,n)},Qn("time_and_duration",new rU);function AC(e,n){ot.call(this,e,n);var s=this;this.g=Tn(),this.g.classList.add("shaka-recenter-vr-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",new En(this.g,"M479-359q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35Zm-57 222-85-85q-12-12-11.5-28.5T338-279q12-12 28.5-12t28.5 12l85 86 85-85q11-11 28-11t28 11q11 11 11 28t-11 28l-85 85q-12 12-27 18t-30 6q-15 0-30-6t-27-18ZM221-337l-85-85q-12-12-18-27t-6-30q0-15 6-30t18-27l85-85q12-12 28.5-12t28.5 12q12 12 12 28.5T278-564l-86 86 85 85q11 11 11 28t-11 28q-11 11-28 11t-28-11Zm116-401 85-85q12-12 27-18t30-6q15 0 30 6t27 18l85 85q12 12 12 28t-12 28q-12 12-28.5 12T564-682l-86-85-85 85q-11 11-28 11t-28-11q-11-11-11-28t11-28Zm344 343 85-85-85-85q-11-11-11-28t11-28q11-11 28-11t28 11l85 85q12 12 18 27t6 30q0 15-6 30t-18 27l-85 85q-12 12-28 11.5T681-338q-12-12-12-28.5t12-28.5Z"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.i=Ne("span"),e.appendChild(this.i),this.h=Ne("span"),this.h.classList.add("shaka-current-selection-span"),e.appendChild(this.h),this.g.appendChild(e),this.parent.appendChild(this.g),IC(this),this.eventManager.o(this.localization,"locale-updated",function(){IC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){IC(s)});var a=this.controls.D;this.eventManager.o(this.g,"click",function(){s.controls.Ca()&&(a.g?GI(a.g):$e("Not playing VR content"))}),this.eventManager.o(a,"vrstatuschanged",function(){He(s.g,s.controls.Yb())}),He(this.g,this.controls.Yb())}V(AC,ot);function IC(e){e.g.ariaLabel=e.localization.resolve("RECENTER_VR"),e.i.textContent=e.localization.resolve("RECENTER_VR")}xe("shaka.ui.RecenterVRButton",AC);function CC(){}CC.prototype.create=function(e,n){return new AC(e,n)},bi("recenter_vr",new CC),Qn("recenter_vr",new CC);function mT(e,n){ot.call(this,e,n);var s=this;this.i=ht().pg(),this.g=Tn(),this.g.classList.add("shaka-remote-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.l=new En(this.g,this.i?"M80-280v-480q0-33 23.5-56.5T160-840h640q33 0 56.5 23.5T880-760v480q0 33-23.5 56.5T800-200h-80q-17 0-28.5-11.5T680-240q0-17 11.5-28.5T720-280h80v-480H160v480h80q17 0 28.5 11.5T280-240q0 17-11.5 28.5T240-200h-80q-33 0-56.5-23.5T80-280Zm232 160q-14 0-22-9.5t-8-20.5q0-5 2-10.5t7-10.5l161-161q6-6 13-9t15-3q8 0 15 3t13 9l161 161q5 5 7 10.5t2 10.5q0 11-8 20.5t-22 9.5H312Zm168-360Z":"M480-480Zm320 320H600q0-20-1.5-40t-4.5-40h206v-480H160v46q-20-3-40-4.5T80-680v-40q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160Zm-720 0v-120q50 0 85 35t35 85H80Zm200 0q0-83-58.5-141.5T80-360v-80q117 0 198.5 81.5T360-160h-80Zm160 0q0-75-28.5-140.5t-77-114q-48.5-48.5-114-77T80-520v-80q91 0 171 34.5T391-471q60 60 94.5 140T520-160h-80Z"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.m=Ne("span"),e.appendChild(this.m),this.j=Ne("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),this.h=-1,kC(this),He(this.g,!1),this.video.remote?(this.eventManager.o(this.localization,"locale-updated",function(){kC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){kC(s)}),this.eventManager.o(this.controls,"caststatuschanged",function(){Of(s)}),this.eventManager.o(this.g,"click",function(){s.controls.Ca()&&s.video.remote.prompt().catch(function(){})}),this.eventManager.o(this.video.remote,"connect",function(){Of(s),gT(s)}),this.eventManager.o(this.video.remote,"connecting",function(){Of(s),gT(s)}),this.eventManager.o(this.video.remote,"disconnect",function(){Of(s),gT(s)}),this.eventManager.o(this.player,"loaded",function(){Of(s)}),Of(this,!0),gT(this)):this.g.classList.add("shaka-hidden")}V(mT,ot),mT.prototype.release=function(){this.video.remote&&this.h!=-1&&this.video.remote.cancelWatchAvailability(this.h).catch(function(){}),ot.prototype.release.call(this)};function Of(e,n){n=n===void 0?!1:n;var s,a;X(function(u){switch(u.g){case 1:if(e.controls.F.Pg()&&e.controls.ua||!e.video.remote){He(e.g,!1),e.h!=-1&&(e.video.remote.cancelWatchAvailability(e.h),e.h=-1),u.B(0);break}if(e.video.remote.state=="disconnected"||n){if(s=function(f){if(e.player){var p=e.video.disableRemotePlayback,g=!0;ht().pg()&&e.player.Ac()==Tr&&e.player.Ah()!="HLS"&&(g=!1),He(e.g,g&&f&&!p)}else He(e.g,!1)},ce(u,7),e.h==-1){u.B(9);break}return O(u,e.video.remote.cancelWatchAvailability(e.h),10)}if(He(e.g,!0),e.h==-1){u.B(0);break}return O(u,e.video.remote.cancelWatchAvailability(e.h),6);case 6:e.h=-1,u.B(0);break;case 10:e.h=-1;case 9:se(u,8);break;case 7:ue(u);case 8:return ce(u,11),O(u,e.video.remote.watchAvailability(s),13);case 13:a=u.h,e.h=a,se(u,0);break;case 11:ue(u),s(!0),re(u)}})}function kC(e){var n=e.i?e.localization.resolve("AIRPLAY"):e.localization.resolve("CAST");e.g.ariaLabel=n,e.m.textContent=n}function gT(e){e.i||(e.video.remote.state=="disconnected"?e.l.use("M480-480Zm320 320H600q0-20-1.5-40t-4.5-40h206v-480H160v46q-20-3-40-4.5T80-680v-40q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160Zm-720 0v-120q50 0 85 35t35 85H80Zm200 0q0-83-58.5-141.5T80-360v-80q117 0 198.5 81.5T360-160h-80Zm160 0q0-75-28.5-140.5t-77-114q-48.5-48.5-114-77T80-520v-80q91 0 171 34.5T391-471q60 60 94.5 140T520-160h-80Z"):e.l.use("M720-600v240q0 17-11.5 28.5T680-320h-87q-8 0-14.5-4.5T569-337q-29-81-81.5-147T364-596q-16-10-11.5-27t21.5-17h306q17 0 28.5 11.5T720-600ZM320-160q-16 0-28-9.5T277-195q-11-63-56.5-107T112-357q-15-2-23.5-14.5T80-400q0-17 11-28.5t26-9.5q94 12 160.5 79T357-198q2 16-9 27t-28 11Zm160 0q-17 0-28.5-11T438-199q-14-128-104.5-217T115-518q-16-2-25.5-14T80-560q0-17 10.5-29t25.5-10q161 13 274 125.5T518-201q2 17-9.5 29T480-160Zm-340 0q-25 0-42.5-17.5T80-220q0-25 17.5-42.5T140-280q25 0 42.5 17.5T200-220q0 25-17.5 42.5T140-160Zm740-560v480q0 33-23.5 56.5T800-160H638q-17 0-28.5-11.5T598-200q0-17 11.5-28.5T638-240h162v-480H160v6q0 17-11.5 28.5T120-674q-17 0-28.5-11.5T80-714v-6q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720Z"))}xe("shaka.ui.RemoteButton",mT);function _C(){}_C.prototype.create=function(e,n){return new mT(e,n)},bi("remote",new _C),Qn("remote",new _C);function RC(e,n){Zs.call(this,e,n,"M480-120q-17 0-28.5-11.5T440-160v-160q0-17 11.5-28.5T480-360q17 0 28.5 11.5T520-320v40h280q17 0 28.5 11.5T840-240q0 17-11.5 28.5T800-200H520v40q0 17-11.5 28.5T480-120Zm-320-80q-17 0-28.5-11.5T120-240q0-17 11.5-28.5T160-280h160q17 0 28.5 11.5T360-240q0 17-11.5 28.5T320-200H160Zm160-160q-17 0-28.5-11.5T280-400v-40H160q-17 0-28.5-11.5T120-480q0-17 11.5-28.5T160-520h120v-40q0-17 11.5-28.5T320-600q17 0 28.5 11.5T360-560v160q0 17-11.5 28.5T320-360Zm160-80q-17 0-28.5-11.5T440-480q0-17 11.5-28.5T480-520h320q17 0 28.5 11.5T840-480q0 17-11.5 28.5T800-440H480Zm160-160q-17 0-28.5-11.5T600-640v-160q0-17 11.5-28.5T640-840q17 0 28.5 11.5T680-800v40h120q17 0 28.5 11.5T840-720q0 17-11.5 28.5T800-680H680v40q0 17-11.5 28.5T640-600Zm-480-80q-17 0-28.5-11.5T120-720q0-17 11.5-28.5T160-760h320q17 0 28.5 11.5T520-720q0 17-11.5 28.5T480-680H160Z");var s=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.h=Ne("span"),this.h.classList.add("shaka-current-auto-quality"),this.h.style.display="none",this.i=Ne("sup"),this.i.classList.add("shaka-current-quality-mark"),this.i.style.display="none",Array.from(e.classList).includes("shaka-overflow-menu")?this.parent.parentElement&&(this.g=hJ(this.parent.parentElement)):(this.g=Ne("span"),this.g.classList.add("shaka-overflow-playback-rate-mark"),this.button.appendChild(this.g)),e=Ne("span"),this.button.childNodes[1].appendChild(e),e.appendChild(this.currentSelection),e.appendChild(this.h),e.appendChild(this.i),this.eventManager.o(this.localization,"locale-updated",function(){PC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){PC(s)}),this.eventManager.o(this.player,"loading",function(){Vl(s),Od(s)}),this.eventManager.o(this.player,"loaded",function(){Vl(s),Od(s)}),this.eventManager.o(this.player,"unloading",function(){Vl(s),Od(s)}),this.eventManager.o(this.player,"variantchanged",function(){Vl(s),Od(s)}),this.eventManager.o(this.player,"trackschanged",function(){Vl(s),Od(s)}),this.eventManager.o(this.player,"abrstatuschanged",function(){Vl(s),Od(s)}),this.eventManager.o(this.player,"adaptation",function(){Vl(s),Od(s)}),Vl(this)}V(RC,Zs);function Od(e){var n=e.player.getConfiguration().abr.enabled;if(e.player.Md()){e.i.textContent="",e.i.style.display="none",e.g&&(e.g.textContent="",e.g.style.display="none");var s=e.player.Nb()||[],a=s.find(function(u){return u.active});a&&(n?(e.h.textContent=a.bandwidth?sU(e,a,s):"Unknown",e.h.style.display=""):e.h.style.display="none")}else s=e.player.getVideoTracks()||[],(a=s.find(function(u){return u.active}))?(n?(e.h.textContent=a.height&&a.width?iU(e,a,s):a.bandwidth?vT(a.bandwidth):"Unknown",e.h.style.display=""):e.h.style.display="none",n=LC(e,a.width,a.height),e.i.textContent=n,e.i.style.display=n!==""?"":"none",e.g&&(e.g.textContent=n,e.g.style.display=n!==""?"":"none")):e.g&&(n=e.player.getStats(),n=LC(e,n.width,n.height),e.g.textContent=n,e.g.style.display=n!==""?"":"none")}function LC(e,n,s){return!n||!s?"":(s>n&&(s=C([s,n]),n=s.next().value,s=s.next().value),n/s>16/9&&(s=Math.round(n*9/16)),e=e.controls.g.qualityMarks,s>=8640?s+"p":s>=4320?e[4320]:s>=2160?e[2160]:s>=1440?e[1440]:s>=1080?e[1080]:s>=720?e[720]:"")}function Vl(e){var n=qx(e.menu);Ra(e.menu),e.menu.appendChild(n),n=0,n=e.player.Md()?Aoe(e):Ioe(e);var s=Tn();s.classList.add("shaka-enable-abr-button"),e.eventManager.o(s,"click",function(){e.player.configure({abr:{enabled:!0}}),Vl(e)}),e.l=Ne("span"),e.l.textContent=e.localization.resolve("AUTO_QUALITY"),s.appendChild(e.l),e.player.getConfiguration().abr.enabled&&(s.ariaSelected="true",s.appendChild(qu()),e.l.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),e.menu.appendChild(s),Pf(e.menu),e.controls.dispatchEvent(new _e("resolutionselectionupdated")),PC(e),He(e.button,n>0)}function Aoe(e){var n=[];e.player.Ac()==Si||e.player.Da()||(n=e.player.Nb()||[]);var s=n.find(function(y){return y.active});s&&(n=n.filter(function(y){if(y.language!=s.language||e.controls.g.showAudioChannelCountVariants&&y.channelsCount&&s.channelsCount&&y.channelsCount!=s.channelsCount)return!1;var w=e.controls.g.trackLabelFormat;return!((w==1||w==2)&&JSON.stringify(y.audioRoles)!=JSON.stringify(s.audioRoles)||w==3&&y.label!=s.label||!y.bandwidth)})),n=n.filter(function(y,w){return n.findIndex(function(b){return b.bandwidth==y.bandwidth})==w}),n.sort(function(y,w){return w.bandwidth-y.bandwidth});for(var a=e.player.getConfiguration().abr.enabled,u=C(n),f=u.next(),p={};!f.done;p={Qe:void 0},f=u.next()){p.Qe=f.value,f=Tn(),f.classList.add("explicit-resolution"),e.eventManager.o(f,"click",function(y){return function(){var w=y.Qe;e.player.configure({abr:{enabled:!1}}),e.player.Me(w,e.controls.g.clearBufferOnQualityChange)}}(p));var g=Ne("span");g.textContent=p.Qe.bandwidth?sU(e,p.Qe,n):"Unknown",f.appendChild(g),a||p.Qe!=s||(f.ariaSelected="true",f.appendChild(qu()),g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=g.textContent),e.menu.appendChild(f)}return n.length}function Ioe(e){var n=e.player.getVideoTracks()||[],s=n.find(function(b){return b.active});n=n.filter(function(b,I){return n.findIndex(function(L){var j=L.height==b.height&&L.bandwidth==b.bandwidth&&L.frameRate==b.frameRate&&L.hdr==b.hdr&&L.videoLayout==b.videoLayout&&gl(L.roles,b.roles);return j&&e.controls.g.showVideoCodec&&L.codecs&&b.codecs&&(j=Dn(L.codecs)==Dn(b.codecs)),j})==I}),n.sort(function(b,I){return I.height==b.height||b.height==null||I.height==null?I.bandwidth-b.bandwidth:I.height-b.height});for(var a=e.player.getConfiguration().abr.enabled,u=C(n),f=u.next(),p={};!f.done;p={tc:void 0},f=u.next()){p.tc=f.value,f=Tn(),f.classList.add("explicit-resolution"),e.eventManager.o(f,"click",function(b){return function(){var I=b.tc;e.player.configure({abr:{enabled:!1}}),e.player.Oj(I,e.controls.g.clearBufferOnQualityChange)}}(p));var g=Ne("span");g.textContent=p.tc.height&&p.tc.width?iU(e,p.tc,n):p.tc.bandwidth?vT(p.tc.bandwidth):"Unknown",f.appendChild(g);var y=LC(e,p.tc.width,p.tc.height);if(y!==""){var w=Ne("sup");w.classList.add("shaka-quality-mark"),w.textContent=y,f.appendChild(w)}a||p.tc!=s||(f.ariaSelected="true",f.appendChild(qu()),g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=g.textContent),e.menu.appendChild(f)}return n.length}function iU(e,n,s){function a(I,L){return I!=L&&I.height==L.height&&I.hdr==L.hdr&&f(I)==f(L)&&u(I)==u(L)&&Math.round(I.frameRate||0)==Math.round(L.frameRate||0)}function u(I){return I.codecs?Dn(I.codecs).startsWith("lcevc"):!1}function f(I){return I.codecs?Dn(I.codecs).startsWith("dovi-"):!1}var p=n.height||0,g=n.width||0,y=!0;if(n.pixelAspectRatio){var w=n.pixelAspectRatio.split(":").map(function(I){return Number(I)});w.length===2?y=w[0]===w[1]:w.length===1&&(y=w[0]===1)}for(p>g&&y&&(p=C([p,g]),g=p.next().value,p=p.next().value),y=p,g/p>16/9&&(y=Math.round(g*9/16)),g=y+"p",p=new Set,y=C(s),w=y.next();!w.done;w=y.next())w=w.value,w.frameRate&&p.add(Math.round(w.frameRate));if(p.size>1&&(p=n.frameRate)&&(p>=50||p<=20)&&(g+=Math.round(n.frameRate)),f(n)?g+=" Dolby Vision":(n.hdr=="PQ"||n.hdr=="HLG")&&(g+=" HDR"),u(n)&&(g+=" LCEVC"),(n.videoLayout||"").includes("CH-STEREO")&&(g+=" 3D"),s.some(function(I){return a(n,I)})&&(s.some(function(I){return a(n,I)&&I.bandwidth==n.bandwidth})||(g+=" ("+vT(n.bandwidth)+")"),e.controls.g.showVideoCodec)){var b=function(I){var L="";return I&&(L=Dn(I).toUpperCase()),L&&" "+L};s.some(function(I){return a(n,I)&&b(I.codecs)!=b(n.codecs)})&&(g+=b(n.codecs))}return g}function sU(e,n,s){var a=vT(n.bandwidth);if(e.controls.g.showAudioCodec){var u=function(f){var p="";return f&&(p=Dn(f).toUpperCase()),p&&" "+p};s.some(function(f){return u(f.codecs)!=u(n.codecs)})&&(a+=u(n.codecs))}return a}function vT(e){return e>=1e6?(e/1e6).toFixed(1).replace(".0","")+" Mbps":Math.floor(e/1e3)+" Kbps"}function PC(e){var n=e.player.Md()?"QUALITY":"RESOLUTION";e.button.ariaLabel=e.localization.resolve(n),e.backButton.ariaLabel=e.localization.resolve(n),e.backSpan.textContent=e.localization.resolve(n),e.nameSpan.textContent=e.localization.resolve(n),e.l.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}xe("shaka.ui.ResolutionSelection",RC);function DC(){}DC.prototype.create=function(e,n){return new RC(e,n)},bi("quality",new DC),Qn("quality",new DC);function NC(e,n){ot.call(this,e,n);var s=this;this.g=Tn(),this.g.classList.add("shaka-rewind-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status",this.localization.resolve("OFF")),new En(this.g).use("M798-281 550-447q-9-6-13.5-14.5T532-480q0-10 4.5-18.5T550-513l248-166q5-4 11-5t11-1q16 0 28 11t12 29v330q0 18-12 29t-28 11q-5 0-11-1t-11-5Zm-400 0L150-447q-9-6-13.5-14.5T132-480q0-10 4.5-18.5T150-513l248-166q5-4 11-5t11-1q16 0 28 11t12 29v330q0 18-12 29t-28 11q-5 0-11-1t-11-5Z"),this.parent.appendChild(this.g),MC(this),this.h=this.controls.g.rewindRates,this.eventManager.o(this.localization,"locale-updated",function(){MC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){MC(s)}),this.eventManager.o(this.g,"click",function(){if(s.controls.Ca()&&s.video.duration){var a=s.h.indexOf(s.player.Za())+1;a=a!=s.h.length?s.h[a]:s.h[0],s.video.paused&&s.video.play(),s.player.vc(a),s.g.setAttribute("shaka-status",a+"x")}}),this.eventManager.o(this.player,"ratechange",function(){s.g.setAttribute("shaka-status",s.player.Za()+"x")})}V(NC,ot);function MC(e){e.g.ariaLabel=e.localization.resolve("REWIND")}xe("shaka.ui.RewindButton",NC);function oU(){}oU.prototype.create=function(e,n){return new NC(e,n)},Qn("rewind",new oU);function OC(e,n){ot.call(this,e,n);var s=this;this.j=this.controls.F,this.g=Tn(),this.g.classList.add("shaka-save.video-frame-button"),this.g.classList.add("shaka-tooltip"),new En(this.g,"M480-337q-8 0-15-2.5t-13-8.5L308-492q-12-12-11.5-28t11.5-28q12-12 28.5-12.5T365-549l75 75v-286q0-17 11.5-28.5T480-800q17 0 28.5 11.5T520-760v286l75-75q12-12 28.5-11.5T652-548q11 12 11.5 28T652-492L508-348q-6 6-13 8.5t-15 2.5ZM240-160q-33 0-56.5-23.5T160-240v-80q0-17 11.5-28.5T200-360q17 0 28.5 11.5T240-320v80h480v-80q0-17 11.5-28.5T760-360q17 0 28.5 11.5T800-320v80q0 33-23.5 56.5T720-160H240Z"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.h=Ne("span"),this.h.textContent=this.localization.resolve("DOWNLOAD_VIDEO_FRAME"),e.appendChild(this.h),this.i=Ne("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),jC(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){jC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){jC(s)}),this.eventManager.o(this.g,"click",function(){var a=document.createElement("canvas"),u=a.getContext("2d"),f=s.controls.u;a.width=f.videoWidth,a.height=f.videoHeight,u.drawImage(f,0,0,a.width,a.height),a=a.toDataURL("image/png"),u=document.createElement("a"),u.href=a,u.download="videoframe_"+f.currentTime.toFixed(3)+".png",u.click()}),this.eventManager.o(this.controls.D,"vrstatuschanged",function(){Oa(s)}),this.eventManager.o(this.adManager,"ad-started",function(){Oa(s)}),this.eventManager.o(this.adManager,"ad-stopped",function(){Oa(s)}),this.eventManager.o(this.player,"unloading",function(){Oa(s)}),this.eventManager.o(this.player,"loaded",function(){Oa(s)}),this.eventManager.o(this.video,"play",function(){Oa(s)}),this.eventManager.o(this.video,"pause",function(){Oa(s)}),this.eventManager.o(this.video,"seeking",function(){Oa(s)}),this.eventManager.o(this.controls,"caststatuschanged",function(){Oa(s)}),Oa(this)}V(OC,ot);function Oa(e){var n=!0;e.controls.Yb()&&(n=!1),n&&e.j.Pa()&&(n=!1),n&&(e.player.drmInfo()||e.player.Md())&&(n=!1),n&&e.ad&&(n=!1),n&&e.video.remote&&e.video.remote.state!="disconnected"&&(n=!1),He(e.g,n)}function jC(e){e.g.ariaLabel=e.localization.resolve("DOWNLOAD_VIDEO_FRAME"),e.h.textContent=e.localization.resolve("DOWNLOAD_VIDEO_FRAME")}xe("shaka.ui.SaveVideoFrameButton",OC);function UC(){}UC.prototype.create=function(e,n){return new OC(e,n)},bi("save_video_frame",new UC),Rd("save_video_frame",new UC);function FC(e,n){ot.call(this,e,n);var s=this;(this.g=this.player.Af())&&(this.h=Tn(),this.h.classList.add("shaka-skip-next-button"),this.h.classList.add("shaka-tooltip"),new En(this.h).use("M660-280v-400q0-17 11.5-28.5T700-720q17 0 28.5 11.5T740-680v400q0 17-11.5 28.5T700-240q-17 0-28.5-11.5T660-280Zm-440-35v-330q0-18 12-29t28-11q5 0 11 1t11 5l248 166q9 6 13.5 14.5T548-480q0 10-4.5 18.5T530-447L282-281q-5 4-11 5t-11 1q-16 0-28-11t-12-29Z"),this.parent.appendChild(this.h),BC(this),d0(this),this.eventManager.o(this.localization,"locale-updated",function(){BC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){BC(s)}),this.eventManager.o(this.h,"click",function(){s.controls.Ca()&&s.g.playItem(s.g.getCurrentItemIndex()+1)}),this.eventManager.o(this.g,"currentitemchanged",function(){d0(s)}),this.eventManager.o(this.g,"itemsinserted",function(){d0(s)}),this.eventManager.o(this.g,"itemsremoved",function(){d0(s)}),this.eventManager.o(this.player,"loading",function(){d0(s)}))}V(FC,ot);function BC(e){e.h.ariaLabel=e.localization.resolve("SKIP_NEXT")}function d0(e){var n=e.g.getItems().length;n=n>1&&e.g.getCurrentItemIndex()+1<n,He(e.h,n)}xe("shaka.ui.SkipNextButton",FC);function aU(){}aU.prototype.create=function(e,n){return new FC(e,n)},Qn("skip_next",new aU);function $C(e,n){ot.call(this,e,n);var s=this;(this.g=this.player.Af())&&(this.h=Tn(),this.h.classList.add("shaka-skip-previous-button"),this.h.classList.add("shaka-tooltip"),new En(this.h).use("M220-280v-400q0-17 11.5-28.5T260-720q17 0 28.5 11.5T300-680v400q0 17-11.5 28.5T260-240q-17 0-28.5-11.5T220-280Zm458-1L430-447q-9-6-13.5-14.5T412-480q0-10 4.5-18.5T430-513l248-166q5-4 11-5t11-1q16 0 28 11t12 29v330q0 18-12 29t-28 11q-5 0-11-1t-11-5Z"),this.parent.appendChild(this.h),VC(this),h0(this),this.eventManager.o(this.localization,"locale-updated",function(){VC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){VC(s)}),this.eventManager.o(this.h,"click",function(){s.controls.Ca()&&s.g.playItem(s.g.getCurrentItemIndex()-1)}),this.eventManager.o(this.g,"currentitemchanged",function(){h0(s)}),this.eventManager.o(this.g,"itemsinserted",function(){h0(s)}),this.eventManager.o(this.g,"itemsremoved",function(){h0(s)}),this.eventManager.o(this.player,"loading",function(){h0(s)}))}V($C,ot);function VC(e){e.h.ariaLabel=e.localization.resolve("SKIP_PREVIOUS")}function h0(e){var n=e.g.getItems().length>1&&e.g.getCurrentItemIndex()>0;He(e.h,n)}xe("shaka.ui.SkipPreviousButton",$C);function lU(){}lU.prototype.create=function(e,n){return new $C(e,n)},Qn("skip_previous",new lU);function GC(e,n){Ul.call(this,e,n),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("shaka-tooltip")}V(GC,Ul),xe("shaka.ui.SmallPlayButton",GC);function uU(){}uU.prototype.create=function(e,n){return new GC(e,n)},Qn("play_pause",new uU);function HC(e,n){ot.call(this,e,n),e=Ne("div"),e.classList.add("shaka-spacer"),e.ariaHidden="true",this.parent.appendChild(e)}V(HC,ot),xe("shaka.ui.Spacer",HC);function cU(){}cU.prototype.create=function(e,n){return new HC(e,n)},Qn("spacer",new cU);function yT(e,n){function s(b){return b=parseInt(w.g[b],10),b>2e9?(b/1e9).toFixed(2)+"GB":b>1e6?(b/1e6).toFixed(2)+"MB":b>1e3?(b/1e3).toFixed(2)+"KB":b+"B"}function a(b){return w.g[b]+" (gaps)"}function u(b){return b=w.g[b],Na(b,b>3600)}function f(b){return Math.round(w.g[b]/1e3)+" (kbits/s)"}function p(b){return w.g[b].toFixed(2)+" (s)"}function g(b){return w.g[b]+" (frames)"}function y(b){return w.g[b]+" (px)"}ot.call(this,e,n);var w=this;this.i=Tn(),this.i.classList.add("shaka-statistics-button"),this.u=new En(this.i,"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Zm120 200q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.A=Ne("span"),e.appendChild(this.A),this.l=Ne("span"),this.l.classList.add("shaka-current-selection-span"),e.appendChild(this.l),this.i.appendChild(e),this.parent.appendChild(this.i),this.h=Ne("div"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-statistics-container"),this.h.classList.add("shaka-hidden"),this.controls.i.appendChild(this.h),this.D=[],this.F=["stateHistory","switchHistory"],this.g=this.player.getStats(),this.m=new Map,this.C=new Map().set("width",y).set("height",y).set("currentCodecs",function(b){return w.g[b]}).set("completionPercent",function(b){return w.g[b]+" (%)"}).set("bufferingTime",p).set("drmTimeSeconds",p).set("licenseTime",p).set("liveLatency",p).set("loadLatency",p).set("manifestTimeSeconds",p).set("estimatedBandwidth",f).set("streamBandwidth",f).set("maxSegmentDuration",p).set("pauseTime",u).set("playTime",u).set("corruptedFrames",g).set("decodedFrames",g).set("droppedFrames",g).set("stallsDetected",function(b){return w.g[b]+" (stalls)"}).set("gapsJumped",a).set("manifestSizeBytes",s).set("bytesDownloaded",s).set("nonFatalErrorCount",function(b){return w.g[b]+" (errors)"}).set("manifestPeriodCount",function(b){return w.g[b]+" (periods)"}).set("manifestGapCount",a),this.j=new Ke(function(){w.g=w.player.getStats();for(var b=C(w.D),I=b.next();!I.done;I=b.next()){var L=I.value;I=w.m.get(L),I.textContent=w.C.get(L)(L),I&&I.parentElement&&(L=w.g[L],typeof L=="string"?He(I.parentElement,L!=""):He(I.parentElement,!isNaN(L)))}}),xT(this),koe(this),this.eventManager.o(this.localization,"locale-updated",function(){xT(w)}),this.eventManager.o(this.localization,"locale-changed",function(){xT(w)}),this.eventManager.o(this.i,"click",function(){dU(w),xT(w)})}V(yT,ot);function dU(e){e.h.classList.contains("shaka-hidden")?(e.u.use("M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm120-440q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z"),e.j.xa(.1),He(e.h,!0)):(e.u.use("M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Zm120 200q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z"),e.j.stop(),He(e.h,!1))}function xT(e){e.A.textContent=e.localization.resolve("STATISTICS"),e.i.ariaLabel=e.localization.resolve("STATISTICS"),e.l.textContent=e.localization.resolve(e.h.classList.contains("shaka-hidden")?"OFF":"ON")}function Coe(e,n){var s=Ne("div"),a=Ne("label");return a.textContent=n+":",s.appendChild(a),a=Ne("span"),a.textContent=e.C.get(n)(n),s.appendChild(a),e.m.set(n,a),s}function koe(e){var n=Ne("div");n.classList.add("shaka-no-propagation"),n.classList.add("shaka-statistics-close");var s=new En(n,"M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z").g;for(s.classList.add("material-icons","notranslate"),e.h.appendChild(n),e.eventManager.o(s,"click",function(){dU(e)}),n=C(e.controls.g.statisticsList),s=n.next();!s.done;s=n.next())if(s=s.value,s in e.g&&!e.F.includes(s)){var a=Coe(e,s);e.h.appendChild(a),e.D.push(s)}else $e("Unrecognized statistic element:",s)}yT.prototype.release=function(){this.j.stop(),this.j=null,ot.prototype.release.call(this)},xe("shaka.ui.StatisticsButton",yT);function qC(){}qC.prototype.create=function(e,n){return new yT(e,n)},bi("statistics",new qC),Rd("statistics",new qC);function KC(e,n){Zs.call(this,e,n,"M200-160q-33 0-56.5-23.5T120-240v-480q0-33 23.5-56.5T200-800h560q33 0 56.5 23.5T840-720v480q0 33-23.5 56.5T760-160H200Zm80-200h120q17 0 28.5-11.5T440-400v-20q0-9-6-15t-15-6h-18q-9 0-15 6t-6 15h-80v-120h80q0 9 6 15t15 6h18q9 0 15-6t6-15v-20q0-17-11.5-28.5T400-600H280q-17 0-28.5 11.5T240-560v160q0 17 11.5 28.5T280-360Zm400-240H560q-17 0-28.5 11.5T520-560v160q0 17 11.5 28.5T560-360h120q17 0 28.5-11.5T720-400v-20q0-9-6-15t-15-6h-18q-9 0-15 6t-6 15h-80v-120h80q0 9 6 15t15 6h18q9 0 15-6t6-15v-20q0-17-11.5-28.5T680-600Z");var s=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.Yc()?this.button.ariaPressed="true":this.button.ariaPressed="false",_oe(this),this.eventManager.o(this.localization,"locale-updated",function(){zC(s),ja(s)}),this.eventManager.o(this.localization,"locale-changed",function(){zC(s),ja(s)}),this.eventManager.o(this.player,"loading",function(){f0(s),ja(s)}),this.eventManager.o(this.player,"loaded",function(){f0(s),ja(s)}),this.eventManager.o(this.player,"unloading",function(){f0(s),ja(s)}),this.eventManager.o(this.player,"texttrackvisibility",function(){f0(s),ja(s)}),this.eventManager.o(this.player,"textchanged",function(){ja(s)}),this.eventManager.o(this.player,"trackschanged",function(){ja(s)}),f0(this),zC(this),ja(this)}V(KC,Zs);function _oe(e){var n=Tn();n.ariaSelected="true",e.menu.appendChild(n),n.appendChild(qu()),e.g=Ne("span"),n.appendChild(e.g)}function f0(e){e.player.Yc()?(e.icon.use("M200-160q-33 0-56.5-23.5T120-240v-480q0-33 23.5-56.5T200-800h560q33 0 56.5 23.5T840-720v480q0 33-23.5 56.5T760-160H200Zm80-200h120q17 0 28.5-11.5T440-400v-20q0-9-6-15t-15-6h-18q-9 0-15 6t-6 15h-80v-120h80q0 9 6 15t15 6h18q9 0 15-6t6-15v-20q0-17-11.5-28.5T400-600H280q-17 0-28.5 11.5T240-560v160q0 17 11.5 28.5T280-360Zm400-240H560q-17 0-28.5 11.5T520-560v160q0 17 11.5 28.5T560-360h120q17 0 28.5-11.5T720-400v-20q0-9-6-15t-15-6h-18q-9 0-15 6t-6 15h-80v-120h80q0 9 6 15t15 6h18q9 0 15-6t6-15v-20q0-17-11.5-28.5T680-600Z"),e.button.ariaPressed="true"):(e.icon.use("M791-57 687-160H200q-33 0-56.5-23.5T120-240v-487l-65-65q-12-12-12-28.5T55-849q12-12 28.5-12t28.5 12l736 736q12 12 12 28t-12 28q-12 12-28.5 12T791-57ZM280-360h120q17 0 28.5-11.5T440-400v-25q0-8-6-14t-14-6h-20q-8 0-14 6t-6 14v5h-80v-127l-45-45v1q-7 5-11 13t-4 18v160q0 17 11.5 28.5T280-360Zm560-360v388q0 27-24.5 37.5T772-303l-66-66q7-5 10.5-13.5T720-400v-20q0-8-6-14t-14-6h-20q-8 0-14 6t-6 14h-5l-75-75v-45h80v5q0 8 6 14t14 6h20q8 0 14-6t6-14v-25q0-17-11.5-28.5T680-600H560q-17 0-28.5 11.5T520-560v5L343-732q-19-19-8.5-43.5T372-800h388q33 0 56.5 23.5T840-720Z"),e.button.ariaPressed="false"),e.controls.dispatchEvent(new _e("captionselectionupdated"))}function ja(e){var n=e.player.Cc()||[];xoe(n,e.menu,function(a){return Roe(e,a)},e.player.Yc(),e.currentSelection,e.localization,e.controls.g.textTrackLabelFormat);var s=Tn();s.classList.add("shaka-turn-captions-off-button"),e.eventManager.o(s,"click",function(){e.player.ae(!1),ja(e)}),s.appendChild(e.g),e.menu.appendChild(s),e.player.Yc()?e.g.classList.remove("shaka-chosen-item"):(s.ariaSelected="true",s.appendChild(qu()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),Pf(e.menu),e.controls.dispatchEvent(new _e("captionselectionupdated")),He(e.button,n.length>0)}function Roe(e,n){return X(function(s){if(s.g==1)return e.player.kg(n),O(s,e.player.ae(!0),2);e.player.configure({preferredTextLanguage:n.language,preferForcedSubs:n.forced}),re(s)})}function zC(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS"),e.backButton.ariaLabel=e.localization.resolve("BACK"),e.nameSpan.textContent=e.localization.resolve("CAPTIONS"),e.backSpan.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}xe("shaka.ui.TextSelection",KC);function WC(){}WC.prototype.create=function(e,n){return new KC(e,n)},bi("captions",new WC),Qn("captions",new WC);function YC(e,n){ot.call(this,e,n);var s=this;this.g=Tn(),this.g.classList.add("shaka-toggle-stereoscopic-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",new En(this.g,"M620-360H520q-8 0-14-6t-6-14v-200q0-8 6-14t14-6h100q17 0 28.5 11.5T660-560v160q0 17-11.5 28.5T620-360Zm-200 0h-90q-13 0-21.5-8.5T300-390q0-13 8.5-21.5T330-420h70v-40h-40q-8 0-14-6t-6-14q0-8 6-14t14-6h40v-40h-70q-13 0-21.5-8.5T300-570q0-13 8.5-21.5T330-600h90q17 0 28.5 11.5T460-560v160q0 17-11.5 28.5T420-360Zm140-60h40v-120h-40v120Zm280-20q-17 0-28.5-11.5T800-480q0-115-72.5-203T542-794l30 30q11 11 11 28t-11 28q-11 11-28 11t-28-11L387-837q-8-8-4.5-20t14.5-15q20-5 41-6.5t42-1.5q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 17-11.5 28.5T840-440ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-17 11.5-28.5T120-520q17 0 28.5 11.5T160-480q0 115 72.5 203T418-166l-30-30q-11-11-11-28t11-28q11-11 28-11t28 11l129 129q8 8 4.5 20T563-88q-20 5-41 6.5T480-80Z"),e=Ne("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.i=Ne("span"),e.appendChild(this.i),this.h=Ne("span"),this.h.classList.add("shaka-current-selection-span"),e.appendChild(this.h),this.g.appendChild(e),this.parent.appendChild(this.g),XC(this),this.eventManager.o(this.localization,"locale-updated",function(){XC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){XC(s)});var a=this.controls.D;this.eventManager.o(this.g,"click",function(){s.controls.Ca()&&a.be()}),this.eventManager.o(a,"vrstatuschanged",function(){He(s.g,s.controls.Yb())}),He(this.g,this.controls.Yb())}V(YC,ot);function XC(e){e.g.ariaLabel=e.localization.resolve("TOGGLE_STEREOSCOPIC"),e.i.textContent=e.localization.resolve("TOGGLE_STEREOSCOPIC")}xe("shaka.ui.ToggleStereoscopicButton",YC);function QC(){}QC.prototype.create=function(e,n){return new YC(e,n)},bi("toggle_stereoscopic",new QC),Qn("toggle_stereoscopic",new QC);function TT(e,n){Er.call(this,e,n,["shaka-volume-bar-container"],["shaka-volume-bar"]);var s=this;this.g=this.controls.g,this.g.alwaysShowVolumeBar||this.container.classList.add("shaka-volume-bar-container-allow-hiding"),this.setRange(0,100),this.eventManager.o(this.video,"volumechange",function(){return p0(s)}),this.eventManager.o(this.player,"loading",function(){return p0(s)}),this.eventManager.o(this.player,"loaded",function(){return jf(s)}),this.eventManager.o(this.player,"unloading",function(){return jf(s)}),this.eventManager.o(this.player,"trackschanged",function(){return jf(s)}),this.eventManager.o(this.controls,"caststatuschanged",function(){return p0(s)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){return hU(s)}),this.eventManager.o(this.adManager,"ad-muted",function(){return hU(s)}),this.eventManager.o(this.adManager,"ad-started",function(){return jf(s)}),this.eventManager.o(this.adManager,"ad-stopped",function(){jf(s),p0(s)}),this.eventManager.o(this.localization,"locale-updated",function(){return JC(s)}),this.eventManager.o(this.localization,"locale-changed",function(){return JC(s)}),p0(this),JC(this),this.ad&&this.onChange(),jf(this)}V(TT,Er),TT.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()/100):(this.video.volume=this.getValue()/100,this.video.volume>0&&(this.video.muted=!1))};function p0(e){e.video.muted?e.setValue(0):e.setValue(e.video.volume*100),fU(e)}function hU(e){var n=e.ad.getVolume();e.setValue(n*100),fU(e)}function fU(e){var n=e.g.volumeBarColors,s=["to right"];s.push(n.level+e.getValue()+"%"),s.push(n.base+e.getValue()+"%"),s.push(n.base+"100%"),e.container.style.background="linear-gradient("+s.join(",")+")"}function JC(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}function jf(e){var n=!0;e.ad&&e.ad.isLinear()?n=!0:e.player.Kf()&&(n=!1),He(e.container,n)}xe("shaka.ui.VolumeBar",TT);function pU(){}pU.prototype.create=function(e,n){return new TT(e,n)},Qn("volume",new pU)}).call(r,t,t,void 0);for(var o in r.shaka)i[o]=r.shaka[o]})()})(qW);const ec=HL(qW),BEe=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,$Ee=({channel:i,onStatusChange:t})=>{const r=M.useRef(null),o=M.useRef(null),l=M.useRef(null),c=M.useRef(null),h=M.useRef(null),[d,m]=M.useState(!0),[v,x]=M.useState(null),[T,E]=M.useState(null),A=M.useMemo(()=>BEe()?i.clearKey||i.widevineUrl?"Hindi supported ang stream na ito sa iPhone/iPad dahil sa DRM restrictions. Subukan sa Android o desktop browser.":i.type==="mpd"?"Maaaring hindi gumana ang stream na ito sa iPhone/iPad. Subukan sa Android o desktop browser kung may problema.":null:null,[i]);return M.useEffect(()=>{t==null||t(!v&&!T)},[v,T,t]),M.useEffect(()=>{A&&E(A)},[A]),M.useEffect(()=>{let k=!0;return(async()=>{var R,P;if(!(!r.current||!o.current)){m(!0),x(null),h.current&&(await h.current.destroy(),h.current=null),c.current&&(await c.current.destroy(),c.current=null),l.current&&(l.current.destroy(),l.current=null);try{if(i.type==="hls"){if(i.widevineUrl){if(r.current.controls=!1,ec.polyfill.installAll(),!ec.Player.isBrowserSupported()){k&&(x("Your browser does not support this stream format."),m(!1));return}const D=new ec.Player(r.current);c.current=D;const N=new ec.ui.Overlay(D,o.current,r.current);h.current=N,N.configure({overflowMenuButtons:["quality","captions","language","picture_in_picture","cast"],addBigPlayButton:!0}),D.configure({drm:{servers:{"com.widevine.alpha":i.widevineUrl}}});try{await D.load(i.manifestUri),k&&(m(!1),(R=r.current)==null||R.play().catch(()=>{}))}catch($){console.error("Shaka error:",$),k&&(x("Failed to load stream. The channel may be offline or requires CORS headers from the server."),m(!1))}}else if(r.current.controls=!0,ma.isSupported()){const D=new ma({enableWorker:!0,lowLatencyMode:!0});l.current=D,D.loadSource(i.manifestUri),D.attachMedia(r.current),D.on(ma.Events.MANIFEST_PARSED,()=>{var N;k&&(m(!1),(N=r.current)==null||N.play().catch(()=>{}))}),D.on(ma.Events.ERROR,(N,$)=>{$.fatal&&k&&(x("Failed to load stream. The channel may be offline."),m(!1))})}else if(r.current.canPlayType("application/vnd.apple.mpegurl")){r.current.src=i.manifestUri;const D=()=>{var N;k&&(m(!1),(N=r.current)==null||N.play().catch(()=>{}))};r.current.addEventListener("loadedmetadata",D)}}else if(i.type==="mpd"){if(r.current.controls=!1,ec.polyfill.installAll(),!ec.Player.isBrowserSupported()){k&&(x("Your browser does not support this stream format."),m(!1));return}const D=new ec.Player(r.current);c.current=D;const N=new ec.ui.Overlay(D,o.current,r.current);h.current=N,N.configure({overflowMenuButtons:["quality","captions","language","picture_in_picture","cast"],addBigPlayButton:!0}),D.configure({drm:{clearKeys:i.clearKey||{},servers:i.widevineUrl?{"com.widevine.alpha":i.widevineUrl}:{}}});try{await D.load(i.manifestUri);const V=D.getTextTracks().find(W=>W.language==="en"||W.language==="eng");V&&(D.setTextTrackVisibility(!0),D.selectTextTrack(V),console.log("Subtitles auto-enabled:",V.language)),k&&(m(!1),(P=r.current)==null||P.play().catch(()=>{}))}catch($){console.error("Shaka error:",$),k&&(x("Failed to load stream. The channel may require different DRM or is offline."),m(!1))}}}catch(D){console.error("Player error:",D),k&&(x("Failed to initialize player."),m(!1))}}})(),()=>{k=!1,h.current&&(h.current.destroy(),h.current=null),c.current&&(c.current.destroy().catch(()=>{}),c.current=null),l.current&&(l.current.destroy(),l.current=null)}},[i]),S.jsxs(S.Fragment,{children:[d&&!T&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-card z-10 pointer-events-none",children:S.jsx(tr,{className:"w-10 h-10 text-primary animate-spin"})}),T&&S.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-card gap-3 p-4 text-center z-20",children:[S.jsx(Rce,{className:"w-12 h-12 text-amber-500"}),S.jsx("p",{className:"text-amber-500 font-medium",children:"iOS Compatibility Issue"}),S.jsx("p",{className:"text-muted-foreground text-sm max-w-xs",children:T})]}),v&&!T&&S.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-card gap-3 p-4 text-center z-20",children:[S.jsx(dce,{className:"w-12 h-12 text-destructive"}),S.jsx("p",{className:"text-muted-foreground",children:v})]}),S.jsx("div",{ref:o,className:"relative w-full h-full",children:S.jsx("video",{ref:r,className:"w-full h-full",autoPlay:!0,playsInline:!0})})]})},VEe=({channel:i,onStatusChange:t})=>i.type==="youtube"?S.jsx("div",{className:"aspect-video w-full rounded-xl overflow-hidden bg-card border border-border",children:S.jsx("iframe",{src:`${i.embedUrl}&autoplay=1`,title:i.name,className:"w-full h-full",allowFullScreen:!0,allow:"autoplay; encrypted-media"})}):S.jsx("div",{className:"aspect-video w-full rounded-xl overflow-hidden bg-card border border-border relative",children:S.jsx($Ee,{channel:i,onStatusChange:t},i.id)}),KW=({title:i="Check this out!",url:t})=>{const[r,o]=M.useState(!1),[l,c]=M.useState(!1),h=t||window.location.href,d=[{name:"Facebook",icon:fce,color:"bg-[#1877F2] hover:bg-[#166FE5]",onClick:()=>{window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(h)}`,"_blank","width=600,height=400")}},{name:"Twitter",icon:Dce,color:"bg-[#1DA1F2] hover:bg-[#1A91DA]",onClick:()=>{window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(h)}&text=${encodeURIComponent(i)}`,"_blank","width=600,height=400")}},{name:"Messenger",icon:DR,color:"bg-gradient-to-r from-[#00B2FF] to-[#006AFF] hover:opacity-90",onClick:()=>{window.open(`https://www.facebook.com/dialog/send?link=${encodeURIComponent(h)}&app_id=291494419107518&redirect_uri=${encodeURIComponent(h)}`,"_blank","width=600,height=400")}},{name:"WhatsApp",icon:()=>S.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:S.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),color:"bg-[#25D366] hover:bg-[#20BD5A]",onClick:()=>{window.open(`https://wa.me/?text=${encodeURIComponent(i+" "+h)}`,"_blank")}},{name:"Telegram",icon:()=>S.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:S.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),color:"bg-[#0088CC] hover:bg-[#0077B5]",onClick:()=>{window.open(`https://t.me/share/url?url=${encodeURIComponent(h)}&text=${encodeURIComponent(i)}`,"_blank")}}],m=async()=>{try{await navigator.clipboard.writeText(h),c(!0),gi.success("Link copied to clipboard!"),setTimeout(()=>c(!1),2e3)}catch{gi.error("Failed to copy link")}},v=async()=>{if(navigator.share)try{await navigator.share({title:i,url:h})}catch(x){x.name!=="AbortError"&&o(!0)}else o(!0)};return S.jsxs(S.Fragment,{children:[S.jsxs(Ge,{variant:"outline",size:"sm",onClick:v,className:"gap-2",children:[S.jsx(_ce,{className:"w-4 h-4"}),"Share"]}),S.jsx(_E,{open:r,onOpenChange:o,children:S.jsxs(cy,{className:"sm:max-w-md",children:[S.jsx(EP,{children:S.jsx(bP,{className:"text-center",children:"Share"})}),S.jsx("div",{className:"grid grid-cols-5 gap-3 py-4",children:d.map(x=>{const T=x.icon;return S.jsxs("button",{onClick:()=>{x.onClick(),o(!1)},className:"flex flex-col items-center gap-2 group",children:[S.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white transition-transform group-hover:scale-110 ${x.color}`,children:S.jsx(T,{className:"w-5 h-5"})}),S.jsx("span",{className:"text-xs text-muted-foreground",children:x.name})]},x.name)})}),S.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[S.jsx(gce,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),S.jsx("input",{type:"text",value:h,readOnly:!0,className:"flex-1 bg-transparent text-sm outline-none truncate"}),S.jsx(Ge,{size:"sm",variant:l?"default":"secondary",onClick:m,className:"flex-shrink-0 gap-1",children:l?S.jsxs(S.Fragment,{children:[S.jsx(hE,{className:"w-3 h-3"}),"Copied"]}):"Copy"})]})]})})]})},GEe=()=>{const{channelId:i}=sy(),t=Xc(),[r,o]=M.useState(!0),[l,c]=M.useState("a-z"),{data:h,isLoading:d}=FP(),{data:m}=RK(),v=M.useMemo(()=>{const _=new Map;return(h||[]).forEach(R=>{_.set(R.name.toLowerCase(),R)}),_},[h]),x=M.useMemo(()=>{const _=(h||[]).map(_K),R=new Set(_.map(D=>D.name.toLowerCase())),P=PE.filter(D=>!R.has(D.name.toLowerCase()));return[..._,...P]},[h]),T=x.find(_=>_.id===i);M.useEffect(()=>{T&&s1e(T.id,T.name)},[T==null?void 0:T.id,T==null?void 0:T.name]);const E=M.useMemo(()=>{const _=x.filter(R=>R.id!==i);switch(l){case"a-z":return _.sort((R,P)=>R.name.localeCompare(P.name));case"popular":return _.sort((R,P)=>{const D=(m==null?void 0:m[R.id])||0,N=(m==null?void 0:m[P.id])||0;return N!==D?N-D:R.name.localeCompare(P.name)});case"recent":return _.sort((R,P)=>{const D=v.get(R.name.toLowerCase()),N=v.get(P.name.toLowerCase());return D&&N?new Date(N.created_at).getTime()-new Date(D.created_at).getTime():D&&!N?-1:!D&&N?1:R.name.localeCompare(P.name)});default:return _}},[x,i,m,v,l]),A=M.useCallback(_=>{t(`/live/${_}`,{replace:!0})},[t]),k=M.useCallback(_=>{o(_)},[]);return d?S.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:S.jsx(tr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):T?S.jsxs("div",{className:"h-screen bg-background flex flex-col overflow-hidden",children:[S.jsx(ai,{}),S.jsx(Ah,{className:"flex-1 pt-16",children:S.jsx("main",{className:"pb-12",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsx("div",{className:"py-3",children:S.jsx(Ge,{asChild:!0,variant:"ghost",size:"sm",className:"gap-2",children:S.jsxs(An,{to:"/live-tv",children:[S.jsx(Zv,{className:"w-4 h-4"}),"Back to Live TV"]})})}),S.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[S.jsx("img",{src:T.logo,alt:T.name,className:"w-10 h-10 object-contain rounded-lg bg-secondary p-1.5"}),S.jsxs("div",{children:[S.jsx("h1",{className:"text-lg font-bold",children:T.name}),S.jsx("div",{className:"flex items-center gap-2 text-xs",children:r?S.jsxs(S.Fragment,{children:[S.jsx(pE,{className:"w-3 h-3 text-green-500 animate-pulse"}),S.jsx("span",{className:"text-green-500",children:"Live Now"})]}):S.jsxs(S.Fragment,{children:[S.jsx(Nce,{className:"w-3 h-3 text-destructive"}),S.jsx("span",{className:"text-destructive",children:"Offline"})]})})]})]}),S.jsx(VEe,{channel:T,onStatusChange:k}),S.jsx("div",{className:"flex justify-start mt-3",children:S.jsx(KW,{title:`Watch ${T.name} - Live TV`})})]}),E.length>0&&S.jsxs("div",{className:"mt-6 max-w-4xl mx-auto w-full",children:[S.jsxs("div",{className:"flex items-center justify-between mb-3",children:[S.jsx("h2",{className:"text-sm font-semibold",children:"Other Channels"}),S.jsxs(mu,{value:l,onValueChange:_=>c(_),children:[S.jsx(sl,{className:"w-[140px] h-8 text-xs bg-card",children:S.jsx(gu,{placeholder:"Sort by"})}),S.jsxs(ol,{className:"bg-popover",children:[S.jsx(kr,{value:"a-z",children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(FG,{className:"w-3 h-3"}),S.jsx("span",{children:"A-Z"})]})}),S.jsx(kr,{value:"popular",children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(gE,{className:"w-3 h-3"}),S.jsx("span",{children:"Popular"})]})}),S.jsx(kr,{value:"recent",children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(ey,{className:"w-3 h-3"}),S.jsx("span",{children:"Recent"})]})})]})]})]}),S.jsx("div",{className:"border border-border rounded-xl bg-card/50 p-3",children:S.jsx(Ah,{className:"h-[280px]",children:S.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 gap-2 pr-3",children:E.map(_=>S.jsxs("button",{onClick:()=>A(_.id),className:"flex flex-col items-center p-2 rounded-lg bg-background border border-border hover:border-primary/50 hover:bg-accent/50 transition-all duration-200 group",children:[S.jsx("img",{src:_.logo,alt:_.name,className:"w-8 h-8 sm:w-10 sm:h-10 object-contain rounded-md bg-secondary/50 p-1"}),S.jsx("p",{className:"font-medium text-[9px] sm:text-[10px] group-hover:text-primary transition-colors text-center mt-1.5 line-clamp-1 w-full",children:_.name})]},_.id))})})})]})]})})})]}):S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsxs("div",{className:"pt-24 container mx-auto px-4 text-center",children:[S.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Channel not found"}),S.jsx(Ge,{asChild:!0,children:S.jsx(An,{to:"/live-tv",children:"Back to Live TV"})})]})]})},A9=["Server 1"],HEe=({servers:i,title:t})=>{var x;const r=Object.entries(i),[o,l]=M.useState(((x=r[0])==null?void 0:x[0])||""),[c,h]=M.useState(!1),d=i[o],m=A9.includes(o),v=()=>{h(!0)};return S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[S.jsx(Cce,{className:"w-4 h-4 text-muted-foreground"}),S.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:"Select Server:"}),r.map(([T])=>S.jsxs(Ge,{variant:o===T?"default":"outline",size:"sm",onClick:()=>{l(T),h(!1)},className:"gap-2",children:[T,A9.includes(T)&&S.jsx("span",{className:"text-[10px] bg-green-500/20 text-green-400 px-1.5 py-0.5 rounded",children:"No Ads"})]},T))]}),S.jsxs("div",{className:"aspect-video w-full rounded-xl overflow-hidden bg-card border border-border relative",children:[c?null:S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-10 cursor-pointer",onClick:v,children:S.jsxs("div",{className:"flex flex-col items-center gap-4",children:[S.jsx("div",{className:"w-20 h-20 rounded-full bg-primary flex items-center justify-center hover:bg-primary/90 transition-colors hover:scale-105 transform",children:S.jsx(zc,{className:"w-10 h-10 text-primary-foreground ml-1",fill:"currentColor"})}),S.jsx("span",{className:"text-white font-medium",children:"Click to Play"})]})}),c&&(m?S.jsx("iframe",{src:d,title:t,className:"w-full h-full",allowFullScreen:!0,allow:"autoplay; encrypted-media; picture-in-picture; fullscreen",referrerPolicy:"origin",sandbox:"allow-scripts allow-same-origin allow-presentation"},`sandboxed-${o}`):S.jsx("iframe",{src:d,title:t,className:"w-full h-full",allowFullScreen:!0,allow:"autoplay; encrypted-media; picture-in-picture",referrerPolicy:"origin"},`normal-${o}`))]}),S.jsx("div",{className:"flex justify-start",children:S.jsx(KW,{title:t})})]})},qEe=({trailerUrl:i,title:t,onClose:r,onSkip:o})=>S.jsxs("div",{className:"fixed inset-0 z-50 bg-background/95 flex flex-col",children:[S.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[S.jsxs("h2",{className:"text-lg font-semibold",children:["Trailer: ",t]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Ge,{variant:"outline",onClick:o,size:"sm",children:"Skip to Watch"}),S.jsx(Ge,{variant:"ghost",size:"icon",onClick:r,children:S.jsx(Fo,{className:"w-5 h-5"})})]})]}),S.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:S.jsx("div",{className:"w-full max-w-5xl aspect-video rounded-xl overflow-hidden shadow-2xl",children:S.jsx("iframe",{src:i,title:`${t} Trailer`,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})]}),KEe=({tvId:i,seasons:t,onSelect:r,currentSeason:o,currentEpisode:l})=>{const[c,h]=M.useState(o),[d,m]=M.useState([]),[v,x]=M.useState(!1),T=t.filter(A=>A.season_number>0).sort((A,k)=>A.season_number-k.season_number);M.useEffect(()=>{(async()=>{x(!0);try{const k=await uye(i,c);m(k.episodes||[])}catch(k){console.error("Failed to load episodes:",k),m([])}finally{x(!1)}})()},[i,c]);const E=A=>{h(Number(A))};return S.jsxs("div",{className:"space-y-4 p-4 rounded-xl bg-card border border-border",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("h3",{className:"font-semibold",children:"Episodes"}),S.jsxs(mu,{value:String(c),onValueChange:E,children:[S.jsx(sl,{className:"w-[160px] bg-secondary border-border",children:S.jsx(gu,{placeholder:"Select season"})}),S.jsx(ol,{children:T.map(A=>S.jsxs(kr,{value:String(A.season_number),children:["Season ",A.season_number]},A.id))})]})]}),S.jsx(Ah,{className:"h-[300px] pr-4",children:v?S.jsx("div",{className:"flex items-center justify-center h-full",children:S.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):d.length>0?S.jsx("div",{className:"space-y-2",children:d.map(A=>{const k=c===o&&A.episode_number===l;return S.jsxs("button",{onClick:()=>r(c,A.episode_number),className:`w-full flex gap-3 p-2 rounded-lg transition-all text-left ${k?"bg-primary/20 border border-primary/50":"bg-secondary/50 hover:bg-secondary border border-transparent"}`,children:[S.jsxs("div",{className:"relative w-24 h-14 flex-shrink-0 rounded-md overflow-hidden bg-muted",children:[A.still_path?S.jsx("img",{src:Bc(A.still_path,"w300"),alt:A.name,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground text-xs",children:"No Image"}),k&&S.jsx("div",{className:"absolute inset-0 bg-primary/30 flex items-center justify-center",children:S.jsx(zc,{className:"w-4 h-4 text-primary-foreground",fill:"currentColor"})})]}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsxs("p",{className:"text-sm font-medium line-clamp-1",children:["E",A.episode_number,". ",A.name]}),S.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mt-0.5",children:A.overview||"No description available"})]})]},A.id)})}):S.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No episodes found"})})]})},zEe=()=>{var Q,fe;const{type:i,id:t}=sy(),[r,o]=M.useState(null),[l,c]=M.useState([]),[h,d]=M.useState(!0),[m,v]=M.useState(null),[x,T]=M.useState(!1),[E,A]=M.useState(1),[k,_]=M.useState(1),[R,P]=M.useState(!1);M.useEffect(()=>{t&&i&&P(wye(Number(t),i))},[t,i]),M.useEffect(()=>{(async()=>{var re,ce;if(!(!t||!i)){d(!0),T(!1),v(null),fK(`/watch/${i}/${t}`);try{const Ae=i==="movie"?await oye(Number(t)):await aye(Number(t));o(Ae),Pye(t,i,Ae.title||Ae.name||"");const se=await fye(Number(t),i),ue=pye(se);v(ue),kye({id:Ae.id,type:i,title:Ae.title||Ae.name||"",poster_path:Ae.poster_path,genre_ids:((re=Ae.genres)==null?void 0:re.map(be=>be.id))||[]});const le=Ae.runtime||(((ce=Ae.episode_run_time)==null?void 0:ce[0])??90);o7({id:Ae.id,type:i,title:Ae.title||Ae.name||"",poster_path:Ae.poster_path,progress:5,currentTime:0,duration:le*60,season:i==="tv"?1:void 0,episode:i==="tv"?1:void 0}),i==="tv"&&(A(1),_(1));const pe=await Jq(i,"week");c(pe.filter(be=>be.id!==Number(t)))}catch(Ae){console.error("Failed to load details:",Ae)}finally{d(!1)}}})()},[t,i]);const D=(O,re)=>{var ce;if(A(O),_(re),r){const Ae=((ce=r.episode_run_time)==null?void 0:ce[0])??45;o7({id:r.id,type:"tv",title:r.title||r.name||"",poster_path:r.poster_path,progress:5,currentTime:0,duration:Ae*60,season:O,episode:re})}},N=()=>{!r||!i||(R?(lK(r.id,i),P(!1),gi.success("Removed from My List")):Sye({id:r.id,type:i,title:r.title||r.name||"",poster_path:r.poster_path,vote_average:r.vote_average,release_date:r.release_date||r.first_air_date})&&(P(!0),gi.success("Added to My List")))};if(h)return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsx("div",{className:"pt-24 flex items-center justify-center",children:S.jsx(tr,{className:"w-10 h-10 text-primary animate-spin"})})]});if(!r)return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsxs("div",{className:"pt-24 container mx-auto px-4 text-center",children:[S.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Content not found"}),S.jsx(Ge,{asChild:!0,children:S.jsx(An,{to:"/",children:"Go Home"})})]})]});const $=r.title||r.name||"",V=r.release_date||r.first_air_date,W=V?new Date(V).getFullYear():"",C=r.runtime||(((Q=r.episode_run_time)==null?void 0:Q[0])??0),K=i==="movie"?s7(r.id,"movie"):s7(r.id,"tv",E,k),ee=i==="tv";return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),x&&m&&S.jsx(qEe,{trailerUrl:m,title:$,onClose:()=>T(!1),onSkip:()=>T(!1)}),S.jsx("div",{className:"absolute top-0 left-0 right-0 h-[50vh] bg-cover bg-center opacity-30",style:{backgroundImage:`url(${Bc(r.backdrop_path,"original")})`},children:S.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/50 to-background"})}),S.jsx("main",{className:"relative pt-20 pb-12",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsx(Ge,{asChild:!0,variant:"ghost",className:"mb-4 gap-2",children:S.jsxs(An,{to:i==="movie"?"/movies":"/tv-shows",children:[S.jsx(Zv,{className:"w-4 h-4"}),"Back"]})}),S.jsxs("div",{className:"grid lg:grid-cols-[300px_1fr] gap-8 mb-8",children:[S.jsx("div",{className:"hidden lg:block",children:S.jsx("img",{src:Bc(r.poster_path,"w500"),alt:$,className:"w-full rounded-xl shadow-lg"})}),S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-2",children:$}),r.tagline&&S.jsx("p",{className:"text-muted-foreground italic mb-4",children:r.tagline}),S.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4 text-sm",children:[S.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-yellow-400/20 text-yellow-400 font-bold",children:[S.jsx(ty,{className:"w-4 h-4",fill:"currentColor"}),r.vote_average.toFixed(1)]}),W&&S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(dE,{className:"w-4 h-4 text-muted-foreground"}),W]}),C>0&&S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(ey,{className:"w-4 h-4 text-muted-foreground"}),C," min"]}),S.jsx("span",{className:"px-2 py-0.5 rounded bg-primary/20 text-primary text-xs uppercase font-medium",children:i==="movie"?"Movie":"TV Series"}),ee&&S.jsxs("span",{className:"text-muted-foreground",children:["S",E," E",k]})]}),S.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:(fe=r.genres)==null?void 0:fe.map(O=>S.jsx("span",{className:"px-3 py-1 rounded-full bg-secondary text-sm",children:O.name},O.id))}),S.jsx("p",{className:"text-muted-foreground mb-6 max-w-3xl",children:r.overview}),S.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[S.jsx(Ge,{variant:R?"secondary":"outline",onClick:N,className:"gap-2",children:R?S.jsxs(S.Fragment,{children:[S.jsx(hE,{className:"w-4 h-4"}),"In My List"]}):S.jsxs(S.Fragment,{children:[S.jsx(H4,{className:"w-4 h-4"}),"Add to My List"]})}),m&&S.jsxs(Ge,{variant:"outline",onClick:()=>T(!0),className:"gap-2",children:[S.jsx(zc,{className:"w-4 h-4"}),"Watch Trailer"]})]}),S.jsx(HEe,{servers:K,title:$}),ee&&r.seasons&&r.seasons.length>0&&S.jsx("div",{className:"mt-6",children:S.jsx(KEe,{tvId:r.id,seasons:r.seasons,onSelect:D,currentSeason:E,currentEpisode:k})})]})]}),l.length>0&&S.jsx(cp,{title:i==="movie"?"Similar Movies":"Similar Shows",items:l,type:i})]})})]})};var zW=["PageUp","PageDown"],WW=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],YW={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},km="Slider",[FL,WEe,YEe]=lE(km),[XW]=Fs(km,[YEe]),[XEe,$E]=XW(km),QW=M.forwardRef((i,t)=>{const{name:r,min:o=0,max:l=100,step:c=1,orientation:h="horizontal",disabled:d=!1,minStepsBetweenThumbs:m=0,defaultValue:v=[o],value:x,onValueChange:T=()=>{},onValueCommit:E=()=>{},inverted:A=!1,form:k,..._}=i,R=M.useRef(new Set),P=M.useRef(0),N=h==="horizontal"?QEe:JEe,[$=[],V]=hu({prop:x,defaultProp:v,onChange:fe=>{var re;(re=[...R.current][P.current])==null||re.focus(),T(fe)}}),W=M.useRef($);function C(fe){const O=rbe($,fe);Q(fe,O)}function K(fe){Q(fe,P.current)}function ee(){const fe=W.current[P.current];$[P.current]!==fe&&E($)}function Q(fe,O,{commit:re}={commit:!1}){const ce=abe(c),Ae=lbe(Math.round((fe-o)/c)*c+o,ce),se=Pv(Ae,[o,l]);V((ue=[])=>{const le=tbe(ue,se,O);if(obe(le,m*c)){P.current=le.indexOf(se);const pe=String(le)!==String(ue);return pe&&re&&E(le),pe?le:ue}else return ue})}return S.jsx(XEe,{scope:i.__scopeSlider,name:r,disabled:d,min:o,max:l,valueIndexToChangeRef:P,thumbs:R.current,values:$,orientation:h,form:k,children:S.jsx(FL.Provider,{scope:i.__scopeSlider,children:S.jsx(FL.Slot,{scope:i.__scopeSlider,children:S.jsx(N,{"aria-disabled":d,"data-disabled":d?"":void 0,..._,ref:t,onPointerDown:st(_.onPointerDown,()=>{d||(W.current=$)}),min:o,max:l,inverted:A,onSlideStart:d?void 0:C,onSlideMove:d?void 0:K,onSlideEnd:d?void 0:ee,onHomeKeyDown:()=>!d&&Q(o,0,{commit:!0}),onEndKeyDown:()=>!d&&Q(l,$.length-1,{commit:!0}),onStepKeyDown:({event:fe,direction:O})=>{if(!d){const Ae=zW.includes(fe.key)||fe.shiftKey&&WW.includes(fe.key)?10:1,se=P.current,ue=$[se],le=c*Ae*O;Q(ue+le,se,{commit:!0})}}})})})})});QW.displayName=km;var[JW,ZW]=XW(km,{startEdge:"left",endEdge:"right",size:"width",direction:1}),QEe=M.forwardRef((i,t)=>{const{min:r,max:o,dir:l,inverted:c,onSlideStart:h,onSlideMove:d,onSlideEnd:m,onStepKeyDown:v,...x}=i,[T,E]=M.useState(null),A=Kt(t,N=>E(N)),k=M.useRef(void 0),_=hy(l),R=_==="ltr",P=R&&!c||!R&&c;function D(N){const $=k.current||T.getBoundingClientRect(),V=[0,$.width],C=hD(V,P?[r,o]:[o,r]);return k.current=$,C(N-$.left)}return S.jsx(JW,{scope:i.__scopeSlider,startEdge:P?"left":"right",endEdge:P?"right":"left",direction:P?1:-1,size:"width",children:S.jsx(eY,{dir:_,"data-orientation":"horizontal",...x,ref:A,style:{...x.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const $=D(N.clientX);h==null||h($)},onSlideMove:N=>{const $=D(N.clientX);d==null||d($)},onSlideEnd:()=>{k.current=void 0,m==null||m()},onStepKeyDown:N=>{const V=YW[P?"from-left":"from-right"].includes(N.key);v==null||v({event:N,direction:V?-1:1})}})})}),JEe=M.forwardRef((i,t)=>{const{min:r,max:o,inverted:l,onSlideStart:c,onSlideMove:h,onSlideEnd:d,onStepKeyDown:m,...v}=i,x=M.useRef(null),T=Kt(t,x),E=M.useRef(void 0),A=!l;function k(_){const R=E.current||x.current.getBoundingClientRect(),P=[0,R.height],N=hD(P,A?[o,r]:[r,o]);return E.current=R,N(_-R.top)}return S.jsx(JW,{scope:i.__scopeSlider,startEdge:A?"bottom":"top",endEdge:A?"top":"bottom",size:"height",direction:A?1:-1,children:S.jsx(eY,{"data-orientation":"vertical",...v,ref:T,style:{...v.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:_=>{const R=k(_.clientY);c==null||c(R)},onSlideMove:_=>{const R=k(_.clientY);h==null||h(R)},onSlideEnd:()=>{E.current=void 0,d==null||d()},onStepKeyDown:_=>{const P=YW[A?"from-bottom":"from-top"].includes(_.key);m==null||m({event:_,direction:P?-1:1})}})})}),eY=M.forwardRef((i,t)=>{const{__scopeSlider:r,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onHomeKeyDown:h,onEndKeyDown:d,onStepKeyDown:m,...v}=i,x=$E(km,r);return S.jsx(xt.span,{...v,ref:t,onKeyDown:st(i.onKeyDown,T=>{T.key==="Home"?(h(T),T.preventDefault()):T.key==="End"?(d(T),T.preventDefault()):zW.concat(WW).includes(T.key)&&(m(T),T.preventDefault())}),onPointerDown:st(i.onPointerDown,T=>{const E=T.target;E.setPointerCapture(T.pointerId),T.preventDefault(),x.thumbs.has(E)?E.focus():o(T)}),onPointerMove:st(i.onPointerMove,T=>{T.target.hasPointerCapture(T.pointerId)&&l(T)}),onPointerUp:st(i.onPointerUp,T=>{const E=T.target;E.hasPointerCapture(T.pointerId)&&(E.releasePointerCapture(T.pointerId),c(T))})})}),tY="SliderTrack",nY=M.forwardRef((i,t)=>{const{__scopeSlider:r,...o}=i,l=$E(tY,r);return S.jsx(xt.span,{"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation,...o,ref:t})});nY.displayName=tY;var BL="SliderRange",rY=M.forwardRef((i,t)=>{const{__scopeSlider:r,...o}=i,l=$E(BL,r),c=ZW(BL,r),h=M.useRef(null),d=Kt(t,h),m=l.values.length,v=l.values.map(E=>oY(E,l.min,l.max)),x=m>1?Math.min(...v):0,T=100-Math.max(...v);return S.jsx(xt.span,{"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,...o,ref:d,style:{...i.style,[c.startEdge]:x+"%",[c.endEdge]:T+"%"}})});rY.displayName=BL;var $L="SliderThumb",iY=M.forwardRef((i,t)=>{const r=WEe(i.__scopeSlider),[o,l]=M.useState(null),c=Kt(t,d=>l(d)),h=M.useMemo(()=>o?r().findIndex(d=>d.ref.current===o):-1,[r,o]);return S.jsx(ZEe,{...i,ref:c,index:h})}),ZEe=M.forwardRef((i,t)=>{const{__scopeSlider:r,index:o,name:l,...c}=i,h=$E($L,r),d=ZW($L,r),[m,v]=M.useState(null),x=Kt(t,D=>v(D)),T=m?h.form||!!m.closest("form"):!0,E=nP(m),A=h.values[o],k=A===void 0?0:oY(A,h.min,h.max),_=nbe(o,h.values.length),R=E==null?void 0:E[d.size],P=R?ibe(R,k,d.direction):0;return M.useEffect(()=>{if(m)return h.thumbs.add(m),()=>{h.thumbs.delete(m)}},[m,h.thumbs]),S.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${k}% + ${P}px)`},children:[S.jsx(FL.ItemSlot,{scope:i.__scopeSlider,children:S.jsx(xt.span,{role:"slider","aria-label":i["aria-label"]||_,"aria-valuemin":h.min,"aria-valuenow":A,"aria-valuemax":h.max,"aria-orientation":h.orientation,"data-orientation":h.orientation,"data-disabled":h.disabled?"":void 0,tabIndex:h.disabled?void 0:0,...c,ref:x,style:A===void 0?{display:"none"}:i.style,onFocus:st(i.onFocus,()=>{h.valueIndexToChangeRef.current=o})})}),T&&S.jsx(sY,{name:l??(h.name?h.name+(h.values.length>1?"[]":""):void 0),form:h.form,value:A},o)]})});iY.displayName=$L;var ebe="RadioBubbleInput",sY=M.forwardRef(({__scopeSlider:i,value:t,...r},o)=>{const l=M.useRef(null),c=Kt(l,o),h=BP(t);return M.useEffect(()=>{const d=l.current;if(!d)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"value").set;if(h!==t&&x){const T=new Event("input",{bubbles:!0});x.call(d,t),d.dispatchEvent(T)}},[h,t]),S.jsx(xt.input,{style:{display:"none"},...r,ref:c,defaultValue:t})});sY.displayName=ebe;function tbe(i=[],t,r){const o=[...i];return o[r]=t,o.sort((l,c)=>l-c)}function oY(i,t,r){const c=100/(r-t)*(i-t);return Pv(c,[0,100])}function nbe(i,t){return t>2?`Value ${i+1} of ${t}`:t===2?["Minimum","Maximum"][i]:void 0}function rbe(i,t){if(i.length===1)return 0;const r=i.map(l=>Math.abs(l-t)),o=Math.min(...r);return r.indexOf(o)}function ibe(i,t,r){const o=i/2,c=hD([0,50],[0,o]);return(o-c(t)*r)*r}function sbe(i){return i.slice(0,-1).map((t,r)=>i[r+1]-t)}function obe(i,t){if(t>0){const r=sbe(i);return Math.min(...r)>=t}return!0}function hD(i,t){return r=>{if(i[0]===i[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(i[1]-i[0]);return t[0]+o*(r-i[0])}}function abe(i){return(String(i).split(".")[1]||"").length}function lbe(i,t){const r=Math.pow(10,t);return Math.round(i*r)/r}var aY=QW,ube=nY,cbe=rY,dbe=iY;const lY=M.forwardRef(({className:i,...t},r)=>S.jsxs(aY,{ref:r,className:yt("relative flex w-full touch-none select-none items-center",i),...t,children:[S.jsx(ube,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:S.jsx(cbe,{className:"absolute h-full bg-primary"})}),S.jsx(dbe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));lY.displayName=aY.displayName;const hbe=()=>{var se;const[i,t]=oq(),r=i.get("q")||"",[o,l]=M.useState([]),[c,h]=M.useState(!1),[d,m]=M.useState(!r),[v,x]=M.useState(1),[T,E]=M.useState(!0),[A,k]=M.useState("movie"),[_,R]=M.useState(null),[P,D]=M.useState(""),[N,$]=M.useState(0),[V,W]=M.useState("popularity.desc"),C=new Date().getFullYear(),K=Array.from({length:50},(ue,le)=>C-le),ee=async(ue,le=!1)=>{if(r){h(!0);try{const pe=await nK(r,ue),be=pe.map(Ce=>({...Ce}));l(le?[...o,...be]:be),E(pe.length>=20)}catch(pe){console.error("Search failed:",pe)}finally{h(!1)}}},Q=async(ue,le=!1)=>{h(!0);try{const pe=await LP(A,{page:ue,genre:_||void 0,year:P?parseInt(P):void 0,minRating:N>0?N:void 0,sortBy:V}),be=pe.map(Ce=>({...Ce,media_type:A}));l(le?[...o,...be]:be),E(pe.length>=20)}catch(pe){console.error("Discover failed:",pe)}finally{h(!1)}};M.useEffect(()=>{r&&(l([]),x(1),E(!0),ee(1))},[r]),M.useEffect(()=>{r||(l([]),x(1),E(!0),Q(1))},[r,A,_,P,N,V]);const fe=()=>{const ue=v+1;x(ue),r?ee(ue,!0):Q(ue,!0)},O=()=>{R(null),D(""),$(0),W("popularity.desc")},re=()=>{t({})},ce=A==="movie"?Xq:Qq,Ae=_||P||N>0;return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsx("main",{className:"pt-24 pb-20 md:pb-12",children:S.jsxs("div",{className:"container mx-auto px-4",children:[r?S.jsxs("div",{className:"mb-6",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[S.jsx(q4,{className:"w-6 h-6 text-primary"}),S.jsxs("h1",{className:"text-2xl md:text-3xl font-bold",children:['Search results for "',r,'"']})]}),S.jsxs(Ge,{variant:"ghost",size:"sm",onClick:re,className:"gap-2 text-muted-foreground",children:[S.jsx(Fo,{className:"w-4 h-4"}),"Clear search"]})]}):S.jsxs("div",{className:"flex items-center justify-between mb-6",children:[S.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Discover"}),S.jsxs(Ge,{variant:"outline",size:"sm",onClick:()=>m(!d),className:"gap-2",children:[S.jsx(pce,{className:"w-4 h-4"}),"Filters"]})]}),!r&&d&&S.jsxs("div",{className:"space-y-4 mb-8 p-4 rounded-xl bg-secondary/50 border border-border",children:[S.jsxs("div",{className:"flex gap-2",children:[S.jsx(Ge,{variant:A==="movie"?"default":"outline",size:"sm",onClick:()=>k("movie"),children:"Movies"}),S.jsx(Ge,{variant:A==="tv"?"default":"outline",size:"sm",onClick:()=>k("tv"),children:"TV Shows"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-2 block",children:"Genre"}),S.jsx(UP,{genres:ce,selectedGenre:_,onSelectGenre:R})]}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-2 block",children:"Year"}),S.jsxs(mu,{value:P,onValueChange:D,children:[S.jsx(sl,{children:S.jsx(gu,{placeholder:"Any Year"})}),S.jsxs(ol,{children:[S.jsx(kr,{value:"",children:"Any Year"}),K.map(ue=>S.jsx(kr,{value:ue.toString(),children:ue},ue))]})]})]}),S.jsxs("div",{children:[S.jsxs("label",{className:"text-sm font-medium text-muted-foreground mb-2 block",children:["Min Rating: ",N>0?N.toFixed(1):"Any"]}),S.jsx(lY,{value:[N],onValueChange:([ue])=>$(ue),max:9,step:.5,className:"py-2"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-2 block",children:"Sort By"}),S.jsxs(mu,{value:V,onValueChange:W,children:[S.jsx(sl,{children:S.jsx(gu,{})}),S.jsxs(ol,{children:[S.jsx(kr,{value:"popularity.desc",children:"Most Popular"}),S.jsx(kr,{value:"vote_average.desc",children:"Highest Rated"}),S.jsx(kr,{value:"primary_release_date.desc",children:"Newest"}),S.jsx(kr,{value:"primary_release_date.asc",children:"Oldest"})]})]})]})]}),Ae&&S.jsxs(Ge,{variant:"ghost",size:"sm",onClick:O,className:"gap-2",children:[S.jsx(Fo,{className:"w-4 h-4"}),"Clear Filters"]})]}),c&&o.length===0?S.jsx("div",{className:"flex justify-center py-12",children:S.jsx(tr,{className:"w-10 h-10 text-primary animate-spin"})}):o.length>0?S.jsxs(S.Fragment,{children:[!r&&S.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Showing ",A==="movie"?"movies":"TV shows",_&&` in ${(se=ce.find(ue=>ue.id===_))==null?void 0:se.name}`,P&&` from ${P}`,N>0&&` rated ${N}+`]}),r&&S.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Found ",o.length," results"]}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:o.map(ue=>{const le=r?ue.media_type==="tv"||"name"in ue&&!("title"in ue)?"tv":"movie":A;return S.jsx(Im,{item:ue,type:le},`${ue.id}-${le}`)})}),S.jsx("div",{className:"flex justify-center mt-8",children:c?S.jsx(tr,{className:"w-8 h-8 text-primary animate-spin"}):S.jsx(Ge,{variant:"outline",onClick:fe,children:"Load More"})})]}):S.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-muted-foreground",children:[S.jsx(Ace,{className:"w-16 h-16 mb-4"}),S.jsx("p",{className:"text-lg",children:"No results found"}),S.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your filters"})]})]})})]})},fbe=[{path:"/",label:"Home",icon:fE},{path:"/movies",label:"Movies",icon:om},{path:"/tv-shows",label:"TV",icon:GG},{path:"/anime",label:"Anime",icon:qG},{path:"/manga",label:"Manga",icon:nl},{path:"/live-tv",label:"Live",icon:su}],fD=()=>{const i=Yc();return S.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 md:hidden bg-card/95 backdrop-blur-lg border-t border-border/50 pb-safe",children:S.jsx("div",{className:"flex items-center justify-around h-16",children:fbe.map(t=>{const r=t.icon,o=i.pathname===t.path;return S.jsxs(An,{to:t.path,className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-all duration-200 ${o?"text-primary":"text-muted-foreground"}`,children:[S.jsx(r,{className:`w-5 h-5 ${o?"scale-110":""} transition-transform`}),S.jsx("span",{className:"text-[10px] font-medium",children:t.label})]},t.path)})})})},pbe=()=>{const[i,t]=M.useState([]);M.useEffect(()=>{t(um())},[]);const r=(o,l)=>{lK(o,l),t(um())};return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsxs("main",{className:"container mx-auto px-4 pt-20 pb-24",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[S.jsx(Ge,{variant:"ghost",size:"icon",onClick:()=>window.history.back(),className:"rounded-full",children:S.jsx(tl,{className:"w-5 h-5"})}),S.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"My List"})]}),i.length===0?S.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[S.jsx(yce,{className:"w-16 h-16 text-muted-foreground mb-4"}),S.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Your list is empty"}),S.jsx("p",{className:"text-muted-foreground mb-6",children:"Add movies and TV shows to your list to watch later"}),S.jsx(An,{to:"/",children:S.jsx(Ge,{children:"Browse Content"})})]}):S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:i.map(o=>S.jsxs("div",{className:"group relative",children:[S.jsxs(An,{to:`/watch/${o.type}/${o.id}`,children:[S.jsx("div",{className:"aspect-[2/3] rounded-lg overflow-hidden bg-card",children:o.poster_path?S.jsx("img",{src:Bc(o.poster_path,"w300"),alt:o.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:S.jsx("span",{className:"text-muted-foreground text-sm",children:"No Image"})})}),S.jsxs("div",{className:"mt-2",children:[S.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:o.title}),S.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.vote_average&&S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(ty,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),S.jsx("span",{className:"text-xs text-muted-foreground",children:o.vote_average.toFixed(1)})]}),S.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:o.type==="tv"?"TV Show":"Movie"})]})]})]}),S.jsx(Ge,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 w-8 h-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:l=>{l.preventDefault(),r(o.id,o.type)},children:S.jsx(mE,{className:"w-4 h-4"})})]},`${o.type}-${o.id}`))})]}),S.jsx(fD,{})]})},mbe=()=>{const[i,t]=M.useState([]);M.useEffect(()=>{t(Lv())},[]);const r=(l,c)=>{bye(l,c),t(Lv())},o=l=>{const c=Math.floor(l/60),h=Math.floor(c/60);return h>0?`${h}h ${c%60}m`:`${c}m`};return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsxs("main",{className:"container mx-auto px-4 pt-20 pb-24",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[S.jsx(Ge,{variant:"ghost",size:"icon",onClick:()=>window.history.back(),className:"rounded-full",children:S.jsx(tl,{className:"w-5 h-5"})}),S.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Continue Watching"})]}),i.length===0?S.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[S.jsx(ey,{className:"w-16 h-16 text-muted-foreground mb-4"}),S.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Nothing to continue"}),S.jsx("p",{className:"text-muted-foreground mb-6",children:"Start watching something and it will appear here"}),S.jsx(An,{to:"/",children:S.jsx(Ge,{children:"Browse Content"})})]}):S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:i.map(l=>S.jsxs("div",{className:"group relative bg-card rounded-lg overflow-hidden",children:[S.jsxs(An,{to:`/watch/${l.type}/${l.id}`,className:"flex gap-3 p-3",children:[S.jsxs("div",{className:"relative w-24 h-36 flex-shrink-0 rounded-md overflow-hidden",children:[l.poster_path?S.jsx("img",{src:Bc(l.poster_path,"w200"),alt:l.title,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:S.jsx("span",{className:"text-muted-foreground text-xs",children:"No Image"})}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity",children:S.jsx(zc,{className:"w-8 h-8 text-white fill-white"})})]}),S.jsxs("div",{className:"flex-1 py-1",children:[S.jsx("h3",{className:"font-medium line-clamp-2 mb-1",children:l.title}),l.type==="tv"&&l.season&&l.episode&&S.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["S",l.season," E",l.episode]}),S.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:[o(l.currentTime)," / ",o(l.duration)]}),S.jsx("div",{className:"w-full h-1 bg-muted rounded-full overflow-hidden",children:S.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${l.progress}%`}})})]})]}),S.jsx(Ge,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 w-8 h-8 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-destructive hover:text-destructive-foreground",onClick:c=>{c.preventDefault(),r(l.id,l.type)},children:S.jsx(mE,{className:"w-4 h-4"})})]},`${l.type}-${l.id}`))})]}),S.jsx(fD,{})]})};var gbe="Label",uY=M.forwardRef((i,t)=>S.jsx(xt.label,{...i,ref:t,onMouseDown:r=>{var l;r.target.closest("button, input, select, textarea")||((l=i.onMouseDown)==null||l.call(i,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));uY.displayName=gbe;var cY=uY;const vbe=Jv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Yn=M.forwardRef(({className:i,...t},r)=>S.jsx(cY,{ref:r,className:yt(vbe(),i),...t}));Yn.displayName=cY.displayName;const ds=M.forwardRef(({className:i,...t},r)=>S.jsx("div",{ref:r,className:yt("rounded-lg border bg-card text-card-foreground shadow-sm",i),...t}));ds.displayName="Card";const Ps=M.forwardRef(({className:i,...t},r)=>S.jsx("div",{ref:r,className:yt("flex flex-col space-y-1.5 p-6",i),...t}));Ps.displayName="CardHeader";const so=M.forwardRef(({className:i,...t},r)=>S.jsx("h3",{ref:r,className:yt("text-2xl font-semibold leading-none tracking-tight",i),...t}));so.displayName="CardTitle";const VE=M.forwardRef(({className:i,...t},r)=>S.jsx("p",{ref:r,className:yt("text-sm text-muted-foreground",i),...t}));VE.displayName="CardDescription";const hs=M.forwardRef(({className:i,...t},r)=>S.jsx("div",{ref:r,className:yt("p-6 pt-0",i),...t}));hs.displayName="CardContent";const ybe=M.forwardRef(({className:i,...t},r)=>S.jsx("div",{ref:r,className:yt("flex items-center p-6 pt-0",i),...t}));ybe.displayName="CardFooter";var D_="rovingFocusGroup.onEntryFocus",xbe={bubbles:!1,cancelable:!0},fy="RovingFocusGroup",[VL,dY,Tbe]=lE(fy),[Sbe,hY]=Fs(fy,[Tbe]),[wbe,Ebe]=Sbe(fy),fY=M.forwardRef((i,t)=>S.jsx(VL.Provider,{scope:i.__scopeRovingFocusGroup,children:S.jsx(VL.Slot,{scope:i.__scopeRovingFocusGroup,children:S.jsx(bbe,{...i,ref:t})})}));fY.displayName=fy;var bbe=M.forwardRef((i,t)=>{const{__scopeRovingFocusGroup:r,orientation:o,loop:l=!1,dir:c,currentTabStopId:h,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:m,onEntryFocus:v,preventScrollOnEntryFocus:x=!1,...T}=i,E=M.useRef(null),A=Kt(t,E),k=hy(c),[_,R]=hu({prop:h,defaultProp:d??null,onChange:m,caller:fy}),[P,D]=M.useState(!1),N=Gr(v),$=dY(r),V=M.useRef(!1),[W,C]=M.useState(0);return M.useEffect(()=>{const K=E.current;if(K)return K.addEventListener(D_,N),()=>K.removeEventListener(D_,N)},[N]),S.jsx(wbe,{scope:r,orientation:o,dir:k,loop:l,currentTabStopId:_,onItemFocus:M.useCallback(K=>R(K),[R]),onItemShiftTab:M.useCallback(()=>D(!0),[]),onFocusableItemAdd:M.useCallback(()=>C(K=>K+1),[]),onFocusableItemRemove:M.useCallback(()=>C(K=>K-1),[]),children:S.jsx(xt.div,{tabIndex:P||W===0?-1:0,"data-orientation":o,...T,ref:A,style:{outline:"none",...i.style},onMouseDown:st(i.onMouseDown,()=>{V.current=!0}),onFocus:st(i.onFocus,K=>{const ee=!V.current;if(K.target===K.currentTarget&&ee&&!P){const Q=new CustomEvent(D_,xbe);if(K.currentTarget.dispatchEvent(Q),!Q.defaultPrevented){const fe=$().filter(se=>se.focusable),O=fe.find(se=>se.active),re=fe.find(se=>se.id===_),Ae=[O,re,...fe].filter(Boolean).map(se=>se.ref.current);gY(Ae,x)}}V.current=!1}),onBlur:st(i.onBlur,()=>D(!1))})})}),pY="RovingFocusGroupItem",mY=M.forwardRef((i,t)=>{const{__scopeRovingFocusGroup:r,focusable:o=!0,active:l=!1,tabStopId:c,children:h,...d}=i,m=ou(),v=c||m,x=Ebe(pY,r),T=x.currentTabStopId===v,E=dY(r),{onFocusableItemAdd:A,onFocusableItemRemove:k,currentTabStopId:_}=x;return M.useEffect(()=>{if(o)return A(),()=>k()},[o,A,k]),S.jsx(VL.ItemSlot,{scope:r,id:v,focusable:o,active:l,children:S.jsx(xt.span,{tabIndex:T?0:-1,"data-orientation":x.orientation,...d,ref:t,onMouseDown:st(i.onMouseDown,R=>{o?x.onItemFocus(v):R.preventDefault()}),onFocus:st(i.onFocus,()=>x.onItemFocus(v)),onKeyDown:st(i.onKeyDown,R=>{if(R.key==="Tab"&&R.shiftKey){x.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const P=Cbe(R,x.orientation,x.dir);if(P!==void 0){if(R.metaKey||R.ctrlKey||R.altKey||R.shiftKey)return;R.preventDefault();let N=E().filter($=>$.focusable).map($=>$.ref.current);if(P==="last")N.reverse();else if(P==="prev"||P==="next"){P==="prev"&&N.reverse();const $=N.indexOf(R.currentTarget);N=x.loop?kbe(N,$+1):N.slice($+1)}setTimeout(()=>gY(N))}}),children:typeof h=="function"?h({isCurrentTabStop:T,hasTabStop:_!=null}):h})})});mY.displayName=pY;var Abe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ibe(i,t){return t!=="rtl"?i:i==="ArrowLeft"?"ArrowRight":i==="ArrowRight"?"ArrowLeft":i}function Cbe(i,t,r){const o=Ibe(i.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Abe[o]}function gY(i,t=!1){const r=document.activeElement;for(const o of i)if(o===r||(o.focus({preventScroll:t}),document.activeElement!==r))return}function kbe(i,t){return i.map((r,o)=>i[(t+o)%i.length])}var _be=fY,Rbe=mY,GE="Tabs",[Lbe]=Fs(GE,[hY]),vY=hY(),[Pbe,pD]=Lbe(GE),yY=M.forwardRef((i,t)=>{const{__scopeTabs:r,value:o,onValueChange:l,defaultValue:c,orientation:h="horizontal",dir:d,activationMode:m="automatic",...v}=i,x=hy(d),[T,E]=hu({prop:o,onChange:l,defaultProp:c??"",caller:GE});return S.jsx(Pbe,{scope:r,baseId:ou(),value:T,onValueChange:E,orientation:h,dir:x,activationMode:m,children:S.jsx(xt.div,{dir:x,"data-orientation":h,...v,ref:t})})});yY.displayName=GE;var xY="TabsList",TY=M.forwardRef((i,t)=>{const{__scopeTabs:r,loop:o=!0,...l}=i,c=pD(xY,r),h=vY(r);return S.jsx(_be,{asChild:!0,...h,orientation:c.orientation,dir:c.dir,loop:o,children:S.jsx(xt.div,{role:"tablist","aria-orientation":c.orientation,...l,ref:t})})});TY.displayName=xY;var SY="TabsTrigger",wY=M.forwardRef((i,t)=>{const{__scopeTabs:r,value:o,disabled:l=!1,...c}=i,h=pD(SY,r),d=vY(r),m=AY(h.baseId,o),v=IY(h.baseId,o),x=o===h.value;return S.jsx(Rbe,{asChild:!0,...d,focusable:!l,active:x,children:S.jsx(xt.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":v,"data-state":x?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:m,...c,ref:t,onMouseDown:st(i.onMouseDown,T=>{!l&&T.button===0&&T.ctrlKey===!1?h.onValueChange(o):T.preventDefault()}),onKeyDown:st(i.onKeyDown,T=>{[" ","Enter"].includes(T.key)&&h.onValueChange(o)}),onFocus:st(i.onFocus,()=>{const T=h.activationMode!=="manual";!x&&!l&&T&&h.onValueChange(o)})})})});wY.displayName=SY;var EY="TabsContent",bY=M.forwardRef((i,t)=>{const{__scopeTabs:r,value:o,forceMount:l,children:c,...h}=i,d=pD(EY,r),m=AY(d.baseId,o),v=IY(d.baseId,o),x=o===d.value,T=M.useRef(x);return M.useEffect(()=>{const E=requestAnimationFrame(()=>T.current=!1);return()=>cancelAnimationFrame(E)},[]),S.jsx(yo,{present:l||x,children:({present:E})=>S.jsx(xt.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":m,hidden:!E,id:v,tabIndex:0,...h,ref:t,style:{...i.style,animationDuration:T.current?"0s":void 0},children:E&&c})})});bY.displayName=EY;function AY(i,t){return`${i}-trigger-${t}`}function IY(i,t){return`${i}-content-${t}`}var Dbe=yY,CY=TY,kY=wY,_Y=bY;const RY=Dbe,mD=M.forwardRef(({className:i,...t},r)=>S.jsx(CY,{ref:r,className:yt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),...t}));mD.displayName=CY.displayName;const eh=M.forwardRef(({className:i,...t},r)=>S.jsx(kY,{ref:r,className:yt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",i),...t}));eh.displayName=kY.displayName;const th=M.forwardRef(({className:i,...t},r)=>S.jsx(_Y,{ref:r,className:yt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...t}));th.displayName=_Y.displayName;function Nbe(){const i=Xc(),{toast:t}=B4(),[r,o]=M.useState(!1),[l,c]=M.useState(!0),[h,d]=M.useState(""),[m,v]=M.useState("");if(M.useEffect(()=>{const{data:{subscription:E}}=Bt.auth.onAuthStateChange((A,k)=>{k!=null&&k.user?i("/"):c(!1)});return Bt.auth.getSession().then(({data:{session:A}})=>{A!=null&&A.user?i("/"):c(!1)}),()=>E.unsubscribe()},[i]),l)return S.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:S.jsx(tr,{className:"h-8 w-8 animate-spin text-primary"})});const x=async E=>{E.preventDefault(),o(!0);try{const{error:A}=await Bt.auth.signUp({email:h,password:m,options:{emailRedirectTo:`${window.location.origin}/`}});t(A?{title:"Sign up failed",description:A.message,variant:"destructive"}:{title:"Account created!",description:"Check your email for confirmation or sign in directly."})}catch{t({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{o(!1)}},T=async E=>{E.preventDefault(),o(!0);try{const{error:A}=await Bt.auth.signInWithPassword({email:h,password:m});A&&t({title:"Sign in failed",description:A.message,variant:"destructive"})}catch{t({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{o(!1)}};return S.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:S.jsxs(ds,{className:"w-full max-w-md bg-card border-border",children:[S.jsxs(Ps,{className:"text-center",children:[S.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[S.jsx(zc,{className:"h-8 w-8 text-primary fill-primary"}),S.jsx("span",{className:"text-2xl font-bold text-foreground",children:"TVStreamz"})]}),S.jsx(so,{className:"text-foreground",children:"Welcome"}),S.jsx(VE,{children:"Sign in or create an account to continue"})]}),S.jsxs(hs,{children:[S.jsxs(RY,{defaultValue:"signin",className:"w-full",children:[S.jsxs(mD,{className:"grid w-full grid-cols-2",children:[S.jsx(eh,{value:"signin",children:"Sign In"}),S.jsx(eh,{value:"signup",children:"Sign Up"})]}),S.jsx(th,{value:"signin",children:S.jsxs("form",{onSubmit:T,className:"space-y-4",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"signin-email",children:"Email"}),S.jsx(hr,{id:"signin-email",type:"email",placeholder:"you@example.com",value:h,onChange:E=>d(E.target.value),required:!0})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"signin-password",children:"Password"}),S.jsx(hr,{id:"signin-password",type:"password",placeholder:"",value:m,onChange:E=>v(E.target.value),required:!0})]}),S.jsxs(Ge,{type:"submit",className:"w-full",disabled:r,children:[r&&S.jsx(tr,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign In"]})]})}),S.jsx(th,{value:"signup",children:S.jsxs("form",{onSubmit:x,className:"space-y-4",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"signup-email",children:"Email"}),S.jsx(hr,{id:"signup-email",type:"email",placeholder:"you@example.com",value:h,onChange:E=>d(E.target.value),required:!0})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"signup-password",children:"Password"}),S.jsx(hr,{id:"signup-password",type:"password",placeholder:"",value:m,onChange:E=>v(E.target.value),required:!0,minLength:6})]}),S.jsxs(Ge,{type:"submit",className:"w-full",disabled:r,children:[r&&S.jsx(tr,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Account"]})]})})]}),S.jsx("div",{className:"mt-4 text-center",children:S.jsx(Ge,{variant:"ghost",onClick:()=>i("/"),children:"Back to Home"})})]})]})})}function Go(i){const t=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&t==="[object Date]"?new i.constructor(+i):typeof i=="number"||t==="[object Number]"||typeof i=="string"||t==="[object String]"?new Date(i):new Date(NaN)}function Gc(i,t){return i instanceof Date?new i.constructor(t):new Date(t)}function Mbe(i,t){const r=Go(i);return isNaN(t)?Gc(i,NaN):(t&&r.setDate(r.getDate()+t),r)}const LY=6048e5,Obe=864e5;let jbe={};function HE(){return jbe}function Bv(i,t){var d,m,v,x;const r=HE(),o=(t==null?void 0:t.weekStartsOn)??((m=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((x=(v=r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,l=Go(i),c=l.getDay(),h=(c<o?7:0)+c-o;return l.setDate(l.getDate()-h),l.setHours(0,0,0,0),l}function qw(i){return Bv(i,{weekStartsOn:1})}function PY(i){const t=Go(i),r=t.getFullYear(),o=Gc(i,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const l=qw(o),c=Gc(i,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const h=qw(c);return t.getTime()>=l.getTime()?r+1:t.getTime()>=h.getTime()?r:r-1}function I9(i){const t=Go(i);return t.setHours(0,0,0,0),t}function C9(i){const t=Go(i),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+i-+r}function Ube(i,t){const r=I9(i),o=I9(t),l=+r-C9(r),c=+o-C9(o);return Math.round((l-c)/Obe)}function Fbe(i){const t=PY(i),r=Gc(i,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),qw(r)}function Bbe(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function $be(i){if(!Bbe(i)&&typeof i!="number")return!1;const t=Go(i);return!isNaN(Number(t))}function Vbe(i){const t=Go(i),r=Gc(i,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Gbe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Hbe=(i,t,r)=>{let o;const l=Gbe[i];return typeof l=="string"?o=l:t===1?o=l.one:o=l.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+o:o+" ago":o};function N_(i){return(t={})=>{const r=t.width?String(t.width):i.defaultWidth;return i.formats[r]||i.formats[i.defaultWidth]}}const qbe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Kbe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zbe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Wbe={date:N_({formats:qbe,defaultWidth:"full"}),time:N_({formats:Kbe,defaultWidth:"full"}),dateTime:N_({formats:zbe,defaultWidth:"full"})},Ybe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Xbe=(i,t,r,o)=>Ybe[i];function R0(i){return(t,r)=>{const o=r!=null&&r.context?String(r.context):"standalone";let l;if(o==="formatting"&&i.formattingValues){const h=i.defaultFormattingWidth||i.defaultWidth,d=r!=null&&r.width?String(r.width):h;l=i.formattingValues[d]||i.formattingValues[h]}else{const h=i.defaultWidth,d=r!=null&&r.width?String(r.width):i.defaultWidth;l=i.values[d]||i.values[h]}const c=i.argumentCallback?i.argumentCallback(t):t;return l[c]}}const Qbe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Jbe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Zbe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},e2e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},t2e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},n2e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},r2e=(i,t)=>{const r=Number(i),o=r%100;if(o>20||o<10)switch(o%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},i2e={ordinalNumber:r2e,era:R0({values:Qbe,defaultWidth:"wide"}),quarter:R0({values:Jbe,defaultWidth:"wide",argumentCallback:i=>i-1}),month:R0({values:Zbe,defaultWidth:"wide"}),day:R0({values:e2e,defaultWidth:"wide"}),dayPeriod:R0({values:t2e,defaultWidth:"wide",formattingValues:n2e,defaultFormattingWidth:"wide"})};function L0(i){return(t,r={})=>{const o=r.width,l=o&&i.matchPatterns[o]||i.matchPatterns[i.defaultMatchWidth],c=t.match(l);if(!c)return null;const h=c[0],d=o&&i.parsePatterns[o]||i.parsePatterns[i.defaultParseWidth],m=Array.isArray(d)?o2e(d,T=>T.test(h)):s2e(d,T=>T.test(h));let v;v=i.valueCallback?i.valueCallback(m):m,v=r.valueCallback?r.valueCallback(v):v;const x=t.slice(h.length);return{value:v,rest:x}}}function s2e(i,t){for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&t(i[r]))return r}function o2e(i,t){for(let r=0;r<i.length;r++)if(t(i[r]))return r}function a2e(i){return(t,r={})=>{const o=t.match(i.matchPattern);if(!o)return null;const l=o[0],c=t.match(i.parsePattern);if(!c)return null;let h=i.valueCallback?i.valueCallback(c[0]):c[0];h=r.valueCallback?r.valueCallback(h):h;const d=t.slice(l.length);return{value:h,rest:d}}}const l2e=/^(\d+)(th|st|nd|rd)?/i,u2e=/\d+/i,c2e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},d2e={any:[/^b/i,/^(a|c)/i]},h2e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},f2e={any:[/1/i,/2/i,/3/i,/4/i]},p2e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},m2e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},g2e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},v2e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},y2e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},x2e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},T2e={ordinalNumber:a2e({matchPattern:l2e,parsePattern:u2e,valueCallback:i=>parseInt(i,10)}),era:L0({matchPatterns:c2e,defaultMatchWidth:"wide",parsePatterns:d2e,defaultParseWidth:"any"}),quarter:L0({matchPatterns:h2e,defaultMatchWidth:"wide",parsePatterns:f2e,defaultParseWidth:"any",valueCallback:i=>i+1}),month:L0({matchPatterns:p2e,defaultMatchWidth:"wide",parsePatterns:m2e,defaultParseWidth:"any"}),day:L0({matchPatterns:g2e,defaultMatchWidth:"wide",parsePatterns:v2e,defaultParseWidth:"any"}),dayPeriod:L0({matchPatterns:y2e,defaultMatchWidth:"any",parsePatterns:x2e,defaultParseWidth:"any"})},S2e={code:"en-US",formatDistance:Hbe,formatLong:Wbe,formatRelative:Xbe,localize:i2e,match:T2e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function w2e(i){const t=Go(i);return Ube(t,Vbe(t))+1}function E2e(i){const t=Go(i),r=+qw(t)-+Fbe(t);return Math.round(r/LY)+1}function DY(i,t){var x,T,E,A;const r=Go(i),o=r.getFullYear(),l=HE(),c=(t==null?void 0:t.firstWeekContainsDate)??((T=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:T.firstWeekContainsDate)??l.firstWeekContainsDate??((A=(E=l.locale)==null?void 0:E.options)==null?void 0:A.firstWeekContainsDate)??1,h=Gc(i,0);h.setFullYear(o+1,0,c),h.setHours(0,0,0,0);const d=Bv(h,t),m=Gc(i,0);m.setFullYear(o,0,c),m.setHours(0,0,0,0);const v=Bv(m,t);return r.getTime()>=d.getTime()?o+1:r.getTime()>=v.getTime()?o:o-1}function b2e(i,t){var d,m,v,x;const r=HE(),o=(t==null?void 0:t.firstWeekContainsDate)??((m=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(v=r.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??1,l=DY(i,t),c=Gc(i,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),Bv(c,t)}function A2e(i,t){const r=Go(i),o=+Bv(r,t)-+b2e(r,t);return Math.round(o/LY)+1}function kn(i,t){const r=i<0?"-":"",o=Math.abs(i).toString().padStart(t,"0");return r+o}const tc={y(i,t){const r=i.getFullYear(),o=r>0?r:1-r;return kn(t==="yy"?o%100:o,t.length)},M(i,t){const r=i.getMonth();return t==="M"?String(r+1):kn(r+1,2)},d(i,t){return kn(i.getDate(),t.length)},a(i,t){const r=i.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(i,t){return kn(i.getHours()%12||12,t.length)},H(i,t){return kn(i.getHours(),t.length)},m(i,t){return kn(i.getMinutes(),t.length)},s(i,t){return kn(i.getSeconds(),t.length)},S(i,t){const r=t.length,o=i.getMilliseconds(),l=Math.trunc(o*Math.pow(10,r-3));return kn(l,t.length)}},op={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},k9={G:function(i,t,r){const o=i.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(o,{width:"abbreviated"});case"GGGGG":return r.era(o,{width:"narrow"});case"GGGG":default:return r.era(o,{width:"wide"})}},y:function(i,t,r){if(t==="yo"){const o=i.getFullYear(),l=o>0?o:1-o;return r.ordinalNumber(l,{unit:"year"})}return tc.y(i,t)},Y:function(i,t,r,o){const l=DY(i,o),c=l>0?l:1-l;if(t==="YY"){const h=c%100;return kn(h,2)}return t==="Yo"?r.ordinalNumber(c,{unit:"year"}):kn(c,t.length)},R:function(i,t){const r=PY(i);return kn(r,t.length)},u:function(i,t){const r=i.getFullYear();return kn(r,t.length)},Q:function(i,t,r){const o=Math.ceil((i.getMonth()+1)/3);switch(t){case"Q":return String(o);case"QQ":return kn(o,2);case"Qo":return r.ordinalNumber(o,{unit:"quarter"});case"QQQ":return r.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(o,{width:"wide",context:"formatting"})}},q:function(i,t,r){const o=Math.ceil((i.getMonth()+1)/3);switch(t){case"q":return String(o);case"qq":return kn(o,2);case"qo":return r.ordinalNumber(o,{unit:"quarter"});case"qqq":return r.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(o,{width:"wide",context:"standalone"})}},M:function(i,t,r){const o=i.getMonth();switch(t){case"M":case"MM":return tc.M(i,t);case"Mo":return r.ordinalNumber(o+1,{unit:"month"});case"MMM":return r.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(o,{width:"wide",context:"formatting"})}},L:function(i,t,r){const o=i.getMonth();switch(t){case"L":return String(o+1);case"LL":return kn(o+1,2);case"Lo":return r.ordinalNumber(o+1,{unit:"month"});case"LLL":return r.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(o,{width:"wide",context:"standalone"})}},w:function(i,t,r,o){const l=A2e(i,o);return t==="wo"?r.ordinalNumber(l,{unit:"week"}):kn(l,t.length)},I:function(i,t,r){const o=E2e(i);return t==="Io"?r.ordinalNumber(o,{unit:"week"}):kn(o,t.length)},d:function(i,t,r){return t==="do"?r.ordinalNumber(i.getDate(),{unit:"date"}):tc.d(i,t)},D:function(i,t,r){const o=w2e(i);return t==="Do"?r.ordinalNumber(o,{unit:"dayOfYear"}):kn(o,t.length)},E:function(i,t,r){const o=i.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(o,{width:"short",context:"formatting"});case"EEEE":default:return r.day(o,{width:"wide",context:"formatting"})}},e:function(i,t,r,o){const l=i.getDay(),c=(l-o.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return kn(c,2);case"eo":return r.ordinalNumber(c,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(i,t,r,o){const l=i.getDay(),c=(l-o.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return kn(c,t.length);case"co":return r.ordinalNumber(c,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(i,t,r){const o=i.getDay(),l=o===0?7:o;switch(t){case"i":return String(l);case"ii":return kn(l,t.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(o,{width:"short",context:"formatting"});case"iiii":default:return r.day(o,{width:"wide",context:"formatting"})}},a:function(i,t,r){const l=i.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(i,t,r){const o=i.getHours();let l;switch(o===12?l=op.noon:o===0?l=op.midnight:l=o/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(i,t,r){const o=i.getHours();let l;switch(o>=17?l=op.evening:o>=12?l=op.afternoon:o>=4?l=op.morning:l=op.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(i,t,r){if(t==="ho"){let o=i.getHours()%12;return o===0&&(o=12),r.ordinalNumber(o,{unit:"hour"})}return tc.h(i,t)},H:function(i,t,r){return t==="Ho"?r.ordinalNumber(i.getHours(),{unit:"hour"}):tc.H(i,t)},K:function(i,t,r){const o=i.getHours()%12;return t==="Ko"?r.ordinalNumber(o,{unit:"hour"}):kn(o,t.length)},k:function(i,t,r){let o=i.getHours();return o===0&&(o=24),t==="ko"?r.ordinalNumber(o,{unit:"hour"}):kn(o,t.length)},m:function(i,t,r){return t==="mo"?r.ordinalNumber(i.getMinutes(),{unit:"minute"}):tc.m(i,t)},s:function(i,t,r){return t==="so"?r.ordinalNumber(i.getSeconds(),{unit:"second"}):tc.s(i,t)},S:function(i,t){return tc.S(i,t)},X:function(i,t,r){const o=i.getTimezoneOffset();if(o===0)return"Z";switch(t){case"X":return R9(o);case"XXXX":case"XX":return zd(o);case"XXXXX":case"XXX":default:return zd(o,":")}},x:function(i,t,r){const o=i.getTimezoneOffset();switch(t){case"x":return R9(o);case"xxxx":case"xx":return zd(o);case"xxxxx":case"xxx":default:return zd(o,":")}},O:function(i,t,r){const o=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_9(o,":");case"OOOO":default:return"GMT"+zd(o,":")}},z:function(i,t,r){const o=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_9(o,":");case"zzzz":default:return"GMT"+zd(o,":")}},t:function(i,t,r){const o=Math.trunc(i.getTime()/1e3);return kn(o,t.length)},T:function(i,t,r){const o=i.getTime();return kn(o,t.length)}};function _9(i,t=""){const r=i>0?"-":"+",o=Math.abs(i),l=Math.trunc(o/60),c=o%60;return c===0?r+String(l):r+String(l)+t+kn(c,2)}function R9(i,t){return i%60===0?(i>0?"-":"+")+kn(Math.abs(i)/60,2):zd(i,t)}function zd(i,t=""){const r=i>0?"-":"+",o=Math.abs(i),l=kn(Math.trunc(o/60),2),c=kn(o%60,2);return r+l+t+c}const L9=(i,t)=>{switch(i){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},NY=(i,t)=>{switch(i){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},I2e=(i,t)=>{const r=i.match(/(P+)(p+)?/)||[],o=r[1],l=r[2];if(!l)return L9(i,t);let c;switch(o){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",L9(o,t)).replace("{{time}}",NY(l,t))},C2e={p:NY,P:I2e},k2e=/^D+$/,_2e=/^Y+$/,R2e=["D","DD","YY","YYYY"];function L2e(i){return k2e.test(i)}function P2e(i){return _2e.test(i)}function D2e(i,t,r){const o=N2e(i,t,r);if(console.warn(o),R2e.includes(i))throw new RangeError(o)}function N2e(i,t,r){const o=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${t}\`) for formatting ${o} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const M2e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,O2e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,j2e=/^'([^]*?)'?$/,U2e=/''/g,F2e=/[a-zA-Z]/;function B2e(i,t,r){var x,T,E,A;const o=HE(),l=o.locale??S2e,c=o.firstWeekContainsDate??((T=(x=o.locale)==null?void 0:x.options)==null?void 0:T.firstWeekContainsDate)??1,h=o.weekStartsOn??((A=(E=o.locale)==null?void 0:E.options)==null?void 0:A.weekStartsOn)??0,d=Go(i);if(!$be(d))throw new RangeError("Invalid time value");let m=t.match(O2e).map(k=>{const _=k[0];if(_==="p"||_==="P"){const R=C2e[_];return R(k,l.formatLong)}return k}).join("").match(M2e).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const _=k[0];if(_==="'")return{isToken:!1,value:$2e(k)};if(k9[_])return{isToken:!0,value:k};if(_.match(F2e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:k}});l.localize.preprocessor&&(m=l.localize.preprocessor(d,m));const v={firstWeekContainsDate:c,weekStartsOn:h,locale:l};return m.map(k=>{if(!k.isToken)return k.value;const _=k.value;(P2e(_)||L2e(_))&&D2e(_,t,String(i));const R=k9[_[0]];return R(d,_,l.localize,v)}).join("")}function $2e(i){const t=i.match(j2e);return t?t[1].replace(U2e,"'"):i}function P9(i,t){return Mbe(i,-t)}const V2e=Jv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function GL({className:i,variant:t,...r}){return S.jsx("div",{className:yt(V2e({variant:t}),i),...r})}var qE="Switch",[G2e]=Fs(qE),[H2e,q2e]=G2e(qE),MY=M.forwardRef((i,t)=>{const{__scopeSwitch:r,name:o,checked:l,defaultChecked:c,required:h,disabled:d,value:m="on",onCheckedChange:v,form:x,...T}=i,[E,A]=M.useState(null),k=Kt(t,N=>A(N)),_=M.useRef(!1),R=E?x||!!E.closest("form"):!0,[P,D]=hu({prop:l,defaultProp:c??!1,onChange:v,caller:qE});return S.jsxs(H2e,{scope:r,checked:P,disabled:d,children:[S.jsx(xt.button,{type:"button",role:"switch","aria-checked":P,"aria-required":h,"data-state":FY(P),"data-disabled":d?"":void 0,disabled:d,value:m,...T,ref:k,onClick:st(i.onClick,N=>{D($=>!$),R&&(_.current=N.isPropagationStopped(),_.current||N.stopPropagation())})}),R&&S.jsx(UY,{control:E,bubbles:!_.current,name:o,value:m,checked:P,required:h,disabled:d,form:x,style:{transform:"translateX(-100%)"}})]})});MY.displayName=qE;var OY="SwitchThumb",jY=M.forwardRef((i,t)=>{const{__scopeSwitch:r,...o}=i,l=q2e(OY,r);return S.jsx(xt.span,{"data-state":FY(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:t})});jY.displayName=OY;var K2e="SwitchBubbleInput",UY=M.forwardRef(({__scopeSwitch:i,control:t,checked:r,bubbles:o=!0,...l},c)=>{const h=M.useRef(null),d=Kt(h,c),m=BP(r),v=nP(t);return M.useEffect(()=>{const x=h.current;if(!x)return;const T=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(T,"checked").set;if(m!==r&&A){const k=new Event("click",{bubbles:o});A.call(x,r),x.dispatchEvent(k)}},[m,r,o]),S.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...l,tabIndex:-1,ref:d,style:{...l.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});UY.displayName=K2e;function FY(i){return i?"checked":"unchecked"}var BY=MY,z2e=jY;const KE=M.forwardRef(({className:i,...t},r)=>S.jsx(BY,{className:yt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",i),...t,ref:r,children:S.jsx(z2e,{className:yt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));KE.displayName=BY.displayName;const W2e=i=>{if(!i||i.includes("youtube.com/embed/"))return i;let t=null;const r=i.match(/youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/);r&&(t=r[1]);const o=i.match(/youtu\.be\/([a-zA-Z0-9_-]+)/);o&&(t=o[1]);const l=i.match(/youtube\.com\/live\/([a-zA-Z0-9_-]+)/);return l&&(t=l[1]),t?`https://www.youtube.com/embed/${t}?autoplay=1`:i};function Y2e({channel:i,onClose:t}){const r=n1e(),o=r1e(),l=!!i,[c,h]=M.useState({name:(i==null?void 0:i.name)||"",logo_url:(i==null?void 0:i.logo_url)||"",stream_url:(i==null?void 0:i.stream_url)||"",stream_type:(i==null?void 0:i.stream_type)||"hls",license_type:(i==null?void 0:i.license_type)||null,drm_key_id:(i==null?void 0:i.drm_key_id)||"",drm_key:(i==null?void 0:i.drm_key)||"",license_url:(i==null?void 0:i.license_url)||"",category:(i==null?void 0:i.category)||"general",is_active:(i==null?void 0:i.is_active)??!0,sort_order:(i==null?void 0:i.sort_order)??0}),d=async v=>{if(v.preventDefault(),!c.name.trim()||!c.stream_url.trim()){gi.error("Name and Stream URL are required");return}try{l&&i?(await o.mutateAsync({id:i.id,...c,drm_key_id:c.drm_key_id||null,drm_key:c.drm_key||null,license_type:c.license_type||null,license_url:c.license_url||null}),gi.success("Channel updated")):(await r.mutateAsync({...c,drm_key_id:c.drm_key_id||null,drm_key:c.drm_key||null,license_type:c.license_type||null,license_url:c.license_url||null}),gi.success("Channel created")),t()}catch{gi.error(l?"Failed to update channel":"Failed to create channel")}},m=r.isPending||o.isPending;return S.jsx(_E,{open:!0,onOpenChange:t,children:S.jsxs(cy,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[S.jsx(EP,{children:S.jsx(bP,{children:l?"Edit Channel":"Add New Channel"})}),S.jsxs("form",{onSubmit:d,className:"space-y-4",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"name",children:"Channel Name *"}),S.jsx(hr,{id:"name",value:c.name,onChange:v=>h({...c,name:v.target.value}),placeholder:"GMA 7"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"stream_url",children:"Stream URL *"}),S.jsx(hr,{id:"stream_url",value:c.stream_url,onChange:v=>{let x=v.target.value;c.stream_type==="youtube"&&(x=W2e(x)),h({...c,stream_url:x})},placeholder:c.stream_type==="youtube"?"Paste any YouTube URL (auto-converts to embed)":"https://example.com/stream.m3u8"}),c.stream_type==="youtube"&&S.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports: youtube.com/watch?v=..., youtu.be/..., youtube.com/live/..."})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"stream_type",children:"Stream Type"}),S.jsxs(mu,{value:c.stream_type,onValueChange:v=>h({...c,stream_type:v}),children:[S.jsx(sl,{children:S.jsx(gu,{})}),S.jsxs(ol,{children:[S.jsx(kr,{value:"hls",children:"HLS (.m3u8)"}),S.jsx(kr,{value:"mpd",children:"DASH (.mpd)"}),S.jsx(kr,{value:"youtube",children:"YouTube Embed"})]})]})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"logo_url",children:"Logo URL"}),S.jsx(hr,{id:"logo_url",value:c.logo_url||"",onChange:v=>h({...c,logo_url:v.target.value}),placeholder:"https://example.com/logo.png"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"category",children:"Category"}),S.jsx(hr,{id:"category",value:c.category||"",onChange:v=>h({...c,category:v.target.value}),placeholder:"news, entertainment, sports..."})]}),(c.stream_type==="mpd"||c.stream_type==="hls")&&S.jsxs("div",{className:"space-y-4 p-4 rounded-lg bg-muted/50 border border-border",children:[S.jsx("p",{className:"text-sm font-medium",children:"DRM Configuration (Optional)"}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"license_type",children:"DRM Type"}),S.jsxs(mu,{value:c.license_type||"none",onValueChange:v=>h({...c,license_type:v==="none"?null:v}),children:[S.jsx(sl,{children:S.jsx(gu,{placeholder:"Select DRM type"})}),S.jsxs(ol,{children:[S.jsx(kr,{value:"none",children:"No DRM"}),S.jsx(kr,{value:"clearkey",children:"ClearKey"}),S.jsx(kr,{value:"widevine",children:"Widevine"})]})]})]}),c.license_type==="clearkey"&&S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"drm_key_id",children:"Key ID"}),S.jsx(hr,{id:"drm_key_id",value:c.drm_key_id||"",onChange:v=>h({...c,drm_key_id:v.target.value}),placeholder:"31363232353335323435353337353331",className:"font-mono text-sm"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"drm_key",children:"Key"}),S.jsx(hr,{id:"drm_key",value:c.drm_key||"",onChange:v=>h({...c,drm_key:v.target.value}),placeholder:"35416a68643065697575493337566135",className:"font-mono text-sm"})]})]}),c.license_type==="widevine"&&S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"license_url",children:"Widevine License URL"}),S.jsx(hr,{id:"license_url",value:c.license_url||"",onChange:v=>h({...c,license_url:v.target.value}),placeholder:"https://license-server.com/license",className:"font-mono text-sm"}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the Widevine license server URL"})]})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"sort_order",children:"Sort Order"}),S.jsx(hr,{id:"sort_order",type:"number",value:c.sort_order??0,onChange:v=>h({...c,sort_order:parseInt(v.target.value)||0}),placeholder:"0"})]}),S.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[S.jsxs("div",{children:[S.jsx(Yn,{htmlFor:"is_active",children:"Active"}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Channel will be visible to users"})]}),S.jsx(KE,{id:"is_active",checked:c.is_active,onCheckedChange:v=>h({...c,is_active:v})})]}),S.jsxs("div",{className:"flex gap-2 pt-4",children:[S.jsx(Ge,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:m,children:"Cancel"}),S.jsxs(Ge,{type:"submit",className:"flex-1",disabled:m,children:[m&&S.jsx(tr,{className:"h-4 w-4 mr-2 animate-spin"}),l?"Update":"Create"]})]})]})]})})}var $Y="AlertDialog",[X2e]=Fs($Y,[gq]),xu=gq(),VY=i=>{const{__scopeAlertDialog:t,...r}=i,o=xu(t);return S.jsx(TP,{...o,...r,modal:!0})};VY.displayName=$Y;var Q2e="AlertDialogTrigger",J2e=M.forwardRef((i,t)=>{const{__scopeAlertDialog:r,...o}=i,l=xu(r);return S.jsx(SP,{...l,...o,ref:t})});J2e.displayName=Q2e;var Z2e="AlertDialogPortal",GY=i=>{const{__scopeAlertDialog:t,...r}=i,o=xu(t);return S.jsx(wP,{...o,...r})};GY.displayName=Z2e;var eAe="AlertDialogOverlay",HY=M.forwardRef((i,t)=>{const{__scopeAlertDialog:r,...o}=i,l=xu(r);return S.jsx(oy,{...l,...o,ref:t})});HY.displayName=eAe;var Bp="AlertDialogContent",[tAe,nAe]=X2e(Bp),rAe=uG("AlertDialogContent"),qY=M.forwardRef((i,t)=>{const{__scopeAlertDialog:r,children:o,...l}=i,c=xu(r),h=M.useRef(null),d=Kt(t,h),m=M.useRef(null);return S.jsx(vge,{contentName:Bp,titleName:KY,docsSlug:"alert-dialog",children:S.jsx(tAe,{scope:r,cancelRef:m,children:S.jsxs(ay,{role:"alertdialog",...c,...l,ref:d,onOpenAutoFocus:st(l.onOpenAutoFocus,v=>{var x;v.preventDefault(),(x=m.current)==null||x.focus({preventScroll:!0})}),onPointerDownOutside:v=>v.preventDefault(),onInteractOutside:v=>v.preventDefault(),children:[S.jsx(rAe,{children:o}),S.jsx(sAe,{contentRef:h})]})})})});qY.displayName=Bp;var KY="AlertDialogTitle",zY=M.forwardRef((i,t)=>{const{__scopeAlertDialog:r,...o}=i,l=xu(r);return S.jsx(ly,{...l,...o,ref:t})});zY.displayName=KY;var WY="AlertDialogDescription",YY=M.forwardRef((i,t)=>{const{__scopeAlertDialog:r,...o}=i,l=xu(r);return S.jsx(uy,{...l,...o,ref:t})});YY.displayName=WY;var iAe="AlertDialogAction",XY=M.forwardRef((i,t)=>{const{__scopeAlertDialog:r,...o}=i,l=xu(r);return S.jsx(kE,{...l,...o,ref:t})});XY.displayName=iAe;var QY="AlertDialogCancel",JY=M.forwardRef((i,t)=>{const{__scopeAlertDialog:r,...o}=i,{cancelRef:l}=nAe(QY,r),c=xu(r),h=Kt(t,l);return S.jsx(kE,{...c,...o,ref:h})});JY.displayName=QY;var sAe=({contentRef:i})=>{const t=`\`${Bp}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Bp}\` by passing a \`${WY}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Bp}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return M.useEffect(()=>{var o;document.getElementById((o=i.current)==null?void 0:o.getAttribute("aria-describedby"))||console.warn(t)},[t,i]),null},oAe=VY,aAe=GY,ZY=HY,eX=qY,tX=XY,nX=JY,rX=zY,iX=YY;const lAe=oAe,uAe=aAe,sX=M.forwardRef(({className:i,...t},r)=>S.jsx(ZY,{className:yt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...t,ref:r}));sX.displayName=ZY.displayName;const oX=M.forwardRef(({className:i,...t},r)=>S.jsxs(uAe,{children:[S.jsx(sX,{}),S.jsx(eX,{ref:r,className:yt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",i),...t})]}));oX.displayName=eX.displayName;const aX=({className:i,...t})=>S.jsx("div",{className:yt("flex flex-col space-y-2 text-center sm:text-left",i),...t});aX.displayName="AlertDialogHeader";const lX=({className:i,...t})=>S.jsx("div",{className:yt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",i),...t});lX.displayName="AlertDialogFooter";const uX=M.forwardRef(({className:i,...t},r)=>S.jsx(rX,{ref:r,className:yt("text-lg font-semibold",i),...t}));uX.displayName=rX.displayName;const cX=M.forwardRef(({className:i,...t},r)=>S.jsx(iX,{ref:r,className:yt("text-sm text-muted-foreground",i),...t}));cX.displayName=iX.displayName;const dX=M.forwardRef(({className:i,...t},r)=>S.jsx(tX,{ref:r,className:yt(RP(),i),...t}));dX.displayName=tX.displayName;const hX=M.forwardRef(({className:i,...t},r)=>S.jsx(nX,{ref:r,className:yt(RP({variant:"outline"}),"mt-2 sm:mt-0",i),...t}));hX.displayName=nX.displayName;function cAe(){const{data:i,isLoading:t}=FP(!0),r=i1e(),[o,l]=M.useState(!1),[c,h]=M.useState(null),[d,m]=M.useState(null),v=E=>{h(E),l(!0)},x=async()=>{if(d)try{await r.mutateAsync(d.id),gi.success(`"${d.name}" deleted`),m(null)}catch{gi.error("Failed to delete channel")}},T=()=>{l(!1),h(null)};return t?S.jsx(ds,{className:"bg-card border-border",children:S.jsx(hs,{className:"flex items-center justify-center py-12",children:S.jsx(tr,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):S.jsxs(S.Fragment,{children:[S.jsxs(ds,{className:"bg-card border-border",children:[S.jsxs(Ps,{className:"flex flex-row items-center justify-between",children:[S.jsxs(so,{className:"flex items-center gap-2 text-foreground",children:[S.jsx(su,{className:"h-5 w-5"}),"Channel Management"]}),S.jsxs(Ge,{onClick:()=>l(!0),size:"sm",className:"gap-2",children:[S.jsx(H4,{className:"h-4 w-4"}),"Add Channel"]})]}),S.jsx(hs,{children:(i==null?void 0:i.length)===0?S.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[S.jsx(su,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),S.jsx("p",{children:"No channels yet. Add your first channel!"})]}):S.jsx("div",{className:"space-y-2",children:i==null?void 0:i.map(E=>S.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[S.jsx("img",{src:E.logo_url||"/placeholder.svg",alt:E.name,className:"w-10 h-10 object-contain rounded-lg bg-background p-1"}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("p",{className:"font-medium text-foreground truncate",children:E.name}),E.is_active?S.jsxs(GL,{variant:"outline",className:"text-green-500 border-green-500/50 gap-1",children:[S.jsx(hE,{className:"h-3 w-3"}),"Active"]}):S.jsxs(GL,{variant:"outline",className:"text-muted-foreground gap-1",children:[S.jsx(Fo,{className:"h-3 w-3"}),"Inactive"]})]}),S.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[E.stream_type.toUpperCase(),"  ",E.category||"General"]})]}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(Ge,{variant:"ghost",size:"icon",onClick:()=>v(E),className:"h-8 w-8",children:S.jsx(Ece,{className:"h-4 w-4"})}),S.jsx(Ge,{variant:"ghost",size:"icon",onClick:()=>m(E),className:"h-8 w-8 text-destructive hover:text-destructive",children:S.jsx(mE,{className:"h-4 w-4"})})]})]},E.id))})})]}),o&&S.jsx(Y2e,{channel:c,onClose:T}),S.jsx(lAe,{open:!!d,onOpenChange:()=>m(null),children:S.jsxs(oX,{children:[S.jsxs(aX,{children:[S.jsx(uX,{children:"Delete Channel"}),S.jsxs(cX,{children:['Are you sure you want to delete "',d==null?void 0:d.name,'"? This action cannot be undone.']})]}),S.jsxs(lX,{children:[S.jsx(hX,{children:"Cancel"}),S.jsx(dX,{onClick:x,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})]})}const fX=M.forwardRef(({className:i,...t},r)=>S.jsx("textarea",{className:yt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:r,...t}));fX.displayName="Textarea";const dAe={enabled:!0,emoji:"",title:"Welcome to TVStreamz!",message:"Stream your favorite movies, TV shows, anime, and live TV channels for free. Enjoy unlimited entertainment anytime, anywhere!",button_text:"Start Watching ",tags:["Movies","TV Shows","Anime","Live TV"]},hAe=()=>{const[i,t]=M.useState(dAe),[r,o]=M.useState(!0),[l,c]=M.useState(!1),[h,d]=M.useState("");M.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:E,error:A}=await Bt.from("site_settings").select("value").eq("key","welcome_popup").single();if(A&&A.code!=="PGRST116")throw A;E!=null&&E.value&&t(E.value)}catch(E){console.error("Error fetching settings:",E),gi.error("Failed to load settings")}finally{o(!1)}},v=async()=>{c(!0);try{const{error:E}=await Bt.from("site_settings").update({value:i}).eq("key","welcome_popup");if(E)throw E;gi.success("Welcome popup settings saved!")}catch(E){console.error("Error saving settings:",E),gi.error("Failed to save settings")}finally{c(!1)}},x=()=>{h.trim()&&!i.tags.includes(h.trim())&&(t({...i,tags:[...i.tags,h.trim()]}),d(""))},T=E=>{t({...i,tags:i.tags.filter(A=>A!==E)})};return r?S.jsx("div",{className:"flex items-center justify-center p-8",children:S.jsx(tr,{className:"h-8 w-8 animate-spin text-primary"})}):S.jsxs(ds,{children:[S.jsxs(Ps,{children:[S.jsx(so,{children:"Welcome Popup Settings"}),S.jsx(VE,{children:"Customize the welcome popup that appears when users first visit the site"})]}),S.jsxs(hs,{className:"space-y-6",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx(Yn,{htmlFor:"enabled",children:"Enable Welcome Popup"}),S.jsx("p",{className:"text-sm text-muted-foreground",children:"Show popup on first visit"})]}),S.jsx(KE,{id:"enabled",checked:i.enabled,onCheckedChange:E=>t({...i,enabled:E})})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"emoji",children:"Emoji Icon"}),S.jsx(hr,{id:"emoji",value:i.emoji,onChange:E=>t({...i,emoji:E.target.value}),placeholder:"",className:"w-24 text-2xl text-center"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"title",children:"Title"}),S.jsx(hr,{id:"title",value:i.title,onChange:E=>t({...i,title:E.target.value}),placeholder:"Welcome to TVStreamz!"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"message",children:"Message"}),S.jsx(fX,{id:"message",value:i.message,onChange:E=>t({...i,message:E.target.value}),placeholder:"Your welcome message...",rows:3})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:"button_text",children:"Button Text"}),S.jsx(hr,{id:"button_text",value:i.button_text,onChange:E=>t({...i,button_text:E.target.value}),placeholder:"Start Watching "})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{children:"Tags"}),S.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:i.tags.map(E=>S.jsxs(GL,{variant:"secondary",className:"gap-1",children:[E,S.jsx("button",{onClick:()=>T(E),className:"ml-1 hover:text-destructive",children:S.jsx(Fo,{className:"h-3 w-3"})})]},E))}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx(hr,{value:h,onChange:E=>d(E.target.value),placeholder:"Add new tag...",onKeyDown:E=>E.key==="Enter"&&(E.preventDefault(),x())}),S.jsx(Ge,{type:"button",variant:"outline",size:"icon",onClick:x,children:S.jsx(H4,{className:"h-4 w-4"})})]})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{children:"Preview"}),S.jsx("div",{className:"border rounded-lg p-4 bg-gradient-to-br from-primary/10 to-primary/5",children:S.jsxs("div",{className:"text-center space-y-3",children:[S.jsx("div",{className:"text-4xl",children:i.emoji}),S.jsx("h3",{className:"text-xl font-bold",children:i.title}),S.jsx("p",{className:"text-sm text-muted-foreground",children:i.message}),S.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:i.tags.map(E=>S.jsx("span",{className:"px-2 py-1 bg-primary/20 rounded-full text-xs text-primary",children:E},E))}),S.jsx(Ge,{size:"sm",className:"mt-2",children:i.button_text})]})})]}),S.jsx(Ge,{onClick:v,disabled:l,className:"w-full",children:l?S.jsxs(S.Fragment,{children:[S.jsx(tr,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):S.jsxs(S.Fragment,{children:[S.jsx(HG,{className:"mr-2 h-4 w-4"}),"Save Settings"]})})]})]})};function fAe(){const{popups:i,availablePages:t,isLoading:r,isSaving:o,updatePopup:l,savePopups:c}=e1e(),h=async()=>{(await c()).success?gi.success("Page popup settings saved!"):gi.error("Failed to save settings")};return r?S.jsxs(ds,{className:"bg-card border-border",children:[S.jsxs(Ps,{children:[S.jsx(fh,{className:"h-6 w-48"}),S.jsx(fh,{className:"h-4 w-72"})]}),S.jsx(hs,{className:"space-y-4",children:[1,2,3].map(d=>S.jsx(fh,{className:"h-20 w-full"},d))})]}):S.jsxs(ds,{className:"bg-card border-border",children:[S.jsxs(Ps,{children:[S.jsxs(so,{className:"flex items-center gap-2",children:[S.jsx(VG,{className:"h-5 w-5"}),"Page Popup Settings"]}),S.jsx(VE,{children:"Configure popup URLs for different pages. When enabled, a new tab will open when users visit the page."})]}),S.jsxs(hs,{className:"space-y-6",children:[t.map(d=>{const m=i[d.id]||{enabled:!1,url:""};return S.jsxs("div",{className:"p-4 rounded-lg border border-border bg-muted/30 space-y-4",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx(Yn,{className:"text-base font-medium",children:d.label}),S.jsxs("p",{className:"text-sm text-muted-foreground",children:["/",d.id==="home"?"":d.id]})]}),S.jsx(KE,{checked:m.enabled,onCheckedChange:v=>l(d.id,{enabled:v})})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Yn,{htmlFor:`url-${d.id}`,children:"Popup URL"}),S.jsx(hr,{id:`url-${d.id}`,placeholder:"https://example.com/promo",value:m.url,onChange:v=>l(d.id,{url:v.target.value}),disabled:!m.enabled,className:m.enabled?"":"opacity-50"})]})]},d.id)}),S.jsx(Ge,{onClick:h,disabled:o,className:"w-full",children:o?S.jsxs(S.Fragment,{children:[S.jsx(tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):S.jsxs(S.Fragment,{children:[S.jsx(HG,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]})]})}function pAe(){var _,R,P,D;const i=Xc(),[t,r]=M.useState(!0),[o,l]=M.useState(!1),[c,h]=M.useState([]),[d,m]=M.useState([]),[v,x]=M.useState([]),[T,E]=M.useState({totalViews:0,todayViews:0,uniqueVisitors:0,weeklyVisitors:0});M.useEffect(()=>{A()},[]);const A=async()=>{try{const{data:{user:N}}=await Bt.auth.getUser();if(!N){i("/auth");return}const{data:$}=await Bt.from("user_roles").select("role").eq("user_id",N.id).eq("role","admin");if(!$||$.length===0){i("/");return}l(!0),await k()}catch(N){console.error("Error checking admin status:",N),i("/")}finally{r(!1)}},k=async()=>{const N=new Date,$=new Date(N.getFullYear(),N.getMonth(),N.getDate()),V=P9($,7);P9($,30);const{count:W}=await Bt.from("site_analytics").select("*",{count:"exact",head:!0}),{count:C}=await Bt.from("site_analytics").select("*",{count:"exact",head:!0}).gte("created_at",$.toISOString()),{data:K}=await Bt.from("site_analytics").select("visitor_id"),ee=new Set(K==null?void 0:K.map(be=>be.visitor_id)).size,{data:Q}=await Bt.from("site_analytics").select("visitor_id").gte("created_at",V.toISOString()),fe=new Set(Q==null?void 0:Q.map(be=>be.visitor_id)).size;E({totalViews:W||0,todayViews:C||0,uniqueVisitors:ee,weeklyVisitors:fe});const{data:O}=await Bt.rpc("get_daily_analytics_stats",{days_back:30}),re=(O||[]).map(be=>({date:B2e(new Date(be.stat_date),"MMM dd"),views:Number(be.view_count),visitors:Number(be.visitor_count)}));h(re);const{data:ce}=await Bt.from("site_analytics").select("content_title, content_type").not("content_id","is",null).limit(500),Ae=new Map;ce==null||ce.forEach(be=>{if(be.content_title){const Ce=be.content_title;Ae.has(Ce)||Ae.set(Ce,{type:be.content_type||"movie",count:0}),Ae.get(Ce).count++}});const se=[];Ae.forEach((be,Ce)=>{se.push({title:Ce,type:be.type,count:be.count})}),se.sort((be,Ce)=>Ce.count-be.count),m(se.slice(0,10));const{data:ue}=await Bt.from("site_analytics").select("page_path").limit(500),le=new Map;ue==null||ue.forEach(be=>{le.set(be.page_path,(le.get(be.page_path)||0)+1)});const pe=[];le.forEach((be,Ce)=>{pe.push({path:Ce,count:be})}),pe.sort((be,Ce)=>Ce.count-be.count),x(pe.slice(0,5))};return t?S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsxs("div",{className:"container mx-auto px-4 pt-24 pb-8",children:[S.jsx(fh,{className:"h-10 w-64 mb-8"}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[...Array(4)].map((N,$)=>S.jsx(fh,{className:"h-32"},$))}),S.jsx(fh,{className:"h-80 mb-8"})]})]}):o?S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsxs("div",{className:"container mx-auto px-4 pt-24 pb-8",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[S.jsx(GF,{className:"h-8 w-8 text-primary"}),S.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Admin Dashboard"})]}),S.jsxs(RY,{defaultValue:"analytics",className:"space-y-6",children:[S.jsxs(mD,{children:[S.jsxs(eh,{value:"analytics",className:"gap-2",children:[S.jsx(GF,{className:"h-4 w-4"}),"Analytics"]}),S.jsxs(eh,{value:"channels",className:"gap-2",children:[S.jsx(su,{className:"h-4 w-4"}),"Channels"]}),S.jsxs(eh,{value:"settings",className:"gap-2",children:[S.jsx(Tce,{className:"h-4 w-4"}),"Welcome Popup"]}),S.jsxs(eh,{value:"page-popups",className:"gap-2",children:[S.jsx(VG,{className:"h-4 w-4"}),"Page Popups"]})]}),S.jsxs(th,{value:"analytics",className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[S.jsxs(ds,{className:"bg-card border-border",children:[S.jsxs(Ps,{className:"flex flex-row items-center justify-between pb-2",children:[S.jsx(so,{className:"text-sm font-medium text-muted-foreground",children:"Total Views"}),S.jsx(PR,{className:"h-4 w-4 text-primary"})]}),S.jsxs(hs,{children:[S.jsx("div",{className:"text-2xl font-bold text-foreground",children:T.totalViews.toLocaleString()}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"All time page views"})]})]}),S.jsxs(ds,{className:"bg-card border-border",children:[S.jsxs(Ps,{className:"flex flex-row items-center justify-between pb-2",children:[S.jsx(so,{className:"text-sm font-medium text-muted-foreground",children:"Today's Views"}),S.jsx(dE,{className:"h-4 w-4 text-primary"})]}),S.jsxs(hs,{children:[S.jsx("div",{className:"text-2xl font-bold text-foreground",children:T.todayViews.toLocaleString()}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Views today"})]})]}),S.jsxs(ds,{className:"bg-card border-border",children:[S.jsxs(Ps,{className:"flex flex-row items-center justify-between pb-2",children:[S.jsx(so,{className:"text-sm font-medium text-muted-foreground",children:"Unique Visitors"}),S.jsx(xv,{className:"h-4 w-4 text-primary"})]}),S.jsxs(hs,{children:[S.jsx("div",{className:"text-2xl font-bold text-foreground",children:T.uniqueVisitors.toLocaleString()}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"All time unique visitors"})]})]}),S.jsxs(ds,{className:"bg-card border-border",children:[S.jsxs(Ps,{className:"flex flex-row items-center justify-between pb-2",children:[S.jsx(so,{className:"text-sm font-medium text-muted-foreground",children:"Weekly Visitors"}),S.jsx(gE,{className:"h-4 w-4 text-primary"})]}),S.jsxs(hs,{children:[S.jsx("div",{className:"text-2xl font-bold text-foreground",children:T.weeklyVisitors.toLocaleString()}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 7 days"})]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[S.jsxs(ds,{className:"bg-card border-border",children:[S.jsx(Ps,{children:S.jsxs(so,{className:"text-foreground flex items-center gap-2",children:[S.jsx(PR,{className:"h-5 w-5"}),"Views Trend ",c.length>0&&`(${(_=c[0])==null?void 0:_.date} - ${(R=c[c.length-1])==null?void 0:R.date})`]})}),S.jsx(hs,{children:S.jsx("div",{className:"h-72 overflow-y-auto pr-2 space-y-2 scrollbar-thin scrollbar-thumb-muted scrollbar-track-transparent",children:c.length===0?S.jsx("p",{className:"text-muted-foreground text-sm",children:"No data yet"}):c.slice().reverse().map((N,$)=>S.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[S.jsx("span",{className:"text-sm font-medium text-foreground",children:N.date}),S.jsxs("span",{className:"text-sm font-bold text-primary",children:[N.views.toLocaleString()," views"]})]},$))})})]}),S.jsxs(ds,{className:"bg-card border-border",children:[S.jsx(Ps,{children:S.jsxs(so,{className:"text-foreground flex items-center gap-2",children:[S.jsx(xv,{className:"h-5 w-5"}),"Daily Visitors ",c.length>0&&`(${(P=c[0])==null?void 0:P.date} - ${(D=c[c.length-1])==null?void 0:D.date})`]})}),S.jsx(hs,{children:S.jsx("div",{className:"h-72 overflow-y-auto pr-2 space-y-2 scrollbar-thin scrollbar-thumb-muted scrollbar-track-transparent",children:c.length===0?S.jsx("p",{className:"text-muted-foreground text-sm",children:"No data yet"}):c.slice().reverse().map((N,$)=>S.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[S.jsx("span",{className:"text-sm font-medium text-foreground",children:N.date}),S.jsxs("span",{className:"text-sm font-bold text-primary",children:[N.visitors.toLocaleString()," visitors"]})]},$))})})]})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[S.jsxs(ds,{className:"bg-card border-border",children:[S.jsx(Ps,{children:S.jsxs(so,{className:"flex items-center gap-2 text-foreground",children:[S.jsx(om,{className:"h-5 w-5"}),"Top Content"]})}),S.jsx(hs,{children:S.jsx("div",{className:"space-y-3",children:d.length===0?S.jsx("p",{className:"text-muted-foreground text-sm",children:"No content views yet"}):d.map((N,$)=>S.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsxs("span",{className:"text-lg font-bold text-primary",children:["#",$+1]}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium text-foreground line-clamp-1",children:N.title}),S.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:N.type})]})]}),S.jsxs("span",{className:"font-bold text-foreground",children:[N.count," views"]})]},$))})})]}),S.jsxs(ds,{className:"bg-card border-border",children:[S.jsx(Ps,{children:S.jsx(so,{className:"text-foreground",children:"Top Pages"})}),S.jsx(hs,{children:S.jsx("div",{className:"space-y-3",children:v.length===0?S.jsx("p",{className:"text-muted-foreground text-sm",children:"No page views yet"}):v.map((N,$)=>S.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsxs("span",{className:"text-lg font-bold text-primary",children:["#",$+1]}),S.jsx("p",{className:"font-medium text-foreground",children:N.path})]}),S.jsxs("span",{className:"font-bold text-foreground",children:[N.count," views"]})]},$))})})]})]})]}),S.jsx(th,{value:"channels",children:S.jsx(cAe,{})}),S.jsx(th,{value:"settings",children:S.jsx(hAe,{})}),S.jsx(th,{value:"page-popups",children:S.jsx(fAe,{})})]})]})]}):null}const pX="https://wmjebiejrjgfafsniqlx.supabase.co/functions/v1/mangadex-proxy",Dh=async i=>{const t=`${pX}?endpoint=${encodeURIComponent(i)}`,r=await fetch(t,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndtamViaWVqcmpnZmFmc25pcWx4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyOTk3NTYsImV4cCI6MjA4MTg3NTc1Nn0.Ki07Cmt9KVCpAYzIjThYe4IFK1la6jZAVGoblbbJ5po"}});if(!r.ok)throw new Error(`API request failed: ${r.status}`);return r.json()},gD=i=>`${pX}?image=${encodeURIComponent(i)}`,mAe=i=>{var r,o;if((r=i.title)!=null&&r.en)return i.title.en;if((o=i.title)!=null&&o["ja-ro"])return i.title["ja-ro"];const t=Object.keys(i.title||{})[0];return t?i.title[t]:"Unknown Title"},gAe=i=>{var r;if((r=i.description)!=null&&r.en)return i.description.en;const t=Object.keys(i.description||{})[0];return t?i.description[t]:""},vAe=i=>{var r,o;const t=(r=i.relationships)==null?void 0:r.find(l=>l.type==="cover_art");return(o=t==null?void 0:t.attributes)!=null&&o.fileName?`https://uploads.mangadex.org/covers/${i.id}/${t.attributes.fileName}.256.jpg`:null},D9=(i,t)=>{var o,l;const r=(o=i.relationships)==null?void 0:o.find(c=>c.type===t);return((l=r==null?void 0:r.attributes)==null?void 0:l.name)||null},py=i=>{var t,r;return{id:i.id,title:mAe(i.attributes),altTitles:((t=i.attributes.altTitles)==null?void 0:t.map(o=>Object.values(o)[0]))||[],description:gAe(i.attributes),status:i.attributes.status||"unknown",year:i.attributes.year,contentRating:i.attributes.contentRating||"safe",tags:((r=i.attributes.tags)==null?void 0:r.map(o=>{var l,c;return((c=(l=o.attributes)==null?void 0:l.name)==null?void 0:c.en)||""}).filter(Boolean))||[],coverUrl:vAe(i),author:D9(i,"author"),artist:D9(i,"artist")}},yAe=i=>{var r,o;const t=(r=i.relationships)==null?void 0:r.find(l=>l.type==="scanlation_group");return{id:i.id,title:i.attributes.title||"",chapter:i.attributes.chapter,volume:i.attributes.volume,pages:i.attributes.pages||0,publishAt:i.attributes.publishAt,scanlationGroup:((o=t==null?void 0:t.attributes)==null?void 0:o.name)||null,language:i.attributes.translatedLanguage||"en"}},xAe=async(i=20,t=0)=>{var r;try{const o=new URLSearchParams({limit:i.toString(),offset:t.toString(),"includes[]":"cover_art","order[followedCount]":"desc","contentRating[]":"safe","availableTranslatedLanguage[]":"en"});return((r=(await Dh(`/manga?${o}`)).data)==null?void 0:r.map(py))||[]}catch(o){return console.error("Error fetching popular manga:",o),[]}},TAe=async(i=20,t=0)=>{var r;try{const o=new URLSearchParams({limit:i.toString(),offset:t.toString(),"includes[]":"cover_art","order[latestUploadedChapter]":"desc","contentRating[]":"safe","availableTranslatedLanguage[]":"en"});return((r=(await Dh(`/manga?${o}`)).data)==null?void 0:r.map(py))||[]}catch(o){return console.error("Error fetching latest manga:",o),[]}},SAe=async(i,t=20,r=0)=>{var o;try{const l=new URLSearchParams({title:i,limit:t.toString(),offset:r.toString(),"includes[]":"cover_art","contentRating[]":"safe","availableTranslatedLanguage[]":"en"});return((o=(await Dh(`/manga?${l}`)).data)==null?void 0:o.map(py))||[]}catch(l){return console.error("Error searching manga:",l),[]}},vD=async i=>{try{const t=new URLSearchParams({"includes[]":"cover_art"});t.append("includes[]","author"),t.append("includes[]","artist");const r=await Dh(`/manga/${i}?${t}`);return r.data?py(r.data):null}catch(t){return console.error("Error fetching manga details:",t),null}},mX=async(i,t=100,r=0)=>{var o;try{const l=new URLSearchParams({limit:t.toString(),offset:r.toString(),"translatedLanguage[]":"en","includes[]":"scanlation_group","order[chapter]":"asc","contentRating[]":"safe"});return((o=(await Dh(`/manga/${i}/feed?${l}`)).data)==null?void 0:o.map(yAe))||[]}catch(l){return console.error("Error fetching chapters:",l),[]}},wAe=async i=>{try{const t=await Dh(`/at-home/server/${i}`);return t.baseUrl&&t.chapter?{baseUrl:t.baseUrl,hash:t.chapter.hash,data:t.chapter.data,dataSaver:t.chapter.dataSaver}:null}catch(t){return console.error("Error fetching chapter pages:",t),null}},N9=(i,t,r,o="data")=>{const l=`${i}/${o}/${t}/${r}`;return gD(l)},EAe=async(i,t=20,r=0)=>{var o;try{const l=new URLSearchParams({limit:t.toString(),offset:r.toString(),"includes[]":"cover_art","includedTags[]":i,"contentRating[]":"safe","availableTranslatedLanguage[]":"en","order[followedCount]":"desc"});return((o=(await Dh(`/manga?${l}`)).data)==null?void 0:o.map(py))||[]}catch(l){return console.error("Error fetching manga by tag:",l),[]}},bAe=[{id:"a3c67850-4684-404e-9b7f-c69850ee5da6",name:"Action"},{id:"4d32cc48-9f00-4cca-9b5a-a839f0764984",name:"Comedy"},{id:"b9af3a63-f058-46de-a9a0-e0c13906197a",name:"Drama"},{id:"cdc58593-87dd-415e-bbc0-2ec27bf404cc",name:"Fantasy"},{id:"423e2eae-a7a2-4a8b-ac03-a8351462d71d",name:"Romance"},{id:"f8f62932-27da-4fe4-8ee1-6779a8c5edba",name:"Slice of Life"},{id:"cdad7e68-1419-41dd-bdce-27753074a640",name:"Horror"},{id:"ee968100-4191-4968-93d3-f82d72be7e46",name:"Mystery"},{id:"caaa44eb-cd40-4177-b930-79d3ef2afe87",name:"School Life"},{id:"256c8bd9-4904-4360-bf4f-508a76d67183",name:"Sci-Fi"}],AAe=({manga:i})=>{const[t,r]=M.useState(!1);return S.jsxs(An,{to:`/manga/${i.id}`,className:"group relative block rounded-xl overflow-hidden bg-card transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[S.jsxs("div",{className:"aspect-[2/3] relative",children:[i.coverUrl&&!t?S.jsx("img",{src:gD(i.coverUrl),alt:i.title,className:"w-full h-full object-cover",loading:"lazy",onError:()=>r(!0)}):S.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:S.jsx(nl,{className:"w-12 h-12 text-muted-foreground"})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),S.jsx("div",{className:"absolute top-2 left-2",children:S.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${i.status==="completed"?"bg-green-500/90 text-white":i.status==="ongoing"?"bg-blue-500/90 text-white":"bg-muted text-muted-foreground"}`,children:i.status==="completed"?"Tapos":i.status==="ongoing"?"Ongoing":i.status})}),i.contentRating&&i.contentRating!=="safe"&&S.jsx("div",{className:"absolute top-2 right-2",children:S.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-red-500/90 text-white uppercase",children:i.contentRating})})]}),S.jsxs("div",{className:"p-3",children:[S.jsx("h3",{className:"font-semibold text-sm line-clamp-2 group-hover:text-primary transition-colors",children:i.title}),i.year&&S.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.year}),i.tags.length>0&&S.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:i.tags.slice(0,2).map(o=>S.jsx("span",{className:"px-1.5 py-0.5 text-[10px] bg-secondary rounded text-muted-foreground",children:o},o))})]})]})},IAe=[{id:"popular",label:" Popular"},{id:"latest",label:" Latest"}],CAe=()=>{const[i,t]=M.useState([]),[r,o]=M.useState("popular"),[l,c]=M.useState(null),[h,d]=M.useState(0),[m,v]=M.useState(!0),[x,T]=M.useState(!1),[E,A]=M.useState(""),[k,_]=M.useState(!1),[R,P]=M.useState(!0),D=20,N=async(C=!1)=>{const ee=(C?0:h)*D;try{let Q=[];E.trim()?Q=await SAe(E,D,ee):l?Q=await EAe(l,D,ee):r==="popular"?Q=await xAe(D,ee):Q=await TAe(D,ee),P(Q.length===D),C?(t(Q),d(1)):(t(fe=>[...fe,...Q]),d(fe=>fe+1))}catch(Q){console.error("Failed to fetch manga:",Q)}};M.useEffect(()=>{v(!0),t([]),d(0),N(!0).finally(()=>v(!1))},[r,l]);const $=async()=>{E.trim()&&(_(!0),v(!0),t([]),d(0),c(null),await N(!0),v(!1),_(!1))},V=()=>{A(""),v(!0),t([]),d(0),N(!0).finally(()=>v(!1))},W=async()=>{T(!0),await N(!1),T(!1)};return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsxs("main",{className:"container mx-auto px-4 pt-24 pb-8",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[S.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:S.jsx(nl,{className:"w-6 h-6 text-primary"})}),S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Manga"}),S.jsx("p",{className:"text-muted-foreground text-sm",children:"Browse at basahin ang manga  Powered by MangaDex"})]})]}),S.jsxs("div",{className:"flex gap-2 mb-6",children:[S.jsxs("div",{className:"relative flex-1 max-w-md",children:[S.jsx(hr,{type:"text",placeholder:"Search manga...",value:E,onChange:C=>A(C.target.value),onKeyDown:C=>C.key==="Enter"&&$(),className:"pr-10"}),E&&S.jsx("button",{onClick:V,className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:S.jsx(Fo,{className:"w-4 h-4"})})]}),S.jsx(Ge,{onClick:$,disabled:k,children:k?S.jsx(tr,{className:"w-4 h-4 animate-spin"}):S.jsx(q4,{className:"w-4 h-4"})})]}),S.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:IAe.map(C=>S.jsx(Ge,{variant:r===C.id&&!l&&!E?"default":"outline",size:"sm",onClick:()=>{o(C.id),c(null),A("")},children:C.label},C.id))}),S.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:bAe.map(C=>S.jsx(Ge,{variant:l===C.id?"default":"secondary",size:"sm",onClick:()=>{c(l===C.id?null:C.id),A("")},children:C.name},C.id))}),m?S.jsx("div",{className:"flex items-center justify-center py-20",children:S.jsx(tr,{className:"w-10 h-10 text-primary animate-spin"})}):i.length===0?S.jsxs("div",{className:"text-center py-20",children:[S.jsx(nl,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),S.jsx("p",{className:"text-muted-foreground",children:"Walang nakitang manga"})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:i.map(C=>S.jsx(AAe,{manga:C},C.id))}),R&&S.jsx("div",{className:"flex justify-center mt-8",children:S.jsx(Ge,{variant:"outline",size:"lg",onClick:W,disabled:x,children:x?S.jsxs(S.Fragment,{children:[S.jsx(tr,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):"Load More"})})]})]})]})},gX="https://wmjebiejrjgfafsniqlx.supabase.co/functions/v1/mangadex-proxy",yD=async i=>{const t=`${gX}?comick=${encodeURIComponent(i)}`,r=await fetch(t,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndtamViaWVqcmpnZmFmc25pcWx4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyOTk3NTYsImV4cCI6MjA4MTg3NTc1Nn0.Ki07Cmt9KVCpAYzIjThYe4IFK1la6jZAVGoblbbJ5po"}});if(!r.ok)throw new Error(`ComicK API request failed: ${r.status}`);return r.json()},kAe=i=>`${gX}?image=${encodeURIComponent(i)}`,_Ae=async i=>{try{const t=await yD(`/v1.0/search?q=${encodeURIComponent(i)}&limit=5`);if(t&&t.length>0){const r=i.toLowerCase().replace(/[^a-z0-9]/g,"");for(const o of t){const l=(o.title||"").toLowerCase().replace(/[^a-z0-9]/g,"");if(l===r||l.includes(r)||r.includes(l))return{hid:o.hid,slug:o.slug,title:o.title}}return{hid:t[0].hid,slug:t[0].slug,title:t[0].title}}return null}catch(t){return console.error("Error searching ComicK:",t),null}},vX=async(i,t=100)=>{try{const r=await yD(`/comic/${i}/chapters?lang=en&limit=${t}`);return r!=null&&r.chapters&&Array.isArray(r.chapters)?r.chapters.map(o=>{var l;return{id:o.hid,hid:o.hid,title:o.title||null,chap:o.chap||null,vol:o.vol||null,lang:o.lang||"en",created_at:o.created_at,group_name:((l=o.group_name)==null?void 0:l[0])||null}}).sort((o,l)=>{const c=parseFloat(o.chap||"0"),h=parseFloat(l.chap||"0");return c-h}):[]}catch(r){return console.error("Error fetching ComicK chapters:",r),[]}},RAe=async i=>{var t;try{const r=await yD(`/chapter/${i}`);return(t=r==null?void 0:r.chapter)!=null&&t.images&&Array.isArray(r.chapter.images)?r.chapter.images.map(o=>{const l=o.url||o.src||"";return kAe(l)}):[]}catch(r){return console.error("Error fetching ComicK chapter pages:",r),[]}},LAe=()=>{const{mangaId:i}=sy(),[t,r]=M.useState(null),[o,l]=M.useState([]),[c,h]=M.useState([]),[d,m]=M.useState(null),[v,x]=M.useState(!0),[T,E]=M.useState(!0),[A,k]=M.useState("mangadex"),[_,R]=M.useState(!1);if(M.useEffect(()=>{if(!i)return;(async()=>{x(!0),E(!0),k("mangadex"),h([]),m(null);const[V,W]=await Promise.all([vD(i),mX(i)]);if(r(V),l(W),x(!1),E(!1),W.length===0&&(V!=null&&V.title)){R(!0),console.log("No MangaDex chapters, searching ComicK for:",V.title);const C=await _Ae(V.title);if(C){console.log("Found on ComicK:",C),m(C.hid);const K=await vX(C.hid);K.length>0&&(h(K),k("comick"))}R(!1)}})()},[i]),v)return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsx("div",{className:"flex items-center justify-center pt-32",children:S.jsx(tr,{className:"w-10 h-10 text-primary animate-spin"})})]});if(!t)return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsxs("div",{className:"container mx-auto px-4 pt-24 text-center",children:[S.jsx(nl,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),S.jsx("p",{className:"text-muted-foreground",children:"Hindi nakita ang manga"}),S.jsx(An,{to:"/manga",children:S.jsxs(Ge,{variant:"outline",className:"mt-4",children:[S.jsx(tl,{className:"w-4 h-4 mr-2"}),"Bumalik sa Manga"]})})]})]});const P=t.coverUrl?gD(t.coverUrl.replace(".256.jpg",".512.jpg")):null,D=A==="mangadex"?o:c,N=D.length>0;return S.jsxs("div",{className:"min-h-screen bg-background",children:[S.jsx(ai,{}),S.jsxs("div",{className:"relative pt-16",children:[P&&S.jsx("div",{className:"absolute inset-0 h-80 bg-cover bg-center opacity-20 blur-2xl",style:{backgroundImage:`url(${P})`}}),S.jsxs("div",{className:"relative container mx-auto px-4 py-8",children:[S.jsxs(An,{to:"/manga",className:"inline-flex items-center text-muted-foreground hover:text-foreground mb-6",children:[S.jsx(tl,{className:"w-4 h-4 mr-2"}),"Bumalik sa Manga"]}),S.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[S.jsx("div",{className:"flex-shrink-0",children:P?S.jsx("img",{src:P,alt:t.title,className:"w-48 md:w-64 rounded-xl shadow-2xl mx-auto md:mx-0"}):S.jsx("div",{className:"w-48 md:w-64 aspect-[2/3] rounded-xl bg-muted flex items-center justify-center",children:S.jsx(nl,{className:"w-16 h-16 text-muted-foreground"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-2",children:t.title}),S.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground mb-4",children:[t.year&&S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(dE,{className:"w-4 h-4"}),t.year]}),t.author&&S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(KG,{className:"w-4 h-4"}),t.author]}),t.artist&&t.artist!==t.author&&S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(wce,{className:"w-4 h-4"}),t.artist]})]}),S.jsxs("div",{className:"flex gap-2 mb-4",children:[S.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${t.status==="completed"?"bg-green-500/20 text-green-500":t.status==="ongoing"?"bg-blue-500/20 text-blue-500":"bg-muted text-muted-foreground"}`,children:t.status==="completed"?" Tapos":t.status==="ongoing"?" Ongoing":t.status}),S.jsxs("span",{className:"px-3 py-1 text-sm bg-secondary rounded-full",children:[D.length," chapters"]}),A==="comick"&&S.jsx("span",{className:"px-3 py-1 text-sm bg-orange-500/20 text-orange-500 rounded-full",children:"via ComicK"})]}),t.tags.length>0&&S.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.map($=>S.jsx("span",{className:"px-2 py-1 text-xs bg-primary/10 text-primary rounded-lg",children:$},$))}),t.description&&S.jsx("p",{className:"text-muted-foreground leading-relaxed line-clamp-4 md:line-clamp-none",children:t.description}),N&&S.jsx(An,{to:A==="mangadex"?`/manga/${i}/read/${o[0].id}`:`/manga/${i}/read-comick/${c[0].hid}?hid=${d}`,children:S.jsxs(Ge,{size:"lg",className:"mt-6",children:[S.jsx(nl,{className:"w-5 h-5 mr-2"}),"Basahin ang Chapter 1"]})})]})]})]})]}),S.jsxs("div",{className:"container mx-auto px-4 py-8",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-xl font-bold",children:" Chapters"}),A==="comick"&&S.jsxs("span",{className:"text-xs text-orange-500 flex items-center gap-1",children:[S.jsx(bce,{className:"w-3 h-3"}),"Chapters mula sa ComicK"]})]}),T||_?S.jsxs("div",{className:"flex items-center justify-center py-10 flex-col gap-2",children:[S.jsx(tr,{className:"w-6 h-6 text-primary animate-spin"}),_&&S.jsx("p",{className:"text-sm text-muted-foreground",children:"Hinahanap sa ComicK..."})]}):N?A==="mangadex"?S.jsx(Ah,{className:"h-[400px] rounded-lg border",children:S.jsx("div",{className:"divide-y divide-border",children:o.map(($,V)=>S.jsxs(An,{to:`/manga/${i}/read/${$.id}`,className:"flex items-center justify-between p-4 hover:bg-secondary/50 transition-colors",children:[S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsxs("span",{className:"font-medium",children:[$.volume&&`Vol. ${$.volume} `,"Chapter ",$.chapter||V+1]}),$.title&&S.jsxs("span",{className:"text-muted-foreground truncate",children:["- ",$.title]})]}),S.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[$.scanlationGroup&&S.jsx("span",{children:$.scanlationGroup}),S.jsx("span",{children:new Date($.publishAt).toLocaleDateString()}),S.jsxs("span",{children:[$.pages," pages"]})]})]}),S.jsx(yv,{className:"w-5 h-5 text-muted-foreground"})]},$.id))})}):S.jsx(Ah,{className:"h-[400px] rounded-lg border",children:S.jsx("div",{className:"divide-y divide-border",children:c.map(($,V)=>S.jsxs(An,{to:`/manga/${i}/read-comick/${$.hid}?hid=${d}`,className:"flex items-center justify-between p-4 hover:bg-secondary/50 transition-colors",children:[S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsxs("span",{className:"font-medium",children:[$.vol&&`Vol. ${$.vol} `,"Chapter ",$.chap||V+1]}),$.title&&S.jsxs("span",{className:"text-muted-foreground truncate",children:["- ",$.title]})]}),S.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[$.group_name&&S.jsx("span",{children:$.group_name}),S.jsx("span",{children:new Date($.created_at).toLocaleDateString()}),S.jsx("span",{className:"text-orange-500",children:"ComicK"})]})]}),S.jsx(yv,{className:"w-5 h-5 text-muted-foreground"})]},$.hid))})}):S.jsxs("div",{className:"text-center py-10",children:[S.jsx("p",{className:"text-muted-foreground",children:"Walang available na English chapters"}),S.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Hindi nakita sa MangaDex at ComicK"})]}),S.jsxs("p",{className:"text-center text-xs text-muted-foreground mt-8",children:["Data provided by"," ",S.jsx("a",{href:"https://mangadex.org",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"MangaDex"}),A==="comick"&&S.jsxs(S.Fragment,{children:[" & ",S.jsx("a",{href:"https://comick.io",target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:underline",children:"ComicK"})]})]})]})]})},PAe=()=>{const{mangaId:i,chapterId:t}=sy(),r=Xc(),[o,l]=M.useState(null),[c,h]=M.useState([]),[d,m]=M.useState(null),[v,x]=M.useState(null),[T,E]=M.useState(0),[A,k]=M.useState(!0),[_,R]=M.useState("page"),[P,D]=M.useState(!0),[N,$]=M.useState("data");M.useEffect(()=>{if(!i)return;(async()=>{const[re,ce]=await Promise.all([vD(i),mX(i)]);l(re),h(ce)})()},[i]),M.useEffect(()=>{if(!t)return;(async()=>{k(!0),E(0);const re=await wAe(t);x(re);const ce=c.find(Ae=>Ae.id===t);m(ce||null),k(!1)})()},[t,c]),M.useEffect(()=>{const O=re=>{_==="page"&&(re.key==="ArrowLeft"||re.key==="a"?C():(re.key==="ArrowRight"||re.key==="d")&&W())};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[T,v,_]);const V=(v==null?void 0:v.data.length)||0,W=M.useCallback(()=>{if(T<V-1)E(O=>O+1);else{const O=c.findIndex(re=>re.id===t);O<c.length-1&&r(`/manga/${i}/read/${c[O+1].id}`)}},[T,V,c,t,i,r]),C=M.useCallback(()=>{if(T>0)E(O=>O-1);else{const O=c.findIndex(re=>re.id===t);O>0&&r(`/manga/${i}/read/${c[O-1].id}`)}},[T,c,t,i,r]),K=O=>{r(`/manga/${i}/read/${O}`)},ee=c.findIndex(O=>O.id===t),Q=ee>0,fe=ee<c.length-1;return A?S.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:S.jsx(tr,{className:"w-10 h-10 text-primary animate-spin"})}):!v||v.data.length===0?S.jsxs("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center p-4",children:[S.jsx(nl,{className:"w-16 h-16 text-muted-foreground mb-4"}),S.jsx("p",{className:"text-muted-foreground mb-4",children:"Hindi ma-load ang pages"}),S.jsx(An,{to:`/manga/${i}`,children:S.jsxs(Ge,{variant:"outline",children:[S.jsx(tl,{className:"w-4 h-4 mr-2"}),"Bumalik sa Manga"]})})]}):S.jsxs("div",{className:"min-h-screen bg-black text-white",onClick:()=>_==="page"&&D(!P),children:[S.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/90 to-transparent p-4 transition-opacity duration-300 ${P?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:O=>O.stopPropagation(),children:S.jsxs("div",{className:"container mx-auto flex items-center justify-between gap-4",children:[S.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[S.jsx(An,{to:`/manga/${i}`,children:S.jsx(Ge,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",children:S.jsx(tl,{className:"w-5 h-5"})})}),S.jsxs("div",{className:"min-w-0",children:[S.jsx("p",{className:"font-medium truncate",children:o==null?void 0:o.title}),S.jsxs("p",{className:"text-sm text-gray-400",children:["Chapter ",(d==null?void 0:d.chapter)||"?",(d==null?void 0:d.title)&&` - ${d.title}`]})]})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsxs(mu,{value:t,onValueChange:K,children:[S.jsx(sl,{className:"w-32 md:w-40 bg-white/10 border-white/20 text-white",children:S.jsx(gu,{placeholder:"Chapter"})}),S.jsx(ol,{children:c.map(O=>S.jsxs(kr,{value:O.id,children:["Ch. ",O.chapter||"?"]},O.id))})]}),S.jsx(Ge,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",onClick:()=>R(_==="page"?"longstrip":"page"),title:_==="page"?"Switch to Long Strip":"Switch to Page Mode",children:_==="page"?S.jsx(jG,{className:"w-5 h-5"}):S.jsx($G,{className:"w-5 h-5"})}),S.jsx(Ge,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",onClick:()=>$(N==="data"?"data-saver":"data"),title:N==="data"?"Using HD Quality":"Using Data Saver",children:S.jsx(kce,{className:`w-5 h-5 ${N==="data-saver"?"text-yellow-400":""}`})}),S.jsx(An,{to:"/manga",children:S.jsx(Ge,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",children:S.jsx(fE,{className:"w-5 h-5"})})})]})]})}),_==="page"?S.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 pt-20 pb-24",children:[S.jsx("img",{src:N9(v.baseUrl,v.hash,N==="data"?v.data[T]:v.dataSaver[T],N),alt:`Page ${T+1}`,className:"max-w-full max-h-[calc(100vh-120px)] object-contain",loading:"eager"}),S.jsx("div",{className:"absolute left-0 top-0 w-1/3 h-full cursor-pointer",onClick:O=>{O.stopPropagation(),C()}}),S.jsx("div",{className:"absolute right-0 top-0 w-1/3 h-full cursor-pointer",onClick:O=>{O.stopPropagation(),W()}})]}):S.jsx("div",{className:"pt-20 pb-24",children:S.jsx("div",{className:"max-w-3xl mx-auto",children:(N==="data"?v.data:v.dataSaver).map((O,re)=>S.jsx("img",{src:N9(v.baseUrl,v.hash,O,N),alt:`Page ${re+1}`,className:"w-full",loading:"lazy"},re))})}),S.jsx("div",{className:`fixed bottom-0 left-0 right-0 z-50 bg-gradient-to-t from-black/90 to-transparent p-4 transition-opacity duration-300 ${P?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:O=>O.stopPropagation(),children:S.jsxs("div",{className:"container mx-auto",children:[_==="page"&&S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.jsx("span",{className:"text-sm tabular-nums",children:T+1}),S.jsx("input",{type:"range",min:0,max:V-1,value:T,onChange:O=>E(Number(O.target.value)),className:"flex-1 accent-primary"}),S.jsx("span",{className:"text-sm tabular-nums",children:V})]}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs(Ge,{variant:"ghost",disabled:!Q,onClick:()=>Q&&K(c[ee-1].id),className:"text-white hover:bg-white/10",children:[S.jsx(Zv,{className:"w-5 h-5 mr-1"}),"Prev Chapter"]}),_==="page"&&S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Ge,{variant:"ghost",size:"icon",onClick:C,className:"text-white hover:bg-white/10",children:S.jsx(tl,{className:"w-5 h-5"})}),S.jsxs("span",{className:"text-sm tabular-nums px-2",children:[T+1," / ",V]}),S.jsx(Ge,{variant:"ghost",size:"icon",onClick:W,className:"text-white hover:bg-white/10",children:S.jsx(UG,{className:"w-5 h-5"})})]}),S.jsxs(Ge,{variant:"ghost",disabled:!fe,onClick:()=>fe&&K(c[ee+1].id),className:"text-white hover:bg-white/10",children:["Next Chapter",S.jsx(yv,{className:"w-5 h-5 ml-1"})]})]})]})})]})},DAe=()=>{const{mangaId:i,chapterId:t}=sy(),[r]=oq(),o=r.get("hid"),l=Xc(),[c,h]=M.useState(null),[d,m]=M.useState([]),[v,x]=M.useState(null),[T,E]=M.useState([]),[A,k]=M.useState(0),[_,R]=M.useState(!0),[P,D]=M.useState("page"),[N,$]=M.useState(!0);M.useEffect(()=>{if(!i||!o)return;(async()=>{const[re,ce]=await Promise.all([vD(i),vX(o)]);h(re),m(ce)})()},[i,o]),M.useEffect(()=>{if(!t)return;(async()=>{R(!0),k(0);const re=await RAe(t);E(re);const ce=d.find(Ae=>Ae.hid===t);x(ce||null),R(!1)})()},[t,d]),M.useEffect(()=>{const O=re=>{P==="page"&&(re.key==="ArrowLeft"||re.key==="a"?C():(re.key==="ArrowRight"||re.key==="d")&&W())};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[A,T,P]);const V=T.length,W=M.useCallback(()=>{if(A<V-1)k(O=>O+1);else{const O=d.findIndex(re=>re.hid===t);O<d.length-1&&l(`/manga/${i}/read-comick/${d[O+1].hid}?hid=${o}`)}},[A,V,d,t,i,o,l]),C=M.useCallback(()=>{if(A>0)k(O=>O-1);else{const O=d.findIndex(re=>re.hid===t);O>0&&l(`/manga/${i}/read-comick/${d[O-1].hid}?hid=${o}`)}},[A,d,t,i,o,l]),K=O=>{l(`/manga/${i}/read-comick/${O}?hid=${o}`)},ee=d.findIndex(O=>O.hid===t),Q=ee>0,fe=ee<d.length-1;return _?S.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:S.jsx(tr,{className:"w-10 h-10 text-primary animate-spin"})}):T.length===0?S.jsxs("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center p-4",children:[S.jsx(nl,{className:"w-16 h-16 text-muted-foreground mb-4"}),S.jsx("p",{className:"text-muted-foreground mb-4",children:"Hindi ma-load ang pages"}),S.jsx(An,{to:`/manga/${i}`,children:S.jsxs(Ge,{variant:"outline",children:[S.jsx(tl,{className:"w-4 h-4 mr-2"}),"Bumalik sa Manga"]})})]}):S.jsxs("div",{className:"min-h-screen bg-black text-white",onClick:()=>P==="page"&&$(!N),children:[S.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/90 to-transparent p-4 transition-opacity duration-300 ${N?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:O=>O.stopPropagation(),children:S.jsxs("div",{className:"container mx-auto flex items-center justify-between gap-4",children:[S.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[S.jsx(An,{to:`/manga/${i}`,children:S.jsx(Ge,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",children:S.jsx(tl,{className:"w-5 h-5"})})}),S.jsxs("div",{className:"min-w-0",children:[S.jsx("p",{className:"font-medium truncate",children:c==null?void 0:c.title}),S.jsxs("p",{className:"text-sm text-gray-400",children:["Chapter ",(v==null?void 0:v.chap)||"?",(v==null?void 0:v.title)&&` - ${v.title}`,S.jsx("span",{className:"ml-2 text-orange-400 text-xs",children:"(ComicK)"})]})]})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsxs(mu,{value:t,onValueChange:K,children:[S.jsx(sl,{className:"w-32 md:w-40 bg-white/10 border-white/20 text-white",children:S.jsx(gu,{placeholder:"Chapter"})}),S.jsx(ol,{children:d.map(O=>S.jsxs(kr,{value:O.hid,children:["Ch. ",O.chap||"?"]},O.hid))})]}),S.jsx(Ge,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",onClick:()=>D(P==="page"?"longstrip":"page"),title:P==="page"?"Switch to Long Strip":"Switch to Page Mode",children:P==="page"?S.jsx(jG,{className:"w-5 h-5"}):S.jsx($G,{className:"w-5 h-5"})}),S.jsx(An,{to:"/manga",children:S.jsx(Ge,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",children:S.jsx(fE,{className:"w-5 h-5"})})})]})]})}),P==="page"?S.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 pt-20 pb-24",children:[S.jsx("img",{src:T[A],alt:`Page ${A+1}`,className:"max-w-full max-h-[calc(100vh-120px)] object-contain",loading:"eager"}),S.jsx("div",{className:"absolute left-0 top-0 w-1/3 h-full cursor-pointer",onClick:O=>{O.stopPropagation(),C()}}),S.jsx("div",{className:"absolute right-0 top-0 w-1/3 h-full cursor-pointer",onClick:O=>{O.stopPropagation(),W()}})]}):S.jsx("div",{className:"pt-20 pb-24",children:S.jsx("div",{className:"max-w-3xl mx-auto",children:T.map((O,re)=>S.jsx("img",{src:O,alt:`Page ${re+1}`,className:"w-full",loading:"lazy"},re))})}),S.jsx("div",{className:`fixed bottom-0 left-0 right-0 z-50 bg-gradient-to-t from-black/90 to-transparent p-4 transition-opacity duration-300 ${N?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:O=>O.stopPropagation(),children:S.jsxs("div",{className:"container mx-auto",children:[P==="page"&&S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.jsx("span",{className:"text-sm tabular-nums",children:A+1}),S.jsx("input",{type:"range",min:0,max:V-1,value:A,onChange:O=>k(Number(O.target.value)),className:"flex-1 accent-primary"}),S.jsx("span",{className:"text-sm tabular-nums",children:V})]}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs(Ge,{variant:"ghost",disabled:!Q,onClick:()=>Q&&K(d[ee-1].hid),className:"text-white hover:bg-white/10",children:[S.jsx(Zv,{className:"w-5 h-5 mr-1"}),"Prev Chapter"]}),P==="page"&&S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Ge,{variant:"ghost",size:"icon",onClick:C,className:"text-white hover:bg-white/10",children:S.jsx(tl,{className:"w-5 h-5"})}),S.jsxs("span",{className:"text-sm tabular-nums px-2",children:[A+1," / ",V]}),S.jsx(Ge,{variant:"ghost",size:"icon",onClick:W,className:"text-white hover:bg-white/10",children:S.jsx(UG,{className:"w-5 h-5"})})]}),S.jsxs(Ge,{variant:"ghost",disabled:!fe,onClick:()=>fe&&K(d[ee+1].hid),className:"text-white hover:bg-white/10",children:["Next Chapter",S.jsx(yv,{className:"w-5 h-5 ml-1"})]})]})]})})]})},NAe=()=>{const i=Yc();return M.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",i.pathname)},[i.pathname]),S.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:S.jsxs("div",{className:"text-center",children:[S.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),S.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),S.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})};var yX={exports:{}},xX={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm=M;function MAe(i,t){return i===t&&(i!==0||1/i===1/t)||i!==i&&t!==t}var OAe=typeof Object.is=="function"?Object.is:MAe,jAe=fm.useState,UAe=fm.useEffect,FAe=fm.useLayoutEffect,BAe=fm.useDebugValue;function $Ae(i,t){var r=t(),o=jAe({inst:{value:r,getSnapshot:t}}),l=o[0].inst,c=o[1];return FAe(function(){l.value=r,l.getSnapshot=t,M_(l)&&c({inst:l})},[i,r,t]),UAe(function(){return M_(l)&&c({inst:l}),i(function(){M_(l)&&c({inst:l})})},[i]),BAe(r),r}function M_(i){var t=i.getSnapshot;i=i.value;try{var r=t();return!OAe(i,r)}catch{return!0}}function VAe(i,t){return t()}var GAe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?VAe:$Ae;xX.useSyncExternalStore=fm.useSyncExternalStore!==void 0?fm.useSyncExternalStore:GAe;yX.exports=xX;var HAe=yX.exports;function qAe(){return HAe.useSyncExternalStore(KAe,()=>!0,()=>!1)}function KAe(){return()=>{}}var xD="Avatar",[zAe]=Fs(xD),[WAe,TX]=zAe(xD),SX=M.forwardRef((i,t)=>{const{__scopeAvatar:r,...o}=i,[l,c]=M.useState("idle");return S.jsx(WAe,{scope:r,imageLoadingStatus:l,onImageLoadingStatusChange:c,children:S.jsx(xt.span,{...o,ref:t})})});SX.displayName=xD;var wX="AvatarImage",EX=M.forwardRef((i,t)=>{const{__scopeAvatar:r,src:o,onLoadingStatusChange:l=()=>{},...c}=i,h=TX(wX,r),d=YAe(o,c),m=Gr(v=>{l(v),h.onImageLoadingStatusChange(v)});return Nr(()=>{d!=="idle"&&m(d)},[d,m]),d==="loaded"?S.jsx(xt.img,{...c,ref:t,src:o}):null});EX.displayName=wX;var bX="AvatarFallback",AX=M.forwardRef((i,t)=>{const{__scopeAvatar:r,delayMs:o,...l}=i,c=TX(bX,r),[h,d]=M.useState(o===void 0);return M.useEffect(()=>{if(o!==void 0){const m=window.setTimeout(()=>d(!0),o);return()=>window.clearTimeout(m)}},[o]),h&&c.imageLoadingStatus!=="loaded"?S.jsx(xt.span,{...l,ref:t}):null});AX.displayName=bX;function M9(i,t){return i?t?(i.src!==t&&(i.src=t),i.complete&&i.naturalWidth>0?"loaded":"loading"):"error":"idle"}function YAe(i,{referrerPolicy:t,crossOrigin:r}){const o=qAe(),l=M.useRef(null),c=o?(l.current||(l.current=new window.Image),l.current):null,[h,d]=M.useState(()=>M9(c,i));return Nr(()=>{d(M9(c,i))},[c,i]),Nr(()=>{const m=T=>()=>{d(T)};if(!c)return;const v=m("loaded"),x=m("error");return c.addEventListener("load",v),c.addEventListener("error",x),t&&(c.referrerPolicy=t),typeof r=="string"&&(c.crossOrigin=r),()=>{c.removeEventListener("load",v),c.removeEventListener("error",x)}},[c,r,t]),h}var IX=SX,CX=EX,kX=AX;const _X=M.forwardRef(({className:i,...t},r)=>S.jsx(IX,{ref:r,className:yt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",i),...t}));_X.displayName=IX.displayName;const RX=M.forwardRef(({className:i,...t},r)=>S.jsx(CX,{ref:r,className:yt("aspect-square h-full w-full",i),...t}));RX.displayName=CX.displayName;const LX=M.forwardRef(({className:i,...t},r)=>S.jsx(kX,{ref:r,className:yt("flex h-full w-full items-center justify-center rounded-full bg-muted",i),...t}));LX.displayName=kX.displayName;var zE="Popover",[PX]=Fs(zE,[wm]),my=wm(),[XAe,Zc]=PX(zE),DX=i=>{const{__scopePopover:t,children:r,open:o,defaultOpen:l,onOpenChange:c,modal:h=!1}=i,d=my(t),m=M.useRef(null),[v,x]=M.useState(!1),[T,E]=hu({prop:o,defaultProp:l??!1,onChange:c,caller:zE});return S.jsx(AH,{...d,children:S.jsx(XAe,{scope:t,contentId:ou(),triggerRef:m,open:T,onOpenChange:E,onOpenToggle:M.useCallback(()=>E(A=>!A),[E]),hasCustomAnchor:v,onCustomAnchorAdd:M.useCallback(()=>x(!0),[]),onCustomAnchorRemove:M.useCallback(()=>x(!1),[]),modal:h,children:r})})};DX.displayName=zE;var NX="PopoverAnchor",QAe=M.forwardRef((i,t)=>{const{__scopePopover:r,...o}=i,l=Zc(NX,r),c=my(r),{onCustomAnchorAdd:h,onCustomAnchorRemove:d}=l;return M.useEffect(()=>(h(),()=>d()),[h,d]),S.jsx(TE,{...c,...o,ref:t})});QAe.displayName=NX;var MX="PopoverTrigger",OX=M.forwardRef((i,t)=>{const{__scopePopover:r,...o}=i,l=Zc(MX,r),c=my(r),h=Kt(t,l.triggerRef),d=S.jsx(xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":$X(l.open),...o,ref:h,onClick:st(i.onClick,l.onOpenToggle)});return l.hasCustomAnchor?d:S.jsx(TE,{asChild:!0,...c,children:d})});OX.displayName=MX;var TD="PopoverPortal",[JAe,ZAe]=PX(TD,{forceMount:void 0}),jX=i=>{const{__scopePopover:t,forceMount:r,children:o,container:l}=i,c=Zc(TD,t);return S.jsx(JAe,{scope:t,forceMount:r,children:S.jsx(yo,{present:r||c.open,children:S.jsx(Xv,{asChild:!0,container:l,children:o})})})};jX.displayName=TD;var pm="PopoverContent",UX=M.forwardRef((i,t)=>{const r=ZAe(pm,i.__scopePopover),{forceMount:o=r.forceMount,...l}=i,c=Zc(pm,i.__scopePopover);return S.jsx(yo,{present:o||c.open,children:c.modal?S.jsx(tIe,{...l,ref:t}):S.jsx(nIe,{...l,ref:t})})});UX.displayName=pm;var eIe=Th("PopoverContent.RemoveScroll"),tIe=M.forwardRef((i,t)=>{const r=Zc(pm,i.__scopePopover),o=M.useRef(null),l=Kt(t,o),c=M.useRef(!1);return M.useEffect(()=>{const h=o.current;if(h)return gP(h)},[]),S.jsx(IE,{as:eIe,allowPinchZoom:!0,children:S.jsx(FX,{...i,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:st(i.onCloseAutoFocus,h=>{var d;h.preventDefault(),c.current||(d=r.triggerRef.current)==null||d.focus()}),onPointerDownOutside:st(i.onPointerDownOutside,h=>{const d=h.detail.originalEvent,m=d.button===0&&d.ctrlKey===!0,v=d.button===2||m;c.current=v},{checkForDefaultPrevented:!1}),onFocusOutside:st(i.onFocusOutside,h=>h.preventDefault(),{checkForDefaultPrevented:!1})})})}),nIe=M.forwardRef((i,t)=>{const r=Zc(pm,i.__scopePopover),o=M.useRef(!1),l=M.useRef(!1);return S.jsx(FX,{...i,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var h,d;(h=i.onCloseAutoFocus)==null||h.call(i,c),c.defaultPrevented||(o.current||(d=r.triggerRef.current)==null||d.focus(),c.preventDefault()),o.current=!1,l.current=!1},onInteractOutside:c=>{var m,v;(m=i.onInteractOutside)==null||m.call(i,c),c.defaultPrevented||(o.current=!0,c.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const h=c.target;((v=r.triggerRef.current)==null?void 0:v.contains(h))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.current&&c.preventDefault()}})}),FX=M.forwardRef((i,t)=>{const{__scopePopover:r,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:c,disableOutsidePointerEvents:h,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:v,onInteractOutside:x,...T}=i,E=Zc(pm,r),A=my(r);return mP(),S.jsx(bE,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:l,onUnmountAutoFocus:c,children:S.jsx(ym,{asChild:!0,disableOutsidePointerEvents:h,onInteractOutside:x,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:v,onDismiss:()=>E.onOpenChange(!1),children:S.jsx(sP,{"data-state":$X(E.open),role:"dialog",id:E.contentId,...A,...T,ref:t,style:{...T.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),BX="PopoverClose",rIe=M.forwardRef((i,t)=>{const{__scopePopover:r,...o}=i,l=Zc(BX,r);return S.jsx(xt.button,{type:"button",...o,ref:t,onClick:st(i.onClick,()=>l.onOpenChange(!1))})});rIe.displayName=BX;var iIe="PopoverArrow",sIe=M.forwardRef((i,t)=>{const{__scopePopover:r,...o}=i,l=my(r);return S.jsx(oP,{...l,...o,ref:t})});sIe.displayName=iIe;function $X(i){return i?"open":"closed"}var oIe=DX,aIe=OX,lIe=jX,VX=UX;const uIe=oIe,cIe=aIe,GX=M.forwardRef(({className:i,align:t="center",sideOffset:r=4,...o},l)=>S.jsx(lIe,{children:S.jsx(VX,{ref:l,align:t,sideOffset:r,className:yt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i),...o})}));GX.displayName=VX.displayName;const O9={Smileys:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Gestures:["","","","","","","","","","","","","","","","","","","","","","","","",""],Hearts:["","","","","","","","","","","","","","","","","","",""],Objects:["","","","","","","","","","","","","","","","","","","","","","","",""],Animals:["","","","","","","","","","","","","","","","","","","","","","","",""],Food:["","","","","","","","","","","","","","","","","","","","","","","",""]},dIe=({onEmojiSelect:i})=>{const[t,r]=M.useState(!1),[o,l]=M.useState("Smileys"),c=h=>{i(h),r(!1)};return S.jsxs(uIe,{open:t,onOpenChange:r,children:[S.jsx(cIe,{asChild:!0,children:S.jsx(Ge,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9",children:S.jsx(Lce,{className:"w-5 h-5 text-muted-foreground"})})}),S.jsxs(GX,{className:"w-72 p-2",side:"top",align:"end",sideOffset:8,children:[S.jsx("div",{className:"flex gap-1 mb-2 overflow-x-auto pb-1 scrollbar-hide",children:Object.keys(O9).map(h=>S.jsx("button",{onClick:()=>l(h),className:`px-2 py-1 text-xs rounded-md whitespace-nowrap transition-colors ${o===h?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:h},h))}),S.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-40 overflow-y-auto",children:O9[o].map((h,d)=>S.jsx("button",{onClick:()=>c(h),className:"text-xl p-1 hover:bg-muted rounded transition-colors",children:h},d))})]})]})},hIe="https://api.dicebear.com/7.x/bottts/svg?seed=admin&backgroundColor=0ea5e9",fIe=()=>{const[i,t]=M.useState(!1),[r,o]=M.useState([]),[l,c]=M.useState(""),[h,d]=M.useState(null),[m,v]=M.useState(null),[x,T]=M.useState(!1),[E,A]=M.useState(!1),[k,_]=M.useState(!1),[R,P]=M.useState(""),[D,N]=M.useState(""),$=M.useRef(null),{toast:V}=B4(),W="global-chat";M.useEffect(()=>{const{data:{subscription:se}}=Bt.auth.onAuthStateChange((ue,le)=>{d((le==null?void 0:le.user)??null),le!=null&&le.user?setTimeout(()=>{K(le.user.id),C(le.user.id)},0):(v(null),T(!1))});return Bt.auth.getSession().then(({data:{session:ue}})=>{d((ue==null?void 0:ue.user)??null),ue!=null&&ue.user&&(K(ue.user.id),C(ue.user.id))}),()=>se.unsubscribe()},[]);const C=async se=>{const{data:ue}=await Bt.from("user_roles").select("role").eq("user_id",se).eq("role","admin").maybeSingle();T(!!ue)},K=async se=>{const{data:ue}=await Bt.from("profiles").select("*").eq("user_id",se).maybeSingle();v(ue)};M.useEffect(()=>{if(!i)return;(async()=>{const{data:le}=await Bt.from("live_chat_messages").select("*").eq("channel_id",W).order("created_at",{ascending:!0}).limit(100);le&&o(le)})();const ue=Bt.channel(`floating-chat-${W}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"live_chat_messages",filter:`channel_id=eq.${W}`},le=>{o(pe=>[...pe,le.new])}).on("postgres_changes",{event:"DELETE",schema:"public",table:"live_chat_messages",filter:`channel_id=eq.${W}`},le=>{o(pe=>pe.filter(be=>be.id!==le.old.id))}).subscribe();return()=>{Bt.removeChannel(ue)}},[i]),M.useEffect(()=>{$.current&&($.current.scrollTop=$.current.scrollHeight)},[r]);const ee=async se=>{if(se.preventDefault(),!R.trim()){V({title:"Error",description:"Username is required",variant:"destructive"});return}A(!0);const le=`${Math.random().toString(36).substring(2,15)}@livechat.local`,pe=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);localStorage.setItem("chat_credentials",JSON.stringify({email:le,password:pe}));const{data:be,error:Ce}=await Bt.auth.signUp({email:le,password:pe});if(Ce){V({title:"Error",description:"Failed to create account",variant:"destructive"}),A(!1);return}if(be.user){const{error:ke}=await Bt.from("profiles").insert({user_id:be.user.id,username:R.trim(),avatar_url:D.trim()||null});ke?V({title:"Error",description:"Failed to create profile",variant:"destructive"}):(_(!1),V({title:"Success",description:"You can now chat!"}))}A(!1)},Q=async se=>{if(se.preventDefault(),!l.trim()||!h)return;const ue=x?"Admin":m==null?void 0:m.username,le=x?hIe:m==null?void 0:m.avatar_url;if(!ue)return;A(!0);const{error:pe}=await Bt.from("live_chat_messages").insert({channel_id:W,user_id:h.id,username:ue,avatar_url:le,message:l.trim()});pe?V({title:"Error",description:"Failed to send message",variant:"destructive"}):c(""),A(!1)},fe=se=>{c(ue=>ue+se)},O=se=>se.slice(0,2).toUpperCase(),re=()=>{if(i){t(!1);return}(!h||!m&&!x)&&_(!0),t(!0)},ce=se=>se==="Admin",Ae=async se=>{const{error:ue}=await Bt.from("live_chat_messages").delete().eq("id",se);ue?V({title:"Error",description:"Failed to delete message",variant:"destructive"}):(o(le=>le.filter(pe=>pe.id!==se)),V({title:"Deleted",description:"Message removed"}))};return S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:re,className:"fixed bottom-20 md:bottom-6 right-4 md:right-6 z-40 bg-primary hover:bg-primary/90 text-primary-foreground rounded-full p-3 md:p-4 shadow-lg transition-all duration-200 hover:scale-105",children:S.jsx(DR,{className:"w-5 h-5 md:w-6 md:h-6"})}),i&&S.jsxs("div",{className:"fixed bottom-36 md:bottom-24 right-4 md:right-6 z-50 w-[calc(100%-2rem)] sm:w-96 max-w-96 max-h-[60vh] md:max-h-[500px] bg-card border border-border rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in slide-in-from-bottom-5 duration-200",children:[S.jsxs("div",{className:"bg-primary text-primary-foreground p-4 flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(DR,{className:"w-5 h-5"}),S.jsx("span",{className:"font-semibold",children:"Live Chat"}),S.jsxs("span",{className:"text-xs opacity-75",children:["(",r.length,")"]})]}),S.jsx("button",{onClick:()=>t(!1),className:"hover:opacity-75",children:S.jsx(Fo,{className:"w-5 h-5"})})]}),k&&!m&&!x?S.jsxs("form",{onSubmit:ee,className:"p-4 space-y-4",children:[S.jsxs("div",{className:"text-center mb-4",children:[S.jsx(KG,{className:"w-12 h-12 mx-auto text-muted-foreground mb-2"}),S.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your username to start chatting"})]}),S.jsx(hr,{value:R,onChange:se=>P(se.target.value),placeholder:"Username *",maxLength:30,required:!0}),S.jsx(hr,{value:D,onChange:se=>N(se.target.value),placeholder:"Avatar URL (optional)",type:"url"}),S.jsx(Ge,{type:"submit",className:"w-full",disabled:E,children:E?"Setting up...":"Start Chatting"})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{ref:$,className:"flex-1 min-h-0 overflow-y-scroll p-3",style:{maxHeight:"calc(60vh - 140px)"},children:S.jsx("div",{className:"space-y-3",children:r.length===0?S.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"No messages yet. Start the conversation!"}):r.map(se=>S.jsxs("div",{className:"flex gap-2 group",children:[S.jsxs(_X,{className:"w-8 h-8 flex-shrink-0",children:[S.jsx(RX,{src:se.avatar_url||void 0}),S.jsx(LX,{className:`text-xs ${ce(se.username)?"bg-primary text-primary-foreground":"bg-primary/10 text-primary"}`,children:ce(se.username)?S.jsx(HF,{className:"w-4 h-4"}):O(se.username)})]}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsxs("p",{className:"text-xs flex items-center gap-1",children:[ce(se.username)&&S.jsx(HF,{className:"w-3.5 h-3.5 text-primary"}),S.jsx("span",{className:`font-medium ${ce(se.username)?"text-primary font-bold":"text-primary"}`,children:se.username}),S.jsx("span",{className:"text-muted-foreground text-[10px]",children:new Date(se.created_at).toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit"})}),x&&S.jsx("button",{onClick:()=>Ae(se.id),className:"ml-auto p-1 hover:bg-destructive/10 rounded opacity-60 hover:opacity-100 transition-opacity",title:"Delete message",children:S.jsx(mE,{className:"w-3 h-3 text-destructive"})})]}),S.jsx("p",{className:"text-sm break-words",children:se.message})]})]},se.id))})}),m||x?S.jsxs("form",{onSubmit:Q,className:"p-3 border-t border-border flex items-center gap-2",children:[S.jsx(dIe,{onEmojiSelect:fe}),S.jsx(hr,{value:l,onChange:se=>c(se.target.value),placeholder:"Type a message...",className:"text-sm flex-1",maxLength:500}),S.jsx(Ge,{type:"submit",size:"icon",disabled:E||!l.trim(),children:S.jsx(Ice,{className:"w-4 h-4"})})]}):S.jsx("div",{className:"p-3 border-t border-border",children:S.jsx(Ge,{onClick:()=>_(!0),className:"w-full",children:"Set up profile to chat"})})]})]})]})},pIe=new Jfe,mIe=()=>S.jsx(rpe,{client:pIe,children:S.jsx(vme,{attribute:"class",defaultTheme:"dark",enableSystem:!0,children:S.jsxs(Mfe,{children:[S.jsx(gde,{}),S.jsx(Qde,{}),S.jsxs(fme,{children:[S.jsxs("div",{className:"pb-16 md:pb-0",children:[S.jsxs(sme,{children:[S.jsx(pi,{path:"/",element:S.jsx(jye,{})}),S.jsx(pi,{path:"/movies",element:S.jsx(Jye,{})}),S.jsx(pi,{path:"/tv-shows",element:S.jsx(Zye,{})}),S.jsx(pi,{path:"/anime",element:S.jsx(t1e,{})}),S.jsx(pi,{path:"/manga",element:S.jsx(CAe,{})}),S.jsx(pi,{path:"/manga/:mangaId",element:S.jsx(LAe,{})}),S.jsx(pi,{path:"/manga/:mangaId/read/:chapterId",element:S.jsx(PAe,{})}),S.jsx(pi,{path:"/manga/:mangaId/read-comick/:chapterId",element:S.jsx(DAe,{})}),S.jsx(pi,{path:"/live-tv",element:S.jsx(O1e,{})}),S.jsx(pi,{path:"/live/:channelId",element:S.jsx(GEe,{})}),S.jsx(pi,{path:"/watch/:type/:id",element:S.jsx(zEe,{})}),S.jsx(pi,{path:"/search",element:S.jsx(hbe,{})}),S.jsx(pi,{path:"/my-list",element:S.jsx(pbe,{})}),S.jsx(pi,{path:"/continue-watching",element:S.jsx(mbe,{})}),S.jsx(pi,{path:"/auth",element:S.jsx(Nbe,{})}),S.jsx(pi,{path:"/admin",element:S.jsx(pAe,{})}),S.jsx(pi,{path:"*",element:S.jsx(NAe,{})})]}),S.jsx(fD,{})]}),S.jsx(fIe,{})]})]})})});oG(document.getElementById("root")).render(S.jsx(mIe,{}));
